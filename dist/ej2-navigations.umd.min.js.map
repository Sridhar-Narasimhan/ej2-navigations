/*!
*  filename: ej2-navigations.umd.min.js.map
*  version : 1.0.25
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-navigations.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_12__","__WEBPACK_EXTERNAL_MODULE_17__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","index_3","index_4","index_5","index_6","__export","hasOwnProperty","Object","defineProperty","value","apply","h_scroll_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","HScroll","_super","options","element","preRender","browser","Browser","info","name","browserCheck","isDevice","ieCheck","initialize","getUniqueID","uniqueId","style","display","enableRtl","classList","add","render","touchModule","Touch","scroll","touchHandler","bind","createNavIcon","EventHandler","scrollEle","scrollHandler","createElement","className","scrollDiv","setAttribute","ele","innerEle","slice","children","_i","innerEle_1","ele_1","appendChild","overflowX","scrollItems","getPersistData","keyEntity","addOnPersist","getModuleName","destroy","remove","nav","selectAll","_a","elem","removeAttribute","detach","concat","clsRight","navItem","CLS_NAVRIGHTARROW","clsLeft","navEle","navLeftItem","CLS_NAVLEFTARROW","insertBefore","firstChild","eventBinding","onKeyPress","e","_this","timeoutFun_1","keyTimeout","eleScrolling","keyTimer","window","setTimeout","onKeyUp","click","clearTimeout","forEach","el","tapHold","tabHoldHandler","tapHoldThreshold","addEventListener","repeatScroll","preventDefault","clickEventHandler","clearInterval","timeout","trgt","originalEvent","contains","firstElementChild","timeoutFun","setInterval","scrollDis","rootEle","querySelector","scrlLeft","scrollLeft","scrollStep","distance","distanceX","scrollDirection","arrowDisabling","addDisable","removeDisable","width","offsetWidth","navLeftEle","navRightEle","Math","ceil","scrollWidth","disEle","onPropertyChanged","newProp","oldProp","keys","Component","Property","NotifyPropertyChanges","toolbar_1","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","ej2_popups_2","ej2_buttons_1","CLS_ITEMS","CLS_ITEM","CLS_POPUP","Item","ChildProperty","Toolbar","keyConfigs","moveLeft","moveRight","moveUp","moveDown","popupOpen","popupClose","tab","home","end","unwireEvents","removeChild","trgtEle","ctrlTem","clearProperty","popObj","attrb","trigger","scrollModule","wireEvents","clickHandler","resize","keyModule","KeyboardEvents","keyAction","keyActionHandler","docKeyDown","keyCode","isVisible","hide","duration","destroyHScroll","document","docEvent","tbarEle","tbarAlgEle","lefts","centers","rights","popEle","closest","tbarAlign","destroyItems","querySelectorAll","destroyMode","popupRefresh","val","elementFocus","fChild","focus","activeEleSwitch","clstElement","tbrNavChk","keyHandling","clst","navChk","scrollChk","popAnimate","action","eleFocus","nodes","popupCheck","popFrstEle","lastElementChild","activeEle","activeEleRemove","top","offsetHeight","show","tbarScrollChk","pos","sib","skipEle","parentElement","isNullOrUndefined","clsList","isPopupElement","popupNav","popupClickHandler","itemObj","items","indexOf","eventArgs","item","cancel","CLS_RTL","position","X","Y","offsetX","dataBind","renderControl","formatUnit","height","setStyleAttribute","ariaAttr","role","aria-disabled","aria-haspopup","aria-orientation","attributes","renderItems","renderOverflowMode","itemPositioning","initHScroll","innerItems","checkOverflow","overflow","itemWidthCal","parseFloat","getComputedStyle","marginRight","innerItem","itemWidth","eleWidth","popNav","scrollNav","refreshOverflow","offsetWid","overflowMode","getElementsByClassName","removePositioning","createPopupEle","innerNav","createPopupIcon","checkPriority","createPopup","pushingPoppedEle","tbarObj","popupPri","eleHeight","nodeIndex","poppedEle","nodePri","index","tbResize","push","childNodes","tbarElement","eleItem","popupInit","popupEle","maxHeight","popup","Popup","relateTo","offsetY","open","close","appendTo","toolEle","popupElePos","offsetTop","calculatePosition","popIcon","scrollVal","scrollY","innerHeight","overflowHeight","inEle","pre","len","eleWid","sepCheck","itemCount","itemPopCount","checkClass","rVal","cls","mrgn","marginLeft","tbarEleMrgn","offsetLeft","sepEle","minWidth","popedEle","CLS_POPUPDOWN","tbarPriRef","indx","sepPri","des","elWid","wid","ig","ignoreCount","priEleCnt","eleSep","ignoreCheck","eleSepWidth","prevSep","previousElementSibling","popupEleRefresh","ignoreEleFetch","ignoreEle","ignoreInx","count","eleSplice","this_1","elWidth","btnText","btn","align","sepBeforePri_1","refreshPositioning","margin","tbarWid","popWid","left","right","tbarItemAlign","itemEle","alignDiv","alignEle","leftAlign_1","ctrlTemplate","cloneNode","tagName","itemEleDom","innerPos","renderSubComponent","toLowerCase","setAttr","attr","keyVal","enableItems","isEnable","elements","enable","removeClass","addClass","addItems","itemsDiv","itemAgn","items_1","type","algIndex","splice","parentNode","removeItems","args","parseInt","toString","removeItemByIndex","eleIdx","indexAgn","templateRender","templateProp","isComponent","itemType","eleObj","templateFn","trim","compile","outerHTML","tempArray","buttonRendering","dom","iconCss","iconPos","textStr","text","btnTxt","innerHTML","prefixIcon","suffixIcon","Button","iconPosition","htmlAttributes","tooltipText","cssClass","template","itemClick","showTextOn","sTxt","currentTarget","curEle","tEle","Collection","Event","toolbarBuilder","CreateBuilder","accordion_1","ej2_base_6","CLS_HEADER","CLS_CONTENT","AccordionActionSettings","AccordionAnimationSettings","Complex","effect","easing","AccordionItem","Accordion","enter","space","isDestroy","nested","isNested","expandedItems","aria-multiselectable","initExpand","expandMode","select","initItemExpand","rippleEffect","selector","eventName","focusIn","focusOut","content","innerEles","header","tabindex","aria-level","headerEle","toggleIconGenerate","aria-labelledby","aria-hidden","tglIcon","hdrColIcon","expandItem","renderInnerItem","childElementCount","acrdnItem","acrdnHdr","acrdnCtn","acrdnCtnItem","acrdActive","getIndexByItem","contentRendering","ariaAttrUpdate","cntclkCheck","acrdAniEle","acrdAniEle_1","sameContentCheck","getAttribute","sameHeader","acrdnCtn_1","acrdnRoot","expandState","collapse","expand","eleMoveFocus","clstItem","nextElementSibling","headerEleGenerate","aria-expanded","aria-selected","ctnEle","hdrEle","fetchElement","hdr","expanded","enablePersistence","hdrIcnEle","icon","hdrIcon","isHeader","temString","eleVal","itemcnt","ctn","trgtItemEle","animation","timingFunction","isExpanded","eff","expandedItemsPush","expandProgress","expandAnimation","ef","icn","animate","trgtHgt","begin","progress","minHeight","Animation","expandedItemsPop","collapseProgress","collapseAnimation","trgtItEl","trgtHeight","itemHeight","remain","itemAttribUpdate","itemLen","addItem","innerItemEle","expandedItemRefresh","removeItem","hideItem","isHidden","enableItem","eleHeader","isExpand","itemExpand","acrdn","accordionBuilder","context_menu_1","ej2_lists_1","FOCUSED","HEADER","SELECTED","WRAPPER","HIDE","MenuItem","ContextMenu","navIdx","isTapHold","ejInst","getValue","ul","wrapper","body","setValue","initWrapper","getWrapper","zIndex","getZIndex","ListBase","createJsonFromElement","createItems","append","targetElem","isIos","cmenuHandler","getScrollableParents","parent_1","moverHandler","mouseDownHandler","keyboardModule","keyBoardHandler","downarrow","uparrow","leftarrow","rightarrow","escape","closeMenu","elemStyle","parentCollection","regex","parentEle","parentStyle","test","overflowY","upDownKeyHandler","rightEnterKeyHandler","leftEscKeyHandler","cul","defaultIdx","fliIdx","fli","getLIByClass","getIdx","cli","isValidLI","getItem","openMenu","toRawObject","sli","canOpen","changedTouches","clientY","clientX","ulIndex","isMenuVisible","cnt","toggleAnimation","getItems","valueOf","filter","split","li","liItem","beforeOpenEventArgs","lastChild","data","ICONS","hdata","hli","createItem","getIndex","textContent","parentItem","event","setPosition","showIcon","moduleName","listOpt","itemClass","createListItemFromJson","toggleVisiblity","collide","isCollide","offset","fit","Number","replace","x","xCollision","visibility","hasField","listBaseOptions","itemCreating","curData","itemCreated","separator","span","createList","menuItems","properties","getLI","showItemOnClick","field","isInstLI","setLISelected","pop","showSubMenu","cliIdx","culIdx","idx","classname","skipHdr","toggle","unWireEvents","parent_2","isMenuOpen","animationSettings","getBoundingClientRect","isCallBack","unshift","showItems","showHideItems","hideItems","ishide","iitems","insertAfter","insertItems","isAfter","menuitem","props","defaultView","getPropertyValue","max","removeProperty","contextMenuBuilder","tab_1","CLS_TB_ITEMS","CLS_TB_ITEM","CLS_TB_POPUP","TabActionSettings","TabAnimationSettings","Header","TabItem","Tab","prevIndex","animateOptions","animObj","title","delete","tbObj","isTemplate","cntEle","isPopup","initRender","css","setCssClass","aria-activedescendant","renderContainer","setOrientation","headerPlacement","renderHeader","tbItems","renderContent","bdrLine","CLS_INDICATOR","scrCnt","setContentHeight","selectedItem","setRTL","tabItems","btnCls","CLS_ICONS","attrs","hdrItems","aria-controls","txt","cont","wrap","tabIndex","parseObject","clicked","setCloseButton","showCloseButton","setProperties","hdrItem","contents","inHTML","tbCount","tItems","isReplace","disabled","tHtml","txtEmpty","tCont","attrObj","tItem","removeActiveClass","hdrActEle","no","extIndex","findEle","checkPopupOverflow","tbPop","tbrItems","popupHandler","ripEle","tbItem","actEleId","prevEle","trg","refreshActElePosition","prevCtnAnimation","prev","current","previous","next","triggerPrevAnimation","oldCnt","animateObj","triggerAnimation","newCnt","prevActiveEle","idNo","openEff","clsEff","setActiveBorder","keyPressed","trgParent","trgIndex","getEleIndex","getContent","tempEle","cntHTML","place","list","heightAdjustMode","getHeight","cs","hsCnt","bar","tbWidth","setActive","isNaN","trg_1","enableAnimation","eleTrg","curActItem","refreshItemVisibility","eventArg","previousItem","prevItem","previousIndex","selectedIndex","setItems","refreshActiveBorder","hoverHandler","spaceKeyDown","swipe","swipeHandler","keyHandler","tabKeyModule","openPopup","shiftTab","removeEventListener","removeTab","velocity","swipeDirection","which","actEle","ej2_instances","activeElement","nxtSib","nextSibling","scrBar","scrStart","scrEnd","eleStart","eleEnd","eleViewRange","L10n","locale","getConstant","enableTab","addTab","addedItems","removingArgs","removedItem","removedIndex","cntTrg","removedArgs","hideTab","disable","tempHdrEle","tabBuilder","treeview_1","ej2_data_1","ej2_base_7","ROOT","COLLAPSIBLE","EXPANDABLE","LISTITEM","LISTTEXT","PARENTITEM","HOVER","ACTIVE","PROCESS","ICON","TEXTWRAP","INPUT","SIBLING","DROPNEXT","POPUP","CHECK","CHECKBOXWRAP","FOCUS","treeAriaAttr","treeRole","itemRole","listRole","itemText","FieldsSettings","ActionSettings","NodeAnimationSettings","TreeView","checkActionNodes","dragStartAction","f2","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","ctrlA","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","mouseDownStatus","listBaseOption","expandCollapse","fields","expandIconClass","ariaAttributes","expandIconPosition","beforeNodeCreate","url","navigateUrl","aniObj","treeList","isLoaded","selectedNodes","checkedNodes","setDataBinding","setExpandOnType","setRipple","wireEditingEvents","allowEditing","setDragAndDrop","allowDragAndDrop","setEnableRtl","setFullRow","fullRowSelect","setTouchPopup","allowMultiSelection","setMultiSelect","nodeTemplateFn","templateComplier","nodeTemplate","rippleModel","ignore","rippleFn","iconModel","isCenterRipple","rippleIconFn","isEnabled","styles","popupClick","stopImmediatePropagation","dataSource","DataManager","executeQuery","getQuery","then","treeData","result","isNumberTypeId","setRootData","finalize","rootData","mapper","query","columns","clone","Query","prop","getActualProperties","col","from","tableName","addSorting","sortOrder","parentID","where","dataType","getDataType","groupedData","getGroupedData","rootItems","getChildNodes","isSorted","level","ulElement","getSortedData","finalizeNode","showCheckBox","checkboxEle","createCheckBox","addCheck","isChecked","createFullRow","addActionClass","selected","textEle","node","nodeData","ds","child","hasChildren","groupBy","cusQuery","group","getDataSource","grpItem","j","sNodes","selectNode","cNodes","eNodes","renderChildNodes","updateList","nodes_1","checkBox","ensureParentCheckState","checkBoxEle","changeState","parentUL","currentParent","ensureChildCheckState","childElement","checkBoxes","checkedState","currentLoadData","doCheckBoxAction","doCheck","liEle","getElement","validateCheckNode","state","isPrevent","isAdd","ariaState","currLi","getCheckEvent","frameSpan","removeCheck","isUndefined","checked","getNodeData","isInteracted","firstNode","doSelectionAction","sUids","sNode","selectGivenNodes","preventContextMenu","removeHover","setFocusElement","checkWrapper","checkElement","triggerClickEvent","expandAction","collapseNode","multiSelect","txtWrap","posLeft","posTop","toggleSelect","nodeCheckingEvent","isCheck","nodeCheckedEvent","expandNode","start","proxy","setHeight","animateHeight","expandArgs","colArgs","getExpandEvent","remaining","timeStamp","currentHeight","parentLi","expandChild","eicon","childItems","parents","mapper_1","getChildFields","ensureCheckNode","renderSubChild","nodeLevel","dataLevel","getChildMapper","obj","parentId","isRoot","getChildGroup","objlen","cIcons","curLi","ctrlKey","isActive","unselectNode","getSelectEvent","removeSelectAll","shiftKey","startNode","startIndex","liList","endIndex","temp","currNode","addSelect","removeSelect","focusedNode","getFocusedNode","selectedLI","selectedLI_1","expandOnType","expandOn","expandHandler","expandCollapseAction","nodeName","inpEle","blur","oldText","checkNode","openNode","navigateNode","navigateRootNode","createTextbox","checkWrap","toBeOpened","focusNextNode","setFocus","isTowards","isBackwards","rootNode","getRootNode","getEndNode","fNode","nextNode","getNextNode","getPrevNode","prevNode","endNode","preNode","onMouseOver","currentLi","setHover","onMouseLeave","hoveredNode","pNode","pid","reRenderNodes","oldClass","newClass","editingHandler","getEditEvent","nodeValue","inputEle","setSelectionRange","wireInputEvents","inputFocusOut","newText","txtEle","toBind","initializeDrag","destroyDrag","virtualEle","dragObj","Draggable","enableTailMode","cursorAt","dragTarget","helper","sender","dragRoot","dragWrap","dragLi","isSameNode","cloneEle","DRAGITEM","nLen","cNode","cursor","dragData","dragStart","getDragEvent","drag","dragAction","dragStop","removeVirtualEle","dropTarget","dropRoot","dropObj","Droppable","out","over","drop","dropAction","dropWrap","dropLi","isDescendant","virEle","renderVirtualEle","draggable","droppedElement","appendNode","dropAsSiblingNode","dropAsChildNode","dropUl","dragParentUl","dragParentLi","updateElement","updateInstance","dropParentUl","expandParent","dropIcon","generateIcon","generateUL","dragIcon","sibEle","dropData","draggedNode","draggedNodeData","droppedNode","droppedNodeData","addFullRow","toAdd","rowDiv","addMultiSelect","liEles","liEles_1","liEles_2","collapseByLevel","excludeHiddenNodes","getVisibleNodes","collapseAllNodes","expandByLevel","expandAllNodes","eIcons","vNodes","removeNode","updateSelectedNodes","doGivenAction","toExpand","addGivenNodes","isRemote","updateMapper","refNode","doDisableAction","doEnableAction","proxy_1","touchEditObj","doubleTap","wireClickEvent","proxy_2","touchClickObj","tap","wireExpandOnEvent","proxy_3","touchExpandObj","matched","matches","parent","setCheckedNodes","JSON","parse","stringify","uncheckAll","checkAll","addNodes","collapseAll","disableNodes","enableAll","liEle_1","ensureVisible","expandAll","scrollIntoView","getNode","getNodeDetails","moveNodes","sourceNodes","removeNodes","replaceText","treeViewHelper"],"mappings":"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","file":"ej2-navigations.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-lists\"), require(\"@syncfusion/ej2-data\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-lists\", \"@syncfusion/ej2-data\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-lists\"), require(\"@syncfusion/ej2-data\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-lists\"], root[\"@syncfusion/ej2-data\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_17__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(4), __webpack_require__(8), __webpack_require__(10), __webpack_require__(13), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2, index_3, index_4, index_5, index_6) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t    __export(index_3);\n\t    __export(index_4);\n\t    __export(index_5);\n\t    __export(index_6);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, h_scroll_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(h_scroll_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ROOT = 'e-hscroll';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_HSCROLLBAR = 'e-hscroll-bar';\n\t    var CLS_HSCROLLCON = 'e-hscroll-content';\n\t    var CLS_NAVARROW = 'e-nav-arrow';\n\t    var CLS_NAVRIGHTARROW = 'e-nav-right-arrow';\n\t    var CLS_NAVLEFTARROW = 'e-nav-left-arrow';\n\t    var CLS_HSCROLLNAV = 'e-scroll-nav';\n\t    var CLS_HSCROLLNAVRIGHT = 'e-scroll-right-nav';\n\t    var CLS_HSCROLLNAVLEFT = 'e-scroll-left-nav';\n\t    var CLS_DEVICE = 'e-scroll-device';\n\t    var HScroll = (function (_super) {\n\t        __extends(HScroll, _super);\n\t        function HScroll(options, element) {\n\t            return _super.call(this, options, element) || this;\n\t        }\n\t        HScroll.prototype.preRender = function () {\n\t            this.browser = ej2_base_2.Browser.info.name;\n\t            this.browserCheck = this.browser === 'mozilla';\n\t            this.isDevice = ej2_base_2.Browser.isDevice;\n\t            var element = this.element;\n\t            this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n\t            this.initialize();\n\t            if (element.id === '') {\n\t                element.id = ej2_base_1.getUniqueID('hscroll');\n\t                this.uniqueId = true;\n\t            }\n\t            element.style.display = 'block';\n\t            if (this.enableRtl) {\n\t                element.classList.add(CLS_RTL);\n\t            }\n\t        };\n\t        HScroll.prototype.render = function () {\n\t            this.touchModule = new ej2_base_1.Touch(this.element, { scroll: this.touchHandler.bind(this) });\n\t            if (!this.isDevice) {\n\t                this.createNavIcon(this.element);\n\t                ej2_base_1.EventHandler.add(this.scrollEle, 'scroll', this.scrollHandler, this);\n\t            }\n\t            else {\n\t                this.element.classList.add(CLS_DEVICE);\n\t            }\n\t        };\n\t        HScroll.prototype.initialize = function () {\n\t            var scrollEle = ej2_base_2.createElement('div', { className: CLS_HSCROLLCON });\n\t            var scrollDiv = ej2_base_2.createElement('div', { className: CLS_HSCROLLBAR });\n\t            scrollDiv.setAttribute('tabindex', '-1');\n\t            var ele = this.element;\n\t            var innerEle = [].slice.call(ele.children);\n\t            for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {\n\t                var ele_1 = innerEle_1[_i];\n\t                scrollEle.appendChild(ele_1);\n\t            }\n\t            scrollDiv.appendChild(scrollEle);\n\t            ele.appendChild(scrollDiv);\n\t            scrollDiv.style.overflowX = 'hidden';\n\t            this.scrollEle = scrollDiv;\n\t            this.scrollItems = scrollEle;\n\t        };\n\t        HScroll.prototype.getPersistData = function () {\n\t            var keyEntity = ['scrollStep'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        HScroll.prototype.getModuleName = function () {\n\t            return 'hScroll';\n\t        };\n\t        HScroll.prototype.destroy = function () {\n\t            var ele = this.element;\n\t            ele.style.display = '';\n\t            ele.classList.remove(CLS_ROOT);\n\t            var nav = ej2_base_1.selectAll('#' + ele.id + '_nav.e-' + ele.id + '_nav');\n\t            for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {\n\t                var elem = _a[_i];\n\t                ele.appendChild(elem);\n\t            }\n\t            if (this.uniqueId) {\n\t                this.element.removeAttribute('id');\n\t            }\n\t            ej2_base_2.detach(this.scrollEle);\n\t            if (nav.length > 0) {\n\t                ej2_base_2.detach(nav[0]);\n\t                ej2_base_2.detach(nav[1]);\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.scrollEle, 'scroll', this.scrollHandler);\n\t            this.touchModule.destroy();\n\t            this.touchModule = null;\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        HScroll.prototype.createNavIcon = function (element) {\n\t            var id = element.id.concat('_nav');\n\t            var clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n\t            var nav = ej2_base_2.createElement('div', { id: id, className: clsRight });\n\t            nav.setAttribute('aria-disabled', 'false');\n\t            var navItem = ej2_base_2.createElement('div', { className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n\t            var clsLeft = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVLEFT);\n\t            var navEle = ej2_base_2.createElement('div', { id: id, className: clsLeft + ' ' + CLS_DISABLE });\n\t            navEle.setAttribute('aria-disabled', 'true');\n\t            var navLeftItem = ej2_base_2.createElement('div', { className: CLS_NAVLEFTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n\t            navEle.appendChild(navLeftItem);\n\t            nav.appendChild(navItem);\n\t            nav.setAttribute('tabindex', '0');\n\t            element.appendChild(nav);\n\t            element.insertBefore(navEle, element.firstChild);\n\t            if (this.ieCheck) {\n\t                nav.classList.add('e-ie-align');\n\t                navEle.classList.add('e-ie-align');\n\t            }\n\t            this.eventBinding([nav, navEle]);\n\t        };\n\t        HScroll.prototype.onKeyPress = function (e) {\n\t            var _this = this;\n\t            if (e.key === 'Enter') {\n\t                var timeoutFun_1 = function () {\n\t                    _this.keyTimeout = true;\n\t                    _this.eleScrolling(10, e.target);\n\t                };\n\t                this.keyTimer = window.setTimeout(function () {\n\t                    timeoutFun_1();\n\t                }, 100);\n\t            }\n\t        };\n\t        HScroll.prototype.onKeyUp = function (e) {\n\t            if (e.key !== 'Enter') {\n\t                return;\n\t            }\n\t            if (this.keyTimeout) {\n\t                this.keyTimeout = false;\n\t            }\n\t            else {\n\t                e.target.click();\n\t            }\n\t            clearTimeout(this.keyTimer);\n\t        };\n\t        HScroll.prototype.eventBinding = function (ele) {\n\t            var _this = this;\n\t            ele.forEach(function (el) {\n\t                new ej2_base_1.Touch(el, { tapHold: _this.tabHoldHandler.bind(_this), tapHoldThreshold: 500 });\n\t                el.addEventListener('keydown', _this.onKeyPress.bind(_this));\n\t                el.addEventListener('keyup', _this.onKeyUp.bind(_this));\n\t                el.addEventListener('mouseup', _this.repeatScroll.bind(_this));\n\t                el.addEventListener('touchend', _this.repeatScroll.bind(_this));\n\t                el.addEventListener('contextmenu', function (e) {\n\t                    e.preventDefault();\n\t                });\n\t                ej2_base_1.EventHandler.add(el, 'click', _this.clickEventHandler, _this);\n\t            });\n\t        };\n\t        HScroll.prototype.repeatScroll = function () {\n\t            clearInterval(this.timeout);\n\t        };\n\t        HScroll.prototype.tabHoldHandler = function (e) {\n\t            var _this = this;\n\t            var trgt = e.originalEvent.target;\n\t            trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;\n\t            var scrollDis = 10;\n\t            var timeoutFun = function () {\n\t                _this.eleScrolling(scrollDis, trgt);\n\t            };\n\t            this.timeout = window.setInterval(function () {\n\t                timeoutFun();\n\t            }, 50);\n\t        };\n\t        HScroll.prototype.contains = function (ele, className) {\n\t            return ele.classList.contains(className);\n\t        };\n\t        HScroll.prototype.eleScrolling = function (scrollDis, trgt) {\n\t            var element = this.scrollEle;\n\t            var rootEle = this.element;\n\t            var classList = trgt.classList;\n\t            if (classList.contains(CLS_HSCROLLNAV)) {\n\t                classList = trgt.querySelector('.' + CLS_NAVARROW).classList;\n\t            }\n\t            if (this.contains(rootEle, CLS_RTL) && this.browserCheck) {\n\t                scrollDis = -scrollDis;\n\t            }\n\t            var scrlLeft = element.scrollLeft;\n\t            if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                if (classList.contains(CLS_NAVRIGHTARROW)) {\n\t                    element.scrollLeft = scrlLeft + scrollDis;\n\t                }\n\t                else {\n\t                    element.scrollLeft = scrlLeft - scrollDis;\n\t                }\n\t            }\n\t            else {\n\t                if (classList.contains(CLS_NAVLEFTARROW)) {\n\t                    element.scrollLeft = scrlLeft + scrollDis;\n\t                }\n\t                else {\n\t                    element.scrollLeft = scrlLeft - scrollDis;\n\t                }\n\t            }\n\t        };\n\t        HScroll.prototype.clickEventHandler = function (e) {\n\t            this.eleScrolling(this.scrollStep, e.target);\n\t        };\n\t        HScroll.prototype.touchHandler = function (e) {\n\t            var ele = this.scrollEle;\n\t            var distance;\n\t            distance = e.distanceX;\n\t            if ((this.ieCheck) && this.contains(this.element, CLS_RTL)) {\n\t                distance = -distance;\n\t            }\n\t            if (e.scrollDirection === 'Left') {\n\t                ele.scrollLeft = ele.scrollLeft + distance;\n\t            }\n\t            else if (e.scrollDirection === 'Right') {\n\t                ele.scrollLeft = ele.scrollLeft - distance;\n\t            }\n\t        };\n\t        HScroll.prototype.arrowDisabling = function (addDisable, removeDisable) {\n\t            addDisable.classList.add(CLS_DISABLE);\n\t            addDisable.setAttribute('aria-disabled', 'true');\n\t            addDisable.removeAttribute('tabindex');\n\t            clearInterval(this.timeout);\n\t            removeDisable.classList.remove(CLS_DISABLE);\n\t            removeDisable.setAttribute('aria-disabled', 'false');\n\t            removeDisable.setAttribute('tabindex', '0');\n\t            this.repeatScroll();\n\t        };\n\t        HScroll.prototype.scrollHandler = function (e) {\n\t            var target = e.target;\n\t            var width = target.offsetWidth;\n\t            var rootEle = this.element;\n\t            var navLeftEle = this.element.querySelector('.' + CLS_HSCROLLNAVLEFT);\n\t            var navRightEle = this.element.querySelector('.' + CLS_HSCROLLNAVRIGHT);\n\t            var scrollLeft = target.scrollLeft;\n\t            if (scrollLeft <= 0) {\n\t                scrollLeft = -scrollLeft;\n\t            }\n\t            if (scrollLeft === 0) {\n\t                if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                    this.arrowDisabling(navLeftEle, navRightEle);\n\t                }\n\t                else {\n\t                    this.arrowDisabling(navRightEle, navLeftEle);\n\t                }\n\t            }\n\t            else if (Math.ceil(width + scrollLeft + .1) >= target.scrollWidth) {\n\t                if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                    this.arrowDisabling(navRightEle, navLeftEle);\n\t                }\n\t                else {\n\t                    this.arrowDisabling(navLeftEle, navRightEle);\n\t                }\n\t            }\n\t            else {\n\t                var disEle = this.element.querySelector('.' + CLS_DISABLE);\n\t                if (disEle) {\n\t                    disEle.classList.remove(CLS_DISABLE);\n\t                    disEle.setAttribute('aria-disabled', 'false');\n\t                    disEle.setAttribute('tabindex', '0');\n\t                }\n\t            }\n\t        };\n\t        HScroll.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'scrollStep':\n\t                        break;\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.element.classList.add(CLS_RTL) : this.element.classList.remove(CLS_RTL);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return HScroll;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_2.Property(40)\n\t    ], HScroll.prototype, \"scrollStep\", void 0);\n\t    HScroll = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], HScroll);\n\t    exports.HScroll = HScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, toolbar_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(toolbar_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(6), __webpack_require__(6), __webpack_require__(7), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, ej2_popups_2, ej2_buttons_1, h_scroll_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ITEMS = 'e-toolbar-items';\n\t    var CLS_ITEM = 'e-toolbar-item';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_SEPARATOR = 'e-separator';\n\t    var CLS_POPUPICON = 'e-popup-up-icon';\n\t    var CLS_POPUPDOWN = 'e-popup-down-icon';\n\t    var CLS_TEMPLATE = 'e-template';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_POPUPTEXT = 'e-toolbar-text';\n\t    var CLS_TBARTEXT = 'e-popup-text';\n\t    var CLS_TBAROVERFLOW = 'e-overflow-show';\n\t    var CLS_POPOVERFLOW = 'e-overflow-hide';\n\t    var CLS_TBARBTN = 'e-tbar-btn';\n\t    var CLS_TBARNAV = 'e-hor-nav';\n\t    var CLS_TBARSCRLNAV = 'e-scroll-nav';\n\t    var CLS_TBARRIGHT = 'e-toolbar-right';\n\t    var CLS_TBARLEFT = 'e-toolbar-left';\n\t    var CLS_TBARCENTER = 'e-toolbar-center';\n\t    var CLS_TBARPOS = 'e-tbar-pos';\n\t    var CLS_TBARSCROLL = 'e-hscroll-content';\n\t    var CLS_POPUPNAV = 'e-hor-nav';\n\t    var CLS_POPUPCLASS = 'e-toolbar-pop';\n\t    var CLS_POPUP = 'e-toolbar-popup';\n\t    var CLS_TBARBTNTEXT = 'e-tbar-btn-text';\n\t    var CLS_TBARNAVACT = 'e-nav-active';\n\t    var CLS_TBARIGNORE = 'e-ignore';\n\t    var Item = (function (_super) {\n\t        __extends(Item, _super);\n\t        function Item() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Item;\n\t    }(ej2_base_5.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Item.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"prefixIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"suffixIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('None')\n\t    ], Item.prototype, \"overflow\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Button')\n\t    ], Item.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Both')\n\t    ], Item.prototype, \"showTextOn\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Item.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"tooltipText\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('left')\n\t    ], Item.prototype, \"align\", void 0);\n\t    exports.Item = Item;\n\t    var Toolbar = (function (_super) {\n\t        __extends(Toolbar, _super);\n\t        function Toolbar(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.keyConfigs = {\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow',\n\t                popupOpen: 'enter',\n\t                popupClose: 'escape',\n\t                tab: 'tab',\n\t                home: 'home',\n\t                end: 'end',\n\t            };\n\t            return _this;\n\t        }\n\t        Toolbar.prototype.destroy = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            _super.prototype.destroy.call(this);\n\t            this.unwireEvents();\n\t            while (ele.firstChild) {\n\t                ele.removeChild(ele.firstChild);\n\t            }\n\t            if (this.trgtEle) {\n\t                ele.appendChild(this.ctrlTem);\n\t            }\n\t            this.clearProperty();\n\t            this.popObj = null;\n\t            this.remove(this.element, 'e-toolpop');\n\t            ele.removeAttribute('style');\n\t            ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n\t                _this.element.removeAttribute(attrb);\n\t            });\n\t        };\n\t        Toolbar.prototype.preRender = function () {\n\t            this.trigger('beforeCreate');\n\t            this.scrollModule = null;\n\t            this.popObj = null;\n\t            if (this.enableRtl) {\n\t                this.add(this.element, CLS_RTL);\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t            window.addEventListener('resize', this.resize.bind(this));\n\t            this.keyModule = new ej2_base_2.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs\n\t            });\n\t            ej2_base_1.EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n\t            this.element.setAttribute('tabIndex', '0');\n\t        };\n\t        Toolbar.prototype.docKeyDown = function (e) {\n\t            if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && ej2_base_2.isVisible(this.popObj.element)) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t            var keyCheck = (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36);\n\t            if (keyCheck) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Toolbar.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t            this.destroyHScroll();\n\t            this.keyModule.destroy();\n\t            ej2_base_1.EventHandler.remove(document, 'scroll', this.docEvent);\n\t            ej2_base_1.EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n\t            ej2_base_1.EventHandler.remove(document, 'click', this.docEvent);\n\t        };\n\t        Toolbar.prototype.clearProperty = function () {\n\t            this.tbarEle = [];\n\t            this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n\t        };\n\t        Toolbar.prototype.docEvent = function (e) {\n\t            var popEle = ej2_base_2.closest(e.target, '.e-popup');\n\t            if (this.popObj && ej2_base_2.isVisible(this.popObj.element) && !popEle) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t        };\n\t        Toolbar.prototype.destroyHScroll = function () {\n\t            if (this.scrollModule) {\n\t                if (this.tbarAlign) {\n\t                    this.add(this.scrollModule.element, CLS_TBARPOS);\n\t                }\n\t                this.scrollModule.destroy();\n\t                this.scrollModule = null;\n\t            }\n\t        };\n\t        Toolbar.prototype.destroyItems = function () {\n\t            [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) {\n\t                ej2_base_2.detach(el);\n\t            });\n\t            this.clearProperty();\n\t        };\n\t        Toolbar.prototype.destroyMode = function () {\n\t            if (this.scrollModule) {\n\t                this.remove(this.scrollModule.element, CLS_RTL);\n\t                this.destroyHScroll();\n\t            }\n\t            if (this.popObj) {\n\t                this.popupRefresh(this.popObj.element, true);\n\t            }\n\t        };\n\t        Toolbar.prototype.add = function (ele, val) {\n\t            ele.classList.add(val);\n\t        };\n\t        Toolbar.prototype.remove = function (ele, val) {\n\t            ele.classList.remove(val);\n\t        };\n\t        Toolbar.prototype.elementFocus = function (ele) {\n\t            var fChild = ele.firstElementChild;\n\t            if (fChild) {\n\t                fChild.focus();\n\t                this.activeEleSwitch(ele);\n\t            }\n\t            else {\n\t                ele.focus();\n\t            }\n\t        };\n\t        Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n\t            var clst;\n\t            if (tbrNavChk && this.popObj && ej2_base_2.isVisible(this.popObj.element)) {\n\t                clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n\t            }\n\t            else if (this.element === trgt || tbrNavChk) {\n\t                clst = this.element.querySelector('.' + CLS_ITEM);\n\t            }\n\t            else {\n\t                clst = ej2_base_2.closest(trgt, '.' + CLS_ITEM);\n\t            }\n\t            return clst;\n\t        };\n\t        Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n\t            var popObj = this.popObj;\n\t            var rootEle = this.element;\n\t            var popAnimate = { name: 'SlideUp', duration: 100 };\n\t            switch (e.action) {\n\t                case 'moveRight':\n\t                    if (rootEle === trgt) {\n\t                        this.elementFocus(clst);\n\t                    }\n\t                    else if (!navChk) {\n\t                        this.eleFocus(clst, 'next');\n\t                    }\n\t                    break;\n\t                case 'moveLeft':\n\t                    if (!navChk) {\n\t                        this.eleFocus(clst, 'previous');\n\t                    }\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    var ele = void 0;\n\t                    var nodes = void 0;\n\t                    if (clst) {\n\t                        var popupCheck = ej2_base_2.closest(clst, '.e-popup');\n\t                        if (popupCheck) {\n\t                            if (ej2_base_2.isVisible(this.popObj.element)) {\n\t                                nodes = popupCheck.children;\n\t                                if (e.action === 'home') {\n\t                                    ele = nodes[0];\n\t                                }\n\t                                else {\n\t                                    ele = nodes[nodes.length - 1];\n\t                                }\n\t                            }\n\t                        }\n\t                        else {\n\t                            nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM);\n\t                            if (e.action === 'home') {\n\t                                ele = nodes[0];\n\t                            }\n\t                            else {\n\t                                ele = nodes[nodes.length - 1];\n\t                            }\n\t                        }\n\t                        if (ele) {\n\t                            this.elementFocus(ele);\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'moveUp':\n\t                case 'moveDown':\n\t                    var value = e.action === 'moveUp' ? 'previous' : 'next';\n\t                    if (popObj && ej2_base_2.closest(trgt, '.e-popup')) {\n\t                        var popEle = popObj.element;\n\t                        var popFrstEle = popEle.firstElementChild;\n\t                        if ((value === 'previous' && popFrstEle === clst) || (value === 'next' && popEle.lastElementChild === clst)) {\n\t                            return;\n\t                        }\n\t                        else {\n\t                            this.eleFocus(clst, value);\n\t                        }\n\t                    }\n\t                    else if (e.action === 'moveDown' && popObj && ej2_base_2.isVisible(popObj.element)) {\n\t                        this.elementFocus(clst);\n\t                    }\n\t                    break;\n\t                case 'tab':\n\t                    if (!scrollChk && !navChk) {\n\t                        var ele_1 = clst.firstElementChild;\n\t                        if (rootEle === trgt) {\n\t                            if (this.activeEle) {\n\t                                this.activeEle.focus();\n\t                            }\n\t                            else {\n\t                                this.activeEleRemove(ele_1);\n\t                                ele_1.focus();\n\t                            }\n\t                            this.element.removeAttribute('tabindex');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'popupClose':\n\t                    if (popObj) {\n\t                        popObj.hide(popAnimate);\n\t                    }\n\t                    break;\n\t                case 'popupOpen':\n\t                    if (!navChk) {\n\t                        return;\n\t                    }\n\t                    if (popObj && !ej2_base_2.isVisible(popObj.element)) {\n\t                        popObj.element.style.top = rootEle.offsetHeight + 'px';\n\t                        popObj.show({ name: 'SlideDown', duration: 100 });\n\t                    }\n\t                    else {\n\t                        popObj.hide(popAnimate);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        Toolbar.prototype.keyActionHandler = function (e) {\n\t            e.preventDefault();\n\t            var clst;\n\t            var trgt = e.target;\n\t            var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n\t            var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n\t            clst = this.clstElement(tbrNavChk, trgt);\n\t            if (clst || tbarScrollChk) {\n\t                this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n\t            }\n\t        };\n\t        Toolbar.prototype.eleFocus = function (closest, pos) {\n\t            var sib = Object(closest)[pos + 'ElementSibling'];\n\t            var contains = function (el) {\n\t                return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE);\n\t            };\n\t            if (sib) {\n\t                var skipEle = contains(sib);\n\t                if (skipEle) {\n\t                    if (Object(sib)[pos + 'Sibling']) {\n\t                        sib = Object(sib)[pos + 'Sibling'];\n\t                        skipEle = contains(sib);\n\t                        if (skipEle) {\n\t                            this.eleFocus(sib, pos);\n\t                            return;\n\t                        }\n\t                    }\n\t                }\n\t                this.elementFocus(sib);\n\t            }\n\t            else if (this.tbarAlign) {\n\t                var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n\t                if (!ej2_base_4.isNullOrUndefined(elem) && elem.children.length === 0) {\n\t                    elem = Object(elem)[pos + 'ElementSibling'];\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(elem) && elem.children.length > 0) {\n\t                    if (pos === 'next') {\n\t                        var el = elem.querySelector('.' + CLS_ITEM);\n\t                        if (contains(el)) {\n\t                            this.eleFocus(el, pos);\n\t                        }\n\t                        else {\n\t                            el.firstElementChild.focus();\n\t                            this.activeEleSwitch(el);\n\t                        }\n\t                    }\n\t                    else {\n\t                        var el = elem.lastElementChild;\n\t                        if (contains(el)) {\n\t                            this.eleFocus(el, pos);\n\t                        }\n\t                        else {\n\t                            this.elementFocus(el);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.clickHandler = function (e) {\n\t            var trgt = e.target;\n\t            var clsList = trgt.classList;\n\t            var ele = this.element;\n\t            var isPopupElement = !ej2_base_4.isNullOrUndefined(ej2_base_2.closest(trgt, '.' + CLS_POPUPCLASS));\n\t            var popupNav = ej2_base_2.closest(trgt, ('.' + CLS_TBARNAV));\n\t            if (!popupNav) {\n\t                popupNav = trgt;\n\t            }\n\t            if (!ele.children[0].classList.contains('e-hscroll') && (clsList.contains(CLS_TBARNAV))) {\n\t                clsList = trgt.querySelector('.e-icons').classList;\n\t            }\n\t            if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n\t                this.popupClickHandler(ele, popupNav, CLS_RTL);\n\t            }\n\t            var itemObj;\n\t            var clst = ej2_base_2.closest(e.target, '.' + CLS_ITEM);\n\t            if ((ej2_base_4.isNullOrUndefined(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n\t                return;\n\t            }\n\t            if (clst) {\n\t                itemObj = this.items[this.tbarEle.indexOf(clst)];\n\t            }\n\t            var eventArgs = { originalEvent: e, item: itemObj };\n\t            this.trigger('clicked', eventArgs);\n\t            if (isPopupElement && !eventArgs.cancel) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t        };\n\t        ;\n\t        Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n\t            var popObj = this.popObj;\n\t            if (ej2_base_2.isVisible(popObj.element)) {\n\t                popupNav.classList.remove(CLS_TBARNAVACT);\n\t                popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t            else {\n\t                if (ele.classList.contains(CLS_RTL)) {\n\t                    popObj.enableRtl = true;\n\t                    popObj.position = { X: 'left', Y: 'top' };\n\t                }\n\t                if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n\t                    popObj.enableRtl = false;\n\t                    popObj.position = { X: 'right', Y: 'top' };\n\t                }\n\t                popObj.dataBind();\n\t                popObj.element.style.top = this.element.offsetHeight + 'px';\n\t                popupNav.classList.add(CLS_TBARNAVACT);\n\t                popObj.show({ name: 'SlideDown', duration: 100 });\n\t            }\n\t        };\n\t        Toolbar.prototype.render = function () {\n\t            this.initialize();\n\t            this.renderControl();\n\t            this.wireEvents();\n\t        };\n\t        Toolbar.prototype.initialize = function () {\n\t            var width = ej2_base_4.formatUnit(this.width);\n\t            var height = ej2_base_4.formatUnit(this.height);\n\t            if (ej2_base_5.Browser.info.name !== 'msie' || this.height !== 'auto') {\n\t                ej2_base_3.setStyleAttribute(this.element, { 'height': height });\n\t            }\n\t            ej2_base_3.setStyleAttribute(this.element, { 'width': width });\n\t            var ariaAttr = {\n\t                'role': 'toolbar', 'aria-disabled': 'false', 'aria-haspopup': 'false', 'aria-orientation': 'horizontal',\n\t            };\n\t            ej2_base_2.attributes(this.element, ariaAttr);\n\t        };\n\t        Toolbar.prototype.renderControl = function () {\n\t            this.trgtEle = (this.element.children.length > 0) ? this.element.querySelector('div') : null;\n\t            this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n\t            this.renderItems();\n\t            this.renderOverflowMode();\n\t            if (this.tbarAlign) {\n\t                this.itemPositioning();\n\t            }\n\t        };\n\t        Toolbar.prototype.initHScroll = function (element, innerItems) {\n\t            if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n\t                if (this.tbarAlign) {\n\t                    this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n\t                }\n\t                this.scrollModule = new h_scroll_1.HScroll({ scrollStep: 50, enableRtl: this.enableRtl }, innerItems[0]);\n\t                this.remove(this.scrollModule.element, CLS_TBARPOS);\n\t                ej2_base_3.setStyleAttribute(this.element, { overflow: 'hidden' });\n\t            }\n\t        };\n\t        Toolbar.prototype.itemWidthCal = function (items) {\n\t            var width = 0;\n\t            [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEM), items).forEach(function (el) {\n\t                width += (el.offsetWidth + parseFloat(window.getComputedStyle(el).marginRight));\n\t            });\n\t            return width;\n\t        };\n\t        Toolbar.prototype.checkOverflow = function (element, innerItem) {\n\t            if (ej2_base_4.isNullOrUndefined(element) || ej2_base_4.isNullOrUndefined(innerItem)) {\n\t                return false;\n\t            }\n\t            var eleWidth = element.offsetWidth;\n\t            var itemWidth;\n\t            if (this.tbarAlign || this.scrollModule) {\n\t                itemWidth = this.itemWidthCal(this.scrollModule ? innerItem.querySelector('.e-hscroll-content') : innerItem);\n\t            }\n\t            else {\n\t                itemWidth = innerItem.offsetWidth;\n\t            }\n\t            var popNav = element.querySelector('.' + CLS_TBARNAV);\n\t            var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n\t            if (itemWidth > eleWidth - (popNav ? popNav.offsetWidth : (scrollNav ? scrollNav.offsetWidth * 2 : 0))) {\n\t                return true;\n\t            }\n\t            else {\n\t                return false;\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshOverflow = function () {\n\t            this.resize();\n\t        };\n\t        Toolbar.prototype.renderOverflowMode = function () {\n\t            var ele = this.element;\n\t            var innerItems = ele.querySelector('.' + CLS_ITEMS);\n\t            if (ele && ele.children.length > 0) {\n\t                this.offsetWid = ele.offsetWidth;\n\t                switch (this.overflowMode) {\n\t                    case 'Scrollable':\n\t                        this.destroyHScroll();\n\t                        this.initHScroll(ele, ele.getElementsByClassName(CLS_ITEMS));\n\t                        break;\n\t                    case 'Popup':\n\t                        this.add(this.element, 'e-toolpop');\n\t                        if (this.tbarAlign) {\n\t                            this.removePositioning();\n\t                        }\n\t                        if (this.checkOverflow(ele, innerItems)) {\n\t                            this.createPopupEle(ele, [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n\t                            this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n\t                        }\n\t                        if (this.tbarAlign) {\n\t                            this.add(innerItems, CLS_TBARPOS);\n\t                            this.itemPositioning();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n\t            var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            if (!innerNav) {\n\t                this.createPopupIcon(ele);\n\t            }\n\t            innerNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            var eleWidth = (ele.offsetWidth - (innerNav.offsetWidth));\n\t            this.element.classList.remove('e-rtl');\n\t            this.checkPriority(ele, innerEle, eleWidth, true);\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            this.createPopup();\n\t        };\n\t        Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight) {\n\t            var element = tbarObj.element;\n\t            var nodes = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, ele);\n\t            var nodeIndex = 0;\n\t            var poppedEle = [].slice.call(ej2_base_3.selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n\t            var nodePri = 0;\n\t            poppedEle.forEach(function (el, index) {\n\t                nodes = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, ele);\n\t                if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n\t                    if (tbarObj.tbResize && nodes.length > index) {\n\t                        ele.insertBefore(el, nodes[index]);\n\t                        ++nodePri;\n\t                    }\n\t                    else {\n\t                        ele.insertBefore(el, ele.children[nodes.length]);\n\t                        ++nodePri;\n\t                    }\n\t                }\n\t                else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n\t                    ele.insertBefore(el, ele.firstChild);\n\t                    ++nodePri;\n\t                }\n\t                else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n\t                    ele.insertBefore(el, ele.firstChild);\n\t                    ++nodePri;\n\t                }\n\t                else if (el.classList.contains(CLS_POPOVERFLOW)) {\n\t                    popupPri.push(el);\n\t                }\n\t                else if (tbarObj.tbResize) {\n\t                    ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n\t                    ++nodeIndex;\n\t                }\n\t                else {\n\t                    ele.appendChild(el);\n\t                }\n\t                ej2_base_3.setStyleAttribute(el, { display: '', height: eleHeight + 'px' });\n\t            });\n\t            popupPri.forEach(function (el) {\n\t                ele.appendChild(el);\n\t            });\n\t            var tbarEle = ej2_base_3.selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n\t            for (var i = tbarEle.length - 1; i >= 0; i--) {\n\t                var tbarElement = tbarEle[i];\n\t                if (tbarElement.classList.contains(CLS_SEPARATOR)) {\n\t                    ej2_base_3.setStyleAttribute(tbarElement, { display: 'none' });\n\t                }\n\t                else {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopup = function () {\n\t            var element = this.element;\n\t            var eleHeight;\n\t            var eleItem;\n\t            eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_POPUP + ' )');\n\t            eleHeight = (element.style.height === 'auto' || element.style.height === '') ? null : eleItem.offsetHeight;\n\t            var ele;\n\t            var popupPri = [];\n\t            if (element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS)) {\n\t                ele = element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS);\n\t            }\n\t            else {\n\t                ele = ej2_base_3.createElement('div', { id: element.id + '_popup', className: CLS_POPUPCLASS });\n\t            }\n\t            this.pushingPoppedEle(this, popupPri, ele, eleHeight);\n\t            this.popupInit(element, ele);\n\t        };\n\t        Toolbar.prototype.popupInit = function (element, ele) {\n\t            if (!this.popObj) {\n\t                element.appendChild(ele);\n\t                ej2_base_3.setStyleAttribute(this.element, { overflow: '' });\n\t                var popup = new ej2_popups_1.Popup(null, {\n\t                    relateTo: this.element,\n\t                    offsetY: (element.offsetHeight),\n\t                    enableRtl: this.enableRtl,\n\t                    open: this.popupOpen.bind(this),\n\t                    close: this.popupClose,\n\t                    position: this.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }\n\t                });\n\t                popup.appendTo(ele);\n\t                ej2_base_1.EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n\t                ej2_base_1.EventHandler.add(document, 'click ', this.docEvent.bind(this));\n\t                popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n\t                popup.hide();\n\t                this.popObj = popup;\n\t                this.element.setAttribute('aria-haspopup', 'true');\n\t            }\n\t            else {\n\t                var popupEle = this.popObj.element;\n\t                ej2_base_3.setStyleAttribute(popupEle, { maxHeight: '', display: 'block' });\n\t                ej2_base_3.setStyleAttribute(popupEle, { maxHeight: popupEle.offsetHeight + 'px', display: '' });\n\t            }\n\t        };\n\t        Toolbar.prototype.popupOpen = function (e) {\n\t            var popObj = this.popObj;\n\t            var popupEle = this.popObj.element;\n\t            var toolEle = this.popObj.element.parentElement;\n\t            var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n\t            ej2_base_3.setStyleAttribute(popObj.element, { height: 'auto', maxHeight: '' });\n\t            popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n\t            var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + ej2_popups_2.calculatePosition(toolEle).top;\n\t            var popIcon = popupNav.firstElementChild;\n\t            popupNav.classList.add(CLS_TBARNAVACT);\n\t            ej2_base_2.classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n\t            var scrollVal = ej2_base_4.isNullOrUndefined(window.scrollY) ? 0 : window.scrollY;\n\t            if ((window.innerHeight + scrollVal) < popupElePos) {\n\t                var overflowHeight = (popupEle.offsetHeight - ((popupElePos - window.innerHeight - scrollVal) + 5));\n\t                popObj.height = overflowHeight + 'px';\n\t                ej2_base_3.setStyleAttribute(popObj.element, { maxHeight: overflowHeight + 'px' });\n\t            }\n\t        };\n\t        Toolbar.prototype.popupClose = function (e) {\n\t            var element = this.element.parentElement;\n\t            var popupNav = element.querySelector('.' + CLS_TBARNAV);\n\t            var popIcon = popupNav.firstElementChild;\n\t            popupNav.classList.remove(CLS_TBARNAVACT);\n\t            ej2_base_2.classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n\t        };\n\t        Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n\t            var len = inEle.length;\n\t            var eleWid = eleWidth;\n\t            var sepCheck = 0;\n\t            var itemCount = 0;\n\t            var itemPopCount = 0;\n\t            var checkClass = function (ele, val) {\n\t                var rVal = false;\n\t                val.forEach(function (cls) {\n\t                    if (ele.classList.contains(cls)) {\n\t                        rVal = true;\n\t                    }\n\t                });\n\t                return rVal;\n\t            };\n\t            for (var i = len - 1; i >= 0; i--) {\n\t                var mrgn = parseFloat((window.getComputedStyle(inEle[i])).marginRight);\n\t                mrgn += parseFloat((window.getComputedStyle(inEle[i])).marginLeft);\n\t                if (inEle[i] === this.tbarEle[0]) {\n\t                    this.tbarEleMrgn = mrgn;\n\t                }\n\t                if ((inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn) > eleWidth) {\n\t                    if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n\t                        if (sepCheck > 0 && itemCount === itemPopCount) {\n\t                            var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n\t                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n\t                                ej2_base_3.setStyleAttribute(sepEle, { display: 'none' });\n\t                            }\n\t                        }\n\t                        sepCheck++;\n\t                        itemCount = 0;\n\t                        itemPopCount = 0;\n\t                    }\n\t                    else {\n\t                        itemCount++;\n\t                    }\n\t                    if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n\t                        eleWidth -= (inEle[i].offsetWidth + (mrgn));\n\t                    }\n\t                    else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n\t                        inEle[i].classList.add(CLS_POPUP);\n\t                        ej2_base_3.setStyleAttribute(inEle[i], { display: 'none', minWidth: inEle[i].offsetWidth + 'px' });\n\t                        itemPopCount++;\n\t                    }\n\t                    else {\n\t                        eleWidth -= (inEle[i].offsetWidth + (mrgn));\n\t                    }\n\t                }\n\t            }\n\t            if (pre) {\n\t                var popedEle = ej2_base_3.selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n\t                this.checkPriority(ele, popedEle, eleWid, false);\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopupIcon = function (element) {\n\t            var id = element.id.concat('_nav');\n\t            var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n\t            var nav = ej2_base_3.createElement('div', { id: id, className: className });\n\t            if (ej2_base_5.Browser.info.name === 'msie' || ej2_base_5.Browser.info.name === 'edge') {\n\t                nav.classList.add('e-ie-align');\n\t            }\n\t            var navItem = ej2_base_3.createElement('div', { className: CLS_POPUPDOWN + ' e-icons' });\n\t            nav.appendChild(navItem);\n\t            nav.setAttribute('tabindex', '0');\n\t            element.appendChild(nav);\n\t        };\n\t        Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n\t            var ignoreCount = ig;\n\t            var popEle = this.popObj.element;\n\t            var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n\t            var priEleCnt = ej2_base_3.selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n\t            var checkClass = function (ele, val) {\n\t                return ele.classList.contains(val);\n\t            };\n\t            if (ej2_base_3.selectAll(query, inEle).length === 0) {\n\t                var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n\t                var ignoreCheck = (!ej2_base_4.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_TBARIGNORE));\n\t                if ((!ej2_base_4.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !ej2_base_2.isVisible(eleSep)) || ignoreCheck) {\n\t                    var sepDisplay = 'none';\n\t                    eleSep.style.display = 'inherit';\n\t                    var eleSepWidth = eleSep.offsetWidth + (parseFloat(window.getComputedStyle(eleSep).marginRight) * 2);\n\t                    var prevSep = eleSep.previousElementSibling;\n\t                    if ((elWid + eleSepWidth) < wid || des) {\n\t                        inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n\t                        if (!ej2_base_4.isNullOrUndefined(prevSep)) {\n\t                            prevSep.style.display = '';\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (prevSep.classList.contains(CLS_SEPARATOR)) {\n\t                            prevSep.style.display = sepDisplay;\n\t                        }\n\t                    }\n\t                    eleSep.style.display = '';\n\t                }\n\t                else {\n\t                    inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n\t                }\n\t            }\n\t            else {\n\t                inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - priEleCnt]);\n\t            }\n\t        };\n\t        Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n\t            var ele = this.element;\n\t            var popNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            var innerEle = ele.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(popNav)) {\n\t                return;\n\t            }\n\t            innerEle.removeAttribute('style');\n\t            popupEle.style.display = 'block';\n\t            var width = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n\t            this.popupEleRefresh(width, popupEle, destroy);\n\t            popupEle.style.display = '';\n\t            if (popupEle.children.length === 0) {\n\t                ej2_base_2.detach(popNav);\n\t                this.popObj.destroy();\n\t                ej2_base_2.detach(this.popObj.element);\n\t                this.popObj = null;\n\t                ele.setAttribute('aria-haspopup', 'false');\n\t                ele.classList.remove('e-toolpop');\n\t            }\n\t        };\n\t        Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n\t            var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n\t            var ignoreInx = [];\n\t            var count = 0;\n\t            if (ignoreEle.length > 0) {\n\t                ignoreEle.forEach(function (ele) {\n\t                    ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n\t                });\n\t            }\n\t            else {\n\t                return 0;\n\t            }\n\t            ignoreInx.forEach(function (val) {\n\t                if (val <= index) {\n\t                    count++;\n\t                }\n\t            });\n\t            return count;\n\t        };\n\t        Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n\t            var eleSplice = this.tbarEle;\n\t            var priEleCnt;\n\t            var index;\n\t            var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n\t            var ignoreCount = 0;\n\t            var _loop_1 = function (el) {\n\t                el.style.position = 'absolute';\n\t                var elWidth = el.offsetWidth;\n\t                var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n\t                if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n\t                    var btn = el.children[0];\n\t                    if (!ej2_base_4.isNullOrUndefined(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n\t                        btnText.style.display = 'none';\n\t                    }\n\t                    else if (!ej2_base_4.isNullOrUndefined(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n\t                        btnText.style.display = 'block';\n\t                    }\n\t                    btn.style.minWidth = '0%';\n\t                    elWidth = el.offsetWidth;\n\t                    btn.style.minWidth = '';\n\t                    if (!ej2_base_4.isNullOrUndefined(btnText)) {\n\t                        btnText.style.display = '';\n\t                    }\n\t                }\n\t                if (el === this_1.tbarEle[0]) {\n\t                    elWidth += this_1.tbarEleMrgn;\n\t                }\n\t                el.style.position = '';\n\t                if (elWidth < width || destroy) {\n\t                    el.style.minWidth = '';\n\t                    if (!el.classList.contains(CLS_POPOVERFLOW)) {\n\t                        el.classList.remove(CLS_POPUP);\n\t                    }\n\t                    index = this_1.tbarEle.indexOf(el);\n\t                    if (this_1.tbarAlign) {\n\t                        var pos = this_1.items[index].align;\n\t                        index = this_1.tbarAlgEle[(pos + 's')].indexOf(el);\n\t                        eleSplice = this_1.tbarAlgEle[(pos + 's')];\n\t                        innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos);\n\t                    }\n\t                    var sepBeforePri_1 = 0;\n\t                    eleSplice.slice(0, index).forEach(function (el) {\n\t                        if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n\t                            if (el.classList.contains(CLS_SEPARATOR)) {\n\t                                el.style.display = '';\n\t                                width -= el.offsetWidth;\n\t                            }\n\t                            sepBeforePri_1++;\n\t                        }\n\t                    });\n\t                    ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n\t                    if (el.classList.contains(CLS_TBAROVERFLOW)) {\n\t                        this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    else if (index === 0) {\n\t                        innerEle.insertBefore(el, innerEle.firstChild);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    else {\n\t                        priEleCnt = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n\t                        innerEle.insertBefore(el, innerEle.children[(index + ignoreCount) - priEleCnt]);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    el.style.height = '';\n\t                }\n\t                else {\n\t                    return \"break\";\n\t                }\n\t            };\n\t            var this_1 = this;\n\t            for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n\t                var el = _a[_i];\n\t                var state_1 = _loop_1(el);\n\t                if (state_1 === \"break\")\n\t                    break;\n\t            }\n\t        };\n\t        Toolbar.prototype.removePositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n\t                return;\n\t            }\n\t            this.remove(item, CLS_TBARPOS);\n\t            var innerItem = [].slice.call(item.childNodes);\n\t            innerItem[1].removeAttribute('style');\n\t            innerItem[2].removeAttribute('style');\n\t        };\n\t        Toolbar.prototype.refreshPositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            this.add(item, CLS_TBARPOS);\n\t            this.itemPositioning();\n\t        };\n\t        Toolbar.prototype.itemPositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n\t                return;\n\t            }\n\t            var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n\t            var innerItem;\n\t            if (this.scrollModule) {\n\t                innerItem = [].slice.call(item.querySelector('.' + CLS_TBARSCROLL).children);\n\t            }\n\t            else {\n\t                innerItem = [].slice.call(item.childNodes);\n\t            }\n\t            var margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n\t            var tbarWid = this.element.offsetWidth;\n\t            if (popupNav) {\n\t                tbarWid -= popupNav.offsetWidth;\n\t                var popWid = popupNav.offsetWidth + 'px';\n\t                innerItem[2].removeAttribute('style');\n\t                this.enableRtl ? innerItem[2].style.left = popWid : innerItem[2].style.right = popWid;\n\t            }\n\t            if (tbarWid <= margin) {\n\t                return;\n\t            }\n\t            var value = (((tbarWid - margin)) - innerItem[1].offsetWidth) / 2;\n\t            innerItem[1].removeAttribute('style');\n\t            var mrgn = (innerItem[0].offsetWidth + value) + 'px';\n\t            this.enableRtl ? innerItem[1].style.marginRight = mrgn : innerItem[1].style.marginLeft = mrgn;\n\t        };\n\t        Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n\t            var _this = this;\n\t            var alignDiv = [];\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARLEFT }));\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARCENTER }));\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARRIGHT }));\n\t            if (pos === 0 && item.align !== 'left') {\n\t                alignDiv.forEach(function (ele) {\n\t                    itemEle.appendChild(ele);\n\t                });\n\t                this.tbarAlign = true;\n\t                this.add(itemEle, CLS_TBARPOS);\n\t            }\n\t            else if (item.align !== 'left') {\n\t                var alignEle = itemEle.childNodes;\n\t                var leftAlign_1 = alignDiv[0];\n\t                [].slice.call(alignEle).forEach(function (el) {\n\t                    _this.tbarAlgEle.lefts.push(el);\n\t                    leftAlign_1.appendChild(el);\n\t                });\n\t                itemEle.appendChild(leftAlign_1);\n\t                itemEle.appendChild(alignDiv[1]);\n\t                itemEle.appendChild(alignDiv[2]);\n\t                this.tbarAlign = true;\n\t                this.add(itemEle, CLS_TBARPOS);\n\t            }\n\t        };\n\t        Toolbar.prototype.ctrlTemplate = function () {\n\t            var _this = this;\n\t            this.ctrlTem = this.trgtEle.cloneNode(true);\n\t            this.add(this.trgtEle, CLS_ITEMS);\n\t            this.tbarEle = [];\n\t            var innerEle = [].slice.call(this.trgtEle.children);\n\t            innerEle.forEach(function (ele) {\n\t                if (ele.tagName === 'DIV') {\n\t                    _this.tbarEle.push(ele);\n\t                    ele.setAttribute('aria-disabled', 'false');\n\t                    _this.add(ele, CLS_ITEM);\n\t                }\n\t            });\n\t        };\n\t        Toolbar.prototype.renderItems = function () {\n\t            var ele = this.element;\n\t            var itemEleDom;\n\t            var innerItem;\n\t            var innerPos;\n\t            var items = this.items;\n\t            if (ele && ele.children.length > 0) {\n\t                itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n\t            }\n\t            if (this.trgtEle != null) {\n\t                this.ctrlTemplate();\n\t            }\n\t            else if (ele && items.length > 0) {\n\t                if (!itemEleDom) {\n\t                    itemEleDom = ej2_base_3.createElement('div', { className: CLS_ITEMS });\n\t                }\n\t                for (var i = 0; i < items.length; i++) {\n\t                    innerItem = this.renderSubComponent(items[i]);\n\t                    if (this.tbarEle.indexOf(innerItem) === -1) {\n\t                        this.tbarEle.push(innerItem);\n\t                    }\n\t                    if (!this.tbarAlign) {\n\t                        this.tbarItemAlign(items[i], itemEleDom, i);\n\t                    }\n\t                    innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n\t                    if (innerPos) {\n\t                        this.tbarAlgEle[(items[i].align + 's')].push(innerItem);\n\t                        innerPos.appendChild(innerItem);\n\t                    }\n\t                    else {\n\t                        itemEleDom.appendChild(innerItem);\n\t                    }\n\t                }\n\t                ele.appendChild(itemEleDom);\n\t            }\n\t        };\n\t        Toolbar.prototype.setAttr = function (attr, element) {\n\t            var key = Object.keys(attr);\n\t            var keyVal;\n\t            for (var i = 0; i < key.length; i++) {\n\t                keyVal = key[i];\n\t                keyVal === 'class' ? this.add(element, attr[keyVal]) : element.setAttribute(keyVal, attr[keyVal]);\n\t            }\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            var elements = items;\n\t            var len = elements.length;\n\t            if (ej2_base_4.isNullOrUndefined(isEnable)) {\n\t                isEnable = true;\n\t            }\n\t            var enable = function (isEnable, ele) {\n\t                if (isEnable) {\n\t                    ele.classList.remove(CLS_DISABLE);\n\t                    ele.setAttribute('aria-disabled', 'false');\n\t                }\n\t                else {\n\t                    ele.classList.add(CLS_DISABLE);\n\t                    ele.setAttribute('aria-disabled', 'true');\n\t                }\n\t            };\n\t            if (len && len > 1) {\n\t                for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n\t                    var ele = _a[_i];\n\t                    enable(isEnable, ele);\n\t                }\n\t                isEnable ? ej2_base_2.removeClass(elements, CLS_DISABLE) : ej2_base_2.addClass(elements, CLS_DISABLE);\n\t            }\n\t            else {\n\t                var ele = void 0;\n\t                ele = (len && len === 1) ? elements[0] : items;\n\t                enable(isEnable, ele);\n\t            }\n\t        };\n\t        Toolbar.prototype.addItems = function (items, index) {\n\t            var innerItems;\n\t            var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n\t            var innerEle;\n\t            var itemAgn = 'left';\n\t            if (ej2_base_4.isNullOrUndefined(index)) {\n\t                index = 0;\n\t            }\n\t            items.forEach(function (e) {\n\t                if (!ej2_base_4.isNullOrUndefined(e.align) && e.align !== 'left' && itemAgn === 'left') {\n\t                    itemAgn = e.align;\n\t                }\n\t            });\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                if (ej2_base_4.isNullOrUndefined(item.type)) {\n\t                    item.type = 'Button';\n\t                }\n\t                innerItems = ej2_base_3.selectAll('.' + CLS_ITEM, this.element);\n\t                item.align = itemAgn;\n\t                innerEle = this.renderSubComponent(item);\n\t                if (this.tbarEle.length >= index && innerItems.length > 0) {\n\t                    this.destroyMode();\n\t                    if (this.tbarAlign) {\n\t                        var algIndex = item.align[0] === 'l' ? 0 : item.align[0] === 'c' ? 1 : 2;\n\t                        var ele = void 0;\n\t                        ele = ej2_base_2.closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n\t                        ele.insertBefore(innerEle, ele.children[index]);\n\t                        this.tbarAlgEle[(item.align + 's')].splice(index, 0, innerEle);\n\t                        this.refreshPositioning();\n\t                    }\n\t                    else {\n\t                        innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n\t                    }\n\t                    this.items.splice(index, 0, item);\n\t                    this.tbarEle.splice(index, 0, innerEle);\n\t                    index++;\n\t                    this.offsetWid = itemsDiv.offsetWidth;\n\t                }\n\t            }\n\t            itemsDiv.style.width = '';\n\t            this.renderOverflowMode();\n\t        };\n\t        Toolbar.prototype.removeItems = function (args) {\n\t            var elements = args;\n\t            var index;\n\t            var innerItems = [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEM, this.element));\n\t            if (typeof (elements) === 'number') {\n\t                index = parseInt(args.toString(), 10);\n\t                this.removeItemByIndex(index, innerItems);\n\t            }\n\t            else {\n\t                if (elements && elements.length > 1) {\n\t                    for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n\t                        var ele = _a[_i];\n\t                        index = this.tbarEle.indexOf(ele);\n\t                        this.removeItemByIndex(index, innerItems);\n\t                        innerItems = ej2_base_3.selectAll('.' + CLS_ITEM, this.element);\n\t                    }\n\t                }\n\t                else {\n\t                    var ele = (elements && elements.length && elements.length === 1) ? elements[0] : args;\n\t                    index = innerItems.indexOf(ele);\n\t                    this.removeItemByIndex(index, innerItems);\n\t                }\n\t            }\n\t            this.resize();\n\t        };\n\t        Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n\t            if (this.tbarEle[index] && innerItems[index]) {\n\t                var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n\t                if (this.tbarAlign) {\n\t                    var indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's')].indexOf(this.tbarEle[eleIdx]);\n\t                    this.tbarAlgEle[(this.items[eleIdx].align + 's')].splice(indexAgn, 1);\n\t                }\n\t                ej2_base_2.detach(innerItems[index]);\n\t                this.items.splice(eleIdx, 1);\n\t                this.tbarEle.splice(eleIdx, 1);\n\t            }\n\t        };\n\t        Toolbar.prototype.templateRender = function (templateProp, innerEle, item) {\n\t            var itemType = item.type;\n\t            var eleObj = templateProp;\n\t            var isComponent;\n\t            if (typeof (templateProp) === 'object') {\n\t                isComponent = typeof (eleObj.appendTo) === 'function';\n\t            }\n\t            if (typeof (templateProp) === 'string' || !isComponent) {\n\t                var templateFn = void 0;\n\t                var val = templateProp;\n\t                val = (typeof (templateProp) === 'string') ? templateProp.trim() : templateProp;\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(val).length) {\n\t                        var ele = document.querySelector(val);\n\t                        templateFn = ej2_base_4.compile(ele.outerHTML.trim());\n\t                        ej2_base_2.detach(ele);\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    templateFn = ej2_base_4.compile(val);\n\t                }\n\t                var tempArray = void 0;\n\t                if (!ej2_base_4.isNullOrUndefined(templateFn)) {\n\t                    tempArray = templateFn({}, this, 'template');\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(tempArray) && tempArray.length > 0) {\n\t                    [].slice.call(tempArray).forEach(function (ele) {\n\t                        if (!ej2_base_4.isNullOrUndefined(ele.tagName)) {\n\t                            ele.style.display = '';\n\t                        }\n\t                        innerEle.appendChild(ele);\n\t                    });\n\t                }\n\t            }\n\t            else if (itemType === 'Input') {\n\t                var ele = ej2_base_3.createElement('input');\n\t                item.id ? (ele.id = item.id) : (ele.id = ej2_base_4.getUniqueID('tbr-ipt'));\n\t                innerEle.appendChild(ele);\n\t                eleObj.appendTo(ele);\n\t            }\n\t            this.add(innerEle, CLS_TEMPLATE);\n\t            this.tbarEle.push(innerEle);\n\t        };\n\t        Toolbar.prototype.buttonRendering = function (item, innerEle) {\n\t            var dom = ej2_base_3.createElement('button', { className: CLS_TBARBTN });\n\t            dom.setAttribute('type', 'button');\n\t            var textStr = item.text;\n\t            var iconCss;\n\t            var iconPos;\n\t            item.id ? (dom.id = item.id) : dom.id = ej2_base_4.getUniqueID('e-tbr-btn');\n\t            var btnTxt = ej2_base_3.createElement('div', { className: 'e-tbar-btn-text' });\n\t            if (textStr) {\n\t                btnTxt.innerHTML = textStr;\n\t                dom.appendChild(btnTxt);\n\t                dom.classList.add('e-tbtn-txt');\n\t            }\n\t            else {\n\t                this.add(innerEle, 'e-tbtn-align');\n\t            }\n\t            if (item.prefixIcon || item.suffixIcon) {\n\t                if ((item.prefixIcon && item.suffixIcon) || item.prefixIcon) {\n\t                    iconCss = item.prefixIcon + ' e-icons';\n\t                    iconPos = 'left';\n\t                }\n\t                else {\n\t                    iconCss = item.suffixIcon + ' e-icons';\n\t                    iconPos = 'right';\n\t                }\n\t            }\n\t            new ej2_buttons_1.Button({ iconCss: iconCss, iconPosition: iconPos }, dom);\n\t            if (item.width) {\n\t                ej2_base_3.setStyleAttribute(dom, { 'width': ej2_base_4.formatUnit(item.width) });\n\t            }\n\t            return dom;\n\t        };\n\t        Toolbar.prototype.renderSubComponent = function (item) {\n\t            var innerEle;\n\t            var dom;\n\t            innerEle = ej2_base_3.createElement('div', { className: CLS_ITEM });\n\t            innerEle.setAttribute('aria-disabled', 'false');\n\t            if (!this.tbarEle) {\n\t                this.tbarEle = [];\n\t            }\n\t            if (item.htmlAttributes) {\n\t                this.setAttr(item.htmlAttributes, innerEle);\n\t            }\n\t            if (item.tooltipText) {\n\t                innerEle.setAttribute('title', item.tooltipText);\n\t            }\n\t            if (item.cssClass) {\n\t                innerEle.className = innerEle.className + ' ' + item.cssClass;\n\t            }\n\t            if (item.template) {\n\t                this.templateRender(item.template, innerEle, item);\n\t            }\n\t            else {\n\t                switch (item.type) {\n\t                    case 'Button':\n\t                        dom = this.buttonRendering(item, innerEle);\n\t                        dom.setAttribute('tabindex', '-1');\n\t                        innerEle.appendChild(dom);\n\t                        innerEle.addEventListener('click', this.itemClick.bind(this));\n\t                        break;\n\t                    case 'Separator':\n\t                        this.add(innerEle, CLS_SEPARATOR);\n\t                        break;\n\t                }\n\t            }\n\t            if (item.showTextOn) {\n\t                var sTxt = item.showTextOn;\n\t                if (sTxt === 'Toolbar') {\n\t                    this.add(innerEle, CLS_POPUPTEXT);\n\t                    this.add(innerEle, 'e-tbtn-align');\n\t                }\n\t                else if (sTxt === 'Overflow') {\n\t                    this.add(innerEle, CLS_TBARTEXT);\n\t                }\n\t            }\n\t            if (item.overflow) {\n\t                var overflow = item.overflow;\n\t                if (overflow === 'Show') {\n\t                    this.add(innerEle, CLS_TBAROVERFLOW);\n\t                }\n\t                else if (overflow === 'Hide') {\n\t                    if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n\t                        this.add(innerEle, CLS_POPOVERFLOW);\n\t                    }\n\t                }\n\t            }\n\t            return innerEle;\n\t        };\n\t        Toolbar.prototype.itemClick = function (e) {\n\t            this.activeEleSwitch(e.currentTarget);\n\t        };\n\t        Toolbar.prototype.activeEleSwitch = function (ele) {\n\t            this.activeEleRemove(ele.firstElementChild);\n\t            this.activeEle.focus();\n\t        };\n\t        Toolbar.prototype.activeEleRemove = function (curEle) {\n\t            if (!ej2_base_4.isNullOrUndefined(this.activeEle)) {\n\t                this.activeEle.setAttribute('tabindex', '-1');\n\t            }\n\t            this.activeEle = curEle;\n\t            if (ej2_base_4.isNullOrUndefined(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n\t                curEle.removeAttribute('tabindex');\n\t            }\n\t            else {\n\t                this.activeEle.setAttribute('tabindex', '0');\n\t            }\n\t        };\n\t        Toolbar.prototype.getPersistData = function () {\n\t            return this.addOnPersist([]);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        Toolbar.prototype.resize = function () {\n\t            var ele = this.element;\n\t            this.tbResize = true;\n\t            if (this.tbarAlign) {\n\t                this.itemPositioning();\n\t            }\n\t            if (this.popObj) {\n\t                this.popObj.hide();\n\t            }\n\t            var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n\t            if (!checkOverflow) {\n\t                this.destroyHScroll();\n\t            }\n\t            if (checkOverflow && this.scrollModule && (this.offsetWid === ele.offsetWidth)) {\n\t                return;\n\t            }\n\t            if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n\t                this.renderOverflowMode();\n\t            }\n\t            if (this.popObj) {\n\t                if (this.tbarAlign) {\n\t                    this.removePositioning();\n\t                }\n\t                this.popupRefresh(this.popObj.element, false);\n\t                if (this.tbarAlign) {\n\t                    this.refreshPositioning();\n\t                }\n\t            }\n\t            this.offsetWid = ele.offsetWidth;\n\t            this.tbResize = false;\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var tEle = this.element;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'items':\n\t                        this.destroyMode();\n\t                        this.destroyItems();\n\t                        this.renderItems();\n\t                        this.renderOverflowMode();\n\t                        break;\n\t                    case 'width':\n\t                        var wid = tEle.offsetWidth;\n\t                        ej2_base_3.setStyleAttribute(tEle, { 'width': ej2_base_4.formatUnit(newProp.width) });\n\t                        this.renderOverflowMode();\n\t                        if (this.popObj && wid < tEle.offsetWidth) {\n\t                            this.popupRefresh(this.popObj.element, false);\n\t                        }\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_3.setStyleAttribute(this.element, { 'height': ej2_base_4.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'overflowMode':\n\t                        this.destroyMode();\n\t                        this.renderOverflowMode();\n\t                        if (this.enableRtl) {\n\t                            this.add(tEle, CLS_RTL);\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.add(tEle, CLS_RTL) : this.remove(tEle, CLS_RTL);\n\t                        if (!ej2_base_4.isNullOrUndefined(this.scrollModule)) {\n\t                            newProp.enableRtl ? this.add(this.scrollModule.element, CLS_RTL) : this.remove(this.scrollModule.element, CLS_RTL);\n\t                        }\n\t                        if (!ej2_base_4.isNullOrUndefined(this.popObj)) {\n\t                            newProp.enableRtl ? this.add(this.popObj.element, CLS_RTL) : this.remove(this.popObj.element, CLS_RTL);\n\t                        }\n\t                        if (this.tbarAlign) {\n\t                            this.itemPositioning();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Toolbar;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Item)\n\t    ], Toolbar.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Toolbar.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Toolbar.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Scrollable')\n\t    ], Toolbar.prototype, \"overflowMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Toolbar.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"clicked\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"beforeCreate\", void 0);\n\t    Toolbar = __decorate([\n\t        ej2_base_5.NotifyPropertyChanges\n\t    ], Toolbar);\n\t    exports.Toolbar = Toolbar;\n\t    exports.toolbarBuilder = ej2_base_5.CreateBuilder(Toolbar);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, accordion_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(accordion_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_base_6) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ACRDN_ROOT = 'e-acrdn-root';\n\t    var CLS_ROOT = 'e-accordion';\n\t    var CLS_ITEM = 'e-acrdn-item';\n\t    var CLS_ITEMFOCUS = 'e-item-focus';\n\t    var CLS_ITEMHIDE = 'e-hide';\n\t    var CLS_HEADER = 'e-acrdn-header';\n\t    var CLS_HEADERICN = 'e-acrdn-header-icon';\n\t    var CLS_HEADERCTN = 'e-acrdn-header-content';\n\t    var CLS_CONTENT = 'e-acrdn-panel';\n\t    var CLS_CTENT = 'e-content';\n\t    var CLS_TOOGLEICN = 'e-toggle-icon';\n\t    var CLS_COLLAPSEICN = 'e-tgl-collapse-icon e-icons';\n\t    var CLS_EXPANDICN = 'e-expand-icon';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_CTNHIDE = 'e-content-hide';\n\t    var CLS_SLCT = 'e-select';\n\t    var CLS_SLCTED = 'e-selected';\n\t    var CLS_ACTIVE = 'e-active';\n\t    var CLS_ANIMATE = 'e-animate';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_TOGANIMATE = 'e-toggle-animation';\n\t    var CLS_NEST = 'e-nested';\n\t    var CLS_EXPANDSTATE = 'e-expand-state';\n\t    var AccordionActionSettings = (function (_super) {\n\t        __extends(AccordionActionSettings, _super);\n\t        function AccordionActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionActionSettings;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('SlideDown')\n\t    ], AccordionActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(400)\n\t    ], AccordionActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('linear')\n\t    ], AccordionActionSettings.prototype, \"easing\", void 0);\n\t    exports.AccordionActionSettings = AccordionActionSettings;\n\t    var AccordionAnimationSettings = (function (_super) {\n\t        __extends(AccordionAnimationSettings, _super);\n\t        function AccordionAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionAnimationSettings;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_5.Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, AccordionActionSettings)\n\t    ], AccordionAnimationSettings.prototype, \"collapse\", void 0);\n\t    __decorate([\n\t        ej2_base_5.Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, AccordionActionSettings)\n\t    ], AccordionAnimationSettings.prototype, \"expand\", void 0);\n\t    exports.AccordionAnimationSettings = AccordionAnimationSettings;\n\t    var AccordionItem = (function (_super) {\n\t        __extends(AccordionItem, _super);\n\t        function AccordionItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionItem;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"header\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], AccordionItem.prototype, \"expanded\", void 0);\n\t    exports.AccordionItem = AccordionItem;\n\t    var Accordion = (function (_super) {\n\t        __extends(Accordion, _super);\n\t        function Accordion(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.keyConfigs = {\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow',\n\t                enter: 'enter',\n\t                space: 'space',\n\t                home: 'home',\n\t                end: 'end',\n\t            };\n\t            return _this;\n\t        }\n\t        Accordion.prototype.destroy = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            _super.prototype.destroy.call(this);\n\t            this.unwireEvents();\n\t            this.isDestroy = true;\n\t            while (ele.firstChild) {\n\t                ele.removeChild(ele.firstChild);\n\t            }\n\t            if (this.trgtEle) {\n\t                while (this.ctrlTem.firstChild) {\n\t                    ele.appendChild(this.ctrlTem.firstChild);\n\t                }\n\t            }\n\t            ele.removeAttribute('style');\n\t            ['aria-disabled', 'aria-multiselectable', 'role'].forEach(function (attrb) {\n\t                _this.element.removeAttribute(attrb);\n\t            });\n\t        };\n\t        Accordion.prototype.preRender = function () {\n\t            var nested = ej2_base_3.closest(this.element, '.' + CLS_CONTENT);\n\t            this.isNested = false;\n\t            if (!this.isDestroy) {\n\t                this.isDestroy = false;\n\t            }\n\t            if (!ej2_base_6.isNullOrUndefined(nested)) {\n\t                nested.classList.add(CLS_NEST);\n\t                this.isNested = true;\n\t            }\n\t            else {\n\t                this.element.classList.add(CLS_ACRDN_ROOT);\n\t            }\n\t            if (this.enableRtl) {\n\t                this.add(this.element, CLS_RTL);\n\t            }\n\t            this.expandedItems = [];\n\t        };\n\t        Accordion.prototype.add = function (ele, val) {\n\t            ele.classList.add(val);\n\t        };\n\t        Accordion.prototype.remove = function (ele, val) {\n\t            ele.classList.remove(val);\n\t        };\n\t        Accordion.prototype.render = function () {\n\t            this.initialize();\n\t            this.renderControl();\n\t            this.wireEvents();\n\t        };\n\t        Accordion.prototype.initialize = function () {\n\t            var width = ej2_base_6.formatUnit(this.width);\n\t            var height = ej2_base_6.formatUnit(this.height);\n\t            ej2_base_5.setStyleAttribute(this.element, { 'width': width, 'height': height });\n\t            var ariaAttr = {\n\t                'aria-disabled': 'false', 'role': 'presentation', 'aria-multiselectable': 'true'\n\t            };\n\t            if (this.expandedItems.length > 0) {\n\t                this.initExpand = this.expandedItems;\n\t            }\n\t            ej2_base_3.attributes(this.element, ariaAttr);\n\t            if (this.expandMode === 'Single') {\n\t                this.element.setAttribute('aria-multiselectable', 'false');\n\t            }\n\t        };\n\t        Accordion.prototype.renderControl = function () {\n\t            this.trgtEle = (this.element.children.length > 0) ? ej2_base_3.select('div', this.element) : null;\n\t            this.renderItems();\n\t            this.initItemExpand();\n\t        };\n\t        Accordion.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t            if (!ej2_base_6.isNullOrUndefined(this.keyModule)) {\n\t                this.keyModule.destroy();\n\t            }\n\t        };\n\t        Accordion.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t            if (!this.isNested && !this.isDestroy) {\n\t                ej2_base_1.rippleEffect(this.element, { selector: '.' + CLS_HEADER });\n\t            }\n\t            if (!this.isNested) {\n\t                this.keyModule = new ej2_base_1.KeyboardEvents(this.element, {\n\t                    keyAction: this.keyActionHandler.bind(this),\n\t                    keyConfigs: this.keyConfigs,\n\t                    eventName: 'keydown'\n\t                });\n\t            }\n\t        };\n\t        Accordion.prototype.focusIn = function (e) {\n\t            e.target.parentElement.classList.add(CLS_ITEMFOCUS);\n\t        };\n\t        Accordion.prototype.focusOut = function (e) {\n\t            e.target.parentElement.classList.remove(CLS_ITEMFOCUS);\n\t        };\n\t        Accordion.prototype.ctrlTemplate = function () {\n\t            var _this = this;\n\t            this.ctrlTem = this.element.cloneNode(true);\n\t            var innerEles = this.element.children;\n\t            var content;\n\t            ej2_base_3.addClass(innerEles, [CLS_ITEM]);\n\t            [].slice.call(innerEles).forEach(function (el) {\n\t                el.id = ej2_base_2.getUniqueID('acrdn_item');\n\t                if (el.children.length > 0) {\n\t                    _this.add(el.children[0], CLS_HEADER);\n\t                    var header = el.children[0];\n\t                    ej2_base_3.attributes(header, { 'tabindex': '0', 'role': 'heading', 'aria-level': innerEles.length.toString() });\n\t                    header.id = ej2_base_2.getUniqueID('acrdn_header');\n\t                    ej2_base_1.EventHandler.add(header, 'focus', _this.focusIn, _this);\n\t                    ej2_base_1.EventHandler.add(header, 'blur', _this.focusOut, _this);\n\t                    var headerEle = header.firstElementChild;\n\t                    if (headerEle) {\n\t                        headerEle.classList.add(CLS_HEADERCTN);\n\t                    }\n\t                    content = el.children[1];\n\t                    if (content) {\n\t                        content.id = ej2_base_2.getUniqueID('acrdn_panel');\n\t                        header.setAttribute('aria-controls', content.id);\n\t                        content.style.display = '';\n\t                        el.classList.add(CLS_SLCT);\n\t                        el.children[0].appendChild(_this.toggleIconGenerate());\n\t                        ej2_base_3.classList(content, [CLS_CONTENT, CLS_CTNHIDE], []);\n\t                        ej2_base_3.attributes(content, { 'aria-labelledby': header.id, 'aria-hidden': 'true' });\n\t                        content = content.firstElementChild;\n\t                        if (content) {\n\t                            content.classList.add(CLS_CTENT);\n\t                            content.style.display = '';\n\t                        }\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        Accordion.prototype.toggleIconGenerate = function () {\n\t            var tglIcon = ej2_base_5.createElement('div', { className: CLS_TOOGLEICN });\n\t            var hdrColIcon = ej2_base_5.createElement('span', { className: CLS_COLLAPSEICN });\n\t            tglIcon.appendChild(hdrColIcon);\n\t            return tglIcon;\n\t        };\n\t        Accordion.prototype.initItemExpand = function () {\n\t            var len = this.initExpand.length;\n\t            if (len === 0) {\n\t                return;\n\t            }\n\t            if (this.expandMode === 'Single') {\n\t                this.expandItem(true, this.initExpand[len - 1]);\n\t            }\n\t            else {\n\t                for (var i = 0; i < len; i++) {\n\t                    this.expandItem(true, this.initExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.renderItems = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            var innerItem;\n\t            if (ej2_base_6.isNullOrUndefined(this.initExpand)) {\n\t                this.initExpand = [];\n\t            }\n\t            var items = this.items;\n\t            if (!ej2_base_6.isNullOrUndefined(this.trgtEle)) {\n\t                this.ctrlTemplate();\n\t            }\n\t            else if (ele && items.length > 0) {\n\t                items.forEach(function (item, index) {\n\t                    innerItem = _this.renderInnerItem(item, index);\n\t                    ele.appendChild(innerItem);\n\t                    if (innerItem.childElementCount > 0) {\n\t                        ej2_base_1.EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'focus', _this.focusIn, _this);\n\t                        ej2_base_1.EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'blur', _this.focusOut, _this);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Accordion.prototype.clickHandler = function (e) {\n\t            var _this = this;\n\t            var trgt = e.target;\n\t            var eventArgs = {};\n\t            var index;\n\t            var tglIcon;\n\t            var acrdEle = ej2_base_3.closest(trgt, '.' + CLS_ROOT);\n\t            if (acrdEle !== this.element) {\n\t                return;\n\t            }\n\t            trgt.classList.add('e-target');\n\t            var acrdnItem = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            var acrdnHdr = ej2_base_3.closest(trgt, '.' + CLS_HEADER);\n\t            var acrdnCtn = ej2_base_3.closest(trgt, '.' + CLS_CONTENT);\n\t            if (acrdnItem && (ej2_base_6.isNullOrUndefined(acrdnHdr) || ej2_base_6.isNullOrUndefined(acrdnCtn))) {\n\t                acrdnHdr = acrdnItem.children[0];\n\t                acrdnCtn = acrdnItem.children[1];\n\t            }\n\t            if (acrdnHdr) {\n\t                tglIcon = ej2_base_3.select('.' + CLS_TOOGLEICN, acrdnHdr);\n\t            }\n\t            var acrdnCtnItem;\n\t            if (acrdnCtn) {\n\t                acrdnCtnItem = ej2_base_3.closest(acrdnCtn, '.' + CLS_ITEM);\n\t            }\n\t            var acrdActive = [];\n\t            index = this.getIndexByItem(acrdnItem);\n\t            if (acrdnCtnItem) {\n\t                eventArgs.item = this.items[this.getIndexByItem(acrdnCtnItem)];\n\t            }\n\t            eventArgs.originalEvent = e;\n\t            var ctnCheck = !ej2_base_6.isNullOrUndefined(tglIcon) && ej2_base_6.isNullOrUndefined(this.trgtEle) && acrdnItem.childElementCount <= 1;\n\t            if (ctnCheck && (ej2_base_6.isNullOrUndefined(acrdnCtn) || !ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_HEADER + ' .' + CLS_TOOGLEICN, acrdnCtnItem)))) {\n\t                acrdnItem.appendChild(this.contentRendering(index));\n\t                this.ariaAttrUpdate(acrdnItem);\n\t            }\n\t            this.trigger('clicked', eventArgs);\n\t            var cntclkCheck = (acrdnCtn && !ej2_base_6.isNullOrUndefined(ej2_base_3.select('.e-target', acrdnCtn)));\n\t            cntclkCheck = cntclkCheck && (ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_ROOT, acrdnCtn)) || !(ej2_base_3.closest(trgt, '.' + CLS_ROOT) === this.element));\n\t            trgt.classList.remove('e-target');\n\t            if (trgt.classList.contains(CLS_CONTENT) || trgt.classList.contains(CLS_CTENT) || cntclkCheck) {\n\t                return;\n\t            }\n\t            [].slice.call(this.element.children).forEach(function (el) {\n\t                if (el.classList.contains(CLS_ACTIVE)) {\n\t                    acrdActive.push(el);\n\t                }\n\t            });\n\t            var acrdAniEle = [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM + ' [' + CLS_ANIMATE + ']'));\n\t            if (acrdAniEle.length > 0) {\n\t                for (var _i = 0, acrdAniEle_1 = acrdAniEle; _i < acrdAniEle_1.length; _i++) {\n\t                    var el = acrdAniEle_1[_i];\n\t                    acrdActive.push(el.parentElement);\n\t                }\n\t            }\n\t            var sameContentCheck = acrdActive.indexOf(acrdnCtnItem) !== -1 && acrdnCtn.getAttribute('e-animate') === 'true';\n\t            var sameHeader = false;\n\t            if (!ej2_base_6.isNullOrUndefined(acrdnItem) && !ej2_base_6.isNullOrUndefined(acrdnHdr)) {\n\t                var acrdnCtn_1 = ej2_base_3.select('.' + CLS_CONTENT, acrdnItem);\n\t                var acrdnRoot = ej2_base_3.closest(acrdnItem, '.' + CLS_ACRDN_ROOT);\n\t                var expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n\t                if (ej2_base_6.isNullOrUndefined(acrdnCtn_1)) {\n\t                    return;\n\t                }\n\t                sameHeader = (expandState === acrdnItem);\n\t                if (ej2_base_3.isVisible(acrdnCtn_1) && (!sameContentCheck || acrdnCtnItem.classList.contains(CLS_SLCTED))) {\n\t                    this.collapse(acrdnCtn_1);\n\t                }\n\t                else {\n\t                    if ((acrdActive.length > 0) && this.expandMode === 'Single' && !sameContentCheck) {\n\t                        acrdActive.forEach(function (el) {\n\t                            _this.collapse(ej2_base_3.select('.' + CLS_CONTENT, el));\n\t                            el.classList.remove(CLS_EXPANDSTATE);\n\t                        });\n\t                    }\n\t                    this.expand(acrdnCtn_1);\n\t                }\n\t                if (!ej2_base_6.isNullOrUndefined(expandState) && !sameHeader) {\n\t                    expandState.classList.remove(CLS_EXPANDSTATE);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.eleMoveFocus = function (action, root, trgt) {\n\t            var clst;\n\t            var clstItem = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (trgt === root) {\n\t                clst = ((action === 'moveUp' ? trgt.lastElementChild : trgt).querySelector('.' + CLS_HEADER));\n\t            }\n\t            else if (trgt.classList.contains(CLS_HEADER)) {\n\t                clstItem = (action === 'moveUp' ? clstItem.previousElementSibling : clstItem.nextElementSibling);\n\t                if (clstItem) {\n\t                    clst = ej2_base_3.select('.' + CLS_HEADER, clstItem);\n\t                }\n\t            }\n\t            if (clst) {\n\t                clst.focus();\n\t            }\n\t        };\n\t        Accordion.prototype.keyActionHandler = function (e) {\n\t            e.preventDefault();\n\t            var clst;\n\t            var root = this.element;\n\t            var trgt = e.target;\n\t            var content;\n\t            switch (e.action) {\n\t                case 'moveUp':\n\t                    this.eleMoveFocus(e.action, root, trgt);\n\t                    break;\n\t                case 'moveDown':\n\t                    this.eleMoveFocus(e.action, root, trgt);\n\t                    break;\n\t                case 'space':\n\t                case 'enter':\n\t                    content = trgt.nextElementSibling;\n\t                    if (!ej2_base_6.isNullOrUndefined(content) && content.classList.contains(CLS_CONTENT)) {\n\t                        if (content.getAttribute('e-animate') !== 'true') {\n\t                            trgt.click();\n\t                        }\n\t                    }\n\t                    else {\n\t                        trgt.click();\n\t                    }\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    clst = e.action === 'home' ? root.firstElementChild.children[0] : root.lastElementChild.children[0];\n\t                    clst.focus();\n\t                    break;\n\t            }\n\t        };\n\t        Accordion.prototype.headerEleGenerate = function () {\n\t            var header = ej2_base_5.createElement('div', { className: CLS_HEADER, id: ej2_base_2.getUniqueID('acrdn_header') });\n\t            var ariaAttr = {\n\t                'tabindex': '0', 'role': 'heading', 'aria-expanded': 'false', 'aria-selected': 'false',\n\t                'aria-disabled': 'false', 'aria-level': this.items.length.toString()\n\t            };\n\t            ej2_base_3.attributes(header, ariaAttr);\n\t            return header;\n\t        };\n\t        Accordion.prototype.renderInnerItem = function (item, index) {\n\t            var innerEle;\n\t            innerEle = ej2_base_5.createElement('div', { className: CLS_ITEM });\n\t            innerEle.id = ej2_base_2.getUniqueID('acrdn_item');\n\t            if (item.header) {\n\t                var ctnEle = this.headerEleGenerate();\n\t                var hdrEle = ej2_base_5.createElement('div', { className: CLS_HEADERCTN });\n\t                ctnEle.appendChild(hdrEle);\n\t                ctnEle.appendChild(this.fetchElement(hdrEle, item.header, index, true));\n\t                innerEle.appendChild(ctnEle);\n\t            }\n\t            var hdr = ej2_base_3.select('.' + CLS_HEADER, innerEle);\n\t            if (item.expanded && !ej2_base_6.isNullOrUndefined(index) && (!this.enablePersistence)) {\n\t                if (this.initExpand.indexOf(index) === -1) {\n\t                    this.initExpand.push(index);\n\t                }\n\t            }\n\t            if (item.cssClass) {\n\t                innerEle.classList.add(item.cssClass);\n\t            }\n\t            if (item.iconCss) {\n\t                var hdrIcnEle = ej2_base_5.createElement('div', { className: CLS_HEADERICN });\n\t                var icon = ej2_base_5.createElement('span', { className: item.iconCss + ' e-icons' });\n\t                hdrIcnEle.appendChild(icon);\n\t                if (ej2_base_6.isNullOrUndefined(hdr)) {\n\t                    hdr = this.headerEleGenerate();\n\t                    hdr.appendChild(hdrIcnEle);\n\t                    innerEle.appendChild(hdr);\n\t                }\n\t                else {\n\t                    hdr.insertBefore(hdrIcnEle, hdr.childNodes[0]);\n\t                }\n\t            }\n\t            if (item.content) {\n\t                var hdrIcon = this.toggleIconGenerate();\n\t                if (ej2_base_6.isNullOrUndefined(hdr)) {\n\t                    hdr = this.headerEleGenerate();\n\t                    innerEle.appendChild(hdr);\n\t                }\n\t                hdr.appendChild(hdrIcon);\n\t                this.add(innerEle, CLS_SLCT);\n\t            }\n\t            return innerEle;\n\t        };\n\t        Accordion.prototype.fetchElement = function (ele, value, index, isHeader) {\n\t            var templateFn;\n\t            var temString;\n\t            try {\n\t                if (document.querySelectorAll(value).length) {\n\t                    var eleVal = document.querySelector(value);\n\t                    temString = eleVal.outerHTML.trim();\n\t                    templateFn = ej2_base_2.compile(temString);\n\t                    ej2_base_3.detach(eleVal);\n\t                }\n\t            }\n\t            catch (e) {\n\t                templateFn = ej2_base_2.compile(value);\n\t            }\n\t            if (!ej2_base_6.isNullOrUndefined(templateFn) && templateFn().length > 0 && !(ej2_base_6.isNullOrUndefined(templateFn()[0].tagName) && templateFn().length === 1)) {\n\t                [].slice.call(templateFn()).forEach(function (el) {\n\t                    if (!ej2_base_6.isNullOrUndefined(el.tagName)) {\n\t                        el.style.display = '';\n\t                    }\n\t                    ele.appendChild(el);\n\t                });\n\t                if (!ej2_base_6.isNullOrUndefined(temString)) {\n\t                    if (isHeader) {\n\t                        this.items[index].header = temString;\n\t                    }\n\t                    else {\n\t                        this.items[index].content = temString;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                ele.innerHTML = value;\n\t            }\n\t            return ele;\n\t        };\n\t        Accordion.prototype.ariaAttrUpdate = function (itemEle) {\n\t            var header = ej2_base_3.select('.' + CLS_HEADER, itemEle);\n\t            var content = ej2_base_3.select('.' + CLS_CONTENT, itemEle);\n\t            header.setAttribute('aria-controls', content.id);\n\t            content.setAttribute('aria-labelledby', header.id);\n\t        };\n\t        Accordion.prototype.contentRendering = function (index) {\n\t            var content = this.items[index].content;\n\t            var itemcnt = ej2_base_5.createElement('div', { className: CLS_CONTENT + ' ' + CLS_CTNHIDE, id: ej2_base_2.getUniqueID('acrdn_panel') });\n\t            ej2_base_3.attributes(itemcnt, { 'aria-hidden': 'true' });\n\t            var ctn = ej2_base_5.createElement('div', { className: CLS_CTENT });\n\t            itemcnt.appendChild(this.fetchElement(ctn, content, index, false));\n\t            return itemcnt;\n\t        };\n\t        Accordion.prototype.expand = function (trgt) {\n\t            var eventArgs;\n\t            var trgtItemEle = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (ej2_base_6.isNullOrUndefined(trgt) || (ej2_base_3.isVisible(trgt) && trgt.getAttribute('e-animate') !== 'true') || trgtItemEle.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            var acrdnRoot = ej2_base_3.closest(trgtItemEle, '.' + CLS_ACRDN_ROOT);\n\t            var expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n\t            var animation = {\n\t                name: this.animation.expand.effect,\n\t                duration: this.animation.expand.duration,\n\t                timingFunction: this.animation.expand.easing\n\t            };\n\t            var icon = ej2_base_3.select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n\t            eventArgs = { element: trgtItemEle,\n\t                item: this.items[this.getIndexByItem(trgtItemEle)],\n\t                isExpanded: true };\n\t            var eff = animation.name;\n\t            this.trigger('expanding', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            icon.classList.add(CLS_TOGANIMATE);\n\t            this.expandedItemsPush(trgtItemEle);\n\t            if (!ej2_base_6.isNullOrUndefined(expandState)) {\n\t                expandState.classList.remove(CLS_EXPANDSTATE);\n\t            }\n\t            trgtItemEle.classList.add(CLS_EXPANDSTATE);\n\t            if ((animation.name === 'None')) {\n\t                this.expandProgress('begin', icon, trgt, trgtItemEle, eventArgs);\n\t                this.expandProgress('end', icon, trgt, trgtItemEle, eventArgs);\n\t                return;\n\t            }\n\t            this.expandAnimation(eff, icon, trgt, trgtItemEle, animation, eventArgs);\n\t        };\n\t        Accordion.prototype.expandAnimation = function (ef, icn, trgt, trgtItemEle, animate, args) {\n\t            var _this = this;\n\t            var height;\n\t            var trgtHgt;\n\t            if (ef === 'SlideDown') {\n\t                animate.begin = function () {\n\t                    _this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n\t                    trgt.style.position = 'absolute';\n\t                    height = trgtItemEle.offsetHeight;\n\t                    trgtHgt = trgt.offsetHeight;\n\t                    trgt.style.maxHeight = (trgt.offsetHeight) + 'px';\n\t                    trgtItemEle.style.maxHeight = '';\n\t                };\n\t                animate.progress = function () {\n\t                    trgtItemEle.style.minHeight = (height + trgt.offsetHeight) + 'px';\n\t                };\n\t                animate.end = function () {\n\t                    ej2_base_5.setStyleAttribute(trgt, { 'position': '', 'maxHeight': '' });\n\t                    trgtItemEle.style.minHeight = '';\n\t                    _this.expandProgress('end', icn, trgt, trgtItemEle, args);\n\t                };\n\t            }\n\t            else {\n\t                animate.begin = function () {\n\t                    _this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n\t                };\n\t                animate.end = function () {\n\t                    _this.expandProgress('end', icn, trgt, trgtItemEle, args);\n\t                };\n\t            }\n\t            new ej2_base_4.Animation(animate).animate(trgt);\n\t        };\n\t        Accordion.prototype.expandProgress = function (progress, icon, trgt, trgtItemEle, eventArgs) {\n\t            this.remove(trgt, CLS_CTNHIDE);\n\t            this.add(trgtItemEle, CLS_SLCTED);\n\t            this.add(icon, CLS_EXPANDICN);\n\t            if (progress === 'end') {\n\t                this.add(trgtItemEle, CLS_ACTIVE);\n\t                trgt.setAttribute('aria-hidden', 'false');\n\t                ej2_base_3.attributes(trgt.previousElementSibling, { 'aria-selected': 'true', 'aria-expanded': 'true' });\n\t                icon.classList.remove(CLS_TOGANIMATE);\n\t                this.trigger('expanded', eventArgs);\n\t            }\n\t        };\n\t        Accordion.prototype.expandedItemsPush = function (item) {\n\t            var index = this.getIndexByItem(item);\n\t            if (this.expandedItems.indexOf(index) === -1) {\n\t                this.expandedItems.push(index);\n\t            }\n\t        };\n\t        Accordion.prototype.getIndexByItem = function (item) {\n\t            return [].slice.call(this.element.children).indexOf(item);\n\t        };\n\t        Accordion.prototype.expandedItemsPop = function (item) {\n\t            var index = this.getIndexByItem(item);\n\t            this.expandedItems.splice(this.expandedItems.indexOf(index), 1);\n\t        };\n\t        Accordion.prototype.collapse = function (trgt) {\n\t            var eventArgs;\n\t            var trgtItemEle = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (ej2_base_6.isNullOrUndefined(trgt) || !ej2_base_3.isVisible(trgt) || trgtItemEle.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            var animation = {\n\t                name: this.animation.collapse.effect,\n\t                duration: this.animation.collapse.duration,\n\t                timingFunction: this.animation.collapse.easing,\n\t            };\n\t            var icon = ej2_base_3.select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n\t            eventArgs = { element: trgtItemEle,\n\t                item: this.items[this.getIndexByItem(trgtItemEle)],\n\t                isExpanded: false };\n\t            var eff = animation.name;\n\t            this.trigger('expanding', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            this.expandedItemsPop(trgtItemEle);\n\t            trgtItemEle.classList.add(CLS_EXPANDSTATE);\n\t            icon.classList.add(CLS_TOGANIMATE);\n\t            if ((animation.name === 'None')) {\n\t                this.collapseProgress('begin', icon, trgt, trgtItemEle, eventArgs);\n\t                this.collapseProgress('end', icon, trgt, trgtItemEle, eventArgs);\n\t                return;\n\t            }\n\t            this.collapseAnimation(eff, trgt, trgtItemEle, icon, animation, eventArgs);\n\t        };\n\t        Accordion.prototype.collapseAnimation = function (ef, trgt, trgtItEl, icn, animate, args) {\n\t            var _this = this;\n\t            var height;\n\t            var trgtHeight;\n\t            var itemHeight;\n\t            var remain;\n\t            if (ef === 'SlideUp') {\n\t                animate.begin = function () {\n\t                    itemHeight = trgtItEl.offsetHeight;\n\t                    trgtItEl.style.minHeight = itemHeight + 'px';\n\t                    trgt.style.position = 'absolute';\n\t                    height = trgtItEl.offsetHeight;\n\t                    trgtHeight = trgt.offsetHeight;\n\t                    trgt.style.maxHeight = trgtHeight + 'px';\n\t                    _this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n\t                };\n\t                animate.progress = function () {\n\t                    remain = ((height - (trgtHeight - trgt.offsetHeight)));\n\t                    if (remain < itemHeight) {\n\t                        trgtItEl.style.minHeight = remain + 'px';\n\t                    }\n\t                };\n\t                animate.end = function () {\n\t                    trgt.style.display = 'none';\n\t                    _this.collapseProgress('end', icn, trgt, trgtItEl, args);\n\t                    trgtItEl.style.minHeight = '';\n\t                    ej2_base_5.setStyleAttribute(trgt, { 'position': '', 'maxHeight': '', 'display': '' });\n\t                };\n\t            }\n\t            else {\n\t                animate.begin = function () {\n\t                    _this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n\t                };\n\t                animate.end = function () {\n\t                    _this.collapseProgress('end', icn, trgt, trgtItEl, args);\n\t                };\n\t            }\n\t            new ej2_base_4.Animation(animate).animate(trgt);\n\t        };\n\t        Accordion.prototype.collapseProgress = function (progress, icon, trgt, trgtItemEle, eventArgs) {\n\t            this.remove(icon, CLS_EXPANDICN);\n\t            this.remove(trgtItemEle, CLS_SLCTED);\n\t            if (progress === 'end') {\n\t                this.add(trgt, CLS_CTNHIDE);\n\t                icon.classList.remove(CLS_TOGANIMATE);\n\t                this.remove(trgtItemEle, CLS_ACTIVE);\n\t                trgt.setAttribute('aria-hidden', 'true');\n\t                ej2_base_3.attributes(trgt.previousElementSibling, { 'aria-selected': 'false', 'aria-expanded': 'false' });\n\t                this.trigger('expanded', eventArgs);\n\t            }\n\t        };\n\t        Accordion.prototype.getModuleName = function () {\n\t            return 'accordion';\n\t        };\n\t        Accordion.prototype.itemAttribUpdate = function () {\n\t            var itemEle = [].slice.call(this.element.children);\n\t            var itemLen = this.items.length;\n\t            itemEle.forEach(function (ele) {\n\t                ej2_base_3.select('.' + CLS_HEADER, ele).setAttribute('aria-level', '' + itemLen);\n\t            });\n\t        };\n\t        Accordion.prototype.addItem = function (item, index) {\n\t            var ele = this.element;\n\t            if (ej2_base_6.isNullOrUndefined(index)) {\n\t                index = this.items.length;\n\t            }\n\t            if (ele.childElementCount >= index) {\n\t                this.items.splice(index, 0, item);\n\t                var innerItemEle = this.renderInnerItem(item, index);\n\t                if (ele.childElementCount === index) {\n\t                    ele.appendChild(innerItemEle);\n\t                }\n\t                else {\n\t                    ele.insertBefore(innerItemEle, ele.children[index]);\n\t                }\n\t                ej2_base_1.EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n\t                ej2_base_1.EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n\t                this.itemAttribUpdate();\n\t            }\n\t            this.expandedItems = [];\n\t            this.expandedItemRefresh(ele);\n\t            if (item.expanded) {\n\t                this.expandItem(true, index);\n\t            }\n\t        };\n\t        Accordion.prototype.expandedItemRefresh = function (ele) {\n\t            var _this = this;\n\t            [].slice.call(ele.children).forEach(function (el) {\n\t                if (el.classList.contains(CLS_SLCTED)) {\n\t                    _this.expandedItemsPush(el);\n\t                }\n\t            });\n\t        };\n\t        Accordion.prototype.removeItem = function (index) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            ej2_base_3.detach(ele);\n\t            this.items.splice(index, 1);\n\t            this.itemAttribUpdate();\n\t            this.expandedItems = [];\n\t            this.expandedItemRefresh(this.element);\n\t        };\n\t        Accordion.prototype.select = function (index) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele) || ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_HEADER, ele))) {\n\t                return;\n\t            }\n\t            ele.children[0].focus();\n\t        };\n\t        Accordion.prototype.hideItem = function (index, isHidden) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            if (ej2_base_6.isNullOrUndefined(isHidden)) {\n\t                isHidden = true;\n\t            }\n\t            isHidden ? this.add(ele, CLS_ITEMHIDE) : this.remove(ele, CLS_ITEMHIDE);\n\t        };\n\t        Accordion.prototype.enableItem = function (index, isEnable) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            var eleHeader = ele.firstElementChild;\n\t            if (isEnable) {\n\t                this.remove(ele, CLS_DISABLE);\n\t                ej2_base_3.attributes(eleHeader, { 'tabindex': '0', 'aria-disabled': 'false' });\n\t                eleHeader.focus();\n\t            }\n\t            else {\n\t                if (ele.classList.contains(CLS_ACTIVE)) {\n\t                    this.expandItem(false, index);\n\t                    this.eleMoveFocus('movedown', this.element, eleHeader);\n\t                }\n\t                this.add(ele, CLS_DISABLE);\n\t                eleHeader.setAttribute('aria-disabled', 'true');\n\t                eleHeader.removeAttribute('tabindex');\n\t            }\n\t        };\n\t        Accordion.prototype.expandItem = function (isExpand, index) {\n\t            var _this = this;\n\t            var root = this.element;\n\t            if (ej2_base_6.isNullOrUndefined(index)) {\n\t                if (this.expandMode === 'Single' && isExpand) {\n\t                    var ele = root.children[root.childElementCount - 1];\n\t                    this.itemExpand(isExpand, ele, this.getIndexByItem(ele));\n\t                }\n\t                else {\n\t                    [].slice.call(this.element.children).forEach(function (el) {\n\t                        _this.itemExpand(isExpand, el, _this.getIndexByItem(el));\n\t                    });\n\t                }\n\t            }\n\t            else {\n\t                var ele = this.element.children[index];\n\t                if (ej2_base_6.isNullOrUndefined(ele) || !ele.classList.contains(CLS_SLCT) || (ele.classList.contains(CLS_ACTIVE) && isExpand)) {\n\t                    return;\n\t                }\n\t                else {\n\t                    if (this.expandMode === 'Single') {\n\t                        this.expandItem(false);\n\t                    }\n\t                    this.itemExpand(isExpand, ele, index);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.itemExpand = function (isExpand, ele, index) {\n\t            var ctn = ele.children[1];\n\t            if (ele.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            if (ej2_base_6.isNullOrUndefined(ctn) && isExpand) {\n\t                ctn = this.contentRendering(index);\n\t                ele.appendChild(ctn);\n\t                this.ariaAttrUpdate(ele);\n\t            }\n\t            else if (ej2_base_6.isNullOrUndefined(ctn)) {\n\t                return;\n\t            }\n\t            isExpand ? this.expand(ctn) : this.collapse(ctn);\n\t        };\n\t        Accordion.prototype.getPersistData = function () {\n\t            var keyEntity = ['expandedItems'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Accordion.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var acrdn = this.element;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.add(acrdn, CLS_RTL) : this.remove(acrdn, CLS_RTL);\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_5.setStyleAttribute(this.element, { 'height': ej2_base_6.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'width':\n\t                        ej2_base_5.setStyleAttribute(this.element, { 'width': ej2_base_6.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'expandMode':\n\t                        if (newProp.expandMode === 'Single') {\n\t                            this.element.setAttribute('aria-multiselectable', 'false');\n\t                            if (this.expandedItems.length > 1) {\n\t                                this.expandItem(false);\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.element.setAttribute('aria-multiselectable', 'true');\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Accordion;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Collection([], AccordionItem)\n\t    ], Accordion.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Accordion.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Accordion.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Multiple')\n\t    ], Accordion.prototype, \"expandMode\", void 0);\n\t    __decorate([\n\t        ej2_base_5.Complex({}, AccordionAnimationSettings)\n\t    ], Accordion.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"clicked\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"expanding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"expanded\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"destroyed\", void 0);\n\t    Accordion = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Accordion);\n\t    exports.Accordion = Accordion;\n\t    exports.accordionBuilder = ej2_base_4.CreateBuilder(Accordion);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, context_menu_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(context_menu_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(12), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_lists_1, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DOWNARROW = 'downarrow';\n\t    var ENTER = 'enter';\n\t    var ESCAPE = 'escape';\n\t    var FOCUSED = 'e-focused';\n\t    var HEADER = 'e-menuheader';\n\t    var LEFTARROW = 'leftarrow';\n\t    var RIGHTARROW = 'rightarrow';\n\t    var RTL = 'e-rtl';\n\t    var SELECTED = 'e-selected';\n\t    var SEPARATOR = 'e-separator';\n\t    var UPARROW = 'uparrow';\n\t    var WRAPPER = 'e-contextmenu-wrapper';\n\t    var CARET = 'e-caret';\n\t    var ITEM = 'e-menu-item';\n\t    var DISABLED = 'e-disabled';\n\t    var HIDE = 'e-menu-hide';\n\t    var ICONS = 'e-icons';\n\t    var MenuItem = (function (_super) {\n\t        __extends(MenuItem, _super);\n\t        function MenuItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return MenuItem;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], MenuItem.prototype, \"separator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], MenuItem)\n\t    ], MenuItem.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"url\", void 0);\n\t    exports.MenuItem = MenuItem;\n\t    var ContextMenu = (function (_super) {\n\t        __extends(ContextMenu, _super);\n\t        function ContextMenu(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.animation = new ej2_base_3.Animation({});\n\t            _this.navIdx = [];\n\t            _this.isTapHold = false;\n\t            return _this;\n\t        }\n\t        ContextMenu.prototype.preRender = function () {\n\t            if (this.element.tagName === 'EJ-CONTEXTMENU') {\n\t                var ejInst = ej2_base_4.getValue('ej2_instances', this.element);\n\t                var ul = ej2_base_5.createElement('ul');\n\t                var wrapper = ej2_base_5.createElement('EJ-CONTEXTMENU', { className: WRAPPER });\n\t                this.element.parentNode.insertBefore(ul, this.element);\n\t                ej2_base_5.detach(this.element);\n\t                this.element = ul;\n\t                this.element.classList.add('e-' + this.getModuleName());\n\t                document.body.appendChild(wrapper);\n\t                wrapper.appendChild(this.element);\n\t                ej2_base_4.setValue('ej2_instances', ejInst, this.element);\n\t                if (!this.element.id) {\n\t                    this.element.id = ej2_base_4.getUniqueID(this.getModuleName());\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.render = function () {\n\t            this.initWrapper();\n\t            this.renderItems();\n\t            this.wireEvents();\n\t        };\n\t        ContextMenu.prototype.initWrapper = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (!wrapper.classList.contains(WRAPPER)) {\n\t                wrapper = ej2_base_5.createElement('div', { className: WRAPPER });\n\t                document.body.appendChild(wrapper);\n\t            }\n\t            if (this.cssClass) {\n\t                wrapper.classList.add(this.cssClass);\n\t            }\n\t            if (this.enableRtl) {\n\t                wrapper.classList.add(RTL);\n\t            }\n\t            ej2_base_3.attributes(this.element, { 'role': 'menu', 'tabindex': '0' });\n\t            wrapper.appendChild(this.element);\n\t            this.element.style.zIndex = this.getZIndex();\n\t        };\n\t        ContextMenu.prototype.renderItems = function () {\n\t            if (!this.items.length) {\n\t                this.items = ej2_lists_1.ListBase.createJsonFromElement(this.element);\n\t                this.element.innerHTML = '';\n\t            }\n\t            var ul = this.createItems(this.items);\n\t            ej2_base_5.append(Array.prototype.slice.call(ul.children), this.element);\n\t        };\n\t        ContextMenu.prototype.wireEvents = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (this.target) {\n\t                this.targetElem = ej2_base_5.select(this.target);\n\t                if (ej2_base_4.Browser.isIos) {\n\t                    this.touchModule = new ej2_base_2.Touch(this.targetElem, { tapHold: this.touchHandler.bind(this) });\n\t                }\n\t                else {\n\t                    ej2_base_2.EventHandler.add(this.targetElem, 'contextmenu', this.cmenuHandler, this);\n\t                }\n\t                for (var _i = 0, _a = this.getScrollableParents(this.targetElem); _i < _a.length; _i++) {\n\t                    var parent_1 = _a[_i];\n\t                    ej2_base_2.EventHandler.add(parent_1, 'scroll', this.scrollHandler, this);\n\t                }\n\t            }\n\t            if (!ej2_base_4.Browser.isDevice) {\n\t                ej2_base_2.EventHandler.add(wrapper, 'mouseover', this.moverHandler, this);\n\t                ej2_base_2.EventHandler.add(document, 'mousedown', this.mouseDownHandler, this);\n\t            }\n\t            ej2_base_2.EventHandler.add(document, 'click', this.clickHandler, this);\n\t            this.keyboardModule = new ej2_base_2.KeyboardEvents(wrapper, {\n\t                keyAction: this.keyBoardHandler.bind(this),\n\t                keyConfigs: {\n\t                    downarrow: DOWNARROW,\n\t                    uparrow: UPARROW,\n\t                    enter: ENTER,\n\t                    leftarrow: LEFTARROW,\n\t                    rightarrow: RIGHTARROW,\n\t                    escape: ESCAPE\n\t                }\n\t            });\n\t            ej2_base_5.rippleEffect(wrapper, { selector: '.' + ITEM });\n\t        };\n\t        ContextMenu.prototype.mouseDownHandler = function (e) {\n\t            if (ej2_base_5.closest(e.target, '.' + WRAPPER) !== this.getWrapper()) {\n\t                this.closeMenu(this.navIdx.length);\n\t            }\n\t        };\n\t        ContextMenu.prototype.getScrollableParents = function (target) {\n\t            var elemStyle = getComputedStyle(target);\n\t            var parentCollection = [];\n\t            var regex = /(auto|scroll)/;\n\t            var parentEle = target.parentElement;\n\t            while (parentEle && parentEle.tagName !== 'HTML') {\n\t                var parentStyle = getComputedStyle(parentEle);\n\t                if (!(elemStyle.position === 'absolute' && parentStyle.position === 'static')\n\t                    && regex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {\n\t                    parentCollection.push(parentEle);\n\t                }\n\t                parentEle = parentEle.parentElement;\n\t            }\n\t            parentCollection.push(document);\n\t            return parentCollection;\n\t        };\n\t        ContextMenu.prototype.keyBoardHandler = function (e) {\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case DOWNARROW:\n\t                case UPARROW:\n\t                    this.upDownKeyHandler(e);\n\t                    break;\n\t                case RIGHTARROW:\n\t                    this.rightEnterKeyHandler({ action: RIGHTARROW });\n\t                    break;\n\t                case LEFTARROW:\n\t                    this.leftEscKeyHandler({ action: LEFTARROW });\n\t                    break;\n\t                case ENTER:\n\t                    this.rightEnterKeyHandler({ action: ENTER });\n\t                    break;\n\t                case ESCAPE:\n\t                    this.leftEscKeyHandler({ action: ESCAPE });\n\t                    break;\n\t            }\n\t        };\n\t        ContextMenu.prototype.upDownKeyHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            var defaultIdx = e.action === DOWNARROW ? 0 : cul.childElementCount - 1;\n\t            var fliIdx = defaultIdx;\n\t            var fli = this.getLIByClass(cul, FOCUSED);\n\t            if (fli) {\n\t                fliIdx = this.getIdx(cul, fli);\n\t                fli.classList.remove(FOCUSED);\n\t                e.action === DOWNARROW ? fliIdx++ : fliIdx--;\n\t                if (fliIdx === (e.action === DOWNARROW ? cul.childElementCount : -1)) {\n\t                    fliIdx = defaultIdx;\n\t                }\n\t            }\n\t            var cli = cul.children[fliIdx];\n\t            fliIdx = this.isValidLI(cli, fliIdx, e.action);\n\t            cul.children[fliIdx].classList.add(FOCUSED);\n\t            cul.children[fliIdx].focus();\n\t        };\n\t        ContextMenu.prototype.isValidLI = function (cli, index, action) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED)) {\n\t                action === (DOWNARROW || RIGHTARROW) ? index++ : index--;\n\t            }\n\t            cli = cul.children[index];\n\t            if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED)) {\n\t                index = this.isValidLI(cli, index, action);\n\t            }\n\t            return index;\n\t        };\n\t        ContextMenu.prototype.rightEnterKeyHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            var fli = this.getLIByClass(cul, FOCUSED);\n\t            if (fli) {\n\t                var fliIdx = this.getIdx(cul, fli);\n\t                var navIdx = this.navIdx.concat(fliIdx);\n\t                var index = void 0;\n\t                var item = this.getItem(navIdx);\n\t                if (item.items.length) {\n\t                    this.openMenu(fli, item, null, null, e);\n\t                    fli.classList.remove(FOCUSED);\n\t                    fli.classList.add(SELECTED);\n\t                    if (e.action === ENTER) {\n\t                        this.trigger('select', { element: fli, item: this.toRawObject([item]) });\n\t                    }\n\t                    fli.focus();\n\t                    this.navIdx.push(fliIdx);\n\t                    cul = wrapper.children[this.navIdx.length];\n\t                    index = this.isValidLI(cul.children[0], 0, e.action);\n\t                    cul.children[index].classList.add(FOCUSED);\n\t                    cul.children[index].focus();\n\t                }\n\t                else {\n\t                    if (e.action === ENTER) {\n\t                        this.close();\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.leftEscKeyHandler = function (e) {\n\t            if (this.navIdx.length) {\n\t                var wrapper = this.getWrapper();\n\t                this.closeMenu(this.navIdx.length);\n\t                var cul = wrapper.children[this.navIdx.length];\n\t                var sli = this.getLIByClass(cul, SELECTED);\n\t                sli.setAttribute('aria-expanded', 'false');\n\t                if (sli) {\n\t                    sli.classList.remove(SELECTED);\n\t                    sli.classList.add(FOCUSED);\n\t                    sli.focus();\n\t                }\n\t            }\n\t            else {\n\t                if (e.action === ESCAPE) {\n\t                    this.close();\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.scrollHandler = function (e) {\n\t            this.closeMenu();\n\t        };\n\t        ContextMenu.prototype.touchHandler = function (e) {\n\t            this.isTapHold = true;\n\t            this.cmenuHandler(e.originalEvent);\n\t        };\n\t        ContextMenu.prototype.cmenuHandler = function (e) {\n\t            e.preventDefault();\n\t            this.closeMenu();\n\t            if (this.canOpen(e.target)) {\n\t                if (e.changedTouches) {\n\t                    this.openMenu(null, null, e.changedTouches[0].clientY, e.changedTouches[0].clientX, e);\n\t                }\n\t                else {\n\t                    this.openMenu(null, null, e.clientY, e.clientX, e);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.close = function () {\n\t            this.closeMenu();\n\t        };\n\t        ContextMenu.prototype.closeMenu = function (ulIndex) {\n\t            if (ulIndex === void 0) { ulIndex = 0; }\n\t            if (this.isMenuVisible()) {\n\t                var wrapper = this.getWrapper();\n\t                var items = void 0;\n\t                for (var cnt = wrapper.childElementCount; cnt > ulIndex; cnt--) {\n\t                    this.toggleAnimation(wrapper.children[cnt - 1], false);\n\t                    items = this.getItems(this.navIdx);\n\t                    this.navIdx.length = ulIndex ? ulIndex - 1 : ulIndex;\n\t                    this.trigger('onClose', { items: items });\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.isMenuVisible = function () {\n\t            return (this.navIdx.length > 0 || ej2_base_5.isVisible(this.element).valueOf());\n\t        };\n\t        ContextMenu.prototype.canOpen = function (target) {\n\t            var canOpen = true;\n\t            if (this.filter) {\n\t                canOpen = false;\n\t                var filter = this.filter.split(' ');\n\t                for (var i = 0, len = target.classList.length; i < len; i++) {\n\t                    if (filter.indexOf(target.classList[i]) > -1) {\n\t                        canOpen = true;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            return canOpen;\n\t        };\n\t        ContextMenu.prototype.open = function (top, left) {\n\t            this.openMenu(null, null, top, left);\n\t        };\n\t        ContextMenu.prototype.openMenu = function (li, item, top, left, e) {\n\t            if (top === void 0) { top = 0; }\n\t            if (left === void 0) { left = 0; }\n\t            if (e === void 0) { e = null; }\n\t            var ul;\n\t            var navIdx;\n\t            var liItem;\n\t            var beforeOpenEventArgs;\n\t            var wrapper = this.getWrapper();\n\t            if (li) {\n\t                ul = this.createItems(item.items);\n\t                if (ej2_base_4.Browser.isDevice) {\n\t                    wrapper.lastChild.style.display = 'none';\n\t                    var data = { text: item.text, iconCss: ICONS + ' e-previous' };\n\t                    var hdata = new MenuItem(this.items[0], null, data, true);\n\t                    var hli = this.createItem([hdata], true, 'menu', true);\n\t                    ul.insertBefore(hli, ul.children[0]);\n\t                }\n\t                ul.style.zIndex = this.element.style.zIndex;\n\t                wrapper.appendChild(ul);\n\t            }\n\t            else {\n\t                ul = this.element;\n\t            }\n\t            navIdx = this.getIndex(li ? li.textContent : null);\n\t            liItem = li ? this.getItem(navIdx) : null;\n\t            beforeOpenEventArgs = { element: ul, items: li ? item.items : this.getItems([]), parentItem: liItem, event: e, cancel: false };\n\t            this.trigger('beforeOpen', beforeOpenEventArgs);\n\t            if (!beforeOpenEventArgs.cancel) {\n\t                this.setPosition(li, ul, top, left);\n\t                this.toggleAnimation(ul);\n\t            }\n\t        };\n\t        ContextMenu.prototype.createItem = function (item, showIcon, moduleName, isHeader) {\n\t            if (isHeader === void 0) { isHeader = true; }\n\t            var listOpt = { showIcon: showIcon, moduleName: moduleName };\n\t            if (isHeader) {\n\t                listOpt.itemClass = HEADER;\n\t            }\n\t            var li = ej2_lists_1.ListBase.createListItemFromJson(this.toRawObject(item), listOpt, 0, true);\n\t            return li[0];\n\t        };\n\t        ContextMenu.prototype.setPosition = function (li, ul, top, left) {\n\t            var px = 'px';\n\t            this.toggleVisiblity(ul);\n\t            if (ul === this.element) {\n\t                var collide = ej2_popups_1.isCollide(ul, null, left, top);\n\t                if (collide.indexOf('right') > -1) {\n\t                    left = left - ul.offsetWidth;\n\t                }\n\t                if (collide.indexOf('bottom') > -1) {\n\t                    var offset = ej2_popups_1.fit(ul, null, { X: false, Y: true }, { top: top, left: left });\n\t                    top = offset.top;\n\t                }\n\t                collide = ej2_popups_1.isCollide(ul, null, left, top);\n\t                if (collide.indexOf('left') > -1) {\n\t                    var offset = ej2_popups_1.fit(ul, null, { X: true, Y: false }, { top: top, left: left });\n\t                    left = offset.left;\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_4.Browser.isDevice) {\n\t                    top = Number(this.element.style.top.replace(px, ''));\n\t                    left = Number(this.element.style.left.replace(px, ''));\n\t                }\n\t                else {\n\t                    var x = this.enableRtl ? 'left' : 'right';\n\t                    var offset = ej2_popups_1.calculatePosition(li, x, 'top');\n\t                    top = offset.top;\n\t                    left = offset.left;\n\t                    var collide = ej2_popups_1.isCollide(ul, null, this.enableRtl ? left - ul.offsetWidth : left, top);\n\t                    var xCollision = collide.indexOf('left') > -1 || collide.indexOf('right') > -1;\n\t                    if (xCollision) {\n\t                        offset = ej2_popups_1.calculatePosition(li, this.enableRtl ? 'right' : 'left', 'top');\n\t                        left = offset.left;\n\t                    }\n\t                    if (this.enableRtl || xCollision) {\n\t                        left = (this.enableRtl && xCollision) ? left : left - ul.offsetWidth;\n\t                    }\n\t                    if (collide.indexOf('bottom') > -1) {\n\t                        offset = ej2_popups_1.fit(ul, null, { X: false, Y: true }, { top: top, left: left });\n\t                        top = offset.top;\n\t                    }\n\t                }\n\t            }\n\t            this.toggleVisiblity(ul, false);\n\t            ul.style.top = top + px;\n\t            ul.style.left = left + px;\n\t        };\n\t        ContextMenu.prototype.toggleVisiblity = function (ul, isVisible) {\n\t            if (isVisible === void 0) { isVisible = true; }\n\t            ul.style.visibility = isVisible ? 'hidden' : '';\n\t            ul.style.display = isVisible ? 'block' : 'none';\n\t        };\n\t        ContextMenu.prototype.createItems = function (items) {\n\t            var _this = this;\n\t            var showIcon = this.hasField(items, 'iconCss');\n\t            var listBaseOptions = {\n\t                showIcon: showIcon,\n\t                moduleName: 'menu',\n\t                itemCreating: function (args) {\n\t                    args.curData.htmlAttributes = {\n\t                        role: 'menuitem',\n\t                        tabindex: '-1'\n\t                    };\n\t                    if (showIcon && !args.curData.iconCss) {\n\t                        args.curData.iconCss = ICONS + ' e-blankicon';\n\t                    }\n\t                },\n\t                itemCreated: function (args) {\n\t                    if (args.curData.separator) {\n\t                        args.item.classList.remove(ITEM);\n\t                        args.item.classList.add(SEPARATOR);\n\t                        args.item.removeAttribute('role');\n\t                    }\n\t                    if (args.curData.items && args.curData.items.length) {\n\t                        var span = ej2_base_5.createElement('span', { className: ICONS + ' ' + CARET });\n\t                        args.item.appendChild(span);\n\t                        args.item.setAttribute('aria-haspopup', 'true');\n\t                        args.item.setAttribute('aria-expanded', 'false');\n\t                        args.item.removeAttribute('role');\n\t                        args.item.classList.add('e-menu-caret-icon');\n\t                    }\n\t                    _this.trigger('beforeItemRender', { data: args.curData, item: args.item });\n\t                }\n\t            };\n\t            var ul = ej2_lists_1.ListBase.createList(this.toRawObject(items.slice()), listBaseOptions, true);\n\t            ul.setAttribute('tabindex', '0');\n\t            return ul;\n\t        };\n\t        ContextMenu.prototype.toRawObject = function (items) {\n\t            var item;\n\t            var menuItems = [];\n\t            for (var i = 0, len = items.length; i < len; i++) {\n\t                item = items[i].properties;\n\t                menuItems.push(item);\n\t            }\n\t            return menuItems;\n\t        };\n\t        ContextMenu.prototype.moverHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var trgt = e.target;\n\t            var cli = this.getLI(trgt);\n\t            if (cli && ej2_base_5.closest(cli, '.' + WRAPPER)) {\n\t                var fli = ej2_base_5.select('.' + FOCUSED, wrapper);\n\t                if (fli) {\n\t                    fli.classList.remove(FOCUSED);\n\t                }\n\t                cli.classList.add(FOCUSED);\n\t                if (!this.showItemOnClick) {\n\t                    this.clickHandler(e);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.hasField = function (items, field) {\n\t            for (var i = 0, len = items.length; i < len; i++) {\n\t                if (items[i][field]) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        ContextMenu.prototype.getWrapper = function () {\n\t            return this.element.parentElement;\n\t        };\n\t        ContextMenu.prototype.clickHandler = function (e) {\n\t            if (this.isTapHold) {\n\t                this.isTapHold = false;\n\t            }\n\t            else {\n\t                var wrapper = this.getWrapper();\n\t                var trgt = e.target;\n\t                var cli = this.getLI(trgt);\n\t                var isInstLI = cli && !ej2_base_3.isNullOrUndefined(ej2_base_5.closest(cli, '.' + WRAPPER));\n\t                if (isInstLI && e.type === 'click' && !cli.classList.contains(HEADER)) {\n\t                    this.setLISelected(cli);\n\t                    var navIdx = this.getIndex(cli.textContent);\n\t                    var item = this.getItem(navIdx);\n\t                    this.trigger('select', { element: cli, item: item });\n\t                }\n\t                if (isInstLI && (e.type === 'mouseover' || ej2_base_4.Browser.isDevice || this.showItemOnClick)) {\n\t                    var ul = void 0;\n\t                    if (cli.classList.contains(HEADER)) {\n\t                        ul = wrapper.children[this.navIdx.length - 1];\n\t                        this.toggleAnimation(ul);\n\t                        this.trigger('onOpen', { element: ul });\n\t                        var sli = this.getLIByClass(ul, SELECTED);\n\t                        if (sli) {\n\t                            sli.classList.remove(SELECTED);\n\t                        }\n\t                        ej2_base_5.detach(cli.parentNode);\n\t                        this.navIdx.pop();\n\t                    }\n\t                    else {\n\t                        if (!cli.classList.contains(SEPARATOR)) {\n\t                            var showSubMenu = true;\n\t                            var cul = cli.parentNode;\n\t                            var cliIdx = this.getIdx(cul, cli);\n\t                            if (!ej2_base_4.Browser.isDevice) {\n\t                                var culIdx = this.getIdx(wrapper, cul);\n\t                                if (this.navIdx[culIdx] === cliIdx) {\n\t                                    showSubMenu = false;\n\t                                }\n\t                                if (culIdx !== this.navIdx.length && (e.type !== 'mouseover' || showSubMenu)) {\n\t                                    var sli = this.getLIByClass(cul, SELECTED);\n\t                                    if (sli) {\n\t                                        sli.classList.remove(SELECTED);\n\t                                    }\n\t                                    this.closeMenu(culIdx + 1);\n\t                                }\n\t                            }\n\t                            if (showSubMenu) {\n\t                                var idx = this.navIdx.concat(cliIdx);\n\t                                var item = this.getItem(idx);\n\t                                if (item.items.length) {\n\t                                    if (e.type === 'mouseover') {\n\t                                        this.setLISelected(cli);\n\t                                    }\n\t                                    cli.setAttribute('aria-expanded', 'true');\n\t                                    this.openMenu(cli, item, null, null, e);\n\t                                    this.navIdx.push(cliIdx);\n\t                                }\n\t                                else {\n\t                                    if (e.type !== 'mouseover') {\n\t                                        this.closeMenu();\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (trgt.tagName !== 'UL' || trgt.parentElement !== wrapper) {\n\t                        if (!cli || !cli.querySelector('.' + CARET)) {\n\t                            this.closeMenu();\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.setLISelected = function (li) {\n\t            var sli = this.getLIByClass(li.parentElement, SELECTED);\n\t            if (sli) {\n\t                sli.classList.remove(SELECTED);\n\t            }\n\t            li.classList.remove(FOCUSED);\n\t            li.classList.add(SELECTED);\n\t        };\n\t        ContextMenu.prototype.getLIByClass = function (ul, classname) {\n\t            for (var i = 0, len = ul.children.length; i < len; i++) {\n\t                if (ul.children[i].classList.contains(classname)) {\n\t                    return ul.children[i];\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        ContextMenu.prototype.getItem = function (navIdx) {\n\t            navIdx = navIdx.slice();\n\t            var idx = navIdx.pop();\n\t            var items = this.getItems(navIdx);\n\t            return items[idx];\n\t        };\n\t        ContextMenu.prototype.getItems = function (navIdx) {\n\t            var items = this.items;\n\t            for (var i = 0; i < navIdx.length; i++) {\n\t                items = items[navIdx[i]].items;\n\t            }\n\t            return items;\n\t        };\n\t        ContextMenu.prototype.getIdx = function (ul, li, skipHdr) {\n\t            if (skipHdr === void 0) { skipHdr = true; }\n\t            var idx = Array.prototype.indexOf.call(ul.children, li);\n\t            if (skipHdr && ul.children[0].classList.contains(HEADER)) {\n\t                idx--;\n\t            }\n\t            return idx;\n\t        };\n\t        ContextMenu.prototype.getLI = function (elem) {\n\t            if (elem.tagName === 'LI') {\n\t                return elem;\n\t            }\n\t            return ej2_base_5.closest(elem, 'li');\n\t        };\n\t        ContextMenu.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var wrapper = this.getWrapper();\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'cssClass':\n\t                        if (oldProp.cssClass) {\n\t                            wrapper.classList.remove(oldProp.cssClass);\n\t                        }\n\t                        if (newProp.cssClass) {\n\t                            wrapper.classList.add(newProp.cssClass);\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        wrapper.classList.toggle(RTL);\n\t                        break;\n\t                    case 'filter':\n\t                        this.closeMenu();\n\t                        this.filter = newProp.filter;\n\t                        break;\n\t                    case 'showItemOnClick':\n\t                        this.unWireEvents();\n\t                        this.showItemOnClick = newProp.showItemOnClick;\n\t                        this.wireEvents();\n\t                        break;\n\t                    case 'target':\n\t                        this.unWireEvents();\n\t                        this.target = newProp.target;\n\t                        this.wireEvents();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.unWireEvents = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (this.targetElem) {\n\t                if (ej2_base_4.Browser.isIos) {\n\t                    this.touchModule.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_2.EventHandler.remove(this.targetElem, 'contextmenu', this.cmenuHandler);\n\t                }\n\t                for (var _i = 0, _a = this.getScrollableParents(this.targetElem); _i < _a.length; _i++) {\n\t                    var parent_2 = _a[_i];\n\t                    ej2_base_2.EventHandler.remove(parent_2, 'scroll', this.scrollHandler);\n\t                }\n\t            }\n\t            if (!ej2_base_4.Browser.isDevice) {\n\t                ej2_base_2.EventHandler.remove(wrapper, 'mouseover', this.moverHandler);\n\t                ej2_base_2.EventHandler.remove(document, 'mousedown', this.mouseDownHandler);\n\t            }\n\t            ej2_base_2.EventHandler.remove(document, 'click', this.clickHandler);\n\t            this.keyboardModule.destroy();\n\t        };\n\t        ContextMenu.prototype.toggleAnimation = function (ul, isMenuOpen) {\n\t            var _this = this;\n\t            if (isMenuOpen === void 0) { isMenuOpen = true; }\n\t            if (this.animationSettings.effect === 'None' || !isMenuOpen) {\n\t                this.end(ul, isMenuOpen);\n\t            }\n\t            else {\n\t                this.animation.animate(ul, {\n\t                    name: this.animationSettings.effect,\n\t                    duration: this.animationSettings.duration,\n\t                    timingFunction: this.animationSettings.easing,\n\t                    begin: function (options) {\n\t                        options.element.style.display = 'block';\n\t                        options.element.style.maxHeight = options.element.getBoundingClientRect().height + 'px';\n\t                    },\n\t                    end: function (options) {\n\t                        _this.end(options.element, isMenuOpen);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        ContextMenu.prototype.end = function (ul, isMenuOpen) {\n\t            if (isMenuOpen) {\n\t                ul.style.display = 'block';\n\t                ul.style.maxHeight = '';\n\t                this.trigger('onOpen', { element: ul });\n\t                if (ul.querySelector('.' + FOCUSED)) {\n\t                    ul.querySelector('.' + FOCUSED).focus();\n\t                }\n\t                else {\n\t                    var ele = void 0;\n\t                    ele = this.getWrapper().children[this.getIdx(this.getWrapper(), ul) - 1];\n\t                    if (ele) {\n\t                        ele.querySelector('.' + SELECTED).focus();\n\t                    }\n\t                    else {\n\t                        this.element.focus();\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (ul === this.element) {\n\t                    var fli = this.getLIByClass(this.element, FOCUSED);\n\t                    if (fli) {\n\t                        fli.classList.remove(FOCUSED);\n\t                    }\n\t                    var sli = this.getLIByClass(this.element, SELECTED);\n\t                    if (sli) {\n\t                        sli.classList.remove(SELECTED);\n\t                    }\n\t                    ul.style.display = 'none';\n\t                }\n\t                else {\n\t                    ej2_base_5.detach(ul);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.getPersistData = function () {\n\t            return '';\n\t        };\n\t        ContextMenu.prototype.getModuleName = function () {\n\t            return 'contextmenu';\n\t        };\n\t        ContextMenu.prototype.getIndex = function (data, items, navIdx, isCallBack) {\n\t            if (items === void 0) { items = this.items; }\n\t            if (navIdx === void 0) { navIdx = []; }\n\t            if (isCallBack === void 0) { isCallBack = false; }\n\t            var item;\n\t            for (var i = 0, len = items.length; i < len; i++) {\n\t                item = items[i];\n\t                if (item.text === data) {\n\t                    navIdx.push(i);\n\t                    break;\n\t                }\n\t                else if (item.items.length) {\n\t                    navIdx = this.getIndex(data, item.items, navIdx, true);\n\t                    if (navIdx[navIdx.length - 1] === -1) {\n\t                        if (i !== len - 1) {\n\t                            navIdx.pop();\n\t                        }\n\t                    }\n\t                    else {\n\t                        navIdx.unshift(i);\n\t                        break;\n\t                    }\n\t                }\n\t                else {\n\t                    if (i === len - 1) {\n\t                        navIdx.push(-1);\n\t                    }\n\t                }\n\t            }\n\t            return (!isCallBack && navIdx[0] === -1) ? [] : navIdx;\n\t        };\n\t        ContextMenu.prototype.enableItems = function (items, enable) {\n\t            if (enable === void 0) { enable = true; }\n\t            var ul;\n\t            var idx;\n\t            var navIdx;\n\t            var disabled = DISABLED;\n\t            var wrapper = this.getWrapper();\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                ul = wrapper.children[navIdx.length];\n\t                if (ul) {\n\t                    if (enable) {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.remove(disabled);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.remove(disabled);\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.add(disabled);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.add(disabled);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.showItems = function (items) {\n\t            this.showHideItems(items, false);\n\t        };\n\t        ContextMenu.prototype.hideItems = function (items) {\n\t            this.showHideItems(items, true);\n\t        };\n\t        ContextMenu.prototype.showHideItems = function (items, ishide) {\n\t            var ul;\n\t            var idx;\n\t            var navIdx;\n\t            var wrapper = this.getWrapper();\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                ul = wrapper.children[navIdx.length];\n\t                if (ul) {\n\t                    if (ishide) {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.add(HIDE);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.add(HIDE);\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.remove(HIDE);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.remove(HIDE);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.removeItems = function (items) {\n\t            var idx;\n\t            var navIdx;\n\t            var iitems;\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                iitems = this.getItems(navIdx);\n\t                iitems.splice(idx, 1);\n\t                if (!navIdx.length) {\n\t                    ej2_base_5.detach(this.element.children[idx]);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.insertAfter = function (items, text) {\n\t            this.insertItems(items, text);\n\t        };\n\t        ContextMenu.prototype.insertBefore = function (items, text) {\n\t            this.insertItems(items, text, false);\n\t        };\n\t        ContextMenu.prototype.insertItems = function (items, text, isAfter) {\n\t            if (isAfter === void 0) { isAfter = true; }\n\t            var li;\n\t            var idx;\n\t            var navIdx;\n\t            var iitems;\n\t            var menuitem;\n\t            var showIcon;\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(text);\n\t                idx = navIdx.pop();\n\t                iitems = this.getItems(navIdx);\n\t                menuitem = new MenuItem(iitems[0], null, items[i], true);\n\t                iitems.splice(isAfter ? idx + 1 : idx, 0, menuitem);\n\t                if (!navIdx.length) {\n\t                    idx = isAfter ? idx + 1 : idx;\n\t                    showIcon = this.hasField(iitems, 'iconCss');\n\t                    li = this.createItem([menuitem], showIcon, 'menu', false);\n\t                    this.element.insertBefore(li, this.element.children[idx]);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.getZIndex = function () {\n\t            var index;\n\t            var position;\n\t            var props;\n\t            var zIndex = ['999'];\n\t            for (var i = 0, len = document.body.children.length; i < len; i++) {\n\t                props = document.defaultView.getComputedStyle(document.body.children[i]);\n\t                index = props.getPropertyValue('z-index');\n\t                position = props.getPropertyValue('position');\n\t                if (index !== 'auto' && position !== 'static') {\n\t                    zIndex.push(index);\n\t                }\n\t            }\n\t            return (Math.max.apply(Math, zIndex) + 1).toString();\n\t        };\n\t        ContextMenu.prototype.destroy = function () {\n\t            var _this = this;\n\t            var wrapper = this.getWrapper();\n\t            _super.prototype.destroy.call(this);\n\t            this.unWireEvents();\n\t            this.closeMenu();\n\t            this.element.innerHTML = '';\n\t            ['top', 'left', 'display', 'role', 'tabindex'].forEach(function (key) {\n\t                _this.element.style.removeProperty(key);\n\t            });\n\t            wrapper.parentNode.insertBefore(this.element, wrapper);\n\t            ej2_base_5.detach(wrapper);\n\t        };\n\t        return ContextMenu;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"filter\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], ContextMenu.prototype, \"showItemOnClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], MenuItem)\n\t    ], ContextMenu.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"target\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property({ duration: 400, easing: 'ease', effect: 'SlideDown' })\n\t    ], ContextMenu.prototype, \"animationSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"beforeItemRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"beforeOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"onOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"onClose\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"select\", void 0);\n\t    ContextMenu = __decorate([\n\t        ej2_base_1.NotifyPropertyChanges\n\t    ], ContextMenu);\n\t    exports.ContextMenu = ContextMenu;\n\t    exports.contextMenuBuilder = ej2_base_1.CreateBuilder(ContextMenu);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, tab_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(tab_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, toolbar_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_TAB = 'e-tab';\n\t    var CLS_HEADER = 'e-header';\n\t    var CLS_CONTENT = 'e-content';\n\t    var CLS_ITEMS = 'e-items';\n\t    var CLS_ITEM = 'e-item';\n\t    var CLS_TEMPLATE = 'e-template';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_ACTIVE = 'e-active';\n\t    var CLS_DISABLE = 'e-disable';\n\t    var CLS_HIDDEN = 'e-hidden';\n\t    var CLS_FOCUS = 'e-focused';\n\t    var CLS_ICONS = 'e-icons';\n\t    var CLS_ICON = 'e-icon';\n\t    var CLS_ICON_CLOSE = 'e-close-icon';\n\t    var CLS_CLOSE_SHOW = 'e-close-show';\n\t    var CLS_TEXT = 'e-tab-text';\n\t    var CLS_INDICATOR = 'e-indicator';\n\t    var CLS_WRAP = 'e-tab-wrap';\n\t    var CLS_TEXT_WRAP = 'e-text-wrap';\n\t    var CLS_TAB_ICON = 'e-tab-icon';\n\t    var CLS_TB_ITEMS = 'e-toolbar-items';\n\t    var CLS_TB_ITEM = 'e-toolbar-item';\n\t    var CLS_TB_POP = 'e-toolbar-pop';\n\t    var CLS_TB_POPUP = 'e-toolbar-popup';\n\t    var CLS_POPUP_OPEN = 'e-popup-open';\n\t    var CLS_POPUP_CLOSE = 'e-popup-close';\n\t    var CLS_PROGRESS = 'e-progress';\n\t    var CLS_IGNORE = 'e-ignore';\n\t    var TabActionSettings = (function (_super) {\n\t        __extends(TabActionSettings, _super);\n\t        function TabActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabActionSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('SlideLeftIn')\n\t    ], TabActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(600)\n\t    ], TabActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('ease')\n\t    ], TabActionSettings.prototype, \"easing\", void 0);\n\t    exports.TabActionSettings = TabActionSettings;\n\t    var TabAnimationSettings = (function (_super) {\n\t        __extends(TabAnimationSettings, _super);\n\t        function TabAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabAnimationSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Complex({ effect: 'SlideLeftIn', duration: 600, easing: 'ease' }, TabActionSettings)\n\t    ], TabAnimationSettings.prototype, \"previous\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ effect: 'SlideRightIn', duration: 600, easing: 'ease' }, TabActionSettings)\n\t    ], TabAnimationSettings.prototype, \"next\", void 0);\n\t    exports.TabAnimationSettings = TabAnimationSettings;\n\t    var Header = (function (_super) {\n\t        __extends(Header, _super);\n\t        function Header() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Header;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Header.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Header.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('left')\n\t    ], Header.prototype, \"iconPosition\", void 0);\n\t    exports.Header = Header;\n\t    var TabItem = (function (_super) {\n\t        __extends(TabItem, _super);\n\t        function TabItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabItem;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Complex({}, Header)\n\t    ], TabItem.prototype, \"header\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], TabItem.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], TabItem.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], TabItem.prototype, \"disabled\", void 0);\n\t    exports.TabItem = TabItem;\n\t    var Tab = (function (_super) {\n\t        __extends(Tab, _super);\n\t        function Tab(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.prevIndex = 0;\n\t            _this.show = { name: 'SlideDown', duration: 100 };\n\t            _this.hide = { name: 'SlideUp', duration: 100 };\n\t            _this.animateOptions = {};\n\t            _this.animObj = new ej2_base_5.Animation(_this.animateOptions);\n\t            _this.maxHeight = 0;\n\t            _this.title = 'Close';\n\t            _this.keyConfigs = {\n\t                tab: 'tab',\n\t                home: 'home',\n\t                end: 'end',\n\t                enter: 'enter',\n\t                space: 'space',\n\t                delete: 'delete',\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow'\n\t            };\n\t            return _this;\n\t        }\n\t        Tab.prototype.destroy = function () {\n\t            var _this = this;\n\t            if (!ej2_base_4.isNullOrUndefined(this.tbObj)) {\n\t                this.tbObj.destroy();\n\t            }\n\t            this.unWireEvents();\n\t            ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation'].forEach(function (val) {\n\t                _this.element.removeAttribute(val);\n\t            });\n\t            if (!this.isTemplate) {\n\t                this.element.innerHTML = '';\n\t            }\n\t            else {\n\t                var cntEle = ej2_base_2.select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n\t                this.element.classList.remove(CLS_TEMPLATE);\n\t                if (!ej2_base_4.isNullOrUndefined(cntEle)) {\n\t                    cntEle.innerHTML = this.cnt;\n\t                }\n\t            }\n\t            _super.prototype.destroy.call(this);\n\t            this.trigger('destroyed');\n\t        };\n\t        Tab.prototype.preRender = function () {\n\t            this.isPopup = false;\n\t            this.initRender = true;\n\t            var name = ej2_base_3.Browser.info.name;\n\t            var css = (name === 'msie') ? 'e-ie' : (name === 'edge') ? 'e-edge' : (name === 'safari') ? 'e-safari' : '';\n\t            ej2_base_4.setStyleAttribute(this.element, { 'width': ej2_base_3.formatUnit(this.width), 'height': ej2_base_3.formatUnit(this.height) });\n\t            this.setCssClass(this.element, this.cssClass, true);\n\t            ej2_base_1.attributes(this.element, { role: 'tablist', 'aria-disabled': 'false', 'aria-activedescendant': '' });\n\t            this.setCssClass(this.element, css, true);\n\t        };\n\t        Tab.prototype.render = function () {\n\t            this.renderContainer();\n\t            this.wireEvents();\n\t            this.initRender = false;\n\t        };\n\t        Tab.prototype.renderContainer = function () {\n\t            if (this.items.length > 0 && this.element.children.length === 0) {\n\t                this.element.appendChild(ej2_base_4.createElement('div', { className: CLS_CONTENT }));\n\t                this.setOrientation(this.headerPlacement, ej2_base_4.createElement('div', { className: CLS_HEADER }));\n\t                this.isTemplate = false;\n\t            }\n\t            else if (this.element.children.length > 0) {\n\t                this.isTemplate = true;\n\t                this.element.classList.add(CLS_TEMPLATE);\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(ej2_base_2.select('.' + CLS_HEADER, this.element)) && !ej2_base_4.isNullOrUndefined(ej2_base_2.select('.' + CLS_CONTENT, this.element))) {\n\t                this.renderHeader();\n\t                this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t                if (!ej2_base_4.isNullOrUndefined(this.tbItems)) {\n\t                    ej2_base_5.rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\n\t                }\n\t                this.renderContent();\n\t                if (ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n\t                    this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t                    this.bdrLine = ej2_base_4.createElement('div', { className: CLS_INDICATOR + ' ' + CLS_HIDDEN + ' ' + CLS_IGNORE });\n\t                    var scrCnt = ej2_base_2.select('.e-hscroll-content', this.tbItems);\n\t                    if (!ej2_base_4.isNullOrUndefined(scrCnt)) {\n\t                        scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n\t                    }\n\t                    else {\n\t                        this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n\t                    }\n\t                    this.setContentHeight(true);\n\t                    this.select(this.selectedItem);\n\t                }\n\t                this.setRTL(this.enableRtl);\n\t            }\n\t        };\n\t        Tab.prototype.renderHeader = function () {\n\t            var _this = this;\n\t            var tabItems = [];\n\t            this.hdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            this.btnCls = ej2_base_4.createElement('span', { className: CLS_ICONS + ' ' + CLS_ICON_CLOSE, attrs: { title: this.title } }).outerHTML;\n\t            if (!this.isTemplate) {\n\t                tabItems = this.parseObject(this.items);\n\t            }\n\t            else {\n\t                var count = this.hdrEle.children.length;\n\t                var hdrItems = [];\n\t                for (var i = 0; i < count; i++) {\n\t                    hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n\t                }\n\t                if (count > 0) {\n\t                    this.hdrEle.innerHTML = '';\n\t                    this.hdrEle.appendChild(ej2_base_4.createElement('div', { className: CLS_ITEMS }));\n\t                    hdrItems.forEach(function (item, index) {\n\t                        var attr = {\n\t                            className: CLS_ITEM, id: CLS_ITEM + '_' + index,\n\t                            attrs: { role: 'tab', 'aria-controls': CLS_CONTENT + '_' + index, 'aria-selected': 'false' }\n\t                        };\n\t                        var txt = ej2_base_4.createElement('span', { className: CLS_TEXT, innerHTML: item, attrs: { 'role': 'presentation' } }).outerHTML;\n\t                        var cont = ej2_base_4.createElement('div', { className: CLS_TEXT_WRAP, innerHTML: txt + _this.btnCls }).outerHTML;\n\t                        var wrap = ej2_base_4.createElement('div', { className: CLS_WRAP, innerHTML: cont, attrs: { tabIndex: '-1' } });\n\t                        ej2_base_2.select('.' + CLS_ITEMS, _this.element).appendChild(ej2_base_4.createElement('div', attr));\n\t                        ej2_base_4.selectAll('.' + CLS_ITEM, _this.element)[index].appendChild(wrap);\n\t                    });\n\t                }\n\t            }\n\t            this.tbObj = new toolbar_1.Toolbar({\n\t                width: '100%',\n\t                overflowMode: this.overflowMode,\n\t                items: (tabItems.length !== 0) ? tabItems : [],\n\t                clicked: this.clickHandler.bind(this)\n\t            });\n\t            this.tbObj.appendTo(this.hdrEle);\n\t            ej2_base_1.attributes(this.element, { 'aria-orientation': 'horizontal' });\n\t            this.setCloseButton(this.showCloseButton);\n\t            this.setProperties({ headerPlacement: (this.element.children.item(0).classList.contains(CLS_HEADER)) ? 'Top' : 'Bottom' }, true);\n\t        };\n\t        Tab.prototype.renderContent = function () {\n\t            this.cntEle = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t            var hdrItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element);\n\t            if (this.isTemplate) {\n\t                this.cnt = (this.cntEle.children.length > 0) ? this.cntEle.innerHTML : '';\n\t                var contents = this.cntEle.children;\n\t                for (var i = 0; i < hdrItem.length; i++) {\n\t                    if (contents.length - 1 >= i) {\n\t                        contents.item(i).className += CLS_ITEM;\n\t                        ej2_base_1.attributes(contents.item(i), { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + i });\n\t                        contents.item(i).id = CLS_CONTENT + '_' + i;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.parseObject = function (items) {\n\t            var _this = this;\n\t            var inHTML = '';\n\t            var tbCount = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length;\n\t            var tItems = [];\n\t            items.forEach(function (item, index) {\n\t                var pos = (ej2_base_4.isNullOrUndefined(item.header.iconPosition)) ? '' : item.header.iconPosition;\n\t                var css = (ej2_base_4.isNullOrUndefined(item.header.iconCss)) ? '' : item.header.iconCss;\n\t                var txt = item.header.text;\n\t                var id = ((tbCount === 0) ? index : (_this.isReplace === true) ? index : tbCount + index);\n\t                var disabled = (item.disabled) ? ' ' + CLS_DISABLE : '';\n\t                var tHtml = ((txt instanceof Object) ? txt.outerHTML : txt);\n\t                var txtEmpty = (!ej2_base_4.isNullOrUndefined(tHtml) && tHtml !== '');\n\t                var tEle = (txtEmpty) ? ej2_base_4.createElement('div', {\n\t                    className: CLS_TEXT, innerHTML: tHtml, attrs: { 'role': 'presentation' }\n\t                }).outerHTML : '';\n\t                var icon = ej2_base_4.createElement('span', {\n\t                    className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n\t                }).outerHTML;\n\t                if ((txt === '' || txt === undefined) && css === '') {\n\t                    return;\n\t                }\n\t                else {\n\t                    if ((txt !== '' && txt !== undefined) && css !== '') {\n\t                        inHTML = (pos === 'left' || pos === 'top') ? icon + '' + tEle : tEle + '' + icon;\n\t                    }\n\t                    else {\n\t                        inHTML = (css === '') ? tEle : icon;\n\t                    }\n\t                }\n\t                var tCont = ej2_base_4.createElement('div', { className: CLS_TEXT_WRAP, innerHTML: inHTML + '' + _this.btnCls }).outerHTML;\n\t                var wrap = ej2_base_4.createElement('div', { className: CLS_WRAP, innerHTML: tCont, attrs: { tabIndex: '-1' } });\n\t                var attrObj = {\n\t                    id: CLS_ITEM + '_' + id, role: 'tab', 'aria-selected': 'false'\n\t                };\n\t                var tItem = { htmlAttributes: attrObj, template: wrap.outerHTML };\n\t                tItem.cssClass = item.cssClass + '' + disabled + '' + ((css !== '') ? 'e-i' + pos : '') + ' ' + ((!txtEmpty) ? CLS_ICON : '');\n\t                if (pos === 'top' || pos === 'bottom') {\n\t                    _this.element.classList.add('e-vertical-icon');\n\t                }\n\t                tItems.push(tItem);\n\t            });\n\t            return tItems;\n\t        };\n\t        Tab.prototype.removeActiveClass = function (id) {\n\t            var hdrActEle = ej2_base_4.selectAll(':root .' + CLS_HEADER + ' .' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element)[0];\n\t            if (!ej2_base_4.isNullOrUndefined(hdrActEle)) {\n\t                hdrActEle.classList.remove(CLS_ACTIVE);\n\t                var no = this.extIndex(hdrActEle.id);\n\t                var trg = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t            }\n\t        };\n\t        Tab.prototype.checkPopupOverflow = function (ele) {\n\t            this.tbPop = ej2_base_2.select('.' + CLS_TB_POP, this.element);\n\t            var popIcon = ej2_base_2.select('.e-hor-nav', this.element);\n\t            var tbrItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            if ((this.enableRtl && ((popIcon.offsetLeft + popIcon.offsetWidth) > tbrItems.offsetLeft))\n\t                || (!this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth)) {\n\t                ele.classList.add(CLS_TB_POPUP);\n\t                this.tbPop.insertBefore(ele.cloneNode(true), ej2_base_4.selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n\t                ele.outerHTML = '';\n\t            }\n\t            return true;\n\t        };\n\t        Tab.prototype.popupHandler = function (target) {\n\t            var ripEle = target.querySelector('.e-ripple-element');\n\t            if (!ej2_base_4.isNullOrUndefined(ripEle)) {\n\t                ripEle.outerHTML = '';\n\t                target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n\t            }\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n\t            var lastChild = this.tbItem[this.tbItem.length - 1];\n\t            if (this.tbItem.length !== 0) {\n\t                target.classList.remove(CLS_TB_POPUP);\n\t                this.tbItems.appendChild(target.cloneNode(true));\n\t                this.actEleId = target.id;\n\t                target.outerHTML = '';\n\t                if (this.checkPopupOverflow(lastChild)) {\n\t                    var prevEle = this.tbItems.lastChild.previousElementSibling;\n\t                    this.checkPopupOverflow(prevEle);\n\t                }\n\t                this.isPopup = true;\n\t            }\n\t            return ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n\t        };\n\t        Tab.prototype.setCloseButton = function (val) {\n\t            var trg = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            (val === true) ? trg.classList.add(CLS_CLOSE_SHOW) : trg.classList.remove(CLS_CLOSE_SHOW);\n\t            this.tbObj.refreshOverflow();\n\t            this.refreshActElePosition();\n\t        };\n\t        Tab.prototype.prevCtnAnimation = function (prev, current) {\n\t            var animation;\n\t            var checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL);\n\t            if (this.isPopup || prev <= current) {\n\t                if (this.animation.previous.effect === 'SlideLeftIn') {\n\t                    animation = { name: 'SlideLeftOut',\n\t                        duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing };\n\t                }\n\t                else {\n\t                    animation = null;\n\t                }\n\t            }\n\t            else {\n\t                if (this.animation.next.effect === 'SlideRightIn') {\n\t                    animation = { name: 'SlideRightOut',\n\t                        duration: this.animation.next.duration, timingFunction: this.animation.next.easing };\n\t                }\n\t                else {\n\t                    animation = null;\n\t                }\n\t            }\n\t            return animation;\n\t        };\n\t        Tab.prototype.triggerPrevAnimation = function (oldCnt, prevIndex) {\n\t            var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n\t            if (!ej2_base_4.isNullOrUndefined(animateObj)) {\n\t                animateObj.begin = function () {\n\t                    ej2_base_4.setStyleAttribute(oldCnt, { 'position': 'absolute' });\n\t                    oldCnt.classList.add('e-view');\n\t                };\n\t                animateObj.end = function () {\n\t                    oldCnt.style.display = 'none';\n\t                    oldCnt.classList.remove(CLS_ACTIVE);\n\t                    oldCnt.classList.remove('e-view');\n\t                    ej2_base_4.setStyleAttribute(oldCnt, { 'display': '', 'position': '' });\n\t                };\n\t                new ej2_base_5.Animation(animateObj).animate(oldCnt);\n\t            }\n\t        };\n\t        Tab.prototype.triggerAnimation = function (id, value) {\n\t            var _this = this;\n\t            var prevIndex = this.prevIndex;\n\t            var oldCnt = ej2_base_2.select('#' + this.prevActiveEle, this.element);\n\t            var prevEle = this.tbItem[prevIndex];\n\t            var no = this.extIndex(this.tbItem[this.selectedItem].id);\n\t            var newCnt;\n\t            newCnt = this.findEle(this.cntEle.children, CLS_CONTENT + '_' + no);\n\t            if (ej2_base_4.isNullOrUndefined(oldCnt) && !ej2_base_4.isNullOrUndefined(prevEle)) {\n\t                var idNo = this.extIndex(prevEle.id);\n\t                oldCnt = this.findEle(this.cntEle.children, CLS_CONTENT + '_' + idNo);\n\t            }\n\t            if (this.initRender || value === false || this.animation === {} || ej2_base_4.isNullOrUndefined(this.animation)) {\n\t                if (oldCnt && oldCnt !== newCnt) {\n\t                    oldCnt.classList.remove(CLS_ACTIVE);\n\t                }\n\t                return;\n\t            }\n\t            var cnt = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t            var animateObj;\n\t            if (this.prevIndex > this.selectedItem && !this.isPopup) {\n\t                var openEff = this.animation.previous.effect;\n\t                animateObj = {\n\t                    name: ((openEff === 'None') ? '' : ((openEff !== 'SlideLeftIn') ? openEff : 'SlideLeftIn')),\n\t                    duration: this.animation.previous.duration,\n\t                    timingFunction: this.animation.previous.easing\n\t                };\n\t            }\n\t            else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n\t                var clsEff = this.animation.next.effect;\n\t                animateObj = {\n\t                    name: ((clsEff === 'None') ? '' : ((clsEff !== 'SlideRightIn') ? clsEff : 'SlideRightIn')),\n\t                    duration: this.animation.next.duration,\n\t                    timingFunction: this.animation.next.easing\n\t                };\n\t            }\n\t            animateObj.progress = function () {\n\t                cnt.classList.add(CLS_PROGRESS);\n\t                _this.setActiveBorder();\n\t            };\n\t            animateObj.end = function () {\n\t                cnt.classList.remove(CLS_PROGRESS);\n\t                newCnt.classList.add(CLS_ACTIVE);\n\t            };\n\t            if (!this.initRender) {\n\t                this.triggerPrevAnimation(oldCnt, prevIndex);\n\t            }\n\t            this.prevActiveEle = newCnt.id;\n\t            this.isPopup = false;\n\t            new ej2_base_5.Animation(animateObj).animate(newCnt);\n\t        };\n\t        Tab.prototype.keyPressed = function (trg) {\n\t            var trgParent = ej2_base_1.closest(trg, '.' + CLS_TB_ITEM);\n\t            var trgIndex = this.getEleIndex(trgParent);\n\t            if (!ej2_base_4.isNullOrUndefined(this.popEle) && trg.classList.contains('e-hor-nav')) {\n\t                (this.popEle.classList.contains(CLS_POPUP_OPEN)) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n\t            }\n\t            else if (trg.classList.contains('e-scroll-nav')) {\n\t                trg.click();\n\t            }\n\t            else {\n\t                if (!ej2_base_4.isNullOrUndefined(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {\n\t                    this.select(trgIndex);\n\t                    if (!ej2_base_4.isNullOrUndefined(this.popEle)) {\n\t                        this.popObj.hide(this.hide);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.getEleIndex = function (item) {\n\t            return Array.prototype.indexOf.call(ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element), item);\n\t        };\n\t        Tab.prototype.extIndex = function (id) {\n\t            return id.replace(CLS_ITEM + '_', '');\n\t        };\n\t        Tab.prototype.getContent = function (ele, index) {\n\t            var templateFn;\n\t            var content;\n\t            var tempEle = ej2_base_4.createElement('div');\n\t            var cnt = this.items[Number(index)].content;\n\t            var cntHTML = (typeof cnt !== 'object') ? cnt : cnt.outerHTML;\n\t            templateFn = ej2_base_5.compile(cntHTML);\n\t            if (!ej2_base_4.isNullOrUndefined(templateFn) && templateFn().length > 0) {\n\t                [].slice.call(templateFn()).forEach(function (el) {\n\t                    tempEle.appendChild(el);\n\t                });\n\t                ele.appendChild(tempEle);\n\t            }\n\t            else {\n\t                ele.innerHTML = cntHTML;\n\t            }\n\t        };\n\t        Tab.prototype.findEle = function (items, key) {\n\t            var ele;\n\t            for (var i = 0; i < items.length; i++) {\n\t                if (items[i].id === key) {\n\t                    ele = items[i];\n\t                    break;\n\t                }\n\t            }\n\t            return ele;\n\t        };\n\t        Tab.prototype.setOrientation = function (place, ele) {\n\t            (place === 'Bottom') ? this.element.appendChild(ele) : this.element.insertBefore(ele, ej2_base_2.select('.' + CLS_CONTENT, this.element));\n\t        };\n\t        Tab.prototype.setCssClass = function (ele, cls, val) {\n\t            if (cls === '') {\n\t                return;\n\t            }\n\t            var list = cls.split(' ');\n\t            for (var i = 0; i < list.length; i++) {\n\t                if (val) {\n\t                    ele.classList.add(list[i]);\n\t                }\n\t                else {\n\t                    ele.classList.remove(list[i]);\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.setContentHeight = function (val) {\n\t            if (ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                return;\n\t            }\n\t            var height;\n\t            var hdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            if (this.heightAdjustMode === 'None') {\n\t                if (this.height === 'auto') {\n\t                    return;\n\t                }\n\t                else {\n\t                    ej2_base_4.setStyleAttribute(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\n\t                }\n\t            }\n\t            else if (this.heightAdjustMode === 'Fill') {\n\t                ej2_base_4.setStyleAttribute(this.element, { 'height': '100%' });\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': 'auto' });\n\t            }\n\t            else if (this.heightAdjustMode === 'Auto') {\n\t                var cnt = ej2_base_4.selectAll('.' + CLS_CONTENT + ' > .' + CLS_ITEM, this.element);\n\t                if (this.isTemplate === true) {\n\t                    for (var i = 0; i < cnt.length; i++) {\n\t                        cnt[i].setAttribute('style', 'display:block; visibility: visible');\n\t                        this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n\t                        cnt[i].style.removeProperty('display');\n\t                        cnt[i].style.removeProperty('visibility');\n\t                    }\n\t                }\n\t                else {\n\t                    this.cntEle = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t                    if (val === true) {\n\t                        this.cntEle.appendChild(ej2_base_4.createElement('div', {\n\t                            id: (CLS_CONTENT + '_' + 0), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n\t                            attrs: { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + 0 }\n\t                        }));\n\t                    }\n\t                    var ele = this.cntEle.children.item(0);\n\t                    for (var i = 0; i < this.items.length; i++) {\n\t                        this.getContent(ele, i);\n\t                        this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n\t                        ele.innerHTML = '';\n\t                    }\n\t                    this.getContent(ele, 0);\n\t                    ele.classList.remove(CLS_ACTIVE);\n\t                }\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': this.maxHeight + 'px' });\n\t            }\n\t            else {\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': 'auto' });\n\t            }\n\t        };\n\t        Tab.prototype.getHeight = function (ele) {\n\t            var cs = window.getComputedStyle(ele);\n\t            return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) +\n\t                parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n\t        };\n\t        Tab.prototype.setActiveBorder = function () {\n\t            var trg = ej2_base_2.select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element);\n\t            if (trg === null) {\n\t                return;\n\t            }\n\t            var hsCnt = ej2_base_2.select('.' + CLS_TB_ITEMS + ' .e-hscroll-content', this.element);\n\t            this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            var bar = ej2_base_2.select('.' + CLS_INDICATOR, this.element);\n\t            var tbWidth = (ej2_base_4.isNullOrUndefined(hsCnt)) ? this.tbItems.offsetWidth : hsCnt.offsetWidth;\n\t            ej2_base_4.setStyleAttribute(bar, { 'left': trg.offsetLeft + 'px', 'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px' });\n\t            this.bdrLine.classList.remove(CLS_HIDDEN);\n\t        };\n\t        Tab.prototype.setActive = function (value) {\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element);\n\t            var trg = this.tbItem[value];\n\t            if (value >= 0) {\n\t                this.setProperties({ selectedItem: value }, true);\n\t            }\n\t            if (value < 0 || isNaN(value) || this.tbItem.length === 0 || trg.classList.contains(CLS_ACTIVE)) {\n\t                return;\n\t            }\n\t            if (!this.isTemplate) {\n\t                var prev = this.tbItem[this.prevIndex];\n\t                if (!ej2_base_4.isNullOrUndefined(prev)) {\n\t                    prev.removeAttribute('aria-controls');\n\t                }\n\t                ej2_base_1.attributes(trg, { 'aria-controls': CLS_CONTENT + '_' + value });\n\t            }\n\t            var id = trg.id;\n\t            this.removeActiveClass(id);\n\t            trg.classList.add(CLS_ACTIVE);\n\t            trg.setAttribute('aria-selected', 'true');\n\t            var no = Number(this.extIndex(id));\n\t            ej2_base_1.attributes(this.element, { 'aria-activedescendant': id });\n\t            if (this.isTemplate) {\n\t                if (ej2_base_2.select('.' + CLS_CONTENT, this.element).children.length > 0) {\n\t                    var trg_1 = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t                    if (!ej2_base_4.isNullOrUndefined(trg_1)) {\n\t                        trg_1.classList.add(CLS_ACTIVE);\n\t                    }\n\t                    this.triggerAnimation(id, this.enableAnimation);\n\t                }\n\t            }\n\t            else {\n\t                var item = ej2_base_2.select('.' + CLS_CONTENT + ' > #' + CLS_CONTENT + '_' + this.extIndex(id), this.element);\n\t                if (ej2_base_4.isNullOrUndefined(item)) {\n\t                    this.cntEle.appendChild(ej2_base_4.createElement('div', {\n\t                        id: CLS_CONTENT + '_' + this.extIndex(id), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n\t                        attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + this.extIndex(id) }\n\t                    }));\n\t                    var eleTrg = ej2_base_2.select('.' + CLS_CONTENT + ' > #' + CLS_CONTENT + '_' + this.extIndex(id), this.element);\n\t                    this.getContent(eleTrg, Number(this.extIndex(id)));\n\t                }\n\t                else {\n\t                    item.classList.add(CLS_ACTIVE);\n\t                }\n\t                this.triggerAnimation(id, this.enableAnimation);\n\t            }\n\t            this.setActiveBorder();\n\t            var curActItem = ej2_base_2.select('.' + CLS_HEADER + ' #' + id, this.element);\n\t            this.refreshItemVisibility(curActItem);\n\t            curActItem.firstChild.focus();\n\t            var eventArg = {\n\t                previousItem: this.prevItem,\n\t                previousIndex: this.prevIndex,\n\t                selectedItem: trg,\n\t                selectedIndex: value\n\t            };\n\t            this.trigger('selected', eventArg);\n\t        };\n\t        Tab.prototype.setItems = function (items) {\n\t            this.isReplace = true;\n\t            this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            this.tbObj.items = this.parseObject(items);\n\t            this.tbObj.dataBind();\n\t            this.isReplace = false;\n\t        };\n\t        Tab.prototype.setRTL = function (value) {\n\t            this.tbObj.enableRtl = value;\n\t            this.tbObj.dataBind();\n\t            this.setCssClass(this.element, CLS_RTL, value);\n\t            this.refreshActiveBorder();\n\t        };\n\t        Tab.prototype.refreshActiveBorder = function () {\n\t            if (!ej2_base_4.isNullOrUndefined(this.bdrLine)) {\n\t                this.bdrLine.classList.add(CLS_HIDDEN);\n\t            }\n\t            this.setActiveBorder();\n\t        };\n\t        Tab.prototype.wireEvents = function () {\n\t            window.addEventListener('resize', this.refreshActElePosition.bind(this));\n\t            ej2_base_5.EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n\t            if (!ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                this.touchModule = new ej2_base_5.Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n\t            }\n\t            this.keyModule = new ej2_base_3.KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });\n\t            this.tabKeyModule = new ej2_base_3.KeyboardEvents(this.element, {\n\t                keyAction: this.keyHandler.bind(this),\n\t                keyConfigs: { openPopup: 'shift+f10', tab: 'tab', shiftTab: 'shift+tab' },\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Tab.prototype.unWireEvents = function () {\n\t            this.keyModule.destroy();\n\t            this.tabKeyModule.destroy();\n\t            if (!ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                this.touchModule.destroy();\n\t            }\n\t            window.removeEventListener('resize', this.refreshActElePosition.bind(this));\n\t            this.element.removeEventListener('mouseover', this.hoverHandler.bind(this));\n\t        };\n\t        Tab.prototype.clickHandler = function (args) {\n\t            this.element.classList.remove(CLS_FOCUS);\n\t            var trg = args.originalEvent.target;\n\t            var trgParent = ej2_base_1.closest(trg, '.' + CLS_TB_ITEM);\n\t            var trgIndex = this.getEleIndex(trgParent);\n\t            if (trg.classList.contains(CLS_ICON_CLOSE)) {\n\t                this.removeTab(trgIndex);\n\t            }\n\t            else {\n\t                this.isPopup = false;\n\t                if (!ej2_base_4.isNullOrUndefined(trgParent) && trgIndex !== this.selectedItem) {\n\t                    this.select(trgIndex);\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.swipeHandler = function (e) {\n\t            if (e.velocity < 3 && ej2_base_4.isNullOrUndefined(e.originalEvent.changedTouches)) {\n\t                return;\n\t            }\n\t            if (e.swipeDirection === 'Right') {\n\t                this.select(this.selectedItem - 1);\n\t            }\n\t            else {\n\t                if (e.swipeDirection === 'Left' && (this.selectedItem !== ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length - 1)) {\n\t                    this.select(this.selectedItem + 1);\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.spaceKeyDown = function (e) {\n\t            if ((e.keyCode === 32 && e.which === 32) || (e.keyCode === 35 && e.which === 35)) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Tab.prototype.keyHandler = function (e) {\n\t            this.element.classList.add(CLS_FOCUS);\n\t            var trg = e.target;\n\t            var actEle = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_ACTIVE, this.element);\n\t            var tabItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element);\n\t            this.popEle = ej2_base_2.select('.' + CLS_TB_POP, this.element);\n\t            if (!ej2_base_4.isNullOrUndefined(this.popEle)) {\n\t                this.popObj = this.popEle.ej2_instances[0];\n\t            }\n\t            switch (e.action) {\n\t                case 'space':\n\t                case 'enter':\n\t                    if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n\t                        break;\n\t                    }\n\t                    this.keyPressed(trg);\n\t                    break;\n\t                case 'tab':\n\t                case 'shiftTab':\n\t                    if (trg.classList.contains(CLS_WRAP)\n\t                        && ej2_base_1.closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {\n\t                        trg.setAttribute('tabindex', '-1');\n\t                    }\n\t                    if (this.popObj && ej2_base_2.isVisible(this.popObj.element)) {\n\t                        this.popObj.hide(this.hide);\n\t                    }\n\t                    actEle.children.item(0).setAttribute('tabindex', '0');\n\t                    break;\n\t                case 'moveLeft':\n\t                case 'moveRight':\n\t                    var item = ej2_base_1.closest(document.activeElement, '.' + CLS_TB_ITEM);\n\t                    if (!ej2_base_4.isNullOrUndefined(item)) {\n\t                        this.refreshItemVisibility(item);\n\t                    }\n\t                    break;\n\t                case 'openPopup':\n\t                    e.preventDefault();\n\t                    if (!ej2_base_4.isNullOrUndefined(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n\t                        this.popObj.show(this.show);\n\t                    }\n\t                    break;\n\t                case 'delete':\n\t                    var trgParent = ej2_base_1.closest(trg, '.' + CLS_TB_ITEM);\n\t                    if (this.showCloseButton === true && !ej2_base_4.isNullOrUndefined(trgParent)) {\n\t                        var nxtSib = trgParent.nextSibling;\n\t                        if (!ej2_base_4.isNullOrUndefined(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n\t                            nxtSib.firstChild.focus();\n\t                        }\n\t                        this.removeTab(this.getEleIndex(trgParent));\n\t                    }\n\t                    this.setActiveBorder();\n\t                    break;\n\t            }\n\t        };\n\t        Tab.prototype.refreshActElePosition = function () {\n\t            var activeEle = ej2_base_2.select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE, this.element);\n\t            if (!ej2_base_4.isNullOrUndefined(activeEle)) {\n\t                this.select(this.getEleIndex(activeEle));\n\t            }\n\t            this.refreshActiveBorder();\n\t        };\n\t        Tab.prototype.refreshItemVisibility = function (target) {\n\t            var scrCnt = ej2_base_2.select('.e-hscroll-content', this.tbItems);\n\t            if (!ej2_base_4.isNullOrUndefined(scrCnt)) {\n\t                var scrBar = ej2_base_2.select('.e-hscroll-bar', this.tbItems);\n\t                var scrStart = scrBar.scrollLeft;\n\t                var scrEnd = scrStart + scrBar.offsetWidth;\n\t                var eleStart = target.offsetLeft;\n\t                var eleWidth = target.offsetWidth;\n\t                var eleEnd = target.offsetLeft + target.offsetWidth;\n\t                if ((scrStart < eleStart) && (scrEnd < eleEnd)) {\n\t                    var eleViewRange = scrEnd - eleStart;\n\t                    scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n\t                }\n\t                else {\n\t                    if ((scrStart > eleStart) && (scrEnd > eleEnd)) {\n\t                        var eleViewRange = eleEnd - scrStart;\n\t                        scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                return;\n\t            }\n\t        };\n\t        Tab.prototype.hoverHandler = function (e) {\n\t            var trg = e.target;\n\t            if (trg.classList.contains(CLS_ICON_CLOSE)) {\n\t                trg.setAttribute('title', new ej2_base_3.L10n('tab', { title: this.title }, this.locale).getConstant('title'));\n\t            }\n\t        };\n\t        Tab.prototype.enableTab = function (index, value) {\n\t            var tbItems = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            if (ej2_base_4.isNullOrUndefined(tbItems)) {\n\t                return;\n\t            }\n\t            if (value === true) {\n\t                tbItems.classList.remove(CLS_DISABLE);\n\t            }\n\t            else {\n\t                tbItems.classList.add(CLS_DISABLE);\n\t                if (tbItems.classList.contains(CLS_ACTIVE)) {\n\t                    this.select(index + 1);\n\t                }\n\t            }\n\t            tbItems.setAttribute('aria-disabled', (value === true) ? 'false' : 'true');\n\t        };\n\t        Tab.prototype.addTab = function (items, index) {\n\t            var _this = this;\n\t            this.trigger('adding', { addedItems: items });\n\t            if (ej2_base_4.isNullOrUndefined(index)) {\n\t                index = ej2_base_4.selectAll('.' + CLS_TB_ITEM).length - 1;\n\t            }\n\t            if (this.isTemplate === true || ej2_base_4.selectAll('.' + CLS_TB_ITEM).length - 1 < index || index < 0 || isNaN(index)) {\n\t                return;\n\t            }\n\t            this.bdrLine.classList.add(CLS_HIDDEN);\n\t            this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            var tabItems = this.parseObject(items);\n\t            items.forEach(function (item) {\n\t                _this.items.push(item);\n\t            });\n\t            this.tbObj.addItems(tabItems, index);\n\t            this.trigger('added', { addedItems: items });\n\t            if (this.selectedItem === index) {\n\t                this.select(index);\n\t            }\n\t            else {\n\t                this.setActiveBorder();\n\t            }\n\t        };\n\t        Tab.prototype.removeTab = function (index) {\n\t            var trg = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            var removingArgs = { removedItem: trg, removedIndex: index };\n\t            this.trigger('removing', removingArgs);\n\t            if (ej2_base_4.isNullOrUndefined(trg)) {\n\t                return;\n\t            }\n\t            this.tbObj.removeItems(index);\n\t            this.refreshActiveBorder();\n\t            var no = this.extIndex(trg.id);\n\t            var cntTrg = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t            if (!ej2_base_4.isNullOrUndefined(cntTrg)) {\n\t                cntTrg.outerHTML = '';\n\t            }\n\t            var removedArgs = { removedItem: trg, removedIndex: index };\n\t            this.trigger('removed', removedArgs);\n\t            if (trg.classList.contains(CLS_ACTIVE)) {\n\t                index = (index > ej2_base_4.selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element).length - 1) ? index - 1 : index;\n\t                this.enableAnimation = false;\n\t                this.select(index);\n\t            }\n\t            if (ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length === 0) {\n\t                this.hdrEle.style.display = 'none';\n\t            }\n\t            this.enableAnimation = true;\n\t        };\n\t        Tab.prototype.hideTab = function (index, value) {\n\t            var item = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            if (ej2_base_4.isNullOrUndefined(item)) {\n\t                return;\n\t            }\n\t            if (ej2_base_4.isNullOrUndefined(value)) {\n\t                value = true;\n\t            }\n\t            this.bdrLine.classList.add(CLS_HIDDEN);\n\t            if (value === true) {\n\t                item.classList.add(CLS_HIDDEN);\n\t                if (item.classList.contains(CLS_ACTIVE)) {\n\t                    this.select((index !== 0) ? index - 1 : index + 1);\n\t                }\n\t            }\n\t            else {\n\t                item.classList.remove(CLS_HIDDEN);\n\t            }\n\t            this.setActiveBorder();\n\t            item.setAttribute('aria-hidden', '' + value);\n\t        };\n\t        Tab.prototype.select = function (args) {\n\t            this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element);\n\t            this.prevItem = this.tbItem[this.prevIndex];\n\t            if (!ej2_base_4.isNullOrUndefined(this.prevItem)) {\n\t                this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n\t            }\n\t            var eventArg = {\n\t                previousItem: this.prevItem,\n\t                previousIndex: this.prevIndex,\n\t                selectedItem: this.tbItem[this.selectedItem],\n\t                selectedIndex: this.selectedItem\n\t            };\n\t            this.trigger('selecting', eventArg);\n\t            if (typeof args === 'number') {\n\t                if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n\t                    this.prevIndex = this.selectedItem;\n\t                    if (this.tbItem[args].classList.contains(CLS_TB_POPUP)) {\n\t                        this.setActive(this.popupHandler(this.tbItem[args]));\n\t                    }\n\t                    else {\n\t                        this.setActive(args);\n\t                    }\n\t                }\n\t                else {\n\t                    this.setActive(0);\n\t                }\n\t            }\n\t            else if (args instanceof (HTMLElement)) {\n\t                this.setActive(this.getEleIndex(args));\n\t            }\n\t        };\n\t        Tab.prototype.disable = function (value) {\n\t            this.setCssClass(this.element, CLS_DISABLE, value);\n\t            this.element.setAttribute('aria-disabled', '' + value);\n\t        };\n\t        Tab.prototype.getPersistData = function () {\n\t            return this.addOnPersist(['selectedItem', 'actEleId']);\n\t        };\n\t        Tab.prototype.getModuleName = function () {\n\t            return 'tab';\n\t        };\n\t        Tab.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'width':\n\t                        ej2_base_4.setStyleAttribute(this.element, { width: ej2_base_3.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_4.setStyleAttribute(this.element, { height: ej2_base_3.formatUnit(newProp.height) });\n\t                        this.setContentHeight(false);\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCssClass(this.element, newProp.cssClass, true);\n\t                        break;\n\t                    case 'items':\n\t                        this.setItems(newProp.items);\n\t                        this.select(this.selectedItem);\n\t                        break;\n\t                    case 'showCloseButton':\n\t                        this.setCloseButton(newProp.showCloseButton);\n\t                        break;\n\t                    case 'selectedItem':\n\t                        this.select(newProp.selectedItem);\n\t                        break;\n\t                    case 'headerPlacement':\n\t                        var tempHdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t                        this.setOrientation(newProp.headerPlacement, tempHdrEle);\n\t                        this.select(this.selectedItem);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setRTL(newProp.enableRtl);\n\t                        break;\n\t                    case 'overflowMode':\n\t                        this.tbObj.overflowMode = newProp.overflowMode;\n\t                        this.tbObj.dataBind();\n\t                        this.refreshActElePosition();\n\t                        break;\n\t                    case 'heightAdjustMode':\n\t                        this.setContentHeight(false);\n\t                        this.select(this.selectedItem);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Tab;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Collection([], TabItem)\n\t    ], Tab.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Tab.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Tab.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Tab.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Tab.prototype, \"selectedItem\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Top')\n\t    ], Tab.prototype, \"headerPlacement\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Content')\n\t    ], Tab.prototype, \"heightAdjustMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Scrollable')\n\t    ], Tab.prototype, \"overflowMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tab.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tab.prototype, \"showCloseButton\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, TabAnimationSettings)\n\t    ], Tab.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"adding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"added\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"selecting\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"selected\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"removing\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"removed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"destroyed\", void 0);\n\t    Tab = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], Tab);\n\t    exports.Tab = Tab;\n\t    exports.tabBuilder = ej2_base_1.CreateBuilder(Tab);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, treeview_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(treeview_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(17), __webpack_require__(3), __webpack_require__(12), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_base_6, ej2_data_1, ej2_base_7, ej2_lists_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ROOT = 'e-treeview';\n\t    var COLLAPSIBLE = 'e-icon-collapsible';\n\t    var EXPANDABLE = 'e-icon-expandable';\n\t    var LISTITEM = 'e-list-item';\n\t    var LISTTEXT = 'e-list-text';\n\t    var PARENTITEM = 'e-list-parent';\n\t    var HOVER = 'e-hover';\n\t    var ACTIVE = 'e-active';\n\t    var LOAD = 'e-load';\n\t    var PROCESS = 'e-process';\n\t    var ICON = 'e-icons';\n\t    var TEXTWRAP = 'e-text-content';\n\t    var INPUT = 'e-tree-input';\n\t    var EDITING = 'e-editing';\n\t    var RTL = 'e-rtl';\n\t    var DRAGITEM = 'e-drag-item';\n\t    var DROPPABLE = 'e-droppable';\n\t    var DRAGGING = 'e-dragging';\n\t    var SIBLING = 'e-sibling';\n\t    var DROPIN = 'e-drop-in';\n\t    var DROPNEXT = 'e-drop-next';\n\t    var DROPOUT = 'e-drop-out';\n\t    var NODROP = 'e-no-drop';\n\t    var FULLROWWRAP = 'e-fullrow-wrap';\n\t    var FULLROW = 'e-fullrow';\n\t    var POPUP = 'e-popup';\n\t    var SELECTED = 'e-selected';\n\t    var EXPANDED = 'e-expanded';\n\t    var NODECOLLAPSED = 'e-node-collapsed';\n\t    var DISABLE = 'e-disable';\n\t    var POPUPSELECT = 'e-select';\n\t    var CONTENT = 'e-content';\n\t    var DOWNTAIL = 'e-downtail';\n\t    var DROPCOUNT = 'e-drop-count';\n\t    var CHECK = 'e-check';\n\t    var INDETERMINATE = 'e-stop';\n\t    var CHECKBOXWRAP = 'e-checkbox-wrapper';\n\t    var CHECKBOXFRAME = 'e-frame';\n\t    var FOCUS = 'e-node-focus';\n\t    var treeAriaAttr = {\n\t        treeRole: 'tree',\n\t        itemRole: 'treeitem',\n\t        listRole: 'group',\n\t        itemText: '',\n\t    };\n\t    var FieldsSettings = (function (_super) {\n\t        __extends(FieldsSettings, _super);\n\t        function FieldsSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FieldsSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Property('child')\n\t    ], FieldsSettings.prototype, \"child\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property([])\n\t    ], FieldsSettings.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('expanded')\n\t    ], FieldsSettings.prototype, \"expanded\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('hasChildren')\n\t    ], FieldsSettings.prototype, \"hasChildren\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('htmlAttributes')\n\t    ], FieldsSettings.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('iconCss')\n\t    ], FieldsSettings.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('id')\n\t    ], FieldsSettings.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('imageUrl')\n\t    ], FieldsSettings.prototype, \"imageUrl\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('isChecked')\n\t    ], FieldsSettings.prototype, \"isChecked\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('parentID')\n\t    ], FieldsSettings.prototype, \"parentID\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(null)\n\t    ], FieldsSettings.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('selected')\n\t    ], FieldsSettings.prototype, \"selected\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(null)\n\t    ], FieldsSettings.prototype, \"tableName\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('text')\n\t    ], FieldsSettings.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('tooltip')\n\t    ], FieldsSettings.prototype, \"tooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('navigateUrl')\n\t    ], FieldsSettings.prototype, \"navigateUrl\", void 0);\n\t    exports.FieldsSettings = FieldsSettings;\n\t    var ActionSettings = (function (_super) {\n\t        __extends(ActionSettings, _super);\n\t        function ActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ActionSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Property('SlideDown')\n\t    ], ActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(400)\n\t    ], ActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('linear')\n\t    ], ActionSettings.prototype, \"easing\", void 0);\n\t    exports.ActionSettings = ActionSettings;\n\t    var NodeAnimationSettings = (function (_super) {\n\t        __extends(NodeAnimationSettings, _super);\n\t        function NodeAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return NodeAnimationSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, ActionSettings)\n\t    ], NodeAnimationSettings.prototype, \"collapse\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, ActionSettings)\n\t    ], NodeAnimationSettings.prototype, \"expand\", void 0);\n\t    exports.NodeAnimationSettings = NodeAnimationSettings;\n\t    var TreeView = (function (_super) {\n\t        __extends(TreeView, _super);\n\t        function TreeView(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.checkActionNodes = [];\n\t            _this.dragStartAction = false;\n\t            _this.keyConfigs = {\n\t                escape: 'escape',\n\t                end: 'end',\n\t                enter: 'enter',\n\t                f2: 'f2',\n\t                home: 'home',\n\t                moveDown: 'downarrow',\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                ctrlDown: 'ctrl+downarrow',\n\t                ctrlUp: 'ctrl+uparrow',\n\t                ctrlEnter: 'ctrl+enter',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                ctrlA: 'ctrl+A',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftEnter: 'shift+enter',\n\t                shiftHome: 'shift+home',\n\t                shiftEnd: 'shift+end',\n\t                csDown: 'ctrl+shift+downarrow',\n\t                csUp: 'ctrl+shift+uparrow',\n\t                csEnter: 'ctrl+shift+enter',\n\t                csHome: 'ctrl+shift+home',\n\t                csEnd: 'ctrl+shift+end',\n\t                space: 'space',\n\t            };\n\t            _this.mouseDownStatus = false;\n\t            return _this;\n\t        }\n\t        TreeView.prototype.getModuleName = function () {\n\t            return 'treeview';\n\t        };\n\t        TreeView.prototype.preRender = function () {\n\t            var _this = this;\n\t            this.listBaseOption = {\n\t                expandCollapse: true,\n\t                fields: this.fields.properties,\n\t                showIcon: true,\n\t                expandIconClass: EXPANDABLE,\n\t                ariaAttributes: treeAriaAttr,\n\t                expandIconPosition: 'left',\n\t                itemCreated: function (e) {\n\t                    _this.beforeNodeCreate(e);\n\t                },\n\t            };\n\t            this.listBaseOption.fields.url = this.fields.navigateUrl;\n\t            this.aniObj = new ej2_base_4.Animation({});\n\t            this.treeList = [];\n\t            this.isLoaded = false;\n\t            if (ej2_base_7.isNullOrUndefined(this.selectedNodes)) {\n\t                this.setProperties({ selectedNodes: [] }, true);\n\t            }\n\t            if (ej2_base_7.isNullOrUndefined(this.checkedNodes)) {\n\t                this.setProperties({ checkedNodes: [] }, true);\n\t            }\n\t        };\n\t        TreeView.prototype.getPersistData = function () {\n\t            var keyEntity = ['selectedNodes', 'checkedNodes'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        TreeView.prototype.render = function () {\n\t            this.initialize();\n\t            this.setDataBinding();\n\t            this.setExpandOnType();\n\t            this.setRipple();\n\t            this.wireEditingEvents(this.allowEditing);\n\t            this.setDragAndDrop(this.allowDragAndDrop);\n\t            this.wireEvents();\n\t        };\n\t        TreeView.prototype.initialize = function () {\n\t            this.element.setAttribute('tabindex', '0');\n\t            this.element.setAttribute('role', treeAriaAttr.treeRole);\n\t            this.setCssClass(null, this.cssClass);\n\t            this.setEnableRtl();\n\t            this.setFullRow(this.fullRowSelect);\n\t            this.setTouchPopup(this.allowMultiSelection);\n\t            this.setMultiSelect(this.allowMultiSelection);\n\t            this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n\t        };\n\t        TreeView.prototype.setEnableRtl = function () {\n\t            this.enableRtl ? ej2_base_6.addClass([this.element], RTL) : ej2_base_6.removeClass([this.element], RTL);\n\t        };\n\t        TreeView.prototype.setRipple = function () {\n\t            var tempStr = '.' + FULLROW + ',.' + TEXTWRAP;\n\t            var rippleModel = {\n\t                selector: tempStr,\n\t                ignore: '.' + TEXTWRAP + ' > .' + ICON + ',.' + INPUT + ', .' + CHECKBOXWRAP\n\t            };\n\t            this.rippleFn = ej2_base_4.rippleEffect(this.element, rippleModel);\n\t            var iconModel = {\n\t                selector: '.' + TEXTWRAP + ' > .' + ICON,\n\t                isCenterRipple: true,\n\t            };\n\t            this.rippleIconFn = ej2_base_4.rippleEffect(this.element, iconModel);\n\t        };\n\t        TreeView.prototype.setFullRow = function (isEnabled) {\n\t            isEnabled ? ej2_base_6.addClass([this.element], FULLROWWRAP) : ej2_base_6.removeClass([this.element], FULLROWWRAP);\n\t        };\n\t        TreeView.prototype.setTouchPopup = function (isEnabled) {\n\t            if (isEnabled) {\n\t                var popup = ej2_base_6.createElement('div', { className: POPUP, styles: 'display:none;' });\n\t                var content = ej2_base_6.createElement('div', { className: CONTENT, attrs: { tabIndex: '-1' } });\n\t                var icon = ej2_base_6.createElement('span', { className: ICON });\n\t                content.appendChild(icon);\n\t                ej2_base_6.append([content, ej2_base_6.createElement('div', { className: DOWNTAIL })], popup);\n\t                this.element.appendChild(popup);\n\t                ej2_base_3.EventHandler.add(content, 'click', this.popupClick, this);\n\t            }\n\t            else {\n\t                var popup = ej2_base_6.select('.' + POPUP, this.element);\n\t                if (popup) {\n\t                    ej2_base_6.detach(popup);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.setMultiSelect = function (isEnabled) {\n\t            if (isEnabled) {\n\t                this.element.setAttribute('aria-multiselectable', 'true');\n\t            }\n\t            else {\n\t                this.element.removeAttribute('aria-multiselectable');\n\t            }\n\t        };\n\t        TreeView.prototype.popupClick = function (e) {\n\t            e.stopImmediatePropagation();\n\t            var target = e.currentTarget;\n\t            target = ej2_base_6.closest(target, '.' + POPUP);\n\t            if (target.classList.contains(POPUPSELECT)) {\n\t                ej2_base_6.removeClass([target], POPUPSELECT);\n\t                ej2_base_6.select('.' + POPUP, this.element).style.display = 'none';\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([target], POPUPSELECT);\n\t            }\n\t        };\n\t        TreeView.prototype.templateComplier = function (template) {\n\t            if (template) {\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(template).length) {\n\t                        return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    return ej2_base_1.compile(template);\n\t                }\n\t            }\n\t            return undefined;\n\t        };\n\t        TreeView.prototype.setDataBinding = function () {\n\t            var _this = this;\n\t            this.treeList.push('false');\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function (e) {\n\t                    _this.treeList.pop();\n\t                    _this.treeData = e.result;\n\t                    _this.isNumberTypeId = _this.treeData[0] ? ((typeof _this.treeData[0][_this.fields.id] === 'number') ? true : false) : false;\n\t                    _this.setRootData();\n\t                    _this.renderItems(true);\n\t                    if (_this.treeList.length === 0 && !_this.isLoaded) {\n\t                        _this.finalize();\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                this.treeList.pop();\n\t                if (ej2_base_7.isNullOrUndefined(this.fields.dataSource)) {\n\t                    this.rootData = this.treeData = [];\n\t                }\n\t                else {\n\t                    this.treeData = this.fields.dataSource;\n\t                    this.setRootData();\n\t                }\n\t                this.renderItems(false);\n\t            }\n\t            if (this.treeList.length === 0 && !this.isLoaded) {\n\t                this.finalize();\n\t            }\n\t        };\n\t        TreeView.prototype.getQuery = function (mapper, value) {\n\t            if (value === void 0) { value = null; }\n\t            var columns = [];\n\t            var query;\n\t            if (!mapper.query) {\n\t                query = new ej2_data_1.Query();\n\t                var prop = this.getActualProperties(mapper);\n\t                for (var _i = 0, _a = Object.keys(prop); _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (col !== 'dataSource' && col !== 'tableName' && col !== 'child' && !!mapper[col]\n\t                        && columns.indexOf(mapper[col]) === -1) {\n\t                        columns.push(mapper[col]);\n\t                    }\n\t                }\n\t                query.select(columns);\n\t                if (prop.hasOwnProperty('tableName')) {\n\t                    query.from(mapper.tableName);\n\t                }\n\t            }\n\t            else {\n\t                query = mapper.query.clone();\n\t            }\n\t            ej2_lists_1.ListBase.addSorting(this.sortOrder, mapper.text, query);\n\t            if (!ej2_base_7.isNullOrUndefined(value) && !ej2_base_7.isNullOrUndefined(mapper.parentID)) {\n\t                query.where(mapper.parentID, 'equal', (this.isNumberTypeId ? parseFloat(value) : value));\n\t            }\n\t            return query;\n\t        };\n\t        TreeView.prototype.setRootData = function () {\n\t            this.dataType = this.getDataType(this.treeData, this.fields);\n\t            if (this.dataType === 1) {\n\t                this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n\t                var rootItems = this.getChildNodes(this.treeData, undefined, true);\n\t                if (ej2_base_7.isNullOrUndefined(rootItems)) {\n\t                    this.rootData = [];\n\t                }\n\t                else {\n\t                    this.rootData = rootItems;\n\t                }\n\t            }\n\t            else {\n\t                this.rootData = this.treeData;\n\t            }\n\t        };\n\t        TreeView.prototype.renderItems = function (isSorted) {\n\t            this.listBaseOption.ariaAttributes.level = 1;\n\t            this.ulElement = ej2_lists_1.ListBase.createList(isSorted ? this.rootData : this.getSortedData(this.rootData), this.listBaseOption);\n\t            this.element.appendChild(this.ulElement);\n\t            this.finalizeNode(this.element);\n\t        };\n\t        TreeView.prototype.beforeNodeCreate = function (e) {\n\t            if (this.showCheckBox) {\n\t                var checkboxEle = ej2_buttons_1.createCheckBox(true);\n\t                var icon = ej2_base_6.select('div.' + ICON, e.item);\n\t                var id = e.item.getAttribute('data-uid');\n\t                e.item.childNodes[0].insertBefore(checkboxEle, e.item.childNodes[0].childNodes[ej2_base_7.isNullOrUndefined(icon) ? 0 : 1]);\n\t                if (this.checkedNodes.indexOf(id) > -1) {\n\t                    ej2_base_6.select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n\t                    checkboxEle.setAttribute('aria-checked', 'true');\n\t                    this.addCheck(e.item);\n\t                }\n\t                else if (!ej2_base_7.isNullOrUndefined(e.curData[e.fields.isChecked]) && e.curData[e.fields.isChecked].toString() === 'true') {\n\t                    ej2_base_6.select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n\t                    checkboxEle.setAttribute('aria-checked', 'true');\n\t                    this.addCheck(e.item);\n\t                }\n\t                else {\n\t                    checkboxEle.setAttribute('aria-checked', 'false');\n\t                }\n\t            }\n\t            if (this.fullRowSelect) {\n\t                this.createFullRow(e.item);\n\t            }\n\t            if (this.allowMultiSelection && !e.item.classList.contains(SELECTED)) {\n\t                e.item.setAttribute('aria-selected', 'false');\n\t            }\n\t            var fields = e.fields;\n\t            this.addActionClass(e, fields.selected, SELECTED);\n\t            this.addActionClass(e, fields.expanded, EXPANDED);\n\t            if (!ej2_base_7.isNullOrUndefined(this.nodeTemplateFn)) {\n\t                var textEle = e.item.querySelector('.' + LISTTEXT);\n\t                textEle.innerHTML = '';\n\t                ej2_base_6.append(this.nodeTemplateFn(e.curData), textEle);\n\t            }\n\t            var eventArgs = {\n\t                node: e.item,\n\t                nodeData: e.curData,\n\t                text: e.text,\n\t            };\n\t            this.trigger('drawNode', eventArgs);\n\t        };\n\t        TreeView.prototype.addActionClass = function (e, action, cssClass) {\n\t            var data = e.curData;\n\t            if (data.hasOwnProperty(action) && !ej2_base_7.isNullOrUndefined(data[action]) && data[action].toString() !== 'false') {\n\t                e.item.classList.add(cssClass);\n\t            }\n\t        };\n\t        TreeView.prototype.getDataType = function (ds, mapper) {\n\t            for (var i = 0, len = ds.length; i < len; i++) {\n\t                if ((typeof mapper.child === 'string') && ds[i].hasOwnProperty(mapper.child)) {\n\t                    return 2;\n\t                }\n\t                if (ds[i].hasOwnProperty(mapper.parentID) || ds[i].hasOwnProperty(mapper.hasChildren)) {\n\t                    return 1;\n\t                }\n\t            }\n\t            return 1;\n\t        };\n\t        TreeView.prototype.getGroupedData = function (dataSource, groupBy) {\n\t            var cusQuery = new ej2_data_1.Query().group(groupBy);\n\t            var ds = ej2_lists_1.ListBase.getDataSource(dataSource, cusQuery);\n\t            var grpItem = [];\n\t            for (var j = 0; j < ds.length; j++) {\n\t                var itemObj = ds[j].items;\n\t                grpItem.push(itemObj);\n\t            }\n\t            return grpItem;\n\t        };\n\t        TreeView.prototype.getSortedData = function (list) {\n\t            if (list && this.sortOrder !== 'None') {\n\t                list = ej2_lists_1.ListBase.getDataSource(list, ej2_lists_1.ListBase.addSorting(this.sortOrder, this.fields.text));\n\t            }\n\t            return list;\n\t        };\n\t        TreeView.prototype.finalizeNode = function (element) {\n\t            var _this = this;\n\t            if (this.isLoaded) {\n\t                var sNodes = ej2_base_6.selectAll('.' + SELECTED, element);\n\t                for (var i = 0; i < sNodes.length; i++) {\n\t                    this.selectNode(sNodes[i], null);\n\t                    break;\n\t                }\n\t                ej2_base_6.removeClass(sNodes, SELECTED);\n\t            }\n\t            var cNodes = ej2_base_6.selectAll('.' + LISTITEM + ':not(.' + EXPANDED + ')', element);\n\t            for (var j = 0; j < cNodes.length; j++) {\n\t                var icon = ej2_base_6.select('div.' + ICON, cNodes[j]);\n\t                if (icon && icon.classList.contains(EXPANDABLE)) {\n\t                    cNodes[j].setAttribute('aria-expanded', 'false');\n\t                    ej2_base_6.addClass([cNodes[j]], NODECOLLAPSED);\n\t                }\n\t            }\n\t            var eNodes = ej2_base_6.selectAll('.' + EXPANDED, element);\n\t            for (var i = 0; i < eNodes.length; i++) {\n\t                this.renderChildNodes(eNodes[i]);\n\t            }\n\t            ej2_base_6.removeClass(eNodes, EXPANDED);\n\t            this.updateList();\n\t            if (this.showCheckBox) {\n\t                var nodes_1 = [].concat([], this.checkedNodes);\n\t                this.checkedNodes.forEach(function (value, index) {\n\t                    var checkBox = _this.element.querySelector('[data-uid=\"' + value + '\"]');\n\t                    if (ej2_base_7.isNullOrUndefined(checkBox)) {\n\t                        nodes_1 = nodes_1.filter(function (e) { return e !== value; });\n\t                    }\n\t                });\n\t                this.setProperties({ checkedNodes: nodes_1 }, true);\n\t            }\n\t        };\n\t        TreeView.prototype.ensureParentCheckState = function (element) {\n\t            if (!ej2_base_7.isNullOrUndefined(element)) {\n\t                if (element.classList.contains(ROOT)) {\n\t                    return;\n\t                }\n\t                var ulElement = element;\n\t                if (element.classList.contains(LISTITEM)) {\n\t                    ulElement = ej2_base_6.select('.' + PARENTITEM, element);\n\t                }\n\t                var checkedNodes = ej2_base_6.selectAll('.' + CHECK, ulElement);\n\t                var nodes = ej2_base_6.selectAll('.' + LISTITEM, ulElement);\n\t                var checkBoxEle = element.getElementsByClassName(CHECKBOXWRAP)[0];\n\t                if (nodes.length === checkedNodes.length) {\n\t                    this.changeState(checkBoxEle, 'check', null, true, true);\n\t                }\n\t                else if (checkedNodes.length > 0) {\n\t                    this.changeState(checkBoxEle, 'indeterminate', null, true, true);\n\t                }\n\t                else if (checkedNodes.length === 0) {\n\t                    this.changeState(checkBoxEle, 'uncheck', null, true, true);\n\t                }\n\t                var parentUL = ej2_base_6.closest(element, '.' + PARENTITEM);\n\t                if (!ej2_base_7.isNullOrUndefined(parentUL)) {\n\t                    var currentParent = ej2_base_6.closest(parentUL, '.' + LISTITEM);\n\t                    this.ensureParentCheckState(currentParent);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.ensureChildCheckState = function (element, e) {\n\t            if (!ej2_base_7.isNullOrUndefined(element)) {\n\t                var childElement = ej2_base_6.select('.' + PARENTITEM, element);\n\t                var checkBoxes = void 0;\n\t                if (!ej2_base_7.isNullOrUndefined(childElement)) {\n\t                    checkBoxes = ej2_base_6.selectAll('.' + CHECKBOXWRAP, childElement);\n\t                    var isChecked = element.getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n\t                    var checkedState = void 0;\n\t                    for (var index = 0; index < checkBoxes.length; index++) {\n\t                        if (!ej2_base_7.isNullOrUndefined(this.currentLoadData) && !ej2_base_7.isNullOrUndefined(this.currentLoadData[index][this.fields.isChecked])) {\n\t                            checkedState = this.currentLoadData[index][this.fields.isChecked] ? 'check' : 'uncheck';\n\t                        }\n\t                        else {\n\t                            checkedState = isChecked ? 'check' : 'uncheck';\n\t                        }\n\t                        this.changeState(checkBoxes[index], checkedState, e, true, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.doCheckBoxAction = function (nodes, doCheck) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                for (var i = 0, len = nodes.length; i < len; i++) {\n\t                    var liEle = this.getElement(nodes[i]);\n\t                    if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                        continue;\n\t                    }\n\t                    var checkBox = ej2_base_6.select('.' + PARENTITEM + ' .' + CHECKBOXWRAP, liEle);\n\t                    this.validateCheckNode(checkBox, !doCheck, liEle, null);\n\t                }\n\t            }\n\t            else {\n\t                var checkBoxes = ej2_base_6.selectAll('.' + CHECKBOXWRAP, this.element);\n\t                for (var index = 0; index < checkBoxes.length; index++) {\n\t                    this.changeState(checkBoxes[index], doCheck ? 'check' : 'uncheck');\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.changeState = function (wrapper, state, e, isPrevent, isAdd) {\n\t            var ariaState;\n\t            var eventArgs;\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            if (!isPrevent) {\n\t                this.checkActionNodes = [];\n\t                eventArgs = this.getCheckEvent(currLi, state, e);\n\t                this.trigger('nodeChecking', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n\t            if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n\t                frameSpan.classList.remove(INDETERMINATE);\n\t                frameSpan.classList.add(CHECK);\n\t                this.addCheck(currLi);\n\t                ariaState = 'true';\n\t            }\n\t            else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {\n\t                ej2_base_6.removeClass([frameSpan], [CHECK, INDETERMINATE]);\n\t                this.removeCheck(currLi);\n\t                ariaState = 'false';\n\t            }\n\t            else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n\t                frameSpan.classList.remove(CHECK);\n\t                frameSpan.classList.add(INDETERMINATE);\n\t                this.removeCheck(currLi);\n\t                ariaState = 'mixed';\n\t            }\n\t            ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n\t            if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                wrapper.setAttribute('aria-checked', ariaState);\n\t            }\n\t            if (isAdd) {\n\t                var data = [].concat([], this.checkActionNodes);\n\t                eventArgs = this.getCheckEvent(currLi, state, e);\n\t                if (ej2_base_1.isUndefined(isPrevent)) {\n\t                    eventArgs.data = data;\n\t                }\n\t            }\n\t            if (!isPrevent) {\n\t                if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                    wrapper.setAttribute('aria-checked', ariaState);\n\t                    eventArgs.data[0].checked = ariaState;\n\t                    this.trigger('nodeChecked', eventArgs);\n\t                    this.checkActionNodes = [];\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.addCheck = function (liEle) {\n\t            var id = liEle.getAttribute('data-uid');\n\t            if (!ej2_base_7.isNullOrUndefined(id) && this.checkedNodes.indexOf(id) === -1) {\n\t                this.checkedNodes.push(id);\n\t            }\n\t        };\n\t        TreeView.prototype.removeCheck = function (liEle) {\n\t            var index = this.checkedNodes.indexOf(liEle.getAttribute('data-uid'));\n\t            if (index > -1) {\n\t                this.checkedNodes.splice(index, 1);\n\t            }\n\t        };\n\t        TreeView.prototype.getCheckEvent = function (currLi, action, e) {\n\t            this.checkActionNodes.push(this.getNodeData(currLi));\n\t            var nodeData = this.checkActionNodes;\n\t            return { action: action, cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, data: nodeData };\n\t        };\n\t        TreeView.prototype.finalize = function () {\n\t            var firstNode = ej2_base_6.select('.' + LISTITEM, this.element);\n\t            if (firstNode) {\n\t                ej2_base_6.addClass([firstNode], FOCUS);\n\t            }\n\t            this.doSelectionAction();\n\t            this.isLoaded = true;\n\t            var eventArgs = { data: this.treeData };\n\t            this.trigger('dataBound', eventArgs);\n\t        };\n\t        TreeView.prototype.doSelectionAction = function () {\n\t            var sNodes = ej2_base_6.selectAll('.' + SELECTED, this.element);\n\t            var sUids = this.selectedNodes;\n\t            if (sUids.length > 0) {\n\t                this.setProperties({ selectedNodes: [] }, true);\n\t                for (var i = 0; i < sUids.length; i++) {\n\t                    var sNode = ej2_base_6.select('[data-uid=\"' + sUids[i] + '\"]', this.element);\n\t                    this.selectNode(sNode, null, true);\n\t                    if (!this.allowMultiSelection) {\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.selectGivenNodes(sNodes);\n\t            }\n\t            ej2_base_6.removeClass(sNodes, SELECTED);\n\t        };\n\t        TreeView.prototype.selectGivenNodes = function (sNodes) {\n\t            for (var i = 0; i < sNodes.length; i++) {\n\t                this.selectNode(sNodes[i], null, true);\n\t                if (!this.allowMultiSelection) {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            ej2_base_3.EventHandler.remove(this.element, 'contextmenu ', this.preventContextMenu);\n\t            if (!target || this.dragStartAction) {\n\t                return;\n\t            }\n\t            else {\n\t                var classList = target.classList;\n\t                var li = ej2_base_6.closest(target, '.' + LISTITEM);\n\t                if (!li) {\n\t                    return;\n\t                }\n\t                else {\n\t                    this.removeHover();\n\t                    this.setFocusElement(li);\n\t                    if (this.showCheckBox) {\n\t                        var checkWrapper = ej2_base_6.closest(target, '.' + CHECKBOXWRAP);\n\t                        if (!ej2_base_7.isNullOrUndefined(checkWrapper)) {\n\t                            var checkElement = ej2_base_6.select('.' + CHECKBOXFRAME, checkWrapper);\n\t                            this.validateCheckNode(checkWrapper, checkElement.classList.contains(CHECK), li, e);\n\t                            this.triggerClickEvent(e, li);\n\t                            return;\n\t                        }\n\t                    }\n\t                    if (classList.contains(EXPANDABLE)) {\n\t                        this.expandAction(li, target, e);\n\t                    }\n\t                    else if (classList.contains(COLLAPSIBLE)) {\n\t                        this.collapseNode(li, target, e);\n\t                    }\n\t                    else {\n\t                        if (!classList.contains(PARENTITEM) && !classList.contains(LISTITEM)) {\n\t                            var multiSelect = false;\n\t                            if (ej2_base_1.Browser.isDevice && this.allowMultiSelection) {\n\t                                var popup = ej2_base_6.select('.' + POPUP, this.element);\n\t                                if (!ej2_base_6.isVisible(popup)) {\n\t                                    popup.style.display = '';\n\t                                }\n\t                                var txtWrap = ej2_base_6.closest(target, '.' + TEXTWRAP);\n\t                                txtWrap = !txtWrap ? e.target : txtWrap;\n\t                                var pos = txtWrap.getBoundingClientRect();\n\t                                var posLeft = (e.clientX - pos.left) + txtWrap.offsetLeft - (popup.offsetWidth / 2);\n\t                                var posTop = txtWrap.offsetTop - popup.offsetHeight - 10;\n\t                                popup.style.left = (posLeft < 0 ? 0 : posLeft) + 'px';\n\t                                popup.style.top = (posTop < 0 ? 0 : posTop) + 'px';\n\t                                if (popup.classList.contains(POPUPSELECT)) {\n\t                                    multiSelect = true;\n\t                                }\n\t                            }\n\t                            this.toggleSelect(li, e, multiSelect);\n\t                        }\n\t                    }\n\t                    this.triggerClickEvent(e, li);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.nodeCheckingEvent = function (wrapper, isCheck, e) {\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            this.checkActionNodes = [];\n\t            var ariaState = !isCheck ? 'true' : 'false';\n\t            if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                wrapper.setAttribute('aria-checked', ariaState);\n\t            }\n\t            var eventArgs = this.getCheckEvent(currLi, !isCheck ? 'uncheck' : 'check', e);\n\t            this.trigger('nodeChecking', eventArgs);\n\t            return eventArgs;\n\t        };\n\t        TreeView.prototype.nodeCheckedEvent = function (wrapper, isCheck, e) {\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            var eventArgs = this.getCheckEvent(wrapper, isCheck ? 'uncheck' : 'check', e);\n\t            eventArgs.data = eventArgs.data.splice(0, eventArgs.data.length - 1);\n\t            this.trigger('nodeChecked', eventArgs);\n\t        };\n\t        TreeView.prototype.triggerClickEvent = function (e, li) {\n\t            var eventArgs = {\n\t                event: e,\n\t                node: li,\n\t            };\n\t            this.trigger('nodeClicked', eventArgs);\n\t        };\n\t        TreeView.prototype.expandNode = function (currLi, icon) {\n\t            var _this = this;\n\t            ej2_base_6.removeClass([icon], LOAD);\n\t            ej2_base_6.removeClass([icon], EXPANDABLE);\n\t            ej2_base_6.addClass([icon], COLLAPSIBLE);\n\t            var start = 0;\n\t            var end = 0;\n\t            var proxy = this;\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            var liEle = currLi;\n\t            this.setHeight(liEle, ul);\n\t            this.aniObj.animate(ul, {\n\t                name: this.animation.expand.effect,\n\t                duration: this.animation.expand.duration,\n\t                timingFunction: this.animation.expand.easing,\n\t                begin: function (args) {\n\t                    liEle.style.overflow = 'hidden';\n\t                    start = liEle.offsetHeight;\n\t                    end = ej2_base_6.select('.' + TEXTWRAP, currLi).offsetHeight;\n\t                },\n\t                progress: function (args) {\n\t                    args.element.style.display = 'block';\n\t                    proxy.animateHeight(args, start, end);\n\t                },\n\t                end: function (args) {\n\t                    args.element.style.display = 'block';\n\t                    liEle.style.overflow = '';\n\t                    liEle.style.height = '';\n\t                    ej2_base_6.removeClass([icon], PROCESS);\n\t                    currLi.setAttribute('aria-expanded', 'true');\n\t                    ej2_base_6.removeClass([currLi], NODECOLLAPSED);\n\t                    if (_this.isLoaded && _this.expandArgs) {\n\t                        _this.trigger('nodeExpanded', _this.expandArgs);\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        TreeView.prototype.collapseNode = function (currLi, icon, e) {\n\t            var _this = this;\n\t            if (icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], PROCESS);\n\t            }\n\t            var colArgs;\n\t            if (this.isLoaded) {\n\t                colArgs = this.getExpandEvent(currLi, e);\n\t                this.trigger('nodeCollapsing', colArgs);\n\t                if (colArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            ej2_base_6.removeClass([icon], COLLAPSIBLE);\n\t            ej2_base_6.addClass([icon], EXPANDABLE);\n\t            var start = 0;\n\t            var end = 0;\n\t            var proxy = this;\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            var liEle = currLi;\n\t            ej2_base_6.addClass([currLi], NODECOLLAPSED);\n\t            this.aniObj.animate(ul, {\n\t                name: this.animation.collapse.effect,\n\t                duration: this.animation.collapse.duration,\n\t                timingFunction: this.animation.collapse.easing,\n\t                begin: function (args) {\n\t                    liEle.style.overflow = 'hidden';\n\t                    start = ej2_base_6.select('.' + TEXTWRAP, currLi).offsetHeight;\n\t                    end = liEle.offsetHeight;\n\t                },\n\t                progress: function (args) {\n\t                    proxy.animateHeight(args, start, end);\n\t                },\n\t                end: function (args) {\n\t                    liEle.style.overflow = '';\n\t                    args.element.style.display = 'none';\n\t                    liEle.style.height = '';\n\t                    ej2_base_6.removeClass([icon], PROCESS);\n\t                    currLi.setAttribute('aria-expanded', 'false');\n\t                    if (_this.isLoaded) {\n\t                        _this.trigger('nodeCollapsed', colArgs);\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        TreeView.prototype.setHeight = function (currLi, ul) {\n\t            ul.style.display = 'block';\n\t            ul.style.visibility = 'hidden';\n\t            currLi.style.height = currLi.offsetHeight + 'px';\n\t            ul.style.display = 'none';\n\t            ul.style.visibility = '';\n\t        };\n\t        TreeView.prototype.animateHeight = function (args, start, end) {\n\t            var remaining = (args.duration - args.timeStamp) / args.duration;\n\t            var currentHeight = (end - start) * remaining + start;\n\t            args.element.parentElement.style.height = currentHeight + 'px';\n\t        };\n\t        TreeView.prototype.renderChildNodes = function (parentLi, expandChild) {\n\t            var _this = this;\n\t            var eicon = ej2_base_6.select('div.' + ICON, parentLi);\n\t            if (ej2_base_7.isNullOrUndefined(eicon)) {\n\t                return;\n\t            }\n\t            ej2_base_6.addClass([eicon], LOAD);\n\t            var childItems;\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                var level = this.parents(parentLi, '.' + PARENTITEM).length;\n\t                var mapper_1 = this.getChildFields(this.fields, level, 1);\n\t                if (ej2_base_7.isNullOrUndefined(mapper_1) || ej2_base_7.isNullOrUndefined(mapper_1.dataSource)) {\n\t                    ej2_base_6.detach(eicon);\n\t                    parentLi.removeAttribute('aria-expanded');\n\t                    return;\n\t                }\n\t                this.treeList.push('false');\n\t                mapper_1.dataSource.executeQuery(this.getQuery(mapper_1, parentLi.getAttribute('data-uid'))).then(function (e) {\n\t                    _this.treeList.pop();\n\t                    childItems = e.result;\n\t                    _this.currentLoadData = childItems;\n\t                    if (ej2_base_7.isNullOrUndefined(childItems) || childItems.length === 0) {\n\t                        ej2_base_6.detach(eicon);\n\t                        parentLi.removeAttribute('aria-expanded');\n\t                    }\n\t                    else {\n\t                        var prop = _this.getActualProperties(mapper_1);\n\t                        _this.listBaseOption.fields = prop;\n\t                        _this.listBaseOption.fields.url = prop.navigateUrl;\n\t                        _this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n\t                        parentLi.appendChild(ej2_lists_1.ListBase.createList(childItems, _this.listBaseOption));\n\t                        _this.expandNode(parentLi, eicon);\n\t                        _this.ensureCheckNode(parentLi);\n\t                        _this.finalizeNode(parentLi);\n\t                        _this.renderSubChild(parentLi, expandChild);\n\t                    }\n\t                    if (_this.treeList.length === 0 && !_this.isLoaded) {\n\t                        _this.finalize();\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                childItems = this.getChildNodes(this.treeData, parentLi.getAttribute('data-uid'));\n\t                this.currentLoadData = childItems;\n\t                if (ej2_base_7.isNullOrUndefined(childItems) || childItems.length === 0) {\n\t                    ej2_base_6.detach(eicon);\n\t                    parentLi.removeAttribute('aria-expanded');\n\t                    return;\n\t                }\n\t                else {\n\t                    this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n\t                    parentLi.appendChild(ej2_lists_1.ListBase.createList(this.getSortedData(childItems), this.listBaseOption));\n\t                    this.expandNode(parentLi, eicon);\n\t                    this.ensureCheckNode(parentLi);\n\t                    this.finalizeNode(parentLi);\n\t                    this.renderSubChild(parentLi, expandChild);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.ensureCheckNode = function (element) {\n\t            if (this.showCheckBox) {\n\t                this.ensureChildCheckState(element);\n\t                this.ensureParentCheckState(element);\n\t            }\n\t            this.currentLoadData = null;\n\t        };\n\t        TreeView.prototype.getChildFields = function (mapper, nodeLevel, dataLevel) {\n\t            var childData;\n\t            if (nodeLevel === dataLevel) {\n\t                return this.getChildMapper(mapper);\n\t            }\n\t            else {\n\t                return this.getChildFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n\t            }\n\t        };\n\t        TreeView.prototype.getChildMapper = function (mapper) {\n\t            return (typeof mapper.child === 'string' || ej2_base_7.isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n\t        };\n\t        TreeView.prototype.getChildNodes = function (obj, parentId, isRoot) {\n\t            if (isRoot === void 0) { isRoot = false; }\n\t            var childNodes;\n\t            if (ej2_base_7.isNullOrUndefined(obj)) {\n\t                return childNodes;\n\t            }\n\t            else if (this.dataType === 1) {\n\t                return this.getChildGroup(this.groupedData, parentId, isRoot);\n\t            }\n\t            else {\n\t                if (typeof this.fields.child === 'string') {\n\t                    for (var i = 0, objlen = obj.length; i < objlen; i++) {\n\t                        if (obj[i][this.fields.id] && obj[i][this.fields.id].toString() === parentId) {\n\t                            return obj[i][this.fields.child];\n\t                        }\n\t                        else if (obj[i].hasOwnProperty(this.fields.child)) {\n\t                            childNodes = this.getChildNodes(obj[i][this.fields.child], parentId);\n\t                            if (childNodes !== undefined) {\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return childNodes;\n\t        };\n\t        TreeView.prototype.getChildGroup = function (data, parentId, isRoot) {\n\t            var childNodes;\n\t            if (ej2_base_7.isNullOrUndefined(data)) {\n\t                return childNodes;\n\t            }\n\t            for (var i = 0, objlen = data.length; i < objlen; i++) {\n\t                if (!ej2_base_7.isNullOrUndefined(data[i][0]) && !ej2_base_7.isNullOrUndefined(data[i][0][this.fields.parentID])) {\n\t                    if (data[i][0][this.fields.parentID].toString() === parentId) {\n\t                        return data[i];\n\t                    }\n\t                }\n\t                else if (isRoot) {\n\t                    return data[i];\n\t                }\n\t                else {\n\t                    return [];\n\t                }\n\t            }\n\t            return childNodes;\n\t        };\n\t        TreeView.prototype.renderSubChild = function (element, expandChild) {\n\t            if (expandChild) {\n\t                var cIcons = ej2_base_6.selectAll('.' + EXPANDABLE, element);\n\t                for (var i = 0, len = cIcons.length; i < len; i++) {\n\t                    var icon = cIcons[i];\n\t                    var curLi = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                    this.renderChildNodes(curLi, expandChild);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.toggleSelect = function (li, e, multiSelect) {\n\t            if (this.allowMultiSelection && ((e && e.ctrlKey) || multiSelect) && this.isActive(li)) {\n\t                this.unselectNode(li, e);\n\t            }\n\t            else {\n\t                this.selectNode(li, e, multiSelect);\n\t            }\n\t        };\n\t        TreeView.prototype.isActive = function (li) {\n\t            return li.classList.contains(ACTIVE) ? true : false;\n\t        };\n\t        TreeView.prototype.selectNode = function (li, e, multiSelect) {\n\t            if (ej2_base_7.isNullOrUndefined(li) || (!this.allowMultiSelection && this.isActive(li) && !ej2_base_7.isNullOrUndefined(e))) {\n\t                this.setFocusElement(li);\n\t                return;\n\t            }\n\t            var eventArgs;\n\t            if (this.isLoaded) {\n\t                eventArgs = this.getSelectEvent(li, 'select', e);\n\t                this.trigger('nodeSelecting', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            if (!this.allowMultiSelection || (!multiSelect && (!e || (e && !e.ctrlKey)))) {\n\t                this.removeSelectAll();\n\t            }\n\t            if (this.allowMultiSelection && e && e.shiftKey) {\n\t                if (!this.startNode) {\n\t                    this.startNode = li;\n\t                }\n\t                var startIndex = this.liList.indexOf(this.startNode);\n\t                var endIndex = this.liList.indexOf(li);\n\t                if (startIndex > endIndex) {\n\t                    var temp = startIndex;\n\t                    startIndex = endIndex;\n\t                    endIndex = temp;\n\t                }\n\t                for (var i = startIndex; i <= endIndex; i++) {\n\t                    var currNode = this.liList[i];\n\t                    if (ej2_base_6.isVisible(currNode)) {\n\t                        this.addSelect(currNode);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.startNode = li;\n\t                this.addSelect(li);\n\t            }\n\t            this.setFocusElement(li);\n\t            if (this.isLoaded) {\n\t                this.trigger('nodeSelected', eventArgs);\n\t            }\n\t        };\n\t        TreeView.prototype.unselectNode = function (li, e) {\n\t            var eventArgs;\n\t            if (this.isLoaded) {\n\t                eventArgs = this.getSelectEvent(li, 'un-select', e);\n\t                this.trigger('nodeSelecting', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            this.removeSelect(li);\n\t            this.setFocusElement(li);\n\t            if (this.isLoaded) {\n\t                this.trigger('nodeSelected', eventArgs);\n\t            }\n\t        };\n\t        TreeView.prototype.setFocusElement = function (li) {\n\t            if (!ej2_base_7.isNullOrUndefined(li)) {\n\t                var focusedNode = this.getFocusedNode();\n\t                if (focusedNode) {\n\t                    ej2_base_6.removeClass([focusedNode], FOCUS);\n\t                }\n\t                ej2_base_6.addClass([li], FOCUS);\n\t            }\n\t        };\n\t        TreeView.prototype.addSelect = function (liEle) {\n\t            liEle.setAttribute('aria-selected', 'true');\n\t            ej2_base_6.addClass([liEle], ACTIVE);\n\t            var id = liEle.getAttribute('data-uid');\n\t            if (!ej2_base_7.isNullOrUndefined(id) && this.selectedNodes.indexOf(id) === -1) {\n\t                this.selectedNodes.push(id);\n\t            }\n\t        };\n\t        TreeView.prototype.removeSelect = function (liEle) {\n\t            if (this.allowMultiSelection) {\n\t                liEle.setAttribute('aria-selected', 'false');\n\t            }\n\t            else {\n\t                liEle.removeAttribute('aria-selected');\n\t            }\n\t            ej2_base_6.removeClass([liEle], ACTIVE);\n\t            var index = this.selectedNodes.indexOf(liEle.getAttribute('data-uid'));\n\t            if (index > -1) {\n\t                this.selectedNodes.splice(index, 1);\n\t            }\n\t        };\n\t        TreeView.prototype.removeSelectAll = function () {\n\t            var selectedLI = this.element.querySelectorAll('.' + ACTIVE);\n\t            for (var _i = 0, selectedLI_1 = selectedLI; _i < selectedLI_1.length; _i++) {\n\t                var ele = selectedLI_1[_i];\n\t                if (this.allowMultiSelection) {\n\t                    ele.setAttribute('aria-selected', 'false');\n\t                }\n\t                else {\n\t                    ele.removeAttribute('aria-selected');\n\t                }\n\t            }\n\t            ej2_base_6.removeClass(selectedLI, ACTIVE);\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t        };\n\t        TreeView.prototype.getSelectEvent = function (currLi, action, e) {\n\t            var nodeData = this.getNodeData(currLi);\n\t            return { action: action, cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, nodeData: nodeData };\n\t        };\n\t        TreeView.prototype.setExpandOnType = function () {\n\t            this.expandOnType = (this.expandOn === 'auto') ? (ej2_base_1.Browser.isDevice ? 'click' : 'dblclick') : this.expandOn;\n\t        };\n\t        TreeView.prototype.expandHandler = function (e) {\n\t            var target = e.target;\n\t            if (!target || (this.allowEditing && e.type === 'dblclick') || target.classList.contains(ROOT) ||\n\t                target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) ||\n\t                target.classList.contains(ICON) || this.showCheckBox && ej2_base_6.closest(target, '.' + CHECKBOXWRAP)) {\n\t                return;\n\t            }\n\t            else {\n\t                this.expandCollapseAction(ej2_base_6.closest(target, '.' + LISTITEM), e);\n\t            }\n\t        };\n\t        TreeView.prototype.expandCollapseAction = function (currLi, e) {\n\t            var icon = ej2_base_6.select('div.' + ICON, currLi);\n\t            if (!icon || icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                var classList = icon.classList;\n\t                if (classList.contains(EXPANDABLE)) {\n\t                    this.expandAction(currLi, icon, e);\n\t                }\n\t                else {\n\t                    this.collapseNode(currLi, icon, e);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.expandAction = function (currLi, icon, e, expandChild) {\n\t            if (icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], PROCESS);\n\t            }\n\t            if (this.isLoaded) {\n\t                this.expandArgs = this.getExpandEvent(currLi, e);\n\t                this.trigger('nodeExpanding', this.expandArgs);\n\t                if (this.expandArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            if (ul && ul.nodeName === 'UL') {\n\t                this.expandNode(currLi, icon);\n\t            }\n\t            else {\n\t                this.renderChildNodes(currLi, expandChild);\n\t            }\n\t        };\n\t        TreeView.prototype.keyActionHandler = function (e) {\n\t            var target = e.target;\n\t            var focusedNode = this.getFocusedNode();\n\t            if (target && target.classList.contains(INPUT)) {\n\t                var inpEle = target;\n\t                if (e.action === 'enter') {\n\t                    inpEle.blur();\n\t                    this.element.focus();\n\t                    ej2_base_6.addClass([focusedNode], HOVER);\n\t                }\n\t                else if (e.action === 'escape') {\n\t                    inpEle.value = this.oldText;\n\t                    inpEle.blur();\n\t                    this.element.focus();\n\t                    ej2_base_6.addClass([focusedNode], HOVER);\n\t                }\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            var eventArgs = {\n\t                cancel: false,\n\t                event: e,\n\t                node: focusedNode,\n\t            };\n\t            this.trigger('keyPress', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            switch (e.action) {\n\t                case 'space':\n\t                    if (this.showCheckBox) {\n\t                        this.checkNode(e);\n\t                    }\n\t                    break;\n\t                case 'moveRight':\n\t                    this.openNode(this.enableRtl ? false : true, e);\n\t                    break;\n\t                case 'moveLeft':\n\t                    this.openNode(this.enableRtl ? true : false, e);\n\t                    break;\n\t                case 'moveDown':\n\t                case 'ctrlDown':\n\t                case 'shiftDown':\n\t                case 'csDown':\n\t                    this.navigateNode(true);\n\t                    break;\n\t                case 'moveUp':\n\t                case 'ctrlUp':\n\t                case 'shiftUp':\n\t                case 'csUp':\n\t                    this.navigateNode(false);\n\t                    break;\n\t                case 'home':\n\t                case 'shiftHome':\n\t                case 'ctrlHome':\n\t                case 'csHome':\n\t                    this.navigateRootNode(true);\n\t                    break;\n\t                case 'end':\n\t                case 'shiftEnd':\n\t                case 'ctrlEnd':\n\t                case 'csEnd':\n\t                    this.navigateRootNode(false);\n\t                    break;\n\t                case 'enter':\n\t                case 'ctrlEnter':\n\t                case 'shiftEnter':\n\t                case 'csEnter':\n\t                    this.toggleSelect(focusedNode, e);\n\t                    break;\n\t                case 'f2':\n\t                    if (this.allowEditing) {\n\t                        this.createTextbox(focusedNode, e);\n\t                    }\n\t                    break;\n\t                case 'ctrlA':\n\t                    if (this.allowMultiSelection) {\n\t                        var sNodes = ej2_base_6.selectAll('.' + LISTITEM + ':not(.' + ACTIVE + ')', this.element);\n\t                        this.selectGivenNodes(sNodes);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        TreeView.prototype.checkNode = function (e) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var checkWrap = ej2_base_6.select('.' + CHECKBOXWRAP, focusedNode);\n\t            var isChecked = ej2_base_6.select(' .' + CHECKBOXFRAME, checkWrap).classList.contains(CHECK);\n\t            this.validateCheckNode(checkWrap, isChecked, focusedNode, e);\n\t        };\n\t        TreeView.prototype.validateCheckNode = function (checkWrap, isCheck, li, e) {\n\t            var eventArgs = this.nodeCheckingEvent(checkWrap, isCheck, e);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true);\n\t            this.ensureChildCheckState(li);\n\t            this.ensureParentCheckState(ej2_base_6.closest(ej2_base_6.closest(li, '.' + PARENTITEM), '.' + LISTITEM));\n\t            this.nodeCheckedEvent(checkWrap, isCheck, e);\n\t        };\n\t        TreeView.prototype.openNode = function (toBeOpened, e) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var icon = ej2_base_6.select('div.' + ICON, focusedNode);\n\t            if (toBeOpened) {\n\t                if (!icon) {\n\t                    return;\n\t                }\n\t                else if (icon.classList.contains(EXPANDABLE)) {\n\t                    this.expandAction(focusedNode, icon, e);\n\t                }\n\t                else {\n\t                    this.focusNextNode(focusedNode, true);\n\t                }\n\t            }\n\t            else {\n\t                if (icon && icon.classList.contains(COLLAPSIBLE)) {\n\t                    this.collapseNode(focusedNode, icon, e);\n\t                }\n\t                else {\n\t                    var parentLi = ej2_base_6.closest(ej2_base_6.closest(focusedNode, '.' + PARENTITEM), '.' + LISTITEM);\n\t                    if (!parentLi) {\n\t                        return;\n\t                    }\n\t                    else {\n\t                        this.setFocus(focusedNode, parentLi);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.navigateNode = function (isTowards) {\n\t            var focusedNode = this.getFocusedNode();\n\t            this.focusNextNode(focusedNode, isTowards);\n\t        };\n\t        TreeView.prototype.navigateRootNode = function (isBackwards) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var rootNode = isBackwards ? this.getRootNode() : this.getEndNode();\n\t            this.setFocus(focusedNode, rootNode);\n\t        };\n\t        TreeView.prototype.getFocusedNode = function () {\n\t            var fNode = ej2_base_6.select('.' + LISTITEM + '.' + FOCUS, this.element);\n\t            return ej2_base_7.isNullOrUndefined(fNode) ? ej2_base_6.select('.' + LISTITEM, this.element) : fNode;\n\t        };\n\t        TreeView.prototype.focusNextNode = function (li, isTowards) {\n\t            var nextNode = isTowards ? this.getNextNode(li) : this.getPrevNode(li);\n\t            this.setFocus(li, nextNode);\n\t        };\n\t        TreeView.prototype.getNextNode = function (li) {\n\t            var index = this.liList.indexOf(li);\n\t            var nextNode;\n\t            do {\n\t                index++;\n\t                nextNode = this.liList[index];\n\t                if (ej2_base_7.isNullOrUndefined(nextNode)) {\n\t                    return li;\n\t                }\n\t            } while (!ej2_base_6.isVisible(nextNode));\n\t            return nextNode;\n\t        };\n\t        TreeView.prototype.getPrevNode = function (li) {\n\t            var index = this.liList.indexOf(li);\n\t            var prevNode;\n\t            do {\n\t                index--;\n\t                prevNode = this.liList[index];\n\t                if (ej2_base_7.isNullOrUndefined(prevNode)) {\n\t                    return li;\n\t                }\n\t            } while (!ej2_base_6.isVisible(prevNode));\n\t            return prevNode;\n\t        };\n\t        TreeView.prototype.getRootNode = function () {\n\t            var index = 0;\n\t            var rootNode;\n\t            do {\n\t                rootNode = this.liList[index];\n\t                index++;\n\t            } while (!ej2_base_6.isVisible(rootNode));\n\t            return rootNode;\n\t        };\n\t        TreeView.prototype.getEndNode = function () {\n\t            var index = this.liList.length - 1;\n\t            var endNode;\n\t            do {\n\t                endNode = this.liList[index];\n\t                index--;\n\t            } while (!ej2_base_6.isVisible(endNode));\n\t            return endNode;\n\t        };\n\t        TreeView.prototype.setFocus = function (preNode, nextNode) {\n\t            ej2_base_6.removeClass([preNode], [HOVER, FOCUS]);\n\t            ej2_base_6.addClass([nextNode], [HOVER, FOCUS]);\n\t        };\n\t        TreeView.prototype.focusIn = function () {\n\t            if (!this.mouseDownStatus) {\n\t                ej2_base_6.addClass([this.getFocusedNode()], HOVER);\n\t            }\n\t            this.mouseDownStatus = false;\n\t        };\n\t        TreeView.prototype.focusOut = function () {\n\t            ej2_base_6.removeClass([this.getFocusedNode()], HOVER);\n\t        };\n\t        TreeView.prototype.onMouseOver = function (e) {\n\t            var target = e.target;\n\t            var classList = target.classList;\n\t            var currentLi = ej2_base_6.closest(target, '.' + LISTITEM);\n\t            if (!currentLi || classList.contains(PARENTITEM) || classList.contains(LISTITEM)) {\n\t                this.removeHover();\n\t                return;\n\t            }\n\t            else {\n\t                this.setHover(currentLi);\n\t            }\n\t        };\n\t        TreeView.prototype.setHover = function (li) {\n\t            if (!li.classList.contains(HOVER)) {\n\t                this.removeHover();\n\t                ej2_base_6.addClass([li], HOVER);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.onMouseLeave = function (e) {\n\t            this.removeHover();\n\t        };\n\t        TreeView.prototype.removeHover = function () {\n\t            var hoveredNode = ej2_base_6.selectAll('.' + HOVER, this.element);\n\t            if (hoveredNode && hoveredNode.length) {\n\t                ej2_base_6.removeClass(hoveredNode, HOVER);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.getNodeData = function (currLi) {\n\t            if (!ej2_base_7.isNullOrUndefined(currLi) && currLi.classList.contains(LISTITEM)) {\n\t                var id = currLi.getAttribute('data-uid');\n\t                var text = ej2_base_6.select('.' + LISTTEXT, currLi).textContent;\n\t                var pNode = ej2_base_6.closest(currLi.parentNode, '.' + LISTITEM);\n\t                var pid = pNode ? pNode.getAttribute('data-uid') : null;\n\t                var selected = currLi.classList.contains(ACTIVE);\n\t                var expanded = (currLi.getAttribute('aria-expanded') === 'true') ? true : false;\n\t                var checked = null;\n\t                if (this.showCheckBox) {\n\t                    checked = ej2_base_6.select('.' + CHECKBOXWRAP, currLi).getAttribute('aria-checked');\n\t                }\n\t                return { id: id, text: text, parentID: pid, selected: selected, expanded: expanded, checked: checked };\n\t            }\n\t            return { id: '', text: '', parentID: '', selected: '', expanded: '', checked: '' };\n\t        };\n\t        TreeView.prototype.getExpandEvent = function (currLi, e) {\n\t            var nodeData = this.getNodeData(currLi);\n\t            return { cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, nodeData: nodeData };\n\t        };\n\t        TreeView.prototype.reRenderNodes = function () {\n\t            this.element.innerHTML = '';\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t            this.isLoaded = false;\n\t            this.setDataBinding();\n\t        };\n\t        TreeView.prototype.setCssClass = function (oldClass, newClass) {\n\t            if (!ej2_base_7.isNullOrUndefined(oldClass) && oldClass !== '') {\n\t                ej2_base_6.removeClass([this.element], oldClass.split(' '));\n\t            }\n\t            if (!ej2_base_7.isNullOrUndefined(newClass) && newClass !== '') {\n\t                ej2_base_6.addClass([this.element], newClass.split(' '));\n\t            }\n\t        };\n\t        TreeView.prototype.editingHandler = function (e) {\n\t            var target = e.target;\n\t            if (!target || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) ||\n\t                target.classList.contains(LISTITEM) || target.classList.contains(ICON) ||\n\t                target.classList.contains(INPUT)) {\n\t                return;\n\t            }\n\t            else {\n\t                e.stopImmediatePropagation();\n\t                var liEle = ej2_base_6.closest(target, '.' + LISTITEM);\n\t                this.createTextbox(liEle, e);\n\t            }\n\t        };\n\t        TreeView.prototype.createTextbox = function (liEle, e) {\n\t            var textEle = ej2_base_6.select('.' + LISTTEXT, liEle);\n\t            this.oldText = textEle.textContent;\n\t            var eventArgs = this.getEditEvent(liEle, null);\n\t            this.trigger('nodeEditing', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            var style = 'width:' + textEle.offsetWidth + 'px';\n\t            var inpEle = ej2_base_6.createElement('input', { className: INPUT, styles: style, attrs: { value: this.oldText } });\n\t            ej2_base_6.addClass([liEle], EDITING);\n\t            textEle.childNodes[0].nodeValue = '';\n\t            textEle.appendChild(inpEle);\n\t            inpEle.focus();\n\t            var inputEle = inpEle;\n\t            inputEle.setSelectionRange(0, inputEle.value.length);\n\t            this.wireInputEvents(inpEle);\n\t        };\n\t        TreeView.prototype.inputFocusOut = function (e) {\n\t            var target = e.target;\n\t            var newText = target.value;\n\t            var txtEle = ej2_base_6.closest(target, '.' + LISTTEXT);\n\t            var liEle = ej2_base_6.closest(target, '.' + LISTITEM);\n\t            txtEle.childNodes[0].nodeValue = newText;\n\t            ej2_base_6.detach(target);\n\t            ej2_base_6.removeClass([liEle], EDITING);\n\t            txtEle.focus();\n\t            this.trigger('nodeEdited', this.getEditEvent(liEle, newText));\n\t        };\n\t        TreeView.prototype.getElement = function (ele) {\n\t            if (ej2_base_7.isNullOrUndefined(ele)) {\n\t                return null;\n\t            }\n\t            else if (typeof ele === 'string') {\n\t                return this.element.querySelector('[data-uid=\"' + ele + '\"]');\n\t            }\n\t            else if (typeof ele === 'object') {\n\t                return ele;\n\t            }\n\t            else {\n\t                return null;\n\t            }\n\t        };\n\t        TreeView.prototype.getEditEvent = function (liEle, newText) {\n\t            var data = this.getNodeData(liEle);\n\t            return { cancel: false, newText: newText, node: liEle, nodeData: data, oldText: this.oldText };\n\t        };\n\t        TreeView.prototype.setDragAndDrop = function (toBind) {\n\t            if (toBind) {\n\t                this.initializeDrag();\n\t            }\n\t            else {\n\t                this.destroyDrag();\n\t            }\n\t        };\n\t        TreeView.prototype.initializeDrag = function () {\n\t            var _this = this;\n\t            var virtualEle;\n\t            this.dragObj = new ej2_base_5.Draggable(this.element, {\n\t                enableTailMode: true,\n\t                preventDefault: ej2_base_1.Browser.isIos ? true : false,\n\t                cursorAt: { top: -20 },\n\t                dragTarget: '.' + TEXTWRAP,\n\t                helper: function (e) {\n\t                    _this.dragTarget = e.sender.target;\n\t                    var dragRoot = ej2_base_6.closest(_this.dragTarget, '.' + ROOT);\n\t                    var dragWrap = ej2_base_6.closest(_this.dragTarget, '.' + TEXTWRAP);\n\t                    _this.dragLi = ej2_base_6.closest(_this.dragTarget, '.' + LISTITEM);\n\t                    if (_this.fullRowSelect && !dragWrap && _this.dragTarget.classList.contains(FULLROW)) {\n\t                        dragWrap = _this.dragTarget.nextElementSibling;\n\t                    }\n\t                    if (!_this.dragTarget || !e.element.isSameNode(dragRoot) || !dragWrap ||\n\t                        _this.dragTarget.classList.contains(ROOT) || _this.dragTarget.classList.contains(PARENTITEM) ||\n\t                        _this.dragTarget.classList.contains(LISTITEM)) {\n\t                        return false;\n\t                    }\n\t                    var cloneEle = (dragWrap.cloneNode(true));\n\t                    if (ej2_base_7.isNullOrUndefined(ej2_base_6.select('div.' + ICON, cloneEle))) {\n\t                        var icon = ej2_base_6.createElement('div', { className: ICON + ' ' + EXPANDABLE });\n\t                        cloneEle.insertBefore(icon, cloneEle.children[0]);\n\t                    }\n\t                    var cssClass = DRAGITEM + ' ' + ROOT + ' ' + (_this.enableRtl ? RTL : '');\n\t                    virtualEle = ej2_base_6.createElement('div', { className: cssClass });\n\t                    virtualEle.appendChild(cloneEle);\n\t                    var nLen = _this.selectedNodes.length;\n\t                    if (nLen > 1 && _this.allowMultiSelection && _this.dragLi.classList.contains(ACTIVE)) {\n\t                        var cNode = ej2_base_6.createElement('span', { className: DROPCOUNT, innerHTML: '' + nLen });\n\t                        virtualEle.appendChild(cNode);\n\t                    }\n\t                    document.body.appendChild(virtualEle);\n\t                    document.body.style.cursor = '';\n\t                    _this.dragData = _this.getNodeData(_this.dragLi);\n\t                    return virtualEle;\n\t                },\n\t                dragStart: function (e) {\n\t                    ej2_base_6.addClass([_this.element], DRAGGING);\n\t                    var eventArgs = _this.getDragEvent(e.event, _this, null, e.target);\n\t                    _this.trigger('nodeDragStart', eventArgs);\n\t                    if (eventArgs.cancel) {\n\t                        ej2_base_6.detach(virtualEle);\n\t                        ej2_base_6.removeClass([_this.element], DRAGGING);\n\t                    }\n\t                    _this.dragStartAction = true;\n\t                },\n\t                drag: function (e) {\n\t                    _this.dragAction(e, virtualEle);\n\t                },\n\t                dragStop: function (e) {\n\t                    ej2_base_6.removeClass([_this.element], DRAGGING);\n\t                    _this.removeVirtualEle();\n\t                    var dropTarget = e.target;\n\t                    var dropRoot = (ej2_base_6.closest(dropTarget, '.' + DROPPABLE));\n\t                    if (!dropTarget || !dropRoot || dropTarget.classList.contains(ROOT)) {\n\t                        ej2_base_6.detach(e.helper);\n\t                        document.body.style.cursor = '';\n\t                    }\n\t                    var eventArgs = _this.getDragEvent(e.event, _this, dropTarget, dropTarget);\n\t                    _this.trigger('nodeDragStop', eventArgs);\n\t                    if (eventArgs.cancel) {\n\t                        ej2_base_6.detach(e.helper);\n\t                        document.body.style.cursor = '';\n\t                    }\n\t                    _this.dragStartAction = false;\n\t                }\n\t            });\n\t            this.dropObj = new ej2_base_5.Droppable(this.element, {\n\t                out: function (e) {\n\t                    if (!ej2_base_7.isNullOrUndefined(e) && !e.target.classList.contains(SIBLING)) {\n\t                        document.body.style.cursor = 'not-allowed';\n\t                    }\n\t                },\n\t                over: function (e) {\n\t                    document.body.style.cursor = '';\n\t                },\n\t                drop: function (e) {\n\t                    _this.dropAction(e);\n\t                }\n\t            });\n\t        };\n\t        TreeView.prototype.dragAction = function (e, virtualEle) {\n\t            var dropRoot = ej2_base_6.closest(e.target, '.' + DROPPABLE);\n\t            var dropWrap = ej2_base_6.closest(e.target, '.' + TEXTWRAP);\n\t            var icon = ej2_base_6.select('div.' + ICON, virtualEle);\n\t            ej2_base_6.removeClass([icon], [DROPIN, DROPNEXT, DROPOUT, NODROP]);\n\t            this.removeVirtualEle();\n\t            document.body.style.cursor = '';\n\t            var classList = e.target.classList;\n\t            if (this.fullRowSelect && !dropWrap && !ej2_base_7.isNullOrUndefined(classList) && classList.contains(FULLROW)) {\n\t                dropWrap = e.target.nextElementSibling;\n\t            }\n\t            if (dropRoot) {\n\t                var dropLi = ej2_base_6.closest(e.target, '.' + LISTITEM);\n\t                if (!dropRoot.classList.contains(ROOT) || (dropWrap &&\n\t                    (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)))) {\n\t                    if (e && (e.event.offsetY < 7)) {\n\t                        ej2_base_6.addClass([icon], DROPNEXT);\n\t                        var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t                        var index = this.fullRowSelect ? (1) : (0);\n\t                        dropLi.insertBefore(virEle, dropLi.children[index]);\n\t                    }\n\t                    else if (e && (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10))) {\n\t                        ej2_base_6.addClass([icon], DROPNEXT);\n\t                        var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t                        var index = this.fullRowSelect ? (2) : (1);\n\t                        dropLi.insertBefore(virEle, dropLi.children[index]);\n\t                    }\n\t                    else {\n\t                        ej2_base_6.addClass([icon], DROPIN);\n\t                    }\n\t                }\n\t                else if (e.target.nodeName === 'LI' && (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi))) {\n\t                    ej2_base_6.addClass([icon], DROPNEXT);\n\t                    this.renderVirtualEle(e);\n\t                }\n\t                else if (e.target.classList.contains(SIBLING)) {\n\t                    ej2_base_6.addClass([icon], DROPNEXT);\n\t                }\n\t                else {\n\t                    ej2_base_6.addClass([icon], DROPOUT);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], NODROP);\n\t                document.body.style.cursor = 'not-allowed';\n\t            }\n\t            this.trigger('nodeDragging', this.getDragEvent(e.event, this, e.target, e.target));\n\t        };\n\t        TreeView.prototype.dropAction = function (e) {\n\t            var dropTarget = e.target;\n\t            var dragObj = e.dragData.draggable.ej2_instances[0];\n\t            var dragTarget = dragObj.dragTarget;\n\t            var dragLi = (ej2_base_6.closest(dragTarget, '.' + LISTITEM));\n\t            var dropLi = (ej2_base_6.closest(dropTarget, '.' + LISTITEM));\n\t            ej2_base_6.detach(e.droppedElement);\n\t            document.body.style.cursor = '';\n\t            if (!dropLi || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n\t                return;\n\t            }\n\t            if (dragObj.allowMultiSelection && (dragLi.classList.contains(ACTIVE) || (e.event.offsetY < 7 ||\n\t                (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10))))) {\n\t                var sNodes = ej2_base_6.selectAll('.' + ACTIVE, dragObj.element);\n\t                for (var i = 0; i < sNodes.length; i++) {\n\t                    if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {\n\t                        continue;\n\t                    }\n\t                    this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj);\n\t                }\n\t            }\n\t            else {\n\t                this.appendNode(dropTarget, dragLi, dropLi, e, dragObj);\n\t            }\n\t            this.trigger('nodeDropped', this.getDragEvent(e.event, dragObj, dropTarget, e.target));\n\t        };\n\t        TreeView.prototype.appendNode = function (dropTarget, dragLi, dropLi, e, dragObj) {\n\t            if (dropTarget.nodeName === 'LI') {\n\t                this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n\t            }\n\t            else {\n\t                this.dropAsChildNode(dragLi, dropLi, dragObj, null, e);\n\t            }\n\t        };\n\t        TreeView.prototype.dropAsSiblingNode = function (dragLi, dropLi, e, dragObj) {\n\t            var dropUl = ej2_base_6.closest(dropLi, '.' + PARENTITEM);\n\t            var dragParentUl = ej2_base_6.closest(dragLi, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            var pre;\n\t            if (e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 2) {\n\t                pre = false;\n\t            }\n\t            else if (e.event.offsetY < 2) {\n\t                pre = true;\n\t            }\n\t            dropUl.insertBefore(dragLi, pre ? e.target : e.target.nextElementSibling);\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            if (dragObj.element.id === this.element.id) {\n\t                this.updateList();\n\t            }\n\t            else {\n\t                dragObj.updateInstance();\n\t                this.updateInstance();\n\t            }\n\t        };\n\t        TreeView.prototype.dropAsChildNode = function (dragLi, dropLi, dragObj, index, e) {\n\t            var dragParentUl = ej2_base_6.closest(dragLi, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            var dropParentUl = ej2_base_6.closest(dropLi, '.' + PARENTITEM);\n\t            if (e && (e.event.offsetY < 7)) {\n\t                dropParentUl.insertBefore(dragLi, dropLi);\n\t            }\n\t            else if (e && (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10))) {\n\t                dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);\n\t            }\n\t            else {\n\t                var dropUl = this.expandParent(dropLi);\n\t                dropUl.insertBefore(dragLi, dropUl.childNodes[index]);\n\t            }\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            if (dragObj.element.id === this.element.id) {\n\t                this.updateList();\n\t            }\n\t            else {\n\t                dragObj.updateInstance();\n\t                this.updateInstance();\n\t            }\n\t        };\n\t        TreeView.prototype.expandParent = function (dropLi) {\n\t            var dropIcon = ej2_base_6.select('div.' + ICON, dropLi);\n\t            if (dropIcon && dropIcon.classList.contains(EXPANDABLE)) {\n\t                this.expandAction(dropLi, dropIcon, null);\n\t            }\n\t            var dropUl = ej2_base_6.select('.' + PARENTITEM, dropLi);\n\t            if (ej2_base_7.isNullOrUndefined(dropUl)) {\n\t                ej2_lists_1.ListBase.generateIcon(dropLi, COLLAPSIBLE, this.listBaseOption);\n\t                var icon = ej2_base_6.select('div.' + ICON, dropLi);\n\t                ej2_base_6.removeClass([icon], EXPANDABLE);\n\t                dropUl = ej2_lists_1.ListBase.generateUL([], null, this.listBaseOption);\n\t                dropLi.appendChild(dropUl);\n\t                dropLi.setAttribute('aria-expanded', 'true');\n\t                ej2_base_6.removeClass([dropLi], NODECOLLAPSED);\n\t            }\n\t            return dropUl;\n\t        };\n\t        TreeView.prototype.updateElement = function (dragParentUl, dragParentLi) {\n\t            if (dragParentLi && dragParentUl.childElementCount === 0) {\n\t                var dragIcon = ej2_base_6.select('div.' + ICON, dragParentLi);\n\t                ej2_base_6.detach(dragParentUl);\n\t                ej2_base_6.detach(dragIcon);\n\t                dragParentLi.removeAttribute('aria-expanded');\n\t            }\n\t        };\n\t        TreeView.prototype.renderVirtualEle = function (e) {\n\t            var pre;\n\t            if (e.event.offsetY > e.target.offsetHeight - 2) {\n\t                pre = false;\n\t            }\n\t            else if (e.event.offsetY < 2) {\n\t                pre = true;\n\t            }\n\t            var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t            var index = this.fullRowSelect ? (pre ? 1 : 2) : (pre ? 0 : 1);\n\t            e.target.insertBefore(virEle, e.target.children[index]);\n\t        };\n\t        TreeView.prototype.removeVirtualEle = function () {\n\t            var sibEle = ej2_base_6.select('.' + SIBLING);\n\t            if (sibEle) {\n\t                ej2_base_6.detach(sibEle);\n\t            }\n\t        };\n\t        TreeView.prototype.destroyDrag = function () {\n\t            if (this.dragObj && this.dropObj) {\n\t                this.dragObj.destroy();\n\t                this.dropObj.destroy();\n\t            }\n\t        };\n\t        TreeView.prototype.getDragEvent = function (event, obj, dropTarget, target) {\n\t            var dropLi = dropTarget ? ej2_base_6.closest(dropTarget, '.' + LISTITEM) : null;\n\t            var dropData = dropLi ? this.getNodeData(dropLi) : null;\n\t            return {\n\t                cancel: false,\n\t                event: event,\n\t                draggedNode: obj.dragLi,\n\t                draggedNodeData: obj.dragData,\n\t                droppedNode: dropLi,\n\t                droppedNodeData: dropData,\n\t                target: target\n\t            };\n\t        };\n\t        TreeView.prototype.addFullRow = function (toAdd) {\n\t            var len = this.liList.length;\n\t            if (toAdd) {\n\t                for (var i = 0; i < len; i++) {\n\t                    this.createFullRow(this.liList[i]);\n\t                }\n\t            }\n\t            else {\n\t                for (var i = 0; i < len; i++) {\n\t                    var rowDiv = ej2_base_6.select('.' + FULLROW, this.liList[i]);\n\t                    ej2_base_6.detach(rowDiv);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.createFullRow = function (item) {\n\t            var rowDiv = ej2_base_6.createElement('div', { className: FULLROW });\n\t            item.insertBefore(rowDiv, item.childNodes[0]);\n\t        };\n\t        TreeView.prototype.addMultiSelect = function (toAdd) {\n\t            if (toAdd) {\n\t                var liEles = ej2_base_6.selectAll('.' + LISTITEM + ':not([aria-selected=\"true\"])', this.element);\n\t                for (var _i = 0, liEles_1 = liEles; _i < liEles_1.length; _i++) {\n\t                    var ele = liEles_1[_i];\n\t                    ele.setAttribute('aria-selected', 'false');\n\t                }\n\t            }\n\t            else {\n\t                var liEles = ej2_base_6.selectAll('.' + LISTITEM + '[aria-selected=\"false\"]', this.element);\n\t                for (var _a = 0, liEles_2 = liEles; _a < liEles_2.length; _a++) {\n\t                    var ele = liEles_2[_a];\n\t                    ele.removeAttribute('aria-selected');\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.collapseByLevel = function (element, level, excludeHiddenNodes) {\n\t            if (level > 0 && !ej2_base_7.isNullOrUndefined(element)) {\n\t                var cNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n\t                for (var i = 0, len = cNodes.length; i < len; i++) {\n\t                    var liEle = cNodes[i];\n\t                    var icon = ej2_base_6.select('.' + COLLAPSIBLE, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                    if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                        this.collapseNode(liEle, icon, null);\n\t                    }\n\t                    this.collapseByLevel(ej2_base_6.select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.collapseAllNodes = function (excludeHiddenNodes) {\n\t            var cIcons = this.getVisibleNodes(excludeHiddenNodes, ej2_base_6.selectAll('.' + COLLAPSIBLE, this.element));\n\t            for (var i = 0, len = cIcons.length; i < len; i++) {\n\t                var icon = cIcons[i];\n\t                var liEle = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                this.collapseNode(liEle, icon, null);\n\t            }\n\t        };\n\t        TreeView.prototype.expandByLevel = function (element, level, excludeHiddenNodes) {\n\t            if (level > 0 && !ej2_base_7.isNullOrUndefined(element)) {\n\t                var eNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n\t                for (var i = 0, len = eNodes.length; i < len; i++) {\n\t                    var liEle = eNodes[i];\n\t                    var icon = ej2_base_6.select('.' + EXPANDABLE, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                    if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                        this.expandAction(liEle, icon, null);\n\t                    }\n\t                    this.expandByLevel(ej2_base_6.select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.expandAllNodes = function (excludeHiddenNodes) {\n\t            var eIcons = this.getVisibleNodes(excludeHiddenNodes, ej2_base_6.selectAll('.' + EXPANDABLE, this.element));\n\t            for (var i = 0, len = eIcons.length; i < len; i++) {\n\t                var icon = eIcons[i];\n\t                var liEle = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                this.expandAction(liEle, icon, null, true);\n\t            }\n\t        };\n\t        TreeView.prototype.getVisibleNodes = function (excludeHiddenNodes, nodes) {\n\t            var vNodes = Array.prototype.slice.call(nodes);\n\t            if (excludeHiddenNodes) {\n\t                for (var i = 0; i < vNodes.length; i++) {\n\t                    if (!ej2_base_6.isVisible(vNodes[i])) {\n\t                        vNodes.splice(i, 1);\n\t                        i--;\n\t                    }\n\t                }\n\t            }\n\t            return vNodes;\n\t        };\n\t        TreeView.prototype.removeNode = function (node) {\n\t            var dragParentUl = ej2_base_6.closest(node, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            ej2_base_6.detach(node);\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            this.updateInstance();\n\t        };\n\t        TreeView.prototype.updateInstance = function () {\n\t            this.updateList();\n\t            this.updateSelectedNodes();\n\t        };\n\t        TreeView.prototype.updateList = function () {\n\t            this.liList = Array.prototype.slice.call(ej2_base_6.selectAll('.' + LISTITEM, this.element));\n\t        };\n\t        TreeView.prototype.updateSelectedNodes = function () {\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t            var sNodes = ej2_base_6.selectAll('.' + ACTIVE, this.element);\n\t            this.selectGivenNodes(sNodes);\n\t        };\n\t        TreeView.prototype.doGivenAction = function (nodes, selector, toExpand) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                var icon = ej2_base_6.select('.' + selector, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                    toExpand ? this.expandAction(liEle, icon, null) : this.collapseNode(liEle, icon, null);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.addGivenNodes = function (nodes, dropLi, index, isRemote) {\n\t            var level = dropLi ? parseFloat(dropLi.getAttribute('aria-level')) + 1 : 1;\n\t            if (isRemote) {\n\t                this.updateMapper(level);\n\t            }\n\t            var li = ej2_lists_1.ListBase.createListItemFromJson(nodes, this.listBaseOption, level);\n\t            var dropUl = dropLi ? this.expandParent(dropLi) : ej2_base_6.select('.' + PARENTITEM, this.element);\n\t            var refNode = dropUl.childNodes[index];\n\t            for (var i = 0; i < li.length; i++) {\n\t                dropUl.insertBefore(li[i], refNode);\n\t            }\n\t            this.finalizeNode(dropUl);\n\t        };\n\t        TreeView.prototype.updateMapper = function (level) {\n\t            var mapper = (level === 1) ? this.fields : this.getChildFields(this.fields, level - 1, 1);\n\t            var prop = this.getActualProperties(mapper);\n\t            this.listBaseOption.fields = prop;\n\t            this.listBaseOption.fields.url = prop.navigateUrl;\n\t        };\n\t        TreeView.prototype.doDisableAction = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                liEle.setAttribute('aria-disabled', 'true');\n\t                ej2_base_6.addClass([liEle], DISABLE);\n\t            }\n\t        };\n\t        TreeView.prototype.doEnableAction = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                liEle.removeAttribute('aria-disabled');\n\t                ej2_base_6.removeClass([liEle], DISABLE);\n\t            }\n\t        };\n\t        TreeView.prototype.wireInputEvents = function (inpEle) {\n\t            ej2_base_3.EventHandler.add(inpEle, 'blur', this.inputFocusOut, this);\n\t        };\n\t        TreeView.prototype.wireEditingEvents = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_1 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    this.touchEditObj = new ej2_base_7.Touch(this.element, {\n\t                        doubleTap: function (e) {\n\t                            e.originalEvent.preventDefault();\n\t                            proxy_1.editingHandler(e.originalEvent);\n\t                        }\n\t                    });\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, 'dblclick', this.editingHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchEditObj) {\n\t                    this.touchEditObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, 'dblclick', this.editingHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.wireClickEvent = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_2 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    this.touchClickObj = new ej2_base_7.Touch(this.element, {\n\t                        tap: function (e) {\n\t                            proxy_2.clickHandler(e.originalEvent);\n\t                        }\n\t                    });\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchClickObj) {\n\t                    this.touchClickObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.wireExpandOnEvent = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_3 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    if (this.expandOnType === 'click') {\n\t                        this.touchExpandObj = new ej2_base_7.Touch(this.element, {\n\t                            tap: function (e) {\n\t                                proxy_3.expandHandler(e.originalEvent);\n\t                            }\n\t                        });\n\t                    }\n\t                    else {\n\t                        this.touchExpandObj = new ej2_base_7.Touch(this.element, {\n\t                            doubleTap: function (e) {\n\t                                proxy_3.expandHandler(e.originalEvent);\n\t                            }\n\t                        });\n\t                    }\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, this.expandOnType, this.expandHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchExpandObj) {\n\t                    this.touchExpandObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, this.expandOnType, this.expandHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.mouseDownHandler = function (e) {\n\t            this.mouseDownStatus = true;\n\t            if (e.ctrlKey && this.allowMultiSelection) {\n\t                ej2_base_3.EventHandler.add(this.element, 'contextmenu ', this.preventContextMenu, this);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.preventContextMenu = function (e) {\n\t            e.preventDefault();\n\t        };\n\t        TreeView.prototype.wireEvents = function () {\n\t            ej2_base_3.EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);\n\t            this.wireClickEvent(true);\n\t            this.wireExpandOnEvent(true);\n\t            ej2_base_3.EventHandler.add(this.element, 'focus', this.focusIn, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'blur', this.focusOut, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'mouseover', this.onMouseOver, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'mouseout', this.onMouseLeave, this);\n\t            this.keyboardModule = new ej2_base_3.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown',\n\t            });\n\t        };\n\t        TreeView.prototype.unWireEvents = function () {\n\t            ej2_base_3.EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);\n\t            this.wireClickEvent(false);\n\t            this.wireExpandOnEvent(false);\n\t            ej2_base_3.EventHandler.remove(this.element, 'focus', this.focusIn);\n\t            ej2_base_3.EventHandler.remove(this.element, 'blur', this.focusOut);\n\t            ej2_base_3.EventHandler.remove(this.element, 'mouseover', this.onMouseOver);\n\t            ej2_base_3.EventHandler.remove(this.element, 'mouseout', this.onMouseLeave);\n\t            this.keyboardModule.destroy();\n\t        };\n\t        TreeView.prototype.parents = function (element, selector) {\n\t            var matched = [];\n\t            var el = element.parentNode;\n\t            while (!ej2_base_7.isNullOrUndefined(el)) {\n\t                if (ej2_base_6.matches(el, selector)) {\n\t                    matched.push(el);\n\t                }\n\t                el = el.parentNode;\n\t            }\n\t            return matched;\n\t        };\n\t        TreeView.prototype.isDescendant = function (parent, child) {\n\t            var node = child.parentNode;\n\t            while (!ej2_base_7.isNullOrUndefined(node)) {\n\t                if (node === parent) {\n\t                    return true;\n\t                }\n\t                node = node.parentNode;\n\t            }\n\t            return false;\n\t        };\n\t        TreeView.prototype.setCheckedNodes = function (nodes) {\n\t            nodes = JSON.parse(JSON.stringify(nodes));\n\t            this.uncheckAll();\n\t            if (nodes.length > 0) {\n\t                this.checkAll(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowDragAndDrop':\n\t                        this.setDragAndDrop(this.allowDragAndDrop);\n\t                        break;\n\t                    case 'allowEditing':\n\t                        this.wireEditingEvents(this.allowEditing);\n\t                        break;\n\t                    case 'allowMultiSelection':\n\t                        if (this.selectedNodes.length > 1) {\n\t                            var sNode = this.getElement(this.selectedNodes[0]);\n\t                            this.isLoaded = false;\n\t                            this.removeSelectAll();\n\t                            this.selectNode(sNode, null);\n\t                            this.isLoaded = true;\n\t                        }\n\t                        this.setTouchPopup(this.allowMultiSelection);\n\t                        this.setMultiSelect(this.allowMultiSelection);\n\t                        this.addMultiSelect(this.allowMultiSelection);\n\t                        break;\n\t                    case 'checkedNodes':\n\t                        if (this.showCheckBox) {\n\t                            this.checkedNodes = oldProp.checkedNodes;\n\t                            this.setCheckedNodes(newProp.checkedNodes);\n\t                        }\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCssClass(oldProp.cssClass, newProp.cssClass);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setEnableRtl();\n\t                        break;\n\t                    case 'expandOn':\n\t                        this.wireExpandOnEvent(false);\n\t                        this.setExpandOnType();\n\t                        this.wireExpandOnEvent(true);\n\t                        break;\n\t                    case 'fields':\n\t                        this.listBaseOption.fields = this.fields.properties;\n\t                        this.listBaseOption.fields.url = this.fields.navigateUrl;\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'fullRowSelect':\n\t                        this.setFullRow(this.fullRowSelect);\n\t                        this.addFullRow(this.fullRowSelect);\n\t                        break;\n\t                    case 'nodeTemplate':\n\t                        this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'selectedNodes':\n\t                        this.removeSelectAll();\n\t                        this.setProperties({ selectedNodes: newProp.selectedNodes }, true);\n\t                        this.doSelectionAction();\n\t                        break;\n\t                    case 'showCheckBox':\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'sortOrder':\n\t                        this.reRenderNodes();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.destroy = function () {\n\t            this.element.removeAttribute('role');\n\t            this.unWireEvents();\n\t            this.wireEditingEvents(false);\n\t            this.rippleFn();\n\t            this.rippleIconFn();\n\t            this.setCssClass(this.cssClass, null);\n\t            this.setDragAndDrop(false);\n\t            this.setFullRow(false);\n\t            this.setTouchPopup(false);\n\t            this.setMultiSelect(false);\n\t            this.element.innerHTML = '';\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        TreeView.prototype.addNodes = function (nodes, target, index) {\n\t            if (ej2_base_7.isNullOrUndefined(nodes)) {\n\t                return;\n\t            }\n\t            var dropLi = this.getElement(target);\n\t            nodes = this.getSortedData(nodes);\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                this.addGivenNodes(nodes, dropLi, index, true);\n\t            }\n\t            else if (this.dataType === 2) {\n\t                this.addGivenNodes(nodes, dropLi, index);\n\t            }\n\t            else {\n\t                if (dropLi) {\n\t                    this.addGivenNodes(nodes, dropLi, index);\n\t                }\n\t                else {\n\t                    for (var i = 0; i < nodes.length; i++) {\n\t                        var pid = nodes[i][this.fields.parentID];\n\t                        dropLi = pid ? this.getElement(pid.toString()) : pid;\n\t                        this.addGivenNodes([nodes[i]], dropLi, index);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.checkAll = function (nodes) {\n\t            if (this.showCheckBox) {\n\t                this.doCheckBoxAction(nodes, true);\n\t            }\n\t        };\n\t        TreeView.prototype.collapseAll = function (nodes, level, excludeHiddenNodes) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doGivenAction(nodes, COLLAPSIBLE, false);\n\t            }\n\t            else {\n\t                if (level > 0) {\n\t                    this.collapseByLevel(ej2_base_6.select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n\t                }\n\t                else {\n\t                    this.collapseAllNodes(excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.disableNodes = function (nodes) {\n\t            if (ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doDisableAction(this.selectedNodes);\n\t            }\n\t            else {\n\t                this.doDisableAction(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.enableAll = function (nodes) {\n\t            if (ej2_base_7.isNullOrUndefined(nodes)) {\n\t                var liEle = ej2_base_6.selectAll('.' + DISABLE, this.element);\n\t                for (var _i = 0, liEle_1 = liEle; _i < liEle_1.length; _i++) {\n\t                    var ele = liEle_1[_i];\n\t                    ele.removeAttribute('aria-disabled');\n\t                }\n\t                ej2_base_6.removeClass(liEle, DISABLE);\n\t            }\n\t            else {\n\t                this.doEnableAction(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.ensureVisible = function (node) {\n\t            var liEle = this.getElement(node);\n\t            if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                return;\n\t            }\n\t            var parents = this.parents(liEle, '.' + LISTITEM);\n\t            this.expandAll(parents);\n\t            setTimeout(function () { liEle.scrollIntoView(true); }, 450);\n\t        };\n\t        TreeView.prototype.expandAll = function (nodes, level, excludeHiddenNodes) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doGivenAction(nodes, EXPANDABLE, true);\n\t            }\n\t            else {\n\t                if (level > 0) {\n\t                    this.expandByLevel(ej2_base_6.select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n\t                }\n\t                else {\n\t                    this.expandAllNodes(excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.getNode = function (node) {\n\t            return this.getElement(node);\n\t        };\n\t        TreeView.prototype.getNodeDetails = function (node) {\n\t            var ele = this.getElement(node);\n\t            return this.getNodeData(ele);\n\t        };\n\t        TreeView.prototype.moveNodes = function (sourceNodes, target, index) {\n\t            var dropLi = this.getElement(target);\n\t            if (ej2_base_7.isNullOrUndefined(dropLi)) {\n\t                return;\n\t            }\n\t            for (var i = 0; i < sourceNodes.length; i++) {\n\t                var dragLi = this.getElement(sourceNodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(dragLi) || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n\t                    continue;\n\t                }\n\t                this.dropAsChildNode(dragLi, dropLi, this, index);\n\t            }\n\t        };\n\t        TreeView.prototype.removeNodes = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                this.removeNode(liEle);\n\t            }\n\t        };\n\t        TreeView.prototype.replaceText = function (target, newText) {\n\t            if (ej2_base_7.isNullOrUndefined(target) || ej2_base_7.isNullOrUndefined(newText) || !this.allowEditing) {\n\t                return;\n\t            }\n\t            var liEle = this.getElement(target);\n\t            if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                return;\n\t            }\n\t            var txtEle = ej2_base_6.select('.' + LISTTEXT, liEle);\n\t            txtEle.childNodes[0].nodeValue = newText;\n\t        };\n\t        TreeView.prototype.uncheckAll = function (nodes) {\n\t            if (this.showCheckBox) {\n\t                this.doCheckBoxAction(nodes, false);\n\t            }\n\t        };\n\t        return TreeView;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowMultiSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({}, NodeAnimationSettings)\n\t    ], TreeView.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"checkedNodes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('')\n\t    ], TreeView.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('auto')\n\t    ], TreeView.prototype, \"expandOn\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({}, FieldsSettings)\n\t    ], TreeView.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(true)\n\t    ], TreeView.prototype, \"fullRowSelect\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"nodeTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"selectedNodes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('None')\n\t    ], TreeView.prototype, \"sortOrder\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"showCheckBox\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"drawNode\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"keyPress\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeChecked\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeChecking\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeClicked\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeCollapsed\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeCollapsing\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragging\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragStop\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDropped\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeEdited\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeExpanded\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeExpanding\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeSelecting\", void 0);\n\t    TreeView = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], TreeView);\n\t    exports.TreeView = TreeView;\n\t    exports.treeViewHelper = ej2_base_1.CreateBuilder(TreeView);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_17__;\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA5OTNkNWNiOWVjOTRiZjJkMzEyYiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2gtc2Nyb2xsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xiYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xiYXIvdG9vbGJhci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3JkaW9uL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9hY2NvcmRpb24vYWNjb3JkaW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb250ZXh0LW1lbnUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRleHQtbWVudS9jb250ZXh0LW1lbnUuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWxpc3RzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RhYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGFiL3RhYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdHJlZXZpZXcvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyZWV2aWV3L3RyZWV2aWV3LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFrQyxpQ0FBaUM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBa0MsaUNBQWlDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBcUMsbUNBQW1DO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQSxtQ0FBa0MsaUNBQWlDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCwrQkFBK0I7QUFDdEY7QUFDQTtBQUNBO0FBQ0EsNERBQTJELHdDQUF3QztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBbUUs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QTBDO0FBQ2hGO0FBQ0Esb0RBQW1ELDZDQUE2QztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Qsc0JBQXNCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsZ0JBQWdCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELGdEQUFnRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0Usa0RBQWtEO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7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QixTQUFTO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBLDREQUEyRCwwQkFBMEI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTBELG9FQUFvRTtBQUM5SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Qsc0JBQXNCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLCtEQUE4RCwyQkFBMkI7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFpRSwyQkFBMkI7QUFDNUYsOERBQTZELHVDQUF1QztBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELHdGQUF3RjtBQUNuSiw2Q0FBNEMsd0JBQXdCO0FBQ3BFLHdEQUF1RCx1QkFBdUI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RCxrQ0FBa0M7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQW9FLG1EQUFtRDtBQUN2SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELGlEQUFpRDtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQW9FLHFEQUFxRDtBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQW9DLGVBQWU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsa0JBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBcUMsZ0JBQWdCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWdFLFNBQVM7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUFzRSxvQkFBb0I7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxvQkFBb0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBLG9DQUFtQyxvQkFBb0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELGdCQUFnQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0UsOENBQThDO0FBQ2xIO0FBQ0E7QUFDQSxxRUFBb0UsZ0RBQWdEO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxvQkFBb0I7QUFDeEQsZ0NBQStCLGtCQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxnQkFBZ0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELFlBQVk7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQsWUFBWTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQW9ELFNBQVM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF3QyxlQUFlO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsMEJBQTBCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQyxvQkFBb0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QjtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxxQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDLG9CQUFvQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNEQsMENBQTBDLHNCQUFzQixFQUFFO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLFdBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0UscUNBQXFDO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLG1FQUFrRSxzQkFBc0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0EsdUVBQXNFLDZDQUE2QztBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUFzRSxxQkFBcUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUFzRSxxQkFBcUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQixtQkFBbUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTBELHFCQUFxQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQixTQUFTO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLFNBQVM7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTBELHFCQUFxQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW1ELHNCQUFzQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBbUQsc0JBQXNCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBb0QsU0FBUztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRCxTQUFTO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsU0FBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLG1CQUFtQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDLG9CQUFvQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUErQyxTQUFTO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixlQUFlO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0MsU0FBUztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0MsU0FBUztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbGlzdHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1saXN0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1saXN0c1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWxpc3RzXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWRhdGFcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE3X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgOTkzZDVjYjllYzk0YmYyZDMxMmIiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbW1vbi9pbmRleFwiLCBcIi4vdG9vbGJhci9pbmRleFwiLCBcIi4vYWNjb3JkaW9uL2luZGV4XCIsIFwiLi9jb250ZXh0LW1lbnUvaW5kZXhcIiwgXCIuL3RhYi9pbmRleFwiLCBcIi4vdHJlZXZpZXcvaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yLCBpbmRleF8zLCBpbmRleF80LCBpbmRleF81LCBpbmRleF82KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbiAgICBfX2V4cG9ydChpbmRleF8zKTtcbiAgICBfX2V4cG9ydChpbmRleF80KTtcbiAgICBfX2V4cG9ydChpbmRleF81KTtcbiAgICBfX2V4cG9ydChpbmRleF82KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9oLXNjcm9sbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhfc2Nyb2xsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGhfc2Nyb2xsXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ0xTX1JPT1QgPSAnZS1oc2Nyb2xsJztcbiAgICB2YXIgQ0xTX1JUTCA9ICdlLXJ0bCc7XG4gICAgdmFyIENMU19ESVNBQkxFID0gJ2Utb3ZlcmxheSc7XG4gICAgdmFyIENMU19IU0NST0xMQkFSID0gJ2UtaHNjcm9sbC1iYXInO1xuICAgIHZhciBDTFNfSFNDUk9MTENPTiA9ICdlLWhzY3JvbGwtY29udGVudCc7XG4gICAgdmFyIENMU19OQVZBUlJPVyA9ICdlLW5hdi1hcnJvdyc7XG4gICAgdmFyIENMU19OQVZSSUdIVEFSUk9XID0gJ2UtbmF2LXJpZ2h0LWFycm93JztcbiAgICB2YXIgQ0xTX05BVkxFRlRBUlJPVyA9ICdlLW5hdi1sZWZ0LWFycm93JztcbiAgICB2YXIgQ0xTX0hTQ1JPTExOQVYgPSAnZS1zY3JvbGwtbmF2JztcbiAgICB2YXIgQ0xTX0hTQ1JPTExOQVZSSUdIVCA9ICdlLXNjcm9sbC1yaWdodC1uYXYnO1xuICAgIHZhciBDTFNfSFNDUk9MTE5BVkxFRlQgPSAnZS1zY3JvbGwtbGVmdC1uYXYnO1xuICAgIHZhciBDTFNfREVWSUNFID0gJ2Utc2Nyb2xsLWRldmljZSc7XG4gICAgdmFyIEhTY3JvbGwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSFNjcm9sbCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSFNjcm9sbChvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmJyb3dzZXIgPSBlajJfYmFzZV8yLkJyb3dzZXIuaW5mby5uYW1lO1xuICAgICAgICAgICAgdGhpcy5icm93c2VyQ2hlY2sgPSB0aGlzLmJyb3dzZXIgPT09ICdtb3ppbGxhJztcbiAgICAgICAgICAgIHRoaXMuaXNEZXZpY2UgPSBlajJfYmFzZV8yLkJyb3dzZXIuaXNEZXZpY2U7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMuaWVDaGVjayA9IHRoaXMuYnJvd3NlciA9PT0gJ2VkZ2UnIHx8IHRoaXMuYnJvd3NlciA9PT0gJ21zaWUnO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5pZCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlkID0gZWoyX2Jhc2VfMS5nZXRVbmlxdWVJRCgnaHNjcm9sbCcpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5pcXVlSWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG5ldyBlajJfYmFzZV8xLlRvdWNoKHRoaXMuZWxlbWVudCwgeyBzY3JvbGw6IHRoaXMudG91Y2hIYW5kbGVyLmJpbmQodGhpcykgfSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU5hdkljb24odGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zY3JvbGxFbGUsICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xTX0RFVklDRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0hTQ1JPTExDT04gfSk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0hTQ1JPTExCQVIgfSk7XG4gICAgICAgICAgICBzY3JvbGxEaXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZSA9IFtdLnNsaWNlLmNhbGwoZWxlLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaW5uZXJFbGVfMSA9IGlubmVyRWxlOyBfaSA8IGlubmVyRWxlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZV8xID0gaW5uZXJFbGVfMVtfaV07XG4gICAgICAgICAgICAgICAgc2Nyb2xsRWxlLmFwcGVuZENoaWxkKGVsZV8xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjcm9sbERpdi5hcHBlbmRDaGlsZChzY3JvbGxFbGUpO1xuICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKHNjcm9sbERpdik7XG4gICAgICAgICAgICBzY3JvbGxEaXYuc3R5bGUub3ZlcmZsb3dYID0gJ2hpZGRlbic7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEVsZSA9IHNjcm9sbERpdjtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSXRlbXMgPSBzY3JvbGxFbGU7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsnc2Nyb2xsU3RlcCddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2hTY3JvbGwnO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIGVsZS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfUk9PVCk7XG4gICAgICAgICAgICB2YXIgbmF2ID0gZWoyX2Jhc2VfMS5zZWxlY3RBbGwoJyMnICsgZWxlLmlkICsgJ19uYXYuZS0nICsgZWxlLmlkICsgJ19uYXYnKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBbXS5zbGljZS5jYWxsKHRoaXMuc2Nyb2xsSXRlbXMuY2hpbGRyZW4pOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnVuaXF1ZUlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHRoaXMuc2Nyb2xsRWxlKTtcbiAgICAgICAgICAgIGlmIChuYXYubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKG5hdlswXSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2gobmF2WzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNjcm9sbEVsZSwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUgPSBudWxsO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmNyZWF0ZU5hdkljb24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGlkID0gZWxlbWVudC5pZC5jb25jYXQoJ19uYXYnKTtcbiAgICAgICAgICAgIHZhciBjbHNSaWdodCA9ICdlLScgKyBlbGVtZW50LmlkLmNvbmNhdCgnX25hdiAnICsgQ0xTX0hTQ1JPTExOQVYgKyAnICcgKyBDTFNfSFNDUk9MTE5BVlJJR0hUKTtcbiAgICAgICAgICAgIHZhciBuYXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IGlkLCBjbGFzc05hbWU6IGNsc1JpZ2h0IH0pO1xuICAgICAgICAgICAgbmF2LnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgdmFyIG5hdkl0ZW0gPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfTkFWUklHSFRBUlJPVyArICcgJyArIENMU19OQVZBUlJPVyArICcgZS1pY29ucycgfSk7XG4gICAgICAgICAgICB2YXIgY2xzTGVmdCA9ICdlLScgKyBlbGVtZW50LmlkLmNvbmNhdCgnX25hdiAnICsgQ0xTX0hTQ1JPTExOQVYgKyAnICcgKyBDTFNfSFNDUk9MTE5BVkxFRlQpO1xuICAgICAgICAgICAgdmFyIG5hdkVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogaWQsIGNsYXNzTmFtZTogY2xzTGVmdCArICcgJyArIENMU19ESVNBQkxFIH0pO1xuICAgICAgICAgICAgbmF2RWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB2YXIgbmF2TGVmdEl0ZW0gPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfTkFWTEVGVEFSUk9XICsgJyAnICsgQ0xTX05BVkFSUk9XICsgJyBlLWljb25zJyB9KTtcbiAgICAgICAgICAgIG5hdkVsZS5hcHBlbmRDaGlsZChuYXZMZWZ0SXRlbSk7XG4gICAgICAgICAgICBuYXYuYXBwZW5kQ2hpbGQobmF2SXRlbSk7XG4gICAgICAgICAgICBuYXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG5hdik7XG4gICAgICAgICAgICBlbGVtZW50Lmluc2VydEJlZm9yZShuYXZFbGUsIGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pZUNoZWNrKSB7XG4gICAgICAgICAgICAgICAgbmF2LmNsYXNzTGlzdC5hZGQoJ2UtaWUtYWxpZ24nKTtcbiAgICAgICAgICAgICAgICBuYXZFbGUuY2xhc3NMaXN0LmFkZCgnZS1pZS1hbGlnbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ldmVudEJpbmRpbmcoW25hdiwgbmF2RWxlXSk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0RnVuXzEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmtleVRpbWVvdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbGVTY3JvbGxpbmcoMTAsIGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMua2V5VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRGdW5fMSgpO1xuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLm9uS2V5VXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5ICE9PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMua2V5VGltZW91dCkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5VGltZW91dCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmtleVRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuZXZlbnRCaW5kaW5nID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGVsZS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIG5ldyBlajJfYmFzZV8xLlRvdWNoKGVsLCB7IHRhcEhvbGQ6IF90aGlzLnRhYkhvbGRIYW5kbGVyLmJpbmQoX3RoaXMpLCB0YXBIb2xkVGhyZXNob2xkOiA1MDAgfSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIF90aGlzLm9uS2V5UHJlc3MuYmluZChfdGhpcykpO1xuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgX3RoaXMub25LZXlVcC5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIF90aGlzLnJlcGVhdFNjcm9sbC5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBfdGhpcy5yZXBlYXRTY3JvbGwuYmluZChfdGhpcykpO1xuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbCwgJ2NsaWNrJywgX3RoaXMuY2xpY2tFdmVudEhhbmRsZXIsIF90aGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5yZXBlYXRTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZW91dCk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnRhYkhvbGRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdHJndCA9IGUub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gICAgICAgICAgICB0cmd0ID0gdGhpcy5jb250YWlucyh0cmd0LCBDTFNfSFNDUk9MTE5BVikgPyB0cmd0LmZpcnN0RWxlbWVudENoaWxkIDogdHJndDtcbiAgICAgICAgICAgIHZhciBzY3JvbGxEaXMgPSAxMDtcbiAgICAgICAgICAgIHZhciB0aW1lb3V0RnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZVNjcm9sbGluZyhzY3JvbGxEaXMsIHRyZ3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudGltZW91dCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGltZW91dEZ1bigpO1xuICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChlbGUsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuZWxlU2Nyb2xsaW5nID0gZnVuY3Rpb24gKHNjcm9sbERpcywgdHJndCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnNjcm9sbEVsZTtcbiAgICAgICAgICAgIHZhciByb290RWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHRyZ3QuY2xhc3NMaXN0O1xuICAgICAgICAgICAgaWYgKGNsYXNzTGlzdC5jb250YWlucyhDTFNfSFNDUk9MTE5BVikpIHtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QgPSB0cmd0LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX05BVkFSUk9XKS5jbGFzc0xpc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb250YWlucyhyb290RWxlLCBDTFNfUlRMKSAmJiB0aGlzLmJyb3dzZXJDaGVjaykge1xuICAgICAgICAgICAgICAgIHNjcm9sbERpcyA9IC1zY3JvbGxEaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2NybExlZnQgPSBlbGVtZW50LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBpZiAoKCF0aGlzLmNvbnRhaW5zKHJvb3RFbGUsIENMU19SVEwpIHx8IHRoaXMuYnJvd3NlckNoZWNrKSB8fCB0aGlzLmllQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKENMU19OQVZSSUdIVEFSUk9XKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBzY3JsTGVmdCArIHNjcm9sbERpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNjcmxMZWZ0IC0gc2Nyb2xsRGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoQ0xTX05BVkxFRlRBUlJPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gc2NybExlZnQgKyBzY3JvbGxEaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBzY3JsTGVmdCAtIHNjcm9sbERpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmNsaWNrRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlU2Nyb2xsaW5nKHRoaXMuc2Nyb2xsU3RlcCwgZS50YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS50b3VjaEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuc2Nyb2xsRWxlO1xuICAgICAgICAgICAgdmFyIGRpc3RhbmNlO1xuICAgICAgICAgICAgZGlzdGFuY2UgPSBlLmRpc3RhbmNlWDtcbiAgICAgICAgICAgIGlmICgodGhpcy5pZUNoZWNrKSAmJiB0aGlzLmNvbnRhaW5zKHRoaXMuZWxlbWVudCwgQ0xTX1JUTCkpIHtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IC1kaXN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnNjcm9sbERpcmVjdGlvbiA9PT0gJ0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgZWxlLnNjcm9sbExlZnQgPSBlbGUuc2Nyb2xsTGVmdCArIGRpc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS5zY3JvbGxEaXJlY3Rpb24gPT09ICdSaWdodCcpIHtcbiAgICAgICAgICAgICAgICBlbGUuc2Nyb2xsTGVmdCA9IGVsZS5zY3JvbGxMZWZ0IC0gZGlzdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmFycm93RGlzYWJsaW5nID0gZnVuY3Rpb24gKGFkZERpc2FibGUsIHJlbW92ZURpc2FibGUpIHtcbiAgICAgICAgICAgIGFkZERpc2FibGUuY2xhc3NMaXN0LmFkZChDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICBhZGREaXNhYmxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBhZGREaXNhYmxlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lb3V0KTtcbiAgICAgICAgICAgIHJlbW92ZURpc2FibGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICByZW1vdmVEaXNhYmxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgcmVtb3ZlRGlzYWJsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIHRoaXMucmVwZWF0U2Nyb2xsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIHJvb3RFbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgbmF2TGVmdEVsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IU0NST0xMTkFWTEVGVCk7XG4gICAgICAgICAgICB2YXIgbmF2UmlnaHRFbGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSFNDUk9MTE5BVlJJR0hUKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsTGVmdCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IC1zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNjcm9sbExlZnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoKCF0aGlzLmNvbnRhaW5zKHJvb3RFbGUsIENMU19SVEwpIHx8IHRoaXMuYnJvd3NlckNoZWNrKSB8fCB0aGlzLmllQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJvd0Rpc2FibGluZyhuYXZMZWZ0RWxlLCBuYXZSaWdodEVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93RGlzYWJsaW5nKG5hdlJpZ2h0RWxlLCBuYXZMZWZ0RWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChNYXRoLmNlaWwod2lkdGggKyBzY3JvbGxMZWZ0ICsgLjEpID49IHRhcmdldC5zY3JvbGxXaWR0aCkge1xuICAgICAgICAgICAgICAgIGlmICgoIXRoaXMuY29udGFpbnMocm9vdEVsZSwgQ0xTX1JUTCkgfHwgdGhpcy5icm93c2VyQ2hlY2spIHx8IHRoaXMuaWVDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93RGlzYWJsaW5nKG5hdlJpZ2h0RWxlLCBuYXZMZWZ0RWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dEaXNhYmxpbmcobmF2TGVmdEVsZSwgbmF2UmlnaHRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBkaXNFbGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgaWYgKGRpc0VsZSkge1xuICAgICAgICAgICAgICAgICAgICBkaXNFbGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc0VsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzRWxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzY3JvbGxTdGVwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcC5lbmFibGVSdGwgPyB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfUlRMKSA6IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMU19SVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSFNjcm9sbDtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoNDApXG4gICAgXSwgSFNjcm9sbC5wcm90b3R5cGUsIFwic2Nyb2xsU3RlcFwiLCB2b2lkIDApO1xuICAgIEhTY3JvbGwgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBIU2Nyb2xsKTtcbiAgICBleHBvcnRzLkhTY3JvbGwgPSBIU2Nyb2xsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vaC1zY3JvbGwuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi90b29sYmFyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdG9vbGJhcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydCh0b29sYmFyXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90b29sYmFyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCIuLi9jb21tb24vaC1zY3JvbGxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCBlajJfcG9wdXBzXzEsIGVqMl9wb3B1cHNfMiwgZWoyX2J1dHRvbnNfMSwgaF9zY3JvbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ0xTX0lURU1TID0gJ2UtdG9vbGJhci1pdGVtcyc7XG4gICAgdmFyIENMU19JVEVNID0gJ2UtdG9vbGJhci1pdGVtJztcbiAgICB2YXIgQ0xTX1JUTCA9ICdlLXJ0bCc7XG4gICAgdmFyIENMU19TRVBBUkFUT1IgPSAnZS1zZXBhcmF0b3InO1xuICAgIHZhciBDTFNfUE9QVVBJQ09OID0gJ2UtcG9wdXAtdXAtaWNvbic7XG4gICAgdmFyIENMU19QT1BVUERPV04gPSAnZS1wb3B1cC1kb3duLWljb24nO1xuICAgIHZhciBDTFNfVEVNUExBVEUgPSAnZS10ZW1wbGF0ZSc7XG4gICAgdmFyIENMU19ESVNBQkxFID0gJ2Utb3ZlcmxheSc7XG4gICAgdmFyIENMU19QT1BVUFRFWFQgPSAnZS10b29sYmFyLXRleHQnO1xuICAgIHZhciBDTFNfVEJBUlRFWFQgPSAnZS1wb3B1cC10ZXh0JztcbiAgICB2YXIgQ0xTX1RCQVJPVkVSRkxPVyA9ICdlLW92ZXJmbG93LXNob3cnO1xuICAgIHZhciBDTFNfUE9QT1ZFUkZMT1cgPSAnZS1vdmVyZmxvdy1oaWRlJztcbiAgICB2YXIgQ0xTX1RCQVJCVE4gPSAnZS10YmFyLWJ0bic7XG4gICAgdmFyIENMU19UQkFSTkFWID0gJ2UtaG9yLW5hdic7XG4gICAgdmFyIENMU19UQkFSU0NSTE5BViA9ICdlLXNjcm9sbC1uYXYnO1xuICAgIHZhciBDTFNfVEJBUlJJR0hUID0gJ2UtdG9vbGJhci1yaWdodCc7XG4gICAgdmFyIENMU19UQkFSTEVGVCA9ICdlLXRvb2xiYXItbGVmdCc7XG4gICAgdmFyIENMU19UQkFSQ0VOVEVSID0gJ2UtdG9vbGJhci1jZW50ZXInO1xuICAgIHZhciBDTFNfVEJBUlBPUyA9ICdlLXRiYXItcG9zJztcbiAgICB2YXIgQ0xTX1RCQVJTQ1JPTEwgPSAnZS1oc2Nyb2xsLWNvbnRlbnQnO1xuICAgIHZhciBDTFNfUE9QVVBOQVYgPSAnZS1ob3ItbmF2JztcbiAgICB2YXIgQ0xTX1BPUFVQQ0xBU1MgPSAnZS10b29sYmFyLXBvcCc7XG4gICAgdmFyIENMU19QT1BVUCA9ICdlLXRvb2xiYXItcG9wdXAnO1xuICAgIHZhciBDTFNfVEJBUkJUTlRFWFQgPSAnZS10YmFyLWJ0bi10ZXh0JztcbiAgICB2YXIgQ0xTX1RCQVJOQVZBQ1QgPSAnZS1uYXYtYWN0aXZlJztcbiAgICB2YXIgQ0xTX1RCQVJJR05PUkUgPSAnZS1pZ25vcmUnO1xuICAgIHZhciBJdGVtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEl0ZW0sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEl0ZW0oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEl0ZW07XG4gICAgfShlajJfYmFzZV81LkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInByZWZpeEljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJzdWZmaXhJY29uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ05vbmUnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcIm92ZXJmbG93XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQnV0dG9uJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0JvdGgnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInNob3dUZXh0T25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcImh0bWxBdHRyaWJ1dGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwidG9vbHRpcFRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnbGVmdCcpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwiYWxpZ25cIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkl0ZW0gPSBJdGVtO1xuICAgIHZhciBUb29sYmFyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRvb2xiYXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRvb2xiYXIob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmtleUNvbmZpZ3MgPSB7XG4gICAgICAgICAgICAgICAgbW92ZUxlZnQ6ICdsZWZ0YXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVSaWdodDogJ3JpZ2h0YXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVVcDogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVEb3duOiAnZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBwb3B1cE9wZW46ICdlbnRlcicsXG4gICAgICAgICAgICAgICAgcG9wdXBDbG9zZTogJ2VzY2FwZScsXG4gICAgICAgICAgICAgICAgdGFiOiAndGFiJyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgd2hpbGUgKGVsZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgZWxlLnJlbW92ZUNoaWxkKGVsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRyZ3RFbGUpIHtcbiAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQodGhpcy5jdHJsVGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJQcm9wZXJ0eSgpO1xuICAgICAgICAgICAgdGhpcy5wb3BPYmogPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhpcy5lbGVtZW50LCAnZS10b29scG9wJyk7XG4gICAgICAgICAgICBlbGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgWydhcmlhLWRpc2FibGVkJywgJ2FyaWEtb3JpZW50YXRpb24nLCAnYXJpYS1oYXNwb3B1cCcsICdyb2xlJ10uZm9yRWFjaChmdW5jdGlvbiAoYXR0cmIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyYik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVDcmVhdGUnKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucG9wT2JqID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuZWxlbWVudCwgQ0xTX1JUTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmtleU1vZHVsZSA9IG5ldyBlajJfYmFzZV8yLktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlBY3Rpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczogdGhpcy5rZXlDb25maWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgdGhpcy5kb2NLZXlEb3duLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgJzAnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZG9jS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA5ICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ob3ItbmF2JykgPT09IHRydWUgJiYgZWoyX2Jhc2VfMi5pc1Zpc2libGUodGhpcy5wb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcE9iai5oaWRlKHsgbmFtZTogJ1NsaWRlVXAnLCBkdXJhdGlvbjogMTAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGtleUNoZWNrID0gKGUua2V5Q29kZSA9PT0gNDAgfHwgZS5rZXlDb2RlID09PSAzOCB8fCBlLmtleUNvZGUgPT09IDM1IHx8IGUua2V5Q29kZSA9PT0gMzYpO1xuICAgICAgICAgICAgaWYgKGtleUNoZWNrKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lIU2Nyb2xsKCk7XG4gICAgICAgICAgICB0aGlzLmtleU1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLmRvY0V2ZW50KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgdGhpcy5kb2NLZXlEb3duKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5kb2NFdmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNsZWFyUHJvcGVydHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRiYXJFbGUgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudGJhckFsZ0VsZSA9IHsgbGVmdHM6IFtdLCBjZW50ZXJzOiBbXSwgcmlnaHRzOiBbXSB9O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kb2NFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcG9wRWxlID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtcG9wdXAnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaiAmJiBlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSAmJiAhcG9wRWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouaGlkZSh7IG5hbWU6ICdTbGlkZVVwJywgZHVyYXRpb246IDEwMCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZGVzdHJveUhTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5zY3JvbGxNb2R1bGUuZWxlbWVudCwgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIENMU19JVEVNKSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaChlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJQcm9wZXJ0eSgpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95TW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRoaXMuc2Nyb2xsTW9kdWxlLmVsZW1lbnQsIENMU19SVEwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUhTY3JvbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBSZWZyZXNoKHRoaXMucG9wT2JqLmVsZW1lbnQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZWxlLCB2YWwpIHtcbiAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKHZhbCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlbGUsIHZhbCkge1xuICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUodmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZWxlbWVudEZvY3VzID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIGZDaGlsZCA9IGVsZS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmIChmQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICBmQ2hpbGQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZVN3aXRjaChlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNsc3RFbGVtZW50ID0gZnVuY3Rpb24gKHRick5hdkNoaywgdHJndCkge1xuICAgICAgICAgICAgdmFyIGNsc3Q7XG4gICAgICAgICAgICBpZiAodGJyTmF2Q2hrICYmIHRoaXMucG9wT2JqICYmIGVqMl9iYXNlXzIuaXNWaXNpYmxlKHRoaXMucG9wT2JqLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgY2xzdCA9IHRoaXMucG9wT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmVsZW1lbnQgPT09IHRyZ3QgfHwgdGJyTmF2Q2hrKSB7XG4gICAgICAgICAgICAgICAgY2xzdCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsc3Q7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmtleUhhbmRsaW5nID0gZnVuY3Rpb24gKGNsc3QsIGUsIHRyZ3QsIG5hdkNoaywgc2Nyb2xsQ2hrKSB7XG4gICAgICAgICAgICB2YXIgcG9wT2JqID0gdGhpcy5wb3BPYmo7XG4gICAgICAgICAgICB2YXIgcm9vdEVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBwb3BBbmltYXRlID0geyBuYW1lOiAnU2xpZGVVcCcsIGR1cmF0aW9uOiAxMDAgfTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlUmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdEVsZSA9PT0gdHJndCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Rm9jdXMoY2xzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIW5hdkNoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhjbHN0LCAnbmV4dCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYXZDaGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoY2xzdCwgJ3ByZXZpb3VzJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwQ2hlY2sgPSBlajJfYmFzZV8yLmNsb3Nlc3QoY2xzdCwgJy5lLXBvcHVwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9wdXBDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlcyA9IHBvcHVwQ2hlY2suY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUgPSBub2Rlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZSA9IG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBDTFNfSVRFTVMgKyAnIC4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZSA9IG5vZGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlID0gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudEZvY3VzKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVVwJzpcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlRG93bic6XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGUuYWN0aW9uID09PSAnbW92ZVVwJyA/ICdwcmV2aW91cycgOiAnbmV4dCc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3BPYmogJiYgZWoyX2Jhc2VfMi5jbG9zZXN0KHRyZ3QsICcuZS1wb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9wRWxlID0gcG9wT2JqLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9wRnJzdEVsZSA9IHBvcEVsZS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgPT09ICdwcmV2aW91cycgJiYgcG9wRnJzdEVsZSA9PT0gY2xzdCkgfHwgKHZhbHVlID09PSAnbmV4dCcgJiYgcG9wRWxlLmxhc3RFbGVtZW50Q2hpbGQgPT09IGNsc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhjbHN0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdtb3ZlRG93bicgJiYgcG9wT2JqICYmIGVqMl9iYXNlXzIuaXNWaXNpYmxlKHBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Rm9jdXMoY2xzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGFiJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzY3JvbGxDaGsgJiYgIW5hdkNoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZV8xID0gY2xzdC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb290RWxlID09PSB0cmd0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZVJlbW92ZShlbGVfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZV8xLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncG9wdXBDbG9zZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3BPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcE9iai5oaWRlKHBvcEFuaW1hdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BvcHVwT3Blbic6XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmF2Q2hrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcE9iaiAmJiAhZWoyX2Jhc2VfMi5pc1Zpc2libGUocG9wT2JqLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3BPYmouZWxlbWVudC5zdHlsZS50b3AgPSByb290RWxlLm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3BPYmouc2hvdyh7IG5hbWU6ICdTbGlkZURvd24nLCBkdXJhdGlvbjogMTAwIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wT2JqLmhpZGUocG9wQW5pbWF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmtleUFjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGNsc3Q7XG4gICAgICAgICAgICB2YXIgdHJndCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHRick5hdkNoayA9IHRyZ3QuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIHZhciB0YmFyU2Nyb2xsQ2hrID0gdHJndC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJTQ1JMTkFWKTtcbiAgICAgICAgICAgIGNsc3QgPSB0aGlzLmNsc3RFbGVtZW50KHRick5hdkNoaywgdHJndCk7XG4gICAgICAgICAgICBpZiAoY2xzdCB8fCB0YmFyU2Nyb2xsQ2hrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlIYW5kbGluZyhjbHN0LCBlLCB0cmd0LCB0YnJOYXZDaGssIHRiYXJTY3JvbGxDaGspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5lbGVGb2N1cyA9IGZ1bmN0aW9uIChjbG9zZXN0LCBwb3MpIHtcbiAgICAgICAgICAgIHZhciBzaWIgPSBPYmplY3QoY2xvc2VzdClbcG9zICsgJ0VsZW1lbnRTaWJsaW5nJ107XG4gICAgICAgICAgICB2YXIgY29udGFpbnMgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpIHx8IGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHNpYikge1xuICAgICAgICAgICAgICAgIHZhciBza2lwRWxlID0gY29udGFpbnMoc2liKTtcbiAgICAgICAgICAgICAgICBpZiAoc2tpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0KHNpYilbcG9zICsgJ1NpYmxpbmcnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2liID0gT2JqZWN0KHNpYilbcG9zICsgJ1NpYmxpbmcnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBFbGUgPSBjb250YWlucyhzaWIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNraXBFbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZUZvY3VzKHNpYiwgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Rm9jdXMoc2liKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBPYmplY3QoY2xvc2VzdC5wYXJlbnRFbGVtZW50KVtwb3MgKyAnRWxlbWVudFNpYmxpbmcnXTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWxlbSkgJiYgZWxlbS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbSA9IE9iamVjdChlbGVtKVtwb3MgKyAnRWxlbWVudFNpYmxpbmcnXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW0pICYmIGVsZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID09PSAnbmV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbnMoZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhlbCwgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmZpcnN0RWxlbWVudENoaWxkLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVTd2l0Y2goZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbS5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5zKGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoZWwsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRGb2N1cyhlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdHJndCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNsc0xpc3QgPSB0cmd0LmNsYXNzTGlzdDtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaXNQb3B1cEVsZW1lbnQgPSAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX1BPUFVQQ0xBU1MpKTtcbiAgICAgICAgICAgIHZhciBwb3B1cE5hdiA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0cmd0LCAoJy4nICsgQ0xTX1RCQVJOQVYpKTtcbiAgICAgICAgICAgIGlmICghcG9wdXBOYXYpIHtcbiAgICAgICAgICAgICAgICBwb3B1cE5hdiA9IHRyZ3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVsZS5jaGlsZHJlblswXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaHNjcm9sbCcpICYmIChjbHNMaXN0LmNvbnRhaW5zKENMU19UQkFSTkFWKSkpIHtcbiAgICAgICAgICAgICAgICBjbHNMaXN0ID0gdHJndC5xdWVyeVNlbGVjdG9yKCcuZS1pY29ucycpLmNsYXNzTGlzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbHNMaXN0LmNvbnRhaW5zKENMU19QT1BVUElDT04pIHx8IGNsc0xpc3QuY29udGFpbnMoQ0xTX1BPUFVQRE9XTikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwQ2xpY2tIYW5kbGVyKGVsZSwgcG9wdXBOYXYsIENMU19SVEwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGl0ZW1PYmo7XG4gICAgICAgICAgICB2YXIgY2xzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgaWYgKChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGNsc3QpIHx8IGNsc3QuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19ESVNBQkxFKSkgJiYgIXBvcHVwTmF2LmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk5BVikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2xzdCkge1xuICAgICAgICAgICAgICAgIGl0ZW1PYmogPSB0aGlzLml0ZW1zW3RoaXMudGJhckVsZS5pbmRleE9mKGNsc3QpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7IG9yaWdpbmFsRXZlbnQ6IGUsIGl0ZW06IGl0ZW1PYmogfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xpY2tlZCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICBpZiAoaXNQb3B1cEVsZW1lbnQgJiYgIWV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcE9iai5oaWRlKHsgbmFtZTogJ1NsaWRlVXAnLCBkdXJhdGlvbjogMTAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGVsZSwgcG9wdXBOYXYsIENMU19SVEwpIHtcbiAgICAgICAgICAgIHZhciBwb3BPYmogPSB0aGlzLnBvcE9iajtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzVmlzaWJsZShwb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBwb3B1cE5hdi5jbGFzc0xpc3QucmVtb3ZlKENMU19UQkFSTkFWQUNUKTtcbiAgICAgICAgICAgICAgICBwb3BPYmouaGlkZSh7IG5hbWU6ICdTbGlkZVVwJywgZHVyYXRpb246IDEwMCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19SVEwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcE9iai5lbmFibGVSdGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBwb3BPYmoucG9zaXRpb24gPSB7IFg6ICdsZWZ0JywgWTogJ3RvcCcgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBvcE9iai5vZmZzZXRYID09PSAwICYmICFlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19SVEwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcE9iai5lbmFibGVSdGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcG9wT2JqLnBvc2l0aW9uID0geyBYOiAncmlnaHQnLCBZOiAndG9wJyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3BPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICBwb3BPYmouZWxlbWVudC5zdHlsZS50b3AgPSB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBwb3B1cE5hdi5jbGFzc0xpc3QuYWRkKENMU19UQkFSTkFWQUNUKTtcbiAgICAgICAgICAgICAgICBwb3BPYmouc2hvdyh7IG5hbWU6ICdTbGlkZURvd24nLCBkdXJhdGlvbjogMTAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udHJvbCgpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBlajJfYmFzZV80LmZvcm1hdFVuaXQodGhpcy53aWR0aCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWoyX2Jhc2VfNC5mb3JtYXRVbml0KHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV81LkJyb3dzZXIuaW5mby5uYW1lICE9PSAnbXNpZScgfHwgdGhpcy5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICdoZWlnaHQnOiBoZWlnaHQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyAnd2lkdGgnOiB3aWR0aCB9KTtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0ciA9IHtcbiAgICAgICAgICAgICAgICAncm9sZSc6ICd0b29sYmFyJywgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnLCAnYXJpYS1oYXNwb3B1cCc6ICdmYWxzZScsICdhcmlhLW9yaWVudGF0aW9uJzogJ2hvcml6b250YWwnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIGFyaWFBdHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudHJndEVsZSA9ICh0aGlzLmVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkgPyB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZGl2JykgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy50YmFyQWxnRWxlID0geyBsZWZ0czogW10sIGNlbnRlcnM6IFtdLCByaWdodHM6IFtdIH07XG4gICAgICAgICAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuaW5pdEhTY3JvbGwgPSBmdW5jdGlvbiAoZWxlbWVudCwgaW5uZXJJdGVtcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNjcm9sbE1vZHVsZSAmJiB0aGlzLmNoZWNrT3ZlcmZsb3coZWxlbWVudCwgaW5uZXJJdGVtc1swXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TICsgJyAuJyArIENMU19UQkFSQ0VOVEVSKS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gbmV3IGhfc2Nyb2xsXzEuSFNjcm9sbCh7IHNjcm9sbFN0ZXA6IDUwLCBlbmFibGVSdGw6IHRoaXMuZW5hYmxlUnRsIH0sIGlubmVySXRlbXNbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRoaXMuc2Nyb2xsTW9kdWxlLmVsZW1lbnQsIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyBvdmVyZmxvdzogJ2hpZGRlbicgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLml0ZW1XaWR0aENhbCA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcbiAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwoZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0pLCBpdGVtcykuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCArPSAoZWwub2Zmc2V0V2lkdGggKyBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKS5tYXJnaW5SaWdodCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gd2lkdGg7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNoZWNrT3ZlcmZsb3cgPSBmdW5jdGlvbiAoZWxlbWVudCwgaW5uZXJJdGVtKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlbGVtZW50KSB8fCBlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGlubmVySXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWxlV2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIGl0ZW1XaWR0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbiB8fCB0aGlzLnNjcm9sbE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIGl0ZW1XaWR0aCA9IHRoaXMuaXRlbVdpZHRoQ2FsKHRoaXMuc2Nyb2xsTW9kdWxlID8gaW5uZXJJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5lLWhzY3JvbGwtY29udGVudCcpIDogaW5uZXJJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW1XaWR0aCA9IGlubmVySXRlbS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwb3BOYXYgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIHNjcm9sbE5hdiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUlNDUkxOQVYpO1xuICAgICAgICAgICAgaWYgKGl0ZW1XaWR0aCA+IGVsZVdpZHRoIC0gKHBvcE5hdiA/IHBvcE5hdi5vZmZzZXRXaWR0aCA6IChzY3JvbGxOYXYgPyBzY3JvbGxOYXYub2Zmc2V0V2lkdGggKiAyIDogMCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlZnJlc2hPdmVyZmxvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlck92ZXJmbG93TW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtcyA9IGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyk7XG4gICAgICAgICAgICBpZiAoZWxlICYmIGVsZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRXaWQgPSBlbGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLm92ZXJmbG93TW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdTY3JvbGxhYmxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUhTY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdEhTY3JvbGwoZWxlLCBlbGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDTFNfSVRFTVMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdQb3B1cCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmVsZW1lbnQsICdlLXRvb2xwb3AnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrT3ZlcmZsb3coZWxlLCBpbm5lckl0ZW1zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXBFbGUoZWxlLCBbXS5zbGljZS5jYWxsKGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNUyArICcgLicgKyBDTFNfSVRFTSwgZWxlKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKS5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVySXRlbXMsIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1Qb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jcmVhdGVQb3B1cEVsZSA9IGZ1bmN0aW9uIChlbGUsIGlubmVyRWxlKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJOYXYgPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICBpZiAoIWlubmVyTmF2KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cEljb24oZWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlubmVyTmF2ID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIGVsZVdpZHRoID0gKGVsZS5vZmZzZXRXaWR0aCAtIChpbm5lck5hdi5vZmZzZXRXaWR0aCkpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcnRsJyk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrUHJpb3JpdHkoZWxlLCBpbm5lckVsZSwgZWxlV2lkdGgsIHRydWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVBvcHVwKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnB1c2hpbmdQb3BwZWRFbGUgPSBmdW5jdGlvbiAodGJhck9iaiwgcG9wdXBQcmksIGVsZSwgZWxlSGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRiYXJPYmouZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBub2RlcyA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19UQkFST1ZFUkZMT1csIGVsZSk7XG4gICAgICAgICAgICB2YXIgbm9kZUluZGV4ID0gMDtcbiAgICAgICAgICAgIHZhciBwb3BwZWRFbGUgPSBbXS5zbGljZS5jYWxsKGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19QT1BVUCwgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUykpKTtcbiAgICAgICAgICAgIHZhciBub2RlUHJpID0gMDtcbiAgICAgICAgICAgIHBvcHBlZEVsZS5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBub2RlcyA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19UQkFST1ZFUkZMT1csIGVsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk9WRVJGTE9XKSAmJiBub2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YmFyT2JqLnRiUmVzaXplICYmIG5vZGVzLmxlbmd0aCA+IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuaW5zZXJ0QmVmb3JlKGVsLCBub2Rlc1tpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgKytub2RlUHJpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShlbCwgZWxlLmNoaWxkcmVuW25vZGVzLmxlbmd0aF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgKytub2RlUHJpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk9WRVJGTE9XKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuaW5zZXJ0QmVmb3JlKGVsLCBlbGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICsrbm9kZVByaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGJhck9iai50YlJlc2l6ZSAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1BPUE9WRVJGTE9XKSAmJiBlbGUuY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiBub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShlbCwgZWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICArK25vZGVQcmk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUE9QT1ZFUkZMT1cpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwUHJpLnB1c2goZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0YmFyT2JqLnRiUmVzaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoZWwsIGVsZS5jaGlsZE5vZGVzW25vZGVJbmRleCArIG5vZGVQcmldKTtcbiAgICAgICAgICAgICAgICAgICAgKytub2RlSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKGVsLCB7IGRpc3BsYXk6ICcnLCBoZWlnaHQ6IGVsZUhlaWdodCArICdweCcgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBvcHVwUHJpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHRiYXJFbGUgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfSVRFTSwgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUykpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRiYXJFbGUubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGJhckVsZW1lbnQgPSB0YmFyRWxlW2ldO1xuICAgICAgICAgICAgICAgIGlmICh0YmFyRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0YmFyRWxlbWVudCwgeyBkaXNwbGF5OiAnbm9uZScgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNyZWF0ZVBvcHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgZWxlSGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGVsZUl0ZW07XG4gICAgICAgICAgICBlbGVJdGVtID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNICsgJzpub3QoLicgKyBDTFNfU0VQQVJBVE9SICsgJyApOm5vdCguJyArIENMU19QT1BVUCArICcgKScpO1xuICAgICAgICAgICAgZWxlSGVpZ2h0ID0gKGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID09PSAnYXV0bycgfHwgZWxlbWVudC5zdHlsZS5oZWlnaHQgPT09ICcnKSA/IG51bGwgOiBlbGVJdGVtLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHZhciBlbGU7XG4gICAgICAgICAgICB2YXIgcG9wdXBQcmkgPSBbXTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZWxlbWVudC5pZCArICdfcG9wdXAuJyArIENMU19QT1BVUENMQVNTKSkge1xuICAgICAgICAgICAgICAgIGVsZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBlbGVtZW50LmlkICsgJ19wb3B1cC4nICsgQ0xTX1BPUFVQQ0xBU1MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiBlbGVtZW50LmlkICsgJ19wb3B1cCcsIGNsYXNzTmFtZTogQ0xTX1BPUFVQQ0xBU1MgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnB1c2hpbmdQb3BwZWRFbGUodGhpcywgcG9wdXBQcmksIGVsZSwgZWxlSGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBJbml0KGVsZW1lbnQsIGVsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwSW5pdCA9IGZ1bmN0aW9uIChlbGVtZW50LCBlbGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wb3BPYmopIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGVsZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgb3ZlcmZsb3c6ICcnIH0pO1xuICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IG5ldyBlajJfcG9wdXBzXzEuUG9wdXAobnVsbCwge1xuICAgICAgICAgICAgICAgICAgICByZWxhdGVUbzogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRZOiAoZWxlbWVudC5vZmZzZXRIZWlnaHQpLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgICAgICBvcGVuOiB0aGlzLnBvcHVwT3Blbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZTogdGhpcy5wb3B1cENsb3NlLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5lbmFibGVSdGwgPyB7IFg6ICdsZWZ0JywgWTogJ3RvcCcgfSA6IHsgWDogJ3JpZ2h0JywgWTogJ3RvcCcgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHBvcHVwLmFwcGVuZFRvKGVsZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCAnc2Nyb2xsJywgdGhpcy5kb2NFdmVudC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsICdjbGljayAnLCB0aGlzLmRvY0V2ZW50LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIHBvcHVwLmVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gcG9wdXAuZWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHBvcHVwLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcE9iaiA9IHBvcHVwO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGFzcG9wdXAnLCAndHJ1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvcHVwRWxlID0gdGhpcy5wb3BPYmouZWxlbWVudDtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHBvcHVwRWxlLCB7IG1heEhlaWdodDogJycsIGRpc3BsYXk6ICdibG9jaycgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShwb3B1cEVsZSwgeyBtYXhIZWlnaHQ6IHBvcHVwRWxlLm9mZnNldEhlaWdodCArICdweCcsIGRpc3BsYXk6ICcnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wb3B1cE9wZW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBvcE9iaiA9IHRoaXMucG9wT2JqO1xuICAgICAgICAgICAgdmFyIHBvcHVwRWxlID0gdGhpcy5wb3BPYmouZWxlbWVudDtcbiAgICAgICAgICAgIHZhciB0b29sRWxlID0gdGhpcy5wb3BPYmouZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdmFyIHBvcHVwTmF2ID0gdG9vbEVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUocG9wT2JqLmVsZW1lbnQsIHsgaGVpZ2h0OiAnYXV0bycsIG1heEhlaWdodDogJycgfSk7XG4gICAgICAgICAgICBwb3BPYmouZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSBwb3BPYmouZWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgdmFyIHBvcHVwRWxlUG9zID0gcG9wdXBFbGUub2Zmc2V0VG9wICsgcG9wdXBFbGUub2Zmc2V0SGVpZ2h0ICsgZWoyX3BvcHVwc18yLmNhbGN1bGF0ZVBvc2l0aW9uKHRvb2xFbGUpLnRvcDtcbiAgICAgICAgICAgIHZhciBwb3BJY29uID0gcG9wdXBOYXYuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBwb3B1cE5hdi5jbGFzc0xpc3QuYWRkKENMU19UQkFSTkFWQUNUKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHBvcEljb24sIFtDTFNfUE9QVVBJQ09OXSwgW0NMU19QT1BVUERPV05dKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxWYWwgPSBlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHdpbmRvdy5zY3JvbGxZKSA/IDAgOiB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgICAgICAgIGlmICgod2luZG93LmlubmVySGVpZ2h0ICsgc2Nyb2xsVmFsKSA8IHBvcHVwRWxlUG9zKSB7XG4gICAgICAgICAgICAgICAgdmFyIG92ZXJmbG93SGVpZ2h0ID0gKHBvcHVwRWxlLm9mZnNldEhlaWdodCAtICgocG9wdXBFbGVQb3MgLSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBzY3JvbGxWYWwpICsgNSkpO1xuICAgICAgICAgICAgICAgIHBvcE9iai5oZWlnaHQgPSBvdmVyZmxvd0hlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShwb3BPYmouZWxlbWVudCwgeyBtYXhIZWlnaHQ6IG92ZXJmbG93SGVpZ2h0ICsgJ3B4JyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucG9wdXBDbG9zZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdmFyIHBvcHVwTmF2ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIHZhciBwb3BJY29uID0gcG9wdXBOYXYuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBwb3B1cE5hdi5jbGFzc0xpc3QucmVtb3ZlKENMU19UQkFSTkFWQUNUKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHBvcEljb24sIFtDTFNfUE9QVVBET1dOXSwgW0NMU19QT1BVUElDT05dKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY2hlY2tQcmlvcml0eSA9IGZ1bmN0aW9uIChlbGUsIGluRWxlLCBlbGVXaWR0aCwgcHJlKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gaW5FbGUubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGVsZVdpZCA9IGVsZVdpZHRoO1xuICAgICAgICAgICAgdmFyIHNlcENoZWNrID0gMDtcbiAgICAgICAgICAgIHZhciBpdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIGl0ZW1Qb3BDb3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgY2hlY2tDbGFzcyA9IGZ1bmN0aW9uIChlbGUsIHZhbCkge1xuICAgICAgICAgICAgICAgIHZhciByVmFsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFsLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLmNsYXNzTGlzdC5jb250YWlucyhjbHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByVmFsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByVmFsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHZhciBtcmduID0gcGFyc2VGbG9hdCgod2luZG93LmdldENvbXB1dGVkU3R5bGUoaW5FbGVbaV0pKS5tYXJnaW5SaWdodCk7XG4gICAgICAgICAgICAgICAgbXJnbiArPSBwYXJzZUZsb2F0KCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpbkVsZVtpXSkpLm1hcmdpbkxlZnQpO1xuICAgICAgICAgICAgICAgIGlmIChpbkVsZVtpXSA9PT0gdGhpcy50YmFyRWxlWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckVsZU1yZ24gPSBtcmduO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKGluRWxlW2ldLm9mZnNldExlZnQgKyBpbkVsZVtpXS5vZmZzZXRXaWR0aCArIG1yZ24pID4gZWxlV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluRWxlW2ldLmNsYXNzTGlzdC5jb250YWlucyhDTFNfU0VQQVJBVE9SKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcENoZWNrID4gMCAmJiBpdGVtQ291bnQgPT09IGl0ZW1Qb3BDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXBFbGUgPSBpbkVsZVtpICsgaXRlbUNvdW50ICsgKHNlcENoZWNrIC0gMSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja0NsYXNzKHNlcEVsZSwgW0NMU19TRVBBUkFUT1IsIENMU19UQkFSSUdOT1JFXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShzZXBFbGUsIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcENoZWNrKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVBvcENvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Db3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkVsZVtpXS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJPVkVSRkxPVykgJiYgcHJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVXaWR0aCAtPSAoaW5FbGVbaV0ub2Zmc2V0V2lkdGggKyAobXJnbikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFjaGVja0NsYXNzKGluRWxlW2ldLCBbQ0xTX1NFUEFSQVRPUiwgQ0xTX1RCQVJJR05PUkVdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5FbGVbaV0uY2xhc3NMaXN0LmFkZChDTFNfUE9QVVApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShpbkVsZVtpXSwgeyBkaXNwbGF5OiAnbm9uZScsIG1pbldpZHRoOiBpbkVsZVtpXS5vZmZzZXRXaWR0aCArICdweCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtUG9wQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZVdpZHRoIC09IChpbkVsZVtpXS5vZmZzZXRXaWR0aCArIChtcmduKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvcGVkRWxlID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0gKyAnOm5vdCguJyArIENMU19QT1BVUCArICcpJywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUHJpb3JpdHkoZWxlLCBwb3BlZEVsZSwgZWxlV2lkLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNyZWF0ZVBvcHVwSWNvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBlbGVtZW50LmlkLmNvbmNhdCgnX25hdicpO1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICdlLScgKyBlbGVtZW50LmlkLmNvbmNhdCgnX25hdiAnICsgQ0xTX1BPUFVQTkFWKTtcbiAgICAgICAgICAgIHZhciBuYXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IGlkLCBjbGFzc05hbWU6IGNsYXNzTmFtZSB9KTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV81LkJyb3dzZXIuaW5mby5uYW1lID09PSAnbXNpZScgfHwgZWoyX2Jhc2VfNS5Ccm93c2VyLmluZm8ubmFtZSA9PT0gJ2VkZ2UnKSB7XG4gICAgICAgICAgICAgICAgbmF2LmNsYXNzTGlzdC5hZGQoJ2UtaWUtYWxpZ24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuYXZJdGVtID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1BPUFVQRE9XTiArICcgZS1pY29ucycgfSk7XG4gICAgICAgICAgICBuYXYuYXBwZW5kQ2hpbGQobmF2SXRlbSk7XG4gICAgICAgICAgICBuYXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG5hdik7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnRiYXJQcmlSZWYgPSBmdW5jdGlvbiAoaW5FbGUsIGluZHgsIHNlcFByaSwgZWwsIGRlcywgZWxXaWQsIHdpZCwgaWcpIHtcbiAgICAgICAgICAgIHZhciBpZ25vcmVDb3VudCA9IGlnO1xuICAgICAgICAgICAgdmFyIHBvcEVsZSA9IHRoaXMucG9wT2JqLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSAnLicgKyBDTFNfSVRFTSArICc6bm90KC4nICsgQ0xTX1NFUEFSQVRPUiArICcpOm5vdCguJyArIENMU19UQkFST1ZFUkZMT1cgKyAnKSc7XG4gICAgICAgICAgICB2YXIgcHJpRWxlQ250ID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX1BPUFVQICsgJzpub3QoLicgKyBDTFNfVEJBUk9WRVJGTE9XICsgJyknLCBwb3BFbGUpLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjaGVja0NsYXNzID0gZnVuY3Rpb24gKGVsZSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZS5jbGFzc0xpc3QuY29udGFpbnModmFsKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5zZWxlY3RBbGwocXVlcnksIGluRWxlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlU2VwID0gaW5FbGUuY2hpbGRyZW5baW5keCAtIChpbmR4IC0gc2VwUHJpKSAtIDFdO1xuICAgICAgICAgICAgICAgIHZhciBpZ25vcmVDaGVjayA9ICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlbGVTZXApICYmIGNoZWNrQ2xhc3MoZWxlU2VwLCBDTFNfVEJBUklHTk9SRSkpO1xuICAgICAgICAgICAgICAgIGlmICgoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWxlU2VwKSAmJiBjaGVja0NsYXNzKGVsZVNlcCwgQ0xTX1NFUEFSQVRPUikgJiYgIWVqMl9iYXNlXzIuaXNWaXNpYmxlKGVsZVNlcCkpIHx8IGlnbm9yZUNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXBEaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBlbGVTZXAuc3R5bGUuZGlzcGxheSA9ICdpbmhlcml0JztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZVNlcFdpZHRoID0gZWxlU2VwLm9mZnNldFdpZHRoICsgKHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlU2VwKS5tYXJnaW5SaWdodCkgKiAyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZTZXAgPSBlbGVTZXAucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKChlbFdpZCArIGVsZVNlcFdpZHRoKSA8IHdpZCB8fCBkZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluRWxlLmluc2VydEJlZm9yZShlbCwgaW5FbGUuY2hpbGRyZW5bKGluZHggKyBpZ25vcmVDb3VudCkgLSAoaW5keCAtIHNlcFByaSldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChwcmV2U2VwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZTZXAuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZTZXAuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNlcC5zdHlsZS5kaXNwbGF5ID0gc2VwRGlzcGxheTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbGVTZXAuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5FbGUuaW5zZXJ0QmVmb3JlKGVsLCBpbkVsZS5jaGlsZHJlblsoaW5keCArIGlnbm9yZUNvdW50KSAtIChpbmR4IC0gc2VwUHJpKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluRWxlLmluc2VydEJlZm9yZShlbCwgaW5FbGUuY2hpbGRyZW5bKGluZHggKyBpZ25vcmVDb3VudCkgLSBwcmlFbGVDbnRdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucG9wdXBSZWZyZXNoID0gZnVuY3Rpb24gKHBvcHVwRWxlLCBkZXN0cm95KSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIHBvcE5hdiA9IGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZSA9IGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChwb3BOYXYpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5uZXJFbGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgcG9wdXBFbGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBlbGUub2Zmc2V0V2lkdGggLSAocG9wTmF2Lm9mZnNldFdpZHRoICsgaW5uZXJFbGUub2Zmc2V0V2lkdGgpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEVsZVJlZnJlc2god2lkdGgsIHBvcHVwRWxlLCBkZXN0cm95KTtcbiAgICAgICAgICAgIHBvcHVwRWxlLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIGlmIChwb3B1cEVsZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaChwb3BOYXYpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaCh0aGlzLnBvcE9iai5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcE9iaiA9IG51bGw7XG4gICAgICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1oYXNwb3B1cCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKCdlLXRvb2xwb3AnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuaWdub3JlRWxlRmV0Y2ggPSBmdW5jdGlvbiAoaW5kZXgsIGlubmVyRWxlKSB7XG4gICAgICAgICAgICB2YXIgaWdub3JlRWxlID0gW10uc2xpY2UuY2FsbChpbm5lckVsZS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIENMU19UQkFSSUdOT1JFKSk7XG4gICAgICAgICAgICB2YXIgaWdub3JlSW54ID0gW107XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgaWYgKGlnbm9yZUVsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWdub3JlRWxlLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZ25vcmVJbngucHVzaChbXS5zbGljZS5jYWxsKGlubmVyRWxlLmNoaWxkcmVuKS5pbmRleE9mKGVsZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZ25vcmVJbnguZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCA8PSBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wb3B1cEVsZVJlZnJlc2ggPSBmdW5jdGlvbiAod2lkdGgsIHBvcHVwRWxlLCBkZXN0cm95KSB7XG4gICAgICAgICAgICB2YXIgZWxlU3BsaWNlID0gdGhpcy50YmFyRWxlO1xuICAgICAgICAgICAgdmFyIHByaUVsZUNudDtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyk7XG4gICAgICAgICAgICB2YXIgaWdub3JlQ291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgdmFyIGVsV2lkdGggPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgYnRuVGV4dCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJCVE5URVhUKTtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRidG4tYWxpZ24nKSB8fCBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJURVhUKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnRuID0gZWwuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChidG5UZXh0KSAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJURVhUKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuVGV4dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGJ0blRleHQpICYmIGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUE9QVVBURVhUKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuVGV4dC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUubWluV2lkdGggPSAnMCUnO1xuICAgICAgICAgICAgICAgICAgICBlbFdpZHRoID0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5taW5XaWR0aCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoYnRuVGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blRleHQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbCA9PT0gdGhpc18xLnRiYXJFbGVbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZWxXaWR0aCArPSB0aGlzXzEudGJhckVsZU1yZ247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKGVsV2lkdGggPCB3aWR0aCB8fCBkZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLm1pbldpZHRoID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19QT1BPVkVSRkxPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1BPUFVQKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXNfMS50YmFyRWxlLmluZGV4T2YoZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc18xLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXNfMS5pdGVtc1tpbmRleF0uYWxpZ247XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXNfMS50YmFyQWxnRWxlWyhwb3MgKyAncycpXS5pbmRleE9mKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZVNwbGljZSA9IHRoaXNfMS50YmFyQWxnRWxlWyhwb3MgKyAncycpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlID0gdGhpc18xLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMgKyAnIC4nICsgJ2UtdG9vbGJhci0nICsgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VwQmVmb3JlUHJpXzEgPSAwO1xuICAgICAgICAgICAgICAgICAgICBlbGVTcGxpY2Uuc2xpY2UoMCwgaW5kZXgpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFST1ZFUkZMT1cpIHx8IGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfU0VQQVJBVE9SKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAtPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwQmVmb3JlUHJpXzErKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZUNvdW50ID0gdGhpc18xLmlnbm9yZUVsZUZldGNoKGluZGV4LCBpbm5lckVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJPVkVSRkxPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS50YmFyUHJpUmVmKGlubmVyRWxlLCBpbmRleCwgc2VwQmVmb3JlUHJpXzEsIGVsLCBkZXN0cm95LCBlbFdpZHRoLCB3aWR0aCwgaWdub3JlQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggLT0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmluc2VydEJlZm9yZShlbCwgaW5uZXJFbGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAtPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaUVsZUNudCA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19UQkFST1ZFUkZMT1csIHRoaXNfMS5wb3BPYmouZWxlbWVudCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuaW5zZXJ0QmVmb3JlKGVsLCBpbm5lckVsZS5jaGlsZHJlblsoaW5kZXggKyBpZ25vcmVDb3VudCkgLSBwcmlFbGVDbnRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoIC09IGVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYnJlYWtcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gW10uc2xpY2UuY2FsbChwb3B1cEVsZS5jaGlsZHJlbik7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZV8xID0gX2xvb3BfMShlbCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlXzEgPT09IFwiYnJlYWtcIilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZVBvc2l0aW9uaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXRlbSkgfHwgIWl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSUE9TKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGl0ZW0sIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW0gPSBbXS5zbGljZS5jYWxsKGl0ZW0uY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICBpbm5lckl0ZW1bMV0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgaW5uZXJJdGVtWzJdLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVmcmVzaFBvc2l0aW9uaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgdGhpcy5hZGQoaXRlbSwgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgdGhpcy5pdGVtUG9zaXRpb25pbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuaXRlbVBvc2l0aW9uaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXRlbSkgfHwgIWl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSUE9TKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwb3B1cE5hdiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW07XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICBpbm5lckl0ZW0gPSBbXS5zbGljZS5jYWxsKGl0ZW0ucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUlNDUk9MTCkuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5uZXJJdGVtID0gW10uc2xpY2UuY2FsbChpdGVtLmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1hcmdpbiA9IGlubmVySXRlbVswXS5vZmZzZXRXaWR0aCArIGlubmVySXRlbVsyXS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciB0YmFyV2lkID0gdGhpcy5lbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgaWYgKHBvcHVwTmF2KSB7XG4gICAgICAgICAgICAgICAgdGJhcldpZCAtPSBwb3B1cE5hdi5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgcG9wV2lkID0gcG9wdXBOYXYub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGlubmVySXRlbVsyXS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVSdGwgPyBpbm5lckl0ZW1bMl0uc3R5bGUubGVmdCA9IHBvcFdpZCA6IGlubmVySXRlbVsyXS5zdHlsZS5yaWdodCA9IHBvcFdpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YmFyV2lkIDw9IG1hcmdpbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICgoKHRiYXJXaWQgLSBtYXJnaW4pKSAtIGlubmVySXRlbVsxXS5vZmZzZXRXaWR0aCkgLyAyO1xuICAgICAgICAgICAgaW5uZXJJdGVtWzFdLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIHZhciBtcmduID0gKGlubmVySXRlbVswXS5vZmZzZXRXaWR0aCArIHZhbHVlKSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZVJ0bCA/IGlubmVySXRlbVsxXS5zdHlsZS5tYXJnaW5SaWdodCA9IG1yZ24gOiBpbm5lckl0ZW1bMV0uc3R5bGUubWFyZ2luTGVmdCA9IG1yZ247XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnRiYXJJdGVtQWxpZ24gPSBmdW5jdGlvbiAoaXRlbSwgaXRlbUVsZSwgcG9zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGFsaWduRGl2ID0gW107XG4gICAgICAgICAgICBhbGlnbkRpdi5wdXNoKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19UQkFSTEVGVCB9KSk7XG4gICAgICAgICAgICBhbGlnbkRpdi5wdXNoKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19UQkFSQ0VOVEVSIH0pKTtcbiAgICAgICAgICAgIGFsaWduRGl2LnB1c2goZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RCQVJSSUdIVCB9KSk7XG4gICAgICAgICAgICBpZiAocG9zID09PSAwICYmIGl0ZW0uYWxpZ24gIT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIGFsaWduRGl2LmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtRWxlLmFwcGVuZENoaWxkKGVsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy50YmFyQWxpZ24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGl0ZW1FbGUsIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0uYWxpZ24gIT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIHZhciBhbGlnbkVsZSA9IGl0ZW1FbGUuY2hpbGROb2RlcztcbiAgICAgICAgICAgICAgICB2YXIgbGVmdEFsaWduXzEgPSBhbGlnbkRpdlswXTtcbiAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKGFsaWduRWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50YmFyQWxnRWxlLmxlZnRzLnB1c2goZWwpO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0QWxpZ25fMS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaXRlbUVsZS5hcHBlbmRDaGlsZChsZWZ0QWxpZ25fMSk7XG4gICAgICAgICAgICAgICAgaXRlbUVsZS5hcHBlbmRDaGlsZChhbGlnbkRpdlsxXSk7XG4gICAgICAgICAgICAgICAgaXRlbUVsZS5hcHBlbmRDaGlsZChhbGlnbkRpdlsyXSk7XG4gICAgICAgICAgICAgICAgdGhpcy50YmFyQWxpZ24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGl0ZW1FbGUsIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY3RybFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY3RybFRlbSA9IHRoaXMudHJndEVsZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRyZ3RFbGUsIENMU19JVEVNUyk7XG4gICAgICAgICAgICB0aGlzLnRiYXJFbGUgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZSA9IFtdLnNsaWNlLmNhbGwodGhpcy50cmd0RWxlLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIGlubmVyRWxlLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGlmIChlbGUudGFnTmFtZSA9PT0gJ0RJVicpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGJhckVsZS5wdXNoKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkKGVsZSwgQ0xTX0lURU0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW5kZXJJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaXRlbUVsZURvbTtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW07XG4gICAgICAgICAgICB2YXIgaW5uZXJQb3M7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLml0ZW1zO1xuICAgICAgICAgICAgaWYgKGVsZSAmJiBlbGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGl0ZW1FbGVEb20gPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHJndEVsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHJsVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVsZSAmJiBpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtRWxlRG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1FbGVEb20gPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSVRFTVMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJJdGVtID0gdGhpcy5yZW5kZXJTdWJDb21wb25lbnQoaXRlbXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyRWxlLmluZGV4T2YoaW5uZXJJdGVtKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckVsZS5wdXNoKGlubmVySXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFySXRlbUFsaWduKGl0ZW1zW2ldLCBpdGVtRWxlRG9tLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbm5lclBvcyA9IGl0ZW1FbGVEb20ucXVlcnlTZWxlY3RvcignLmUtdG9vbGJhci0nICsgaXRlbXNbaV0uYWxpZ24udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbm5lclBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFyQWxnRWxlWyhpdGVtc1tpXS5hbGlnbiArICdzJyldLnB1c2goaW5uZXJJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyUG9zLmFwcGVuZENoaWxkKGlubmVySXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtRWxlRG9tLmFwcGVuZENoaWxkKGlubmVySXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGl0ZW1FbGVEb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5zZXRBdHRyID0gZnVuY3Rpb24gKGF0dHIsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhhdHRyKTtcbiAgICAgICAgICAgIHZhciBrZXlWYWw7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGtleVZhbCA9IGtleVtpXTtcbiAgICAgICAgICAgICAgICBrZXlWYWwgPT09ICdjbGFzcycgPyB0aGlzLmFkZChlbGVtZW50LCBhdHRyW2tleVZhbF0pIDogZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5VmFsLCBhdHRyW2tleVZhbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5lbmFibGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgaXNFbmFibGUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGl0ZW1zO1xuICAgICAgICAgICAgdmFyIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGlzRW5hYmxlKSkge1xuICAgICAgICAgICAgICAgIGlzRW5hYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbmFibGUgPSBmdW5jdGlvbiAoaXNFbmFibGUsIGVsZSkge1xuICAgICAgICAgICAgICAgIGlmIChpc0VuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChsZW4gJiYgbGVuID4gMSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBbXS5zbGljZS5jYWxsKGVsZW1lbnRzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlKGlzRW5hYmxlLCBlbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpc0VuYWJsZSA/IGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoZWxlbWVudHMsIENMU19ESVNBQkxFKSA6IGVqMl9iYXNlXzIuYWRkQ2xhc3MoZWxlbWVudHMsIENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgZWxlID0gKGxlbiAmJiBsZW4gPT09IDEpID8gZWxlbWVudHNbMF0gOiBpdGVtcztcbiAgICAgICAgICAgICAgICBlbmFibGUoaXNFbmFibGUsIGVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmFkZEl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbXM7XG4gICAgICAgICAgICB2YXIgaXRlbXNEaXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlO1xuICAgICAgICAgICAgdmFyIGl0ZW1BZ24gPSAnbGVmdCc7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpbmRleCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGUuYWxpZ24pICYmIGUuYWxpZ24gIT09ICdsZWZ0JyAmJiBpdGVtQWduID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUFnbiA9IGUuYWxpZ247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGl0ZW1zXzEgPSBpdGVtczsgX2kgPCBpdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXRlbS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPSAnQnV0dG9uJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5uZXJJdGVtcyA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGl0ZW0uYWxpZ24gPSBpdGVtQWduO1xuICAgICAgICAgICAgICAgIGlubmVyRWxlID0gdGhpcy5yZW5kZXJTdWJDb21wb25lbnQoaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckVsZS5sZW5ndGggPj0gaW5kZXggJiYgaW5uZXJJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveU1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxnSW5kZXggPSBpdGVtLmFsaWduWzBdID09PSAnbCcgPyAwIDogaXRlbS5hbGlnblswXSA9PT0gJ2MnID8gMSA6IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGlubmVySXRlbXNbMF0sICcuJyArIENMU19JVEVNUykuY2hpbGRyZW5bYWxnSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShpbm5lckVsZSwgZWxlLmNoaWxkcmVuW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJBbGdFbGVbKGl0ZW0uYWxpZ24gKyAncycpXS5zcGxpY2UoaW5kZXgsIDAsIGlubmVyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckl0ZW1zWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGlubmVyRWxlLCBpbm5lckl0ZW1zW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJFbGUuc3BsaWNlKGluZGV4LCAwLCBpbm5lckVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0V2lkID0gaXRlbXNEaXYub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXNEaXYuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZUl0ZW1zID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGFyZ3M7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtcyA9IFtdLnNsaWNlLmNhbGwoZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0sIHRoaXMuZWxlbWVudCkpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudHMpID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gcGFyc2VJbnQoYXJncy50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtQnlJbmRleChpbmRleCwgaW5uZXJJdGVtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMgJiYgZWxlbWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gW10uc2xpY2UuY2FsbChlbGVtZW50cyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnRiYXJFbGUuaW5kZXhPZihlbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtQnlJbmRleChpbmRleCwgaW5uZXJJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckl0ZW1zID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSAoZWxlbWVudHMgJiYgZWxlbWVudHMubGVuZ3RoICYmIGVsZW1lbnRzLmxlbmd0aCA9PT0gMSkgPyBlbGVtZW50c1swXSA6IGFyZ3M7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaW5uZXJJdGVtcy5pbmRleE9mKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbUJ5SW5kZXgoaW5kZXgsIGlubmVySXRlbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZUl0ZW1CeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBpbm5lckl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YmFyRWxlW2luZGV4XSAmJiBpbm5lckl0ZW1zW2luZGV4XSkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVJZHggPSB0aGlzLnRiYXJFbGUuaW5kZXhPZihpbm5lckl0ZW1zW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleEFnbiA9IHRoaXMudGJhckFsZ0VsZVsodGhpcy5pdGVtc1tlbGVJZHhdLmFsaWduICsgJ3MnKV0uaW5kZXhPZih0aGlzLnRiYXJFbGVbZWxlSWR4XSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckFsZ0VsZVsodGhpcy5pdGVtc1tlbGVJZHhdLmFsaWduICsgJ3MnKV0uc3BsaWNlKGluZGV4QWduLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2goaW5uZXJJdGVtc1tpbmRleF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGVsZUlkeCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy50YmFyRWxlLnNwbGljZShlbGVJZHgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS50ZW1wbGF0ZVJlbmRlciA9IGZ1bmN0aW9uICh0ZW1wbGF0ZVByb3AsIGlubmVyRWxlLCBpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaXRlbVR5cGUgPSBpdGVtLnR5cGU7XG4gICAgICAgICAgICB2YXIgZWxlT2JqID0gdGVtcGxhdGVQcm9wO1xuICAgICAgICAgICAgdmFyIGlzQ29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAodGVtcGxhdGVQcm9wKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBpc0NvbXBvbmVudCA9IHR5cGVvZiAoZWxlT2JqLmFwcGVuZFRvKSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRlbXBsYXRlUHJvcCkgPT09ICdzdHJpbmcnIHx8ICFpc0NvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0ZW1wbGF0ZVByb3A7XG4gICAgICAgICAgICAgICAgdmFsID0gKHR5cGVvZiAodGVtcGxhdGVQcm9wKSA9PT0gJ3N0cmluZycpID8gdGVtcGxhdGVQcm9wLnRyaW0oKSA6IHRlbXBsYXRlUHJvcDtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWwpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV80LmNvbXBpbGUoZWxlLm91dGVySFRNTC50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2goZWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfNC5jb21waWxlKHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ZW1wQXJyYXkgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRlbXBsYXRlRm4pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBBcnJheSA9IHRlbXBsYXRlRm4oe30sIHRoaXMsICd0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGVtcEFycmF5KSAmJiB0ZW1wQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRlbXBBcnJheSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWxlLnRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmFwcGVuZENoaWxkKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW1UeXBlID09PSAnSW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICBpdGVtLmlkID8gKGVsZS5pZCA9IGl0ZW0uaWQpIDogKGVsZS5pZCA9IGVqMl9iYXNlXzQuZ2V0VW5pcXVlSUQoJ3Rici1pcHQnKSk7XG4gICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoZWxlKTtcbiAgICAgICAgICAgICAgICBlbGVPYmouYXBwZW5kVG8oZWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfVEVNUExBVEUpO1xuICAgICAgICAgICAgdGhpcy50YmFyRWxlLnB1c2goaW5uZXJFbGUpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5idXR0b25SZW5kZXJpbmcgPSBmdW5jdGlvbiAoaXRlbSwgaW5uZXJFbGUpIHtcbiAgICAgICAgICAgIHZhciBkb20gPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHsgY2xhc3NOYW1lOiBDTFNfVEJBUkJUTiB9KTtcbiAgICAgICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgICAgICB2YXIgdGV4dFN0ciA9IGl0ZW0udGV4dDtcbiAgICAgICAgICAgIHZhciBpY29uQ3NzO1xuICAgICAgICAgICAgdmFyIGljb25Qb3M7XG4gICAgICAgICAgICBpdGVtLmlkID8gKGRvbS5pZCA9IGl0ZW0uaWQpIDogZG9tLmlkID0gZWoyX2Jhc2VfNC5nZXRVbmlxdWVJRCgnZS10YnItYnRuJyk7XG4gICAgICAgICAgICB2YXIgYnRuVHh0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdGJhci1idG4tdGV4dCcgfSk7XG4gICAgICAgICAgICBpZiAodGV4dFN0cikge1xuICAgICAgICAgICAgICAgIGJ0blR4dC5pbm5lckhUTUwgPSB0ZXh0U3RyO1xuICAgICAgICAgICAgICAgIGRvbS5hcHBlbmRDaGlsZChidG5UeHQpO1xuICAgICAgICAgICAgICAgIGRvbS5jbGFzc0xpc3QuYWRkKCdlLXRidG4tdHh0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgJ2UtdGJ0bi1hbGlnbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0ucHJlZml4SWNvbiB8fCBpdGVtLnN1ZmZpeEljb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoKGl0ZW0ucHJlZml4SWNvbiAmJiBpdGVtLnN1ZmZpeEljb24pIHx8IGl0ZW0ucHJlZml4SWNvbikge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ3NzID0gaXRlbS5wcmVmaXhJY29uICsgJyBlLWljb25zJztcbiAgICAgICAgICAgICAgICAgICAgaWNvblBvcyA9ICdsZWZ0JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGljb25Dc3MgPSBpdGVtLnN1ZmZpeEljb24gKyAnIGUtaWNvbnMnO1xuICAgICAgICAgICAgICAgICAgICBpY29uUG9zID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXcgZWoyX2J1dHRvbnNfMS5CdXR0b24oeyBpY29uQ3NzOiBpY29uQ3NzLCBpY29uUG9zaXRpb246IGljb25Qb3MgfSwgZG9tKTtcbiAgICAgICAgICAgIGlmIChpdGVtLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShkb20sIHsgJ3dpZHRoJzogZWoyX2Jhc2VfNC5mb3JtYXRVbml0KGl0ZW0ud2lkdGgpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvbTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyU3ViQ29tcG9uZW50ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZTtcbiAgICAgICAgICAgIHZhciBkb207XG4gICAgICAgICAgICBpbm5lckVsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JVEVNIH0pO1xuICAgICAgICAgICAgaW5uZXJFbGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGJhckVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGJhckVsZSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uaHRtbEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHIoaXRlbS5odG1sQXR0cmlidXRlcywgaW5uZXJFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udG9vbHRpcFRleHQpIHtcbiAgICAgICAgICAgICAgICBpbm5lckVsZS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgaXRlbS50b29sdGlwVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgIGlubmVyRWxlLmNsYXNzTmFtZSA9IGlubmVyRWxlLmNsYXNzTmFtZSArICcgJyArIGl0ZW0uY3NzQ2xhc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVSZW5kZXIoaXRlbS50ZW1wbGF0ZSwgaW5uZXJFbGUsIGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChpdGVtLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbSA9IHRoaXMuYnV0dG9uUmVuZGVyaW5nKGl0ZW0sIGlubmVyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckVsZS5hcHBlbmRDaGlsZChkb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLml0ZW1DbGljay5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdTZXBhcmF0b3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsIENMU19TRVBBUkFUT1IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uc2hvd1RleHRPbikge1xuICAgICAgICAgICAgICAgIHZhciBzVHh0ID0gaXRlbS5zaG93VGV4dE9uO1xuICAgICAgICAgICAgICAgIGlmIChzVHh0ID09PSAnVG9vbGJhcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsIENMU19QT1BVUFRFWFQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgJ2UtdGJ0bi1hbGlnbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzVHh0ID09PSAnT3ZlcmZsb3cnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfVEJBUlRFWFQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLm92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgdmFyIG92ZXJmbG93ID0gaXRlbS5vdmVyZmxvdztcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmZsb3cgPT09ICdTaG93Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgQ0xTX1RCQVJPVkVSRkxPVyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG92ZXJmbG93ID09PSAnSGlkZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbm5lckVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfUE9QT1ZFUkZMT1cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlubmVyRWxlO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5pdGVtQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVTd2l0Y2goZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuYWN0aXZlRWxlU3dpdGNoID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVSZW1vdmUoZWxlLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmFjdGl2ZUVsZVJlbW92ZSA9IGZ1bmN0aW9uIChjdXJFbGUpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmFjdGl2ZUVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZSA9IGN1ckVsZTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudHJndEVsZSkgJiYgIWN1ckVsZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEVNUExBVEUpKSB7XG4gICAgICAgICAgICAgICAgY3VyRWxlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChbXSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Rvb2xiYXInO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdGhpcy50YlJlc2l6ZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1Qb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucG9wT2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNoZWNrT3ZlcmZsb3cgPSB0aGlzLmNoZWNrT3ZlcmZsb3coZWxlLCBlbGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDTFNfSVRFTVMpWzBdKTtcbiAgICAgICAgICAgIGlmICghY2hlY2tPdmVyZmxvdykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUhTY3JvbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGVja092ZXJmbG93ICYmIHRoaXMuc2Nyb2xsTW9kdWxlICYmICh0aGlzLm9mZnNldFdpZCA9PT0gZWxlLm9mZnNldFdpZHRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9mZnNldFdpZCA+IGVsZS5vZmZzZXRXaWR0aCB8fCBjaGVja092ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPdmVyZmxvd01vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBSZWZyZXNoKHRoaXMucG9wT2JqLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9mZnNldFdpZCA9IGVsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHRoaXMudGJSZXNpemUgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgdmFyIHRFbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2l0ZW1zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveU1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aWQgPSB0RWxlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0RWxlLCB7ICd3aWR0aCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdChuZXdQcm9wLndpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3BPYmogJiYgd2lkIDwgdEVsZS5vZmZzZXRXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXBSZWZyZXNoKHRoaXMucG9wT2JqLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdChuZXdQcm9wLmhlaWdodCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3ZlcmZsb3dNb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveU1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZCh0RWxlLCBDTFNfUlRMKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcC5lbmFibGVSdGwgPyB0aGlzLmFkZCh0RWxlLCBDTFNfUlRMKSA6IHRoaXMucmVtb3ZlKHRFbGUsIENMU19SVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc2Nyb2xsTW9kdWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3AuZW5hYmxlUnRsID8gdGhpcy5hZGQodGhpcy5zY3JvbGxNb2R1bGUuZWxlbWVudCwgQ0xTX1JUTCkgOiB0aGlzLnJlbW92ZSh0aGlzLnNjcm9sbE1vZHVsZS5lbGVtZW50LCBDTFNfUlRMKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBvcE9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wLmVuYWJsZVJ0bCA/IHRoaXMuYWRkKHRoaXMucG9wT2JqLmVsZW1lbnQsIENMU19SVEwpIDogdGhpcy5yZW1vdmUodGhpcy5wb3BPYmouZWxlbWVudCwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1Qb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVG9vbGJhcjtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgSXRlbSlcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnU2Nyb2xsYWJsZScpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwib3ZlcmZsb3dNb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwiZW5hYmxlUnRsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcImNsaWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwiYmVmb3JlQ3JlYXRlXCIsIHZvaWQgMCk7XG4gICAgVG9vbGJhciA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV81Lk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIFRvb2xiYXIpO1xuICAgIGV4cG9ydHMuVG9vbGJhciA9IFRvb2xiYXI7XG4gICAgZXhwb3J0cy50b29sYmFyQnVpbGRlciA9IGVqMl9iYXNlXzUuQ3JlYXRlQnVpbGRlcihUb29sYmFyKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdG9vbGJhci90b29sYmFyLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9hY2NvcmRpb25cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBhY2NvcmRpb25fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoYWNjb3JkaW9uXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2NvcmRpb24vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCBlajJfYmFzZV82KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDTFNfQUNSRE5fUk9PVCA9ICdlLWFjcmRuLXJvb3QnO1xuICAgIHZhciBDTFNfUk9PVCA9ICdlLWFjY29yZGlvbic7XG4gICAgdmFyIENMU19JVEVNID0gJ2UtYWNyZG4taXRlbSc7XG4gICAgdmFyIENMU19JVEVNRk9DVVMgPSAnZS1pdGVtLWZvY3VzJztcbiAgICB2YXIgQ0xTX0lURU1ISURFID0gJ2UtaGlkZSc7XG4gICAgdmFyIENMU19IRUFERVIgPSAnZS1hY3Jkbi1oZWFkZXInO1xuICAgIHZhciBDTFNfSEVBREVSSUNOID0gJ2UtYWNyZG4taGVhZGVyLWljb24nO1xuICAgIHZhciBDTFNfSEVBREVSQ1ROID0gJ2UtYWNyZG4taGVhZGVyLWNvbnRlbnQnO1xuICAgIHZhciBDTFNfQ09OVEVOVCA9ICdlLWFjcmRuLXBhbmVsJztcbiAgICB2YXIgQ0xTX0NURU5UID0gJ2UtY29udGVudCc7XG4gICAgdmFyIENMU19UT09HTEVJQ04gPSAnZS10b2dnbGUtaWNvbic7XG4gICAgdmFyIENMU19DT0xMQVBTRUlDTiA9ICdlLXRnbC1jb2xsYXBzZS1pY29uIGUtaWNvbnMnO1xuICAgIHZhciBDTFNfRVhQQU5ESUNOID0gJ2UtZXhwYW5kLWljb24nO1xuICAgIHZhciBDTFNfUlRMID0gJ2UtcnRsJztcbiAgICB2YXIgQ0xTX0NUTkhJREUgPSAnZS1jb250ZW50LWhpZGUnO1xuICAgIHZhciBDTFNfU0xDVCA9ICdlLXNlbGVjdCc7XG4gICAgdmFyIENMU19TTENURUQgPSAnZS1zZWxlY3RlZCc7XG4gICAgdmFyIENMU19BQ1RJVkUgPSAnZS1hY3RpdmUnO1xuICAgIHZhciBDTFNfQU5JTUFURSA9ICdlLWFuaW1hdGUnO1xuICAgIHZhciBDTFNfRElTQUJMRSA9ICdlLW92ZXJsYXknO1xuICAgIHZhciBDTFNfVE9HQU5JTUFURSA9ICdlLXRvZ2dsZS1hbmltYXRpb24nO1xuICAgIHZhciBDTFNfTkVTVCA9ICdlLW5lc3RlZCc7XG4gICAgdmFyIENMU19FWFBBTkRTVEFURSA9ICdlLWV4cGFuZC1zdGF0ZSc7XG4gICAgdmFyIEFjY29yZGlvbkFjdGlvblNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjY29yZGlvbkFjdGlvblNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV80LkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnU2xpZGVEb3duJylcbiAgICBdLCBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZWZmZWN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoNDAwKVxuICAgIF0sIEFjY29yZGlvbkFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdsaW5lYXInKVxuICAgIF0sIEFjY29yZGlvbkFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJlYXNpbmdcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFjY29yZGlvbkFjdGlvblNldHRpbmdzID0gQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3M7XG4gICAgdmFyIEFjY29yZGlvbkFuaW1hdGlvblNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjY29yZGlvbkFuaW1hdGlvblNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV80LkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNS5Db21wbGV4KHsgZWZmZWN0OiAnU2xpZGVVcCcsIGR1cmF0aW9uOiA0MDAsIGVhc2luZzogJ2xpbmVhcicgfSwgQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MpXG4gICAgXSwgQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImNvbGxhcHNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzUuQ29tcGxleCh7IGVmZmVjdDogJ1NsaWRlRG93bicsIGR1cmF0aW9uOiA0MDAsIGVhc2luZzogJ2xpbmVhcicgfSwgQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MpXG4gICAgXSwgQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImV4cGFuZFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3MgPSBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncztcbiAgICB2YXIgQWNjb3JkaW9uSXRlbSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBY2NvcmRpb25JdGVtLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY2NvcmRpb25JdGVtKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBY2NvcmRpb25JdGVtO1xuICAgIH0oZWoyX2Jhc2VfNC5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodW5kZWZpbmVkKVxuICAgIF0sIEFjY29yZGlvbkl0ZW0ucHJvdG90eXBlLCBcImNvbnRlbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh1bmRlZmluZWQpXG4gICAgXSwgQWNjb3JkaW9uSXRlbS5wcm90b3R5cGUsIFwiaGVhZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodW5kZWZpbmVkKVxuICAgIF0sIEFjY29yZGlvbkl0ZW0ucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodW5kZWZpbmVkKVxuICAgIF0sIEFjY29yZGlvbkl0ZW0ucHJvdG90eXBlLCBcImljb25Dc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBBY2NvcmRpb25JdGVtLnByb3RvdHlwZSwgXCJleHBhbmRlZFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWNjb3JkaW9uSXRlbSA9IEFjY29yZGlvbkl0ZW07XG4gICAgdmFyIEFjY29yZGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBY2NvcmRpb24sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY29yZGlvbihvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICBtb3ZlVXA6ICd1cGFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlRG93bjogJ2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgZW50ZXI6ICdlbnRlcicsXG4gICAgICAgICAgICAgICAgc3BhY2U6ICdzcGFjZScsXG4gICAgICAgICAgICAgICAgaG9tZTogJ2hvbWUnLFxuICAgICAgICAgICAgICAgIGVuZDogJ2VuZCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5pc0Rlc3Ryb3kgPSB0cnVlO1xuICAgICAgICAgICAgd2hpbGUgKGVsZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgZWxlLnJlbW92ZUNoaWxkKGVsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRyZ3RFbGUpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5jdHJsVGVtLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKHRoaXMuY3RybFRlbS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgWydhcmlhLWRpc2FibGVkJywgJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJywgJ3JvbGUnXS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyYikge1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXN0ZWQgPSBlajJfYmFzZV8zLmNsb3Nlc3QodGhpcy5lbGVtZW50LCAnLicgKyBDTFNfQ09OVEVOVCk7XG4gICAgICAgICAgICB0aGlzLmlzTmVzdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNEZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0Rlc3Ryb3kgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChuZXN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgbmVzdGVkLmNsYXNzTGlzdC5hZGQoQ0xTX05FU1QpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNOZXN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xTX0FDUkROX1JPT1QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5lbGVtZW50LCBDTFNfUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtcyA9IFtdO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChlbGUsIHZhbCkge1xuICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQodmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoZWxlLCB2YWwpIHtcbiAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKHZhbCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRyb2woKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBlajJfYmFzZV82LmZvcm1hdFVuaXQodGhpcy53aWR0aCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWoyX2Jhc2VfNi5mb3JtYXRVbml0KHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd3aWR0aCc6IHdpZHRoLCAnaGVpZ2h0JzogaGVpZ2h0IH0pO1xuICAgICAgICAgICAgdmFyIGFyaWFBdHRyID0ge1xuICAgICAgICAgICAgICAgICdhcmlhLWRpc2FibGVkJzogJ2ZhbHNlJywgJ3JvbGUnOiAncHJlc2VudGF0aW9uJywgJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJzogJ3RydWUnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0RXhwYW5kID0gdGhpcy5leHBhbmRlZEl0ZW1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgYXJpYUF0dHIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kTW9kZSA9PT0gJ1NpbmdsZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW11bHRpc2VsZWN0YWJsZScsICdmYWxzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnJlbmRlckNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRyZ3RFbGUgPSAodGhpcy5lbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApID8gZWoyX2Jhc2VfMy5zZWxlY3QoJ2RpdicsIHRoaXMuZWxlbWVudCkgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJJdGVtcygpO1xuICAgICAgICAgICAgdGhpcy5pbml0SXRlbUV4cGFuZCgpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmtleU1vZHVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleU1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc05lc3RlZCAmJiAhdGhpcy5pc0Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJpcHBsZUVmZmVjdCh0aGlzLmVsZW1lbnQsIHsgc2VsZWN0b3I6ICcuJyArIENMU19IRUFERVIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNOZXN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleU1vZHVsZSA9IG5ldyBlajJfYmFzZV8xLktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5QWN0aW9uSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBrZXlDb25maWdzOiB0aGlzLmtleUNvbmZpZ3MsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ2tleWRvd24nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZm9jdXNJbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xTX0lURU1GT0NVUyk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZm9jdXNPdXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMU19JVEVNRk9DVVMpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmN0cmxUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmN0cmxUZW0gPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlcyA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbjtcbiAgICAgICAgICAgIHZhciBjb250ZW50O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hZGRDbGFzcyhpbm5lckVsZXMsIFtDTFNfSVRFTV0pO1xuICAgICAgICAgICAgW10uc2xpY2UuY2FsbChpbm5lckVsZXMpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgZWwuaWQgPSBlajJfYmFzZV8yLmdldFVuaXF1ZUlEKCdhY3Jkbl9pdGVtJyk7XG4gICAgICAgICAgICAgICAgaWYgKGVsLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkKGVsLmNoaWxkcmVuWzBdLCBDTFNfSEVBREVSKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlciA9IGVsLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoaGVhZGVyLCB7ICd0YWJpbmRleCc6ICcwJywgJ3JvbGUnOiAnaGVhZGluZycsICdhcmlhLWxldmVsJzogaW5uZXJFbGVzLmxlbmd0aC50b1N0cmluZygpIH0pO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuaWQgPSBlajJfYmFzZV8yLmdldFVuaXF1ZUlEKCdhY3Jkbl9oZWFkZXInKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGhlYWRlciwgJ2ZvY3VzJywgX3RoaXMuZm9jdXNJbiwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoaGVhZGVyLCAnYmx1cicsIF90aGlzLmZvY3VzT3V0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJFbGUgPSBoZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJFbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckVsZS5jbGFzc0xpc3QuYWRkKENMU19IRUFERVJDVE4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBlbC5jaGlsZHJlblsxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuaWQgPSBlajJfYmFzZV8yLmdldFVuaXF1ZUlEKCdhY3Jkbl9wYW5lbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGNvbnRlbnQuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKENMU19TTENUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKF90aGlzLnRvZ2dsZUljb25HZW5lcmF0ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNvbnRlbnQsIFtDTFNfQ09OVEVOVCwgQ0xTX0NUTkhJREVdLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoY29udGVudCwgeyAnYXJpYS1sYWJlbGxlZGJ5JzogaGVhZGVyLmlkLCAnYXJpYS1oaWRkZW4nOiAndHJ1ZScgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKENMU19DVEVOVCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS50b2dnbGVJY29uR2VuZXJhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGdsSWNvbiA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19UT09HTEVJQ04gfSk7XG4gICAgICAgICAgICB2YXIgaGRyQ29sSWNvbiA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBDTFNfQ09MTEFQU0VJQ04gfSk7XG4gICAgICAgICAgICB0Z2xJY29uLmFwcGVuZENoaWxkKGhkckNvbEljb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRnbEljb247XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuaW5pdEl0ZW1FeHBhbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5pbml0RXhwYW5kLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5leHBhbmRNb2RlID09PSAnU2luZ2xlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kSXRlbSh0cnVlLCB0aGlzLmluaXRFeHBhbmRbbGVuIC0gMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEl0ZW0odHJ1ZSwgdGhpcy5pbml0RXhwYW5kW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUucmVuZGVySXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmluaXRFeHBhbmQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0RXhwYW5kID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLml0ZW1zO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudHJndEVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN0cmxUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWxlICYmIGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpbm5lckl0ZW0gPSBfdGhpcy5yZW5kZXJJbm5lckl0ZW0oaXRlbSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoaW5uZXJJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVySXRlbS5jaGlsZEVsZW1lbnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChpbm5lckl0ZW0ucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSEVBREVSKSwgJ2ZvY3VzJywgX3RoaXMuZm9jdXNJbiwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGlubmVySXRlbS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IRUFERVIpLCAnYmx1cicsIF90aGlzLmZvY3VzT3V0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0cmd0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0ge307XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB2YXIgdGdsSWNvbjtcbiAgICAgICAgICAgIHZhciBhY3JkRWxlID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19ST09UKTtcbiAgICAgICAgICAgIGlmIChhY3JkRWxlICE9PSB0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmd0LmNsYXNzTGlzdC5hZGQoJ2UtdGFyZ2V0Jyk7XG4gICAgICAgICAgICB2YXIgYWNyZG5JdGVtID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIHZhciBhY3JkbkhkciA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0cmd0LCAnLicgKyBDTFNfSEVBREVSKTtcbiAgICAgICAgICAgIHZhciBhY3JkbkN0biA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0cmd0LCAnLicgKyBDTFNfQ09OVEVOVCk7XG4gICAgICAgICAgICBpZiAoYWNyZG5JdGVtICYmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGFjcmRuSGRyKSB8fCBlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGFjcmRuQ3RuKSkpIHtcbiAgICAgICAgICAgICAgICBhY3JkbkhkciA9IGFjcmRuSXRlbS5jaGlsZHJlblswXTtcbiAgICAgICAgICAgICAgICBhY3JkbkN0biA9IGFjcmRuSXRlbS5jaGlsZHJlblsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhY3Jkbkhkcikge1xuICAgICAgICAgICAgICAgIHRnbEljb24gPSBlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfVE9PR0xFSUNOLCBhY3Jkbkhkcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWNyZG5DdG5JdGVtO1xuICAgICAgICAgICAgaWYgKGFjcmRuQ3RuKSB7XG4gICAgICAgICAgICAgICAgYWNyZG5DdG5JdGVtID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGFjcmRuQ3RuLCAnLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWNyZEFjdGl2ZSA9IFtdO1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmdldEluZGV4QnlJdGVtKGFjcmRuSXRlbSk7XG4gICAgICAgICAgICBpZiAoYWNyZG5DdG5JdGVtKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRBcmdzLml0ZW0gPSB0aGlzLml0ZW1zW3RoaXMuZ2V0SW5kZXhCeUl0ZW0oYWNyZG5DdG5JdGVtKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudEFyZ3Mub3JpZ2luYWxFdmVudCA9IGU7XG4gICAgICAgICAgICB2YXIgY3RuQ2hlY2sgPSAhZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0Z2xJY29uKSAmJiBlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudHJndEVsZSkgJiYgYWNyZG5JdGVtLmNoaWxkRWxlbWVudENvdW50IDw9IDE7XG4gICAgICAgICAgICBpZiAoY3RuQ2hlY2sgJiYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoYWNyZG5DdG4pIHx8ICFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19IRUFERVIgKyAnIC4nICsgQ0xTX1RPT0dMRUlDTiwgYWNyZG5DdG5JdGVtKSkpKSB7XG4gICAgICAgICAgICAgICAgYWNyZG5JdGVtLmFwcGVuZENoaWxkKHRoaXMuY29udGVudFJlbmRlcmluZyhpbmRleCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYUF0dHJVcGRhdGUoYWNyZG5JdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xpY2tlZCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICB2YXIgY250Y2xrQ2hlY2sgPSAoYWNyZG5DdG4gJiYgIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMy5zZWxlY3QoJy5lLXRhcmdldCcsIGFjcmRuQ3RuKSkpO1xuICAgICAgICAgICAgY250Y2xrQ2hlY2sgPSBjbnRjbGtDaGVjayAmJiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfUk9PVCwgYWNyZG5DdG4pKSB8fCAhKGVqMl9iYXNlXzMuY2xvc2VzdCh0cmd0LCAnLicgKyBDTFNfUk9PVCkgPT09IHRoaXMuZWxlbWVudCkpO1xuICAgICAgICAgICAgdHJndC5jbGFzc0xpc3QucmVtb3ZlKCdlLXRhcmdldCcpO1xuICAgICAgICAgICAgaWYgKHRyZ3QuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19DT05URU5UKSB8fCB0cmd0LmNsYXNzTGlzdC5jb250YWlucyhDTFNfQ1RFTlQpIHx8IGNudGNsa0NoZWNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfQUNUSVZFKSkge1xuICAgICAgICAgICAgICAgICAgICBhY3JkQWN0aXZlLnB1c2goZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGFjcmRBbmlFbGUgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIENMU19JVEVNICsgJyBbJyArIENMU19BTklNQVRFICsgJ10nKSk7XG4gICAgICAgICAgICBpZiAoYWNyZEFuaUVsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhY3JkQW5pRWxlXzEgPSBhY3JkQW5pRWxlOyBfaSA8IGFjcmRBbmlFbGVfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gYWNyZEFuaUVsZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgYWNyZEFjdGl2ZS5wdXNoKGVsLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzYW1lQ29udGVudENoZWNrID0gYWNyZEFjdGl2ZS5pbmRleE9mKGFjcmRuQ3RuSXRlbSkgIT09IC0xICYmIGFjcmRuQ3RuLmdldEF0dHJpYnV0ZSgnZS1hbmltYXRlJykgPT09ICd0cnVlJztcbiAgICAgICAgICAgIHZhciBzYW1lSGVhZGVyID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoYWNyZG5JdGVtKSAmJiAhZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChhY3JkbkhkcikpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWNyZG5DdG5fMSA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19DT05URU5ULCBhY3Jkbkl0ZW0pO1xuICAgICAgICAgICAgICAgIHZhciBhY3JkblJvb3QgPSBlajJfYmFzZV8zLmNsb3Nlc3QoYWNyZG5JdGVtLCAnLicgKyBDTFNfQUNSRE5fUk9PVCk7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZFN0YXRlID0gYWNyZG5Sb290LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0VYUEFORFNUQVRFKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChhY3JkbkN0bl8xKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNhbWVIZWFkZXIgPSAoZXhwYW5kU3RhdGUgPT09IGFjcmRuSXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNWaXNpYmxlKGFjcmRuQ3RuXzEpICYmICghc2FtZUNvbnRlbnRDaGVjayB8fCBhY3JkbkN0bkl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TTENURUQpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlKGFjcmRuQ3RuXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChhY3JkQWN0aXZlLmxlbmd0aCA+IDApICYmIHRoaXMuZXhwYW5kTW9kZSA9PT0gJ1NpbmdsZScgJiYgIXNhbWVDb250ZW50Q2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjcmRBY3RpdmUuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2xsYXBzZShlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgZWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKENMU19FWFBBTkRTVEFURSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZChhY3JkbkN0bl8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGV4cGFuZFN0YXRlKSAmJiAhc2FtZUhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICBleHBhbmRTdGF0ZS5jbGFzc0xpc3QucmVtb3ZlKENMU19FWFBBTkRTVEFURSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmVsZU1vdmVGb2N1cyA9IGZ1bmN0aW9uIChhY3Rpb24sIHJvb3QsIHRyZ3QpIHtcbiAgICAgICAgICAgIHZhciBjbHN0O1xuICAgICAgICAgICAgdmFyIGNsc3RJdGVtID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIGlmICh0cmd0ID09PSByb290KSB7XG4gICAgICAgICAgICAgICAgY2xzdCA9ICgoYWN0aW9uID09PSAnbW92ZVVwJyA/IHRyZ3QubGFzdEVsZW1lbnRDaGlsZCA6IHRyZ3QpLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0hFQURFUikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHJndC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0hFQURFUikpIHtcbiAgICAgICAgICAgICAgICBjbHN0SXRlbSA9IChhY3Rpb24gPT09ICdtb3ZlVXAnID8gY2xzdEl0ZW0ucHJldmlvdXNFbGVtZW50U2libGluZyA6IGNsc3RJdGVtLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgICAgICAgICAgICAgaWYgKGNsc3RJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsc3QgPSBlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCBjbHN0SXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNsc3QpIHtcbiAgICAgICAgICAgICAgICBjbHN0LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgY2xzdDtcbiAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIHRyZ3QgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBjb250ZW50O1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVVcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlTW92ZUZvY3VzKGUuYWN0aW9uLCByb290LCB0cmd0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZURvd24nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZU1vdmVGb2N1cyhlLmFjdGlvbiwgcm9vdCwgdHJndCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB0cmd0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGNvbnRlbnQpICYmIGNvbnRlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19DT05URU5UKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuZ2V0QXR0cmlidXRlKCdlLWFuaW1hdGUnKSAhPT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJndC5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJndC5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvbWUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgICAgICAgIGNsc3QgPSBlLmFjdGlvbiA9PT0gJ2hvbWUnID8gcm9vdC5maXJzdEVsZW1lbnRDaGlsZC5jaGlsZHJlblswXSA6IHJvb3QubGFzdEVsZW1lbnRDaGlsZC5jaGlsZHJlblswXTtcbiAgICAgICAgICAgICAgICAgICAgY2xzdC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5oZWFkZXJFbGVHZW5lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSEVBREVSLCBpZDogZWoyX2Jhc2VfMi5nZXRVbmlxdWVJRCgnYWNyZG5faGVhZGVyJykgfSk7XG4gICAgICAgICAgICB2YXIgYXJpYUF0dHIgPSB7XG4gICAgICAgICAgICAgICAgJ3RhYmluZGV4JzogJzAnLCAncm9sZSc6ICdoZWFkaW5nJywgJ2FyaWEtZXhwYW5kZWQnOiAnZmFsc2UnLCAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnLCAnYXJpYS1sZXZlbCc6IHRoaXMuaXRlbXMubGVuZ3RoLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoaGVhZGVyLCBhcmlhQXR0cik7XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnJlbmRlcklubmVySXRlbSA9IGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlO1xuICAgICAgICAgICAgaW5uZXJFbGUgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSVRFTSB9KTtcbiAgICAgICAgICAgIGlubmVyRWxlLmlkID0gZWoyX2Jhc2VfMi5nZXRVbmlxdWVJRCgnYWNyZG5faXRlbScpO1xuICAgICAgICAgICAgaWYgKGl0ZW0uaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0bkVsZSA9IHRoaXMuaGVhZGVyRWxlR2VuZXJhdGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgaGRyRWxlID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0hFQURFUkNUTiB9KTtcbiAgICAgICAgICAgICAgICBjdG5FbGUuYXBwZW5kQ2hpbGQoaGRyRWxlKTtcbiAgICAgICAgICAgICAgICBjdG5FbGUuYXBwZW5kQ2hpbGQodGhpcy5mZXRjaEVsZW1lbnQoaGRyRWxlLCBpdGVtLmhlYWRlciwgaW5kZXgsIHRydWUpKTtcbiAgICAgICAgICAgICAgICBpbm5lckVsZS5hcHBlbmRDaGlsZChjdG5FbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhkciA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19IRUFERVIsIGlubmVyRWxlKTtcbiAgICAgICAgICAgIGlmIChpdGVtLmV4cGFuZGVkICYmICFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSAmJiAoIXRoaXMuZW5hYmxlUGVyc2lzdGVuY2UpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5pdEV4cGFuZC5pbmRleE9mKGluZGV4KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RXhwYW5kLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJFbGUuY2xhc3NMaXN0LmFkZChpdGVtLmNzc0NsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmljb25Dc3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGRySWNuRWxlID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0hFQURFUklDTiB9KTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBpdGVtLmljb25Dc3MgKyAnIGUtaWNvbnMnIH0pO1xuICAgICAgICAgICAgICAgIGhkckljbkVsZS5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChoZHIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkciA9IHRoaXMuaGVhZGVyRWxlR2VuZXJhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaGRyLmFwcGVuZENoaWxkKGhkckljbkVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmFwcGVuZENoaWxkKGhkcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBoZHIuaW5zZXJ0QmVmb3JlKGhkckljbkVsZSwgaGRyLmNoaWxkTm9kZXNbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGRySWNvbiA9IHRoaXMudG9nZ2xlSWNvbkdlbmVyYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoaGRyKSkge1xuICAgICAgICAgICAgICAgICAgICBoZHIgPSB0aGlzLmhlYWRlckVsZUdlbmVyYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmFwcGVuZENoaWxkKGhkcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhkci5hcHBlbmRDaGlsZChoZHJJY29uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgQ0xTX1NMQ1QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlubmVyRWxlO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmZldGNoRWxlbWVudCA9IGZ1bmN0aW9uIChlbGUsIHZhbHVlLCBpbmRleCwgaXNIZWFkZXIpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuO1xuICAgICAgICAgICAgdmFyIHRlbVN0cmluZztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsdWUpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlVmFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRlbVN0cmluZyA9IGVsZVZhbC5vdXRlckhUTUwudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfMi5jb21waWxlKHRlbVN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuZGV0YWNoKGVsZVZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfMi5jb21waWxlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZUZuKSAmJiB0ZW1wbGF0ZUZuKCkubGVuZ3RoID4gMCAmJiAhKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQodGVtcGxhdGVGbigpWzBdLnRhZ05hbWUpICYmIHRlbXBsYXRlRm4oKS5sZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgW10uc2xpY2UuY2FsbCh0ZW1wbGF0ZUZuKCkpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlbC50YWdOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRlbVN0cmluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW2luZGV4XS5oZWFkZXIgPSB0ZW1TdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW2luZGV4XS5jb250ZW50ID0gdGVtU3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5hcmlhQXR0clVwZGF0ZSA9IGZ1bmN0aW9uIChpdGVtRWxlKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgaXRlbUVsZSk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19DT05URU5ULCBpdGVtRWxlKTtcbiAgICAgICAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCBjb250ZW50LmlkKTtcbiAgICAgICAgICAgIGNvbnRlbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsbGVkYnknLCBoZWFkZXIuaWQpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmNvbnRlbnRSZW5kZXJpbmcgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5pdGVtc1tpbmRleF0uY29udGVudDtcbiAgICAgICAgICAgIHZhciBpdGVtY250ID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0NPTlRFTlQgKyAnICcgKyBDTFNfQ1ROSElERSwgaWQ6IGVqMl9iYXNlXzIuZ2V0VW5pcXVlSUQoJ2FjcmRuX3BhbmVsJykgfSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoaXRlbWNudCwgeyAnYXJpYS1oaWRkZW4nOiAndHJ1ZScgfSk7XG4gICAgICAgICAgICB2YXIgY3RuID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0NURU5UIH0pO1xuICAgICAgICAgICAgaXRlbWNudC5hcHBlbmRDaGlsZCh0aGlzLmZldGNoRWxlbWVudChjdG4sIGNvbnRlbnQsIGluZGV4LCBmYWxzZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW1jbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZXhwYW5kID0gZnVuY3Rpb24gKHRyZ3QpIHtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3M7XG4gICAgICAgICAgICB2YXIgdHJndEl0ZW1FbGUgPSBlajJfYmFzZV8zLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQodHJndCkgfHwgKGVqMl9iYXNlXzMuaXNWaXNpYmxlKHRyZ3QpICYmIHRyZ3QuZ2V0QXR0cmlidXRlKCdlLWFuaW1hdGUnKSAhPT0gJ3RydWUnKSB8fCB0cmd0SXRlbUVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0RJU0FCTEUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFjcmRuUm9vdCA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0cmd0SXRlbUVsZSwgJy4nICsgQ0xTX0FDUkROX1JPT1QpO1xuICAgICAgICAgICAgdmFyIGV4cGFuZFN0YXRlID0gYWNyZG5Sb290LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0VYUEFORFNUQVRFKTtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hbmltYXRpb24uZXhwYW5kLmVmZmVjdCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb24uZXhwYW5kLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5leHBhbmQuZWFzaW5nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfVE9PR0xFSUNOLCB0cmd0SXRlbUVsZSkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBldmVudEFyZ3MgPSB7IGVsZW1lbnQ6IHRyZ3RJdGVtRWxlLFxuICAgICAgICAgICAgICAgIGl0ZW06IHRoaXMuaXRlbXNbdGhpcy5nZXRJbmRleEJ5SXRlbSh0cmd0SXRlbUVsZSldLFxuICAgICAgICAgICAgICAgIGlzRXhwYW5kZWQ6IHRydWUgfTtcbiAgICAgICAgICAgIHZhciBlZmYgPSBhbmltYXRpb24ubmFtZTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZXhwYW5kaW5nJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKENMU19UT0dBTklNQVRFKTtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtc1B1c2godHJndEl0ZW1FbGUpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGV4cGFuZFN0YXRlKSkge1xuICAgICAgICAgICAgICAgIGV4cGFuZFN0YXRlLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0VYUEFORFNUQVRFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyZ3RJdGVtRWxlLmNsYXNzTGlzdC5hZGQoQ0xTX0VYUEFORFNUQVRFKTtcbiAgICAgICAgICAgIGlmICgoYW5pbWF0aW9uLm5hbWUgPT09ICdOb25lJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZFByb2dyZXNzKCdiZWdpbicsIGljb24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kUHJvZ3Jlc3MoJ2VuZCcsIGljb24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQW5pbWF0aW9uKGVmZiwgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGFuaW1hdGlvbiwgZXZlbnRBcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRBbmltYXRpb24gPSBmdW5jdGlvbiAoZWYsIGljbiwgdHJndCwgdHJndEl0ZW1FbGUsIGFuaW1hdGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHRyZ3RIZ3Q7XG4gICAgICAgICAgICBpZiAoZWYgPT09ICdTbGlkZURvd24nKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kUHJvZ3Jlc3MoJ2JlZ2luJywgaWNuLCB0cmd0LCB0cmd0SXRlbUVsZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3Quc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSB0cmd0SXRlbUVsZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3RIZ3QgPSB0cmd0Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5zdHlsZS5tYXhIZWlnaHQgPSAodHJndC5vZmZzZXRIZWlnaHQpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgdHJndEl0ZW1FbGUuc3R5bGUubWF4SGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmltYXRlLnByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0cmd0SXRlbUVsZS5zdHlsZS5taW5IZWlnaHQgPSAoaGVpZ2h0ICsgdHJndC5vZmZzZXRIZWlnaHQpICsgJ3B4JztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LnNldFN0eWxlQXR0cmlidXRlKHRyZ3QsIHsgJ3Bvc2l0aW9uJzogJycsICdtYXhIZWlnaHQnOiAnJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdHJndEl0ZW1FbGUuc3R5bGUubWluSGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cGFuZFByb2dyZXNzKCdlbmQnLCBpY24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kUHJvZ3Jlc3MoJ2JlZ2luJywgaWNuLCB0cmd0LCB0cmd0SXRlbUVsZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmltYXRlLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kUHJvZ3Jlc3MoJ2VuZCcsIGljbiwgdHJndCwgdHJndEl0ZW1FbGUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXcgZWoyX2Jhc2VfNC5BbmltYXRpb24oYW5pbWF0ZSkuYW5pbWF0ZSh0cmd0KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRQcm9ncmVzcyA9IGZ1bmN0aW9uIChwcm9ncmVzcywgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGV2ZW50QXJncykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUodHJndCwgQ0xTX0NUTkhJREUpO1xuICAgICAgICAgICAgdGhpcy5hZGQodHJndEl0ZW1FbGUsIENMU19TTENURUQpO1xuICAgICAgICAgICAgdGhpcy5hZGQoaWNvbiwgQ0xTX0VYUEFORElDTik7XG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPT09ICdlbmQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQodHJndEl0ZW1FbGUsIENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgIHRyZ3Quc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0cmd0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcsIHsgJ2FyaWEtc2VsZWN0ZWQnOiAndHJ1ZScsICdhcmlhLWV4cGFuZGVkJzogJ3RydWUnIH0pO1xuICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZShDTFNfVE9HQU5JTUFURSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdleHBhbmRlZCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZXhwYW5kZWRJdGVtc1B1c2ggPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleEJ5SXRlbShpdGVtKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmV4cGFuZGVkSXRlbXMuaW5kZXhPZihpbmRleCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1zLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmdldEluZGV4QnlJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5jaGlsZHJlbikuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRlZEl0ZW1zUG9wID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhCeUl0ZW0oaXRlbSk7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbXMuc3BsaWNlKHRoaXMuZXhwYW5kZWRJdGVtcy5pbmRleE9mKGluZGV4KSwgMSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuY29sbGFwc2UgPSBmdW5jdGlvbiAodHJndCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncztcbiAgICAgICAgICAgIHZhciB0cmd0SXRlbUVsZSA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0cmd0LCAnLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0cmd0KSB8fCAhZWoyX2Jhc2VfMy5pc1Zpc2libGUodHJndCkgfHwgdHJndEl0ZW1FbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19ESVNBQkxFKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hbmltYXRpb24uY29sbGFwc2UuZWZmZWN0LFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb24uY29sbGFwc2UuZWFzaW5nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX1RPT0dMRUlDTiwgdHJndEl0ZW1FbGUpLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgZXZlbnRBcmdzID0geyBlbGVtZW50OiB0cmd0SXRlbUVsZSxcbiAgICAgICAgICAgICAgICBpdGVtOiB0aGlzLml0ZW1zW3RoaXMuZ2V0SW5kZXhCeUl0ZW0odHJndEl0ZW1FbGUpXSxcbiAgICAgICAgICAgICAgICBpc0V4cGFuZGVkOiBmYWxzZSB9O1xuICAgICAgICAgICAgdmFyIGVmZiA9IGFuaW1hdGlvbi5uYW1lO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdleHBhbmRpbmcnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbXNQb3AodHJndEl0ZW1FbGUpO1xuICAgICAgICAgICAgdHJndEl0ZW1FbGUuY2xhc3NMaXN0LmFkZChDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKENMU19UT0dBTklNQVRFKTtcbiAgICAgICAgICAgIGlmICgoYW5pbWF0aW9uLm5hbWUgPT09ICdOb25lJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlUHJvZ3Jlc3MoJ2JlZ2luJywgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZVByb2dyZXNzKCdlbmQnLCBpY29uLCB0cmd0LCB0cmd0SXRlbUVsZSwgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlQW5pbWF0aW9uKGVmZiwgdHJndCwgdHJndEl0ZW1FbGUsIGljb24sIGFuaW1hdGlvbiwgZXZlbnRBcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5jb2xsYXBzZUFuaW1hdGlvbiA9IGZ1bmN0aW9uIChlZiwgdHJndCwgdHJndEl0RWwsIGljbiwgYW5pbWF0ZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBoZWlnaHQ7XG4gICAgICAgICAgICB2YXIgdHJndEhlaWdodDtcbiAgICAgICAgICAgIHZhciBpdGVtSGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHJlbWFpbjtcbiAgICAgICAgICAgIGlmIChlZiA9PT0gJ1NsaWRlVXAnKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodCA9IHRyZ3RJdEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdHJndEl0RWwuc3R5bGUubWluSGVpZ2h0ID0gaXRlbUhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3Quc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSB0cmd0SXRFbC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3RIZWlnaHQgPSB0cmd0Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5zdHlsZS5tYXhIZWlnaHQgPSB0cmd0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VQcm9ncmVzcygnYmVnaW4nLCBpY24sIHRyZ3QsIHRyZ3RJdEVsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbWFpbiA9ICgoaGVpZ2h0IC0gKHRyZ3RIZWlnaHQgLSB0cmd0Lm9mZnNldEhlaWdodCkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbiA8IGl0ZW1IZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZ3RJdEVsLnN0eWxlLm1pbkhlaWdodCA9IHJlbWFpbiArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0cmd0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlUHJvZ3Jlc3MoJ2VuZCcsIGljbiwgdHJndCwgdHJndEl0RWwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB0cmd0SXRFbC5zdHlsZS5taW5IZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNS5zZXRTdHlsZUF0dHJpYnV0ZSh0cmd0LCB7ICdwb3NpdGlvbic6ICcnLCAnbWF4SGVpZ2h0JzogJycsICdkaXNwbGF5JzogJycgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFuaW1hdGUuYmVnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlUHJvZ3Jlc3MoJ2JlZ2luJywgaWNuLCB0cmd0LCB0cmd0SXRFbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmltYXRlLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VQcm9ncmVzcygnZW5kJywgaWNuLCB0cmd0LCB0cmd0SXRFbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV80LkFuaW1hdGlvbihhbmltYXRlKS5hbmltYXRlKHRyZ3QpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmNvbGxhcHNlUHJvZ3Jlc3MgPSBmdW5jdGlvbiAocHJvZ3Jlc3MsIGljb24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBldmVudEFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGljb24sIENMU19FWFBBTkRJQ04pO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUodHJndEl0ZW1FbGUsIENMU19TTENURUQpO1xuICAgICAgICAgICAgaWYgKHByb2dyZXNzID09PSAnZW5kJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRyZ3QsIENMU19DVE5ISURFKTtcbiAgICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1RPR0FOSU1BVEUpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRyZ3RJdGVtRWxlLCBDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgICAgICB0cmd0LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0cmd0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcsIHsgJ2FyaWEtc2VsZWN0ZWQnOiAnZmFsc2UnLCAnYXJpYS1leHBhbmRlZCc6ICdmYWxzZScgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdleHBhbmRlZCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnYWNjb3JkaW9uJztcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5pdGVtQXR0cmliVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1FbGUgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5jaGlsZHJlbik7XG4gICAgICAgICAgICB2YXIgaXRlbUxlbiA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgaXRlbUVsZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCBlbGUpLnNldEF0dHJpYnV0ZSgnYXJpYS1sZXZlbCcsICcnICsgaXRlbUxlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5hZGRJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGUuY2hpbGRFbGVtZW50Q291bnQgPj0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZShpbmRleCwgMCwgaXRlbSk7XG4gICAgICAgICAgICAgICAgdmFyIGlubmVySXRlbUVsZSA9IHRoaXMucmVuZGVySW5uZXJJdGVtKGl0ZW0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlLmNoaWxkRWxlbWVudENvdW50ID09PSBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoaW5uZXJJdGVtRWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoaW5uZXJJdGVtRWxlLCBlbGUuY2hpbGRyZW5baW5kZXhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGlubmVySXRlbUVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IRUFERVIpLCAnZm9jdXMnLCB0aGlzLmZvY3VzSW4sIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChpbm5lckl0ZW1FbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSEVBREVSKSwgJ2JsdXInLCB0aGlzLmZvY3VzT3V0LCB0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1BdHRyaWJVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1SZWZyZXNoKGVsZSk7XG4gICAgICAgICAgICBpZiAoaXRlbS5leHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kSXRlbSh0cnVlLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZXhwYW5kZWRJdGVtUmVmcmVzaCA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKGVsZS5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TTENURUQpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cGFuZGVkSXRlbXNQdXNoKGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLmRldGFjaChlbGUpO1xuICAgICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhpcy5pdGVtQXR0cmliVXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtUmVmcmVzaCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlbGUpIHx8IGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgZWxlKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGUuY2hpbGRyZW5bMF0uZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5oaWRlSXRlbSA9IGZ1bmN0aW9uIChpbmRleCwgaXNIaWRkZW4pIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGlzSGlkZGVuKSkge1xuICAgICAgICAgICAgICAgIGlzSGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlzSGlkZGVuID8gdGhpcy5hZGQoZWxlLCBDTFNfSVRFTUhJREUpIDogdGhpcy5yZW1vdmUoZWxlLCBDTFNfSVRFTUhJREUpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmVuYWJsZUl0ZW0gPSBmdW5jdGlvbiAoaW5kZXgsIGlzRW5hYmxlKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWxlSGVhZGVyID0gZWxlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgaWYgKGlzRW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoZWxlLCBDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKGVsZUhlYWRlciwgeyAndGFiaW5kZXgnOiAnMCcsICdhcmlhLWRpc2FibGVkJzogJ2ZhbHNlJyB9KTtcbiAgICAgICAgICAgICAgICBlbGVIZWFkZXIuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kSXRlbShmYWxzZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZU1vdmVGb2N1cygnbW92ZWRvd24nLCB0aGlzLmVsZW1lbnQsIGVsZUhlYWRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGVsZSwgQ0xTX0RJU0FCTEUpO1xuICAgICAgICAgICAgICAgIGVsZUhlYWRlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIGVsZUhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZXhwYW5kSXRlbSA9IGZ1bmN0aW9uIChpc0V4cGFuZCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm9vdCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cGFuZE1vZGUgPT09ICdTaW5nbGUnICYmIGlzRXhwYW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSByb290LmNoaWxkcmVuW3Jvb3QuY2hpbGRFbGVtZW50Q291bnQgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtRXhwYW5kKGlzRXhwYW5kLCBlbGUsIHRoaXMuZ2V0SW5kZXhCeUl0ZW0oZWxlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLml0ZW1FeHBhbmQoaXNFeHBhbmQsIGVsLCBfdGhpcy5nZXRJbmRleEJ5SXRlbShlbCkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlbGUpIHx8ICFlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TTENUKSB8fCAoZWxlLmNsYXNzTGlzdC5jb250YWlucyhDTFNfQUNUSVZFKSAmJiBpc0V4cGFuZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kTW9kZSA9PT0gJ1NpbmdsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kSXRlbShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtRXhwYW5kKGlzRXhwYW5kLCBlbGUsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuaXRlbUV4cGFuZCA9IGZ1bmN0aW9uIChpc0V4cGFuZCwgZWxlLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGN0biA9IGVsZS5jaGlsZHJlblsxXTtcbiAgICAgICAgICAgIGlmIChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19ESVNBQkxFKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGN0bikgJiYgaXNFeHBhbmQpIHtcbiAgICAgICAgICAgICAgICBjdG4gPSB0aGlzLmNvbnRlbnRSZW5kZXJpbmcoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChjdG4pO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYUF0dHJVcGRhdGUoZWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoY3RuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlzRXhwYW5kID8gdGhpcy5leHBhbmQoY3RuKSA6IHRoaXMuY29sbGFwc2UoY3RuKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlFbnRpdHkgPSBbJ2V4cGFuZGVkSXRlbXMnXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChrZXlFbnRpdHkpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciBhY3JkbiA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3AuZW5hYmxlUnRsID8gdGhpcy5hZGQoYWNyZG4sIENMU19SVEwpIDogdGhpcy5yZW1vdmUoYWNyZG4sIENMU19SVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyAnaGVpZ2h0JzogZWoyX2Jhc2VfNi5mb3JtYXRVbml0KG5ld1Byb3AuaGVpZ2h0KSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyAnd2lkdGgnOiBlajJfYmFzZV82LmZvcm1hdFVuaXQobmV3UHJvcC53aWR0aCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXhwYW5kTW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UHJvcC5leHBhbmRNb2RlID09PSAnU2luZ2xlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRJdGVtcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kSXRlbShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tdWx0aXNlbGVjdGFibGUnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQWNjb3JkaW9uO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBBY2NvcmRpb25JdGVtKVxuICAgIF0sIEFjY29yZGlvbi5wcm90b3R5cGUsIFwiaXRlbXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnMTAwJScpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdNdWx0aXBsZScpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJleHBhbmRNb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzUuQ29tcGxleCh7fSwgQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3MpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJhbmltYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJjbGlja2VkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIEFjY29yZGlvbi5wcm90b3R5cGUsIFwiZXhwYW5kaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIEFjY29yZGlvbi5wcm90b3R5cGUsIFwiZXhwYW5kZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIEFjY29yZGlvbi5wcm90b3R5cGUsIFwiZGVzdHJveWVkXCIsIHZvaWQgMCk7XG4gICAgQWNjb3JkaW9uID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgQWNjb3JkaW9uKTtcbiAgICBleHBvcnRzLkFjY29yZGlvbiA9IEFjY29yZGlvbjtcbiAgICBleHBvcnRzLmFjY29yZGlvbkJ1aWxkZXIgPSBlajJfYmFzZV80LkNyZWF0ZUJ1aWxkZXIoQWNjb3JkaW9uKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYWNjb3JkaW9uL2FjY29yZGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbnRleHQtbWVudVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGNvbnRleHRfbWVudV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChjb250ZXh0X21lbnVfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbnRleHQtbWVudS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWxpc3RzXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9saXN0c18xLCBlajJfcG9wdXBzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERPV05BUlJPVyA9ICdkb3duYXJyb3cnO1xuICAgIHZhciBFTlRFUiA9ICdlbnRlcic7XG4gICAgdmFyIEVTQ0FQRSA9ICdlc2NhcGUnO1xuICAgIHZhciBGT0NVU0VEID0gJ2UtZm9jdXNlZCc7XG4gICAgdmFyIEhFQURFUiA9ICdlLW1lbnVoZWFkZXInO1xuICAgIHZhciBMRUZUQVJST1cgPSAnbGVmdGFycm93JztcbiAgICB2YXIgUklHSFRBUlJPVyA9ICdyaWdodGFycm93JztcbiAgICB2YXIgUlRMID0gJ2UtcnRsJztcbiAgICB2YXIgU0VMRUNURUQgPSAnZS1zZWxlY3RlZCc7XG4gICAgdmFyIFNFUEFSQVRPUiA9ICdlLXNlcGFyYXRvcic7XG4gICAgdmFyIFVQQVJST1cgPSAndXBhcnJvdyc7XG4gICAgdmFyIFdSQVBQRVIgPSAnZS1jb250ZXh0bWVudS13cmFwcGVyJztcbiAgICB2YXIgQ0FSRVQgPSAnZS1jYXJldCc7XG4gICAgdmFyIElURU0gPSAnZS1tZW51LWl0ZW0nO1xuICAgIHZhciBESVNBQkxFRCA9ICdlLWRpc2FibGVkJztcbiAgICB2YXIgSElERSA9ICdlLW1lbnUtaGlkZSc7XG4gICAgdmFyIElDT05TID0gJ2UtaWNvbnMnO1xuICAgIHZhciBNZW51SXRlbSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhNZW51SXRlbSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gTWVudUl0ZW0oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1lbnVJdGVtO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgTWVudUl0ZW0ucHJvdG90eXBlLCBcImljb25Dc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwiaWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwic2VwYXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgTWVudUl0ZW0pXG4gICAgXSwgTWVudUl0ZW0ucHJvdG90eXBlLCBcIml0ZW1zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgTWVudUl0ZW0ucHJvdG90eXBlLCBcInRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwidXJsXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5NZW51SXRlbSA9IE1lbnVJdGVtO1xuICAgIHZhciBDb250ZXh0TWVudSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDb250ZXh0TWVudSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQ29udGV4dE1lbnUob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmFuaW1hdGlvbiA9IG5ldyBlajJfYmFzZV8zLkFuaW1hdGlvbih7fSk7XG4gICAgICAgICAgICBfdGhpcy5uYXZJZHggPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmlzVGFwSG9sZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnRhZ05hbWUgPT09ICdFSi1DT05URVhUTUVOVScpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWpJbnN0ID0gZWoyX2Jhc2VfNC5nZXRWYWx1ZSgnZWoyX2luc3RhbmNlcycsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIHVsID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdFSi1DT05URVhUTUVOVScsIHsgY2xhc3NOYW1lOiBXUkFQUEVSIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh1bCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV81LmRldGFjaCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHVsO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLScgKyB0aGlzLmdldE1vZHVsZU5hbWUoKSk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRWYWx1ZSgnZWoyX2luc3RhbmNlcycsIGVqSW5zdCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaWQgPSBlajJfYmFzZV80LmdldFVuaXF1ZUlEKHRoaXMuZ2V0TW9kdWxlTmFtZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRXcmFwcGVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmluaXRXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIGlmICghd3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoV1JBUFBFUikpIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVyID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogV1JBUFBFUiB9KTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQodGhpcy5jc3NDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ3JvbGUnOiAnbWVudScsICd0YWJpbmRleCc6ICcwJyB9KTtcbiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS56SW5kZXggPSB0aGlzLmdldFpJbmRleCgpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUucmVuZGVySXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUpzb25Gcm9tRWxlbWVudCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1bCA9IHRoaXMuY3JlYXRlSXRlbXModGhpcy5pdGVtcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LmFwcGVuZChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh1bC5jaGlsZHJlbiksIHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbSA9IGVqMl9iYXNlXzUuc2VsZWN0KHRoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzSW9zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUgPSBuZXcgZWoyX2Jhc2VfMi5Ub3VjaCh0aGlzLnRhcmdldEVsZW0sIHsgdGFwSG9sZDogdGhpcy50b3VjaEhhbmRsZXIuYmluZCh0aGlzKSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnRhcmdldEVsZW0sICdjb250ZXh0bWVudScsIHRoaXMuY21lbnVIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0U2Nyb2xsYWJsZVBhcmVudHModGhpcy50YXJnZXRFbGVtKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudF8xID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQocGFyZW50XzEsICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHdyYXBwZXIsICdtb3VzZW92ZXInLCB0aGlzLm1vdmVySGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCAnbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZSA9IG5ldyBlajJfYmFzZV8yLktleWJvYXJkRXZlbnRzKHdyYXBwZXIsIHtcbiAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5Qm9hcmRIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczoge1xuICAgICAgICAgICAgICAgICAgICBkb3duYXJyb3c6IERPV05BUlJPVyxcbiAgICAgICAgICAgICAgICAgICAgdXBhcnJvdzogVVBBUlJPVyxcbiAgICAgICAgICAgICAgICAgICAgZW50ZXI6IEVOVEVSLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0YXJyb3c6IExFRlRBUlJPVyxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRhcnJvdzogUklHSFRBUlJPVyxcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlOiBFU0NBUEVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUucmlwcGxlRWZmZWN0KHdyYXBwZXIsIHsgc2VsZWN0b3I6ICcuJyArIElURU0gfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5tb3VzZURvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV81LmNsb3Nlc3QoZS50YXJnZXQsICcuJyArIFdSQVBQRVIpICE9PSB0aGlzLmdldFdyYXBwZXIoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KHRoaXMubmF2SWR4Lmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRTY3JvbGxhYmxlUGFyZW50cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XG4gICAgICAgICAgICB2YXIgcGFyZW50Q29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gLyhhdXRvfHNjcm9sbCkvO1xuICAgICAgICAgICAgdmFyIHBhcmVudEVsZSA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgd2hpbGUgKHBhcmVudEVsZSAmJiBwYXJlbnRFbGUudGFnTmFtZSAhPT0gJ0hUTUwnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnRFbGUpO1xuICAgICAgICAgICAgICAgIGlmICghKGVsZW1TdHlsZS5wb3NpdGlvbiA9PT0gJ2Fic29sdXRlJyAmJiBwYXJlbnRTdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpXG4gICAgICAgICAgICAgICAgICAgICYmIHJlZ2V4LnRlc3QocGFyZW50U3R5bGUub3ZlcmZsb3cgKyBwYXJlbnRTdHlsZS5vdmVyZmxvd1kgKyBwYXJlbnRTdHlsZS5vdmVyZmxvd1gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudENvbGxlY3Rpb24ucHVzaChwYXJlbnRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnRFbGUgPSBwYXJlbnRFbGUucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudENvbGxlY3Rpb24ucHVzaChkb2N1bWVudCk7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50Q29sbGVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmtleUJvYXJkSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBET1dOQVJST1c6XG4gICAgICAgICAgICAgICAgY2FzZSBVUEFSUk9XOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwRG93bktleUhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgUklHSFRBUlJPVzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodEVudGVyS2V5SGFuZGxlcih7IGFjdGlvbjogUklHSFRBUlJPVyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBMRUZUQVJST1c6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdEVzY0tleUhhbmRsZXIoeyBhY3Rpb246IExFRlRBUlJPVyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFTlRFUjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodEVudGVyS2V5SGFuZGxlcih7IGFjdGlvbjogRU5URVIgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRVNDQVBFOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRFc2NLZXlIYW5kbGVyKHsgYWN0aW9uOiBFU0NBUEUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUudXBEb3duS2V5SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgdmFyIGN1bCA9IHdyYXBwZXIuY2hpbGRyZW5bdGhpcy5uYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0SWR4ID0gZS5hY3Rpb24gPT09IERPV05BUlJPVyA/IDAgOiBjdWwuY2hpbGRFbGVtZW50Q291bnQgLSAxO1xuICAgICAgICAgICAgdmFyIGZsaUlkeCA9IGRlZmF1bHRJZHg7XG4gICAgICAgICAgICB2YXIgZmxpID0gdGhpcy5nZXRMSUJ5Q2xhc3MoY3VsLCBGT0NVU0VEKTtcbiAgICAgICAgICAgIGlmIChmbGkpIHtcbiAgICAgICAgICAgICAgICBmbGlJZHggPSB0aGlzLmdldElkeChjdWwsIGZsaSk7XG4gICAgICAgICAgICAgICAgZmxpLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgZS5hY3Rpb24gPT09IERPV05BUlJPVyA/IGZsaUlkeCsrIDogZmxpSWR4LS07XG4gICAgICAgICAgICAgICAgaWYgKGZsaUlkeCA9PT0gKGUuYWN0aW9uID09PSBET1dOQVJST1cgPyBjdWwuY2hpbGRFbGVtZW50Q291bnQgOiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxpSWR4ID0gZGVmYXVsdElkeDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xpID0gY3VsLmNoaWxkcmVuW2ZsaUlkeF07XG4gICAgICAgICAgICBmbGlJZHggPSB0aGlzLmlzVmFsaWRMSShjbGksIGZsaUlkeCwgZS5hY3Rpb24pO1xuICAgICAgICAgICAgY3VsLmNoaWxkcmVuW2ZsaUlkeF0uY2xhc3NMaXN0LmFkZChGT0NVU0VEKTtcbiAgICAgICAgICAgIGN1bC5jaGlsZHJlbltmbGlJZHhdLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5pc1ZhbGlkTEkgPSBmdW5jdGlvbiAoY2xpLCBpbmRleCwgYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgdmFyIGN1bCA9IHdyYXBwZXIuY2hpbGRyZW5bdGhpcy5uYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgIGlmIChjbGkuY2xhc3NMaXN0LmNvbnRhaW5zKFNFUEFSQVRPUikgfHwgY2xpLmNsYXNzTGlzdC5jb250YWlucyhESVNBQkxFRCkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb24gPT09IChET1dOQVJST1cgfHwgUklHSFRBUlJPVykgPyBpbmRleCsrIDogaW5kZXgtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsaSA9IGN1bC5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBpZiAoY2xpLmNsYXNzTGlzdC5jb250YWlucyhTRVBBUkFUT1IpIHx8IGNsaS5jbGFzc0xpc3QuY29udGFpbnMoRElTQUJMRUQpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmlzVmFsaWRMSShjbGksIGluZGV4LCBhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUucmlnaHRFbnRlcktleUhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIHZhciBjdWwgPSB3cmFwcGVyLmNoaWxkcmVuW3RoaXMubmF2SWR4Lmxlbmd0aF07XG4gICAgICAgICAgICB2YXIgZmxpID0gdGhpcy5nZXRMSUJ5Q2xhc3MoY3VsLCBGT0NVU0VEKTtcbiAgICAgICAgICAgIGlmIChmbGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmxpSWR4ID0gdGhpcy5nZXRJZHgoY3VsLCBmbGkpO1xuICAgICAgICAgICAgICAgIHZhciBuYXZJZHggPSB0aGlzLm5hdklkeC5jb25jYXQoZmxpSWR4KTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmdldEl0ZW0obmF2SWR4KTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuTWVudShmbGksIGl0ZW0sIG51bGwsIG51bGwsIGUpO1xuICAgICAgICAgICAgICAgICAgICBmbGkuY2xhc3NMaXN0LnJlbW92ZShGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICAgICAgZmxpLmNsYXNzTGlzdC5hZGQoU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09IEVOVEVSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3NlbGVjdCcsIHsgZWxlbWVudDogZmxpLCBpdGVtOiB0aGlzLnRvUmF3T2JqZWN0KFtpdGVtXSkgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmxpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2SWR4LnB1c2goZmxpSWR4KTtcbiAgICAgICAgICAgICAgICAgICAgY3VsID0gd3JhcHBlci5jaGlsZHJlblt0aGlzLm5hdklkeC5sZW5ndGhdO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuaXNWYWxpZExJKGN1bC5jaGlsZHJlblswXSwgMCwgZS5hY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBjdWwuY2hpbGRyZW5baW5kZXhdLmNsYXNzTGlzdC5hZGQoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgICAgIGN1bC5jaGlsZHJlbltpbmRleF0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gRU5URVIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmxlZnRFc2NLZXlIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hdklkeC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KHRoaXMubmF2SWR4Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdmFyIGN1bCA9IHdyYXBwZXIuY2hpbGRyZW5bdGhpcy5uYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICB2YXIgc2xpID0gdGhpcy5nZXRMSUJ5Q2xhc3MoY3VsLCBTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgc2xpLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIGlmIChzbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpLmNsYXNzTGlzdC5yZW1vdmUoU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LmFkZChGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICAgICAgc2xpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSBFU0NBUEUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnRvdWNoSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmlzVGFwSG9sZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNtZW51SGFuZGxlcihlLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY21lbnVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jYW5PcGVuKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3Blbk1lbnUobnVsbCwgbnVsbCwgZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZLCBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuTWVudShudWxsLCBudWxsLCBlLmNsaWVudFksIGUuY2xpZW50WCwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY2xvc2VNZW51ID0gZnVuY3Rpb24gKHVsSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh1bEluZGV4ID09PSB2b2lkIDApIHsgdWxJbmRleCA9IDA7IH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTWVudVZpc2libGUoKSkge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNudCA9IHdyYXBwZXIuY2hpbGRFbGVtZW50Q291bnQ7IGNudCA+IHVsSW5kZXg7IGNudC0tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQW5pbWF0aW9uKHdyYXBwZXIuY2hpbGRyZW5bY250IC0gMV0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKHRoaXMubmF2SWR4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZJZHgubGVuZ3RoID0gdWxJbmRleCA/IHVsSW5kZXggLSAxIDogdWxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdvbkNsb3NlJywgeyBpdGVtczogaXRlbXMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaXNNZW51VmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5uYXZJZHgubGVuZ3RoID4gMCB8fCBlajJfYmFzZV81LmlzVmlzaWJsZSh0aGlzLmVsZW1lbnQpLnZhbHVlT2YoKSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jYW5PcGVuID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGNhbk9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgY2FuT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSB0aGlzLmZpbHRlci5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0YXJnZXQuY2xhc3NMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIuaW5kZXhPZih0YXJnZXQuY2xhc3NMaXN0W2ldKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5PcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhbk9wZW47XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKHRvcCwgbGVmdCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuTWVudShudWxsLCBudWxsLCB0b3AsIGxlZnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUub3Blbk1lbnUgPSBmdW5jdGlvbiAobGksIGl0ZW0sIHRvcCwgbGVmdCwgZSkge1xuICAgICAgICAgICAgaWYgKHRvcCA9PT0gdm9pZCAwKSB7IHRvcCA9IDA7IH1cbiAgICAgICAgICAgIGlmIChsZWZ0ID09PSB2b2lkIDApIHsgbGVmdCA9IDA7IH1cbiAgICAgICAgICAgIGlmIChlID09PSB2b2lkIDApIHsgZSA9IG51bGw7IH1cbiAgICAgICAgICAgIHZhciB1bDtcbiAgICAgICAgICAgIHZhciBuYXZJZHg7XG4gICAgICAgICAgICB2YXIgbGlJdGVtO1xuICAgICAgICAgICAgdmFyIGJlZm9yZU9wZW5FdmVudEFyZ3M7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgaWYgKGxpKSB7XG4gICAgICAgICAgICAgICAgdWwgPSB0aGlzLmNyZWF0ZUl0ZW1zKGl0ZW0uaXRlbXMpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5sYXN0Q2hpbGQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7IHRleHQ6IGl0ZW0udGV4dCwgaWNvbkNzczogSUNPTlMgKyAnIGUtcHJldmlvdXMnIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZGF0YSA9IG5ldyBNZW51SXRlbSh0aGlzLml0ZW1zWzBdLCBudWxsLCBkYXRhLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhsaSA9IHRoaXMuY3JlYXRlSXRlbShbaGRhdGFdLCB0cnVlLCAnbWVudScsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB1bC5pbnNlcnRCZWZvcmUoaGxpLCB1bC5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVsLnN0eWxlLnpJbmRleCA9IHRoaXMuZWxlbWVudC5zdHlsZS56SW5kZXg7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh1bCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5hdklkeCA9IHRoaXMuZ2V0SW5kZXgobGkgPyBsaS50ZXh0Q29udGVudCA6IG51bGwpO1xuICAgICAgICAgICAgbGlJdGVtID0gbGkgPyB0aGlzLmdldEl0ZW0obmF2SWR4KSA6IG51bGw7XG4gICAgICAgICAgICBiZWZvcmVPcGVuRXZlbnRBcmdzID0geyBlbGVtZW50OiB1bCwgaXRlbXM6IGxpID8gaXRlbS5pdGVtcyA6IHRoaXMuZ2V0SXRlbXMoW10pLCBwYXJlbnRJdGVtOiBsaUl0ZW0sIGV2ZW50OiBlLCBjYW5jZWw6IGZhbHNlIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZU9wZW4nLCBiZWZvcmVPcGVuRXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmICghYmVmb3JlT3BlbkV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKGxpLCB1bCwgdG9wLCBsZWZ0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUFuaW1hdGlvbih1bCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jcmVhdGVJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIHNob3dJY29uLCBtb2R1bGVOYW1lLCBpc0hlYWRlcikge1xuICAgICAgICAgICAgaWYgKGlzSGVhZGVyID09PSB2b2lkIDApIHsgaXNIZWFkZXIgPSB0cnVlOyB9XG4gICAgICAgICAgICB2YXIgbGlzdE9wdCA9IHsgc2hvd0ljb246IHNob3dJY29uLCBtb2R1bGVOYW1lOiBtb2R1bGVOYW1lIH07XG4gICAgICAgICAgICBpZiAoaXNIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBsaXN0T3B0Lml0ZW1DbGFzcyA9IEhFQURFUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3RJdGVtRnJvbUpzb24odGhpcy50b1Jhd09iamVjdChpdGVtKSwgbGlzdE9wdCwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbGlbMF07XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChsaSwgdWwsIHRvcCwgbGVmdCkge1xuICAgICAgICAgICAgdmFyIHB4ID0gJ3B4JztcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsaXR5KHVsKTtcbiAgICAgICAgICAgIGlmICh1bCA9PT0gdGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbGxpZGUgPSBlajJfcG9wdXBzXzEuaXNDb2xsaWRlKHVsLCBudWxsLCBsZWZ0LCB0b3ApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xsaWRlLmluZGV4T2YoJ3JpZ2h0JykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gbGVmdCAtIHVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29sbGlkZS5pbmRleE9mKCdib3R0b20nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBlajJfcG9wdXBzXzEuZml0KHVsLCBudWxsLCB7IFg6IGZhbHNlLCBZOiB0cnVlIH0sIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IG9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbGxpZGUgPSBlajJfcG9wdXBzXzEuaXNDb2xsaWRlKHVsLCBudWxsLCBsZWZ0LCB0b3ApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xsaWRlLmluZGV4T2YoJ2xlZnQnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBlajJfcG9wdXBzXzEuZml0KHVsLCBudWxsLCB7IFg6IHRydWUsIFk6IGZhbHNlIH0sIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBvZmZzZXQubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IE51bWJlcih0aGlzLmVsZW1lbnQuc3R5bGUudG9wLnJlcGxhY2UocHgsICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBOdW1iZXIodGhpcy5lbGVtZW50LnN0eWxlLmxlZnQucmVwbGFjZShweCwgJycpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGhpcy5lbmFibGVSdGwgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVBvc2l0aW9uKGxpLCB4LCAndG9wJyk7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IG9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBvZmZzZXQubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbGxpZGUgPSBlajJfcG9wdXBzXzEuaXNDb2xsaWRlKHVsLCBudWxsLCB0aGlzLmVuYWJsZVJ0bCA/IGxlZnQgLSB1bC5vZmZzZXRXaWR0aCA6IGxlZnQsIHRvcCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4Q29sbGlzaW9uID0gY29sbGlkZS5pbmRleE9mKCdsZWZ0JykgPiAtMSB8fCBjb2xsaWRlLmluZGV4T2YoJ3JpZ2h0JykgPiAtMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhDb2xsaXNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGVqMl9wb3B1cHNfMS5jYWxjdWxhdGVQb3NpdGlvbihsaSwgdGhpcy5lbmFibGVSdGwgPyAncmlnaHQnIDogJ2xlZnQnLCAndG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gb2Zmc2V0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsIHx8IHhDb2xsaXNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSAodGhpcy5lbmFibGVSdGwgJiYgeENvbGxpc2lvbikgPyBsZWZ0IDogbGVmdCAtIHVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xsaWRlLmluZGV4T2YoJ2JvdHRvbScpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGVqMl9wb3B1cHNfMS5maXQodWwsIG51bGwsIHsgWDogZmFsc2UsIFk6IHRydWUgfSwgeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IG9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGl0eSh1bCwgZmFsc2UpO1xuICAgICAgICAgICAgdWwuc3R5bGUudG9wID0gdG9wICsgcHg7XG4gICAgICAgICAgICB1bC5zdHlsZS5sZWZ0ID0gbGVmdCArIHB4O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUudG9nZ2xlVmlzaWJsaXR5ID0gZnVuY3Rpb24gKHVsLCBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgIGlmIChpc1Zpc2libGUgPT09IHZvaWQgMCkgeyBpc1Zpc2libGUgPSB0cnVlOyB9XG4gICAgICAgICAgICB1bC5zdHlsZS52aXNpYmlsaXR5ID0gaXNWaXNpYmxlID8gJ2hpZGRlbicgOiAnJztcbiAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY3JlYXRlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2hvd0ljb24gPSB0aGlzLmhhc0ZpZWxkKGl0ZW1zLCAnaWNvbkNzcycpO1xuICAgICAgICAgICAgdmFyIGxpc3RCYXNlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBzaG93SWNvbjogc2hvd0ljb24sXG4gICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ21lbnUnLFxuICAgICAgICAgICAgICAgIGl0ZW1DcmVhdGluZzogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jdXJEYXRhLmh0bWxBdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogJ21lbnVpdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG93SWNvbiAmJiAhYXJncy5jdXJEYXRhLmljb25Dc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuY3VyRGF0YS5pY29uQ3NzID0gSUNPTlMgKyAnIGUtYmxhbmtpY29uJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXRlbUNyZWF0ZWQ6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmN1ckRhdGEuc2VwYXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0uY2xhc3NMaXN0LnJlbW92ZShJVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuaXRlbS5jbGFzc0xpc3QuYWRkKFNFUEFSQVRPUik7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0ucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY3VyRGF0YS5pdGVtcyAmJiBhcmdzLmN1ckRhdGEuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBJQ09OUyArICcgJyArIENBUkVUIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1oYXNwb3B1cCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0ucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0uY2xhc3NMaXN0LmFkZCgnZS1tZW51LWNhcmV0LWljb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdiZWZvcmVJdGVtUmVuZGVyJywgeyBkYXRhOiBhcmdzLmN1ckRhdGEsIGl0ZW06IGFyZ3MuaXRlbSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHVsID0gZWoyX2xpc3RzXzEuTGlzdEJhc2UuY3JlYXRlTGlzdCh0aGlzLnRvUmF3T2JqZWN0KGl0ZW1zLnNsaWNlKCkpLCBsaXN0QmFzZU9wdGlvbnMsIHRydWUpO1xuICAgICAgICAgICAgdWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICByZXR1cm4gdWw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS50b1Jhd09iamVjdCA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgICAgICB2YXIgbWVudUl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbaV0ucHJvcGVydGllcztcbiAgICAgICAgICAgICAgICBtZW51SXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZW51SXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5tb3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgY2xpID0gdGhpcy5nZXRMSSh0cmd0KTtcbiAgICAgICAgICAgIGlmIChjbGkgJiYgZWoyX2Jhc2VfNS5jbG9zZXN0KGNsaSwgJy4nICsgV1JBUFBFUikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmxpID0gZWoyX2Jhc2VfNS5zZWxlY3QoJy4nICsgRk9DVVNFRCwgd3JhcHBlcik7XG4gICAgICAgICAgICAgICAgaWYgKGZsaSkge1xuICAgICAgICAgICAgICAgICAgICBmbGkuY2xhc3NMaXN0LnJlbW92ZShGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2xpLmNsYXNzTGlzdC5hZGQoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dJdGVtT25DbGljaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5oYXNGaWVsZCA9IGZ1bmN0aW9uIChpdGVtcywgZmllbGQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXVtmaWVsZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0V3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1RhcEhvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVGFwSG9sZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgdHJndCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBjbGkgPSB0aGlzLmdldExJKHRyZ3QpO1xuICAgICAgICAgICAgICAgIHZhciBpc0luc3RMSSA9IGNsaSAmJiAhZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV81LmNsb3Nlc3QoY2xpLCAnLicgKyBXUkFQUEVSKSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzSW5zdExJICYmIGUudHlwZSA9PT0gJ2NsaWNrJyAmJiAhY2xpLmNsYXNzTGlzdC5jb250YWlucyhIRUFERVIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TElTZWxlY3RlZChjbGkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmF2SWR4ID0gdGhpcy5nZXRJbmRleChjbGkudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShuYXZJZHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3NlbGVjdCcsIHsgZWxlbWVudDogY2xpLCBpdGVtOiBpdGVtIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNJbnN0TEkgJiYgKGUudHlwZSA9PT0gJ21vdXNlb3ZlcicgfHwgZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlIHx8IHRoaXMuc2hvd0l0ZW1PbkNsaWNrKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGkuY2xhc3NMaXN0LmNvbnRhaW5zKEhFQURFUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsID0gd3JhcHBlci5jaGlsZHJlblt0aGlzLm5hdklkeC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQW5pbWF0aW9uKHVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignb25PcGVuJywgeyBlbGVtZW50OiB1bCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbGkgPSB0aGlzLmdldExJQnlDbGFzcyh1bCwgU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNsaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaS5jbGFzc0xpc3QucmVtb3ZlKFNFTEVDVEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKGNsaS5wYXJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF2SWR4LnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbGkuY2xhc3NMaXN0LmNvbnRhaW5zKFNFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd1N1Yk1lbnUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdWwgPSBjbGkucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpSWR4ID0gdGhpcy5nZXRJZHgoY3VsLCBjbGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdWxJZHggPSB0aGlzLmdldElkeCh3cmFwcGVyLCBjdWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5uYXZJZHhbY3VsSWR4XSA9PT0gY2xpSWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93U3ViTWVudSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdWxJZHggIT09IHRoaXMubmF2SWR4Lmxlbmd0aCAmJiAoZS50eXBlICE9PSAnbW91c2VvdmVyJyB8fCBzaG93U3ViTWVudSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbGkgPSB0aGlzLmdldExJQnlDbGFzcyhjdWwsIFNFTEVDVEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LnJlbW92ZShTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWVudShjdWxJZHggKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd1N1Yk1lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHRoaXMubmF2SWR4LmNvbmNhdChjbGlJZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZW92ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMSVNlbGVjdGVkKGNsaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGkuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3Blbk1lbnUoY2xpLCBpdGVtLCBudWxsLCBudWxsLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF2SWR4LnB1c2goY2xpSWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgIT09ICdtb3VzZW92ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyZ3QudGFnTmFtZSAhPT0gJ1VMJyB8fCB0cmd0LnBhcmVudEVsZW1lbnQgIT09IHdyYXBwZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2xpIHx8ICFjbGkucXVlcnlTZWxlY3RvcignLicgKyBDQVJFVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuc2V0TElTZWxlY3RlZCA9IGZ1bmN0aW9uIChsaSkge1xuICAgICAgICAgICAgdmFyIHNsaSA9IHRoaXMuZ2V0TElCeUNsYXNzKGxpLnBhcmVudEVsZW1lbnQsIFNFTEVDVEVEKTtcbiAgICAgICAgICAgIGlmIChzbGkpIHtcbiAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LnJlbW92ZShTRUxFQ1RFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaS5jbGFzc0xpc3QucmVtb3ZlKEZPQ1VTRUQpO1xuICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZChTRUxFQ1RFRCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRMSUJ5Q2xhc3MgPSBmdW5jdGlvbiAodWwsIGNsYXNzbmFtZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHVsLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVsLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc25hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiAobmF2SWR4KSB7XG4gICAgICAgICAgICBuYXZJZHggPSBuYXZJZHguc2xpY2UoKTtcbiAgICAgICAgICAgIHZhciBpZHggPSBuYXZJZHgucG9wKCk7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKG5hdklkeCk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbXNbaWR4XTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKG5hdklkeCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmF2SWR4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMgPSBpdGVtc1tuYXZJZHhbaV1dLml0ZW1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0SWR4ID0gZnVuY3Rpb24gKHVsLCBsaSwgc2tpcEhkcikge1xuICAgICAgICAgICAgaWYgKHNraXBIZHIgPT09IHZvaWQgMCkgeyBza2lwSGRyID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdmFyIGlkeCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodWwuY2hpbGRyZW4sIGxpKTtcbiAgICAgICAgICAgIGlmIChza2lwSGRyICYmIHVsLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucyhIRUFERVIpKSB7XG4gICAgICAgICAgICAgICAgaWR4LS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0TEkgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgaWYgKGVsZW0udGFnTmFtZSA9PT0gJ0xJJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzUuY2xvc2VzdChlbGVtLCAnbGknKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzc0NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRQcm9wLmNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKG9sZFByb3AuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Byb3AuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQobmV3UHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZShSVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXIgPSBuZXdQcm9wLmZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93SXRlbU9uQ2xpY2snOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0l0ZW1PbkNsaWNrID0gbmV3UHJvcC5zaG93SXRlbU9uQ2xpY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0YXJnZXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gbmV3UHJvcC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXRFbGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuQnJvd3Nlci5pc0lvcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnRhcmdldEVsZW0sICdjb250ZXh0bWVudScsIHRoaXMuY21lbnVIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0U2Nyb2xsYWJsZVBhcmVudHModGhpcy50YXJnZXRFbGVtKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudF8yID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUocGFyZW50XzIsICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHdyYXBwZXIsICdtb3VzZW92ZXInLCB0aGlzLm1vdmVySGFuZGxlcik7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCAnbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAodWwsIGlzTWVudU9wZW4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoaXNNZW51T3BlbiA9PT0gdm9pZCAwKSB7IGlzTWVudU9wZW4gPSB0cnVlOyB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QgPT09ICdOb25lJyB8fCAhaXNNZW51T3Blbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kKHVsLCBpc01lbnVPcGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLmFuaW1hdGUodWwsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvblNldHRpbmdzLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lYXNpbmcsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IG9wdGlvbnMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbmQob3B0aW9ucy5lbGVtZW50LCBpc01lbnVPcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKHVsLCBpc01lbnVPcGVuKSB7XG4gICAgICAgICAgICBpZiAoaXNNZW51T3Blbikge1xuICAgICAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHVsLnN0eWxlLm1heEhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignb25PcGVuJywgeyBlbGVtZW50OiB1bCB9KTtcbiAgICAgICAgICAgICAgICBpZiAodWwucXVlcnlTZWxlY3RvcignLicgKyBGT0NVU0VEKSkge1xuICAgICAgICAgICAgICAgICAgICB1bC5xdWVyeVNlbGVjdG9yKCcuJyArIEZPQ1VTRUQpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBlbGUgPSB0aGlzLmdldFdyYXBwZXIoKS5jaGlsZHJlblt0aGlzLmdldElkeCh0aGlzLmdldFdyYXBwZXIoKSwgdWwpIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIFNFTEVDVEVEKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodWwgPT09IHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmxpID0gdGhpcy5nZXRMSUJ5Q2xhc3ModGhpcy5lbGVtZW50LCBGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZsaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxpLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaSA9IHRoaXMuZ2V0TElCeUNsYXNzKHRoaXMuZWxlbWVudCwgU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LnJlbW92ZShTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKHVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NvbnRleHRtZW51JztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKGRhdGEsIGl0ZW1zLCBuYXZJZHgsIGlzQ2FsbEJhY2spIHtcbiAgICAgICAgICAgIGlmIChpdGVtcyA9PT0gdm9pZCAwKSB7IGl0ZW1zID0gdGhpcy5pdGVtczsgfVxuICAgICAgICAgICAgaWYgKG5hdklkeCA9PT0gdm9pZCAwKSB7IG5hdklkeCA9IFtdOyB9XG4gICAgICAgICAgICBpZiAoaXNDYWxsQmFjayA9PT0gdm9pZCAwKSB7IGlzQ2FsbEJhY2sgPSBmYWxzZTsgfVxuICAgICAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udGV4dCA9PT0gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBuYXZJZHgucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0uaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hdklkeCA9IHRoaXMuZ2V0SW5kZXgoZGF0YSwgaXRlbS5pdGVtcywgbmF2SWR4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdklkeFtuYXZJZHgubGVuZ3RoIC0gMV0gPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gbGVuIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdklkeC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdklkeC51bnNoaWZ0KGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBsZW4gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZJZHgucHVzaCgtMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKCFpc0NhbGxCYWNrICYmIG5hdklkeFswXSA9PT0gLTEpID8gW10gOiBuYXZJZHg7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5lbmFibGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgZW5hYmxlKSB7XG4gICAgICAgICAgICBpZiAoZW5hYmxlID09PSB2b2lkIDApIHsgZW5hYmxlID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdmFyIHVsO1xuICAgICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICAgIHZhciBuYXZJZHg7XG4gICAgICAgICAgICB2YXIgZGlzYWJsZWQgPSBESVNBQkxFRDtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmF2SWR4ID0gdGhpcy5nZXRJbmRleChpdGVtc1tpXSk7XG4gICAgICAgICAgICAgICAgaWR4ID0gbmF2SWR4LnBvcCgpO1xuICAgICAgICAgICAgICAgIHVsID0gd3JhcHBlci5jaGlsZHJlbltuYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICBpZiAodWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuQnJvd3Nlci5pc0RldmljZSAmJiAhdWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbnRleHRtZW51JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5jaGlsZHJlbltpZHggKyAxXS5jbGFzc0xpc3QucmVtb3ZlKGRpc2FibGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLmNoaWxkcmVuW2lkeF0uY2xhc3NMaXN0LnJlbW92ZShkaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlICYmICF1bC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY29udGV4dG1lbnUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLmNoaWxkcmVuW2lkeCArIDFdLmNsYXNzTGlzdC5hZGQoZGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuY2hpbGRyZW5baWR4XS5jbGFzc0xpc3QuYWRkKGRpc2FibGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnNob3dJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZUl0ZW1zKGl0ZW1zLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5oaWRlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVJdGVtcyhpdGVtcywgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zaG93SGlkZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBpc2hpZGUpIHtcbiAgICAgICAgICAgIHZhciB1bDtcbiAgICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgICB2YXIgbmF2SWR4O1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuYXZJZHggPSB0aGlzLmdldEluZGV4KGl0ZW1zW2ldKTtcbiAgICAgICAgICAgICAgICBpZHggPSBuYXZJZHgucG9wKCk7XG4gICAgICAgICAgICAgICAgdWwgPSB3cmFwcGVyLmNoaWxkcmVuW25hdklkeC5sZW5ndGhdO1xuICAgICAgICAgICAgICAgIGlmICh1bCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNoaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlICYmICF1bC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY29udGV4dG1lbnUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLmNoaWxkcmVuW2lkeCArIDFdLmNsYXNzTGlzdC5hZGQoSElERSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5jaGlsZHJlbltpZHhdLmNsYXNzTGlzdC5hZGQoSElERSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlICYmICF1bC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY29udGV4dG1lbnUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLmNoaWxkcmVuW2lkeCArIDFdLmNsYXNzTGlzdC5yZW1vdmUoSElERSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5jaGlsZHJlbltpZHhdLmNsYXNzTGlzdC5yZW1vdmUoSElERSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5yZW1vdmVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICAgIHZhciBuYXZJZHg7XG4gICAgICAgICAgICB2YXIgaWl0ZW1zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG5hdklkeCA9IHRoaXMuZ2V0SW5kZXgoaXRlbXNbaV0pO1xuICAgICAgICAgICAgICAgIGlkeCA9IG5hdklkeC5wb3AoKTtcbiAgICAgICAgICAgICAgICBpaXRlbXMgPSB0aGlzLmdldEl0ZW1zKG5hdklkeCk7XG4gICAgICAgICAgICAgICAgaWl0ZW1zLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIGlmICghbmF2SWR4Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LmRldGFjaCh0aGlzLmVsZW1lbnQuY2hpbGRyZW5baWR4XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbiAoaXRlbXMsIHRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0SXRlbXMoaXRlbXMsIHRleHQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlID0gZnVuY3Rpb24gKGl0ZW1zLCB0ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmluc2VydEl0ZW1zKGl0ZW1zLCB0ZXh0LCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5pbnNlcnRJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgdGV4dCwgaXNBZnRlcikge1xuICAgICAgICAgICAgaWYgKGlzQWZ0ZXIgPT09IHZvaWQgMCkgeyBpc0FmdGVyID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdmFyIGxpO1xuICAgICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICAgIHZhciBuYXZJZHg7XG4gICAgICAgICAgICB2YXIgaWl0ZW1zO1xuICAgICAgICAgICAgdmFyIG1lbnVpdGVtO1xuICAgICAgICAgICAgdmFyIHNob3dJY29uO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG5hdklkeCA9IHRoaXMuZ2V0SW5kZXgodGV4dCk7XG4gICAgICAgICAgICAgICAgaWR4ID0gbmF2SWR4LnBvcCgpO1xuICAgICAgICAgICAgICAgIGlpdGVtcyA9IHRoaXMuZ2V0SXRlbXMobmF2SWR4KTtcbiAgICAgICAgICAgICAgICBtZW51aXRlbSA9IG5ldyBNZW51SXRlbShpaXRlbXNbMF0sIG51bGwsIGl0ZW1zW2ldLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpaXRlbXMuc3BsaWNlKGlzQWZ0ZXIgPyBpZHggKyAxIDogaWR4LCAwLCBtZW51aXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKCFuYXZJZHgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkeCA9IGlzQWZ0ZXIgPyBpZHggKyAxIDogaWR4O1xuICAgICAgICAgICAgICAgICAgICBzaG93SWNvbiA9IHRoaXMuaGFzRmllbGQoaWl0ZW1zLCAnaWNvbkNzcycpO1xuICAgICAgICAgICAgICAgICAgICBsaSA9IHRoaXMuY3JlYXRlSXRlbShbbWVudWl0ZW1dLCBzaG93SWNvbiwgJ21lbnUnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUobGksIHRoaXMuZWxlbWVudC5jaGlsZHJlbltpZHhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRaSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb247XG4gICAgICAgICAgICB2YXIgcHJvcHM7XG4gICAgICAgICAgICB2YXIgekluZGV4ID0gWyc5OTknXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkb2N1bWVudC5ib2R5LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcHJvcHMgPSBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgICAgIGluZGV4ID0gcHJvcHMuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gcHJvcHMuZ2V0UHJvcGVydHlWYWx1ZSgncG9zaXRpb24nKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09ICdhdXRvJyAmJiBwb3NpdGlvbiAhPT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICAgICAgICAgICAgekluZGV4LnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5tYXguYXBwbHkoTWF0aCwgekluZGV4KSArIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgWyd0b3AnLCAnbGVmdCcsICdkaXNwbGF5JywgJ3JvbGUnLCAndGFiaW5kZXgnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KGtleSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCB3cmFwcGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKHdyYXBwZXIpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29udGV4dE1lbnU7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgXCJmaWx0ZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwic2hvd0l0ZW1PbkNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgTWVudUl0ZW0pXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcIml0ZW1zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcInRhcmdldFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHsgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnZWFzZScsIGVmZmVjdDogJ1NsaWRlRG93bicgfSlcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwiYW5pbWF0aW9uU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcImJlZm9yZUl0ZW1SZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcImJlZm9yZU9wZW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcIm9uT3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwib25DbG9zZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwic2VsZWN0XCIsIHZvaWQgMCk7XG4gICAgQ29udGV4dE1lbnUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBDb250ZXh0TWVudSk7XG4gICAgZXhwb3J0cy5Db250ZXh0TWVudSA9IENvbnRleHRNZW51O1xuICAgIGV4cG9ydHMuY29udGV4dE1lbnVCdWlsZGVyID0gZWoyX2Jhc2VfMS5DcmVhdGVCdWlsZGVyKENvbnRleHRNZW51KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29udGV4dC1tZW51L2NvbnRleHQtbWVudS5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzEyX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItbGlzdHNcIlxuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi90YWJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB0YWJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQodGFiXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90YWIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3Rvb2xiYXIvdG9vbGJhclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIHRvb2xiYXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ0xTX1RBQiA9ICdlLXRhYic7XG4gICAgdmFyIENMU19IRUFERVIgPSAnZS1oZWFkZXInO1xuICAgIHZhciBDTFNfQ09OVEVOVCA9ICdlLWNvbnRlbnQnO1xuICAgIHZhciBDTFNfSVRFTVMgPSAnZS1pdGVtcyc7XG4gICAgdmFyIENMU19JVEVNID0gJ2UtaXRlbSc7XG4gICAgdmFyIENMU19URU1QTEFURSA9ICdlLXRlbXBsYXRlJztcbiAgICB2YXIgQ0xTX1JUTCA9ICdlLXJ0bCc7XG4gICAgdmFyIENMU19BQ1RJVkUgPSAnZS1hY3RpdmUnO1xuICAgIHZhciBDTFNfRElTQUJMRSA9ICdlLWRpc2FibGUnO1xuICAgIHZhciBDTFNfSElEREVOID0gJ2UtaGlkZGVuJztcbiAgICB2YXIgQ0xTX0ZPQ1VTID0gJ2UtZm9jdXNlZCc7XG4gICAgdmFyIENMU19JQ09OUyA9ICdlLWljb25zJztcbiAgICB2YXIgQ0xTX0lDT04gPSAnZS1pY29uJztcbiAgICB2YXIgQ0xTX0lDT05fQ0xPU0UgPSAnZS1jbG9zZS1pY29uJztcbiAgICB2YXIgQ0xTX0NMT1NFX1NIT1cgPSAnZS1jbG9zZS1zaG93JztcbiAgICB2YXIgQ0xTX1RFWFQgPSAnZS10YWItdGV4dCc7XG4gICAgdmFyIENMU19JTkRJQ0FUT1IgPSAnZS1pbmRpY2F0b3InO1xuICAgIHZhciBDTFNfV1JBUCA9ICdlLXRhYi13cmFwJztcbiAgICB2YXIgQ0xTX1RFWFRfV1JBUCA9ICdlLXRleHQtd3JhcCc7XG4gICAgdmFyIENMU19UQUJfSUNPTiA9ICdlLXRhYi1pY29uJztcbiAgICB2YXIgQ0xTX1RCX0lURU1TID0gJ2UtdG9vbGJhci1pdGVtcyc7XG4gICAgdmFyIENMU19UQl9JVEVNID0gJ2UtdG9vbGJhci1pdGVtJztcbiAgICB2YXIgQ0xTX1RCX1BPUCA9ICdlLXRvb2xiYXItcG9wJztcbiAgICB2YXIgQ0xTX1RCX1BPUFVQID0gJ2UtdG9vbGJhci1wb3B1cCc7XG4gICAgdmFyIENMU19QT1BVUF9PUEVOID0gJ2UtcG9wdXAtb3Blbic7XG4gICAgdmFyIENMU19QT1BVUF9DTE9TRSA9ICdlLXBvcHVwLWNsb3NlJztcbiAgICB2YXIgQ0xTX1BST0dSRVNTID0gJ2UtcHJvZ3Jlc3MnO1xuICAgIHZhciBDTFNfSUdOT1JFID0gJ2UtaWdub3JlJztcbiAgICB2YXIgVGFiQWN0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVGFiQWN0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRhYkFjdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUYWJBY3Rpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzIuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTbGlkZUxlZnRJbicpXG4gICAgXSwgVGFiQWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImVmZmVjdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDYwMClcbiAgICBdLCBUYWJBY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZHVyYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnZWFzZScpXG4gICAgXSwgVGFiQWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImVhc2luZ1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuVGFiQWN0aW9uU2V0dGluZ3MgPSBUYWJBY3Rpb25TZXR0aW5ncztcbiAgICB2YXIgVGFiQW5pbWF0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVGFiQW5pbWF0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRhYkFuaW1hdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUYWJBbmltYXRpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzIuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBlZmZlY3Q6ICdTbGlkZUxlZnRJbicsIGR1cmF0aW9uOiA2MDAsIGVhc2luZzogJ2Vhc2UnIH0sIFRhYkFjdGlvblNldHRpbmdzKVxuICAgIF0sIFRhYkFuaW1hdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJwcmV2aW91c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBlZmZlY3Q6ICdTbGlkZVJpZ2h0SW4nLCBkdXJhdGlvbjogNjAwLCBlYXNpbmc6ICdlYXNlJyB9LCBUYWJBY3Rpb25TZXR0aW5ncylcbiAgICBdLCBUYWJBbmltYXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwibmV4dFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuVGFiQW5pbWF0aW9uU2V0dGluZ3MgPSBUYWJBbmltYXRpb25TZXR0aW5ncztcbiAgICB2YXIgSGVhZGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEhlYWRlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBIZWFkZXI7XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBIZWFkZXIucHJvdG90eXBlLCBcInRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBIZWFkZXIucHJvdG90eXBlLCBcImljb25Dc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnbGVmdCcpXG4gICAgXSwgSGVhZGVyLnByb3RvdHlwZSwgXCJpY29uUG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkhlYWRlciA9IEhlYWRlcjtcbiAgICB2YXIgVGFiSXRlbSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUYWJJdGVtLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBUYWJJdGVtKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUYWJJdGVtO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7fSwgSGVhZGVyKVxuICAgIF0sIFRhYkl0ZW0ucHJvdG90eXBlLCBcImhlYWRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFRhYkl0ZW0ucHJvdG90eXBlLCBcImNvbnRlbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBUYWJJdGVtLnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRhYkl0ZW0ucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UYWJJdGVtID0gVGFiSXRlbTtcbiAgICB2YXIgVGFiID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRhYiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGFiKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wcmV2SW5kZXggPSAwO1xuICAgICAgICAgICAgX3RoaXMuc2hvdyA9IHsgbmFtZTogJ1NsaWRlRG93bicsIGR1cmF0aW9uOiAxMDAgfTtcbiAgICAgICAgICAgIF90aGlzLmhpZGUgPSB7IG5hbWU6ICdTbGlkZVVwJywgZHVyYXRpb246IDEwMCB9O1xuICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZU9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLmFuaW1PYmogPSBuZXcgZWoyX2Jhc2VfNS5BbmltYXRpb24oX3RoaXMuYW5pbWF0ZU9wdGlvbnMpO1xuICAgICAgICAgICAgX3RoaXMubWF4SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIF90aGlzLnRpdGxlID0gJ0Nsb3NlJztcbiAgICAgICAgICAgIF90aGlzLmtleUNvbmZpZ3MgPSB7XG4gICAgICAgICAgICAgICAgdGFiOiAndGFiJyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgICAgICBlbnRlcjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBzcGFjZTogJ3NwYWNlJyxcbiAgICAgICAgICAgICAgICBkZWxldGU6ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgIG1vdmVMZWZ0OiAnbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlUmlnaHQ6ICdyaWdodGFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlVXA6ICd1cGFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlRG93bjogJ2Rvd25hcnJvdydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVGFiLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRiT2JqKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGJPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIFsncm9sZScsICdhcmlhLWRpc2FibGVkJywgJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcsICd0YWJpbmRleCcsICdhcmlhLW9yaWVudGF0aW9uJ10uZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodmFsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY250RWxlID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RBQiArICcgPiAuJyArIENMU19DT05URU5ULCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMU19URU1QTEFURSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGNudEVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY250RWxlLmlubmVySFRNTCA9IHRoaXMuY250O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdkZXN0cm95ZWQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmlzUG9wdXAgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGVqMl9iYXNlXzMuQnJvd3Nlci5pbmZvLm5hbWU7XG4gICAgICAgICAgICB2YXIgY3NzID0gKG5hbWUgPT09ICdtc2llJykgPyAnZS1pZScgOiAobmFtZSA9PT0gJ2VkZ2UnKSA/ICdlLWVkZ2UnIDogKG5hbWUgPT09ICdzYWZhcmknKSA/ICdlLXNhZmFyaScgOiAnJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd3aWR0aCc6IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLndpZHRoKSwgJ2hlaWdodCc6IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLmhlaWdodCkgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKHRoaXMuZWxlbWVudCwgdGhpcy5jc3NDbGFzcywgdHJ1ZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7IHJvbGU6ICd0YWJsaXN0JywgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnLCAnYXJpYS1hY3RpdmVkZXNjZW5kYW50JzogJycgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKHRoaXMuZWxlbWVudCwgY3NzLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRhaW5lcigpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRSZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW5kZXJDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPiAwICYmIHRoaXMuZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0NPTlRFTlQgfSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0T3JpZW50YXRpb24odGhpcy5oZWFkZXJQbGFjZW1lbnQsIGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19IRUFERVIgfSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUZW1wbGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5lbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVGVtcGxhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMU19URU1QTEFURSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgdGhpcy5lbGVtZW50KSkgJiYgIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIHRoaXMuZWxlbWVudCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJIZWFkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRiSXRlbXMgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEJfSVRFTVMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGJJdGVtcykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNS5yaXBwbGVFZmZlY3QodGhpcy50Ykl0ZW1zLCB7IHNlbGVjdG9yOiAnLmUtdGFiLXdyYXAnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRiSXRlbXMgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEJfSVRFTVMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmRyTGluZSA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JTkRJQ0FUT1IgKyAnICcgKyBDTFNfSElEREVOICsgJyAnICsgQ0xTX0lHTk9SRSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjckNudCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1oc2Nyb2xsLWNvbnRlbnQnLCB0aGlzLnRiSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoc2NyQ250KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyQ250Lmluc2VydEJlZm9yZSh0aGlzLmJkckxpbmUsIHNjckNudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJJdGVtcy5pbnNlcnRCZWZvcmUodGhpcy5iZHJMaW5lLCB0aGlzLnRiSXRlbXMuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50SGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UlRMKHRoaXMuZW5hYmxlUnRsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW5kZXJIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRhYkl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmhkckVsZSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19IRUFERVIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmJ0bkNscyA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBDTFNfSUNPTlMgKyAnICcgKyBDTFNfSUNPTl9DTE9TRSwgYXR0cnM6IHsgdGl0bGU6IHRoaXMudGl0bGUgfSB9KS5vdXRlckhUTUw7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRhYkl0ZW1zID0gdGhpcy5wYXJzZU9iamVjdCh0aGlzLml0ZW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IHRoaXMuaGRyRWxlLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgaGRySXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaGRySXRlbXMucHVzaCh0aGlzLmhkckVsZS5jaGlsZHJlbi5pdGVtKGkpLmlubmVySFRNTCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZHJFbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGRyRWxlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JVEVNUyB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGhkckl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IENMU19JVEVNLCBpZDogQ0xTX0lURU0gKyAnXycgKyBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyByb2xlOiAndGFiJywgJ2FyaWEtY29udHJvbHMnOiBDTFNfQ09OVEVOVCArICdfJyArIGluZGV4LCAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZScgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogQ0xTX1RFWFQsIGlubmVySFRNTDogaXRlbSwgYXR0cnM6IHsgJ3JvbGUnOiAncHJlc2VudGF0aW9uJyB9IH0pLm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RFWFRfV1JBUCwgaW5uZXJIVE1MOiB0eHQgKyBfdGhpcy5idG5DbHMgfSkub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdyYXAgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfV1JBUCwgaW5uZXJIVE1MOiBjb250LCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0lURU1TLCBfdGhpcy5lbGVtZW50KS5hcHBlbmRDaGlsZChlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIGF0dHIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNLCBfdGhpcy5lbGVtZW50KVtpbmRleF0uYXBwZW5kQ2hpbGQod3JhcCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGJPYmogPSBuZXcgdG9vbGJhcl8xLlRvb2xiYXIoe1xuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3dNb2RlOiB0aGlzLm92ZXJmbG93TW9kZSxcbiAgICAgICAgICAgICAgICBpdGVtczogKHRhYkl0ZW1zLmxlbmd0aCAhPT0gMCkgPyB0YWJJdGVtcyA6IFtdLFxuICAgICAgICAgICAgICAgIGNsaWNrZWQ6IHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50Yk9iai5hcHBlbmRUbyh0aGlzLmhkckVsZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLW9yaWVudGF0aW9uJzogJ2hvcml6b250YWwnIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRDbG9zZUJ1dHRvbih0aGlzLnNob3dDbG9zZUJ1dHRvbik7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBoZWFkZXJQbGFjZW1lbnQ6ICh0aGlzLmVsZW1lbnQuY2hpbGRyZW4uaXRlbSgwKS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0hFQURFUikpID8gJ1RvcCcgOiAnQm90dG9tJyB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW5kZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbnRFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBoZHJJdGVtID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbnQgPSAodGhpcy5jbnRFbGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgPyB0aGlzLmNudEVsZS5pbm5lckhUTUwgOiAnJztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSB0aGlzLmNudEVsZS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhkckl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRzLmxlbmd0aCAtIDEgPj0gaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHMuaXRlbShpKS5jbGFzc05hbWUgKz0gQ0xTX0lURU07XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXMoY29udGVudHMuaXRlbShpKSwgeyAncm9sZSc6ICd0YWJwYW5lbCcsICdhcmlhLWxhYmVsbGVkYnknOiBDTFNfSVRFTSArICdfJyArIGkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50cy5pdGVtKGkpLmlkID0gQ0xTX0NPTlRFTlQgKyAnXycgKyBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnBhcnNlT2JqZWN0ID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluSFRNTCA9ICcnO1xuICAgICAgICAgICAgdmFyIHRiQ291bnQgPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgdEl0ZW1zID0gW107XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtLmhlYWRlci5pY29uUG9zaXRpb24pKSA/ICcnIDogaXRlbS5oZWFkZXIuaWNvblBvc2l0aW9uO1xuICAgICAgICAgICAgICAgIHZhciBjc3MgPSAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtLmhlYWRlci5pY29uQ3NzKSkgPyAnJyA6IGl0ZW0uaGVhZGVyLmljb25Dc3M7XG4gICAgICAgICAgICAgICAgdmFyIHR4dCA9IGl0ZW0uaGVhZGVyLnRleHQ7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gKCh0YkNvdW50ID09PSAwKSA/IGluZGV4IDogKF90aGlzLmlzUmVwbGFjZSA9PT0gdHJ1ZSkgPyBpbmRleCA6IHRiQ291bnQgKyBpbmRleCk7XG4gICAgICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gKGl0ZW0uZGlzYWJsZWQpID8gJyAnICsgQ0xTX0RJU0FCTEUgOiAnJztcbiAgICAgICAgICAgICAgICB2YXIgdEh0bWwgPSAoKHR4dCBpbnN0YW5jZW9mIE9iamVjdCkgPyB0eHQub3V0ZXJIVE1MIDogdHh0KTtcbiAgICAgICAgICAgICAgICB2YXIgdHh0RW1wdHkgPSAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodEh0bWwpICYmIHRIdG1sICE9PSAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRFbGUgPSAodHh0RW1wdHkpID8gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogQ0xTX1RFWFQsIGlubmVySFRNTDogdEh0bWwsIGF0dHJzOiB7ICdyb2xlJzogJ3ByZXNlbnRhdGlvbicgfVxuICAgICAgICAgICAgICAgIH0pLm91dGVySFRNTCA6ICcnO1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IENMU19JQ09OUyArICcgJyArIENMU19UQUJfSUNPTiArICcgJyArIENMU19JQ09OICsgJy0nICsgcG9zICsgJyAnICsgY3NzXG4gICAgICAgICAgICAgICAgfSkub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgIGlmICgodHh0ID09PSAnJyB8fCB0eHQgPT09IHVuZGVmaW5lZCkgJiYgY3NzID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHR4dCAhPT0gJycgJiYgdHh0ICE9PSB1bmRlZmluZWQpICYmIGNzcyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluSFRNTCA9IChwb3MgPT09ICdsZWZ0JyB8fCBwb3MgPT09ICd0b3AnKSA/IGljb24gKyAnJyArIHRFbGUgOiB0RWxlICsgJycgKyBpY29uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5IVE1MID0gKGNzcyA9PT0gJycpID8gdEVsZSA6IGljb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRDb250ID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RFWFRfV1JBUCwgaW5uZXJIVE1MOiBpbkhUTUwgKyAnJyArIF90aGlzLmJ0bkNscyB9KS5vdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXAgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfV1JBUCwgaW5uZXJIVE1MOiB0Q29udCwgYXR0cnM6IHsgdGFiSW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0ck9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IENMU19JVEVNICsgJ18nICsgaWQsIHJvbGU6ICd0YWInLCAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB0SXRlbSA9IHsgaHRtbEF0dHJpYnV0ZXM6IGF0dHJPYmosIHRlbXBsYXRlOiB3cmFwLm91dGVySFRNTCB9O1xuICAgICAgICAgICAgICAgIHRJdGVtLmNzc0NsYXNzID0gaXRlbS5jc3NDbGFzcyArICcnICsgZGlzYWJsZWQgKyAnJyArICgoY3NzICE9PSAnJykgPyAnZS1pJyArIHBvcyA6ICcnKSArICcgJyArICgoIXR4dEVtcHR5KSA/IENMU19JQ09OIDogJycpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPT09ICd0b3AnIHx8IHBvcyA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXZlcnRpY2FsLWljb24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdEl0ZW1zLnB1c2godEl0ZW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdEl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnJlbW92ZUFjdGl2ZUNsYXNzID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgaGRyQWN0RWxlID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJzpyb290IC4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVEJfSVRFTSArICcuJyArIENMU19BQ1RJVkUsIHRoaXMuZWxlbWVudClbMF07XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaGRyQWN0RWxlKSkge1xuICAgICAgICAgICAgICAgIGhkckFjdEVsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgIHZhciBubyA9IHRoaXMuZXh0SW5kZXgoaGRyQWN0RWxlLmlkKTtcbiAgICAgICAgICAgICAgICB2YXIgdHJnID0gdGhpcy5maW5kRWxlKGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1jb250ZW50JywgdGhpcy5lbGVtZW50KS5jaGlsZHJlbiwgQ0xTX0NPTlRFTlQgKyAnXycgKyBubyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuY2hlY2tQb3B1cE92ZXJmbG93ID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdGhpcy50YlBvcCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9QT1AsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgcG9wSWNvbiA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1ob3ItbmF2JywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciB0YnJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNUywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICgodGhpcy5lbmFibGVSdGwgJiYgKChwb3BJY29uLm9mZnNldExlZnQgKyBwb3BJY29uLm9mZnNldFdpZHRoKSA+IHRickl0ZW1zLm9mZnNldExlZnQpKVxuICAgICAgICAgICAgICAgIHx8ICghdGhpcy5lbmFibGVSdGwgJiYgcG9wSWNvbi5vZmZzZXRMZWZ0IDwgdGJySXRlbXMub2Zmc2V0V2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQoQ0xTX1RCX1BPUFVQKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRiUG9wLmluc2VydEJlZm9yZShlbGUuY2xvbmVOb2RlKHRydWUpLCBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfUE9QVVAsIHRoaXMudGJQb3ApWzBdKTtcbiAgICAgICAgICAgICAgICBlbGUub3V0ZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5wb3B1cEhhbmRsZXIgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgcmlwRWxlID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLXJpcHBsZS1lbGVtZW50Jyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQocmlwRWxlKSkge1xuICAgICAgICAgICAgICAgIHJpcEVsZS5vdXRlckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB0YXJnZXQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfV1JBUCkuY2xhc3NMaXN0LnJlbW92ZSgnZS1yaXBwbGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGJJdGVtID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU1TICsgJyAuJyArIENMU19UQl9JVEVNLCB0aGlzLmhkckVsZSk7XG4gICAgICAgICAgICB2YXIgbGFzdENoaWxkID0gdGhpcy50Ykl0ZW1bdGhpcy50Ykl0ZW0ubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAodGhpcy50Ykl0ZW0ubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1RCX1BPUFVQKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRiSXRlbXMuYXBwZW5kQ2hpbGQodGFyZ2V0LmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RFbGVJZCA9IHRhcmdldC5pZDtcbiAgICAgICAgICAgICAgICB0YXJnZXQub3V0ZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tQb3B1cE92ZXJmbG93KGxhc3RDaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZFbGUgPSB0aGlzLnRiSXRlbXMubGFzdENoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQb3B1cE92ZXJmbG93KHByZXZFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlzUG9wdXAgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLnRiSXRlbXMpLmxlbmd0aCAtIDE7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc2V0Q2xvc2VCdXR0b24gPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB2YXIgdHJnID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICh2YWwgPT09IHRydWUpID8gdHJnLmNsYXNzTGlzdC5hZGQoQ0xTX0NMT1NFX1NIT1cpIDogdHJnLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0NMT1NFX1NIT1cpO1xuICAgICAgICAgICAgdGhpcy50Yk9iai5yZWZyZXNoT3ZlcmZsb3coKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEFjdEVsZVBvc2l0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucHJldkN0bkFuaW1hdGlvbiA9IGZ1bmN0aW9uIChwcmV2LCBjdXJyZW50KSB7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uO1xuICAgICAgICAgICAgdmFyIGNoZWNrUlRMID0gdGhpcy5lbmFibGVSdGwgfHwgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTFNfUlRMKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUG9wdXAgfHwgcHJldiA8PSBjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uLnByZXZpb3VzLmVmZmVjdCA9PT0gJ1NsaWRlTGVmdEluJykge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gPSB7IG5hbWU6ICdTbGlkZUxlZnRPdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLnByZXZpb3VzLmR1cmF0aW9uLCB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb24ucHJldmlvdXMuZWFzaW5nIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbi5uZXh0LmVmZmVjdCA9PT0gJ1NsaWRlUmlnaHRJbicpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uID0geyBuYW1lOiAnU2xpZGVSaWdodE91dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb24ubmV4dC5kdXJhdGlvbiwgdGltaW5nRnVuY3Rpb246IHRoaXMuYW5pbWF0aW9uLm5leHQuZWFzaW5nIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhbmltYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUudHJpZ2dlclByZXZBbmltYXRpb24gPSBmdW5jdGlvbiAob2xkQ250LCBwcmV2SW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRlT2JqID0gdGhpcy5wcmV2Q3RuQW5pbWF0aW9uKHByZXZJbmRleCwgdGhpcy5zZWxlY3RlZEl0ZW0pO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGFuaW1hdGVPYmopKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZU9iai5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZShvbGRDbnQsIHsgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250LmNsYXNzTGlzdC5hZGQoJ2UtdmlldycpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZU9iai5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZENudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBvbGRDbnQuY2xhc3NMaXN0LnJlbW92ZShDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250LmNsYXNzTGlzdC5yZW1vdmUoJ2UtdmlldycpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKG9sZENudCwgeyAnZGlzcGxheSc6ICcnLCAncG9zaXRpb24nOiAnJyB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ldyBlajJfYmFzZV81LkFuaW1hdGlvbihhbmltYXRlT2JqKS5hbmltYXRlKG9sZENudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUudHJpZ2dlckFuaW1hdGlvbiA9IGZ1bmN0aW9uIChpZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcHJldkluZGV4ID0gdGhpcy5wcmV2SW5kZXg7XG4gICAgICAgICAgICB2YXIgb2xkQ250ID0gZWoyX2Jhc2VfMi5zZWxlY3QoJyMnICsgdGhpcy5wcmV2QWN0aXZlRWxlLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHByZXZFbGUgPSB0aGlzLnRiSXRlbVtwcmV2SW5kZXhdO1xuICAgICAgICAgICAgdmFyIG5vID0gdGhpcy5leHRJbmRleCh0aGlzLnRiSXRlbVt0aGlzLnNlbGVjdGVkSXRlbV0uaWQpO1xuICAgICAgICAgICAgdmFyIG5ld0NudDtcbiAgICAgICAgICAgIG5ld0NudCA9IHRoaXMuZmluZEVsZSh0aGlzLmNudEVsZS5jaGlsZHJlbiwgQ0xTX0NPTlRFTlQgKyAnXycgKyBubyk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChvbGRDbnQpICYmICFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHByZXZFbGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkTm8gPSB0aGlzLmV4dEluZGV4KHByZXZFbGUuaWQpO1xuICAgICAgICAgICAgICAgIG9sZENudCA9IHRoaXMuZmluZEVsZSh0aGlzLmNudEVsZS5jaGlsZHJlbiwgQ0xTX0NPTlRFTlQgKyAnXycgKyBpZE5vKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmluaXRSZW5kZXIgfHwgdmFsdWUgPT09IGZhbHNlIHx8IHRoaXMuYW5pbWF0aW9uID09PSB7fSB8fCBlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYW5pbWF0aW9uKSkge1xuICAgICAgICAgICAgICAgIGlmIChvbGRDbnQgJiYgb2xkQ250ICE9PSBuZXdDbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbnQgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBhbmltYXRlT2JqO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldkluZGV4ID4gdGhpcy5zZWxlY3RlZEl0ZW0gJiYgIXRoaXMuaXNQb3B1cCkge1xuICAgICAgICAgICAgICAgIHZhciBvcGVuRWZmID0gdGhpcy5hbmltYXRpb24ucHJldmlvdXMuZWZmZWN0O1xuICAgICAgICAgICAgICAgIGFuaW1hdGVPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICgob3BlbkVmZiA9PT0gJ05vbmUnKSA/ICcnIDogKChvcGVuRWZmICE9PSAnU2xpZGVMZWZ0SW4nKSA/IG9wZW5FZmYgOiAnU2xpZGVMZWZ0SW4nKSksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvbi5wcmV2aW91cy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGltaW5nRnVuY3Rpb246IHRoaXMuYW5pbWF0aW9uLnByZXZpb3VzLmVhc2luZ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzUG9wdXAgfHwgdGhpcy5wcmV2SW5kZXggPCB0aGlzLnNlbGVjdGVkSXRlbSB8fCB0aGlzLnByZXZJbmRleCA9PT0gdGhpcy5zZWxlY3RlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xzRWZmID0gdGhpcy5hbmltYXRpb24ubmV4dC5lZmZlY3Q7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZU9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKChjbHNFZmYgPT09ICdOb25lJykgPyAnJyA6ICgoY2xzRWZmICE9PSAnU2xpZGVSaWdodEluJykgPyBjbHNFZmYgOiAnU2xpZGVSaWdodEluJykpLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb24ubmV4dC5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGltaW5nRnVuY3Rpb246IHRoaXMuYW5pbWF0aW9uLm5leHQuZWFzaW5nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFuaW1hdGVPYmoucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY250LmNsYXNzTGlzdC5hZGQoQ0xTX1BST0dSRVNTKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhbmltYXRlT2JqLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbnQuY2xhc3NMaXN0LnJlbW92ZShDTFNfUFJPR1JFU1MpO1xuICAgICAgICAgICAgICAgIG5ld0NudC5jbGFzc0xpc3QuYWRkKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbml0UmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyUHJldkFuaW1hdGlvbihvbGRDbnQsIHByZXZJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVFbGUgPSBuZXdDbnQuaWQ7XG4gICAgICAgICAgICB0aGlzLmlzUG9wdXAgPSBmYWxzZTtcbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV81LkFuaW1hdGlvbihhbmltYXRlT2JqKS5hbmltYXRlKG5ld0NudCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUua2V5UHJlc3NlZCA9IGZ1bmN0aW9uICh0cmcpIHtcbiAgICAgICAgICAgIHZhciB0cmdQYXJlbnQgPSBlajJfYmFzZV8xLmNsb3Nlc3QodHJnLCAnLicgKyBDTFNfVEJfSVRFTSk7XG4gICAgICAgICAgICB2YXIgdHJnSW5kZXggPSB0aGlzLmdldEVsZUluZGV4KHRyZ1BhcmVudCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wb3BFbGUpICYmIHRyZy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaG9yLW5hdicpKSB7XG4gICAgICAgICAgICAgICAgKHRoaXMucG9wRWxlLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUE9QVVBfT1BFTikpID8gdGhpcy5wb3BPYmouaGlkZSh0aGlzLmhpZGUpIDogdGhpcy5wb3BPYmouc2hvdyh0aGlzLnNob3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHJnLmNsYXNzTGlzdC5jb250YWlucygnZS1zY3JvbGwtbmF2JykpIHtcbiAgICAgICAgICAgICAgICB0cmcuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0cmdQYXJlbnQpICYmIHRyZ1BhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRyZ0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucG9wRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouaGlkZSh0aGlzLmhpZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmdldEVsZUluZGV4ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpLCBpdGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5leHRJbmRleCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkLnJlcGxhY2UoQ0xTX0lURU0gKyAnXycsICcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKGVsZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICAgICAgICB2YXIgdGVtcEVsZSA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB2YXIgY250ID0gdGhpcy5pdGVtc1tOdW1iZXIoaW5kZXgpXS5jb250ZW50O1xuICAgICAgICAgICAgdmFyIGNudEhUTUwgPSAodHlwZW9mIGNudCAhPT0gJ29iamVjdCcpID8gY250IDogY250Lm91dGVySFRNTDtcbiAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV81LmNvbXBpbGUoY250SFRNTCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGVtcGxhdGVGbikgJiYgdGVtcGxhdGVGbigpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRlbXBsYXRlRm4oKSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcEVsZS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKHRlbXBFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlLmlubmVySFRNTCA9IGNudEhUTUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZmluZEVsZSA9IGZ1bmN0aW9uIChpdGVtcywga2V5KSB7XG4gICAgICAgICAgICB2YXIgZWxlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXS5pZCA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZSA9IGl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldE9yaWVudGF0aW9uID0gZnVuY3Rpb24gKHBsYWNlLCBlbGUpIHtcbiAgICAgICAgICAgIChwbGFjZSA9PT0gJ0JvdHRvbScpID8gdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVsZSkgOiB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsZSwgZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIHRoaXMuZWxlbWVudCkpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldENzc0NsYXNzID0gZnVuY3Rpb24gKGVsZSwgY2xzLCB2YWwpIHtcbiAgICAgICAgICAgIGlmIChjbHMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxpc3QgPSBjbHMuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQobGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZShsaXN0W2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc2V0Q29udGVudEhlaWdodCA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY250RWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWlnaHQ7XG4gICAgICAgICAgICB2YXIgaGRyRWxlID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodEFkanVzdE1vZGUgPT09ICdOb25lJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5jbnRFbGUsIHsgJ2hlaWdodCc6ICh0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gaGRyRWxlLm9mZnNldEhlaWdodCkgKyAncHgnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaGVpZ2h0QWRqdXN0TW9kZSA9PT0gJ0ZpbGwnKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6ICcxMDAlJyB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuY250RWxlLCB7ICdoZWlnaHQnOiAnYXV0bycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhlaWdodEFkanVzdE1vZGUgPT09ICdBdXRvJykge1xuICAgICAgICAgICAgICAgIHZhciBjbnQgPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfQ09OVEVOVCArICcgPiAuJyArIENMU19JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVGVtcGxhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNudFtpXS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6YmxvY2s7IHZpc2liaWxpdHk6IHZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5tYXhIZWlnaHQsIHRoaXMuZ2V0SGVpZ2h0KGNudFtpXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY250W2ldLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbnRbaV0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3Zpc2liaWxpdHknKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbnRFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbnRFbGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IChDTFNfQ09OVEVOVCArICdfJyArIDApLCBjbGFzc05hbWU6IENMU19JVEVNICsgJyAnICsgQ0xTX0FDVElWRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyAncm9sZSc6ICd0YWJwYW5lbCcsICdhcmlhLWxhYmVsbGVkYnknOiBDTFNfSVRFTSArICdfJyArIDAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmNudEVsZS5jaGlsZHJlbi5pdGVtKDApO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudChlbGUsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSBNYXRoLm1heCh0aGlzLm1heEhlaWdodCwgdGhpcy5nZXRIZWlnaHQoZWxlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KGVsZSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuY250RWxlLCB7ICdoZWlnaHQnOiB0aGlzLm1heEhlaWdodCArICdweCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuY250RWxlLCB7ICdoZWlnaHQnOiAnYXV0bycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIGNzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlKTtcbiAgICAgICAgICAgIHJldHVybiBlbGUub2Zmc2V0SGVpZ2h0ICsgcGFyc2VGbG9hdChjcy5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXRvcCcpKSArIHBhcnNlRmxvYXQoY3MuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1ib3R0b20nKSkgK1xuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY3MuZ2V0UHJvcGVydHlWYWx1ZSgnbWFyZ2luLXRvcCcpKSArIHBhcnNlRmxvYXQoY3MuZ2V0UHJvcGVydHlWYWx1ZSgnbWFyZ2luLWJvdHRvbScpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZXRBY3RpdmVCb3JkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdHJnID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU0gKyAnLicgKyBDTFNfQUNUSVZFLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHRyZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoc0NudCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNUyArICcgLmUtaHNjcm9sbC1jb250ZW50JywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMudGJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNUywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBiYXIgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSU5ESUNBVE9SLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHRiV2lkdGggPSAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChoc0NudCkpID8gdGhpcy50Ykl0ZW1zLm9mZnNldFdpZHRoIDogaHNDbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKGJhciwgeyAnbGVmdCc6IHRyZy5vZmZzZXRMZWZ0ICsgJ3B4JywgJ3JpZ2h0JzogdGJXaWR0aCAtICh0cmcub2Zmc2V0TGVmdCArIHRyZy5vZmZzZXRXaWR0aCkgKyAncHgnIH0pO1xuICAgICAgICAgICAgdGhpcy5iZHJMaW5lLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0hJRERFTik7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc2V0QWN0aXZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnRiSXRlbSA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHRyZyA9IHRoaXMudGJJdGVtW3ZhbHVlXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgc2VsZWN0ZWRJdGVtOiB2YWx1ZSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDAgfHwgaXNOYU4odmFsdWUpIHx8IHRoaXMudGJJdGVtLmxlbmd0aCA9PT0gMCB8fCB0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldiA9IHRoaXMudGJJdGVtW3RoaXMucHJldkluZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQocHJldikpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldi5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hdHRyaWJ1dGVzKHRyZywgeyAnYXJpYS1jb250cm9scyc6IENMU19DT05URU5UICsgJ18nICsgdmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaWQgPSB0cmcuaWQ7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFjdGl2ZUNsYXNzKGlkKTtcbiAgICAgICAgICAgIHRyZy5jbGFzc0xpc3QuYWRkKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgdHJnLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB2YXIgbm8gPSBOdW1iZXIodGhpcy5leHRJbmRleChpZCkpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyAnYXJpYS1hY3RpdmVkZXNjZW5kYW50JzogaWQgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19DT05URU5ULCB0aGlzLmVsZW1lbnQpLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZ18xID0gdGhpcy5maW5kRWxlKGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1jb250ZW50JywgdGhpcy5lbGVtZW50KS5jaGlsZHJlbiwgQ0xTX0NPTlRFTlQgKyAnXycgKyBubyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0cmdfMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZ18xLmNsYXNzTGlzdC5hZGQoQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyQW5pbWF0aW9uKGlkLCB0aGlzLmVuYWJsZUFuaW1hdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCArICcgPiAjJyArIENMU19DT05URU5UICsgJ18nICsgdGhpcy5leHRJbmRleChpZCksIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbnRFbGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogQ0xTX0NPTlRFTlQgKyAnXycgKyB0aGlzLmV4dEluZGV4KGlkKSwgY2xhc3NOYW1lOiBDTFNfSVRFTSArICcgJyArIENMU19BQ1RJVkUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyByb2xlOiAndGFicGFuZWwnLCAnYXJpYS1sYWJlbGxlZGJ5JzogQ0xTX0lURU0gKyAnXycgKyB0aGlzLmV4dEluZGV4KGlkKSB9XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZVRyZyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19DT05URU5UICsgJyA+ICMnICsgQ0xTX0NPTlRFTlQgKyAnXycgKyB0aGlzLmV4dEluZGV4KGlkKSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KGVsZVRyZywgTnVtYmVyKHRoaXMuZXh0SW5kZXgoaWQpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlckFuaW1hdGlvbihpZCwgdGhpcy5lbmFibGVBbmltYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgICAgIHZhciBjdXJBY3RJdGVtID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgIycgKyBpZCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEl0ZW1WaXNpYmlsaXR5KGN1ckFjdEl0ZW0pO1xuICAgICAgICAgICAgY3VyQWN0SXRlbS5maXJzdENoaWxkLmZvY3VzKCk7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmcgPSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtOiB0aGlzLnByZXZJdGVtLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSW5kZXg6IHRoaXMucHJldkluZGV4LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbTogdHJnLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IHZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdzZWxlY3RlZCcsIGV2ZW50QXJnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZXRJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdGhpcy5pc1JlcGxhY2UgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50Ykl0ZW1zID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU1TLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy50Yk9iai5pdGVtcyA9IHRoaXMucGFyc2VPYmplY3QoaXRlbXMpO1xuICAgICAgICAgICAgdGhpcy50Yk9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5pc1JlcGxhY2UgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZXRSVEwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudGJPYmouZW5hYmxlUnRsID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnRiT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKHRoaXMuZWxlbWVudCwgQ0xTX1JUTCwgdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWN0aXZlQm9yZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucmVmcmVzaEFjdGl2ZUJvcmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmJkckxpbmUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iZHJMaW5lLmNsYXNzTGlzdC5hZGQoQ0xTX0hJRERFTik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZWZyZXNoQWN0RWxlUG9zaXRpb24uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnbW91c2VvdmVyJywgdGhpcy5ob3ZlckhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2tleWRvd24nLCB0aGlzLnNwYWNlS2V5RG93biwgdGhpcyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jbnRFbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG5ldyBlajJfYmFzZV81LlRvdWNoKHRoaXMuY250RWxlLCB7IHN3aXBlOiB0aGlzLnN3aXBlSGFuZGxlci5iaW5kKHRoaXMpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5rZXlNb2R1bGUgPSBuZXcgZWoyX2Jhc2VfMy5LZXlib2FyZEV2ZW50cyh0aGlzLmVsZW1lbnQsIHsga2V5QWN0aW9uOiB0aGlzLmtleUhhbmRsZXIuYmluZCh0aGlzKSwga2V5Q29uZmlnczogdGhpcy5rZXlDb25maWdzIH0pO1xuICAgICAgICAgICAgdGhpcy50YWJLZXlNb2R1bGUgPSBuZXcgZWoyX2Jhc2VfMy5LZXlib2FyZEV2ZW50cyh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5SGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGtleUNvbmZpZ3M6IHsgb3BlblBvcHVwOiAnc2hpZnQrZjEwJywgdGFiOiAndGFiJywgc2hpZnRUYWI6ICdzaGlmdCt0YWInIH0sXG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAna2V5ZG93bidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMua2V5TW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMudGFiS2V5TW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNudEVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlZnJlc2hBY3RFbGVQb3NpdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLmhvdmVySGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0ZPQ1VTKTtcbiAgICAgICAgICAgIHZhciB0cmcgPSBhcmdzLm9yaWdpbmFsRXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHRyZ1BhcmVudCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0cmcsICcuJyArIENMU19UQl9JVEVNKTtcbiAgICAgICAgICAgIHZhciB0cmdJbmRleCA9IHRoaXMuZ2V0RWxlSW5kZXgodHJnUGFyZW50KTtcbiAgICAgICAgICAgIGlmICh0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19JQ09OX0NMT1NFKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFiKHRyZ0luZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQb3B1cCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0cmdQYXJlbnQpICYmIHRyZ0luZGV4ICE9PSB0aGlzLnNlbGVjdGVkSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0cmdJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnN3aXBlSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS52ZWxvY2l0eSA8IDMgJiYgZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUuc3dpcGVEaXJlY3Rpb24gPT09ICdSaWdodCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkSXRlbSAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuc3dpcGVEaXJlY3Rpb24gPT09ICdMZWZ0JyAmJiAodGhpcy5zZWxlY3RlZEl0ZW0gIT09IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJdGVtICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNwYWNlS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoKGUua2V5Q29kZSA9PT0gMzIgJiYgZS53aGljaCA9PT0gMzIpIHx8IChlLmtleUNvZGUgPT09IDM1ICYmIGUud2hpY2ggPT09IDM1KSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5rZXlIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMU19GT0NVUyk7XG4gICAgICAgICAgICB2YXIgdHJnID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgYWN0RWxlID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfQUNUSVZFLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHRhYkl0ZW0gPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSArICc6bm90KC4nICsgQ0xTX1RCX1BPUFVQICsgJyknLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wb3BFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEJfUE9QLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucG9wRWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqID0gdGhpcy5wb3BFbGUuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzcGFjZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdlbnRlcicgJiYgdHJnLmNsYXNzTGlzdC5jb250YWlucygnZS1ob3ItbmF2JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5UHJlc3NlZCh0cmcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0YWInOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0VGFiJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyZy5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1dSQVApXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBlajJfYmFzZV8xLmNsb3Nlc3QodHJnLCAnLicgKyBDTFNfVEJfSVRFTSkuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJnLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3BPYmogJiYgZWoyX2Jhc2VfMi5pc1Zpc2libGUodGhpcy5wb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmhpZGUodGhpcy5oaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhY3RFbGUuY2hpbGRyZW4uaXRlbSgwKS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZUxlZnQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICcuJyArIENMU19UQl9JVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hJdGVtVmlzaWJpbGl0eShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdvcGVuUG9wdXAnOlxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBvcEVsZSkgJiYgdGhpcy5wb3BFbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19QT1BVUF9DTE9TRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLnNob3codGhpcy5zaG93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJnUGFyZW50ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRyZywgJy4nICsgQ0xTX1RCX0lURU0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q2xvc2VCdXR0b24gPT09IHRydWUgJiYgIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodHJnUGFyZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG54dFNpYiA9IHRyZ1BhcmVudC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChueHRTaWIpICYmIG54dFNpYi5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCX0lURU0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnh0U2liLmZpcnN0Q2hpbGQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFiKHRoaXMuZ2V0RWxlSW5kZXgodHJnUGFyZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucmVmcmVzaEFjdEVsZVBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNICsgJy4nICsgQ0xTX1RCX1BPUFVQICsgJy4nICsgQ0xTX0FDVElWRSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChhY3RpdmVFbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5nZXRFbGVJbmRleChhY3RpdmVFbGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnJlZnJlc2hJdGVtVmlzaWJpbGl0eSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBzY3JDbnQgPSBlajJfYmFzZV8yLnNlbGVjdCgnLmUtaHNjcm9sbC1jb250ZW50JywgdGhpcy50Ykl0ZW1zKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChzY3JDbnQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjckJhciA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1oc2Nyb2xsLWJhcicsIHRoaXMudGJJdGVtcyk7XG4gICAgICAgICAgICAgICAgdmFyIHNjclN0YXJ0ID0gc2NyQmFyLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIHNjckVuZCA9IHNjclN0YXJ0ICsgc2NyQmFyLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBlbGVTdGFydCA9IHRhcmdldC5vZmZzZXRMZWZ0O1xuICAgICAgICAgICAgICAgIHZhciBlbGVXaWR0aCA9IHRhcmdldC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgZWxlRW5kID0gdGFyZ2V0Lm9mZnNldExlZnQgKyB0YXJnZXQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgaWYgKChzY3JTdGFydCA8IGVsZVN0YXJ0KSAmJiAoc2NyRW5kIDwgZWxlRW5kKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlVmlld1JhbmdlID0gc2NyRW5kIC0gZWxlU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgIHNjckJhci5zY3JvbGxMZWZ0ID0gc2NyU3RhcnQgKyAoZWxlV2lkdGggLSBlbGVWaWV3UmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChzY3JTdGFydCA+IGVsZVN0YXJ0KSAmJiAoc2NyRW5kID4gZWxlRW5kKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZVZpZXdSYW5nZSA9IGVsZUVuZCAtIHNjclN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyQmFyLnNjcm9sbExlZnQgPSBzY3JTdGFydCAtIChlbGVXaWR0aCAtIGVsZVZpZXdSYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuaG92ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0cmcgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICh0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19JQ09OX0NMT1NFKSkge1xuICAgICAgICAgICAgICAgIHRyZy5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgbmV3IGVqMl9iYXNlXzMuTDEwbigndGFiJywgeyB0aXRsZTogdGhpcy50aXRsZSB9LCB0aGlzLmxvY2FsZSkuZ2V0Q29uc3RhbnQoJ3RpdGxlJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmVuYWJsZVRhYiA9IGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB0Ykl0ZW1zID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudClbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGJJdGVtcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0Ykl0ZW1zLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0RJU0FCTEUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGJJdGVtcy5jbGFzc0xpc3QuYWRkKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICBpZiAodGJJdGVtcy5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoaW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0Ykl0ZW1zLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICh2YWx1ZSA9PT0gdHJ1ZSkgPyAnZmFsc2UnIDogJ3RydWUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5hZGRUYWIgPSBmdW5jdGlvbiAoaXRlbXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdhZGRpbmcnLCB7IGFkZGVkSXRlbXM6IGl0ZW1zIH0pO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSkubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzVGVtcGxhdGUgPT09IHRydWUgfHwgZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0pLmxlbmd0aCAtIDEgPCBpbmRleCB8fCBpbmRleCA8IDAgfHwgaXNOYU4oaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iZHJMaW5lLmNsYXNzTGlzdC5hZGQoQ0xTX0hJRERFTik7XG4gICAgICAgICAgICB0aGlzLnRiSXRlbXMgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEJfSVRFTVMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgdGFiSXRlbXMgPSB0aGlzLnBhcnNlT2JqZWN0KGl0ZW1zKTtcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnRiT2JqLmFkZEl0ZW1zKHRhYkl0ZW1zLCBpbmRleCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2FkZGVkJywgeyBhZGRlZEl0ZW1zOiBpdGVtcyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbSA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnJlbW92ZVRhYiA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHRyZyA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpW2luZGV4XTtcbiAgICAgICAgICAgIHZhciByZW1vdmluZ0FyZ3MgPSB7IHJlbW92ZWRJdGVtOiB0cmcsIHJlbW92ZWRJbmRleDogaW5kZXggfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigncmVtb3ZpbmcnLCByZW1vdmluZ0FyZ3MpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodHJnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGJPYmoucmVtb3ZlSXRlbXMoaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWN0aXZlQm9yZGVyKCk7XG4gICAgICAgICAgICB2YXIgbm8gPSB0aGlzLmV4dEluZGV4KHRyZy5pZCk7XG4gICAgICAgICAgICB2YXIgY250VHJnID0gdGhpcy5maW5kRWxlKGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1jb250ZW50JywgdGhpcy5lbGVtZW50KS5jaGlsZHJlbiwgQ0xTX0NPTlRFTlQgKyAnXycgKyBubyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoY250VHJnKSkge1xuICAgICAgICAgICAgICAgIGNudFRyZy5vdXRlckhUTUwgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZW1vdmVkQXJncyA9IHsgcmVtb3ZlZEl0ZW06IHRyZywgcmVtb3ZlZEluZGV4OiBpbmRleCB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdyZW1vdmVkJywgcmVtb3ZlZEFyZ3MpO1xuICAgICAgICAgICAgaWYgKHRyZy5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IChpbmRleCA+IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNICsgJzpub3QoLicgKyBDTFNfVEJfUE9QVVAgKyAnKScsIHRoaXMuZWxlbWVudCkubGVuZ3RoIC0gMSkgPyBpbmRleCAtIDEgOiBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUFuaW1hdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhkckVsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbmFibGVBbmltYXRpb24gPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmhpZGVUYWIgPSBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iZHJMaW5lLmNsYXNzTGlzdC5hZGQoQ0xTX0hJRERFTik7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoQ0xTX0hJRERFTik7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KChpbmRleCAhPT0gMCkgPyBpbmRleCAtIDEgOiBpbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShDTFNfSElEREVOKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQm9yZGVyKCk7XG4gICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnJyArIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy50Ykl0ZW1zID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU1TLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy50Ykl0ZW0gPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucHJldkl0ZW0gPSB0aGlzLnRiSXRlbVt0aGlzLnByZXZJbmRleF07XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wcmV2SXRlbSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZJdGVtLmNoaWxkcmVuLml0ZW0oMCkuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV2ZW50QXJnID0ge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbTogdGhpcy5wcmV2SXRlbSxcbiAgICAgICAgICAgICAgICBwcmV2aW91c0luZGV4OiB0aGlzLnByZXZJbmRleCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW06IHRoaXMudGJJdGVtW3RoaXMuc2VsZWN0ZWRJdGVtXSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4OiB0aGlzLnNlbGVjdGVkSXRlbVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignc2VsZWN0aW5nJywgZXZlbnRBcmcpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiSXRlbS5sZW5ndGggPiBhcmdzICYmIGFyZ3MgPj0gMCAmJiAhaXNOYU4oYXJncykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2SW5kZXggPSB0aGlzLnNlbGVjdGVkSXRlbTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGJJdGVtW2FyZ3NdLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJfUE9QVVApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZSh0aGlzLnBvcHVwSGFuZGxlcih0aGlzLnRiSXRlbVthcmdzXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmUoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3MgaW5zdGFuY2VvZiAoSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmUodGhpcy5nZXRFbGVJbmRleChhcmdzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDc3NDbGFzcyh0aGlzLmVsZW1lbnQsIENMU19ESVNBQkxFLCB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJycgKyB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3QoWydzZWxlY3RlZEl0ZW0nLCAnYWN0RWxlSWQnXSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAndGFiJztcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7IHdpZHRoOiBlajJfYmFzZV8zLmZvcm1hdFVuaXQobmV3UHJvcC53aWR0aCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7IGhlaWdodDogZWoyX2Jhc2VfMy5mb3JtYXRVbml0KG5ld1Byb3AuaGVpZ2h0KSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudEhlaWdodChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3NzQ2xhc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDc3NDbGFzcyh0aGlzLmVsZW1lbnQsIG5ld1Byb3AuY3NzQ2xhc3MsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2l0ZW1zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SXRlbXMobmV3UHJvcC5pdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0Nsb3NlQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2xvc2VCdXR0b24obmV3UHJvcC5zaG93Q2xvc2VCdXR0b24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdGVkSXRlbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChuZXdQcm9wLnNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVhZGVyUGxhY2VtZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wSGRyRWxlID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0T3JpZW50YXRpb24obmV3UHJvcC5oZWFkZXJQbGFjZW1lbnQsIHRlbXBIZHJFbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFJUTChuZXdQcm9wLmVuYWJsZVJ0bCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3ZlcmZsb3dNb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJPYmoub3ZlcmZsb3dNb2RlID0gbmV3UHJvcC5vdmVyZmxvd01vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRiT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hBY3RFbGVQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodEFkanVzdE1vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50SGVpZ2h0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRhYjtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29sbGVjdGlvbihbXSwgVGFiSXRlbSlcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcIml0ZW1zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJzEwMCUnKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcInNlbGVjdGVkSXRlbVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdUb3AnKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiaGVhZGVyUGxhY2VtZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0NvbnRlbnQnKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiaGVpZ2h0QWRqdXN0TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTY3JvbGxhYmxlJylcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcIm92ZXJmbG93TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiZW5hYmxlUnRsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJzaG93Q2xvc2VCdXR0b25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBUYWJBbmltYXRpb25TZXR0aW5ncylcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImFuaW1hdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImNyZWF0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJhZGRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJhZGRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcInNlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwicmVtb3ZpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJyZW1vdmVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiZGVzdHJveWVkXCIsIHZvaWQgMCk7XG4gICAgVGFiID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgVGFiKTtcbiAgICBleHBvcnRzLlRhYiA9IFRhYjtcbiAgICBleHBvcnRzLnRhYkJ1aWxkZXIgPSBlajJfYmFzZV8xLkNyZWF0ZUJ1aWxkZXIoVGFiKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdGFiL3RhYi5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi90cmVldmlld1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHRyZWV2aWV3XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHRyZWV2aWV3XzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90cmVldmlldy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWxpc3RzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCBlajJfYmFzZV82LCBlajJfZGF0YV8xLCBlajJfYmFzZV83LCBlajJfbGlzdHNfMSwgZWoyX2J1dHRvbnNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUk9PVCA9ICdlLXRyZWV2aWV3JztcbiAgICB2YXIgQ09MTEFQU0lCTEUgPSAnZS1pY29uLWNvbGxhcHNpYmxlJztcbiAgICB2YXIgRVhQQU5EQUJMRSA9ICdlLWljb24tZXhwYW5kYWJsZSc7XG4gICAgdmFyIExJU1RJVEVNID0gJ2UtbGlzdC1pdGVtJztcbiAgICB2YXIgTElTVFRFWFQgPSAnZS1saXN0LXRleHQnO1xuICAgIHZhciBQQVJFTlRJVEVNID0gJ2UtbGlzdC1wYXJlbnQnO1xuICAgIHZhciBIT1ZFUiA9ICdlLWhvdmVyJztcbiAgICB2YXIgQUNUSVZFID0gJ2UtYWN0aXZlJztcbiAgICB2YXIgTE9BRCA9ICdlLWxvYWQnO1xuICAgIHZhciBQUk9DRVNTID0gJ2UtcHJvY2Vzcyc7XG4gICAgdmFyIElDT04gPSAnZS1pY29ucyc7XG4gICAgdmFyIFRFWFRXUkFQID0gJ2UtdGV4dC1jb250ZW50JztcbiAgICB2YXIgSU5QVVQgPSAnZS10cmVlLWlucHV0JztcbiAgICB2YXIgRURJVElORyA9ICdlLWVkaXRpbmcnO1xuICAgIHZhciBSVEwgPSAnZS1ydGwnO1xuICAgIHZhciBEUkFHSVRFTSA9ICdlLWRyYWctaXRlbSc7XG4gICAgdmFyIERST1BQQUJMRSA9ICdlLWRyb3BwYWJsZSc7XG4gICAgdmFyIERSQUdHSU5HID0gJ2UtZHJhZ2dpbmcnO1xuICAgIHZhciBTSUJMSU5HID0gJ2Utc2libGluZyc7XG4gICAgdmFyIERST1BJTiA9ICdlLWRyb3AtaW4nO1xuICAgIHZhciBEUk9QTkVYVCA9ICdlLWRyb3AtbmV4dCc7XG4gICAgdmFyIERST1BPVVQgPSAnZS1kcm9wLW91dCc7XG4gICAgdmFyIE5PRFJPUCA9ICdlLW5vLWRyb3AnO1xuICAgIHZhciBGVUxMUk9XV1JBUCA9ICdlLWZ1bGxyb3ctd3JhcCc7XG4gICAgdmFyIEZVTExST1cgPSAnZS1mdWxscm93JztcbiAgICB2YXIgUE9QVVAgPSAnZS1wb3B1cCc7XG4gICAgdmFyIFNFTEVDVEVEID0gJ2Utc2VsZWN0ZWQnO1xuICAgIHZhciBFWFBBTkRFRCA9ICdlLWV4cGFuZGVkJztcbiAgICB2YXIgTk9ERUNPTExBUFNFRCA9ICdlLW5vZGUtY29sbGFwc2VkJztcbiAgICB2YXIgRElTQUJMRSA9ICdlLWRpc2FibGUnO1xuICAgIHZhciBQT1BVUFNFTEVDVCA9ICdlLXNlbGVjdCc7XG4gICAgdmFyIENPTlRFTlQgPSAnZS1jb250ZW50JztcbiAgICB2YXIgRE9XTlRBSUwgPSAnZS1kb3dudGFpbCc7XG4gICAgdmFyIERST1BDT1VOVCA9ICdlLWRyb3AtY291bnQnO1xuICAgIHZhciBDSEVDSyA9ICdlLWNoZWNrJztcbiAgICB2YXIgSU5ERVRFUk1JTkFURSA9ICdlLXN0b3AnO1xuICAgIHZhciBDSEVDS0JPWFdSQVAgPSAnZS1jaGVja2JveC13cmFwcGVyJztcbiAgICB2YXIgQ0hFQ0tCT1hGUkFNRSA9ICdlLWZyYW1lJztcbiAgICB2YXIgRk9DVVMgPSAnZS1ub2RlLWZvY3VzJztcbiAgICB2YXIgdHJlZUFyaWFBdHRyID0ge1xuICAgICAgICB0cmVlUm9sZTogJ3RyZWUnLFxuICAgICAgICBpdGVtUm9sZTogJ3RyZWVpdGVtJyxcbiAgICAgICAgbGlzdFJvbGU6ICdncm91cCcsXG4gICAgICAgIGl0ZW1UZXh0OiAnJyxcbiAgICB9O1xuICAgIHZhciBGaWVsZHNTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGaWVsZHNTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmllbGRzU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEZpZWxkc1NldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2NoaWxkJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiY2hpbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eShbXSlcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiZGF0YVNvdXJjZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdleHBhbmRlZCcpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2hhc0NoaWxkcmVuJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaGFzQ2hpbGRyZW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnaHRtbEF0dHJpYnV0ZXMnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJodG1sQXR0cmlidXRlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdpY29uQ3NzJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaWNvbkNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdpZCcpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2ltYWdlVXJsJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaW1hZ2VVcmxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnaXNDaGVja2VkJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaXNDaGVja2VkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ3BhcmVudElEJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwicGFyZW50SURcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJxdWVyeVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdzZWxlY3RlZCcpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkobnVsbClcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwidGFibGVOYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ3RleHQnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJ0ZXh0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ3Rvb2x0aXAnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJ0b29sdGlwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ25hdmlnYXRlVXJsJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwibmF2aWdhdGVVcmxcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkZpZWxkc1NldHRpbmdzID0gRmllbGRzU2V0dGluZ3M7XG4gICAgdmFyIEFjdGlvblNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjdGlvblNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY3Rpb25TZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQWN0aW9uU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnU2xpZGVEb3duJylcbiAgICBdLCBBY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZWZmZWN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoNDAwKVxuICAgIF0sIEFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdsaW5lYXInKVxuICAgIF0sIEFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJlYXNpbmdcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFjdGlvblNldHRpbmdzID0gQWN0aW9uU2V0dGluZ3M7XG4gICAgdmFyIE5vZGVBbmltYXRpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhOb2RlQW5pbWF0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIE5vZGVBbmltYXRpb25TZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTm9kZUFuaW1hdGlvblNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuQ29tcGxleCh7IGVmZmVjdDogJ1NsaWRlVXAnLCBkdXJhdGlvbjogNDAwLCBlYXNpbmc6ICdsaW5lYXInIH0sIEFjdGlvblNldHRpbmdzKVxuICAgIF0sIE5vZGVBbmltYXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sbGFwc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Db21wbGV4KHsgZWZmZWN0OiAnU2xpZGVEb3duJywgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnbGluZWFyJyB9LCBBY3Rpb25TZXR0aW5ncylcbiAgICBdLCBOb2RlQW5pbWF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImV4cGFuZFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuTm9kZUFuaW1hdGlvblNldHRpbmdzID0gTm9kZUFuaW1hdGlvblNldHRpbmdzO1xuICAgIHZhciBUcmVlVmlldyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUcmVlVmlldywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVHJlZVZpZXcob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmNoZWNrQWN0aW9uTm9kZXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmRyYWdTdGFydEFjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICBlc2NhcGU6ICdlc2NhcGUnLFxuICAgICAgICAgICAgICAgIGVuZDogJ2VuZCcsXG4gICAgICAgICAgICAgICAgZW50ZXI6ICdlbnRlcicsXG4gICAgICAgICAgICAgICAgZjI6ICdmMicsXG4gICAgICAgICAgICAgICAgaG9tZTogJ2hvbWUnLFxuICAgICAgICAgICAgICAgIG1vdmVEb3duOiAnZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlTGVmdDogJ2xlZnRhcnJvdycsXG4gICAgICAgICAgICAgICAgbW92ZVJpZ2h0OiAncmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgbW92ZVVwOiAndXBhcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybERvd246ICdjdHJsK2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybFVwOiAnY3RybCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsRW50ZXI6ICdjdHJsK2VudGVyJyxcbiAgICAgICAgICAgICAgICBjdHJsSG9tZTogJ2N0cmwraG9tZScsXG4gICAgICAgICAgICAgICAgY3RybEVuZDogJ2N0cmwrZW5kJyxcbiAgICAgICAgICAgICAgICBjdHJsQTogJ2N0cmwrQScsXG4gICAgICAgICAgICAgICAgc2hpZnREb3duOiAnc2hpZnQrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdFVwOiAnc2hpZnQrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnRFbnRlcjogJ3NoaWZ0K2VudGVyJyxcbiAgICAgICAgICAgICAgICBzaGlmdEhvbWU6ICdzaGlmdCtob21lJyxcbiAgICAgICAgICAgICAgICBzaGlmdEVuZDogJ3NoaWZ0K2VuZCcsXG4gICAgICAgICAgICAgICAgY3NEb3duOiAnY3RybCtzaGlmdCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIGNzVXA6ICdjdHJsK3NoaWZ0K3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGNzRW50ZXI6ICdjdHJsK3NoaWZ0K2VudGVyJyxcbiAgICAgICAgICAgICAgICBjc0hvbWU6ICdjdHJsK3NoaWZ0K2hvbWUnLFxuICAgICAgICAgICAgICAgIGNzRW5kOiAnY3RybCtzaGlmdCtlbmQnLFxuICAgICAgICAgICAgICAgIHNwYWNlOiAnc3BhY2UnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLm1vdXNlRG93blN0YXR1cyA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd0cmVldmlldyc7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBleHBhbmRDb2xsYXBzZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHRoaXMuZmllbGRzLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgc2hvd0ljb246IHRydWUsXG4gICAgICAgICAgICAgICAgZXhwYW5kSWNvbkNsYXNzOiBFWFBBTkRBQkxFLFxuICAgICAgICAgICAgICAgIGFyaWFBdHRyaWJ1dGVzOiB0cmVlQXJpYUF0dHIsXG4gICAgICAgICAgICAgICAgZXhwYW5kSWNvblBvc2l0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICAgICAgaXRlbUNyZWF0ZWQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmJlZm9yZU5vZGVDcmVhdGUoZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmxpc3RCYXNlT3B0aW9uLmZpZWxkcy51cmwgPSB0aGlzLmZpZWxkcy5uYXZpZ2F0ZVVybDtcbiAgICAgICAgICAgIHRoaXMuYW5pT2JqID0gbmV3IGVqMl9iYXNlXzQuQW5pbWF0aW9uKHt9KTtcbiAgICAgICAgICAgIHRoaXMudHJlZUxpc3QgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc2VsZWN0ZWROb2RlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBzZWxlY3RlZE5vZGVzOiBbXSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hlY2tlZE5vZGVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IGNoZWNrZWROb2RlczogW10gfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlFbnRpdHkgPSBbJ3NlbGVjdGVkTm9kZXMnLCAnY2hlY2tlZE5vZGVzJ107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXREYXRhQmluZGluZygpO1xuICAgICAgICAgICAgdGhpcy5zZXRFeHBhbmRPblR5cGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UmlwcGxlKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFZGl0aW5nRXZlbnRzKHRoaXMuYWxsb3dFZGl0aW5nKTtcbiAgICAgICAgICAgIHRoaXMuc2V0RHJhZ0FuZERyb3AodGhpcy5hbGxvd0RyYWdBbmREcm9wKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCB0cmVlQXJpYUF0dHIudHJlZVJvbGUpO1xuICAgICAgICAgICAgdGhpcy5zZXRDc3NDbGFzcyhudWxsLCB0aGlzLmNzc0NsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlUnRsKCk7XG4gICAgICAgICAgICB0aGlzLnNldEZ1bGxSb3codGhpcy5mdWxsUm93U2VsZWN0KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VG91Y2hQb3B1cCh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5zZXRNdWx0aVNlbGVjdCh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5ub2RlVGVtcGxhdGVGbiA9IHRoaXMudGVtcGxhdGVDb21wbGllcih0aGlzLm5vZGVUZW1wbGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRFbmFibGVSdGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZVJ0bCA/IGVqMl9iYXNlXzYuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIFJUTCkgOiBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBSVEwpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0UmlwcGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRlbXBTdHIgPSAnLicgKyBGVUxMUk9XICsgJywuJyArIFRFWFRXUkFQO1xuICAgICAgICAgICAgdmFyIHJpcHBsZU1vZGVsID0ge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiB0ZW1wU3RyLFxuICAgICAgICAgICAgICAgIGlnbm9yZTogJy4nICsgVEVYVFdSQVAgKyAnID4gLicgKyBJQ09OICsgJywuJyArIElOUFVUICsgJywgLicgKyBDSEVDS0JPWFdSQVBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnJpcHBsZUZuID0gZWoyX2Jhc2VfNC5yaXBwbGVFZmZlY3QodGhpcy5lbGVtZW50LCByaXBwbGVNb2RlbCk7XG4gICAgICAgICAgICB2YXIgaWNvbk1vZGVsID0ge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnLicgKyBURVhUV1JBUCArICcgPiAuJyArIElDT04sXG4gICAgICAgICAgICAgICAgaXNDZW50ZXJSaXBwbGU6IHRydWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yaXBwbGVJY29uRm4gPSBlajJfYmFzZV80LnJpcHBsZUVmZmVjdCh0aGlzLmVsZW1lbnQsIGljb25Nb2RlbCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRGdWxsUm93ID0gZnVuY3Rpb24gKGlzRW5hYmxlZCkge1xuICAgICAgICAgICAgaXNFbmFibGVkID8gZWoyX2Jhc2VfNi5hZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgRlVMTFJPV1dSQVApIDogZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgRlVMTFJPV1dSQVApO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0VG91Y2hQb3B1cCA9IGZ1bmN0aW9uIChpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9wdXAgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBQT1BVUCwgc3R5bGVzOiAnZGlzcGxheTpub25lOycgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDT05URU5ULCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IElDT04gfSk7XG4gICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFwcGVuZChbY29udGVudCwgZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogRE9XTlRBSUwgfSldLCBwb3B1cCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHBvcHVwKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQoY29udGVudCwgJ2NsaWNrJywgdGhpcy5wb3B1cENsaWNrLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBPUFVQLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChwb3B1cCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChwb3B1cCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0TXVsdGlTZWxlY3QgPSBmdW5jdGlvbiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tdWx0aXNlbGVjdGFibGUnLCAndHJ1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1tdWx0aXNlbGVjdGFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnBvcHVwQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgICB0YXJnZXQgPSBlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBQT1BVUCk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhQT1BVUFNFTEVDVCkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFt0YXJnZXRdLCBQT1BVUFNFTEVDVCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUE9QVVAsIHRoaXMuZWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW3RhcmdldF0sIFBPUFVQU0VMRUNUKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnRlbXBsYXRlQ29tcGxpZXIgPSBmdW5jdGlvbiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRlbXBsYXRlKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNvbXBpbGUoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY29tcGlsZSh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldERhdGFCaW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudHJlZUxpc3QucHVzaCgnZmFsc2UnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZWxkcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZmllbGRzLmRhdGFTb3VyY2UuZXhlY3V0ZVF1ZXJ5KHRoaXMuZ2V0UXVlcnkodGhpcy5maWVsZHMpKS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyZWVMaXN0LnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmVlRGF0YSA9IGUucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc051bWJlclR5cGVJZCA9IF90aGlzLnRyZWVEYXRhWzBdID8gKCh0eXBlb2YgX3RoaXMudHJlZURhdGFbMF1bX3RoaXMuZmllbGRzLmlkXSA9PT0gJ251bWJlcicpID8gdHJ1ZSA6IGZhbHNlKSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRSb290RGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJJdGVtcyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnRyZWVMaXN0Lmxlbmd0aCA9PT0gMCAmJiAhX3RoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZpbmFsaXplKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudHJlZUxpc3QucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5maWVsZHMuZGF0YVNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290RGF0YSA9IHRoaXMudHJlZURhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGEgPSB0aGlzLmZpZWxkcy5kYXRhU291cmNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFJvb3REYXRhKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVySXRlbXMoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHJlZUxpc3QubGVuZ3RoID09PSAwICYmICF0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0UXVlcnkgPSBmdW5jdGlvbiAobWFwcGVyLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHsgdmFsdWUgPSBudWxsOyB9XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5O1xuICAgICAgICAgICAgaWYgKCFtYXBwZXIucXVlcnkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSB0aGlzLmdldEFjdHVhbFByb3BlcnRpZXMobWFwcGVyKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wgIT09ICdkYXRhU291cmNlJyAmJiBjb2wgIT09ICd0YWJsZU5hbWUnICYmIGNvbCAhPT0gJ2NoaWxkJyAmJiAhIW1hcHBlcltjb2xdXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBjb2x1bW5zLmluZGV4T2YobWFwcGVyW2NvbF0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKG1hcHBlcltjb2xdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxdWVyeS5zZWxlY3QoY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgaWYgKHByb3AuaGFzT3duUHJvcGVydHkoJ3RhYmxlTmFtZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LmZyb20obWFwcGVyLnRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSBtYXBwZXIucXVlcnkuY2xvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9saXN0c18xLkxpc3RCYXNlLmFkZFNvcnRpbmcodGhpcy5zb3J0T3JkZXIsIG1hcHBlci50ZXh0LCBxdWVyeSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKG1hcHBlci5wYXJlbnRJRCkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS53aGVyZShtYXBwZXIucGFyZW50SUQsICdlcXVhbCcsICh0aGlzLmlzTnVtYmVyVHlwZUlkID8gcGFyc2VGbG9hdCh2YWx1ZSkgOiB2YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0Um9vdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFUeXBlID0gdGhpcy5nZXREYXRhVHlwZSh0aGlzLnRyZWVEYXRhLCB0aGlzLmZpZWxkcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBlZERhdGEgPSB0aGlzLmdldEdyb3VwZWREYXRhKHRoaXMudHJlZURhdGEsIHRoaXMuZmllbGRzLnBhcmVudElEKTtcbiAgICAgICAgICAgICAgICB2YXIgcm9vdEl0ZW1zID0gdGhpcy5nZXRDaGlsZE5vZGVzKHRoaXMudHJlZURhdGEsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQocm9vdEl0ZW1zKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3REYXRhID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3REYXRhID0gcm9vdEl0ZW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucm9vdERhdGEgPSB0aGlzLnRyZWVEYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVuZGVySXRlbXMgPSBmdW5jdGlvbiAoaXNTb3J0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uYXJpYUF0dHJpYnV0ZXMubGV2ZWwgPSAxO1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQgPSBlajJfbGlzdHNfMS5MaXN0QmFzZS5jcmVhdGVMaXN0KGlzU29ydGVkID8gdGhpcy5yb290RGF0YSA6IHRoaXMuZ2V0U29ydGVkRGF0YSh0aGlzLnJvb3REYXRhKSwgdGhpcy5saXN0QmFzZU9wdGlvbik7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy51bEVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5maW5hbGl6ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmJlZm9yZU5vZGVDcmVhdGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94RWxlID0gZWoyX2J1dHRvbnNfMS5jcmVhdGVDaGVja0JveCh0cnVlKTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIGUuaXRlbSk7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gZS5pdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgICAgICBlLml0ZW0uY2hpbGROb2Rlc1swXS5pbnNlcnRCZWZvcmUoY2hlY2tib3hFbGUsIGUuaXRlbS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChpY29uKSA/IDAgOiAxXSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZE5vZGVzLmluZGV4T2YoaWQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgQ0hFQ0tCT1hGUkFNRSwgY2hlY2tib3hFbGUpLmNsYXNzTGlzdC5hZGQoQ0hFQ0spO1xuICAgICAgICAgICAgICAgICAgICBjaGVja2JveEVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2hlY2soZS5pdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZS5jdXJEYXRhW2UuZmllbGRzLmlzQ2hlY2tlZF0pICYmIGUuY3VyRGF0YVtlLmZpZWxkcy5pc0NoZWNrZWRdLnRvU3RyaW5nKCkgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBDSEVDS0JPWEZSQU1FLCBjaGVja2JveEVsZSkuY2xhc3NMaXN0LmFkZChDSEVDSyk7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94RWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDaGVjayhlLml0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3hFbGUuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mdWxsUm93U2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGdWxsUm93KGUuaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uICYmICFlLml0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFNFTEVDVEVEKSkge1xuICAgICAgICAgICAgICAgIGUuaXRlbS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaWVsZHMgPSBlLmZpZWxkcztcbiAgICAgICAgICAgIHRoaXMuYWRkQWN0aW9uQ2xhc3MoZSwgZmllbGRzLnNlbGVjdGVkLCBTRUxFQ1RFRCk7XG4gICAgICAgICAgICB0aGlzLmFkZEFjdGlvbkNsYXNzKGUsIGZpZWxkcy5leHBhbmRlZCwgRVhQQU5ERUQpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMubm9kZVRlbXBsYXRlRm4pKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRFbGUgPSBlLml0ZW0ucXVlcnlTZWxlY3RvcignLicgKyBMSVNUVEVYVCk7XG4gICAgICAgICAgICAgICAgdGV4dEVsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFwcGVuZCh0aGlzLm5vZGVUZW1wbGF0ZUZuKGUuY3VyRGF0YSksIHRleHRFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHtcbiAgICAgICAgICAgICAgICBub2RlOiBlLml0ZW0sXG4gICAgICAgICAgICAgICAgbm9kZURhdGE6IGUuY3VyRGF0YSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBlLnRleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdkcmF3Tm9kZScsIGV2ZW50QXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hZGRBY3Rpb25DbGFzcyA9IGZ1bmN0aW9uIChlLCBhY3Rpb24sIGNzc0NsYXNzKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IGUuY3VyRGF0YTtcbiAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGFjdGlvbikgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZGF0YVthY3Rpb25dKSAmJiBkYXRhW2FjdGlvbl0udG9TdHJpbmcoKSAhPT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgICAgIGUuaXRlbS5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldERhdGFUeXBlID0gZnVuY3Rpb24gKGRzLCBtYXBwZXIpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIG1hcHBlci5jaGlsZCA9PT0gJ3N0cmluZycpICYmIGRzW2ldLmhhc093blByb3BlcnR5KG1hcHBlci5jaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkc1tpXS5oYXNPd25Qcm9wZXJ0eShtYXBwZXIucGFyZW50SUQpIHx8IGRzW2ldLmhhc093blByb3BlcnR5KG1hcHBlci5oYXNDaGlsZHJlbikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRHcm91cGVkRGF0YSA9IGZ1bmN0aW9uIChkYXRhU291cmNlLCBncm91cEJ5KSB7XG4gICAgICAgICAgICB2YXIgY3VzUXVlcnkgPSBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLmdyb3VwKGdyb3VwQnkpO1xuICAgICAgICAgICAgdmFyIGRzID0gZWoyX2xpc3RzXzEuTGlzdEJhc2UuZ2V0RGF0YVNvdXJjZShkYXRhU291cmNlLCBjdXNRdWVyeSk7XG4gICAgICAgICAgICB2YXIgZ3JwSXRlbSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtT2JqID0gZHNbal0uaXRlbXM7XG4gICAgICAgICAgICAgICAgZ3JwSXRlbS5wdXNoKGl0ZW1PYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdycEl0ZW07XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRTb3J0ZWREYXRhID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ICYmIHRoaXMuc29ydE9yZGVyICE9PSAnTm9uZScpIHtcbiAgICAgICAgICAgICAgICBsaXN0ID0gZWoyX2xpc3RzXzEuTGlzdEJhc2UuZ2V0RGF0YVNvdXJjZShsaXN0LCBlajJfbGlzdHNfMS5MaXN0QmFzZS5hZGRTb3J0aW5nKHRoaXMuc29ydE9yZGVyLCB0aGlzLmZpZWxkcy50ZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZpbmFsaXplTm9kZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc05vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgU0VMRUNURUQsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc05vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShzTm9kZXNbaV0sIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhzTm9kZXMsIFNFTEVDVEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjTm9kZXMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBMSVNUSVRFTSArICc6bm90KC4nICsgRVhQQU5ERUQgKyAnKScsIGVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjTm9kZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIGNOb2Rlc1tqXSk7XG4gICAgICAgICAgICAgICAgaWYgKGljb24gJiYgaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoRVhQQU5EQUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY05vZGVzW2pdLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtjTm9kZXNbal1dLCBOT0RFQ09MTEFQU0VEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZU5vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgRVhQQU5ERUQsIGVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNoaWxkTm9kZXMoZU5vZGVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoZU5vZGVzLCBFWFBBTkRFRCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgIHZhciBub2Rlc18xID0gW10uY29uY2F0KFtdLCB0aGlzLmNoZWNrZWROb2Rlcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja0JveCA9IF90aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPVwiJyArIHZhbHVlICsgJ1wiXScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChjaGVja0JveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzXzEgPSBub2Rlc18xLmZpbHRlcihmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSAhPT0gdmFsdWU7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgY2hlY2tlZE5vZGVzOiBub2Rlc18xIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZW5zdXJlUGFyZW50Q2hlY2tTdGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdWxFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoTElTVElURU0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHVsRWxlbWVudCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZE5vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgQ0hFQ0ssIHVsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgTElTVElURU0sIHVsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrQm94RWxlID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENIRUNLQk9YV1JBUClbMF07XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gY2hlY2tlZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGNoZWNrQm94RWxlLCAnY2hlY2snLCBudWxsLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2tlZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShjaGVja0JveEVsZSwgJ2luZGV0ZXJtaW5hdGUnLCBudWxsLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2tlZE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGNoZWNrQm94RWxlLCAndW5jaGVjaycsIG51bGwsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50VUwgPSBlajJfYmFzZV82LmNsb3Nlc3QoZWxlbWVudCwgJy4nICsgUEFSRU5USVRFTSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKHBhcmVudFVMKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBhcmVudCA9IGVqMl9iYXNlXzYuY2xvc2VzdChwYXJlbnRVTCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZVBhcmVudENoZWNrU3RhdGUoY3VycmVudFBhcmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZW5zdXJlQ2hpbGRDaGVja1N0YXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGUpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZEVsZW1lbnQgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tCb3hlcyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY2hpbGRFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja0JveGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgQ0hFQ0tCT1hXUkFQLCBjaGlsZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNDaGVja2VkID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENIRUNLQk9YRlJBTUUpWzBdLmNsYXNzTGlzdC5jb250YWlucyhDSEVDSyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2VkU3RhdGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBjaGVja0JveGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VycmVudExvYWREYXRhKSAmJiAhZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh0aGlzLmN1cnJlbnRMb2FkRGF0YVtpbmRleF1bdGhpcy5maWVsZHMuaXNDaGVja2VkXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkU3RhdGUgPSB0aGlzLmN1cnJlbnRMb2FkRGF0YVtpbmRleF1bdGhpcy5maWVsZHMuaXNDaGVja2VkXSA/ICdjaGVjaycgOiAndW5jaGVjayc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkU3RhdGUgPSBpc0NoZWNrZWQgPyAnY2hlY2snIDogJ3VuY2hlY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShjaGVja0JveGVzW2luZGV4XSwgY2hlY2tlZFN0YXRlLCBlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRvQ2hlY2tCb3hBY3Rpb24gPSBmdW5jdGlvbiAobm9kZXMsIGRvQ2hlY2spIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobGlFbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tCb3ggPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNICsgJyAuJyArIENIRUNLQk9YV1JBUCwgbGlFbGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQ2hlY2tOb2RlKGNoZWNrQm94LCAhZG9DaGVjaywgbGlFbGUsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjaGVja0JveGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgQ0hFQ0tCT1hXUkFQLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBjaGVja0JveGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGNoZWNrQm94ZXNbaW5kZXhdLCBkb0NoZWNrID8gJ2NoZWNrJyA6ICd1bmNoZWNrJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAod3JhcHBlciwgc3RhdGUsIGUsIGlzUHJldmVudCwgaXNBZGQpIHtcbiAgICAgICAgICAgIHZhciBhcmlhU3RhdGU7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzO1xuICAgICAgICAgICAgdmFyIGN1cnJMaSA9IGVqMl9iYXNlXzYuY2xvc2VzdCh3cmFwcGVyLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICBpZiAoIWlzUHJldmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBY3Rpb25Ob2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGV2ZW50QXJncyA9IHRoaXMuZ2V0Q2hlY2tFdmVudChjdXJyTGksIHN0YXRlLCBlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDaGVja2luZycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmcmFtZVNwYW4gPSB3cmFwcGVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ0hFQ0tCT1hGUkFNRSlbMF07XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09ICdjaGVjaycgJiYgIWZyYW1lU3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoQ0hFQ0spKSB7XG4gICAgICAgICAgICAgICAgZnJhbWVTcGFuLmNsYXNzTGlzdC5yZW1vdmUoSU5ERVRFUk1JTkFURSk7XG4gICAgICAgICAgICAgICAgZnJhbWVTcGFuLmNsYXNzTGlzdC5hZGQoQ0hFQ0spO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2hlY2soY3VyckxpKTtcbiAgICAgICAgICAgICAgICBhcmlhU3RhdGUgPSAndHJ1ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzdGF0ZSA9PT0gJ3VuY2hlY2snICYmIChmcmFtZVNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKENIRUNLKSB8fCBmcmFtZVNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKElOREVURVJNSU5BVEUpKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2ZyYW1lU3Bhbl0sIFtDSEVDSywgSU5ERVRFUk1JTkFURV0pO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hlY2soY3VyckxpKTtcbiAgICAgICAgICAgICAgICBhcmlhU3RhdGUgPSAnZmFsc2UnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICdpbmRldGVybWluYXRlJyAmJiAhZnJhbWVTcGFuLmNsYXNzTGlzdC5jb250YWlucyhJTkRFVEVSTUlOQVRFKSkge1xuICAgICAgICAgICAgICAgIGZyYW1lU3Bhbi5jbGFzc0xpc3QucmVtb3ZlKENIRUNLKTtcbiAgICAgICAgICAgICAgICBmcmFtZVNwYW4uY2xhc3NMaXN0LmFkZChJTkRFVEVSTUlOQVRFKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNoZWNrKGN1cnJMaSk7XG4gICAgICAgICAgICAgICAgYXJpYVN0YXRlID0gJ21peGVkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyaWFTdGF0ZSA9IHN0YXRlID09PSAnY2hlY2snID8gJ3RydWUnIDogc3RhdGUgPT09ICd1bmNoZWNrJyA/ICdmYWxzZScgOiBhcmlhU3RhdGU7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoYXJpYVN0YXRlKSkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCBhcmlhU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQWRkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXS5jb25jYXQoW10sIHRoaXMuY2hlY2tBY3Rpb25Ob2Rlcyk7XG4gICAgICAgICAgICAgICAgZXZlbnRBcmdzID0gdGhpcy5nZXRDaGVja0V2ZW50KGN1cnJMaSwgc3RhdGUsIGUpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzVW5kZWZpbmVkKGlzUHJldmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRBcmdzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQcmV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGFyaWFTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsIGFyaWFTdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50QXJncy5kYXRhWzBdLmNoZWNrZWQgPSBhcmlhU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUNoZWNrZWQnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQWN0aW9uTm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hZGRDaGVjayA9IGZ1bmN0aW9uIChsaUVsZSkge1xuICAgICAgICAgICAgdmFyIGlkID0gbGlFbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGlkKSAmJiB0aGlzLmNoZWNrZWROb2Rlcy5pbmRleE9mKGlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWROb2Rlcy5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbW92ZUNoZWNrID0gZnVuY3Rpb24gKGxpRWxlKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmNoZWNrZWROb2Rlcy5pbmRleE9mKGxpRWxlLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5vZGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRDaGVja0V2ZW50ID0gZnVuY3Rpb24gKGN1cnJMaSwgYWN0aW9uLCBlKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQWN0aW9uTm9kZXMucHVzaCh0aGlzLmdldE5vZGVEYXRhKGN1cnJMaSkpO1xuICAgICAgICAgICAgdmFyIG5vZGVEYXRhID0gdGhpcy5jaGVja0FjdGlvbk5vZGVzO1xuICAgICAgICAgICAgcmV0dXJuIHsgYWN0aW9uOiBhY3Rpb24sIGNhbmNlbDogZmFsc2UsIGlzSW50ZXJhY3RlZDogZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlKSA/IGZhbHNlIDogdHJ1ZSwgbm9kZTogY3VyckxpLCBkYXRhOiBub2RlRGF0YSB9O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3ROb2RlID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgTElTVElURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoZmlyc3ROb2RlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbZmlyc3ROb2RlXSwgRk9DVVMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kb1NlbGVjdGlvbkFjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0geyBkYXRhOiB0aGlzLnRyZWVEYXRhIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGFCb3VuZCcsIGV2ZW50QXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kb1NlbGVjdGlvbkFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzTm9kZXMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBTRUxFQ1RFRCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBzVWlkcyA9IHRoaXMuc2VsZWN0ZWROb2RlcztcbiAgICAgICAgICAgIGlmIChzVWlkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgc2VsZWN0ZWROb2RlczogW10gfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzVWlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc05vZGUgPSBlajJfYmFzZV82LnNlbGVjdCgnW2RhdGEtdWlkPVwiJyArIHNVaWRzW2ldICsgJ1wiXScsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShzTm9kZSwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0R2l2ZW5Ob2RlcyhzTm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhzTm9kZXMsIFNFTEVDVEVEKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNlbGVjdEdpdmVuTm9kZXMgPSBmdW5jdGlvbiAoc05vZGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShzTm9kZXNbaV0sIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnY29udGV4dG1lbnUgJywgdGhpcy5wcmV2ZW50Q29udGV4dE1lbnUpO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQgfHwgdGhpcy5kcmFnU3RhcnRBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gdGFyZ2V0LmNsYXNzTGlzdDtcbiAgICAgICAgICAgICAgICB2YXIgbGkgPSBlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICAgICAgaWYgKCFsaSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUhvdmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNFbGVtZW50KGxpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tXcmFwcGVyID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgQ0hFQ0tCT1hXUkFQKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChjaGVja1dyYXBwZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrRWxlbWVudCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIENIRUNLQk9YRlJBTUUsIGNoZWNrV3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUNoZWNrTm9kZShjaGVja1dyYXBwZXIsIGNoZWNrRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0hFQ0spLCBsaSwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ2xpY2tFdmVudChlLCBsaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoRVhQQU5EQUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWN0aW9uKGxpLCB0YXJnZXQsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNsYXNzTGlzdC5jb250YWlucyhDT0xMQVBTSUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VOb2RlKGxpLCB0YXJnZXQsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbGFzc0xpc3QuY29udGFpbnMoUEFSRU5USVRFTSkgJiYgIWNsYXNzTGlzdC5jb250YWlucyhMSVNUSVRFTSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXVsdGlTZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlICYmIHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9wdXAgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQT1BVUCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzVmlzaWJsZShwb3B1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0V3JhcCA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIFRFWFRXUkFQKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHh0V3JhcCA9ICF0eHRXcmFwID8gZS50YXJnZXQgOiB0eHRXcmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gdHh0V3JhcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc0xlZnQgPSAoZS5jbGllbnRYIC0gcG9zLmxlZnQpICsgdHh0V3JhcC5vZmZzZXRMZWZ0IC0gKHBvcHVwLm9mZnNldFdpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3NUb3AgPSB0eHRXcmFwLm9mZnNldFRvcCAtIHBvcHVwLm9mZnNldEhlaWdodCAtIDEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gKHBvc0xlZnQgPCAwID8gMCA6IHBvc0xlZnQpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuc3R5bGUudG9wID0gKHBvc1RvcCA8IDAgPyAwIDogcG9zVG9wKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoUE9QVVBTRUxFQ1QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aVNlbGVjdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3QobGksIGUsIG11bHRpU2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJDbGlja0V2ZW50KGUsIGxpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5ub2RlQ2hlY2tpbmdFdmVudCA9IGZ1bmN0aW9uICh3cmFwcGVyLCBpc0NoZWNrLCBlKSB7XG4gICAgICAgICAgICB2YXIgY3VyckxpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHdyYXBwZXIsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY3Rpb25Ob2RlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGFyaWFTdGF0ZSA9ICFpc0NoZWNrID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChhcmlhU3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsIGFyaWFTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0gdGhpcy5nZXRDaGVja0V2ZW50KGN1cnJMaSwgIWlzQ2hlY2sgPyAndW5jaGVjaycgOiAnY2hlY2snLCBlKTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUNoZWNraW5nJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIHJldHVybiBldmVudEFyZ3M7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5ub2RlQ2hlY2tlZEV2ZW50ID0gZnVuY3Rpb24gKHdyYXBwZXIsIGlzQ2hlY2ssIGUpIHtcbiAgICAgICAgICAgIHZhciBjdXJyTGkgPSBlajJfYmFzZV82LmNsb3Nlc3Qod3JhcHBlciwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHRoaXMuZ2V0Q2hlY2tFdmVudCh3cmFwcGVyLCBpc0NoZWNrID8gJ3VuY2hlY2snIDogJ2NoZWNrJywgZSk7XG4gICAgICAgICAgICBldmVudEFyZ3MuZGF0YSA9IGV2ZW50QXJncy5kYXRhLnNwbGljZSgwLCBldmVudEFyZ3MuZGF0YS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUNoZWNrZWQnLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudHJpZ2dlckNsaWNrRXZlbnQgPSBmdW5jdGlvbiAoZSwgbGkpIHtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IGUsXG4gICAgICAgICAgICAgICAgbm9kZTogbGksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlQ2xpY2tlZCcsIGV2ZW50QXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5leHBhbmROb2RlID0gZnVuY3Rpb24gKGN1cnJMaSwgaWNvbikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2ljb25dLCBMT0FEKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2ljb25dLCBFWFBBTkRBQkxFKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBDT0xMQVBTSUJMRSk7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSAwO1xuICAgICAgICAgICAgdmFyIGVuZCA9IDA7XG4gICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHVsID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgY3VyckxpKTtcbiAgICAgICAgICAgIHZhciBsaUVsZSA9IGN1cnJMaTtcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KGxpRWxlLCB1bCk7XG4gICAgICAgICAgICB0aGlzLmFuaU9iai5hbmltYXRlKHVsLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hbmltYXRpb24uZXhwYW5kLmVmZmVjdCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb24uZXhwYW5kLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5leHBhbmQuZWFzaW5nLFxuICAgICAgICAgICAgICAgIGJlZ2luOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICBsaUVsZS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGxpRWxlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgVEVYVFdSQVAsIGN1cnJMaSkub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgcHJveHkuYW5pbWF0ZUhlaWdodChhcmdzLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuZDogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICBsaUVsZS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBsaUVsZS5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbaWNvbl0sIFBST0NFU1MpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyTGkuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbY3VyckxpXSwgTk9ERUNPTExBUFNFRCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0xvYWRlZCAmJiBfdGhpcy5leHBhbmRBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdub2RlRXhwYW5kZWQnLCBfdGhpcy5leHBhbmRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuY29sbGFwc2VOb2RlID0gZnVuY3Rpb24gKGN1cnJMaSwgaWNvbiwgZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChpY29uLmNsYXNzTGlzdC5jb250YWlucyhQUk9DRVNTKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBQUk9DRVNTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xBcmdzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICBjb2xBcmdzID0gdGhpcy5nZXRFeHBhbmRFdmVudChjdXJyTGksIGUpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUNvbGxhcHNpbmcnLCBjb2xBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sQXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2ljb25dLCBDT0xMQVBTSUJMRSk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgRVhQQU5EQUJMRSk7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSAwO1xuICAgICAgICAgICAgdmFyIGVuZCA9IDA7XG4gICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHVsID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgY3VyckxpKTtcbiAgICAgICAgICAgIHZhciBsaUVsZSA9IGN1cnJMaTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2N1cnJMaV0sIE5PREVDT0xMQVBTRUQpO1xuICAgICAgICAgICAgdGhpcy5hbmlPYmouYW5pbWF0ZSh1bCwge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuYW5pbWF0aW9uLmNvbGxhcHNlLmVmZmVjdCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb24uY29sbGFwc2UuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgdGltaW5nRnVuY3Rpb246IHRoaXMuYW5pbWF0aW9uLmNvbGxhcHNlLmVhc2luZyxcbiAgICAgICAgICAgICAgICBiZWdpbjogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlFbGUuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBURVhUV1JBUCwgY3VyckxpKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IGxpRWxlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICBwcm94eS5hbmltYXRlSGVpZ2h0KGFyZ3MsIHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW5kOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICBsaUVsZS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgbGlFbGUuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2ljb25dLCBQUk9DRVNTKTtcbiAgICAgICAgICAgICAgICAgICAgY3VyckxpLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ25vZGVDb2xsYXBzZWQnLCBjb2xBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0SGVpZ2h0ID0gZnVuY3Rpb24gKGN1cnJMaSwgdWwpIHtcbiAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgdWwuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgY3VyckxpLnN0eWxlLmhlaWdodCA9IGN1cnJMaS5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgdWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHVsLnN0eWxlLnZpc2liaWxpdHkgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmFuaW1hdGVIZWlnaHQgPSBmdW5jdGlvbiAoYXJncywgc3RhcnQsIGVuZCkge1xuICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IChhcmdzLmR1cmF0aW9uIC0gYXJncy50aW1lU3RhbXApIC8gYXJncy5kdXJhdGlvbjtcbiAgICAgICAgICAgIHZhciBjdXJyZW50SGVpZ2h0ID0gKGVuZCAtIHN0YXJ0KSAqIHJlbWFpbmluZyArIHN0YXJ0O1xuICAgICAgICAgICAgYXJncy5lbGVtZW50LnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gY3VycmVudEhlaWdodCArICdweCc7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW5kZXJDaGlsZE5vZGVzID0gZnVuY3Rpb24gKHBhcmVudExpLCBleHBhbmRDaGlsZCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIHBhcmVudExpKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVpY29uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2VpY29uXSwgTE9BRCk7XG4gICAgICAgICAgICB2YXIgY2hpbGRJdGVtcztcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZWxkcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHZhciBsZXZlbCA9IHRoaXMucGFyZW50cyhwYXJlbnRMaSwgJy4nICsgUEFSRU5USVRFTSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBtYXBwZXJfMSA9IHRoaXMuZ2V0Q2hpbGRGaWVsZHModGhpcy5maWVsZHMsIGxldmVsLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChtYXBwZXJfMSkgfHwgZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChtYXBwZXJfMS5kYXRhU291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChlaWNvbik7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudExpLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJlZUxpc3QucHVzaCgnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICBtYXBwZXJfMS5kYXRhU291cmNlLmV4ZWN1dGVRdWVyeSh0aGlzLmdldFF1ZXJ5KG1hcHBlcl8xLCBwYXJlbnRMaS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpKS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyZWVMaXN0LnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBjaGlsZEl0ZW1zID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRMb2FkRGF0YSA9IGNoaWxkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGNoaWxkSXRlbXMpIHx8IGNoaWxkSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChlaWNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX3RoaXMuZ2V0QWN0dWFsUHJvcGVydGllcyhtYXBwZXJfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMgPSBwcm9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzLnVybCA9IHByb3AubmF2aWdhdGVVcmw7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5saXN0QmFzZU9wdGlvbi5hcmlhQXR0cmlidXRlcy5sZXZlbCA9IHBhcnNlRmxvYXQocGFyZW50TGkuZ2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJykpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudExpLmFwcGVuZENoaWxkKGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3QoY2hpbGRJdGVtcywgX3RoaXMubGlzdEJhc2VPcHRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cGFuZE5vZGUocGFyZW50TGksIGVpY29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVuc3VyZUNoZWNrTm9kZShwYXJlbnRMaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5maW5hbGl6ZU5vZGUocGFyZW50TGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVuZGVyU3ViQ2hpbGQocGFyZW50TGksIGV4cGFuZENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMudHJlZUxpc3QubGVuZ3RoID09PSAwICYmICFfdGhpcy5pc0xvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmluYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGRJdGVtcyA9IHRoaXMuZ2V0Q2hpbGROb2Rlcyh0aGlzLnRyZWVEYXRhLCBwYXJlbnRMaS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudExvYWREYXRhID0gY2hpbGRJdGVtcztcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChjaGlsZEl0ZW1zKSB8fCBjaGlsZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChlaWNvbik7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudExpLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RCYXNlT3B0aW9uLmFyaWFBdHRyaWJ1dGVzLmxldmVsID0gcGFyc2VGbG9hdChwYXJlbnRMaS5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGV2ZWwnKSkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaS5hcHBlbmRDaGlsZChlajJfbGlzdHNfMS5MaXN0QmFzZS5jcmVhdGVMaXN0KHRoaXMuZ2V0U29ydGVkRGF0YShjaGlsZEl0ZW1zKSwgdGhpcy5saXN0QmFzZU9wdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZE5vZGUocGFyZW50TGksIGVpY29uKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVDaGVja05vZGUocGFyZW50TGkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmFsaXplTm9kZShwYXJlbnRMaSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU3ViQ2hpbGQocGFyZW50TGksIGV4cGFuZENoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5lbnN1cmVDaGVja05vZGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVDaGlsZENoZWNrU3RhdGUoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVQYXJlbnRDaGVja1N0YXRlKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50TG9hZERhdGEgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Q2hpbGRGaWVsZHMgPSBmdW5jdGlvbiAobWFwcGVyLCBub2RlTGV2ZWwsIGRhdGFMZXZlbCkge1xuICAgICAgICAgICAgdmFyIGNoaWxkRGF0YTtcbiAgICAgICAgICAgIGlmIChub2RlTGV2ZWwgPT09IGRhdGFMZXZlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENoaWxkTWFwcGVyKG1hcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGlsZEZpZWxkcyh0aGlzLmdldENoaWxkTWFwcGVyKG1hcHBlciksIG5vZGVMZXZlbCwgZGF0YUxldmVsICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRDaGlsZE1hcHBlciA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAodHlwZW9mIG1hcHBlci5jaGlsZCA9PT0gJ3N0cmluZycgfHwgZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChtYXBwZXIuY2hpbGQpKSA/IG1hcHBlciA6IG1hcHBlci5jaGlsZDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldENoaWxkTm9kZXMgPSBmdW5jdGlvbiAob2JqLCBwYXJlbnRJZCwgaXNSb290KSB7XG4gICAgICAgICAgICBpZiAoaXNSb290ID09PSB2b2lkIDApIHsgaXNSb290ID0gZmFsc2U7IH1cbiAgICAgICAgICAgIHZhciBjaGlsZE5vZGVzO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZE5vZGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kYXRhVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENoaWxkR3JvdXAodGhpcy5ncm91cGVkRGF0YSwgcGFyZW50SWQsIGlzUm9vdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZmllbGRzLmNoaWxkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgb2JqbGVuID0gb2JqLmxlbmd0aDsgaSA8IG9iamxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqW2ldW3RoaXMuZmllbGRzLmlkXSAmJiBvYmpbaV1bdGhpcy5maWVsZHMuaWRdLnRvU3RyaW5nKCkgPT09IHBhcmVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialtpXVt0aGlzLmZpZWxkcy5jaGlsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvYmpbaV0uaGFzT3duUHJvcGVydHkodGhpcy5maWVsZHMuY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGROb2RlcyA9IHRoaXMuZ2V0Q2hpbGROb2RlcyhvYmpbaV1bdGhpcy5maWVsZHMuY2hpbGRdLCBwYXJlbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkTm9kZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hpbGROb2RlcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldENoaWxkR3JvdXAgPSBmdW5jdGlvbiAoZGF0YSwgcGFyZW50SWQsIGlzUm9vdCkge1xuICAgICAgICAgICAgdmFyIGNoaWxkTm9kZXM7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZE5vZGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9iamxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgb2JqbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZGF0YVtpXVswXSkgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZGF0YVtpXVswXVt0aGlzLmZpZWxkcy5wYXJlbnRJRF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldWzBdW3RoaXMuZmllbGRzLnBhcmVudElEXS50b1N0cmluZygpID09PSBwYXJlbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFbaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNSb290KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaGlsZE5vZGVzO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVuZGVyU3ViQ2hpbGQgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXhwYW5kQ2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChleHBhbmRDaGlsZCkge1xuICAgICAgICAgICAgICAgIHZhciBjSWNvbnMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBFWFBBTkRBQkxFLCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY0ljb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpY29uID0gY0ljb25zW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyTGkgPSBlajJfYmFzZV82LmNsb3Nlc3QoaWNvbiwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNoaWxkTm9kZXMoY3VyTGksIGV4cGFuZENoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS50b2dnbGVTZWxlY3QgPSBmdW5jdGlvbiAobGksIGUsIG11bHRpU2VsZWN0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uICYmICgoZSAmJiBlLmN0cmxLZXkpIHx8IG11bHRpU2VsZWN0KSAmJiB0aGlzLmlzQWN0aXZlKGxpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zZWxlY3ROb2RlKGxpLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShsaSwgZSwgbXVsdGlTZWxlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAobGkpIHtcbiAgICAgICAgICAgIHJldHVybiBsaS5jbGFzc0xpc3QuY29udGFpbnMoQUNUSVZFKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobGksIGUsIG11bHRpU2VsZWN0KSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaSkgfHwgKCF0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24gJiYgdGhpcy5pc0FjdGl2ZShsaSkgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZSkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1c0VsZW1lbnQobGkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBldmVudEFyZ3M7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0xvYWRlZCkge1xuICAgICAgICAgICAgICAgIGV2ZW50QXJncyA9IHRoaXMuZ2V0U2VsZWN0RXZlbnQobGksICdzZWxlY3QnLCBlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVTZWxlY3RpbmcnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbiB8fCAoIW11bHRpU2VsZWN0ICYmICghZSB8fCAoZSAmJiAhZS5jdHJsS2V5KSkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RBbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24gJiYgZSAmJiBlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Tm9kZSA9IGxpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMubGlMaXN0LmluZGV4T2YodGhpcy5zdGFydE5vZGUpO1xuICAgICAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IHRoaXMubGlMaXN0LmluZGV4T2YobGkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFydEluZGV4ID4gZW5kSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBzdGFydEluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGVuZEluZGV4ID0gdGVtcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPD0gZW5kSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3Vyck5vZGUgPSB0aGlzLmxpTGlzdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNWaXNpYmxlKGN1cnJOb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRTZWxlY3QoY3Vyck5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydE5vZGUgPSBsaTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFNlbGVjdChsaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzRWxlbWVudChsaSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0xvYWRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZVNlbGVjdGVkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChsaSwgZSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRBcmdzID0gdGhpcy5nZXRTZWxlY3RFdmVudChsaSwgJ3VuLXNlbGVjdCcsIGUpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZVNlbGVjdGluZycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0KGxpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNFbGVtZW50KGxpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlU2VsZWN0ZWQnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0Rm9jdXNFbGVtZW50ID0gZnVuY3Rpb24gKGxpKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobGkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvY3VzZWROb2RlID0gdGhpcy5nZXRGb2N1c2VkTm9kZSgpO1xuICAgICAgICAgICAgICAgIGlmIChmb2N1c2VkTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtmb2N1c2VkTm9kZV0sIEZPQ1VTKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbbGldLCBGT0NVUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hZGRTZWxlY3QgPSBmdW5jdGlvbiAobGlFbGUpIHtcbiAgICAgICAgICAgIGxpRWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtsaUVsZV0sIEFDVElWRSk7XG4gICAgICAgICAgICB2YXIgaWQgPSBsaUVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoaWQpICYmIHRoaXMuc2VsZWN0ZWROb2Rlcy5pbmRleE9mKGlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVTZWxlY3QgPSBmdW5jdGlvbiAobGlFbGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBsaUVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpRWxlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbbGlFbGVdLCBBQ1RJVkUpO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5zZWxlY3RlZE5vZGVzLmluZGV4T2YobGlFbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE5vZGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVTZWxlY3RBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRMSSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIEFDVElWRSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHNlbGVjdGVkTElfMSA9IHNlbGVjdGVkTEk7IF9pIDwgc2VsZWN0ZWRMSV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBzZWxlY3RlZExJXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3Moc2VsZWN0ZWRMSSwgQUNUSVZFKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHNlbGVjdGVkTm9kZXM6IFtdIH0sIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0U2VsZWN0RXZlbnQgPSBmdW5jdGlvbiAoY3VyckxpLCBhY3Rpb24sIGUpIHtcbiAgICAgICAgICAgIHZhciBub2RlRGF0YSA9IHRoaXMuZ2V0Tm9kZURhdGEoY3VyckxpKTtcbiAgICAgICAgICAgIHJldHVybiB7IGFjdGlvbjogYWN0aW9uLCBjYW5jZWw6IGZhbHNlLCBpc0ludGVyYWN0ZWQ6IGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZSkgPyBmYWxzZSA6IHRydWUsIG5vZGU6IGN1cnJMaSwgbm9kZURhdGE6IG5vZGVEYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRFeHBhbmRPblR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZE9uVHlwZSA9ICh0aGlzLmV4cGFuZE9uID09PSAnYXV0bycpID8gKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSA/ICdjbGljaycgOiAnZGJsY2xpY2snKSA6IHRoaXMuZXhwYW5kT247XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5leHBhbmRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8ICh0aGlzLmFsbG93RWRpdGluZyAmJiBlLnR5cGUgPT09ICdkYmxjbGljaycpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkgfHxcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFBBUkVOVElURU0pIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoTElTVElURU0pIHx8XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhJQ09OKSB8fCB0aGlzLnNob3dDaGVja0JveCAmJiBlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBDSEVDS0JPWFdSQVApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZUFjdGlvbihlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBMSVNUSVRFTSksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kQ29sbGFwc2VBY3Rpb24gPSBmdW5jdGlvbiAoY3VyckxpLCBlKSB7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIGN1cnJMaSk7XG4gICAgICAgICAgICBpZiAoIWljb24gfHwgaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoUFJPQ0VTUykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gaWNvbi5jbGFzc0xpc3Q7XG4gICAgICAgICAgICAgICAgaWYgKGNsYXNzTGlzdC5jb250YWlucyhFWFBBTkRBQkxFKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFjdGlvbihjdXJyTGksIGljb24sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZU5vZGUoY3VyckxpLCBpY29uLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5leHBhbmRBY3Rpb24gPSBmdW5jdGlvbiAoY3VyckxpLCBpY29uLCBlLCBleHBhbmRDaGlsZCkge1xuICAgICAgICAgICAgaWYgKGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKFBST0NFU1MpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIFBST0NFU1MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFyZ3MgPSB0aGlzLmdldEV4cGFuZEV2ZW50KGN1cnJMaSwgZSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlRXhwYW5kaW5nJywgdGhpcy5leHBhbmRBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBhbmRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVsID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgY3VyckxpKTtcbiAgICAgICAgICAgIGlmICh1bCAmJiB1bC5ub2RlTmFtZSA9PT0gJ1VMJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kTm9kZShjdXJyTGksIGljb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGlsZE5vZGVzKGN1cnJMaSwgZXhwYW5kQ2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoSU5QVVQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucEVsZSA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdlbnRlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ZvY3VzZWROb2RlXSwgSE9WRVIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmFjdGlvbiA9PT0gJ2VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlLnZhbHVlID0gdGhpcy5vbGRUZXh0O1xuICAgICAgICAgICAgICAgICAgICBpbnBFbGUuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbZm9jdXNlZE5vZGVdLCBIT1ZFUik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBldmVudDogZSxcbiAgICAgICAgICAgICAgICBub2RlOiBmb2N1c2VkTm9kZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2tleVByZXNzJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrTm9kZShlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlUmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Ob2RlKHRoaXMuZW5hYmxlUnRsID8gZmFsc2UgOiB0cnVlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZUxlZnQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Ob2RlKHRoaXMuZW5hYmxlUnRsID8gdHJ1ZSA6IGZhbHNlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZURvd24nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxEb3duJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdERvd24nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2NzRG93bic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlVXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxVcCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRVcCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3NVcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVOb2RlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRIb21lJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsSG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3NIb21lJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVJvb3ROb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0RW5kJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRW5kJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjc0VuZCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVSb290Tm9kZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRW50ZXInOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0RW50ZXInOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2NzRW50ZXInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdChmb2N1c2VkTm9kZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2YyJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRleHRib3goZm9jdXNlZE5vZGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxBJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNOb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIExJU1RJVEVNICsgJzpub3QoLicgKyBBQ1RJVkUgKyAnKScsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEdpdmVuTm9kZXMoc05vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNoZWNrTm9kZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICB2YXIgY2hlY2tXcmFwID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgQ0hFQ0tCT1hXUkFQLCBmb2N1c2VkTm9kZSk7XG4gICAgICAgICAgICB2YXIgaXNDaGVja2VkID0gZWoyX2Jhc2VfNi5zZWxlY3QoJyAuJyArIENIRUNLQk9YRlJBTUUsIGNoZWNrV3JhcCkuY2xhc3NMaXN0LmNvbnRhaW5zKENIRUNLKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVDaGVja05vZGUoY2hlY2tXcmFwLCBpc0NoZWNrZWQsIGZvY3VzZWROb2RlLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnZhbGlkYXRlQ2hlY2tOb2RlID0gZnVuY3Rpb24gKGNoZWNrV3JhcCwgaXNDaGVjaywgbGksIGUpIHtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB0aGlzLm5vZGVDaGVja2luZ0V2ZW50KGNoZWNrV3JhcCwgaXNDaGVjaywgZSk7XG4gICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoY2hlY2tXcmFwLCBpc0NoZWNrID8gJ3VuY2hlY2snIDogJ2NoZWNrJywgZSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZUNoaWxkQ2hlY2tTdGF0ZShsaSk7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZVBhcmVudENoZWNrU3RhdGUoZWoyX2Jhc2VfNi5jbG9zZXN0KGVqMl9iYXNlXzYuY2xvc2VzdChsaSwgJy4nICsgUEFSRU5USVRFTSksICcuJyArIExJU1RJVEVNKSk7XG4gICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkRXZlbnQoY2hlY2tXcmFwLCBpc0NoZWNrLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLm9wZW5Ob2RlID0gZnVuY3Rpb24gKHRvQmVPcGVuZWQsIGUpIHtcbiAgICAgICAgICAgIHZhciBmb2N1c2VkTm9kZSA9IHRoaXMuZ2V0Rm9jdXNlZE5vZGUoKTtcbiAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgZm9jdXNlZE5vZGUpO1xuICAgICAgICAgICAgaWYgKHRvQmVPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWljb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpY29uLmNsYXNzTGlzdC5jb250YWlucyhFWFBBTkRBQkxFKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFjdGlvbihmb2N1c2VkTm9kZSwgaWNvbiwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzTmV4dE5vZGUoZm9jdXNlZE5vZGUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpY29uICYmIGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKENPTExBUFNJQkxFKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlTm9kZShmb2N1c2VkTm9kZSwgaWNvbiwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50TGkgPSBlajJfYmFzZV82LmNsb3Nlc3QoZWoyX2Jhc2VfNi5jbG9zZXN0KGZvY3VzZWROb2RlLCAnLicgKyBQQVJFTlRJVEVNKSwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmVudExpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzKGZvY3VzZWROb2RlLCBwYXJlbnRMaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5uYXZpZ2F0ZU5vZGUgPSBmdW5jdGlvbiAoaXNUb3dhcmRzKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzTmV4dE5vZGUoZm9jdXNlZE5vZGUsIGlzVG93YXJkcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5uYXZpZ2F0ZVJvb3ROb2RlID0gZnVuY3Rpb24gKGlzQmFja3dhcmRzKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICB2YXIgcm9vdE5vZGUgPSBpc0JhY2t3YXJkcyA/IHRoaXMuZ2V0Um9vdE5vZGUoKSA6IHRoaXMuZ2V0RW5kTm9kZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1cyhmb2N1c2VkTm9kZSwgcm9vdE5vZGUpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Rm9jdXNlZE5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZk5vZGUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBMSVNUSVRFTSArICcuJyArIEZPQ1VTLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZk5vZGUpID8gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgTElTVElURU0sIHRoaXMuZWxlbWVudCkgOiBmTm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZvY3VzTmV4dE5vZGUgPSBmdW5jdGlvbiAobGksIGlzVG93YXJkcykge1xuICAgICAgICAgICAgdmFyIG5leHROb2RlID0gaXNUb3dhcmRzID8gdGhpcy5nZXROZXh0Tm9kZShsaSkgOiB0aGlzLmdldFByZXZOb2RlKGxpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXMobGksIG5leHROb2RlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldE5leHROb2RlID0gZnVuY3Rpb24gKGxpKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmxpTGlzdC5pbmRleE9mKGxpKTtcbiAgICAgICAgICAgIHZhciBuZXh0Tm9kZTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIG5leHROb2RlID0gdGhpcy5saUxpc3RbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKG5leHROb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAoIWVqMl9iYXNlXzYuaXNWaXNpYmxlKG5leHROb2RlKSk7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRQcmV2Tm9kZSA9IGZ1bmN0aW9uIChsaSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5saUxpc3QuaW5kZXhPZihsaSk7XG4gICAgICAgICAgICB2YXIgcHJldk5vZGU7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaW5kZXgtLTtcbiAgICAgICAgICAgICAgICBwcmV2Tm9kZSA9IHRoaXMubGlMaXN0W2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChwcmV2Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKCFlajJfYmFzZV82LmlzVmlzaWJsZShwcmV2Tm9kZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHByZXZOb2RlO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Um9vdE5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgdmFyIHJvb3ROb2RlO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHJvb3ROb2RlID0gdGhpcy5saUxpc3RbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9IHdoaWxlICghZWoyX2Jhc2VfNi5pc1Zpc2libGUocm9vdE5vZGUpKTtcbiAgICAgICAgICAgIHJldHVybiByb290Tm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldEVuZE5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmxpTGlzdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdmFyIGVuZE5vZGU7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgZW5kTm9kZSA9IHRoaXMubGlMaXN0W2luZGV4XTtcbiAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgfSB3aGlsZSAoIWVqMl9iYXNlXzYuaXNWaXNpYmxlKGVuZE5vZGUpKTtcbiAgICAgICAgICAgIHJldHVybiBlbmROb2RlO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0Rm9jdXMgPSBmdW5jdGlvbiAocHJlTm9kZSwgbmV4dE5vZGUpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW3ByZU5vZGVdLCBbSE9WRVIsIEZPQ1VTXSk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtuZXh0Tm9kZV0sIFtIT1ZFUiwgRk9DVVNdKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZvY3VzSW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubW91c2VEb3duU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbdGhpcy5nZXRGb2N1c2VkTm9kZSgpXSwgSE9WRVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd25TdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZvY3VzT3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbdGhpcy5nZXRGb2N1c2VkTm9kZSgpXSwgSE9WRVIpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUub25Nb3VzZU92ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICB2YXIgY3VycmVudExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50TGkgfHwgY2xhc3NMaXN0LmNvbnRhaW5zKFBBUkVOVElURU0pIHx8IGNsYXNzTGlzdC5jb250YWlucyhMSVNUSVRFTSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUhvdmVyKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIb3ZlcihjdXJyZW50TGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0SG92ZXIgPSBmdW5jdGlvbiAobGkpIHtcbiAgICAgICAgICAgIGlmICghbGkuY2xhc3NMaXN0LmNvbnRhaW5zKEhPVkVSKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSG92ZXIoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtsaV0sIEhPVkVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUub25Nb3VzZUxlYXZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSG92ZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbW92ZUhvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhvdmVyZWROb2RlID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgSE9WRVIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoaG92ZXJlZE5vZGUgJiYgaG92ZXJlZE5vZGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhob3ZlcmVkTm9kZSwgSE9WRVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXROb2RlRGF0YSA9IGZ1bmN0aW9uIChjdXJyTGkpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChjdXJyTGkpICYmIGN1cnJMaS5jbGFzc0xpc3QuY29udGFpbnMoTElTVElURU0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gY3VyckxpLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIExJU1RURVhULCBjdXJyTGkpLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIHZhciBwTm9kZSA9IGVqMl9iYXNlXzYuY2xvc2VzdChjdXJyTGkucGFyZW50Tm9kZSwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgIHZhciBwaWQgPSBwTm9kZSA/IHBOb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gY3VyckxpLmNsYXNzTGlzdC5jb250YWlucyhBQ1RJVkUpO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmRlZCA9IChjdXJyTGkuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykgPT09ICd0cnVlJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2VkID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgQ0hFQ0tCT1hXUkFQLCBjdXJyTGkpLmdldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGlkOiBpZCwgdGV4dDogdGV4dCwgcGFyZW50SUQ6IHBpZCwgc2VsZWN0ZWQ6IHNlbGVjdGVkLCBleHBhbmRlZDogZXhwYW5kZWQsIGNoZWNrZWQ6IGNoZWNrZWQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGlkOiAnJywgdGV4dDogJycsIHBhcmVudElEOiAnJywgc2VsZWN0ZWQ6ICcnLCBleHBhbmRlZDogJycsIGNoZWNrZWQ6ICcnIH07XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRFeHBhbmRFdmVudCA9IGZ1bmN0aW9uIChjdXJyTGksIGUpIHtcbiAgICAgICAgICAgIHZhciBub2RlRGF0YSA9IHRoaXMuZ2V0Tm9kZURhdGEoY3VyckxpKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNhbmNlbDogZmFsc2UsIGlzSW50ZXJhY3RlZDogZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlKSA/IGZhbHNlIDogdHJ1ZSwgbm9kZTogY3VyckxpLCBub2RlRGF0YTogbm9kZURhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlUmVuZGVyTm9kZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBzZWxlY3RlZE5vZGVzOiBbXSB9LCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YUJpbmRpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldENzc0NsYXNzID0gZnVuY3Rpb24gKG9sZENsYXNzLCBuZXdDbGFzcykge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKG9sZENsYXNzKSAmJiBvbGRDbGFzcyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBvbGRDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChuZXdDbGFzcykgJiYgbmV3Q2xhc3MgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgbmV3Q2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5lZGl0aW5nSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFJPT1QpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUEFSRU5USVRFTSkgfHxcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKExJU1RJVEVNKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKElDT04pIHx8XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhJTlBVVCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRleHRib3gobGlFbGUsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuY3JlYXRlVGV4dGJveCA9IGZ1bmN0aW9uIChsaUVsZSwgZSkge1xuICAgICAgICAgICAgdmFyIHRleHRFbGUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBMSVNUVEVYVCwgbGlFbGUpO1xuICAgICAgICAgICAgdGhpcy5vbGRUZXh0ID0gdGV4dEVsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB0aGlzLmdldEVkaXRFdmVudChsaUVsZSwgbnVsbCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVFZGl0aW5nJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHN0eWxlID0gJ3dpZHRoOicgKyB0ZXh0RWxlLm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIHZhciBpbnBFbGUgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6IElOUFVULCBzdHlsZXM6IHN0eWxlLCBhdHRyczogeyB2YWx1ZTogdGhpcy5vbGRUZXh0IH0gfSk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtsaUVsZV0sIEVESVRJTkcpO1xuICAgICAgICAgICAgdGV4dEVsZS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGV4dEVsZS5hcHBlbmRDaGlsZChpbnBFbGUpO1xuICAgICAgICAgICAgaW5wRWxlLmZvY3VzKCk7XG4gICAgICAgICAgICB2YXIgaW5wdXRFbGUgPSBpbnBFbGU7XG4gICAgICAgICAgICBpbnB1dEVsZS5zZXRTZWxlY3Rpb25SYW5nZSgwLCBpbnB1dEVsZS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy53aXJlSW5wdXRFdmVudHMoaW5wRWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmlucHV0Rm9jdXNPdXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIG5ld1RleHQgPSB0YXJnZXQudmFsdWU7XG4gICAgICAgICAgICB2YXIgdHh0RWxlID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgTElTVFRFWFQpO1xuICAgICAgICAgICAgdmFyIGxpRWxlID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgdHh0RWxlLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlID0gbmV3VGV4dDtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKHRhcmdldCk7XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtsaUVsZV0sIEVESVRJTkcpO1xuICAgICAgICAgICAgdHh0RWxlLmZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVFZGl0ZWQnLCB0aGlzLmdldEVkaXRFdmVudChsaUVsZSwgbmV3VGV4dCkpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBlbGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS11aWQ9XCInICsgZWxlICsgJ1wiXScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGVsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRFZGl0RXZlbnQgPSBmdW5jdGlvbiAobGlFbGUsIG5ld1RleHQpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5nZXROb2RlRGF0YShsaUVsZSk7XG4gICAgICAgICAgICByZXR1cm4geyBjYW5jZWw6IGZhbHNlLCBuZXdUZXh0OiBuZXdUZXh0LCBub2RlOiBsaUVsZSwgbm9kZURhdGE6IGRhdGEsIG9sZFRleHQ6IHRoaXMub2xkVGV4dCB9O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0RHJhZ0FuZERyb3AgPSBmdW5jdGlvbiAodG9CaW5kKSB7XG4gICAgICAgICAgICBpZiAodG9CaW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRHJhZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95RHJhZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZURyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHZpcnR1YWxFbGU7XG4gICAgICAgICAgICB0aGlzLmRyYWdPYmogPSBuZXcgZWoyX2Jhc2VfNS5EcmFnZ2FibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgZW5hYmxlVGFpbE1vZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvcyA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjdXJzb3JBdDogeyB0b3A6IC0yMCB9LFxuICAgICAgICAgICAgICAgIGRyYWdUYXJnZXQ6ICcuJyArIFRFWFRXUkFQLFxuICAgICAgICAgICAgICAgIGhlbHBlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhZ1RhcmdldCA9IGUuc2VuZGVyLnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRyYWdSb290ID0gZWoyX2Jhc2VfNi5jbG9zZXN0KF90aGlzLmRyYWdUYXJnZXQsICcuJyArIFJPT1QpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHJhZ1dyYXAgPSBlajJfYmFzZV82LmNsb3Nlc3QoX3RoaXMuZHJhZ1RhcmdldCwgJy4nICsgVEVYVFdSQVApO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnTGkgPSBlajJfYmFzZV82LmNsb3Nlc3QoX3RoaXMuZHJhZ1RhcmdldCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZnVsbFJvd1NlbGVjdCAmJiAhZHJhZ1dyYXAgJiYgX3RoaXMuZHJhZ1RhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoRlVMTFJPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdXcmFwID0gX3RoaXMuZHJhZ1RhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5kcmFnVGFyZ2V0IHx8ICFlLmVsZW1lbnQuaXNTYW1lTm9kZShkcmFnUm9vdCkgfHwgIWRyYWdXcmFwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhST09UKSB8fCBfdGhpcy5kcmFnVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhQQVJFTlRJVEVNKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhZ1RhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoTElTVElURU0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lRWxlID0gKGRyYWdXcmFwLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIGNsb25lRWxlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogSUNPTiArICcgJyArIEVYUEFOREFCTEUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZUVsZS5pbnNlcnRCZWZvcmUoaWNvbiwgY2xvbmVFbGUuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjc3NDbGFzcyA9IERSQUdJVEVNICsgJyAnICsgUk9PVCArICcgJyArIChfdGhpcy5lbmFibGVSdGwgPyBSVEwgOiAnJyk7XG4gICAgICAgICAgICAgICAgICAgIHZpcnR1YWxFbGUgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBjc3NDbGFzcyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmlydHVhbEVsZS5hcHBlbmRDaGlsZChjbG9uZUVsZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuTGVuID0gX3RoaXMuc2VsZWN0ZWROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuTGVuID4gMSAmJiBfdGhpcy5hbGxvd011bHRpU2VsZWN0aW9uICYmIF90aGlzLmRyYWdMaS5jbGFzc0xpc3QuY29udGFpbnMoQUNUSVZFKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNOb2RlID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IERST1BDT1VOVCwgaW5uZXJIVE1MOiAnJyArIG5MZW4gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsRWxlLmFwcGVuZENoaWxkKGNOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHZpcnR1YWxFbGUpO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnRGF0YSA9IF90aGlzLmdldE5vZGVEYXRhKF90aGlzLmRyYWdMaSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2aXJ0dWFsRWxlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtfdGhpcy5lbGVtZW50XSwgRFJBR0dJTkcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0gX3RoaXMuZ2V0RHJhZ0V2ZW50KGUuZXZlbnQsIF90aGlzLCBudWxsLCBlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ25vZGVEcmFnU3RhcnQnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2godmlydHVhbEVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtfdGhpcy5lbGVtZW50XSwgRFJBR0dJTkcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdTdGFydEFjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkcmFnOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnQWN0aW9uKGUsIHZpcnR1YWxFbGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZHJhZ1N0b3A6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW190aGlzLmVsZW1lbnRdLCBEUkFHR0lORyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZVZpcnR1YWxFbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRyb3BUYXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRyb3BSb290ID0gKGVqMl9iYXNlXzYuY2xvc2VzdChkcm9wVGFyZ2V0LCAnLicgKyBEUk9QUEFCTEUpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkcm9wVGFyZ2V0IHx8ICFkcm9wUm9vdCB8fCBkcm9wVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhST09UKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0gX3RoaXMuZ2V0RHJhZ0V2ZW50KGUuZXZlbnQsIF90aGlzLCBkcm9wVGFyZ2V0LCBkcm9wVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignbm9kZURyYWdTdG9wJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKGUuaGVscGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhZ1N0YXJ0QWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRyb3BPYmogPSBuZXcgZWoyX2Jhc2VfNS5Ecm9wcGFibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgb3V0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZSkgJiYgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhTSUJMSU5HKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvdmVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZHJvcDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJvcEFjdGlvbihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRyYWdBY3Rpb24gPSBmdW5jdGlvbiAoZSwgdmlydHVhbEVsZSkge1xuICAgICAgICAgICAgdmFyIGRyb3BSb290ID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGUudGFyZ2V0LCAnLicgKyBEUk9QUEFCTEUpO1xuICAgICAgICAgICAgdmFyIGRyb3BXcmFwID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGUudGFyZ2V0LCAnLicgKyBURVhUV1JBUCk7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIHZpcnR1YWxFbGUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbaWNvbl0sIFtEUk9QSU4sIERST1BORVhULCBEUk9QT1VULCBOT0RST1BdKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVmlydHVhbEVsZSgpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICAgICAgICAgIHZhciBjbGFzc0xpc3QgPSBlLnRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICBpZiAodGhpcy5mdWxsUm93U2VsZWN0ICYmICFkcm9wV3JhcCAmJiAhZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChjbGFzc0xpc3QpICYmIGNsYXNzTGlzdC5jb250YWlucyhGVUxMUk9XKSkge1xuICAgICAgICAgICAgICAgIGRyb3BXcmFwID0gZS50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRyb3BSb290KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3BMaSA9IGVqMl9iYXNlXzYuY2xvc2VzdChlLnRhcmdldCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgIGlmICghZHJvcFJvb3QuY2xhc3NMaXN0LmNvbnRhaW5zKFJPT1QpIHx8IChkcm9wV3JhcCAmJlxuICAgICAgICAgICAgICAgICAgICAoIWRyb3BMaS5pc1NhbWVOb2RlKHRoaXMuZHJhZ0xpKSAmJiAhdGhpcy5pc0Rlc2NlbmRhbnQodGhpcy5kcmFnTGksIGRyb3BMaSkpKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiAoZS5ldmVudC5vZmZzZXRZIDwgNykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBEUk9QTkVYVCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlyRWxlID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogU0lCTElORyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZnVsbFJvd1NlbGVjdCA/ICgxKSA6ICgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BMaS5pbnNlcnRCZWZvcmUodmlyRWxlLCBkcm9wTGkuY2hpbGRyZW5baW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlICYmIChlLnRhcmdldC5vZmZzZXRIZWlnaHQgPiAwICYmIGUuZXZlbnQub2Zmc2V0WSA+IChlLnRhcmdldC5vZmZzZXRIZWlnaHQgLSAxMCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgRFJPUE5FWFQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpckVsZSA9IGVqMl9iYXNlXzYuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IFNJQkxJTkcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmZ1bGxSb3dTZWxlY3QgPyAoMikgOiAoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wTGkuaW5zZXJ0QmVmb3JlKHZpckVsZSwgZHJvcExpLmNoaWxkcmVuW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgRFJPUElOKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlLnRhcmdldC5ub2RlTmFtZSA9PT0gJ0xJJyAmJiAoIWRyb3BMaS5pc1NhbWVOb2RlKHRoaXMuZHJhZ0xpKSAmJiAhdGhpcy5pc0Rlc2NlbmRhbnQodGhpcy5kcmFnTGksIGRyb3BMaSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBEUk9QTkVYVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbEVsZShlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFNJQkxJTkcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBEUk9QTkVYVCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgRFJPUE9VVCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIE5PRFJPUCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlRHJhZ2dpbmcnLCB0aGlzLmdldERyYWdFdmVudChlLmV2ZW50LCB0aGlzLCBlLnRhcmdldCwgZS50YXJnZXQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRyb3BBY3Rpb24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGRyb3BUYXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBkcmFnT2JqID0gZS5kcmFnRGF0YS5kcmFnZ2FibGUuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIHZhciBkcmFnVGFyZ2V0ID0gZHJhZ09iai5kcmFnVGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGRyYWdMaSA9IChlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ1RhcmdldCwgJy4nICsgTElTVElURU0pKTtcbiAgICAgICAgICAgIHZhciBkcm9wTGkgPSAoZWoyX2Jhc2VfNi5jbG9zZXN0KGRyb3BUYXJnZXQsICcuJyArIExJU1RJVEVNKSk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChlLmRyb3BwZWRFbGVtZW50KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgICAgICBpZiAoIWRyb3BMaSB8fCBkcm9wTGkuaXNTYW1lTm9kZShkcmFnTGkpIHx8IHRoaXMuaXNEZXNjZW5kYW50KGRyYWdMaSwgZHJvcExpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkcmFnT2JqLmFsbG93TXVsdGlTZWxlY3Rpb24gJiYgKGRyYWdMaS5jbGFzc0xpc3QuY29udGFpbnMoQUNUSVZFKSB8fCAoZS5ldmVudC5vZmZzZXRZIDwgNyB8fFxuICAgICAgICAgICAgICAgIChlLnRhcmdldC5vZmZzZXRIZWlnaHQgPiAwICYmIGUuZXZlbnQub2Zmc2V0WSA+IChlLnRhcmdldC5vZmZzZXRIZWlnaHQgLSAxMCkpKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc05vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgQUNUSVZFLCBkcmFnT2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc05vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkcm9wTGkuaXNTYW1lTm9kZShzTm9kZXNbaV0pIHx8IHRoaXMuaXNEZXNjZW5kYW50KHNOb2Rlc1tpXSwgZHJvcExpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmROb2RlKGRyb3BUYXJnZXQsIHNOb2Rlc1tpXSwgZHJvcExpLCBlLCBkcmFnT2JqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZE5vZGUoZHJvcFRhcmdldCwgZHJhZ0xpLCBkcm9wTGksIGUsIGRyYWdPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlRHJvcHBlZCcsIHRoaXMuZ2V0RHJhZ0V2ZW50KGUuZXZlbnQsIGRyYWdPYmosIGRyb3BUYXJnZXQsIGUudGFyZ2V0KSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hcHBlbmROb2RlID0gZnVuY3Rpb24gKGRyb3BUYXJnZXQsIGRyYWdMaSwgZHJvcExpLCBlLCBkcmFnT2JqKSB7XG4gICAgICAgICAgICBpZiAoZHJvcFRhcmdldC5ub2RlTmFtZSA9PT0gJ0xJJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFzU2libGluZ05vZGUoZHJhZ0xpLCBkcm9wTGksIGUsIGRyYWdPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wQXNDaGlsZE5vZGUoZHJhZ0xpLCBkcm9wTGksIGRyYWdPYmosIG51bGwsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZHJvcEFzU2libGluZ05vZGUgPSBmdW5jdGlvbiAoZHJhZ0xpLCBkcm9wTGksIGUsIGRyYWdPYmopIHtcbiAgICAgICAgICAgIHZhciBkcm9wVWwgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJvcExpLCAnLicgKyBQQVJFTlRJVEVNKTtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50VWwgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ0xpLCAnLicgKyBQQVJFTlRJVEVNKTtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50TGkgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ1BhcmVudFVsLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICB2YXIgcHJlO1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0Lm9mZnNldEhlaWdodCA+IDAgJiYgZS5ldmVudC5vZmZzZXRZID4gZS50YXJnZXQub2Zmc2V0SGVpZ2h0IC0gMikge1xuICAgICAgICAgICAgICAgIHByZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS5ldmVudC5vZmZzZXRZIDwgMikge1xuICAgICAgICAgICAgICAgIHByZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcm9wVWwuaW5zZXJ0QmVmb3JlKGRyYWdMaSwgcHJlID8gZS50YXJnZXQgOiBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KGRyYWdQYXJlbnRVbCwgZHJhZ1BhcmVudExpKTtcbiAgICAgICAgICAgIGlmIChkcmFnT2JqLmVsZW1lbnQuaWQgPT09IHRoaXMuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGlzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZHJhZ09iai51cGRhdGVJbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW5zdGFuY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRyb3BBc0NoaWxkTm9kZSA9IGZ1bmN0aW9uIChkcmFnTGksIGRyb3BMaSwgZHJhZ09iaiwgaW5kZXgsIGUpIHtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50VWwgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ0xpLCAnLicgKyBQQVJFTlRJVEVNKTtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50TGkgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ1BhcmVudFVsLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICB2YXIgZHJvcFBhcmVudFVsID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyb3BMaSwgJy4nICsgUEFSRU5USVRFTSk7XG4gICAgICAgICAgICBpZiAoZSAmJiAoZS5ldmVudC5vZmZzZXRZIDwgNykpIHtcbiAgICAgICAgICAgICAgICBkcm9wUGFyZW50VWwuaW5zZXJ0QmVmb3JlKGRyYWdMaSwgZHJvcExpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGUgJiYgKGUudGFyZ2V0Lm9mZnNldEhlaWdodCA+IDAgJiYgZS5ldmVudC5vZmZzZXRZID4gKGUudGFyZ2V0Lm9mZnNldEhlaWdodCAtIDEwKSkpIHtcbiAgICAgICAgICAgICAgICBkcm9wUGFyZW50VWwuaW5zZXJ0QmVmb3JlKGRyYWdMaSwgZHJvcExpLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJvcFVsID0gdGhpcy5leHBhbmRQYXJlbnQoZHJvcExpKTtcbiAgICAgICAgICAgICAgICBkcm9wVWwuaW5zZXJ0QmVmb3JlKGRyYWdMaSwgZHJvcFVsLmNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudChkcmFnUGFyZW50VWwsIGRyYWdQYXJlbnRMaSk7XG4gICAgICAgICAgICBpZiAoZHJhZ09iai5lbGVtZW50LmlkID09PSB0aGlzLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRyYWdPYmoudXBkYXRlSW5zdGFuY2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5leHBhbmRQYXJlbnQgPSBmdW5jdGlvbiAoZHJvcExpKSB7XG4gICAgICAgICAgICB2YXIgZHJvcEljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBkcm9wTGkpO1xuICAgICAgICAgICAgaWYgKGRyb3BJY29uICYmIGRyb3BJY29uLmNsYXNzTGlzdC5jb250YWlucyhFWFBBTkRBQkxFKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWN0aW9uKGRyb3BMaSwgZHJvcEljb24sIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRyb3BVbCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGRyb3BMaSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChkcm9wVWwpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2xpc3RzXzEuTGlzdEJhc2UuZ2VuZXJhdGVJY29uKGRyb3BMaSwgQ09MTEFQU0lCTEUsIHRoaXMubGlzdEJhc2VPcHRpb24pO1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgZHJvcExpKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtpY29uXSwgRVhQQU5EQUJMRSk7XG4gICAgICAgICAgICAgICAgZHJvcFVsID0gZWoyX2xpc3RzXzEuTGlzdEJhc2UuZ2VuZXJhdGVVTChbXSwgbnVsbCwgdGhpcy5saXN0QmFzZU9wdGlvbik7XG4gICAgICAgICAgICAgICAgZHJvcExpLmFwcGVuZENoaWxkKGRyb3BVbCk7XG4gICAgICAgICAgICAgICAgZHJvcExpLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbZHJvcExpXSwgTk9ERUNPTExBUFNFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZHJvcFVsO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudXBkYXRlRWxlbWVudCA9IGZ1bmN0aW9uIChkcmFnUGFyZW50VWwsIGRyYWdQYXJlbnRMaSkge1xuICAgICAgICAgICAgaWYgKGRyYWdQYXJlbnRMaSAmJiBkcmFnUGFyZW50VWwuY2hpbGRFbGVtZW50Q291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJhZ0ljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBkcmFnUGFyZW50TGkpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKGRyYWdQYXJlbnRVbCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goZHJhZ0ljb24pO1xuICAgICAgICAgICAgICAgIGRyYWdQYXJlbnRMaS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbmRlclZpcnR1YWxFbGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHByZTtcbiAgICAgICAgICAgIGlmIChlLmV2ZW50Lm9mZnNldFkgPiBlLnRhcmdldC5vZmZzZXRIZWlnaHQgLSAyKSB7XG4gICAgICAgICAgICAgICAgcHJlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLmV2ZW50Lm9mZnNldFkgPCAyKSB7XG4gICAgICAgICAgICAgICAgcHJlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2aXJFbGUgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBTSUJMSU5HIH0pO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5mdWxsUm93U2VsZWN0ID8gKHByZSA/IDEgOiAyKSA6IChwcmUgPyAwIDogMSk7XG4gICAgICAgICAgICBlLnRhcmdldC5pbnNlcnRCZWZvcmUodmlyRWxlLCBlLnRhcmdldC5jaGlsZHJlbltpbmRleF0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVtb3ZlVmlydHVhbEVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzaWJFbGUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBTSUJMSU5HKTtcbiAgICAgICAgICAgIGlmIChzaWJFbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChzaWJFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZGVzdHJveURyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnT2JqICYmIHRoaXMuZHJvcE9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldERyYWdFdmVudCA9IGZ1bmN0aW9uIChldmVudCwgb2JqLCBkcm9wVGFyZ2V0LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBkcm9wTGkgPSBkcm9wVGFyZ2V0ID8gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyb3BUYXJnZXQsICcuJyArIExJU1RJVEVNKSA6IG51bGw7XG4gICAgICAgICAgICB2YXIgZHJvcERhdGEgPSBkcm9wTGkgPyB0aGlzLmdldE5vZGVEYXRhKGRyb3BMaSkgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICBkcmFnZ2VkTm9kZTogb2JqLmRyYWdMaSxcbiAgICAgICAgICAgICAgICBkcmFnZ2VkTm9kZURhdGE6IG9iai5kcmFnRGF0YSxcbiAgICAgICAgICAgICAgICBkcm9wcGVkTm9kZTogZHJvcExpLFxuICAgICAgICAgICAgICAgIGRyb3BwZWROb2RlRGF0YTogZHJvcERhdGEsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hZGRGdWxsUm93ID0gZnVuY3Rpb24gKHRvQWRkKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5saUxpc3QubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRvQWRkKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZ1bGxSb3codGhpcy5saUxpc3RbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd0RpdiA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIEZVTExST1csIHRoaXMubGlMaXN0W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2gocm93RGl2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jcmVhdGVGdWxsUm93ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciByb3dEaXYgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBGVUxMUk9XIH0pO1xuICAgICAgICAgICAgaXRlbS5pbnNlcnRCZWZvcmUocm93RGl2LCBpdGVtLmNoaWxkTm9kZXNbMF0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkTXVsdGlTZWxlY3QgPSBmdW5jdGlvbiAodG9BZGQpIHtcbiAgICAgICAgICAgIGlmICh0b0FkZCkge1xuICAgICAgICAgICAgICAgIHZhciBsaUVsZXMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBMSVNUSVRFTSArICc6bm90KFthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXSknLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbGlFbGVzXzEgPSBsaUVsZXM7IF9pIDwgbGlFbGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBsaUVsZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgTElTVElURU0gKyAnW2FyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiXScsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBsaUVsZXNfMiA9IGxpRWxlczsgX2EgPCBsaUVsZXNfMi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IGxpRWxlc18yW19hXTtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNvbGxhcHNlQnlMZXZlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBsZXZlbCwgZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPiAwICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNOb2RlcyA9IHRoaXMuZ2V0VmlzaWJsZU5vZGVzKGV4Y2x1ZGVIaWRkZW5Ob2RlcywgZWxlbWVudC5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY05vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IGNOb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBDT0xMQVBTSUJMRSwgZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgVEVYVFdSQVAsIGxpRWxlKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChpY29uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZU5vZGUobGlFbGUsIGljb24sIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VCeUxldmVsKGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGxpRWxlKSwgbGV2ZWwgLSAxLCBleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNvbGxhcHNlQWxsTm9kZXMgPSBmdW5jdGlvbiAoZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICB2YXIgY0ljb25zID0gdGhpcy5nZXRWaXNpYmxlTm9kZXMoZXhjbHVkZUhpZGRlbk5vZGVzLCBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBDT0xMQVBTSUJMRSwgdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY0ljb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBjSWNvbnNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGljb24sICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlTm9kZShsaUVsZSwgaWNvbiwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5leHBhbmRCeUxldmVsID0gZnVuY3Rpb24gKGVsZW1lbnQsIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChsZXZlbCA+IDAgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZU5vZGVzID0gdGhpcy5nZXRWaXNpYmxlTm9kZXMoZXhjbHVkZUhpZGRlbk5vZGVzLCBlbGVtZW50LmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlTm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gZU5vZGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIEVYUEFOREFCTEUsIGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFRFWFRXUkFQLCBsaUVsZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoaWNvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWN0aW9uKGxpRWxlLCBpY29uLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEJ5TGV2ZWwoZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgbGlFbGUpLCBsZXZlbCAtIDEsIGV4Y2x1ZGVIaWRkZW5Ob2Rlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kQWxsTm9kZXMgPSBmdW5jdGlvbiAoZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICB2YXIgZUljb25zID0gdGhpcy5nZXRWaXNpYmxlTm9kZXMoZXhjbHVkZUhpZGRlbk5vZGVzLCBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBFWFBBTkRBQkxFLCB0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlSWNvbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVJY29uc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSBlajJfYmFzZV82LmNsb3Nlc3QoaWNvbiwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWN0aW9uKGxpRWxlLCBpY29uLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldFZpc2libGVOb2RlcyA9IGZ1bmN0aW9uIChleGNsdWRlSGlkZGVuTm9kZXMsIG5vZGVzKSB7XG4gICAgICAgICAgICB2YXIgdk5vZGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobm9kZXMpO1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVIaWRkZW5Ob2Rlcykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdk5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc1Zpc2libGUodk5vZGVzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdk5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2Tm9kZXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50VWwgPSBlajJfYmFzZV82LmNsb3Nlc3Qobm9kZSwgJy4nICsgUEFSRU5USVRFTSk7XG4gICAgICAgICAgICB2YXIgZHJhZ1BhcmVudExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyYWdQYXJlbnRVbCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2gobm9kZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQoZHJhZ1BhcmVudFVsLCBkcmFnUGFyZW50TGkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnN0YW5jZSgpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudXBkYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWROb2RlcygpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudXBkYXRlTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubGlMaXN0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgTElTVElURU0sIHRoaXMuZWxlbWVudCkpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudXBkYXRlU2VsZWN0ZWROb2RlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHNlbGVjdGVkTm9kZXM6IFtdIH0sIHRydWUpO1xuICAgICAgICAgICAgdmFyIHNOb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIEFDVElWRSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0R2l2ZW5Ob2RlcyhzTm9kZXMpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZG9HaXZlbkFjdGlvbiA9IGZ1bmN0aW9uIChub2Rlcywgc2VsZWN0b3IsIHRvRXhwYW5kKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSB0aGlzLmdldEVsZW1lbnQobm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBzZWxlY3RvciwgZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgVEVYVFdSQVAsIGxpRWxlKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGljb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvRXhwYW5kID8gdGhpcy5leHBhbmRBY3Rpb24obGlFbGUsIGljb24sIG51bGwpIDogdGhpcy5jb2xsYXBzZU5vZGUobGlFbGUsIGljb24sIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmFkZEdpdmVuTm9kZXMgPSBmdW5jdGlvbiAobm9kZXMsIGRyb3BMaSwgaW5kZXgsIGlzUmVtb3RlKSB7XG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSBkcm9wTGkgPyBwYXJzZUZsb2F0KGRyb3BMaS5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGV2ZWwnKSkgKyAxIDogMTtcbiAgICAgICAgICAgIGlmIChpc1JlbW90ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWFwcGVyKGxldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3RJdGVtRnJvbUpzb24obm9kZXMsIHRoaXMubGlzdEJhc2VPcHRpb24sIGxldmVsKTtcbiAgICAgICAgICAgIHZhciBkcm9wVWwgPSBkcm9wTGkgPyB0aGlzLmV4cGFuZFBhcmVudChkcm9wTGkpIDogZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciByZWZOb2RlID0gZHJvcFVsLmNoaWxkTm9kZXNbaW5kZXhdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRyb3BVbC5pbnNlcnRCZWZvcmUobGlbaV0sIHJlZk5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maW5hbGl6ZU5vZGUoZHJvcFVsKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVwZGF0ZU1hcHBlciA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICAgICAgdmFyIG1hcHBlciA9IChsZXZlbCA9PT0gMSkgPyB0aGlzLmZpZWxkcyA6IHRoaXMuZ2V0Q2hpbGRGaWVsZHModGhpcy5maWVsZHMsIGxldmVsIC0gMSwgMSk7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZ2V0QWN0dWFsUHJvcGVydGllcyhtYXBwZXIpO1xuICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMgPSBwcm9wO1xuICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMudXJsID0gcHJvcC5uYXZpZ2F0ZVVybDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRvRGlzYWJsZUFjdGlvbiA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaUVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpRWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbbGlFbGVdLCBESVNBQkxFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRvRW5hYmxlQWN0aW9uID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSB0aGlzLmdldEVsZW1lbnQobm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGlFbGUucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbbGlFbGVdLCBESVNBQkxFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLndpcmVJbnB1dEV2ZW50cyA9IGZ1bmN0aW9uIChpbnBFbGUpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZChpbnBFbGUsICdibHVyJywgdGhpcy5pbnB1dEZvY3VzT3V0LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLndpcmVFZGl0aW5nRXZlbnRzID0gZnVuY3Rpb24gKHRvQmluZCkge1xuICAgICAgICAgICAgaWYgKHRvQmluZCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm94eV8xID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzSW9zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFZGl0T2JqID0gbmV3IGVqMl9iYXNlXzcuVG91Y2godGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVUYXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMS5lZGl0aW5nSGFuZGxlcihlLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdkYmxjbGljaycsIHRoaXMuZWRpdGluZ0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MgJiYgdGhpcy50b3VjaEVkaXRPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaEVkaXRPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2RibGNsaWNrJywgdGhpcy5lZGl0aW5nSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUud2lyZUNsaWNrRXZlbnQgPSBmdW5jdGlvbiAodG9CaW5kKSB7XG4gICAgICAgICAgICBpZiAodG9CaW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3h5XzIgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaENsaWNrT2JqID0gbmV3IGVqMl9iYXNlXzcuVG91Y2godGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMi5jbGlja0hhbmRsZXIoZS5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvcyAmJiB0aGlzLnRvdWNoQ2xpY2tPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaENsaWNrT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS53aXJlRXhwYW5kT25FdmVudCA9IGZ1bmN0aW9uICh0b0JpbmQpIHtcbiAgICAgICAgICAgIGlmICh0b0JpbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJveHlfMyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBhbmRPblR5cGUgPT09ICdjbGljaycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFeHBhbmRPYmogPSBuZXcgZWoyX2Jhc2VfNy5Ub3VjaCh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzMuZXhwYW5kSGFuZGxlcihlLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaEV4cGFuZE9iaiA9IG5ldyBlajJfYmFzZV83LlRvdWNoKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZVRhcDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMy5leHBhbmRIYW5kbGVyKGUub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsIHRoaXMuZXhwYW5kT25UeXBlLCB0aGlzLmV4cGFuZEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MgJiYgdGhpcy50b3VjaEV4cGFuZE9iaikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRXhwYW5kT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsIHRoaXMuZXhwYW5kT25UeXBlLCB0aGlzLmV4cGFuZEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5tb3VzZURvd25TdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGUuY3RybEtleSAmJiB0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnY29udGV4dG1lbnUgJywgdGhpcy5wcmV2ZW50Q29udGV4dE1lbnUsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5wcmV2ZW50Q29udGV4dE1lbnUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy53aXJlQ2xpY2tFdmVudCh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV4cGFuZE9uRXZlbnQodHJ1ZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXMnLCB0aGlzLmZvY3VzSW4sIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2JsdXInLCB0aGlzLmZvY3VzT3V0LCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLm9uTW91c2VPdmVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW91dCcsIHRoaXMub25Nb3VzZUxlYXZlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRNb2R1bGUgPSBuZXcgZWoyX2Jhc2VfMy5LZXlib2FyZEV2ZW50cyh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5QWN0aW9uSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGtleUNvbmZpZ3M6IHRoaXMua2V5Q29uZmlncyxcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdrZXlkb3duJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLndpcmVDbGlja0V2ZW50KGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV4cGFuZE9uRXZlbnQoZmFsc2UpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2ZvY3VzJywgdGhpcy5mb2N1c0luKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdibHVyJywgdGhpcy5mb2N1c091dCk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnbW91c2VvdmVyJywgdGhpcy5vbk1vdXNlT3Zlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnbW91c2VvdXQnLCB0aGlzLm9uTW91c2VMZWF2ZSk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnBhcmVudHMgPSBmdW5jdGlvbiAoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkID0gW107XG4gICAgICAgICAgICB2YXIgZWwgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICB3aGlsZSAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZWwpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYubWF0Y2hlcyhlbCwgc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWQucHVzaChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVkO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuaXNEZXNjZW5kYW50ID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gY2hpbGQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHdoaWxlICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlKSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRDaGVja2VkTm9kZXMgPSBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgICAgIG5vZGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShub2RlcykpO1xuICAgICAgICAgICAgdGhpcy51bmNoZWNrQWxsKCk7XG4gICAgICAgICAgICBpZiAobm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBbGwobm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0RyYWdBbmREcm9wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RHJhZ0FuZERyb3AodGhpcy5hbGxvd0RyYWdBbmREcm9wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0VkaXRpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aXJlRWRpdGluZ0V2ZW50cyh0aGlzLmFsbG93RWRpdGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dNdWx0aVNlbGVjdGlvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE5vZGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc05vZGUgPSB0aGlzLmdldEVsZW1lbnQodGhpcy5zZWxlY3RlZE5vZGVzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoc05vZGUsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUb3VjaFBvcHVwKHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE11bHRpU2VsZWN0KHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE11bHRpU2VsZWN0KHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2hlY2tlZE5vZGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5vZGVzID0gb2xkUHJvcC5jaGVja2VkTm9kZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2VkTm9kZXMobmV3UHJvcC5jaGVja2VkTm9kZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzc0NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3Mob2xkUHJvcC5jc3NDbGFzcywgbmV3UHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlUnRsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXhwYW5kT24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aXJlRXhwYW5kT25FdmVudChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEV4cGFuZE9uVHlwZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aXJlRXhwYW5kT25FdmVudCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmaWVsZHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMgPSB0aGlzLmZpZWxkcy5wcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMudXJsID0gdGhpcy5maWVsZHMubmF2aWdhdGVVcmw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlUmVuZGVyTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmdWxsUm93U2VsZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RnVsbFJvdyh0aGlzLmZ1bGxSb3dTZWxlY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRGdWxsUm93KHRoaXMuZnVsbFJvd1NlbGVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm9kZVRlbXBsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZVRlbXBsYXRlRm4gPSB0aGlzLnRlbXBsYXRlQ29tcGxpZXIodGhpcy5ub2RlVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZVJlbmRlck5vZGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0ZWROb2Rlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdEFsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgc2VsZWN0ZWROb2RlczogbmV3UHJvcC5zZWxlY3RlZE5vZGVzIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb1NlbGVjdGlvbkFjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dDaGVja0JveCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlUmVuZGVyTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzb3J0T3JkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZVJlbmRlck5vZGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpO1xuICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUVkaXRpbmdFdmVudHMoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5yaXBwbGVGbigpO1xuICAgICAgICAgICAgdGhpcy5yaXBwbGVJY29uRm4oKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3ModGhpcy5jc3NDbGFzcywgbnVsbCk7XG4gICAgICAgICAgICB0aGlzLnNldERyYWdBbmREcm9wKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0RnVsbFJvdyhmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnNldFRvdWNoUG9wdXAoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRNdWx0aVNlbGVjdChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmFkZE5vZGVzID0gZnVuY3Rpb24gKG5vZGVzLCB0YXJnZXQsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZHJvcExpID0gdGhpcy5nZXRFbGVtZW50KHRhcmdldCk7XG4gICAgICAgICAgICBub2RlcyA9IHRoaXMuZ2V0U29ydGVkRGF0YShub2Rlcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZHMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEdpdmVuTm9kZXMobm9kZXMsIGRyb3BMaSwgaW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kYXRhVHlwZSA9PT0gMikge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkR2l2ZW5Ob2Rlcyhub2RlcywgZHJvcExpLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZHJvcExpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkR2l2ZW5Ob2Rlcyhub2RlcywgZHJvcExpLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGlkID0gbm9kZXNbaV1bdGhpcy5maWVsZHMucGFyZW50SURdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcExpID0gcGlkID8gdGhpcy5nZXRFbGVtZW50KHBpZC50b1N0cmluZygpKSA6IHBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkR2l2ZW5Ob2Rlcyhbbm9kZXNbaV1dLCBkcm9wTGksIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNoZWNrQWxsID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvQ2hlY2tCb3hBY3Rpb24obm9kZXMsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAobm9kZXMsIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvR2l2ZW5BY3Rpb24obm9kZXMsIENPTExBUFNJQkxFLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VCeUxldmVsKGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIHRoaXMuZWxlbWVudCksIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGVzKGV4Y2x1ZGVIaWRkZW5Ob2Rlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZGlzYWJsZU5vZGVzID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvRGlzYWJsZUFjdGlvbih0aGlzLnNlbGVjdGVkTm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0Rpc2FibGVBY3Rpb24obm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZW5hYmxlQWxsID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBESVNBQkxFLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbGlFbGVfMSA9IGxpRWxlOyBfaSA8IGxpRWxlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBsaUVsZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKGxpRWxlLCBESVNBQkxFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9FbmFibGVBY3Rpb24obm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZW5zdXJlVmlzaWJsZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICB2YXIgbGlFbGUgPSB0aGlzLmdldEVsZW1lbnQobm9kZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaUVsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGFyZW50cyA9IHRoaXMucGFyZW50cyhsaUVsZSwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgdGhpcy5leHBhbmRBbGwocGFyZW50cyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgbGlFbGUuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7IH0sIDQ1MCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5leHBhbmRBbGwgPSBmdW5jdGlvbiAobm9kZXMsIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvR2l2ZW5BY3Rpb24obm9kZXMsIEVYUEFOREFCTEUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEJ5TGV2ZWwoZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgdGhpcy5lbGVtZW50KSwgbGV2ZWwsIGV4Y2x1ZGVIaWRkZW5Ob2Rlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFsbE5vZGVzKGV4Y2x1ZGVIaWRkZW5Ob2Rlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50KG5vZGUpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Tm9kZURldGFpbHMgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZ2V0RWxlbWVudChub2RlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE5vZGVEYXRhKGVsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5tb3ZlTm9kZXMgPSBmdW5jdGlvbiAoc291cmNlTm9kZXMsIHRhcmdldCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBkcm9wTGkgPSB0aGlzLmdldEVsZW1lbnQodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGRyb3BMaSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZU5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWdMaSA9IHRoaXMuZ2V0RWxlbWVudChzb3VyY2VOb2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZHJhZ0xpKSB8fCBkcm9wTGkuaXNTYW1lTm9kZShkcmFnTGkpIHx8IHRoaXMuaXNEZXNjZW5kYW50KGRyYWdMaSwgZHJvcExpKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wQXNDaGlsZE5vZGUoZHJhZ0xpLCBkcm9wTGksIHRoaXMsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbW92ZU5vZGVzID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSB0aGlzLmdldEVsZW1lbnQobm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlKGxpRWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gKHRhcmdldCwgbmV3VGV4dCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodGFyZ2V0KSB8fCBlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKG5ld1RleHQpIHx8ICF0aGlzLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaUVsZSA9IHRoaXMuZ2V0RWxlbWVudCh0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobGlFbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHR4dEVsZSA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIExJU1RURVhULCBsaUVsZSk7XG4gICAgICAgICAgICB0eHRFbGUuY2hpbGROb2Rlc1swXS5ub2RlVmFsdWUgPSBuZXdUZXh0O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudW5jaGVja0FsbCA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0NoZWNrQm94QWN0aW9uKG5vZGVzLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUcmVlVmlldztcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImFsbG93RHJhZ0FuZERyb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiYWxsb3dFZGl0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImFsbG93TXVsdGlTZWxlY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Db21wbGV4KHt9LCBOb2RlQW5pbWF0aW9uU2V0dGluZ3MpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImFuaW1hdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiY2hlY2tlZE5vZGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJycpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImVuYWJsZVJ0bFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiZXhwYW5kT25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Db21wbGV4KHt9LCBGaWVsZHNTZXR0aW5ncylcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiZmllbGRzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiZnVsbFJvd1NlbGVjdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZVRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJzZWxlY3RlZE5vZGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ05vbmUnKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJzb3J0T3JkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwic2hvd0NoZWNrQm94XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJkYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImRyYXdOb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImtleVByZXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJub2RlQ2hlY2tlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUNoZWNraW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJub2RlQ2xpY2tlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUNvbGxhcHNlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUNvbGxhcHNpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVEcmFnZ2luZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZURyYWdTdGFydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZURyYWdTdG9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJub2RlRHJvcHBlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUVkaXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUVkaXRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVFeHBhbmRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUV4cGFuZGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZVNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJub2RlU2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgVHJlZVZpZXcgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBUcmVlVmlldyk7XG4gICAgZXhwb3J0cy5UcmVlVmlldyA9IFRyZWVWaWV3O1xuICAgIGV4cG9ydHMudHJlZVZpZXdIZWxwZXIgPSBlajJfYmFzZV8xLkNyZWF0ZUJ1aWxkZXIoVHJlZVZpZXcpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90cmVldmlldy90cmVldmlldy5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE3X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9"]}
/*!
*  filename: ej2-navigations.umd.min.js.map
*  version : 1.0.19
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-navigations.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","h_scroll_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","HScroll","_super","options","element","preRender","browser","Browser","info","name","browserCheck","isDevice","ieCheck","initialize","getUniqueID","uniqueId","style","display","enableRtl","classList","add","render","touchModule","Touch","scroll","touchHandler","bind","createNavIcon","EventHandler","scrollEle","scrollHandler","createElement","className","scrollDiv","setAttribute","ele","innerEle","slice","children","_i","innerEle_1","ele_1","appendChild","overflowX","scrollItems","getPersistData","keyEntity","addOnPersist","getModuleName","destroy","remove","nav","selectAll","_a","elem","removeAttribute","detach","concat","clsRight","navItem","CLS_NAVRIGHTARROW","clsLeft","navEle","navLeftItem","CLS_NAVLEFTARROW","insertBefore","firstChild","eventBinding","onKeyPress","e","_this","timeoutFun_1","keyTimeout","eleScrolling","keyTimer","window","setTimeout","onKeyUp","click","clearTimeout","forEach","el","tapHold","tabHoldHandler","tapHoldThreshold","addEventListener","repeatScroll","preventDefault","clickEventHandler","clearInterval","timeout","trgt","originalEvent","contains","firstElementChild","timeoutFun","setInterval","scrollDis","rootEle","querySelector","scrlLeft","scrollLeft","scrollStep","distance","distanceX","scrollDirection","arrowDisabling","addDisable","removeDisable","width","offsetWidth","navLeftEle","navRightEle","Math","ceil","scrollWidth","disEle","onPropertyChanged","newProp","oldProp","keys","Component","Property","NotifyPropertyChanges","toolbar_1","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","ej2_popups_2","ej2_buttons_1","CLS_ITEMS","CLS_ITEM","CLS_POPUP","Item","ChildProperty","Toolbar","keyConfigs","moveLeft","moveRight","moveUp","moveDown","popupOpen","popupClose","tab","home","end","unwireEvents","removeChild","trgtEle","ctrlTem","clearProperty","popObj","attrb","trigger","scrollModule","wireEvents","clickHandler","resize","keyModule","KeyboardEvents","keyAction","keyActionHandler","docKeyDown","keyCode","isVisible","hide","duration","isNullOrUndefined","destroyHScroll","document","docEvent","tbarEle","tbarAlgEle","lefts","centers","rights","popEle","closest","tbarAlign","destroyItems","querySelectorAll","destroyMode","popupRefresh","val","elementFocus","fChild","focus","activeEleSwitch","clstElement","tbrNavChk","keyHandling","clst","navChk","scrollChk","popAnimate","action","eleFocus","nodes","popupCheck","popFrstEle","lastElementChild","activeEle","activeEleRemove","top","offsetHeight","show","tbarScrollChk","pos","sib","skipEle","parentElement","clsList","popupNav","popupClickHandler","itemObj","items","indexOf","eventArgs","item","CLS_RTL","position","X","Y","offsetX","dataBind","renderControl","formatUnit","height","setStyleAttribute","ariaAttr","role","aria-disabled","aria-haspopup","aria-orientation","attributes","renderItems","renderOverflowMode","itemPositioning","initHScroll","innerItems","checkOverflow","overflow","itemWidthCal","innerItem","itemWidth","eleWidth","popNav","scrollNav","refreshOverflow","offsetWid","overflowMode","getElementsByClassName","removePositioning","createPopupEle","innerNav","createPopupIcon","checkPriority","createPopup","pushingPoppedEle","tbarObj","popupPri","eleHeight","nodeIndex","poppedEle","nodePri","index","tbResize","push","childNodes","tbarElement","eleItem","popupInit","popupEle","maxHeight","popup","Popup","relateTo","offsetY","open","close","appendTo","toolEle","clientHeight","popupElePos","offsetTop","calculatePosition","popIcon","scrollVal","scrollY","innerHeight","overflowHeight","inEle","pre","len","eleWid","sepCheck","itemCount","itemPopCount","checkClass","rVal","cls","mrgn","parseFloat","getComputedStyle","marginRight","marginLeft","tbarEleMrgn","offsetLeft","sepEle","minWidth","popedEle","CLS_POPUPDOWN","tbarPriRef","indx","sepPri","des","elWid","wid","ig","ignoreCount","priEleCnt","eleSep","ignoreCheck","eleSepWidth","prevSep","previousElementSibling","popupEleRefresh","ignoreEleFetch","ignoreEle","ignoreInx","count","eleSplice","this_1","elWidth","btnText","btn","align","sepBeforePri_1","refreshPositioning","margin","tbarWid","right","tbarItemAlign","itemEle","alignDiv","alignEle","leftAlign_1","ctrlTemplate","cloneNode","tagName","itemEleDom","innerPos","renderSubComponent","toLowerCase","setAttr","attr","keyVal","enableItems","isEnable","elements","enable","removeClass","addClass","addItems","itemsDiv","itemAgn","items_1","type","algIndex","splice","parentNode","removeItems","args","parseInt","toString","removeItemByIndex","eleIdx","indexAgn","templateRender","templateProp","isComponent","itemType","eleObj","templateFn","trim","compile","outerHTML","buttonRendering","iconCss","iconPos","dom","textStr","text","btnTxt","innerHTML","prefixIcon","suffixIcon","Button","iconPosition","htmlAttributes","tooltipText","cssClass","template","itemClick","showTextOn","sTxt","currentTarget","curEle","tEle","Collection","Event","toolbarBuilder","CreateBuilder"],"mappings":"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","file":"ej2-navigations.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-buttons\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-buttons\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-buttons\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-buttons\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, h_scroll_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(h_scroll_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ROOT = 'e-hscroll';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_HSCROLLBAR = 'e-hscroll-bar';\n\t    var CLS_HSCROLLCON = 'e-hscroll-content';\n\t    var CLS_NAVARROW = 'e-nav-arrow';\n\t    var CLS_NAVRIGHTARROW = 'e-nav-right-arrow';\n\t    var CLS_NAVLEFTARROW = 'e-nav-left-arrow';\n\t    var CLS_HSCROLLNAV = 'e-scroll-nav';\n\t    var CLS_HSCROLLNAVRIGHT = 'e-scroll-right-nav';\n\t    var CLS_HSCROLLNAVLEFT = 'e-scroll-left-nav';\n\t    var CLS_DEVICE = 'e-scroll-device';\n\t    var HScroll = (function (_super) {\n\t        __extends(HScroll, _super);\n\t        function HScroll(options, element) {\n\t            return _super.call(this, options, element) || this;\n\t        }\n\t        HScroll.prototype.preRender = function () {\n\t            this.browser = ej2_base_2.Browser.info.name;\n\t            this.browserCheck = this.browser === 'mozilla';\n\t            this.isDevice = ej2_base_2.Browser.isDevice;\n\t            var element = this.element;\n\t            this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n\t            this.initialize();\n\t            if (element.id === '') {\n\t                element.id = ej2_base_1.getUniqueID('hscroll');\n\t                this.uniqueId = true;\n\t            }\n\t            element.style.display = 'block';\n\t            if (this.enableRtl) {\n\t                element.classList.add(CLS_RTL);\n\t            }\n\t        };\n\t        HScroll.prototype.render = function () {\n\t            this.touchModule = new ej2_base_1.Touch(this.element, { scroll: this.touchHandler.bind(this) });\n\t            if (!this.isDevice) {\n\t                this.createNavIcon(this.element);\n\t                ej2_base_1.EventHandler.add(this.scrollEle, 'scroll', this.scrollHandler, this);\n\t            }\n\t            else {\n\t                this.element.classList.add(CLS_DEVICE);\n\t            }\n\t        };\n\t        HScroll.prototype.initialize = function () {\n\t            var scrollEle = ej2_base_2.createElement('div', { className: CLS_HSCROLLCON });\n\t            var scrollDiv = ej2_base_2.createElement('div', { className: CLS_HSCROLLBAR });\n\t            scrollDiv.setAttribute('tabindex', '-1');\n\t            var ele = this.element;\n\t            var innerEle = [].slice.call(ele.children);\n\t            for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {\n\t                var ele_1 = innerEle_1[_i];\n\t                scrollEle.appendChild(ele_1);\n\t            }\n\t            scrollDiv.appendChild(scrollEle);\n\t            ele.appendChild(scrollDiv);\n\t            scrollDiv.style.overflowX = 'hidden';\n\t            this.scrollEle = scrollDiv;\n\t            this.scrollItems = scrollEle;\n\t        };\n\t        HScroll.prototype.getPersistData = function () {\n\t            var keyEntity = ['scrollStep'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        HScroll.prototype.getModuleName = function () {\n\t            return 'hScroll';\n\t        };\n\t        HScroll.prototype.destroy = function () {\n\t            var ele = this.element;\n\t            ele.style.display = '';\n\t            ele.classList.remove(CLS_ROOT);\n\t            var nav = ej2_base_1.selectAll('#' + ele.id + '_nav.e-' + ele.id + '_nav');\n\t            for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {\n\t                var elem = _a[_i];\n\t                ele.appendChild(elem);\n\t            }\n\t            if (this.uniqueId) {\n\t                this.element.removeAttribute('id');\n\t            }\n\t            ej2_base_2.detach(this.scrollEle);\n\t            if (nav.length > 0) {\n\t                ej2_base_2.detach(nav[0]);\n\t                ej2_base_2.detach(nav[1]);\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.scrollEle, 'scroll', this.scrollHandler);\n\t            this.touchModule.destroy();\n\t            this.touchModule = null;\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        HScroll.prototype.createNavIcon = function (element) {\n\t            var id = element.id.concat('_nav');\n\t            var clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n\t            var nav = ej2_base_2.createElement('div', { id: id, className: clsRight });\n\t            nav.setAttribute('aria-disabled', 'false');\n\t            var navItem = ej2_base_2.createElement('div', { className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n\t            var clsLeft = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVLEFT);\n\t            var navEle = ej2_base_2.createElement('div', { id: id, className: clsLeft + ' ' + CLS_DISABLE });\n\t            navEle.setAttribute('aria-disabled', 'true');\n\t            var navLeftItem = ej2_base_2.createElement('div', { className: CLS_NAVLEFTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n\t            navEle.appendChild(navLeftItem);\n\t            nav.appendChild(navItem);\n\t            nav.setAttribute('tabindex', '0');\n\t            element.appendChild(nav);\n\t            element.insertBefore(navEle, element.firstChild);\n\t            if (this.ieCheck) {\n\t                nav.classList.add('e-ie-align');\n\t                navEle.classList.add('e-ie-align');\n\t            }\n\t            this.eventBinding([nav, navEle]);\n\t        };\n\t        HScroll.prototype.onKeyPress = function (e) {\n\t            var _this = this;\n\t            if (e.key === 'Enter') {\n\t                var timeoutFun_1 = function () {\n\t                    _this.keyTimeout = true;\n\t                    _this.eleScrolling(10, e.target);\n\t                };\n\t                this.keyTimer = window.setTimeout(function () {\n\t                    timeoutFun_1();\n\t                }, 100);\n\t            }\n\t        };\n\t        HScroll.prototype.onKeyUp = function (e) {\n\t            if (e.key !== 'Enter') {\n\t                return;\n\t            }\n\t            if (this.keyTimeout) {\n\t                this.keyTimeout = false;\n\t            }\n\t            else {\n\t                e.target.click();\n\t            }\n\t            clearTimeout(this.keyTimer);\n\t        };\n\t        HScroll.prototype.eventBinding = function (ele) {\n\t            var _this = this;\n\t            ele.forEach(function (el) {\n\t                new ej2_base_1.Touch(el, { tapHold: _this.tabHoldHandler.bind(_this), tapHoldThreshold: 500 });\n\t                el.addEventListener('keydown', _this.onKeyPress.bind(_this));\n\t                el.addEventListener('keyup', _this.onKeyUp.bind(_this));\n\t                el.addEventListener('mouseup', _this.repeatScroll.bind(_this));\n\t                el.addEventListener('touchend', _this.repeatScroll.bind(_this));\n\t                el.addEventListener('contextmenu', function (e) {\n\t                    e.preventDefault();\n\t                });\n\t                ej2_base_1.EventHandler.add(el, 'click', _this.clickEventHandler, _this);\n\t            });\n\t        };\n\t        HScroll.prototype.repeatScroll = function () {\n\t            clearInterval(this.timeout);\n\t        };\n\t        HScroll.prototype.tabHoldHandler = function (e) {\n\t            var _this = this;\n\t            var trgt = e.originalEvent.target;\n\t            trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;\n\t            var scrollDis = 10;\n\t            var timeoutFun = function () {\n\t                _this.eleScrolling(scrollDis, trgt);\n\t            };\n\t            this.timeout = window.setInterval(function () {\n\t                timeoutFun();\n\t            }, 50);\n\t        };\n\t        HScroll.prototype.contains = function (ele, className) {\n\t            return ele.classList.contains(className);\n\t        };\n\t        HScroll.prototype.eleScrolling = function (scrollDis, trgt) {\n\t            var element = this.scrollEle;\n\t            var rootEle = this.element;\n\t            var classList = trgt.classList;\n\t            if (classList.contains(CLS_HSCROLLNAV)) {\n\t                classList = trgt.querySelector('.' + CLS_NAVARROW).classList;\n\t            }\n\t            if (this.contains(rootEle, CLS_RTL) && this.browserCheck) {\n\t                scrollDis = -scrollDis;\n\t            }\n\t            var scrlLeft = element.scrollLeft;\n\t            if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                if (classList.contains(CLS_NAVRIGHTARROW)) {\n\t                    element.scrollLeft = scrlLeft + scrollDis;\n\t                }\n\t                else {\n\t                    element.scrollLeft = scrlLeft - scrollDis;\n\t                }\n\t            }\n\t            else {\n\t                if (classList.contains(CLS_NAVLEFTARROW)) {\n\t                    element.scrollLeft = scrlLeft + scrollDis;\n\t                }\n\t                else {\n\t                    element.scrollLeft = scrlLeft - scrollDis;\n\t                }\n\t            }\n\t        };\n\t        HScroll.prototype.clickEventHandler = function (e) {\n\t            this.eleScrolling(this.scrollStep, e.target);\n\t        };\n\t        HScroll.prototype.touchHandler = function (e) {\n\t            var ele = this.scrollEle;\n\t            var distance;\n\t            distance = e.distanceX;\n\t            if ((this.ieCheck) && this.contains(this.element, CLS_RTL)) {\n\t                distance = -distance;\n\t            }\n\t            if (e.scrollDirection === 'Left') {\n\t                ele.scrollLeft = ele.scrollLeft + distance;\n\t            }\n\t            else if (e.scrollDirection === 'Right') {\n\t                ele.scrollLeft = ele.scrollLeft - distance;\n\t            }\n\t        };\n\t        HScroll.prototype.arrowDisabling = function (addDisable, removeDisable) {\n\t            addDisable.classList.add(CLS_DISABLE);\n\t            addDisable.setAttribute('aria-disabled', 'true');\n\t            addDisable.removeAttribute('tabindex');\n\t            clearInterval(this.timeout);\n\t            removeDisable.classList.remove(CLS_DISABLE);\n\t            removeDisable.setAttribute('aria-disabled', 'false');\n\t            removeDisable.setAttribute('tabindex', '0');\n\t            this.repeatScroll();\n\t        };\n\t        HScroll.prototype.scrollHandler = function (e) {\n\t            var target = e.target;\n\t            var width = target.offsetWidth;\n\t            var rootEle = this.element;\n\t            var navLeftEle = this.element.querySelector('.' + CLS_HSCROLLNAVLEFT);\n\t            var navRightEle = this.element.querySelector('.' + CLS_HSCROLLNAVRIGHT);\n\t            var scrollLeft = target.scrollLeft;\n\t            if (scrollLeft <= 0) {\n\t                scrollLeft = -scrollLeft;\n\t            }\n\t            if (scrollLeft === 0) {\n\t                if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                    this.arrowDisabling(navLeftEle, navRightEle);\n\t                }\n\t                else {\n\t                    this.arrowDisabling(navRightEle, navLeftEle);\n\t                }\n\t            }\n\t            else if (Math.ceil(width + scrollLeft + .1) >= target.scrollWidth) {\n\t                if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                    this.arrowDisabling(navRightEle, navLeftEle);\n\t                }\n\t                else {\n\t                    this.arrowDisabling(navLeftEle, navRightEle);\n\t                }\n\t            }\n\t            else {\n\t                var disEle = this.element.querySelector('.' + CLS_DISABLE);\n\t                if (disEle) {\n\t                    disEle.classList.remove(CLS_DISABLE);\n\t                    disEle.setAttribute('aria-disabled', 'false');\n\t                    disEle.setAttribute('tabindex', '0');\n\t                }\n\t            }\n\t        };\n\t        HScroll.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'scrollStep':\n\t                        break;\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.element.classList.add(CLS_RTL) : this.element.classList.remove(CLS_RTL);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return HScroll;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_2.Property(40)\n\t    ], HScroll.prototype, \"scrollStep\", void 0);\n\t    HScroll = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], HScroll);\n\t    exports.HScroll = HScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, toolbar_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(toolbar_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(6), __webpack_require__(6), __webpack_require__(7), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, ej2_popups_2, ej2_buttons_1, h_scroll_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ITEMS = 'e-toolbar-items';\n\t    var CLS_ITEM = 'e-toolbar-item';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_SEPARATOR = 'e-separator';\n\t    var CLS_POPUPICON = 'e-popup-up-icon';\n\t    var CLS_POPUPDOWN = 'e-popup-down-icon';\n\t    var CLS_TEMPLATE = 'e-template';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_POPUPTEXT = 'e-toolbar-text';\n\t    var CLS_TBARTEXT = 'e-popup-text';\n\t    var CLS_TBAROVERFLOW = 'e-overflow-show';\n\t    var CLS_POPOVERFLOW = 'e-overflow-hide';\n\t    var CLS_TBARBTN = 'e-tbar-btn';\n\t    var CLS_TBARNAV = 'e-hor-nav';\n\t    var CLS_TBARSCRLNAV = 'e-scroll-nav';\n\t    var CLS_TBARRIGHT = 'e-toolbar-right';\n\t    var CLS_TBARLEFT = 'e-toolbar-left';\n\t    var CLS_TBARCENTER = 'e-toolbar-center';\n\t    var CLS_TBARPOS = 'e-tbar-pos';\n\t    var CLS_TBARSCROLL = 'e-hscroll-content';\n\t    var CLS_POPUPNAV = 'e-hor-nav';\n\t    var CLS_POPUPCLASS = 'e-toolbar-pop';\n\t    var CLS_POPUP = 'e-toolbar-popup';\n\t    var CLS_TBARBTNTEXT = 'e-tbar-btn-text';\n\t    var CLS_TBARNAVACT = 'e-nav-active';\n\t    var CLS_TBARIGNORE = 'e-ignore';\n\t    var Item = (function (_super) {\n\t        __extends(Item, _super);\n\t        function Item() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Item;\n\t    }(ej2_base_5.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Item.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"prefixIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"suffixIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('None')\n\t    ], Item.prototype, \"overflow\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Button')\n\t    ], Item.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Both')\n\t    ], Item.prototype, \"showTextOn\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Item.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"tooltipText\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('left')\n\t    ], Item.prototype, \"align\", void 0);\n\t    exports.Item = Item;\n\t    var Toolbar = (function (_super) {\n\t        __extends(Toolbar, _super);\n\t        function Toolbar(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.keyConfigs = {\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow',\n\t                popupOpen: 'enter',\n\t                popupClose: 'escape',\n\t                tab: 'tab',\n\t                home: 'home',\n\t                end: 'end',\n\t            };\n\t            return _this;\n\t        }\n\t        Toolbar.prototype.destroy = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            _super.prototype.destroy.call(this);\n\t            this.unwireEvents();\n\t            while (ele.firstChild) {\n\t                ele.removeChild(ele.firstChild);\n\t            }\n\t            if (this.trgtEle) {\n\t                ele.appendChild(this.ctrlTem);\n\t            }\n\t            this.clearProperty();\n\t            this.popObj = null;\n\t            this.remove(this.element, 'e-toolpop');\n\t            ele.removeAttribute('style');\n\t            ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n\t                _this.element.removeAttribute(attrb);\n\t            });\n\t        };\n\t        Toolbar.prototype.preRender = function () {\n\t            this.trigger('beforeCreate');\n\t            this.scrollModule = null;\n\t            this.popObj = null;\n\t            if (this.enableRtl) {\n\t                this.add(this.element, CLS_RTL);\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t            window.addEventListener('resize', this.resize.bind(this));\n\t            this.keyModule = new ej2_base_2.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs\n\t            });\n\t            ej2_base_1.EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n\t            this.element.setAttribute('tabIndex', '0');\n\t        };\n\t        Toolbar.prototype.docKeyDown = function (e) {\n\t            if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && ej2_base_2.isVisible(this.popObj.element)) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t            if ((e.keyCode === 40 || e.keyCode === 38) && !ej2_base_4.isNullOrUndefined(this.popObj) && ej2_base_2.isVisible(this.popObj.element)) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Toolbar.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t            this.destroyHScroll();\n\t            this.keyModule.destroy();\n\t            ej2_base_1.EventHandler.remove(document, 'scroll', this.docEvent);\n\t            ej2_base_1.EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n\t            ej2_base_1.EventHandler.remove(document, 'click', this.docEvent);\n\t        };\n\t        Toolbar.prototype.clearProperty = function () {\n\t            this.tbarEle = [];\n\t            this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n\t        };\n\t        Toolbar.prototype.docEvent = function (e) {\n\t            var popEle = ej2_base_2.closest(e.target, '.e-popup');\n\t            if (this.popObj && ej2_base_2.isVisible(this.popObj.element) && !popEle) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t        };\n\t        Toolbar.prototype.destroyHScroll = function () {\n\t            if (this.scrollModule) {\n\t                if (this.tbarAlign) {\n\t                    this.add(this.scrollModule.element, CLS_TBARPOS);\n\t                }\n\t                this.scrollModule.destroy();\n\t                this.scrollModule = null;\n\t            }\n\t        };\n\t        Toolbar.prototype.destroyItems = function () {\n\t            [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) {\n\t                ej2_base_2.detach(el);\n\t            });\n\t            this.clearProperty();\n\t        };\n\t        Toolbar.prototype.destroyMode = function () {\n\t            if (this.scrollModule) {\n\t                this.remove(this.scrollModule.element, CLS_RTL);\n\t                this.destroyHScroll();\n\t            }\n\t            if (this.popObj) {\n\t                this.popupRefresh(this.popObj.element, true);\n\t            }\n\t        };\n\t        Toolbar.prototype.add = function (ele, val) {\n\t            ele.classList.add(val);\n\t        };\n\t        Toolbar.prototype.remove = function (ele, val) {\n\t            ele.classList.remove(val);\n\t        };\n\t        Toolbar.prototype.elementFocus = function (ele) {\n\t            var fChild = ele.firstElementChild;\n\t            if (fChild) {\n\t                fChild.focus();\n\t                this.activeEleSwitch(ele);\n\t            }\n\t            else {\n\t                ele.focus();\n\t            }\n\t        };\n\t        Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n\t            var clst;\n\t            if (tbrNavChk && this.popObj && ej2_base_2.isVisible(this.popObj.element)) {\n\t                clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n\t            }\n\t            else if (this.element === trgt || tbrNavChk) {\n\t                clst = this.element.querySelector('.' + CLS_ITEM);\n\t            }\n\t            else {\n\t                clst = ej2_base_2.closest(trgt, '.' + CLS_ITEM);\n\t            }\n\t            return clst;\n\t        };\n\t        Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n\t            var popObj = this.popObj;\n\t            var rootEle = this.element;\n\t            var popAnimate = { name: 'SlideUp', duration: 100 };\n\t            switch (e.action) {\n\t                case 'moveRight':\n\t                    if (rootEle === trgt) {\n\t                        this.elementFocus(clst);\n\t                    }\n\t                    else if (!navChk) {\n\t                        this.eleFocus(clst, 'next');\n\t                    }\n\t                    break;\n\t                case 'moveLeft':\n\t                    if (!navChk) {\n\t                        this.eleFocus(clst, 'previous');\n\t                    }\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    var ele = void 0;\n\t                    var nodes = void 0;\n\t                    if (clst) {\n\t                        var popupCheck = ej2_base_2.closest(clst, '.e-popup');\n\t                        if (popupCheck) {\n\t                            if (ej2_base_2.isVisible(this.popObj.element)) {\n\t                                nodes = popupCheck.children;\n\t                                if (e.action === 'home') {\n\t                                    ele = nodes[0];\n\t                                }\n\t                                else {\n\t                                    ele = nodes[nodes.length - 1];\n\t                                }\n\t                            }\n\t                        }\n\t                        else {\n\t                            nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM);\n\t                            if (e.action === 'home') {\n\t                                ele = nodes[0];\n\t                            }\n\t                            else {\n\t                                ele = nodes[nodes.length - 1];\n\t                            }\n\t                        }\n\t                        if (ele) {\n\t                            this.elementFocus(ele);\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'moveUp':\n\t                case 'moveDown':\n\t                    var value = e.action === 'moveUp' ? 'previous' : 'next';\n\t                    if (popObj && ej2_base_2.closest(trgt, '.e-popup')) {\n\t                        var popEle = popObj.element;\n\t                        var popFrstEle = popEle.firstElementChild;\n\t                        if ((value === 'previous' && popFrstEle === clst) || (value === 'next' && popEle.lastElementChild === clst)) {\n\t                            return;\n\t                        }\n\t                        else {\n\t                            this.eleFocus(clst, value);\n\t                        }\n\t                    }\n\t                    else if (e.action === 'moveDown') {\n\t                        this.elementFocus(clst);\n\t                    }\n\t                    break;\n\t                case 'tab':\n\t                    if (!scrollChk && !navChk) {\n\t                        var ele_1 = clst.firstElementChild;\n\t                        if (rootEle === trgt) {\n\t                            if (this.activeEle) {\n\t                                this.activeEle.focus();\n\t                            }\n\t                            else {\n\t                                this.activeEleRemove(ele_1);\n\t                                ele_1.focus();\n\t                            }\n\t                            this.element.removeAttribute('tabindex');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'popupClose':\n\t                    if (popObj) {\n\t                        popObj.hide(popAnimate);\n\t                    }\n\t                    break;\n\t                case 'popupOpen':\n\t                    if (!navChk) {\n\t                        return;\n\t                    }\n\t                    if (popObj && !ej2_base_2.isVisible(popObj.element)) {\n\t                        popObj.element.style.top = rootEle.offsetHeight + 'px';\n\t                        popObj.show({ name: 'SlideDown', duration: 100 });\n\t                    }\n\t                    else {\n\t                        popObj.hide(popAnimate);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        Toolbar.prototype.keyActionHandler = function (e) {\n\t            e.preventDefault();\n\t            var clst;\n\t            var trgt = e.target;\n\t            var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n\t            var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n\t            clst = this.clstElement(tbrNavChk, trgt);\n\t            if (clst || tbarScrollChk) {\n\t                this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n\t            }\n\t        };\n\t        Toolbar.prototype.eleFocus = function (closest, pos) {\n\t            var sib = Object(closest)[pos + 'ElementSibling'];\n\t            var contains = function (el) {\n\t                return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE);\n\t            };\n\t            if (sib) {\n\t                var skipEle = contains(sib);\n\t                if (skipEle) {\n\t                    if (Object(sib)[pos + 'Sibling']) {\n\t                        sib = Object(sib)[pos + 'Sibling'];\n\t                        skipEle = contains(sib);\n\t                        if (skipEle) {\n\t                            this.eleFocus(sib, pos);\n\t                            return;\n\t                        }\n\t                    }\n\t                }\n\t                this.elementFocus(sib);\n\t            }\n\t            else if (this.tbarAlign) {\n\t                var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n\t                if (!ej2_base_4.isNullOrUndefined(elem) && elem.children.length > 0) {\n\t                    if (pos === 'next') {\n\t                        var el = elem.querySelector('.' + CLS_ITEM);\n\t                        if (contains(el)) {\n\t                            this.eleFocus(el, pos);\n\t                        }\n\t                        else {\n\t                            el.firstElementChild.focus();\n\t                            this.activeEleSwitch(el);\n\t                        }\n\t                    }\n\t                    else {\n\t                        var el = elem.lastElementChild;\n\t                        if (contains(el)) {\n\t                            this.eleFocus(el, pos);\n\t                        }\n\t                        else {\n\t                            this.elementFocus(el);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.clickHandler = function (e) {\n\t            var trgt = e.target;\n\t            var clsList = trgt.classList;\n\t            var ele = this.element;\n\t            var popupNav = ej2_base_2.closest(trgt, ('.' + CLS_TBARNAV));\n\t            if (!popupNav) {\n\t                popupNav = trgt;\n\t            }\n\t            if (!ele.children[0].classList.contains('e-hscroll') && (clsList.contains(CLS_TBARNAV))) {\n\t                clsList = trgt.querySelector('.e-icons').classList;\n\t            }\n\t            if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n\t                this.popupClickHandler(ele, popupNav, CLS_RTL);\n\t            }\n\t            var itemObj;\n\t            var clst = ej2_base_2.closest(e.target, '.' + CLS_ITEM);\n\t            if ((ej2_base_4.isNullOrUndefined(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n\t                return;\n\t            }\n\t            if (clst) {\n\t                itemObj = this.items[this.tbarEle.indexOf(clst)];\n\t            }\n\t            var eventArgs = { originalEvent: e, item: itemObj };\n\t            this.trigger('clicked', eventArgs);\n\t        };\n\t        ;\n\t        Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n\t            var popObj = this.popObj;\n\t            if (ej2_base_2.isVisible(popObj.element)) {\n\t                popupNav.classList.remove(CLS_TBARNAVACT);\n\t                popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t            else {\n\t                if (ele.classList.contains(CLS_RTL)) {\n\t                    popObj.enableRtl = true;\n\t                    popObj.position = { X: 'left', Y: 'top' };\n\t                }\n\t                if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n\t                    popObj.enableRtl = false;\n\t                    popObj.position = { X: 'right', Y: 'top' };\n\t                }\n\t                popObj.dataBind();\n\t                popObj.element.style.top = this.element.offsetHeight + 'px';\n\t                popupNav.classList.add(CLS_TBARNAVACT);\n\t                popObj.show({ name: 'SlideDown', duration: 100 });\n\t            }\n\t        };\n\t        Toolbar.prototype.render = function () {\n\t            this.initialize();\n\t            this.renderControl();\n\t            this.wireEvents();\n\t        };\n\t        Toolbar.prototype.initialize = function () {\n\t            var width = ej2_base_4.formatUnit(this.width);\n\t            var height = ej2_base_4.formatUnit(this.height);\n\t            if (ej2_base_5.Browser.info.name !== 'msie' || this.height !== 'auto') {\n\t                ej2_base_3.setStyleAttribute(this.element, { 'height': height });\n\t            }\n\t            ej2_base_3.setStyleAttribute(this.element, { 'width': width });\n\t            var ariaAttr = {\n\t                'role': 'toolbar', 'aria-disabled': 'false', 'aria-haspopup': 'false', 'aria-orientation': 'horizontal',\n\t            };\n\t            ej2_base_2.attributes(this.element, ariaAttr);\n\t        };\n\t        Toolbar.prototype.renderControl = function () {\n\t            this.trgtEle = (this.element.children.length > 0) ? this.element.querySelector('div') : null;\n\t            this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n\t            this.renderItems();\n\t            this.renderOverflowMode();\n\t            if (this.tbarAlign) {\n\t                this.itemPositioning();\n\t            }\n\t        };\n\t        Toolbar.prototype.initHScroll = function (element, innerItems) {\n\t            if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n\t                if (this.tbarAlign) {\n\t                    this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n\t                }\n\t                this.scrollModule = new h_scroll_1.HScroll({ scrollStep: 50, enableRtl: this.enableRtl }, innerItems[0]);\n\t                this.remove(this.scrollModule.element, CLS_TBARPOS);\n\t                ej2_base_3.setStyleAttribute(this.element, { overflow: 'hidden' });\n\t            }\n\t        };\n\t        Toolbar.prototype.itemWidthCal = function (items) {\n\t            var width = 0;\n\t            [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEM), items).forEach(function (el) {\n\t                width += el.offsetWidth;\n\t            });\n\t            return width;\n\t        };\n\t        Toolbar.prototype.checkOverflow = function (element, innerItem) {\n\t            if (ej2_base_4.isNullOrUndefined(element) || ej2_base_4.isNullOrUndefined(innerItem)) {\n\t                return false;\n\t            }\n\t            var eleWidth = element.offsetWidth;\n\t            var itemWidth;\n\t            if (this.tbarAlign || this.scrollModule) {\n\t                itemWidth = this.itemWidthCal(this.scrollModule ? innerItem.querySelector('.e-hscroll-content') : innerItem);\n\t            }\n\t            else {\n\t                itemWidth = innerItem.offsetWidth;\n\t            }\n\t            var popNav = element.querySelector('.' + CLS_TBARNAV);\n\t            var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n\t            if (itemWidth > eleWidth - (popNav ? popNav.offsetWidth : (scrollNav ? scrollNav.offsetWidth * 2 : 0))) {\n\t                return true;\n\t            }\n\t            else {\n\t                return false;\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshOverflow = function () {\n\t            this.resize();\n\t        };\n\t        Toolbar.prototype.renderOverflowMode = function () {\n\t            var ele = this.element;\n\t            var innerItems = ele.querySelector('.' + CLS_ITEMS);\n\t            if (ele && ele.children.length > 0) {\n\t                this.offsetWid = ele.offsetWidth;\n\t                switch (this.overflowMode) {\n\t                    case 'Scrollable':\n\t                        this.destroyHScroll();\n\t                        this.initHScroll(ele, ele.getElementsByClassName(CLS_ITEMS));\n\t                        break;\n\t                    case 'Popup':\n\t                        this.add(this.element, 'e-toolpop');\n\t                        if (this.tbarAlign) {\n\t                            this.removePositioning();\n\t                        }\n\t                        if (this.checkOverflow(ele, innerItems)) {\n\t                            this.createPopupEle(ele, [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n\t                            this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n\t                        }\n\t                        if (this.tbarAlign) {\n\t                            this.add(innerItems, CLS_TBARPOS);\n\t                            this.itemPositioning();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n\t            var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            if (!innerNav) {\n\t                this.createPopupIcon(ele);\n\t            }\n\t            innerNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            var eleWidth = (ele.offsetWidth - (innerNav.offsetWidth));\n\t            this.element.classList.remove('e-rtl');\n\t            this.checkPriority(ele, innerEle, eleWidth, true);\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            this.createPopup();\n\t        };\n\t        Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight) {\n\t            var element = tbarObj.element;\n\t            var nodes = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, ele);\n\t            var nodeIndex = 0;\n\t            var poppedEle = [].slice.call(ej2_base_3.selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n\t            var nodePri = 0;\n\t            poppedEle.forEach(function (el, index) {\n\t                nodes = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, ele);\n\t                if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n\t                    if (tbarObj.tbResize && nodes.length > index) {\n\t                        ele.insertBefore(el, nodes[index]);\n\t                        ++nodePri;\n\t                    }\n\t                    else {\n\t                        ele.insertBefore(el, ele.children[nodes.length]);\n\t                        ++nodePri;\n\t                    }\n\t                }\n\t                else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n\t                    ele.insertBefore(el, ele.firstChild);\n\t                    ++nodePri;\n\t                }\n\t                else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n\t                    ele.insertBefore(el, ele.firstChild);\n\t                    ++nodePri;\n\t                }\n\t                else if (el.classList.contains(CLS_POPOVERFLOW)) {\n\t                    popupPri.push(el);\n\t                }\n\t                else if (tbarObj.tbResize) {\n\t                    ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n\t                    ++nodeIndex;\n\t                }\n\t                else {\n\t                    ele.appendChild(el);\n\t                }\n\t                ej2_base_3.setStyleAttribute(el, { display: '', height: eleHeight + 'px' });\n\t            });\n\t            popupPri.forEach(function (el) {\n\t                ele.appendChild(el);\n\t            });\n\t            var tbarEle = ej2_base_3.selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n\t            for (var i = tbarEle.length - 1; i >= 0; i--) {\n\t                var tbarElement = tbarEle[i];\n\t                if (tbarElement.classList.contains(CLS_SEPARATOR)) {\n\t                    ej2_base_3.setStyleAttribute(tbarElement, { display: 'none' });\n\t                }\n\t                else {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopup = function () {\n\t            var element = this.element;\n\t            var eleHeight;\n\t            var eleItem;\n\t            eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_POPUP + ' )');\n\t            eleHeight = (element.style.height === 'auto' || element.style.height === '') ? null : eleItem.offsetHeight;\n\t            var ele;\n\t            var popupPri = [];\n\t            if (element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS)) {\n\t                ele = element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS);\n\t            }\n\t            else {\n\t                ele = ej2_base_3.createElement('div', { id: element.id + '_popup', className: CLS_POPUPCLASS });\n\t            }\n\t            this.pushingPoppedEle(this, popupPri, ele, eleHeight);\n\t            this.popupInit(element, ele);\n\t        };\n\t        Toolbar.prototype.popupInit = function (element, ele) {\n\t            if (!this.popObj) {\n\t                element.appendChild(ele);\n\t                ej2_base_3.setStyleAttribute(this.element, { overflow: '' });\n\t                var popup = new ej2_popups_1.Popup(null, {\n\t                    relateTo: this.element,\n\t                    offsetY: (element.offsetHeight),\n\t                    enableRtl: this.enableRtl,\n\t                    open: this.popupOpen.bind(this),\n\t                    close: this.popupClose,\n\t                    position: this.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }\n\t                });\n\t                popup.appendTo(ele);\n\t                ej2_base_1.EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n\t                ej2_base_1.EventHandler.add(document, 'click ', this.docEvent.bind(this));\n\t                popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n\t                popup.hide();\n\t                this.popObj = popup;\n\t                this.element.setAttribute('aria-haspopup', 'true');\n\t            }\n\t            else {\n\t                var popupEle = this.popObj.element;\n\t                ej2_base_3.setStyleAttribute(popupEle, { maxHeight: '', display: 'block' });\n\t                ej2_base_3.setStyleAttribute(popupEle, { maxHeight: popupEle.offsetHeight + 'px', display: '' });\n\t            }\n\t        };\n\t        Toolbar.prototype.popupOpen = function (e) {\n\t            var popObj = this.popObj;\n\t            var popupEle = this.popObj.element;\n\t            var toolEle = this.popObj.element.parentElement;\n\t            var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n\t            ej2_base_3.setStyleAttribute(popObj.element, { height: 'auto', maxHeight: '' });\n\t            popObj.element.style.maxHeight = popObj.element.clientHeight + 'px';\n\t            var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + ej2_popups_2.calculatePosition(toolEle).top;\n\t            var popIcon = popupNav.firstElementChild;\n\t            popupNav.classList.add(CLS_TBARNAVACT);\n\t            ej2_base_2.classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n\t            var scrollVal = ej2_base_4.isNullOrUndefined(window.scrollY) ? 0 : window.scrollY;\n\t            if ((window.innerHeight + scrollVal) < popupElePos) {\n\t                var overflowHeight = (popupEle.offsetHeight - ((popupElePos - window.innerHeight - scrollVal) + 5));\n\t                popObj.height = overflowHeight + 'px';\n\t                ej2_base_3.setStyleAttribute(popObj.element, { maxHeight: overflowHeight + 'px' });\n\t            }\n\t        };\n\t        Toolbar.prototype.popupClose = function (e) {\n\t            var element = this.element.parentElement;\n\t            var popupNav = element.querySelector('.' + CLS_TBARNAV);\n\t            var popIcon = popupNav.firstElementChild;\n\t            popupNav.classList.remove(CLS_TBARNAVACT);\n\t            ej2_base_2.classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n\t        };\n\t        Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n\t            var len = inEle.length;\n\t            var eleWid = eleWidth;\n\t            var sepCheck = 0;\n\t            var itemCount = 0;\n\t            var itemPopCount = 0;\n\t            var checkClass = function (ele, val) {\n\t                var rVal = false;\n\t                val.forEach(function (cls) {\n\t                    if (ele.classList.contains(cls)) {\n\t                        rVal = true;\n\t                    }\n\t                });\n\t                return rVal;\n\t            };\n\t            for (var i = len - 1; i >= 0; i--) {\n\t                var mrgn = parseFloat((window.getComputedStyle(inEle[i])).marginRight);\n\t                mrgn += parseFloat((window.getComputedStyle(inEle[i])).marginLeft);\n\t                if (inEle[i] === this.tbarEle[0]) {\n\t                    this.tbarEleMrgn = mrgn;\n\t                }\n\t                if ((inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn) > eleWidth) {\n\t                    if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n\t                        if (sepCheck > 0 && itemCount === itemPopCount) {\n\t                            var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n\t                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n\t                                ej2_base_3.setStyleAttribute(sepEle, { display: 'none' });\n\t                            }\n\t                        }\n\t                        sepCheck++;\n\t                        itemCount = 0;\n\t                        itemPopCount = 0;\n\t                    }\n\t                    else {\n\t                        itemCount++;\n\t                    }\n\t                    if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n\t                        eleWidth -= (inEle[i].offsetWidth + (mrgn));\n\t                    }\n\t                    else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n\t                        inEle[i].classList.add(CLS_POPUP);\n\t                        ej2_base_3.setStyleAttribute(inEle[i], { display: 'none', minWidth: inEle[i].offsetWidth + 'px' });\n\t                        itemPopCount++;\n\t                    }\n\t                    else {\n\t                        eleWidth -= (inEle[i].offsetWidth + (mrgn));\n\t                    }\n\t                }\n\t            }\n\t            if (pre) {\n\t                var popedEle = ej2_base_3.selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n\t                this.checkPriority(ele, popedEle, eleWid, false);\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopupIcon = function (element) {\n\t            var id = element.id.concat('_nav');\n\t            var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n\t            var nav = ej2_base_3.createElement('div', { id: id, className: className });\n\t            if (ej2_base_5.Browser.info.name === 'msie' || ej2_base_5.Browser.info.name === 'edge') {\n\t                nav.classList.add('e-ie-align');\n\t            }\n\t            var navItem = ej2_base_3.createElement('div', { className: CLS_POPUPDOWN + ' e-icons' });\n\t            nav.appendChild(navItem);\n\t            nav.setAttribute('tabindex', '0');\n\t            element.appendChild(nav);\n\t        };\n\t        Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n\t            var ignoreCount = ig;\n\t            var popEle = this.popObj.element;\n\t            var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n\t            var priEleCnt = ej2_base_3.selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n\t            var checkClass = function (ele, val) {\n\t                return ele.classList.contains(val);\n\t            };\n\t            if (ej2_base_3.selectAll(query, inEle).length === 0) {\n\t                var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n\t                var ignoreCheck = (!ej2_base_4.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_TBARIGNORE));\n\t                if ((!ej2_base_4.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !ej2_base_2.isVisible(eleSep)) || ignoreCheck) {\n\t                    var sepDisplay = 'none';\n\t                    eleSep.style.display = 'inherit';\n\t                    var eleSepWidth = eleSep.offsetWidth + (parseFloat(window.getComputedStyle(eleSep).marginRight) * 2);\n\t                    var prevSep = eleSep.previousElementSibling;\n\t                    if ((elWid + eleSepWidth) < wid || des) {\n\t                        inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n\t                        if (!ej2_base_4.isNullOrUndefined(prevSep)) {\n\t                            prevSep.style.display = '';\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (prevSep.classList.contains(CLS_SEPARATOR)) {\n\t                            prevSep.style.display = sepDisplay;\n\t                        }\n\t                    }\n\t                    eleSep.style.display = '';\n\t                }\n\t                else {\n\t                    inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n\t                }\n\t            }\n\t            else {\n\t                inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - priEleCnt]);\n\t            }\n\t        };\n\t        Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n\t            var ele = this.element;\n\t            var popNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            var innerEle = ele.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(popNav)) {\n\t                return;\n\t            }\n\t            innerEle.removeAttribute('style');\n\t            popupEle.style.display = 'block';\n\t            var width = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n\t            this.popupEleRefresh(width, popupEle, destroy);\n\t            popupEle.style.display = '';\n\t            if (popupEle.children.length === 0) {\n\t                ej2_base_2.detach(popNav);\n\t                this.popObj.destroy();\n\t                ej2_base_2.detach(this.popObj.element);\n\t                this.popObj = null;\n\t                ele.setAttribute('aria-haspopup', 'false');\n\t                ele.classList.remove('e-toolpop');\n\t            }\n\t        };\n\t        Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n\t            var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n\t            var ignoreInx = [];\n\t            var count = 0;\n\t            if (ignoreEle.length > 0) {\n\t                ignoreEle.forEach(function (ele) {\n\t                    ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n\t                });\n\t            }\n\t            else {\n\t                return 0;\n\t            }\n\t            ignoreInx.forEach(function (val) {\n\t                if (val <= index) {\n\t                    count++;\n\t                }\n\t            });\n\t            return count;\n\t        };\n\t        Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n\t            var eleSplice = this.tbarEle;\n\t            var priEleCnt;\n\t            var index;\n\t            var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n\t            var ignoreCount = 0;\n\t            var _loop_1 = function (el) {\n\t                el.style.position = 'absolute';\n\t                var elWidth = el.offsetWidth;\n\t                var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n\t                if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n\t                    var btn = el.children[0];\n\t                    if (!ej2_base_4.isNullOrUndefined(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n\t                        btnText.style.display = 'none';\n\t                    }\n\t                    else if (!ej2_base_4.isNullOrUndefined(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n\t                        btnText.style.display = 'block';\n\t                    }\n\t                    btn.style.minWidth = '0%';\n\t                    elWidth = el.offsetWidth;\n\t                    btn.style.minWidth = '';\n\t                    if (!ej2_base_4.isNullOrUndefined(btnText)) {\n\t                        btnText.style.display = '';\n\t                    }\n\t                }\n\t                if (el === this_1.tbarEle[0]) {\n\t                    elWidth += this_1.tbarEleMrgn;\n\t                }\n\t                el.style.position = '';\n\t                if (elWidth < width || destroy) {\n\t                    el.style.minWidth = '';\n\t                    if (!el.classList.contains(CLS_POPOVERFLOW)) {\n\t                        el.classList.remove(CLS_POPUP);\n\t                    }\n\t                    index = this_1.tbarEle.indexOf(el);\n\t                    if (this_1.tbarAlign) {\n\t                        var pos = this_1.items[index].align;\n\t                        index = this_1.tbarAlgEle[(pos + 's')].indexOf(el);\n\t                        eleSplice = this_1.tbarAlgEle[(pos + 's')];\n\t                        innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos);\n\t                    }\n\t                    var sepBeforePri_1 = 0;\n\t                    eleSplice.slice(0, index).forEach(function (el) {\n\t                        if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n\t                            if (el.classList.contains(CLS_SEPARATOR)) {\n\t                                el.style.display = '';\n\t                                width -= el.offsetWidth;\n\t                            }\n\t                            sepBeforePri_1++;\n\t                        }\n\t                    });\n\t                    ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n\t                    if (el.classList.contains(CLS_TBAROVERFLOW)) {\n\t                        this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    else if (index === 0) {\n\t                        innerEle.insertBefore(el, innerEle.firstChild);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    else {\n\t                        priEleCnt = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n\t                        innerEle.insertBefore(el, innerEle.children[(index + ignoreCount) - priEleCnt]);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    el.style.height = '';\n\t                }\n\t                else {\n\t                    return \"break\";\n\t                }\n\t            };\n\t            var this_1 = this;\n\t            for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n\t                var el = _a[_i];\n\t                var state_1 = _loop_1(el);\n\t                if (state_1 === \"break\")\n\t                    break;\n\t            }\n\t        };\n\t        Toolbar.prototype.removePositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n\t                return;\n\t            }\n\t            this.remove(item, CLS_TBARPOS);\n\t            var innerItem = [].slice.call(item.childNodes);\n\t            innerItem[1].removeAttribute('style');\n\t            innerItem[2].removeAttribute('style');\n\t        };\n\t        Toolbar.prototype.refreshPositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            this.add(item, CLS_TBARPOS);\n\t            this.itemPositioning();\n\t        };\n\t        Toolbar.prototype.itemPositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n\t                return;\n\t            }\n\t            var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n\t            var innerItem;\n\t            if (this.scrollModule) {\n\t                innerItem = [].slice.call(item.querySelector('.' + CLS_TBARSCROLL).children);\n\t            }\n\t            else {\n\t                innerItem = [].slice.call(item.childNodes);\n\t            }\n\t            var margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n\t            var tbarWid = this.element.offsetWidth;\n\t            if (popupNav) {\n\t                tbarWid -= popupNav.offsetWidth;\n\t                innerItem[2].style.right = popupNav.offsetWidth + 'px';\n\t            }\n\t            if (tbarWid <= margin) {\n\t                return;\n\t            }\n\t            var value = (((tbarWid - margin)) - innerItem[1].offsetWidth) / 2;\n\t            innerItem[1].removeAttribute('style');\n\t            var mrgn = (innerItem[0].offsetWidth + value) + 'px';\n\t            this.enableRtl ? innerItem[1].style.marginRight = mrgn : innerItem[1].style.marginLeft = mrgn;\n\t        };\n\t        Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n\t            var _this = this;\n\t            var alignDiv = [];\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARLEFT }));\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARCENTER }));\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARRIGHT }));\n\t            if (pos === 0 && item.align !== 'left') {\n\t                alignDiv.forEach(function (ele) {\n\t                    itemEle.appendChild(ele);\n\t                });\n\t                this.tbarAlign = true;\n\t                this.add(itemEle, CLS_TBARPOS);\n\t            }\n\t            else if (item.align !== 'left') {\n\t                var alignEle = itemEle.childNodes;\n\t                var leftAlign_1 = alignDiv[0];\n\t                [].slice.call(alignEle).forEach(function (el) {\n\t                    _this.tbarAlgEle.lefts.push(el);\n\t                    leftAlign_1.appendChild(el);\n\t                });\n\t                itemEle.appendChild(leftAlign_1);\n\t                itemEle.appendChild(alignDiv[1]);\n\t                itemEle.appendChild(alignDiv[2]);\n\t                this.tbarAlign = true;\n\t                this.add(itemEle, CLS_TBARPOS);\n\t            }\n\t        };\n\t        Toolbar.prototype.ctrlTemplate = function () {\n\t            var _this = this;\n\t            this.ctrlTem = this.trgtEle.cloneNode(true);\n\t            this.add(this.trgtEle, CLS_ITEMS);\n\t            this.tbarEle = [];\n\t            var innerEle = [].slice.call(this.trgtEle.children);\n\t            innerEle.forEach(function (ele) {\n\t                if (ele.tagName === 'DIV') {\n\t                    _this.tbarEle.push(ele);\n\t                    ele.setAttribute('aria-disabled', 'false');\n\t                    _this.add(ele, CLS_ITEM);\n\t                }\n\t            });\n\t        };\n\t        Toolbar.prototype.renderItems = function () {\n\t            var ele = this.element;\n\t            var itemEleDom;\n\t            var innerItem;\n\t            var innerPos;\n\t            var items = this.items;\n\t            if (ele && ele.children.length > 0) {\n\t                itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n\t            }\n\t            if (this.trgtEle != null) {\n\t                this.ctrlTemplate();\n\t            }\n\t            else if (ele && items.length > 0) {\n\t                if (!itemEleDom) {\n\t                    itemEleDom = ej2_base_3.createElement('div', { className: CLS_ITEMS });\n\t                }\n\t                for (var i = 0; i < items.length; i++) {\n\t                    innerItem = this.renderSubComponent(items[i]);\n\t                    if (this.tbarEle.indexOf(innerItem) === -1) {\n\t                        this.tbarEle.push(innerItem);\n\t                    }\n\t                    if (!this.tbarAlign) {\n\t                        this.tbarItemAlign(items[i], itemEleDom, i);\n\t                    }\n\t                    innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n\t                    if (innerPos) {\n\t                        this.tbarAlgEle[(items[i].align + 's')].push(innerItem);\n\t                        innerPos.appendChild(innerItem);\n\t                    }\n\t                    else {\n\t                        itemEleDom.appendChild(innerItem);\n\t                    }\n\t                }\n\t                ele.appendChild(itemEleDom);\n\t            }\n\t        };\n\t        Toolbar.prototype.setAttr = function (attr, element) {\n\t            var key = Object.keys(attr);\n\t            var keyVal;\n\t            for (var i = 0; i < key.length; i++) {\n\t                keyVal = key[i];\n\t                keyVal === 'class' ? this.add(element, attr[keyVal]) : element.setAttribute(keyVal, attr[keyVal]);\n\t            }\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            var elements = items;\n\t            var len = elements.length;\n\t            if (ej2_base_4.isNullOrUndefined(isEnable)) {\n\t                isEnable = true;\n\t            }\n\t            var enable = function (isEnable, ele) {\n\t                if (isEnable) {\n\t                    ele.classList.remove(CLS_DISABLE);\n\t                    ele.setAttribute('aria-disabled', 'false');\n\t                }\n\t                else {\n\t                    ele.classList.add(CLS_DISABLE);\n\t                    ele.setAttribute('aria-disabled', 'true');\n\t                }\n\t            };\n\t            if (len && len > 1) {\n\t                for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n\t                    var ele = _a[_i];\n\t                    enable(isEnable, ele);\n\t                }\n\t                isEnable ? ej2_base_2.removeClass(elements, CLS_DISABLE) : ej2_base_2.addClass(elements, CLS_DISABLE);\n\t            }\n\t            else {\n\t                var ele = void 0;\n\t                ele = (len && len === 1) ? elements[0] : items;\n\t                enable(isEnable, ele);\n\t            }\n\t        };\n\t        Toolbar.prototype.addItems = function (items, index) {\n\t            var innerItems;\n\t            var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n\t            var innerEle;\n\t            var itemAgn = 'left';\n\t            if (ej2_base_4.isNullOrUndefined(index)) {\n\t                index = 0;\n\t            }\n\t            items.forEach(function (e) {\n\t                if (!ej2_base_4.isNullOrUndefined(e.align) && e.align !== 'left' && itemAgn === 'left') {\n\t                    itemAgn = e.align;\n\t                }\n\t            });\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                if (ej2_base_4.isNullOrUndefined(item.type)) {\n\t                    item.type = 'Button';\n\t                }\n\t                innerItems = ej2_base_3.selectAll('.' + CLS_ITEM, this.element);\n\t                item.align = itemAgn;\n\t                innerEle = this.renderSubComponent(item);\n\t                if (this.tbarEle.length >= index && innerItems.length > 0) {\n\t                    this.destroyMode();\n\t                    if (this.tbarAlign) {\n\t                        var algIndex = item.align[0] === 'l' ? 0 : item.align[0] === 'c' ? 1 : 2;\n\t                        var ele = void 0;\n\t                        ele = ej2_base_2.closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n\t                        ele.insertBefore(innerEle, ele.children[index]);\n\t                        this.tbarAlgEle[(item.align + 's')].splice(index, 0, innerEle);\n\t                        this.refreshPositioning();\n\t                    }\n\t                    else {\n\t                        innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n\t                    }\n\t                    this.items.splice(index, 0, item);\n\t                    this.tbarEle.splice(index, 0, innerEle);\n\t                    index++;\n\t                    this.offsetWid = itemsDiv.offsetWidth;\n\t                }\n\t            }\n\t            itemsDiv.style.width = '';\n\t            this.renderOverflowMode();\n\t        };\n\t        Toolbar.prototype.removeItems = function (args) {\n\t            var elements = args;\n\t            var index;\n\t            var innerItems = [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEM, this.element));\n\t            if (typeof (elements) === 'number') {\n\t                index = parseInt(args.toString(), 10);\n\t                this.removeItemByIndex(index, innerItems);\n\t            }\n\t            else {\n\t                if (elements && elements.length > 1) {\n\t                    for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n\t                        var ele = _a[_i];\n\t                        index = this.tbarEle.indexOf(ele);\n\t                        this.removeItemByIndex(index, innerItems);\n\t                        innerItems = ej2_base_3.selectAll('.' + CLS_ITEM, this.element);\n\t                    }\n\t                }\n\t                else {\n\t                    var ele = (elements && elements.length && elements.length === 1) ? elements[0] : args;\n\t                    index = innerItems.indexOf(ele);\n\t                    this.removeItemByIndex(index, innerItems);\n\t                }\n\t            }\n\t            this.resize();\n\t        };\n\t        Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n\t            if (this.tbarEle[index] && innerItems[index]) {\n\t                var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n\t                if (this.tbarAlign) {\n\t                    var indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's')].indexOf(this.tbarEle[eleIdx]);\n\t                    this.tbarAlgEle[(this.items[eleIdx].align + 's')].splice(indexAgn, 1);\n\t                }\n\t                ej2_base_2.detach(innerItems[index]);\n\t                this.items.splice(eleIdx, 1);\n\t                this.tbarEle.splice(eleIdx, 1);\n\t            }\n\t        };\n\t        Toolbar.prototype.templateRender = function (templateProp, innerEle, item) {\n\t            var itemType = item.type;\n\t            var eleObj = templateProp;\n\t            var isComponent;\n\t            if (typeof (templateProp) === 'object') {\n\t                isComponent = typeof (eleObj.appendTo) === 'function';\n\t            }\n\t            if (typeof (templateProp) === 'string' || !isComponent) {\n\t                var templateFn = void 0;\n\t                var val = templateProp;\n\t                val = (typeof (templateProp) === 'string') ? templateProp.trim() : templateProp;\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(val).length) {\n\t                        var ele = document.querySelector(val);\n\t                        templateFn = ej2_base_4.compile(ele.outerHTML.trim());\n\t                        ej2_base_2.detach(ele);\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    templateFn = ej2_base_4.compile(val);\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(templateFn) && templateFn().length > 0) {\n\t                    [].slice.call(templateFn()).forEach(function (ele) {\n\t                        if (!ej2_base_4.isNullOrUndefined(ele.tagName)) {\n\t                            ele.style.display = '';\n\t                        }\n\t                        innerEle.appendChild(ele);\n\t                    });\n\t                }\n\t            }\n\t            else if (itemType === 'Input') {\n\t                var ele = ej2_base_3.createElement('input');\n\t                item.id ? (ele.id = item.id) : (ele.id = ej2_base_4.getUniqueID('tbr-ipt'));\n\t                innerEle.appendChild(ele);\n\t                eleObj.appendTo(ele);\n\t            }\n\t            this.add(innerEle, CLS_TEMPLATE);\n\t            this.tbarEle.push(innerEle);\n\t        };\n\t        Toolbar.prototype.buttonRendering = function (item, innerEle) {\n\t            var dom = ej2_base_3.createElement('button', { className: CLS_TBARBTN });\n\t            var textStr = item.text;\n\t            var iconCss;\n\t            var iconPos;\n\t            item.id ? (dom.id = item.id) : dom.id = ej2_base_4.getUniqueID('e-tbr-btn');\n\t            var btnTxt = ej2_base_3.createElement('div', { className: 'e-tbar-btn-text' });\n\t            if (textStr) {\n\t                btnTxt.innerHTML = textStr;\n\t                dom.appendChild(btnTxt);\n\t                dom.classList.add('e-tbtn-txt');\n\t            }\n\t            else {\n\t                this.add(innerEle, 'e-tbtn-align');\n\t            }\n\t            if (item.prefixIcon || item.suffixIcon) {\n\t                if ((item.prefixIcon && item.suffixIcon) || item.prefixIcon) {\n\t                    iconCss = item.prefixIcon + ' e-icons';\n\t                    iconPos = 'left';\n\t                }\n\t                else {\n\t                    iconCss = item.suffixIcon + ' e-icons';\n\t                    iconPos = 'right';\n\t                }\n\t            }\n\t            new ej2_buttons_1.Button({ iconCss: iconCss, iconPosition: iconPos }, dom);\n\t            if (item.width) {\n\t                ej2_base_3.setStyleAttribute(dom, { 'width': ej2_base_4.formatUnit(item.width) });\n\t            }\n\t            return dom;\n\t        };\n\t        Toolbar.prototype.renderSubComponent = function (item) {\n\t            var innerEle;\n\t            var dom;\n\t            innerEle = ej2_base_3.createElement('div', { className: CLS_ITEM });\n\t            innerEle.setAttribute('aria-disabled', 'false');\n\t            if (!this.tbarEle) {\n\t                this.tbarEle = [];\n\t            }\n\t            if (item.htmlAttributes) {\n\t                this.setAttr(item.htmlAttributes, innerEle);\n\t            }\n\t            if (item.tooltipText) {\n\t                innerEle.setAttribute('title', item.tooltipText);\n\t            }\n\t            if (item.cssClass) {\n\t                innerEle.className = innerEle.className + ' ' + item.cssClass;\n\t            }\n\t            if (item.template) {\n\t                this.templateRender(item.template, innerEle, item);\n\t            }\n\t            else {\n\t                switch (item.type) {\n\t                    case 'Button':\n\t                        dom = this.buttonRendering(item, innerEle);\n\t                        dom.setAttribute('tabindex', '-1');\n\t                        innerEle.appendChild(dom);\n\t                        innerEle.addEventListener('click', this.itemClick.bind(this));\n\t                        break;\n\t                    case 'Separator':\n\t                        this.add(innerEle, CLS_SEPARATOR);\n\t                        break;\n\t                }\n\t            }\n\t            if (item.showTextOn) {\n\t                var sTxt = item.showTextOn;\n\t                if (sTxt === 'Toolbar') {\n\t                    this.add(innerEle, CLS_POPUPTEXT);\n\t                    this.add(innerEle, 'e-tbtn-align');\n\t                }\n\t                else if (sTxt === 'Overflow') {\n\t                    this.add(innerEle, CLS_TBARTEXT);\n\t                }\n\t            }\n\t            if (item.overflow) {\n\t                var overflow = item.overflow;\n\t                if (overflow === 'Show') {\n\t                    this.add(innerEle, CLS_TBAROVERFLOW);\n\t                }\n\t                else if (overflow === 'Hide') {\n\t                    if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n\t                        this.add(innerEle, CLS_POPOVERFLOW);\n\t                    }\n\t                }\n\t            }\n\t            return innerEle;\n\t        };\n\t        Toolbar.prototype.itemClick = function (e) {\n\t            this.activeEleSwitch(e.currentTarget);\n\t        };\n\t        Toolbar.prototype.activeEleSwitch = function (ele) {\n\t            this.activeEleRemove(ele.firstElementChild);\n\t            this.activeEle.focus();\n\t        };\n\t        Toolbar.prototype.activeEleRemove = function (curEle) {\n\t            if (!ej2_base_4.isNullOrUndefined(this.activeEle)) {\n\t                this.activeEle.setAttribute('tabindex', '-1');\n\t            }\n\t            this.activeEle = curEle;\n\t            if (ej2_base_4.isNullOrUndefined(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n\t                curEle.removeAttribute('tabindex');\n\t            }\n\t            else {\n\t                this.activeEle.setAttribute('tabindex', '0');\n\t            }\n\t        };\n\t        Toolbar.prototype.getPersistData = function () {\n\t            return this.addOnPersist([]);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        Toolbar.prototype.resize = function () {\n\t            var ele = this.element;\n\t            this.tbResize = true;\n\t            if (this.tbarAlign) {\n\t                this.itemPositioning();\n\t            }\n\t            if (this.popObj) {\n\t                this.popObj.hide();\n\t            }\n\t            var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n\t            if (!checkOverflow) {\n\t                this.destroyHScroll();\n\t            }\n\t            if (checkOverflow && this.scrollModule && (this.offsetWid === ele.offsetWidth)) {\n\t                return;\n\t            }\n\t            if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n\t                this.renderOverflowMode();\n\t            }\n\t            if (this.popObj) {\n\t                if (this.tbarAlign) {\n\t                    this.removePositioning();\n\t                }\n\t                this.popupRefresh(this.popObj.element, false);\n\t                if (this.tbarAlign) {\n\t                    this.refreshPositioning();\n\t                }\n\t            }\n\t            this.offsetWid = ele.offsetWidth;\n\t            this.tbResize = false;\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var tEle = this.element;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'items':\n\t                        this.destroyMode();\n\t                        this.destroyItems();\n\t                        this.renderItems();\n\t                        this.renderOverflowMode();\n\t                        break;\n\t                    case 'width':\n\t                        var wid = tEle.offsetWidth;\n\t                        ej2_base_3.setStyleAttribute(tEle, { 'width': ej2_base_4.formatUnit(newProp.width) });\n\t                        this.renderOverflowMode();\n\t                        if (this.popObj && wid < tEle.offsetWidth) {\n\t                            this.popupRefresh(this.popObj.element, false);\n\t                        }\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_3.setStyleAttribute(this.element, { 'height': ej2_base_4.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'overflowMode':\n\t                        this.destroyMode();\n\t                        this.renderOverflowMode();\n\t                        if (this.enableRtl) {\n\t                            this.add(tEle, CLS_RTL);\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.add(tEle, CLS_RTL) : this.remove(tEle, CLS_RTL);\n\t                        if (!ej2_base_4.isNullOrUndefined(this.scrollModule)) {\n\t                            newProp.enableRtl ? this.add(this.scrollModule.element, CLS_RTL) : this.remove(this.scrollModule.element, CLS_RTL);\n\t                        }\n\t                        if (!ej2_base_4.isNullOrUndefined(this.popObj)) {\n\t                            newProp.enableRtl ? this.add(this.popObj.element, CLS_RTL) : this.remove(this.popObj.element, CLS_RTL);\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Toolbar;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Item)\n\t    ], Toolbar.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Toolbar.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Toolbar.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Scrollable')\n\t    ], Toolbar.prototype, \"overflowMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Toolbar.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"clicked\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"beforeCreate\", void 0);\n\t    Toolbar = __decorate([\n\t        ej2_base_5.NotifyPropertyChanges\n\t    ], Toolbar);\n\t    exports.Toolbar = Toolbar;\n\t    exports.toolbarBuilder = ej2_base_5.CreateBuilder(Toolbar);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAwODRkNzAxZGNmY2QzNzQ3Nzg3NiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2gtc2Nyb2xsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xiYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xiYXIvdG9vbGJhci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7aUVDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNSRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQSxFQUFDOzs7Ozs7O0FDUEQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFtRSx1Q0FBdUM7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQTZELDRCQUE0QjtBQUN6Riw4REFBNkQsNEJBQTRCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBLG9EQUFtRCx3QkFBd0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTJFLGdCQUFnQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCw4QkFBOEI7QUFDckY7QUFDQSw0REFBMkQsaUVBQWlFO0FBQzVIO0FBQ0EsMkRBQTBELGlEQUFpRDtBQUMzRztBQUNBLGdFQUErRCxnRUFBZ0U7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTBDLG1FQUFtRTtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELGdCQUFnQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztBQ3ZTRCxnRDs7Ozs7O2lFQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBLEVBQUM7Ozs7Ozs7QUNQRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFrQyxpQ0FBaUM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQWtDLGlDQUFpQztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDLG1DQUFtQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELGdCQUFnQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCxnREFBZ0Q7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQW9FLGtEQUFrRDtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7QUMzMUNELGdEOzs7Ozs7QUNBQSxnRCIsImZpbGUiOiJlajItbmF2aWdhdGlvbnMudW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGZhY3RvcnkocmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJdKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMDg0ZDcwMWRjZmNkMzc0Nzc4NzYiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbW1vbi9pbmRleFwiLCBcIi4vdG9vbGJhci9pbmRleFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGluZGV4XzEsIGluZGV4XzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGluZGV4XzEpO1xuICAgIF9fZXhwb3J0KGluZGV4XzIpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2gtc2Nyb2xsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaF9zY3JvbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoaF9zY3JvbGxfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDTFNfUk9PVCA9ICdlLWhzY3JvbGwnO1xuICAgIHZhciBDTFNfUlRMID0gJ2UtcnRsJztcbiAgICB2YXIgQ0xTX0RJU0FCTEUgPSAnZS1vdmVybGF5JztcbiAgICB2YXIgQ0xTX0hTQ1JPTExCQVIgPSAnZS1oc2Nyb2xsLWJhcic7XG4gICAgdmFyIENMU19IU0NST0xMQ09OID0gJ2UtaHNjcm9sbC1jb250ZW50JztcbiAgICB2YXIgQ0xTX05BVkFSUk9XID0gJ2UtbmF2LWFycm93JztcbiAgICB2YXIgQ0xTX05BVlJJR0hUQVJST1cgPSAnZS1uYXYtcmlnaHQtYXJyb3cnO1xuICAgIHZhciBDTFNfTkFWTEVGVEFSUk9XID0gJ2UtbmF2LWxlZnQtYXJyb3cnO1xuICAgIHZhciBDTFNfSFNDUk9MTE5BViA9ICdlLXNjcm9sbC1uYXYnO1xuICAgIHZhciBDTFNfSFNDUk9MTE5BVlJJR0hUID0gJ2Utc2Nyb2xsLXJpZ2h0LW5hdic7XG4gICAgdmFyIENMU19IU0NST0xMTkFWTEVGVCA9ICdlLXNjcm9sbC1sZWZ0LW5hdic7XG4gICAgdmFyIENMU19ERVZJQ0UgPSAnZS1zY3JvbGwtZGV2aWNlJztcbiAgICB2YXIgSFNjcm9sbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhIU2Nyb2xsLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIU2Nyb2xsKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYnJvd3NlciA9IGVqMl9iYXNlXzIuQnJvd3Nlci5pbmZvLm5hbWU7XG4gICAgICAgICAgICB0aGlzLmJyb3dzZXJDaGVjayA9IHRoaXMuYnJvd3NlciA9PT0gJ21vemlsbGEnO1xuICAgICAgICAgICAgdGhpcy5pc0RldmljZSA9IGVqMl9iYXNlXzIuQnJvd3Nlci5pc0RldmljZTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5pZUNoZWNrID0gdGhpcy5icm93c2VyID09PSAnZWRnZScgfHwgdGhpcy5icm93c2VyID09PSAnbXNpZSc7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmlkID09PSAnJykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBlajJfYmFzZV8xLmdldFVuaXF1ZUlEKCdoc2Nyb2xsJyk7XG4gICAgICAgICAgICAgICAgdGhpcy51bmlxdWVJZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMU19SVEwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlID0gbmV3IGVqMl9iYXNlXzEuVG91Y2godGhpcy5lbGVtZW50LCB7IHNjcm9sbDogdGhpcy50b3VjaEhhbmRsZXIuYmluZCh0aGlzKSB9KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTmF2SWNvbih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNjcm9sbEVsZSwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfREVWSUNFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxFbGUgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSFNDUk9MTENPTiB9KTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSFNDUk9MTEJBUiB9KTtcbiAgICAgICAgICAgIHNjcm9sbERpdi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlID0gW10uc2xpY2UuY2FsbChlbGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpbm5lckVsZV8xID0gaW5uZXJFbGU7IF9pIDwgaW5uZXJFbGVfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlXzEgPSBpbm5lckVsZV8xW19pXTtcbiAgICAgICAgICAgICAgICBzY3JvbGxFbGUuYXBwZW5kQ2hpbGQoZWxlXzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Nyb2xsRGl2LmFwcGVuZENoaWxkKHNjcm9sbEVsZSk7XG4gICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KTtcbiAgICAgICAgICAgIHNjcm9sbERpdi5zdHlsZS5vdmVyZmxvd1ggPSAnaGlkZGVuJztcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsRWxlID0gc2Nyb2xsRGl2O1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxJdGVtcyA9IHNjcm9sbEVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydzY3JvbGxTdGVwJ107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnaFNjcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZWxlLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19ST09UKTtcbiAgICAgICAgICAgIHZhciBuYXYgPSBlajJfYmFzZV8xLnNlbGVjdEFsbCgnIycgKyBlbGUuaWQgKyAnX25hdi5lLScgKyBlbGUuaWQgKyAnX25hdicpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IFtdLnNsaWNlLmNhbGwodGhpcy5zY3JvbGxJdGVtcy5jaGlsZHJlbik7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudW5pcXVlSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2godGhpcy5zY3JvbGxFbGUpO1xuICAgICAgICAgICAgaWYgKG5hdi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2gobmF2WzBdKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaChuYXZbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc2Nyb2xsRWxlLCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG51bGw7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuY3JlYXRlTmF2SWNvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBlbGVtZW50LmlkLmNvbmNhdCgnX25hdicpO1xuICAgICAgICAgICAgdmFyIGNsc1JpZ2h0ID0gJ2UtJyArIGVsZW1lbnQuaWQuY29uY2F0KCdfbmF2ICcgKyBDTFNfSFNDUk9MTE5BViArICcgJyArIENMU19IU0NST0xMTkFWUklHSFQpO1xuICAgICAgICAgICAgdmFyIG5hdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogaWQsIGNsYXNzTmFtZTogY2xzUmlnaHQgfSk7XG4gICAgICAgICAgICBuYXYuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICB2YXIgbmF2SXRlbSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19OQVZSSUdIVEFSUk9XICsgJyAnICsgQ0xTX05BVkFSUk9XICsgJyBlLWljb25zJyB9KTtcbiAgICAgICAgICAgIHZhciBjbHNMZWZ0ID0gJ2UtJyArIGVsZW1lbnQuaWQuY29uY2F0KCdfbmF2ICcgKyBDTFNfSFNDUk9MTE5BViArICcgJyArIENMU19IU0NST0xMTkFWTEVGVCk7XG4gICAgICAgICAgICB2YXIgbmF2RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiBpZCwgY2xhc3NOYW1lOiBjbHNMZWZ0ICsgJyAnICsgQ0xTX0RJU0FCTEUgfSk7XG4gICAgICAgICAgICBuYXZFbGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIHZhciBuYXZMZWZ0SXRlbSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19OQVZMRUZUQVJST1cgKyAnICcgKyBDTFNfTkFWQVJST1cgKyAnIGUtaWNvbnMnIH0pO1xuICAgICAgICAgICAgbmF2RWxlLmFwcGVuZENoaWxkKG5hdkxlZnRJdGVtKTtcbiAgICAgICAgICAgIG5hdi5hcHBlbmRDaGlsZChuYXZJdGVtKTtcbiAgICAgICAgICAgIG5hdi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobmF2KTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKG5hdkVsZSwgZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmllQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBuYXYuY2xhc3NMaXN0LmFkZCgnZS1pZS1hbGlnbicpO1xuICAgICAgICAgICAgICAgIG5hdkVsZS5jbGFzc0xpc3QuYWRkKCdlLWllLWFsaWduJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV2ZW50QmluZGluZyhbbmF2LCBuYXZFbGVdKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbWVvdXRGdW5fMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMua2V5VGltZW91dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVsZVNjcm9sbGluZygxMCwgZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dEZ1bl8xKCk7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUub25LZXlVcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgIT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5rZXlUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlUaW1lb3V0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMua2V5VGltZXIpO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5ldmVudEJpbmRpbmcgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgZWxlLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzEuVG91Y2goZWwsIHsgdGFwSG9sZDogX3RoaXMudGFiSG9sZEhhbmRsZXIuYmluZChfdGhpcyksIHRhcEhvbGRUaHJlc2hvbGQ6IDUwMCB9KTtcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgX3RoaXMub25LZXlQcmVzcy5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBfdGhpcy5vbktleVVwLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgX3RoaXMucmVwZWF0U2Nyb2xsLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIF90aGlzLnJlcGVhdFNjcm9sbC5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGVsLCAnY2xpY2snLCBfdGhpcy5jbGlja0V2ZW50SGFuZGxlciwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnJlcGVhdFNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lb3V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUudGFiSG9sZEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0cmd0ID0gZS5vcmlnaW5hbEV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIHRyZ3QgPSB0aGlzLmNvbnRhaW5zKHRyZ3QsIENMU19IU0NST0xMTkFWKSA/IHRyZ3QuZmlyc3RFbGVtZW50Q2hpbGQgOiB0cmd0O1xuICAgICAgICAgICAgdmFyIHNjcm9sbERpcyA9IDEwO1xuICAgICAgICAgICAgdmFyIHRpbWVvdXRGdW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlU2Nyb2xsaW5nKHNjcm9sbERpcywgdHJndCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aW1lb3V0RnVuKCk7XG4gICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGVsZSwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5lbGVTY3JvbGxpbmcgPSBmdW5jdGlvbiAoc2Nyb2xsRGlzLCB0cmd0KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuc2Nyb2xsRWxlO1xuICAgICAgICAgICAgdmFyIHJvb3RFbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gdHJndC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKENMU19IU0NST0xMTkFWKSkge1xuICAgICAgICAgICAgICAgIGNsYXNzTGlzdCA9IHRyZ3QucXVlcnlTZWxlY3RvcignLicgKyBDTFNfTkFWQVJST1cpLmNsYXNzTGlzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKHJvb3RFbGUsIENMU19SVEwpICYmIHRoaXMuYnJvd3NlckNoZWNrKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsRGlzID0gLXNjcm9sbERpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzY3JsTGVmdCA9IGVsZW1lbnQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGlmICgoIXRoaXMuY29udGFpbnMocm9vdEVsZSwgQ0xTX1JUTCkgfHwgdGhpcy5icm93c2VyQ2hlY2spIHx8IHRoaXMuaWVDaGVjaykge1xuICAgICAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoQ0xTX05BVlJJR0hUQVJST1cpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNjcmxMZWZ0ICsgc2Nyb2xsRGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gc2NybExlZnQgLSBzY3JvbGxEaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNsYXNzTGlzdC5jb250YWlucyhDTFNfTkFWTEVGVEFSUk9XKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBzY3JsTGVmdCArIHNjcm9sbERpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNjcmxMZWZ0IC0gc2Nyb2xsRGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuY2xpY2tFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbGVTY3JvbGxpbmcodGhpcy5zY3JvbGxTdGVwLCBlLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnRvdWNoSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5zY3JvbGxFbGU7XG4gICAgICAgICAgICB2YXIgZGlzdGFuY2U7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IGUuZGlzdGFuY2VYO1xuICAgICAgICAgICAgaWYgKCh0aGlzLmllQ2hlY2spICYmIHRoaXMuY29udGFpbnModGhpcy5lbGVtZW50LCBDTFNfUlRMKSkge1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gLWRpc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUuc2Nyb2xsRGlyZWN0aW9uID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgICAgICBlbGUuc2Nyb2xsTGVmdCA9IGVsZS5zY3JvbGxMZWZ0ICsgZGlzdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLnNjcm9sbERpcmVjdGlvbiA9PT0gJ1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIGVsZS5zY3JvbGxMZWZ0ID0gZWxlLnNjcm9sbExlZnQgLSBkaXN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuYXJyb3dEaXNhYmxpbmcgPSBmdW5jdGlvbiAoYWRkRGlzYWJsZSwgcmVtb3ZlRGlzYWJsZSkge1xuICAgICAgICAgICAgYWRkRGlzYWJsZS5jbGFzc0xpc3QuYWRkKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgIGFkZERpc2FibGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIGFkZERpc2FibGUucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICAgICAgcmVtb3ZlRGlzYWJsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgIHJlbW92ZURpc2FibGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICByZW1vdmVEaXNhYmxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgdGhpcy5yZXBlYXRTY3JvbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0YXJnZXQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgcm9vdEVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBuYXZMZWZ0RWxlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0hTQ1JPTExOQVZMRUZUKTtcbiAgICAgICAgICAgIHZhciBuYXZSaWdodEVsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IU0NST0xMTkFWUklHSFQpO1xuICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSB0YXJnZXQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGlmIChzY3JvbGxMZWZ0IDw9IDApIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxMZWZ0ID0gLXNjcm9sbExlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2Nyb2xsTGVmdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmICgoIXRoaXMuY29udGFpbnMocm9vdEVsZSwgQ0xTX1JUTCkgfHwgdGhpcy5icm93c2VyQ2hlY2spIHx8IHRoaXMuaWVDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93RGlzYWJsaW5nKG5hdkxlZnRFbGUsIG5hdlJpZ2h0RWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dEaXNhYmxpbmcobmF2UmlnaHRFbGUsIG5hdkxlZnRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKE1hdGguY2VpbCh3aWR0aCArIHNjcm9sbExlZnQgKyAuMSkgPj0gdGFyZ2V0LnNjcm9sbFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCghdGhpcy5jb250YWlucyhyb290RWxlLCBDTFNfUlRMKSB8fCB0aGlzLmJyb3dzZXJDaGVjaykgfHwgdGhpcy5pZUNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dEaXNhYmxpbmcobmF2UmlnaHRFbGUsIG5hdkxlZnRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJvd0Rpc2FibGluZyhuYXZMZWZ0RWxlLCBuYXZSaWdodEVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc0VsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlzRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc0VsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzRWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgICAgICBkaXNFbGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Njcm9sbFN0ZXAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wLmVuYWJsZVJ0bCA/IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMU19SVEwpIDogdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIU2Nyb2xsO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSg0MClcbiAgICBdLCBIU2Nyb2xsLnByb3RvdHlwZSwgXCJzY3JvbGxTdGVwXCIsIHZvaWQgMCk7XG4gICAgSFNjcm9sbCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIEhTY3JvbGwpO1xuICAgIGV4cG9ydHMuSFNjcm9sbCA9IEhTY3JvbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9oLXNjcm9sbC5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIlxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3Rvb2xiYXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB0b29sYmFyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHRvb2xiYXJfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3Rvb2xiYXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIi4uL2NvbW1vbi9oLXNjcm9sbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9wb3B1cHNfMSwgZWoyX3BvcHVwc18yLCBlajJfYnV0dG9uc18xLCBoX3Njcm9sbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDTFNfSVRFTVMgPSAnZS10b29sYmFyLWl0ZW1zJztcbiAgICB2YXIgQ0xTX0lURU0gPSAnZS10b29sYmFyLWl0ZW0nO1xuICAgIHZhciBDTFNfUlRMID0gJ2UtcnRsJztcbiAgICB2YXIgQ0xTX1NFUEFSQVRPUiA9ICdlLXNlcGFyYXRvcic7XG4gICAgdmFyIENMU19QT1BVUElDT04gPSAnZS1wb3B1cC11cC1pY29uJztcbiAgICB2YXIgQ0xTX1BPUFVQRE9XTiA9ICdlLXBvcHVwLWRvd24taWNvbic7XG4gICAgdmFyIENMU19URU1QTEFURSA9ICdlLXRlbXBsYXRlJztcbiAgICB2YXIgQ0xTX0RJU0FCTEUgPSAnZS1vdmVybGF5JztcbiAgICB2YXIgQ0xTX1BPUFVQVEVYVCA9ICdlLXRvb2xiYXItdGV4dCc7XG4gICAgdmFyIENMU19UQkFSVEVYVCA9ICdlLXBvcHVwLXRleHQnO1xuICAgIHZhciBDTFNfVEJBUk9WRVJGTE9XID0gJ2Utb3ZlcmZsb3ctc2hvdyc7XG4gICAgdmFyIENMU19QT1BPVkVSRkxPVyA9ICdlLW92ZXJmbG93LWhpZGUnO1xuICAgIHZhciBDTFNfVEJBUkJUTiA9ICdlLXRiYXItYnRuJztcbiAgICB2YXIgQ0xTX1RCQVJOQVYgPSAnZS1ob3ItbmF2JztcbiAgICB2YXIgQ0xTX1RCQVJTQ1JMTkFWID0gJ2Utc2Nyb2xsLW5hdic7XG4gICAgdmFyIENMU19UQkFSUklHSFQgPSAnZS10b29sYmFyLXJpZ2h0JztcbiAgICB2YXIgQ0xTX1RCQVJMRUZUID0gJ2UtdG9vbGJhci1sZWZ0JztcbiAgICB2YXIgQ0xTX1RCQVJDRU5URVIgPSAnZS10b29sYmFyLWNlbnRlcic7XG4gICAgdmFyIENMU19UQkFSUE9TID0gJ2UtdGJhci1wb3MnO1xuICAgIHZhciBDTFNfVEJBUlNDUk9MTCA9ICdlLWhzY3JvbGwtY29udGVudCc7XG4gICAgdmFyIENMU19QT1BVUE5BViA9ICdlLWhvci1uYXYnO1xuICAgIHZhciBDTFNfUE9QVVBDTEFTUyA9ICdlLXRvb2xiYXItcG9wJztcbiAgICB2YXIgQ0xTX1BPUFVQID0gJ2UtdG9vbGJhci1wb3B1cCc7XG4gICAgdmFyIENMU19UQkFSQlROVEVYVCA9ICdlLXRiYXItYnRuLXRleHQnO1xuICAgIHZhciBDTFNfVEJBUk5BVkFDVCA9ICdlLW5hdi1hY3RpdmUnO1xuICAgIHZhciBDTFNfVEJBUklHTk9SRSA9ICdlLWlnbm9yZSc7XG4gICAgdmFyIEl0ZW0gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSXRlbSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSXRlbSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSXRlbTtcbiAgICB9KGVqMl9iYXNlXzUuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwicHJlZml4SWNvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInN1ZmZpeEljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnTm9uZScpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwib3ZlcmZsb3dcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdCdXR0b24nKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQm90aCcpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwic2hvd1RleHRPblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwiaHRtbEF0dHJpYnV0ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJ0b29sdGlwVGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdsZWZ0JylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJhbGlnblwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuSXRlbSA9IEl0ZW07XG4gICAgdmFyIFRvb2xiYXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVG9vbGJhciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVG9vbGJhcihvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICBtb3ZlTGVmdDogJ2xlZnRhcnJvdycsXG4gICAgICAgICAgICAgICAgbW92ZVJpZ2h0OiAncmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgbW92ZVVwOiAndXBhcnJvdycsXG4gICAgICAgICAgICAgICAgbW92ZURvd246ICdkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHBvcHVwT3BlbjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBwb3B1cENsb3NlOiAnZXNjYXBlJyxcbiAgICAgICAgICAgICAgICB0YWI6ICd0YWInLFxuICAgICAgICAgICAgICAgIGhvbWU6ICdob21lJyxcbiAgICAgICAgICAgICAgICBlbmQ6ICdlbmQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB3aGlsZSAoZWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQ2hpbGQoZWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHJndEVsZSkge1xuICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZCh0aGlzLmN0cmxUZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclByb3BlcnR5KCk7XG4gICAgICAgICAgICB0aGlzLnBvcE9iaiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdlLXRvb2xwb3AnKTtcbiAgICAgICAgICAgIGVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICBbJ2FyaWEtZGlzYWJsZWQnLCAnYXJpYS1vcmllbnRhdGlvbicsICdhcmlhLWhhc3BvcHVwJywgJ3JvbGUnXS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyYikge1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZUNyZWF0ZScpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wb3BPYmogPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5lbGVtZW50LCBDTFNfUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMua2V5TW9kdWxlID0gbmV3IGVqMl9iYXNlXzIuS2V5Ym9hcmRFdmVudHModGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAga2V5QWN0aW9uOiB0aGlzLmtleUFjdGlvbkhhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBrZXlDb25maWdzOiB0aGlzLmtleUNvbmZpZ3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2tleWRvd24nLCB0aGlzLmRvY0tleURvd24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCAnMCcpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kb2NLZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDkgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhvci1uYXYnKSA9PT0gdHJ1ZSAmJiBlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmhpZGUoeyBuYW1lOiAnU2xpZGVVcCcsIGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGUua2V5Q29kZSA9PT0gNDAgfHwgZS5rZXlDb2RlID09PSAzOCkgJiYgIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wb3BPYmopICYmIGVqMl9iYXNlXzIuaXNWaXNpYmxlKHRoaXMucG9wT2JqLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lIU2Nyb2xsKCk7XG4gICAgICAgICAgICB0aGlzLmtleU1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLmRvY0V2ZW50KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgdGhpcy5kb2NLZXlEb3duKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5kb2NFdmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNsZWFyUHJvcGVydHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRiYXJFbGUgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudGJhckFsZ0VsZSA9IHsgbGVmdHM6IFtdLCBjZW50ZXJzOiBbXSwgcmlnaHRzOiBbXSB9O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kb2NFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcG9wRWxlID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtcG9wdXAnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaiAmJiBlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSAmJiAhcG9wRWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouaGlkZSh7IG5hbWU6ICdTbGlkZVVwJywgZHVyYXRpb246IDEwMCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZGVzdHJveUhTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5zY3JvbGxNb2R1bGUuZWxlbWVudCwgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIENMU19JVEVNKSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaChlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJQcm9wZXJ0eSgpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95TW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRoaXMuc2Nyb2xsTW9kdWxlLmVsZW1lbnQsIENMU19SVEwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUhTY3JvbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBSZWZyZXNoKHRoaXMucG9wT2JqLmVsZW1lbnQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZWxlLCB2YWwpIHtcbiAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKHZhbCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlbGUsIHZhbCkge1xuICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUodmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZWxlbWVudEZvY3VzID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIGZDaGlsZCA9IGVsZS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmIChmQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICBmQ2hpbGQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZVN3aXRjaChlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNsc3RFbGVtZW50ID0gZnVuY3Rpb24gKHRick5hdkNoaywgdHJndCkge1xuICAgICAgICAgICAgdmFyIGNsc3Q7XG4gICAgICAgICAgICBpZiAodGJyTmF2Q2hrICYmIHRoaXMucG9wT2JqICYmIGVqMl9iYXNlXzIuaXNWaXNpYmxlKHRoaXMucG9wT2JqLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgY2xzdCA9IHRoaXMucG9wT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmVsZW1lbnQgPT09IHRyZ3QgfHwgdGJyTmF2Q2hrKSB7XG4gICAgICAgICAgICAgICAgY2xzdCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsc3Q7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmtleUhhbmRsaW5nID0gZnVuY3Rpb24gKGNsc3QsIGUsIHRyZ3QsIG5hdkNoaywgc2Nyb2xsQ2hrKSB7XG4gICAgICAgICAgICB2YXIgcG9wT2JqID0gdGhpcy5wb3BPYmo7XG4gICAgICAgICAgICB2YXIgcm9vdEVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBwb3BBbmltYXRlID0geyBuYW1lOiAnU2xpZGVVcCcsIGR1cmF0aW9uOiAxMDAgfTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlUmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdEVsZSA9PT0gdHJndCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Rm9jdXMoY2xzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIW5hdkNoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhjbHN0LCAnbmV4dCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYXZDaGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoY2xzdCwgJ3ByZXZpb3VzJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwQ2hlY2sgPSBlajJfYmFzZV8yLmNsb3Nlc3QoY2xzdCwgJy5lLXBvcHVwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9wdXBDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlcyA9IHBvcHVwQ2hlY2suY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUgPSBub2Rlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZSA9IG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBDTFNfSVRFTVMgKyAnIC4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZSA9IG5vZGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlID0gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudEZvY3VzKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVVwJzpcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlRG93bic6XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGUuYWN0aW9uID09PSAnbW92ZVVwJyA/ICdwcmV2aW91cycgOiAnbmV4dCc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3BPYmogJiYgZWoyX2Jhc2VfMi5jbG9zZXN0KHRyZ3QsICcuZS1wb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9wRWxlID0gcG9wT2JqLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9wRnJzdEVsZSA9IHBvcEVsZS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgPT09ICdwcmV2aW91cycgJiYgcG9wRnJzdEVsZSA9PT0gY2xzdCkgfHwgKHZhbHVlID09PSAnbmV4dCcgJiYgcG9wRWxlLmxhc3RFbGVtZW50Q2hpbGQgPT09IGNsc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhjbHN0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdtb3ZlRG93bicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudEZvY3VzKGNsc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2Nyb2xsQ2hrICYmICFuYXZDaGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVfMSA9IGNsc3QuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm9vdEVsZSA9PT0gdHJndCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVSZW1vdmUoZWxlXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVfMS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BvcHVwQ2xvc2UnOlxuICAgICAgICAgICAgICAgICAgICBpZiAocG9wT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3BPYmouaGlkZShwb3BBbmltYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwb3B1cE9wZW4nOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5hdkNoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3BPYmogJiYgIWVqMl9iYXNlXzIuaXNWaXNpYmxlKHBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gcm9vdEVsZS5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wT2JqLnNob3coeyBuYW1lOiAnU2xpZGVEb3duJywgZHVyYXRpb246IDEwMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcE9iai5oaWRlKHBvcEFuaW1hdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5rZXlBY3Rpb25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBjbHN0O1xuICAgICAgICAgICAgdmFyIHRyZ3QgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciB0YnJOYXZDaGsgPSB0cmd0LmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgdGJhclNjcm9sbENoayA9IHRyZ3QuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSU0NSTE5BVik7XG4gICAgICAgICAgICBjbHN0ID0gdGhpcy5jbHN0RWxlbWVudCh0YnJOYXZDaGssIHRyZ3QpO1xuICAgICAgICAgICAgaWYgKGNsc3QgfHwgdGJhclNjcm9sbENoaykge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5SGFuZGxpbmcoY2xzdCwgZSwgdHJndCwgdGJyTmF2Q2hrLCB0YmFyU2Nyb2xsQ2hrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZWxlRm9jdXMgPSBmdW5jdGlvbiAoY2xvc2VzdCwgcG9zKSB7XG4gICAgICAgICAgICB2YXIgc2liID0gT2JqZWN0KGNsb3Nlc3QpW3BvcyArICdFbGVtZW50U2libGluZyddO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5zID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfU0VQQVJBVE9SKSB8fCBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0RJU0FCTEUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChzaWIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2tpcEVsZSA9IGNvbnRhaW5zKHNpYik7XG4gICAgICAgICAgICAgICAgaWYgKHNraXBFbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdChzaWIpW3BvcyArICdTaWJsaW5nJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpYiA9IE9iamVjdChzaWIpW3BvcyArICdTaWJsaW5nJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwRWxlID0gY29udGFpbnMoc2liKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhzaWIsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudEZvY3VzKHNpYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gT2JqZWN0KGNsb3Nlc3QucGFyZW50RWxlbWVudClbcG9zICsgJ0VsZW1lbnRTaWJsaW5nJ107XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW0pICYmIGVsZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID09PSAnbmV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbnMoZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhlbCwgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmZpcnN0RWxlbWVudENoaWxkLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVTd2l0Y2goZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbS5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5zKGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoZWwsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRGb2N1cyhlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdHJndCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNsc0xpc3QgPSB0cmd0LmNsYXNzTGlzdDtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcG9wdXBOYXYgPSBlajJfYmFzZV8yLmNsb3Nlc3QodHJndCwgKCcuJyArIENMU19UQkFSTkFWKSk7XG4gICAgICAgICAgICBpZiAoIXBvcHVwTmF2KSB7XG4gICAgICAgICAgICAgICAgcG9wdXBOYXYgPSB0cmd0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlbGUuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhzY3JvbGwnKSAmJiAoY2xzTGlzdC5jb250YWlucyhDTFNfVEJBUk5BVikpKSB7XG4gICAgICAgICAgICAgICAgY2xzTGlzdCA9IHRyZ3QucXVlcnlTZWxlY3RvcignLmUtaWNvbnMnKS5jbGFzc0xpc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2xzTGlzdC5jb250YWlucyhDTFNfUE9QVVBJQ09OKSB8fCBjbHNMaXN0LmNvbnRhaW5zKENMU19QT1BVUERPV04pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cENsaWNrSGFuZGxlcihlbGUsIHBvcHVwTmF2LCBDTFNfUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpdGVtT2JqO1xuICAgICAgICAgICAgdmFyIGNsc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIGlmICgoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChjbHN0KSB8fCBjbHN0LmNsYXNzTGlzdC5jb250YWlucyhDTFNfRElTQUJMRSkpICYmICFwb3B1cE5hdi5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJOQVYpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNsc3QpIHtcbiAgICAgICAgICAgICAgICBpdGVtT2JqID0gdGhpcy5pdGVtc1t0aGlzLnRiYXJFbGUuaW5kZXhPZihjbHN0KV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0geyBvcmlnaW5hbEV2ZW50OiBlLCBpdGVtOiBpdGVtT2JqIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NsaWNrZWQnLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGVsZSwgcG9wdXBOYXYsIENMU19SVEwpIHtcbiAgICAgICAgICAgIHZhciBwb3BPYmogPSB0aGlzLnBvcE9iajtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzVmlzaWJsZShwb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBwb3B1cE5hdi5jbGFzc0xpc3QucmVtb3ZlKENMU19UQkFSTkFWQUNUKTtcbiAgICAgICAgICAgICAgICBwb3BPYmouaGlkZSh7IG5hbWU6ICdTbGlkZVVwJywgZHVyYXRpb246IDEwMCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19SVEwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcE9iai5lbmFibGVSdGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBwb3BPYmoucG9zaXRpb24gPSB7IFg6ICdsZWZ0JywgWTogJ3RvcCcgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBvcE9iai5vZmZzZXRYID09PSAwICYmICFlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19SVEwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcE9iai5lbmFibGVSdGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcG9wT2JqLnBvc2l0aW9uID0geyBYOiAncmlnaHQnLCBZOiAndG9wJyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3BPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICBwb3BPYmouZWxlbWVudC5zdHlsZS50b3AgPSB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBwb3B1cE5hdi5jbGFzc0xpc3QuYWRkKENMU19UQkFSTkFWQUNUKTtcbiAgICAgICAgICAgICAgICBwb3BPYmouc2hvdyh7IG5hbWU6ICdTbGlkZURvd24nLCBkdXJhdGlvbjogMTAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udHJvbCgpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBlajJfYmFzZV80LmZvcm1hdFVuaXQodGhpcy53aWR0aCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWoyX2Jhc2VfNC5mb3JtYXRVbml0KHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV81LkJyb3dzZXIuaW5mby5uYW1lICE9PSAnbXNpZScgfHwgdGhpcy5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICdoZWlnaHQnOiBoZWlnaHQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyAnd2lkdGgnOiB3aWR0aCB9KTtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0ciA9IHtcbiAgICAgICAgICAgICAgICAncm9sZSc6ICd0b29sYmFyJywgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnLCAnYXJpYS1oYXNwb3B1cCc6ICdmYWxzZScsICdhcmlhLW9yaWVudGF0aW9uJzogJ2hvcml6b250YWwnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIGFyaWFBdHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudHJndEVsZSA9ICh0aGlzLmVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkgPyB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZGl2JykgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy50YmFyQWxnRWxlID0geyBsZWZ0czogW10sIGNlbnRlcnM6IFtdLCByaWdodHM6IFtdIH07XG4gICAgICAgICAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuaW5pdEhTY3JvbGwgPSBmdW5jdGlvbiAoZWxlbWVudCwgaW5uZXJJdGVtcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNjcm9sbE1vZHVsZSAmJiB0aGlzLmNoZWNrT3ZlcmZsb3coZWxlbWVudCwgaW5uZXJJdGVtc1swXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TICsgJyAuJyArIENMU19UQkFSQ0VOVEVSKS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gbmV3IGhfc2Nyb2xsXzEuSFNjcm9sbCh7IHNjcm9sbFN0ZXA6IDUwLCBlbmFibGVSdGw6IHRoaXMuZW5hYmxlUnRsIH0sIGlubmVySXRlbXNbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRoaXMuc2Nyb2xsTW9kdWxlLmVsZW1lbnQsIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyBvdmVyZmxvdzogJ2hpZGRlbicgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLml0ZW1XaWR0aENhbCA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcbiAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwoZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0pLCBpdGVtcykuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCArPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHdpZHRoO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jaGVja092ZXJmbG93ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGlubmVySXRlbSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWxlbWVudCkgfHwgZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpbm5lckl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVsZVdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciBpdGVtV2lkdGg7XG4gICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24gfHwgdGhpcy5zY3JvbGxNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICBpdGVtV2lkdGggPSB0aGlzLml0ZW1XaWR0aENhbCh0aGlzLnNjcm9sbE1vZHVsZSA/IGlubmVySXRlbS5xdWVyeVNlbGVjdG9yKCcuZS1oc2Nyb2xsLWNvbnRlbnQnKSA6IGlubmVySXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtV2lkdGggPSBpbm5lckl0ZW0ub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9wTmF2ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxOYXYgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJTQ1JMTkFWKTtcbiAgICAgICAgICAgIGlmIChpdGVtV2lkdGggPiBlbGVXaWR0aCAtIChwb3BOYXYgPyBwb3BOYXYub2Zmc2V0V2lkdGggOiAoc2Nyb2xsTmF2ID8gc2Nyb2xsTmF2Lm9mZnNldFdpZHRoICogMiA6IDApKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZWZyZXNoT3ZlcmZsb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW5kZXJPdmVyZmxvd01vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbXMgPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgaWYgKGVsZSAmJiBlbGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0V2lkID0gZWxlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5vdmVyZmxvd01vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU2Nyb2xsYWJsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lIU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRIU2Nyb2xsKGVsZSwgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ0xTX0lURU1TKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUG9wdXAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5lbGVtZW50LCAnZS10b29scG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja092ZXJmbG93KGVsZSwgaW5uZXJJdGVtcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBvcHVwRWxlKGVsZSwgW10uc2xpY2UuY2FsbChlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfSVRFTVMgKyAnIC4nICsgQ0xTX0lURU0sIGVsZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVikuc2V0QXR0cmlidXRlKCd0YWJJbmRleCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckl0ZW1zLCBDTFNfVEJBUlBPUyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY3JlYXRlUG9wdXBFbGUgPSBmdW5jdGlvbiAoZWxlLCBpbm5lckVsZSkge1xuICAgICAgICAgICAgdmFyIGlubmVyTmF2ID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgaWYgKCFpbm5lck5hdikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXBJY29uKGVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbm5lck5hdiA9IGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIHZhciBlbGVXaWR0aCA9IChlbGUub2Zmc2V0V2lkdGggLSAoaW5uZXJOYXYub2Zmc2V0V2lkdGgpKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJ0bCcpO1xuICAgICAgICAgICAgdGhpcy5jaGVja1ByaW9yaXR5KGVsZSwgaW5uZXJFbGUsIGVsZVdpZHRoLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cCgpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wdXNoaW5nUG9wcGVkRWxlID0gZnVuY3Rpb24gKHRiYXJPYmosIHBvcHVwUHJpLCBlbGUsIGVsZUhlaWdodCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0YmFyT2JqLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgbm9kZXMgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfVEJBUk9WRVJGTE9XLCBlbGUpO1xuICAgICAgICAgICAgdmFyIG5vZGVJbmRleCA9IDA7XG4gICAgICAgICAgICB2YXIgcG9wcGVkRWxlID0gW10uc2xpY2UuY2FsbChlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfUE9QVVAsIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpKSk7XG4gICAgICAgICAgICB2YXIgbm9kZVByaSA9IDA7XG4gICAgICAgICAgICBwb3BwZWRFbGUuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgbm9kZXMgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfVEJBUk9WRVJGTE9XLCBlbGUpO1xuICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJPVkVSRkxPVykgJiYgbm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGJhck9iai50YlJlc2l6ZSAmJiBub2Rlcy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShlbCwgbm9kZXNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrbm9kZVByaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoZWwsIGVsZS5jaGlsZHJlbltub2Rlcy5sZW5ndGhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrbm9kZVByaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJPVkVSRkxPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShlbCwgZWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICArK25vZGVQcmk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRiYXJPYmoudGJSZXNpemUgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19QT1BPVkVSRkxPVykgJiYgZWxlLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgbm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoZWwsIGVsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgKytub2RlUHJpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1BPUE9WRVJGTE9XKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3B1cFByaS5wdXNoKGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGJhck9iai50YlJlc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuaW5zZXJ0QmVmb3JlKGVsLCBlbGUuY2hpbGROb2Rlc1tub2RlSW5kZXggKyBub2RlUHJpXSk7XG4gICAgICAgICAgICAgICAgICAgICsrbm9kZUluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShlbCwgeyBkaXNwbGF5OiAnJywgaGVpZ2h0OiBlbGVIZWlnaHQgKyAncHgnIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwb3B1cFByaS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciB0YmFyRWxlID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0sIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0YmFyRWxlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRiYXJFbGVtZW50ID0gdGJhckVsZVtpXTtcbiAgICAgICAgICAgICAgICBpZiAodGJhckVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGJhckVsZW1lbnQsIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jcmVhdGVQb3B1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGVsZUhlaWdodDtcbiAgICAgICAgICAgIHZhciBlbGVJdGVtO1xuICAgICAgICAgICAgZWxlSXRlbSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTSArICc6bm90KC4nICsgQ0xTX1NFUEFSQVRPUiArICcgKTpub3QoLicgKyBDTFNfUE9QVVAgKyAnICknKTtcbiAgICAgICAgICAgIGVsZUhlaWdodCA9IChlbGVtZW50LnN0eWxlLmhlaWdodCA9PT0gJ2F1dG8nIHx8IGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID09PSAnJykgPyBudWxsIDogZWxlSXRlbS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB2YXIgZWxlO1xuICAgICAgICAgICAgdmFyIHBvcHVwUHJpID0gW107XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGVsZW1lbnQuaWQgKyAnX3BvcHVwLicgKyBDTFNfUE9QVVBDTEFTUykpIHtcbiAgICAgICAgICAgICAgICBlbGUgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZWxlbWVudC5pZCArICdfcG9wdXAuJyArIENMU19QT1BVUENMQVNTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogZWxlbWVudC5pZCArICdfcG9wdXAnLCBjbGFzc05hbWU6IENMU19QT1BVUENMQVNTIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wdXNoaW5nUG9wcGVkRWxlKHRoaXMsIHBvcHVwUHJpLCBlbGUsIGVsZUhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwSW5pdChlbGVtZW50LCBlbGUpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wb3B1cEluaXQgPSBmdW5jdGlvbiAoZWxlbWVudCwgZWxlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucG9wT2JqKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChlbGUpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7IG92ZXJmbG93OiAnJyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgcG9wdXAgPSBuZXcgZWoyX3BvcHVwc18xLlBvcHVwKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRlVG86IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WTogKGVsZW1lbnQub2Zmc2V0SGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICAgICAgb3BlbjogdGhpcy5wb3B1cE9wZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2U6IHRoaXMucG9wdXBDbG9zZSxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHRoaXMuZW5hYmxlUnRsID8geyBYOiAnbGVmdCcsIFk6ICd0b3AnIH0gOiB7IFg6ICdyaWdodCcsIFk6ICd0b3AnIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwb3B1cC5hcHBlbmRUbyhlbGUpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgJ3Njcm9sbCcsIHRoaXMuZG9jRXZlbnQuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCAnY2xpY2sgJywgdGhpcy5kb2NFdmVudC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICBwb3B1cC5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IHBvcHVwLmVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBwb3B1cC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmogPSBwb3B1cDtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhhc3BvcHVwJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwb3B1cEVsZSA9IHRoaXMucG9wT2JqLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShwb3B1cEVsZSwgeyBtYXhIZWlnaHQ6ICcnLCBkaXNwbGF5OiAnYmxvY2snIH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUocG9wdXBFbGUsIHsgbWF4SGVpZ2h0OiBwb3B1cEVsZS5vZmZzZXRIZWlnaHQgKyAncHgnLCBkaXNwbGF5OiAnJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucG9wdXBPcGVuID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwb3BPYmogPSB0aGlzLnBvcE9iajtcbiAgICAgICAgICAgIHZhciBwb3B1cEVsZSA9IHRoaXMucG9wT2JqLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgdG9vbEVsZSA9IHRoaXMucG9wT2JqLmVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBwb3B1cE5hdiA9IHRvb2xFbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHBvcE9iai5lbGVtZW50LCB7IGhlaWdodDogJ2F1dG8nLCBtYXhIZWlnaHQ6ICcnIH0pO1xuICAgICAgICAgICAgcG9wT2JqLmVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gcG9wT2JqLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIHZhciBwb3B1cEVsZVBvcyA9IHBvcHVwRWxlLm9mZnNldFRvcCArIHBvcHVwRWxlLm9mZnNldEhlaWdodCArIGVqMl9wb3B1cHNfMi5jYWxjdWxhdGVQb3NpdGlvbih0b29sRWxlKS50b3A7XG4gICAgICAgICAgICB2YXIgcG9wSWNvbiA9IHBvcHVwTmF2LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgcG9wdXBOYXYuY2xhc3NMaXN0LmFkZChDTFNfVEJBUk5BVkFDVCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChwb3BJY29uLCBbQ0xTX1BPUFVQSUNPTl0sIFtDTFNfUE9QVVBET1dOXSk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsVmFsID0gZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh3aW5kb3cuc2Nyb2xsWSkgPyAwIDogd2luZG93LnNjcm9sbFk7XG4gICAgICAgICAgICBpZiAoKHdpbmRvdy5pbm5lckhlaWdodCArIHNjcm9sbFZhbCkgPCBwb3B1cEVsZVBvcykge1xuICAgICAgICAgICAgICAgIHZhciBvdmVyZmxvd0hlaWdodCA9IChwb3B1cEVsZS5vZmZzZXRIZWlnaHQgLSAoKHBvcHVwRWxlUG9zIC0gd2luZG93LmlubmVySGVpZ2h0IC0gc2Nyb2xsVmFsKSArIDUpKTtcbiAgICAgICAgICAgICAgICBwb3BPYmouaGVpZ2h0ID0gb3ZlcmZsb3dIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUocG9wT2JqLmVsZW1lbnQsIHsgbWF4SGVpZ2h0OiBvdmVyZmxvd0hlaWdodCArICdweCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwQ2xvc2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBwb3B1cE5hdiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgcG9wSWNvbiA9IHBvcHVwTmF2LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgcG9wdXBOYXYuY2xhc3NMaXN0LnJlbW92ZShDTFNfVEJBUk5BVkFDVCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChwb3BJY29uLCBbQ0xTX1BPUFVQRE9XTl0sIFtDTFNfUE9QVVBJQ09OXSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNoZWNrUHJpb3JpdHkgPSBmdW5jdGlvbiAoZWxlLCBpbkVsZSwgZWxlV2lkdGgsIHByZSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGluRWxlLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBlbGVXaWQgPSBlbGVXaWR0aDtcbiAgICAgICAgICAgIHZhciBzZXBDaGVjayA9IDA7XG4gICAgICAgICAgICB2YXIgaXRlbUNvdW50ID0gMDtcbiAgICAgICAgICAgIHZhciBpdGVtUG9wQ291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIGNoZWNrQ2xhc3MgPSBmdW5jdGlvbiAoZWxlLCB2YWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgclZhbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhbC5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoY2xzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgclZhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gclZhbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB2YXIgbXJnbiA9IHBhcnNlRmxvYXQoKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGluRWxlW2ldKSkubWFyZ2luUmlnaHQpO1xuICAgICAgICAgICAgICAgIG1yZ24gKz0gcGFyc2VGbG9hdCgod2luZG93LmdldENvbXB1dGVkU3R5bGUoaW5FbGVbaV0pKS5tYXJnaW5MZWZ0KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5FbGVbaV0gPT09IHRoaXMudGJhckVsZVswXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJFbGVNcmduID0gbXJnbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChpbkVsZVtpXS5vZmZzZXRMZWZ0ICsgaW5FbGVbaV0ub2Zmc2V0V2lkdGggKyBtcmduKSA+IGVsZVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkVsZVtpXS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXBDaGVjayA+IDAgJiYgaXRlbUNvdW50ID09PSBpdGVtUG9wQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VwRWxlID0gaW5FbGVbaSArIGl0ZW1Db3VudCArIChzZXBDaGVjayAtIDEpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tDbGFzcyhzZXBFbGUsIFtDTFNfU0VQQVJBVE9SLCBDTFNfVEJBUklHTk9SRV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUoc2VwRWxlLCB7IGRpc3BsYXk6ICdub25lJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXBDaGVjaysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Qb3BDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5FbGVbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFST1ZFUkZMT1cpICYmIHByZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlV2lkdGggLT0gKGluRWxlW2ldLm9mZnNldFdpZHRoICsgKG1yZ24pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghY2hlY2tDbGFzcyhpbkVsZVtpXSwgW0NMU19TRVBBUkFUT1IsIENMU19UQkFSSUdOT1JFXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluRWxlW2ldLmNsYXNzTGlzdC5hZGQoQ0xTX1BPUFVQKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUoaW5FbGVbaV0sIHsgZGlzcGxheTogJ25vbmUnLCBtaW5XaWR0aDogaW5FbGVbaV0ub2Zmc2V0V2lkdGggKyAncHgnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVBvcENvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVXaWR0aCAtPSAoaW5FbGVbaV0ub2Zmc2V0V2lkdGggKyAobXJnbikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByZSkge1xuICAgICAgICAgICAgICAgIHZhciBwb3BlZEVsZSA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNICsgJzpub3QoLicgKyBDTFNfUE9QVVAgKyAnKScsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ByaW9yaXR5KGVsZSwgcG9wZWRFbGUsIGVsZVdpZCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jcmVhdGVQb3B1cEljb24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGlkID0gZWxlbWVudC5pZC5jb25jYXQoJ19uYXYnKTtcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSAnZS0nICsgZWxlbWVudC5pZC5jb25jYXQoJ19uYXYgJyArIENMU19QT1BVUE5BVik7XG4gICAgICAgICAgICB2YXIgbmF2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiBpZCwgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNS5Ccm93c2VyLmluZm8ubmFtZSA9PT0gJ21zaWUnIHx8IGVqMl9iYXNlXzUuQnJvd3Nlci5pbmZvLm5hbWUgPT09ICdlZGdlJykge1xuICAgICAgICAgICAgICAgIG5hdi5jbGFzc0xpc3QuYWRkKCdlLWllLWFsaWduJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmF2SXRlbSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19QT1BVUERPV04gKyAnIGUtaWNvbnMnIH0pO1xuICAgICAgICAgICAgbmF2LmFwcGVuZENoaWxkKG5hdkl0ZW0pO1xuICAgICAgICAgICAgbmF2LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChuYXYpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS50YmFyUHJpUmVmID0gZnVuY3Rpb24gKGluRWxlLCBpbmR4LCBzZXBQcmksIGVsLCBkZXMsIGVsV2lkLCB3aWQsIGlnKSB7XG4gICAgICAgICAgICB2YXIgaWdub3JlQ291bnQgPSBpZztcbiAgICAgICAgICAgIHZhciBwb3BFbGUgPSB0aGlzLnBvcE9iai5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gJy4nICsgQ0xTX0lURU0gKyAnOm5vdCguJyArIENMU19TRVBBUkFUT1IgKyAnKTpub3QoLicgKyBDTFNfVEJBUk9WRVJGTE9XICsgJyknO1xuICAgICAgICAgICAgdmFyIHByaUVsZUNudCA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19QT1BVUCArICc6bm90KC4nICsgQ0xTX1RCQVJPVkVSRkxPVyArICcpJywgcG9wRWxlKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgY2hlY2tDbGFzcyA9IGZ1bmN0aW9uIChlbGUsIHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKHZhbCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuc2VsZWN0QWxsKHF1ZXJ5LCBpbkVsZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZVNlcCA9IGluRWxlLmNoaWxkcmVuW2luZHggLSAoaW5keCAtIHNlcFByaSkgLSAxXTtcbiAgICAgICAgICAgICAgICB2YXIgaWdub3JlQ2hlY2sgPSAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWxlU2VwKSAmJiBjaGVja0NsYXNzKGVsZVNlcCwgQ0xTX1RCQVJJR05PUkUpKTtcbiAgICAgICAgICAgICAgICBpZiAoKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVsZVNlcCkgJiYgY2hlY2tDbGFzcyhlbGVTZXAsIENMU19TRVBBUkFUT1IpICYmICFlajJfYmFzZV8yLmlzVmlzaWJsZShlbGVTZXApKSB8fCBpZ25vcmVDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VwRGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgZWxlU2VwLnN0eWxlLmRpc3BsYXkgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVTZXBXaWR0aCA9IGVsZVNlcC5vZmZzZXRXaWR0aCArIChwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZVNlcCkubWFyZ2luUmlnaHQpICogMik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmV2U2VwID0gZWxlU2VwLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZWxXaWQgKyBlbGVTZXBXaWR0aCkgPCB3aWQgfHwgZGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkVsZS5pbnNlcnRCZWZvcmUoZWwsIGluRWxlLmNoaWxkcmVuWyhpbmR4ICsgaWdub3JlQ291bnQpIC0gKGluZHggLSBzZXBQcmkpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQocHJldlNlcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2VwLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2U2VwLmNsYXNzTGlzdC5jb250YWlucyhDTFNfU0VQQVJBVE9SKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZTZXAuc3R5bGUuZGlzcGxheSA9IHNlcERpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlU2VwLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluRWxlLmluc2VydEJlZm9yZShlbCwgaW5FbGUuY2hpbGRyZW5bKGluZHggKyBpZ25vcmVDb3VudCkgLSAoaW5keCAtIHNlcFByaSldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbkVsZS5pbnNlcnRCZWZvcmUoZWwsIGluRWxlLmNoaWxkcmVuWyhpbmR4ICsgaWdub3JlQ291bnQpIC0gcHJpRWxlQ250XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwUmVmcmVzaCA9IGZ1bmN0aW9uIChwb3B1cEVsZSwgZGVzdHJveSkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBwb3BOYXYgPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGUgPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQocG9wTmF2KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlubmVyRWxlLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIHBvcHVwRWxlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gZWxlLm9mZnNldFdpZHRoIC0gKHBvcE5hdi5vZmZzZXRXaWR0aCArIGlubmVyRWxlLm9mZnNldFdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbGVSZWZyZXNoKHdpZHRoLCBwb3B1cEVsZSwgZGVzdHJveSk7XG4gICAgICAgICAgICBwb3B1cEVsZS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICBpZiAocG9wdXBFbGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2gocG9wTmF2KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcE9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2godGhpcy5wb3BPYmouZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmogPSBudWxsO1xuICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGFzcG9wdXAnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZSgnZS10b29scG9wJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmlnbm9yZUVsZUZldGNoID0gZnVuY3Rpb24gKGluZGV4LCBpbm5lckVsZSkge1xuICAgICAgICAgICAgdmFyIGlnbm9yZUVsZSA9IFtdLnNsaWNlLmNhbGwoaW5uZXJFbGUucXVlcnlTZWxlY3RvckFsbCgnLicgKyBDTFNfVEJBUklHTk9SRSkpO1xuICAgICAgICAgICAgdmFyIGlnbm9yZUlueCA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgIGlmIChpZ25vcmVFbGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlnbm9yZUVsZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlSW54LnB1c2goW10uc2xpY2UuY2FsbChpbm5lckVsZS5jaGlsZHJlbikuaW5kZXhPZihlbGUpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWdub3JlSW54LmZvckVhY2goZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWwgPD0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucG9wdXBFbGVSZWZyZXNoID0gZnVuY3Rpb24gKHdpZHRoLCBwb3B1cEVsZSwgZGVzdHJveSkge1xuICAgICAgICAgICAgdmFyIGVsZVNwbGljZSA9IHRoaXMudGJhckVsZTtcbiAgICAgICAgICAgIHZhciBwcmlFbGVDbnQ7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgdmFyIGlnbm9yZUNvdW50ID0gMDtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgZWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgIHZhciBlbFdpZHRoID0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGJ0blRleHQgPSBlbC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSQlROVEVYVCk7XG4gICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnZS10YnRuLWFsaWduJykgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSVEVYVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ0biA9IGVsLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoYnRuVGV4dCkgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSVEVYVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blRleHQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChidG5UZXh0KSAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1BPUFVQVEVYVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blRleHQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLm1pbldpZHRoID0gJzAlJztcbiAgICAgICAgICAgICAgICAgICAgZWxXaWR0aCA9IGVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUubWluV2lkdGggPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGJ0blRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG5UZXh0LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZWwgPT09IHRoaXNfMS50YmFyRWxlWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsV2lkdGggKz0gdGhpc18xLnRiYXJFbGVNcmduO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5wb3NpdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChlbFdpZHRoIDwgd2lkdGggfHwgZGVzdHJveSkge1xuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5taW5XaWR0aCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUE9QT1ZFUkZMT1cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKENMU19QT1BVUCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzXzEudGJhckVsZS5pbmRleE9mKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNfMS50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzXzEuaXRlbXNbaW5kZXhdLmFsaWduO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzXzEudGJhckFsZ0VsZVsocG9zICsgJ3MnKV0uaW5kZXhPZihlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVTcGxpY2UgPSB0aGlzXzEudGJhckFsZ0VsZVsocG9zICsgJ3MnKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckVsZSA9IHRoaXNfMS5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TICsgJyAuJyArICdlLXRvb2xiYXItJyArIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcEJlZm9yZVByaV8xID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZWxlU3BsaWNlLnNsaWNlKDAsIGluZGV4KS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk9WRVJGTE9XKSB8fCBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggLT0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcEJlZm9yZVByaV8xKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZ25vcmVDb3VudCA9IHRoaXNfMS5pZ25vcmVFbGVGZXRjaChpbmRleCwgaW5uZXJFbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFST1ZFUkZMT1cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEudGJhclByaVJlZihpbm5lckVsZSwgaW5kZXgsIHNlcEJlZm9yZVByaV8xLCBlbCwgZGVzdHJveSwgZWxXaWR0aCwgd2lkdGgsIGlnbm9yZUNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoIC09IGVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckVsZS5pbnNlcnRCZWZvcmUoZWwsIGlubmVyRWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggLT0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmlFbGVDbnQgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfVEJBUk9WRVJGTE9XLCB0aGlzXzEucG9wT2JqLmVsZW1lbnQpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmluc2VydEJlZm9yZShlbCwgaW5uZXJFbGUuY2hpbGRyZW5bKGluZGV4ICsgaWdub3JlQ291bnQpIC0gcHJpRWxlQ250XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAtPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImJyZWFrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IFtdLnNsaWNlLmNhbGwocG9wdXBFbGUuY2hpbGRyZW4pOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGVfMSA9IF9sb29wXzEoZWwpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZV8xID09PSBcImJyZWFrXCIpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW1vdmVQb3NpdGlvbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0pIHx8ICFpdGVtLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUlBPUykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShpdGVtLCBDTFNfVEJBUlBPUyk7XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtID0gW10uc2xpY2UuY2FsbChpdGVtLmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgaW5uZXJJdGVtWzFdLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIGlubmVySXRlbVsyXS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlZnJlc2hQb3NpdGlvbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIHRoaXMuYWRkKGl0ZW0sIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgIHRoaXMuaXRlbVBvc2l0aW9uaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLml0ZW1Qb3NpdGlvbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0pIHx8ICFpdGVtLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUlBPUykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9wdXBOYXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJJdGVtID0gW10uc2xpY2UuY2FsbChpdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJTQ1JPTEwpLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlubmVySXRlbSA9IFtdLnNsaWNlLmNhbGwoaXRlbS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtYXJnaW4gPSBpbm5lckl0ZW1bMF0ub2Zmc2V0V2lkdGggKyBpbm5lckl0ZW1bMl0ub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgdGJhcldpZCA9IHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIGlmIChwb3B1cE5hdikge1xuICAgICAgICAgICAgICAgIHRiYXJXaWQgLT0gcG9wdXBOYXYub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgaW5uZXJJdGVtWzJdLnN0eWxlLnJpZ2h0ID0gcG9wdXBOYXYub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRiYXJXaWQgPD0gbWFyZ2luKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZhbHVlID0gKCgodGJhcldpZCAtIG1hcmdpbikpIC0gaW5uZXJJdGVtWzFdLm9mZnNldFdpZHRoKSAvIDI7XG4gICAgICAgICAgICBpbm5lckl0ZW1bMV0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgdmFyIG1yZ24gPSAoaW5uZXJJdGVtWzBdLm9mZnNldFdpZHRoICsgdmFsdWUpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlUnRsID8gaW5uZXJJdGVtWzFdLnN0eWxlLm1hcmdpblJpZ2h0ID0gbXJnbiA6IGlubmVySXRlbVsxXS5zdHlsZS5tYXJnaW5MZWZ0ID0gbXJnbjtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudGJhckl0ZW1BbGlnbiA9IGZ1bmN0aW9uIChpdGVtLCBpdGVtRWxlLCBwb3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYWxpZ25EaXYgPSBbXTtcbiAgICAgICAgICAgIGFsaWduRGl2LnB1c2goZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RCQVJMRUZUIH0pKTtcbiAgICAgICAgICAgIGFsaWduRGl2LnB1c2goZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RCQVJDRU5URVIgfSkpO1xuICAgICAgICAgICAgYWxpZ25EaXYucHVzaChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfVEJBUlJJR0hUIH0pKTtcbiAgICAgICAgICAgIGlmIChwb3MgPT09IDAgJiYgaXRlbS5hbGlnbiAhPT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgYWxpZ25EaXYuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1FbGUuYXBwZW5kQ2hpbGQoZWxlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRiYXJBbGlnbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoaXRlbUVsZSwgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5hbGlnbiAhPT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsaWduRWxlID0gaXRlbUVsZS5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0QWxpZ25fMSA9IGFsaWduRGl2WzBdO1xuICAgICAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwoYWxpZ25FbGUpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRiYXJBbGdFbGUubGVmdHMucHVzaChlbCk7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRBbGlnbl8xLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpdGVtRWxlLmFwcGVuZENoaWxkKGxlZnRBbGlnbl8xKTtcbiAgICAgICAgICAgICAgICBpdGVtRWxlLmFwcGVuZENoaWxkKGFsaWduRGl2WzFdKTtcbiAgICAgICAgICAgICAgICBpdGVtRWxlLmFwcGVuZENoaWxkKGFsaWduRGl2WzJdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRiYXJBbGlnbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoaXRlbUVsZSwgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jdHJsVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jdHJsVGVtID0gdGhpcy50cmd0RWxlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMudHJndEVsZSwgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIHRoaXMudGJhckVsZSA9IFtdO1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlID0gW10uc2xpY2UuY2FsbCh0aGlzLnRyZ3RFbGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgaW5uZXJFbGUuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZS50YWdOYW1lID09PSAnRElWJykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50YmFyRWxlLnB1c2goZWxlKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGQoZWxlLCBDTFNfSVRFTSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlckl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpdGVtRWxlRG9tO1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbTtcbiAgICAgICAgICAgIHZhciBpbm5lclBvcztcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuaXRlbXM7XG4gICAgICAgICAgICBpZiAoZWxlICYmIGVsZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaXRlbUVsZURvbSA9IGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50cmd0RWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN0cmxUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWxlICYmIGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoIWl0ZW1FbGVEb20pIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUVsZURvbSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JVEVNUyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpbm5lckl0ZW0gPSB0aGlzLnJlbmRlclN1YkNvbXBvbmVudChpdGVtc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJFbGUuaW5kZXhPZihpbm5lckl0ZW0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFyRWxlLnB1c2goaW5uZXJJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJJdGVtQWxpZ24oaXRlbXNbaV0sIGl0ZW1FbGVEb20sIGkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlubmVyUG9zID0gaXRlbUVsZURvbS5xdWVyeVNlbGVjdG9yKCcuZS10b29sYmFyLScgKyBpdGVtc1tpXS5hbGlnbi50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyUG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJBbGdFbGVbKGl0ZW1zW2ldLmFsaWduICsgJ3MnKV0ucHVzaChpbm5lckl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJQb3MuYXBwZW5kQ2hpbGQoaW5uZXJJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1FbGVEb20uYXBwZW5kQ2hpbGQoaW5uZXJJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoaXRlbUVsZURvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnNldEF0dHIgPSBmdW5jdGlvbiAoYXR0ciwgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IE9iamVjdC5rZXlzKGF0dHIpO1xuICAgICAgICAgICAgdmFyIGtleVZhbDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAga2V5VmFsID0ga2V5W2ldO1xuICAgICAgICAgICAgICAgIGtleVZhbCA9PT0gJ2NsYXNzJyA/IHRoaXMuYWRkKGVsZW1lbnQsIGF0dHJba2V5VmFsXSkgOiBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXlWYWwsIGF0dHJba2V5VmFsXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmVuYWJsZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBpc0VuYWJsZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gaXRlbXM7XG4gICAgICAgICAgICB2YXIgbGVuID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXNFbmFibGUpKSB7XG4gICAgICAgICAgICAgICAgaXNFbmFibGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVuYWJsZSA9IGZ1bmN0aW9uIChpc0VuYWJsZSwgZWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQoQ0xTX0RJU0FCTEUpO1xuICAgICAgICAgICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGxlbiAmJiBsZW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IFtdLnNsaWNlLmNhbGwoZWxlbWVudHMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBlbmFibGUoaXNFbmFibGUsIGVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlzRW5hYmxlID8gZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhlbGVtZW50cywgQ0xTX0RJU0FCTEUpIDogZWoyX2Jhc2VfMi5hZGRDbGFzcyhlbGVtZW50cywgQ0xTX0RJU0FCTEUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBlbGUgPSAobGVuICYmIGxlbiA9PT0gMSkgPyBlbGVtZW50c1swXSA6IGl0ZW1zO1xuICAgICAgICAgICAgICAgIGVuYWJsZShpc0VuYWJsZSwgZWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuYWRkSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtcztcbiAgICAgICAgICAgIHZhciBpdGVtc0RpdiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyk7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGU7XG4gICAgICAgICAgICB2YXIgaXRlbUFnbiA9ICdsZWZ0JztcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZS5hbGlnbikgJiYgZS5hbGlnbiAhPT0gJ2xlZnQnICYmIGl0ZW1BZ24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtQWduID0gZS5hbGlnbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaXRlbXNfMSA9IGl0ZW1zOyBfaSA8IGl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udHlwZSA9ICdCdXR0b24nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbm5lckl0ZW1zID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaXRlbS5hbGlnbiA9IGl0ZW1BZ247XG4gICAgICAgICAgICAgICAgaW5uZXJFbGUgPSB0aGlzLnJlbmRlclN1YkNvbXBvbmVudChpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyRWxlLmxlbmd0aCA+PSBpbmRleCAmJiBpbm5lckl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95TW9kZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGdJbmRleCA9IGl0ZW0uYWxpZ25bMF0gPT09ICdsJyA/IDAgOiBpdGVtLmFsaWduWzBdID09PSAnYycgPyAxIDogMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUgPSBlajJfYmFzZV8yLmNsb3Nlc3QoaW5uZXJJdGVtc1swXSwgJy4nICsgQ0xTX0lURU1TKS5jaGlsZHJlblthbGdJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuaW5zZXJ0QmVmb3JlKGlubmVyRWxlLCBlbGUuY2hpbGRyZW5baW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckFsZ0VsZVsoaXRlbS5hbGlnbiArICdzJyldLnNwbGljZShpbmRleCwgMCwgaW5uZXJFbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVySXRlbXNbMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaW5uZXJFbGUsIGlubmVySXRlbXNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZShpbmRleCwgMCwgaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckVsZS5zcGxpY2UoaW5kZXgsIDAsIGlubmVyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRXaWQgPSBpdGVtc0Rpdi5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtc0Rpdi5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJPdmVyZmxvd01vZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVtb3ZlSXRlbXMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gYXJncztcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW1zID0gW10uc2xpY2UuY2FsbChlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfSVRFTSwgdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIChlbGVtZW50cykgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChhcmdzLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW1CeUluZGV4KGluZGV4LCBpbm5lckl0ZW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50cyAmJiBlbGVtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBbXS5zbGljZS5jYWxsKGVsZW1lbnRzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMudGJhckVsZS5pbmRleE9mKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW1CeUluZGV4KGluZGV4LCBpbm5lckl0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVySXRlbXMgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfSVRFTSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IChlbGVtZW50cyAmJiBlbGVtZW50cy5sZW5ndGggJiYgZWxlbWVudHMubGVuZ3RoID09PSAxKSA/IGVsZW1lbnRzWzBdIDogYXJncztcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbm5lckl0ZW1zLmluZGV4T2YoZWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtQnlJbmRleChpbmRleCwgaW5uZXJJdGVtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVtb3ZlSXRlbUJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIGlubmVySXRlbXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRiYXJFbGVbaW5kZXhdICYmIGlubmVySXRlbXNbaW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZUlkeCA9IHRoaXMudGJhckVsZS5pbmRleE9mKGlubmVySXRlbXNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4QWduID0gdGhpcy50YmFyQWxnRWxlWyh0aGlzLml0ZW1zW2VsZUlkeF0uYWxpZ24gKyAncycpXS5pbmRleE9mKHRoaXMudGJhckVsZVtlbGVJZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFyQWxnRWxlWyh0aGlzLml0ZW1zW2VsZUlkeF0uYWxpZ24gKyAncycpXS5zcGxpY2UoaW5kZXhBZ24sIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaChpbm5lckl0ZW1zW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoZWxlSWR4LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRiYXJFbGUuc3BsaWNlKGVsZUlkeCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnRlbXBsYXRlUmVuZGVyID0gZnVuY3Rpb24gKHRlbXBsYXRlUHJvcCwgaW5uZXJFbGUsIGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpdGVtVHlwZSA9IGl0ZW0udHlwZTtcbiAgICAgICAgICAgIHZhciBlbGVPYmogPSB0ZW1wbGF0ZVByb3A7XG4gICAgICAgICAgICB2YXIgaXNDb21wb25lbnQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mICh0ZW1wbGF0ZVByb3ApID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGlzQ29tcG9uZW50ID0gdHlwZW9mIChlbGVPYmouYXBwZW5kVG8pID09PSAnZnVuY3Rpb24nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiAodGVtcGxhdGVQcm9wKSA9PT0gJ3N0cmluZycgfHwgIWlzQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm4gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHRlbXBsYXRlUHJvcDtcbiAgICAgICAgICAgICAgICB2YWwgPSAodHlwZW9mICh0ZW1wbGF0ZVByb3ApID09PSAnc3RyaW5nJykgPyB0ZW1wbGF0ZVByb3AudHJpbSgpIDogdGVtcGxhdGVQcm9wO1xuICAgICAgICAgICAgICAgIHZhciBlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbiA9IGVqMl9iYXNlXzQuY29tcGlsZShlbGUub3V0ZXJIVE1MLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaChlbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV80LmNvbXBpbGUodmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRlbXBsYXRlRm4pICYmIHRlbXBsYXRlRm4oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGVtcGxhdGVGbigpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlbGUudGFnTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoZWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXRlbVR5cGUgPT09ICdJbnB1dCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGl0ZW0uaWQgPyAoZWxlLmlkID0gaXRlbS5pZCkgOiAoZWxlLmlkID0gZWoyX2Jhc2VfNC5nZXRVbmlxdWVJRCgndGJyLWlwdCcpKTtcbiAgICAgICAgICAgICAgICBpbm5lckVsZS5hcHBlbmRDaGlsZChlbGUpO1xuICAgICAgICAgICAgICAgIGVsZU9iai5hcHBlbmRUbyhlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsIENMU19URU1QTEFURSk7XG4gICAgICAgICAgICB0aGlzLnRiYXJFbGUucHVzaChpbm5lckVsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmJ1dHRvblJlbmRlcmluZyA9IGZ1bmN0aW9uIChpdGVtLCBpbm5lckVsZSkge1xuICAgICAgICAgICAgdmFyIGRvbSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgeyBjbGFzc05hbWU6IENMU19UQkFSQlROIH0pO1xuICAgICAgICAgICAgdmFyIHRleHRTdHIgPSBpdGVtLnRleHQ7XG4gICAgICAgICAgICB2YXIgaWNvbkNzcztcbiAgICAgICAgICAgIHZhciBpY29uUG9zO1xuICAgICAgICAgICAgaXRlbS5pZCA/IChkb20uaWQgPSBpdGVtLmlkKSA6IGRvbS5pZCA9IGVqMl9iYXNlXzQuZ2V0VW5pcXVlSUQoJ2UtdGJyLWJ0bicpO1xuICAgICAgICAgICAgdmFyIGJ0blR4dCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXRiYXItYnRuLXRleHQnIH0pO1xuICAgICAgICAgICAgaWYgKHRleHRTdHIpIHtcbiAgICAgICAgICAgICAgICBidG5UeHQuaW5uZXJIVE1MID0gdGV4dFN0cjtcbiAgICAgICAgICAgICAgICBkb20uYXBwZW5kQ2hpbGQoYnRuVHh0KTtcbiAgICAgICAgICAgICAgICBkb20uY2xhc3NMaXN0LmFkZCgnZS10YnRuLXR4dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsICdlLXRidG4tYWxpZ24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnByZWZpeEljb24gfHwgaXRlbS5zdWZmaXhJY29uKSB7XG4gICAgICAgICAgICAgICAgaWYgKChpdGVtLnByZWZpeEljb24gJiYgaXRlbS5zdWZmaXhJY29uKSB8fCBpdGVtLnByZWZpeEljb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNzcyA9IGl0ZW0ucHJlZml4SWNvbiArICcgZS1pY29ucyc7XG4gICAgICAgICAgICAgICAgICAgIGljb25Qb3MgPSAnbGVmdCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ3NzID0gaXRlbS5zdWZmaXhJY29uICsgJyBlLWljb25zJztcbiAgICAgICAgICAgICAgICAgICAgaWNvblBvcyA9ICdyaWdodCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IGVqMl9idXR0b25zXzEuQnV0dG9uKHsgaWNvbkNzczogaWNvbkNzcywgaWNvblBvc2l0aW9uOiBpY29uUG9zIH0sIGRvbSk7XG4gICAgICAgICAgICBpZiAoaXRlbS53aWR0aCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUoZG9tLCB7ICd3aWR0aCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdChpdGVtLndpZHRoKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb207XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlclN1YkNvbXBvbmVudCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGU7XG4gICAgICAgICAgICB2YXIgZG9tO1xuICAgICAgICAgICAgaW5uZXJFbGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSVRFTSB9KTtcbiAgICAgICAgICAgIGlubmVyRWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRiYXJFbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRiYXJFbGUgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmh0bWxBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyKGl0ZW0uaHRtbEF0dHJpYnV0ZXMsIGlubmVyRWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnRvb2x0aXBUZXh0KSB7XG4gICAgICAgICAgICAgICAgaW5uZXJFbGUuc2V0QXR0cmlidXRlKCd0aXRsZScsIGl0ZW0udG9vbHRpcFRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICBpbm5lckVsZS5jbGFzc05hbWUgPSBpbm5lckVsZS5jbGFzc05hbWUgKyAnICcgKyBpdGVtLmNzc0NsYXNzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlUmVuZGVyKGl0ZW0udGVtcGxhdGUsIGlubmVyRWxlLCBpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoaXRlbS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0J1dHRvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBkb20gPSB0aGlzLmJ1dHRvblJlbmRlcmluZyhpdGVtLCBpbm5lckVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb20uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoZG9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5pdGVtQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU2VwYXJhdG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfU0VQQVJBVE9SKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnNob3dUZXh0T24pIHtcbiAgICAgICAgICAgICAgICB2YXIgc1R4dCA9IGl0ZW0uc2hvd1RleHRPbjtcbiAgICAgICAgICAgICAgICBpZiAoc1R4dCA9PT0gJ1Rvb2xiYXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfUE9QVVBURVhUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsICdlLXRidG4tYWxpZ24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc1R4dCA9PT0gJ092ZXJmbG93Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgQ0xTX1RCQVJURVhUKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5vdmVyZmxvdykge1xuICAgICAgICAgICAgICAgIHZhciBvdmVyZmxvdyA9IGl0ZW0ub3ZlcmZsb3c7XG4gICAgICAgICAgICAgICAgaWYgKG92ZXJmbG93ID09PSAnU2hvdycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsIENMU19UQkFST1ZFUkZMT1cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvdmVyZmxvdyA9PT0gJ0hpZGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5uZXJFbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgQ0xTX1BPUE9WRVJGTE9XKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbm5lckVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuaXRlbUNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlU3dpdGNoKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmFjdGl2ZUVsZVN3aXRjaCA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlUmVtb3ZlKGVsZS5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZS5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5hY3RpdmVFbGVSZW1vdmUgPSBmdW5jdGlvbiAoY3VyRWxlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5hY3RpdmVFbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGUgPSBjdXJFbGU7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRyZ3RFbGUpICYmICFjdXJFbGUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RFTVBMQVRFKSkge1xuICAgICAgICAgICAgICAgIGN1ckVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3QoW10pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd0b29sYmFyJztcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMudGJSZXNpemUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGVja092ZXJmbG93ID0gdGhpcy5jaGVja092ZXJmbG93KGVsZSwgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ0xTX0lURU1TKVswXSk7XG4gICAgICAgICAgICBpZiAoIWNoZWNrT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lIU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hlY2tPdmVyZmxvdyAmJiB0aGlzLnNjcm9sbE1vZHVsZSAmJiAodGhpcy5vZmZzZXRXaWQgPT09IGVsZS5vZmZzZXRXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vZmZzZXRXaWQgPiBlbGUub2Zmc2V0V2lkdGggfHwgY2hlY2tPdmVyZmxvdykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wb3BPYmopIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwUmVmcmVzaCh0aGlzLnBvcE9iai5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vZmZzZXRXaWQgPSBlbGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB0aGlzLnRiUmVzaXplID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciB0RWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpdGVtcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lJdGVtcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJJdGVtcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPdmVyZmxvd01vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lkID0gdEVsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodEVsZSwgeyAnd2lkdGgnOiBlajJfYmFzZV80LmZvcm1hdFVuaXQobmV3UHJvcC53aWR0aCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucG9wT2JqICYmIHdpZCA8IHRFbGUub2Zmc2V0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwUmVmcmVzaCh0aGlzLnBvcE9iai5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICdoZWlnaHQnOiBlajJfYmFzZV80LmZvcm1hdFVuaXQobmV3UHJvcC5oZWlnaHQpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ292ZXJmbG93TW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQodEVsZSwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3AuZW5hYmxlUnRsID8gdGhpcy5hZGQodEVsZSwgQ0xTX1JUTCkgOiB0aGlzLnJlbW92ZSh0RWxlLCBDTFNfUlRMKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnNjcm9sbE1vZHVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wLmVuYWJsZVJ0bCA/IHRoaXMuYWRkKHRoaXMuc2Nyb2xsTW9kdWxlLmVsZW1lbnQsIENMU19SVEwpIDogdGhpcy5yZW1vdmUodGhpcy5zY3JvbGxNb2R1bGUuZWxlbWVudCwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wb3BPYmopKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcC5lbmFibGVSdGwgPyB0aGlzLmFkZCh0aGlzLnBvcE9iai5lbGVtZW50LCBDTFNfUlRMKSA6IHRoaXMucmVtb3ZlKHRoaXMucG9wT2JqLmVsZW1lbnQsIENMU19SVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVG9vbGJhcjtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgSXRlbSlcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnU2Nyb2xsYWJsZScpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwib3ZlcmZsb3dNb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwiZW5hYmxlUnRsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcImNsaWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwiYmVmb3JlQ3JlYXRlXCIsIHZvaWQgMCk7XG4gICAgVG9vbGJhciA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV81Lk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIFRvb2xiYXIpO1xuICAgIGV4cG9ydHMuVG9vbGJhciA9IFRvb2xiYXI7XG4gICAgZXhwb3J0cy50b29sYmFyQnVpbGRlciA9IGVqMl9iYXNlXzUuQ3JlYXRlQnVpbGRlcihUb29sYmFyKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdG9vbGJhci90b29sYmFyLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ=="]}
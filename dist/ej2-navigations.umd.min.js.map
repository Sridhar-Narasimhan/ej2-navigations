/*!
*  filename: ej2-navigations.umd.min.js.map
*  version : 1.0.25
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-navigations.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_12__","__WEBPACK_EXTERNAL_MODULE_17__","__WEBPACK_EXTERNAL_MODULE_18__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","index_3","index_4","index_5","index_6","__export","hasOwnProperty","Object","defineProperty","value","apply","h_scroll_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","HScroll","_super","options","element","preRender","browser","Browser","info","name","browserCheck","isDevice","ieCheck","initialize","getUniqueID","uniqueId","style","display","enableRtl","classList","add","render","touchModule","Touch","scroll","touchHandler","bind","createNavIcon","EventHandler","scrollEle","scrollHandler","createElement","className","scrollDiv","setAttribute","ele","innerEle","slice","children","_i","innerEle_1","ele_1","appendChild","overflowX","scrollItems","getPersistData","keyEntity","addOnPersist","getModuleName","destroy","remove","nav","selectAll","_a","elem","removeAttribute","detach","concat","clsRight","navItem","CLS_NAVRIGHTARROW","clsLeft","navEle","navLeftItem","CLS_NAVLEFTARROW","insertBefore","firstChild","eventBinding","onKeyPress","e","_this","timeoutFun_1","keyTimeout","eleScrolling","keyTimer","window","setTimeout","onKeyUp","click","clearTimeout","forEach","el","tapHold","tabHoldHandler","tapHoldThreshold","addEventListener","repeatScroll","preventDefault","clickEventHandler","clearInterval","timeout","trgt","originalEvent","contains","firstElementChild","timeoutFun","setInterval","scrollDis","rootEle","querySelector","scrlLeft","scrollLeft","scrollStep","distance","distanceX","scrollDirection","arrowDisabling","addDisable","removeDisable","width","offsetWidth","navLeftEle","navRightEle","Math","ceil","scrollWidth","disEle","onPropertyChanged","newProp","oldProp","keys","Component","Property","NotifyPropertyChanges","toolbar_1","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","ej2_popups_2","ej2_buttons_1","CLS_ITEMS","CLS_ITEM","CLS_POPUP","Item","ChildProperty","Toolbar","keyConfigs","moveLeft","moveRight","moveUp","moveDown","popupOpen","popupClose","tab","home","end","unwireEvents","removeChild","trgtEle","ctrlTem","clearProperty","popObj","tbarAlign","attrb","trigger","scrollModule","wireEvents","clickHandler","resize","keyModule","KeyboardEvents","keyAction","keyActionHandler","docKeyDown","keyCode","isVisible","hide","duration","destroyHScroll","document","docEvent","tbarEle","tbarAlgEle","lefts","centers","rights","popEle","closest","destroyItems","querySelectorAll","destroyMode","popupRefresh","val","elementFocus","fChild","focus","activeEleSwitch","clstElement","tbrNavChk","keyHandling","clst","navChk","scrollChk","popAnimate","action","eleFocus","nodes","popupCheck","popFrstEle","lastElementChild","activeEle","activeEleRemove","top","offsetHeight","show","tbarScrollChk","pos","sib","skipEle","parentElement","isNullOrUndefined","clsList","isPopupElement","popupNav","popupClickHandler","itemObj","items","indexOf","eventArgs","item","cancel","CLS_RTL","position","X","Y","offsetX","dataBind","renderControl","formatUnit","height","setStyleAttribute","ariaAttr","role","aria-disabled","aria-haspopup","aria-orientation","attributes","renderItems","renderOverflowMode","itemPositioning","initHScroll","innerItems","checkOverflow","overflow","itemWidthCal","parseFloat","getComputedStyle","marginRight","innerItem","itemWidth","eleWidth","popNav","scrollNav","refreshOverflow","offsetWid","overflowMode","getElementsByClassName","removePositioning","createPopupEle","innerNav","createPopupIcon","direction","checkPriority","removeProperty","createPopup","pushingPoppedEle","tbarObj","popupPri","eleHeight","nodeIndex","poppedEle","nodePri","index","tbResize","push","childNodes","tbarElement","eleItem","popupInit","popupEle","maxHeight","popup","Popup","relateTo","offsetY","open","close","appendTo","toolEle","popupElePos","offsetTop","calculatePosition","popIcon","scrollVal","scrollY","innerHeight","overflowHeight","inEle","pre","len","eleWid","sepCheck","itemCount","itemPopCount","checkClass","rVal","cls","mrgn","marginLeft","tbarEleMrgn","offsetLeft","sepEle","minWidth","popedEle","CLS_POPUPDOWN","tbarPriRef","indx","sepPri","des","elWid","wid","ig","ignoreCount","priEleCnt","eleSep","ignoreCheck","eleSepWidth","prevSep","previousElementSibling","popupEleRefresh","ignoreEleFetch","ignoreEle","ignoreInx","count","eleSplice","this_1","elWidth","btnText","btn","align","sepBeforePri_1","refreshPositioning","margin","tbarWid","popWid","left","right","tbarItemAlign","itemEle","alignDiv","alignEle","leftAlign_1","ctrlTemplate","cloneNode","tagName","itemEleDom","innerPos","renderSubComponent","toLowerCase","setAttr","attr","keyVal","enableItems","isEnable","elements","enable","removeClass","addClass","addItems","itemsDiv","itemAgn","items_1","type","algIndex","splice","parentNode","removeItems","args","parseInt","toString","removeItemByIndex","eleIdx","indexAgn","templateRender","templateProp","isComponent","itemType","eleObj","templateFn","trim","compile","outerHTML","tempArray","buttonRendering","dom","iconCss","iconPos","textStr","text","btnTxt","innerHTML","prefixIcon","suffixIcon","Button","iconPosition","htmlAttributes","tooltipText","cssClass","template","itemClick","showTextOn","sTxt","currentTarget","curEle","tEle","Collection","Event","toolbarBuilder","CreateBuilder","accordion_1","ej2_base_6","CLS_HEADER","CLS_CONTENT","AccordionActionSettings","AccordionAnimationSettings","Complex","effect","easing","AccordionItem","Accordion","enter","space","isDestroy","nested","isNested","expandedItems","aria-multiselectable","initExpand","expandMode","select","initItemExpand","rippleEffect","selector","eventName","focusIn","focusOut","content","innerEles","header","tabindex","aria-level","headerEle","toggleIconGenerate","aria-labelledby","aria-hidden","tglIcon","hdrColIcon","expandItem","renderInnerItem","childElementCount","acrdnItem","acrdnHdr","acrdnCtn","acrdnCtnItem","acrdActive","getIndexByItem","contentRendering","ariaAttrUpdate","cntclkCheck","acrdAniEle","acrdAniEle_1","sameContentCheck","getAttribute","sameHeader","acrdnCtn_1","acrdnRoot","expandState","collapse","expand","eleMoveFocus","clstItem","nextElementSibling","headerEleGenerate","aria-expanded","aria-selected","ctnEle","hdrEle","fetchElement","hdr","expanded","enablePersistence","hdrIcnEle","icon","hdrIcon","isHeader","temString","eleVal","itemcnt","ctn","trgtItemEle","animation","timingFunction","isExpanded","eff","expandedItemsPush","expandProgress","expandAnimation","ef","icn","animate","trgtHgt","begin","progress","minHeight","Animation","expandedItemsPop","collapseProgress","collapseAnimation","trgtItEl","trgtHeight","itemHeight","remain","itemAttribUpdate","itemLen","addItem","innerItemEle","expandedItemRefresh","removeItem","hideItem","isHidden","enableItem","eleHeader","isExpand","itemExpand","acrdn","accordionBuilder","context_menu_1","ej2_lists_1","FOCUSED","HEADER","SELECTED","WRAPPER","HIDE","MenuItem","ContextMenu","navIdx","isTapHold","ejInst","getValue","ul","wrapper","body","setValue","initWrapper","getWrapper","zIndex","getZIndex","ListBase","createJsonFromElement","createItems","append","targetElems","isIos","cmenuHandler","getScrollableParents","parent_1","moverHandler","mouseDownHandler","keyBoardHandler","downarrow","uparrow","leftarrow","rightarrow","escape","closeMenu","elemStyle","parentCollection","regex","parentEle","parentStyle","test","overflowY","upDownKeyHandler","rightEnterKeyHandler","leftEscKeyHandler","cul","defaultIdx","fliIdx","fli","getLIByClass","getIdx","cli","isValidLI","getItem","openMenu","sli","canOpen","changedTouches","clientY","clientX","ulIndex","isMenuVisible","closeArgs","beforeCloseArgs","cnt","parentItem","event","toggleAnimation","valueOf","filter","split","li","lastChild","data","ICONS","hdata","hli","createItem","getIndex","textContent","pop","setPosition","showIcon","moduleName","listOpt","itemClass","createListItemFromJson","toRawObject","toggleVisiblity","collide","isCollide","offset","fit","Number","replace","x","xCollision","visibility","hasField","listBaseOptions","itemCreating","curData","itemCreated","separator","span","createList","menuItems","properties","getLI","showItemOnClick","field","cliWrapper","isInstLI","setLISelected","showSubMenu","cliIdx","culIdx","idx","classname","getItems","skipHdr","toggle","unWireEvents","refresh","getInstance","parent_2","keyboardModule","isMenuOpen","animationSettings","getBoundingClientRect","isCallBack","unshift","showItems","showHideItems","hideItems","ishide","iitems","insertAfter","insertItems","isAfter","menuitem","props","defaultView","getPropertyValue","max","contextMenuBuilder","tab_1","CLS_TB_ITEMS","CLS_TB_ITEM","CLS_TB_POPUP","TabActionSettings","TabAnimationSettings","Header","TabItem","Tab","prevIndex","animateOptions","animObj","title","delete","tbObj","isTemplate","cntEle","isPopup","initRender","isSwipeed","css","setCssClass","aria-activedescendant","renderContainer","setOrientation","headerPlacement","renderHeader","tbItems","renderContent","bdrLine","CLS_INDICATOR","scrCnt","setContentHeight","selectedItem","setRTL","tabItems","btnCls","CLS_ICONS","attrs","hdrItems","aria-controls","txt","cont","wrap","tabIndex","parseObject","clicked","setCloseButton","showCloseButton","setProperties","hdrItem","contents","inHTML","tbCount","tItems","isReplace","disabled","tHtml","txtEmpty","tCont","attrObj","tItem","removeActiveClass","hdrActEle","no","extIndex","findEle","checkPopupOverflow","tbPop","tbrItems","popupHandler","ripEle","tbItem","actEleId","prevEle","trg","refreshActElePosition","prevCtnAnimation","prev","current","previous","next","triggerPrevAnimation","oldCnt","animateObj","triggerAnimation","itemCollection","prevActiveEle","newCnt","idNo","openEff","clsEff","setActiveBorder","keyPressed","trgParent","trgIndex","getEleIndex","getContent","tempEle","cntHTML","place","list","heightAdjustMode","getHeight","cs","hsCnt","bar","tbWidth","setActive","isNaN","trg_1","enableAnimation","eleTrg","curActItem","refreshItemVisibility","eventArg","previousItem","prevItem","previousIndex","selectedIndex","isSwiped","setItems","refreshActiveBorder","hoverHandler","spaceKeyDown","swipe","swipeHandler","keyHandler","tabKeyModule","openPopup","shiftTab","removeEventListener","removeTab","velocity","swipeDirection","which","clstHead","actEle","ej2_instances","activeElement","nxtSib","nextSibling","scrBar","scrStart","scrEnd","eleStart","eleEnd","eleViewRange","L10n","locale","getConstant","enableTab","addTab","addedItems","removingArgs","removedItem","removedIndex","cntTrg","removedArgs","hideTab","disable","tempHdrEle","tabBuilder","treeview_1","ej2_data_1","ej2_base_7","ej2_inputs_1","ROOT","COLLAPSIBLE","EXPANDABLE","LISTITEM","LISTTEXT","PARENTITEM","HOVER","ACTIVE","LOAD","PROCESS","ICON","TEXTWRAP","SIBLING","DROPNEXT","POPUP","CHECK","CHECKBOXWRAP","FOCUS","SPINNER_SIZE","treeAriaAttr","treeRole","itemRole","listRole","itemText","FieldsSettings","ActionSettings","NodeAnimationSettings","TreeView","checkActionNodes","dragStartAction","isAnimate","f2","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","ctrlA","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","mouseDownStatus","listBaseOption","expandCollapse","fields","expandIconClass","ariaAttributes","expandIconPosition","beforeNodeCreate","url","navigateUrl","aniObj","treeList","isLoaded","selectedNodes","checkedNodes","setDataBinding","setExpandOnType","setRipple","wireEditingEvents","allowEditing","setDragAndDrop","allowDragAndDrop","setEnableRtl","setFullRow","fullRowSelect","setTouchPopup","allowMultiSelection","nodeTemplateFn","templateComplier","nodeTemplate","rippleModel","ignore","rippleFn","iconModel","isCenterRipple","rippleIconFn","isEnabled","styles","popupClick","setMultiSelect","firstUl","stopImmediatePropagation","dataSource","DataManager","executeQuery","getQuery","then","treeData","result","isNumberTypeId","setRootData","finalize","rootData","mapper","query","columns","clone","Query","prop","getActualProperties","col","from","tableName","addSorting","sortOrder","parentID","where","dataType","getDataType","groupedData","getGroupedData","rootItems","getChildNodes","isSorted","level","ulElement","getSortedData","finalizeNode","showCheckBox","checkboxEle","createCheckBox","addCheck","isChecked","frame","frameMouseHandler","createFullRow","addActionClass","selected","textEle","node","nodeData","rippleSpan","event_1","createEvent","initEvent","dispatchEvent","ds","child","hasChildren","groupBy","cusQuery","group","getDataSource","grpItem","j","iNodes","k","sNodes","selectNode","cNodes","eNodes","renderChildNodes","updateList","nodes_1","checkBox","ensureParentCheckState","checkBoxEle","changeState","parentUL","currentParent","ensureChildCheckState","childElement","checkBoxes","checkedState","currentLoadData","doCheckBoxAction","doCheck","liEle","getElement","validateCheckNode","state","isPrevent","isAdd","ariaState","currLi","getCheckEvent","frameSpan","removeCheck","isUndefined","checked","getNodeData","isInteracted","firstNode","updateIdAttr","doSelectionAction","sUids","sNode","selectGivenNodes","preventContextMenu","removeHover","setFocusElement","checkWrapper","checkElement","triggerClickEvent","expandAction","collapseNode","multiSelect","txtWrap","posLeft","posTop","toggleSelect","nodeCheckingEvent","isCheck","nodeCheckedEvent","expandNode","hideSpinner","start","proxy","setHeight","expandedNode","animateHeight","expandArgs","colArgs","getExpandEvent","remaining","timeStamp","currentHeight","parentLi","expandChild","eicon","showSpinner","childItems","parents","mapper_1","getChildFields","ensureCheckNode","renderSubChild","nodeLevel","dataLevel","getChildMapper","obj","parentId","isRoot","getChildGroup","objlen","cIcons","curLi","ctrlKey","isActive","unselectNode","getSelectEvent","removeSelectAll","shiftKey","startNode","startIndex","liList","endIndex","temp","currNode","addSelect","removeSelect","focusedNode","getFocusedNode","selectedLI","selectedLI_1","expandOnType","expandOn","expandHandler","expandCollapseAction","nodeName","inpEle","blur","oldText","checkNode","openNode","shiftKeySelect","navigateNode","navigateRootNode","createTextbox","navigateToFocus","isUp","focusNode","parent","getScrollParent","parentPos","bottom","scrollTop","isVisibleInViewport","scrollIntoView","documentElement","clientHeight","innerWidth","clientWidth","scrollHeight","isTowards","nextNode","getNextNode","getPrevNode","checkWrap","toBeOpened","focusNextNode","setFocus","isBackwards","rootNode","getRootNode","getEndNode","fNode","prevNode","endNode","preNode","onMouseOver","currentLi","setHover","onMouseLeave","hoveredNode","pNode","pid","reRenderNodes","oldClass","newClass","editingHandler","getEditEvent","inpWidth","nodeValue","inputObj","Input","createInput","container","inputEle","setSelectionRange","wireInputEvents","inputFocusOut","newText","txtEle","toBind","initializeDrag","destroyDrag","virtualEle","dragObj","Draggable","enableTailMode","dragTarget","helper","sender","dragRoot","dragWrap","dragLi","isSameNode","cloneEle","DRAGITEM","nLen","cNode","cursor","dragData","dragStart","getDragEvent","drag","cursorAt","targetTouches","dragAction","dragStop","removeVirtualEle","dropTarget","dropRoot","dropObj","Droppable","out","over","drop","dropAction","dropWrap","dropLi","isDescendant","virEle","renderVirtualEle","draggable","droppedElement","appendNode","dropAsSiblingNode","dropAsChildNode","dropUl","dragParentUl","dragParentLi","updateElement","updateAriaLevel","updateInstance","dropParentUl","expandParent","dropIcon","generateIcon","generateUL","dragIcon","updateChildAriaLevel","sibEle","dropData","draggedNode","draggedNodeData","droppedNode","droppedNodeData","addFullRow","toAdd","rowDiv","addMultiSelect","liEles","liEles_1","liEles_2","collapseByLevel","excludeHiddenNodes","getVisibleNodes","collapseAllNodes","expandByLevel","expandAllNodes","eIcons","vNodes","removeNode","updateSelectedNodes","doGivenAction","toExpand","addGivenNodes","isRemote","updateMapper","refNode","doDisableAction","doEnableAction","proxy_1","touchEditObj","doubleTap","wireClickEvent","proxy_2","touchClickObj","tap","wireExpandOnEvent","proxy_3","touchExpandObj","matched","matches","createSpinner","setCheckedNodes","JSON","parse","stringify","uncheckAll","checkAll","addNodes","collapseAll","disableNodes","enableNodes","ensureVisible","expandAll","getNode","getNodeDetails","moveNodes","sourceNodes","removeNodes","replaceText","treeViewHelper"],"mappings":"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","file":"ej2-navigations.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-lists\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-inputs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-lists\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-inputs\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-lists\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-inputs\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-lists\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-inputs\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(4), __webpack_require__(8), __webpack_require__(10), __webpack_require__(13), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2, index_3, index_4, index_5, index_6) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t    __export(index_3);\n\t    __export(index_4);\n\t    __export(index_5);\n\t    __export(index_6);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, h_scroll_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(h_scroll_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ROOT = 'e-hscroll';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_HSCROLLBAR = 'e-hscroll-bar';\n\t    var CLS_HSCROLLCON = 'e-hscroll-content';\n\t    var CLS_NAVARROW = 'e-nav-arrow';\n\t    var CLS_NAVRIGHTARROW = 'e-nav-right-arrow';\n\t    var CLS_NAVLEFTARROW = 'e-nav-left-arrow';\n\t    var CLS_HSCROLLNAV = 'e-scroll-nav';\n\t    var CLS_HSCROLLNAVRIGHT = 'e-scroll-right-nav';\n\t    var CLS_HSCROLLNAVLEFT = 'e-scroll-left-nav';\n\t    var CLS_DEVICE = 'e-scroll-device';\n\t    var HScroll = (function (_super) {\n\t        __extends(HScroll, _super);\n\t        function HScroll(options, element) {\n\t            return _super.call(this, options, element) || this;\n\t        }\n\t        HScroll.prototype.preRender = function () {\n\t            this.browser = ej2_base_2.Browser.info.name;\n\t            this.browserCheck = this.browser === 'mozilla';\n\t            this.isDevice = ej2_base_2.Browser.isDevice;\n\t            var element = this.element;\n\t            this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n\t            this.initialize();\n\t            if (element.id === '') {\n\t                element.id = ej2_base_1.getUniqueID('hscroll');\n\t                this.uniqueId = true;\n\t            }\n\t            element.style.display = 'block';\n\t            if (this.enableRtl) {\n\t                element.classList.add(CLS_RTL);\n\t            }\n\t        };\n\t        HScroll.prototype.render = function () {\n\t            this.touchModule = new ej2_base_1.Touch(this.element, { scroll: this.touchHandler.bind(this) });\n\t            if (!this.isDevice) {\n\t                this.createNavIcon(this.element);\n\t                ej2_base_1.EventHandler.add(this.scrollEle, 'scroll', this.scrollHandler, this);\n\t            }\n\t            else {\n\t                this.element.classList.add(CLS_DEVICE);\n\t            }\n\t        };\n\t        HScroll.prototype.initialize = function () {\n\t            var scrollEle = ej2_base_2.createElement('div', { className: CLS_HSCROLLCON });\n\t            var scrollDiv = ej2_base_2.createElement('div', { className: CLS_HSCROLLBAR });\n\t            scrollDiv.setAttribute('tabindex', '-1');\n\t            var ele = this.element;\n\t            var innerEle = [].slice.call(ele.children);\n\t            for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {\n\t                var ele_1 = innerEle_1[_i];\n\t                scrollEle.appendChild(ele_1);\n\t            }\n\t            scrollDiv.appendChild(scrollEle);\n\t            ele.appendChild(scrollDiv);\n\t            scrollDiv.style.overflowX = 'hidden';\n\t            this.scrollEle = scrollDiv;\n\t            this.scrollItems = scrollEle;\n\t        };\n\t        HScroll.prototype.getPersistData = function () {\n\t            var keyEntity = ['scrollStep'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        HScroll.prototype.getModuleName = function () {\n\t            return 'hScroll';\n\t        };\n\t        HScroll.prototype.destroy = function () {\n\t            var ele = this.element;\n\t            ele.style.display = '';\n\t            ele.classList.remove(CLS_ROOT);\n\t            var nav = ej2_base_1.selectAll('#' + ele.id + '_nav.e-' + ele.id + '_nav');\n\t            for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {\n\t                var elem = _a[_i];\n\t                ele.appendChild(elem);\n\t            }\n\t            if (this.uniqueId) {\n\t                this.element.removeAttribute('id');\n\t            }\n\t            ej2_base_2.detach(this.scrollEle);\n\t            if (nav.length > 0) {\n\t                ej2_base_2.detach(nav[0]);\n\t                ej2_base_2.detach(nav[1]);\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.scrollEle, 'scroll', this.scrollHandler);\n\t            this.touchModule.destroy();\n\t            this.touchModule = null;\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        HScroll.prototype.createNavIcon = function (element) {\n\t            var id = element.id.concat('_nav');\n\t            var clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n\t            var nav = ej2_base_2.createElement('div', { id: id, className: clsRight });\n\t            nav.setAttribute('aria-disabled', 'false');\n\t            var navItem = ej2_base_2.createElement('div', { className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n\t            var clsLeft = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVLEFT);\n\t            var navEle = ej2_base_2.createElement('div', { id: id, className: clsLeft + ' ' + CLS_DISABLE });\n\t            navEle.setAttribute('aria-disabled', 'true');\n\t            var navLeftItem = ej2_base_2.createElement('div', { className: CLS_NAVLEFTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n\t            navEle.appendChild(navLeftItem);\n\t            nav.appendChild(navItem);\n\t            nav.setAttribute('tabindex', '0');\n\t            element.appendChild(nav);\n\t            element.insertBefore(navEle, element.firstChild);\n\t            if (this.ieCheck) {\n\t                nav.classList.add('e-ie-align');\n\t                navEle.classList.add('e-ie-align');\n\t            }\n\t            this.eventBinding([nav, navEle]);\n\t        };\n\t        HScroll.prototype.onKeyPress = function (e) {\n\t            var _this = this;\n\t            if (e.key === 'Enter') {\n\t                var timeoutFun_1 = function () {\n\t                    _this.keyTimeout = true;\n\t                    _this.eleScrolling(10, e.target);\n\t                };\n\t                this.keyTimer = window.setTimeout(function () {\n\t                    timeoutFun_1();\n\t                }, 100);\n\t            }\n\t        };\n\t        HScroll.prototype.onKeyUp = function (e) {\n\t            if (e.key !== 'Enter') {\n\t                return;\n\t            }\n\t            if (this.keyTimeout) {\n\t                this.keyTimeout = false;\n\t            }\n\t            else {\n\t                e.target.click();\n\t            }\n\t            clearTimeout(this.keyTimer);\n\t        };\n\t        HScroll.prototype.eventBinding = function (ele) {\n\t            var _this = this;\n\t            ele.forEach(function (el) {\n\t                new ej2_base_1.Touch(el, { tapHold: _this.tabHoldHandler.bind(_this), tapHoldThreshold: 500 });\n\t                el.addEventListener('keydown', _this.onKeyPress.bind(_this));\n\t                el.addEventListener('keyup', _this.onKeyUp.bind(_this));\n\t                el.addEventListener('mouseup', _this.repeatScroll.bind(_this));\n\t                el.addEventListener('touchend', _this.repeatScroll.bind(_this));\n\t                el.addEventListener('contextmenu', function (e) {\n\t                    e.preventDefault();\n\t                });\n\t                ej2_base_1.EventHandler.add(el, 'click', _this.clickEventHandler, _this);\n\t            });\n\t        };\n\t        HScroll.prototype.repeatScroll = function () {\n\t            clearInterval(this.timeout);\n\t        };\n\t        HScroll.prototype.tabHoldHandler = function (e) {\n\t            var _this = this;\n\t            var trgt = e.originalEvent.target;\n\t            trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;\n\t            var scrollDis = 10;\n\t            var timeoutFun = function () {\n\t                _this.eleScrolling(scrollDis, trgt);\n\t            };\n\t            this.timeout = window.setInterval(function () {\n\t                timeoutFun();\n\t            }, 50);\n\t        };\n\t        HScroll.prototype.contains = function (ele, className) {\n\t            return ele.classList.contains(className);\n\t        };\n\t        HScroll.prototype.eleScrolling = function (scrollDis, trgt) {\n\t            var element = this.scrollEle;\n\t            var rootEle = this.element;\n\t            var classList = trgt.classList;\n\t            if (classList.contains(CLS_HSCROLLNAV)) {\n\t                classList = trgt.querySelector('.' + CLS_NAVARROW).classList;\n\t            }\n\t            if (this.contains(rootEle, CLS_RTL) && this.browserCheck) {\n\t                scrollDis = -scrollDis;\n\t            }\n\t            var scrlLeft = element.scrollLeft;\n\t            if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                if (classList.contains(CLS_NAVRIGHTARROW)) {\n\t                    element.scrollLeft = scrlLeft + scrollDis;\n\t                }\n\t                else {\n\t                    element.scrollLeft = scrlLeft - scrollDis;\n\t                }\n\t            }\n\t            else {\n\t                if (classList.contains(CLS_NAVLEFTARROW)) {\n\t                    element.scrollLeft = scrlLeft + scrollDis;\n\t                }\n\t                else {\n\t                    element.scrollLeft = scrlLeft - scrollDis;\n\t                }\n\t            }\n\t        };\n\t        HScroll.prototype.clickEventHandler = function (e) {\n\t            this.eleScrolling(this.scrollStep, e.target);\n\t        };\n\t        HScroll.prototype.touchHandler = function (e) {\n\t            var ele = this.scrollEle;\n\t            var distance;\n\t            distance = e.distanceX;\n\t            if ((this.ieCheck) && this.contains(this.element, CLS_RTL)) {\n\t                distance = -distance;\n\t            }\n\t            if (e.scrollDirection === 'Left') {\n\t                ele.scrollLeft = ele.scrollLeft + distance;\n\t            }\n\t            else if (e.scrollDirection === 'Right') {\n\t                ele.scrollLeft = ele.scrollLeft - distance;\n\t            }\n\t        };\n\t        HScroll.prototype.arrowDisabling = function (addDisable, removeDisable) {\n\t            addDisable.classList.add(CLS_DISABLE);\n\t            addDisable.setAttribute('aria-disabled', 'true');\n\t            addDisable.removeAttribute('tabindex');\n\t            clearInterval(this.timeout);\n\t            removeDisable.classList.remove(CLS_DISABLE);\n\t            removeDisable.setAttribute('aria-disabled', 'false');\n\t            removeDisable.setAttribute('tabindex', '0');\n\t            this.repeatScroll();\n\t        };\n\t        HScroll.prototype.scrollHandler = function (e) {\n\t            var target = e.target;\n\t            var width = target.offsetWidth;\n\t            var rootEle = this.element;\n\t            var navLeftEle = this.element.querySelector('.' + CLS_HSCROLLNAVLEFT);\n\t            var navRightEle = this.element.querySelector('.' + CLS_HSCROLLNAVRIGHT);\n\t            var scrollLeft = target.scrollLeft;\n\t            if (scrollLeft <= 0) {\n\t                scrollLeft = -scrollLeft;\n\t            }\n\t            if (scrollLeft === 0) {\n\t                if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                    this.arrowDisabling(navLeftEle, navRightEle);\n\t                }\n\t                else {\n\t                    this.arrowDisabling(navRightEle, navLeftEle);\n\t                }\n\t            }\n\t            else if (Math.ceil(width + scrollLeft + .1) >= target.scrollWidth) {\n\t                if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                    this.arrowDisabling(navRightEle, navLeftEle);\n\t                }\n\t                else {\n\t                    this.arrowDisabling(navLeftEle, navRightEle);\n\t                }\n\t            }\n\t            else {\n\t                var disEle = this.element.querySelector('.' + CLS_DISABLE);\n\t                if (disEle) {\n\t                    disEle.classList.remove(CLS_DISABLE);\n\t                    disEle.setAttribute('aria-disabled', 'false');\n\t                    disEle.setAttribute('tabindex', '0');\n\t                }\n\t            }\n\t        };\n\t        HScroll.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'scrollStep':\n\t                        break;\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.element.classList.add(CLS_RTL) : this.element.classList.remove(CLS_RTL);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return HScroll;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_2.Property(40)\n\t    ], HScroll.prototype, \"scrollStep\", void 0);\n\t    HScroll = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], HScroll);\n\t    exports.HScroll = HScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, toolbar_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(toolbar_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(6), __webpack_require__(6), __webpack_require__(7), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, ej2_popups_2, ej2_buttons_1, h_scroll_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ITEMS = 'e-toolbar-items';\n\t    var CLS_ITEM = 'e-toolbar-item';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_SEPARATOR = 'e-separator';\n\t    var CLS_POPUPICON = 'e-popup-up-icon';\n\t    var CLS_POPUPDOWN = 'e-popup-down-icon';\n\t    var CLS_TEMPLATE = 'e-template';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_POPUPTEXT = 'e-toolbar-text';\n\t    var CLS_TBARTEXT = 'e-popup-text';\n\t    var CLS_TBAROVERFLOW = 'e-overflow-show';\n\t    var CLS_POPOVERFLOW = 'e-overflow-hide';\n\t    var CLS_TBARBTN = 'e-tbar-btn';\n\t    var CLS_TBARNAV = 'e-hor-nav';\n\t    var CLS_TBARSCRLNAV = 'e-scroll-nav';\n\t    var CLS_TBARRIGHT = 'e-toolbar-right';\n\t    var CLS_TBARLEFT = 'e-toolbar-left';\n\t    var CLS_TBARCENTER = 'e-toolbar-center';\n\t    var CLS_TBARPOS = 'e-tbar-pos';\n\t    var CLS_TBARSCROLL = 'e-hscroll-content';\n\t    var CLS_POPUPNAV = 'e-hor-nav';\n\t    var CLS_POPUPCLASS = 'e-toolbar-pop';\n\t    var CLS_POPUP = 'e-toolbar-popup';\n\t    var CLS_TBARBTNTEXT = 'e-tbar-btn-text';\n\t    var CLS_TBARNAVACT = 'e-nav-active';\n\t    var CLS_TBARIGNORE = 'e-ignore';\n\t    var Item = (function (_super) {\n\t        __extends(Item, _super);\n\t        function Item() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Item;\n\t    }(ej2_base_5.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Item.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"prefixIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"suffixIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('None')\n\t    ], Item.prototype, \"overflow\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Button')\n\t    ], Item.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Both')\n\t    ], Item.prototype, \"showTextOn\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Item.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"tooltipText\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('left')\n\t    ], Item.prototype, \"align\", void 0);\n\t    exports.Item = Item;\n\t    var Toolbar = (function (_super) {\n\t        __extends(Toolbar, _super);\n\t        function Toolbar(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.keyConfigs = {\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow',\n\t                popupOpen: 'enter',\n\t                popupClose: 'escape',\n\t                tab: 'tab',\n\t                home: 'home',\n\t                end: 'end',\n\t            };\n\t            return _this;\n\t        }\n\t        Toolbar.prototype.destroy = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            _super.prototype.destroy.call(this);\n\t            this.unwireEvents();\n\t            while (ele.firstChild) {\n\t                ele.removeChild(ele.firstChild);\n\t            }\n\t            if (this.trgtEle) {\n\t                ele.appendChild(this.ctrlTem);\n\t            }\n\t            this.clearProperty();\n\t            this.popObj = null;\n\t            this.tbarAlign = null;\n\t            this.remove(this.element, 'e-toolpop');\n\t            ele.removeAttribute('style');\n\t            ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n\t                _this.element.removeAttribute(attrb);\n\t            });\n\t        };\n\t        Toolbar.prototype.preRender = function () {\n\t            this.trigger('beforeCreate');\n\t            this.scrollModule = null;\n\t            this.popObj = null;\n\t            if (this.enableRtl) {\n\t                this.add(this.element, CLS_RTL);\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t            window.addEventListener('resize', this.resize.bind(this));\n\t            this.keyModule = new ej2_base_2.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs\n\t            });\n\t            ej2_base_1.EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n\t            this.element.setAttribute('tabIndex', '0');\n\t        };\n\t        Toolbar.prototype.docKeyDown = function (e) {\n\t            if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && ej2_base_2.isVisible(this.popObj.element)) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t            var keyCheck = (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36);\n\t            if (keyCheck) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Toolbar.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t            this.destroyHScroll();\n\t            this.keyModule.destroy();\n\t            ej2_base_1.EventHandler.remove(document, 'scroll', this.docEvent);\n\t            ej2_base_1.EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n\t            ej2_base_1.EventHandler.remove(document, 'click', this.docEvent);\n\t        };\n\t        Toolbar.prototype.clearProperty = function () {\n\t            this.tbarEle = [];\n\t            this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n\t        };\n\t        Toolbar.prototype.docEvent = function (e) {\n\t            var popEle = ej2_base_2.closest(e.target, '.e-popup');\n\t            if (this.popObj && ej2_base_2.isVisible(this.popObj.element) && !popEle) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t        };\n\t        Toolbar.prototype.destroyHScroll = function () {\n\t            if (this.scrollModule) {\n\t                if (this.tbarAlign) {\n\t                    this.add(this.scrollModule.element, CLS_TBARPOS);\n\t                }\n\t                this.scrollModule.destroy();\n\t                this.scrollModule = null;\n\t            }\n\t        };\n\t        Toolbar.prototype.destroyItems = function () {\n\t            [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) {\n\t                ej2_base_2.detach(el);\n\t            });\n\t            this.clearProperty();\n\t        };\n\t        Toolbar.prototype.destroyMode = function () {\n\t            if (this.scrollModule) {\n\t                this.remove(this.scrollModule.element, CLS_RTL);\n\t                this.destroyHScroll();\n\t            }\n\t            if (this.popObj) {\n\t                this.popupRefresh(this.popObj.element, true);\n\t            }\n\t        };\n\t        Toolbar.prototype.add = function (ele, val) {\n\t            ele.classList.add(val);\n\t        };\n\t        Toolbar.prototype.remove = function (ele, val) {\n\t            ele.classList.remove(val);\n\t        };\n\t        Toolbar.prototype.elementFocus = function (ele) {\n\t            var fChild = ele.firstElementChild;\n\t            if (fChild) {\n\t                fChild.focus();\n\t                this.activeEleSwitch(ele);\n\t            }\n\t            else {\n\t                ele.focus();\n\t            }\n\t        };\n\t        Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n\t            var clst;\n\t            if (tbrNavChk && this.popObj && ej2_base_2.isVisible(this.popObj.element)) {\n\t                clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n\t            }\n\t            else if (this.element === trgt || tbrNavChk) {\n\t                clst = this.element.querySelector('.' + CLS_ITEM);\n\t            }\n\t            else {\n\t                clst = ej2_base_2.closest(trgt, '.' + CLS_ITEM);\n\t            }\n\t            return clst;\n\t        };\n\t        Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n\t            var popObj = this.popObj;\n\t            var rootEle = this.element;\n\t            var popAnimate = { name: 'SlideUp', duration: 100 };\n\t            switch (e.action) {\n\t                case 'moveRight':\n\t                    if (rootEle === trgt) {\n\t                        this.elementFocus(clst);\n\t                    }\n\t                    else if (!navChk) {\n\t                        this.eleFocus(clst, 'next');\n\t                    }\n\t                    break;\n\t                case 'moveLeft':\n\t                    if (!navChk) {\n\t                        this.eleFocus(clst, 'previous');\n\t                    }\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    var ele = void 0;\n\t                    var nodes = void 0;\n\t                    if (clst) {\n\t                        var popupCheck = ej2_base_2.closest(clst, '.e-popup');\n\t                        if (popupCheck) {\n\t                            if (ej2_base_2.isVisible(this.popObj.element)) {\n\t                                nodes = popupCheck.children;\n\t                                if (e.action === 'home') {\n\t                                    ele = nodes[0];\n\t                                }\n\t                                else {\n\t                                    ele = nodes[nodes.length - 1];\n\t                                }\n\t                            }\n\t                        }\n\t                        else {\n\t                            nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM);\n\t                            if (e.action === 'home') {\n\t                                ele = nodes[0];\n\t                            }\n\t                            else {\n\t                                ele = nodes[nodes.length - 1];\n\t                            }\n\t                        }\n\t                        if (ele) {\n\t                            this.elementFocus(ele);\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'moveUp':\n\t                case 'moveDown':\n\t                    var value = e.action === 'moveUp' ? 'previous' : 'next';\n\t                    if (popObj && ej2_base_2.closest(trgt, '.e-popup')) {\n\t                        var popEle = popObj.element;\n\t                        var popFrstEle = popEle.firstElementChild;\n\t                        if ((value === 'previous' && popFrstEle === clst) || (value === 'next' && popEle.lastElementChild === clst)) {\n\t                            return;\n\t                        }\n\t                        else {\n\t                            this.eleFocus(clst, value);\n\t                        }\n\t                    }\n\t                    else if (e.action === 'moveDown' && popObj && ej2_base_2.isVisible(popObj.element)) {\n\t                        this.elementFocus(clst);\n\t                    }\n\t                    break;\n\t                case 'tab':\n\t                    if (!scrollChk && !navChk) {\n\t                        var ele_1 = clst.firstElementChild;\n\t                        if (rootEle === trgt) {\n\t                            if (this.activeEle) {\n\t                                this.activeEle.focus();\n\t                            }\n\t                            else {\n\t                                this.activeEleRemove(ele_1);\n\t                                ele_1.focus();\n\t                            }\n\t                            this.element.removeAttribute('tabindex');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'popupClose':\n\t                    if (popObj) {\n\t                        popObj.hide(popAnimate);\n\t                    }\n\t                    break;\n\t                case 'popupOpen':\n\t                    if (!navChk) {\n\t                        return;\n\t                    }\n\t                    if (popObj && !ej2_base_2.isVisible(popObj.element)) {\n\t                        popObj.element.style.top = rootEle.offsetHeight + 'px';\n\t                        popObj.show({ name: 'SlideDown', duration: 100 });\n\t                    }\n\t                    else {\n\t                        popObj.hide(popAnimate);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        Toolbar.prototype.keyActionHandler = function (e) {\n\t            e.preventDefault();\n\t            var clst;\n\t            var trgt = e.target;\n\t            var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n\t            var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n\t            clst = this.clstElement(tbrNavChk, trgt);\n\t            if (clst || tbarScrollChk) {\n\t                this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n\t            }\n\t        };\n\t        Toolbar.prototype.eleFocus = function (closest, pos) {\n\t            var sib = Object(closest)[pos + 'ElementSibling'];\n\t            var contains = function (el) {\n\t                return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE);\n\t            };\n\t            if (sib) {\n\t                var skipEle = contains(sib);\n\t                if (skipEle) {\n\t                    if (Object(sib)[pos + 'Sibling']) {\n\t                        sib = Object(sib)[pos + 'Sibling'];\n\t                        skipEle = contains(sib);\n\t                        if (skipEle) {\n\t                            this.eleFocus(sib, pos);\n\t                            return;\n\t                        }\n\t                    }\n\t                }\n\t                this.elementFocus(sib);\n\t            }\n\t            else if (this.tbarAlign) {\n\t                var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n\t                if (!ej2_base_4.isNullOrUndefined(elem) && elem.children.length === 0) {\n\t                    elem = Object(elem)[pos + 'ElementSibling'];\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(elem) && elem.children.length > 0) {\n\t                    if (pos === 'next') {\n\t                        var el = elem.querySelector('.' + CLS_ITEM);\n\t                        if (contains(el)) {\n\t                            this.eleFocus(el, pos);\n\t                        }\n\t                        else {\n\t                            el.firstElementChild.focus();\n\t                            this.activeEleSwitch(el);\n\t                        }\n\t                    }\n\t                    else {\n\t                        var el = elem.lastElementChild;\n\t                        if (contains(el)) {\n\t                            this.eleFocus(el, pos);\n\t                        }\n\t                        else {\n\t                            this.elementFocus(el);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.clickHandler = function (e) {\n\t            var trgt = e.target;\n\t            var clsList = trgt.classList;\n\t            var ele = this.element;\n\t            var isPopupElement = !ej2_base_4.isNullOrUndefined(ej2_base_2.closest(trgt, '.' + CLS_POPUPCLASS));\n\t            var popupNav = ej2_base_2.closest(trgt, ('.' + CLS_TBARNAV));\n\t            if (!popupNav) {\n\t                popupNav = trgt;\n\t            }\n\t            if (!ele.children[0].classList.contains('e-hscroll') && (clsList.contains(CLS_TBARNAV))) {\n\t                clsList = trgt.querySelector('.e-icons').classList;\n\t            }\n\t            if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n\t                this.popupClickHandler(ele, popupNav, CLS_RTL);\n\t            }\n\t            var itemObj;\n\t            var clst = ej2_base_2.closest(e.target, '.' + CLS_ITEM);\n\t            if ((ej2_base_4.isNullOrUndefined(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n\t                return;\n\t            }\n\t            if (clst) {\n\t                itemObj = this.items[this.tbarEle.indexOf(clst)];\n\t            }\n\t            var eventArgs = { originalEvent: e, item: itemObj };\n\t            this.trigger('clicked', eventArgs);\n\t            if (isPopupElement && !eventArgs.cancel) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t        };\n\t        ;\n\t        Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n\t            var popObj = this.popObj;\n\t            if (ej2_base_2.isVisible(popObj.element)) {\n\t                popupNav.classList.remove(CLS_TBARNAVACT);\n\t                popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t            else {\n\t                if (ele.classList.contains(CLS_RTL)) {\n\t                    popObj.enableRtl = true;\n\t                    popObj.position = { X: 'left', Y: 'top' };\n\t                }\n\t                if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n\t                    popObj.enableRtl = false;\n\t                    popObj.position = { X: 'right', Y: 'top' };\n\t                }\n\t                popObj.dataBind();\n\t                popObj.element.style.top = this.element.offsetHeight + 'px';\n\t                popupNav.classList.add(CLS_TBARNAVACT);\n\t                popObj.show({ name: 'SlideDown', duration: 100 });\n\t            }\n\t        };\n\t        Toolbar.prototype.render = function () {\n\t            this.initialize();\n\t            this.renderControl();\n\t            this.wireEvents();\n\t        };\n\t        Toolbar.prototype.initialize = function () {\n\t            var width = ej2_base_4.formatUnit(this.width);\n\t            var height = ej2_base_4.formatUnit(this.height);\n\t            if (ej2_base_5.Browser.info.name !== 'msie' || this.height !== 'auto') {\n\t                ej2_base_3.setStyleAttribute(this.element, { 'height': height });\n\t            }\n\t            ej2_base_3.setStyleAttribute(this.element, { 'width': width });\n\t            var ariaAttr = {\n\t                'role': 'toolbar', 'aria-disabled': 'false', 'aria-haspopup': 'false', 'aria-orientation': 'horizontal',\n\t            };\n\t            ej2_base_2.attributes(this.element, ariaAttr);\n\t        };\n\t        Toolbar.prototype.renderControl = function () {\n\t            this.trgtEle = (this.element.children.length > 0) ? this.element.querySelector('div') : null;\n\t            this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n\t            this.renderItems();\n\t            this.renderOverflowMode();\n\t            if (this.tbarAlign) {\n\t                this.itemPositioning();\n\t            }\n\t        };\n\t        Toolbar.prototype.initHScroll = function (element, innerItems) {\n\t            if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n\t                if (this.tbarAlign) {\n\t                    this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n\t                }\n\t                this.scrollModule = new h_scroll_1.HScroll({ scrollStep: 50, enableRtl: this.enableRtl }, innerItems[0]);\n\t                this.remove(this.scrollModule.element, CLS_TBARPOS);\n\t                ej2_base_3.setStyleAttribute(this.element, { overflow: 'hidden' });\n\t            }\n\t        };\n\t        Toolbar.prototype.itemWidthCal = function (items) {\n\t            var width = 0;\n\t            [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEM, items)).forEach(function (el) {\n\t                width += (el.offsetWidth + parseFloat(window.getComputedStyle(el).marginRight));\n\t            });\n\t            return width;\n\t        };\n\t        Toolbar.prototype.checkOverflow = function (element, innerItem) {\n\t            if (ej2_base_4.isNullOrUndefined(element) || ej2_base_4.isNullOrUndefined(innerItem)) {\n\t                return false;\n\t            }\n\t            var eleWidth = element.offsetWidth;\n\t            var itemWidth;\n\t            if (this.tbarAlign || this.scrollModule) {\n\t                itemWidth = this.itemWidthCal(this.scrollModule ? innerItem.querySelector('.e-hscroll-content') : innerItem);\n\t            }\n\t            else {\n\t                itemWidth = innerItem.offsetWidth;\n\t            }\n\t            var popNav = element.querySelector('.' + CLS_TBARNAV);\n\t            var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n\t            if (itemWidth > eleWidth - (popNav ? popNav.offsetWidth : (scrollNav ? scrollNav.offsetWidth * 2 : 0))) {\n\t                return true;\n\t            }\n\t            else {\n\t                return false;\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshOverflow = function () {\n\t            this.resize();\n\t        };\n\t        Toolbar.prototype.renderOverflowMode = function () {\n\t            var ele = this.element;\n\t            var innerItems = ele.querySelector('.' + CLS_ITEMS);\n\t            if (ele && ele.children.length > 0) {\n\t                this.offsetWid = ele.offsetWidth;\n\t                switch (this.overflowMode) {\n\t                    case 'Scrollable':\n\t                        this.destroyHScroll();\n\t                        this.initHScroll(ele, ele.getElementsByClassName(CLS_ITEMS));\n\t                        break;\n\t                    case 'Popup':\n\t                        this.add(this.element, 'e-toolpop');\n\t                        if (this.tbarAlign) {\n\t                            this.removePositioning();\n\t                        }\n\t                        if (this.checkOverflow(ele, innerItems)) {\n\t                            this.createPopupEle(ele, [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n\t                            this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n\t                        }\n\t                        if (this.tbarAlign) {\n\t                            this.add(innerItems, CLS_TBARPOS);\n\t                            this.itemPositioning();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n\t            var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            if (!innerNav) {\n\t                this.createPopupIcon(ele);\n\t            }\n\t            innerNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            var eleWidth = (ele.offsetWidth - (innerNav.offsetWidth));\n\t            this.element.classList.remove('e-rtl');\n\t            ej2_base_3.setStyleAttribute(this.element, { direction: 'initial' });\n\t            this.checkPriority(ele, innerEle, eleWidth, true);\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            this.element.style.removeProperty('direction');\n\t            this.createPopup();\n\t        };\n\t        Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight) {\n\t            var element = tbarObj.element;\n\t            var nodes = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, ele);\n\t            var nodeIndex = 0;\n\t            var poppedEle = [].slice.call(ej2_base_3.selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n\t            var nodePri = 0;\n\t            poppedEle.forEach(function (el, index) {\n\t                nodes = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, ele);\n\t                if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n\t                    if (tbarObj.tbResize && nodes.length > index) {\n\t                        ele.insertBefore(el, nodes[index]);\n\t                        ++nodePri;\n\t                    }\n\t                    else {\n\t                        ele.insertBefore(el, ele.children[nodes.length]);\n\t                        ++nodePri;\n\t                    }\n\t                }\n\t                else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n\t                    ele.insertBefore(el, ele.firstChild);\n\t                    ++nodePri;\n\t                }\n\t                else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n\t                    ele.insertBefore(el, ele.firstChild);\n\t                    ++nodePri;\n\t                }\n\t                else if (el.classList.contains(CLS_POPOVERFLOW)) {\n\t                    popupPri.push(el);\n\t                }\n\t                else if (tbarObj.tbResize) {\n\t                    ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n\t                    ++nodeIndex;\n\t                }\n\t                else {\n\t                    ele.appendChild(el);\n\t                }\n\t                ej2_base_3.setStyleAttribute(el, { display: '', height: eleHeight + 'px' });\n\t            });\n\t            popupPri.forEach(function (el) {\n\t                ele.appendChild(el);\n\t            });\n\t            var tbarEle = ej2_base_3.selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n\t            for (var i = tbarEle.length - 1; i >= 0; i--) {\n\t                var tbarElement = tbarEle[i];\n\t                if (tbarElement.classList.contains(CLS_SEPARATOR)) {\n\t                    ej2_base_3.setStyleAttribute(tbarElement, { display: 'none' });\n\t                }\n\t                else {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopup = function () {\n\t            var element = this.element;\n\t            var eleHeight;\n\t            var eleItem;\n\t            eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_POPUP + ' )');\n\t            eleHeight = (element.style.height === 'auto' || element.style.height === '') ? null : eleItem.offsetHeight;\n\t            var ele;\n\t            var popupPri = [];\n\t            if (element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS)) {\n\t                ele = element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS);\n\t            }\n\t            else {\n\t                ele = ej2_base_3.createElement('div', { id: element.id + '_popup', className: CLS_POPUPCLASS });\n\t            }\n\t            this.pushingPoppedEle(this, popupPri, ele, eleHeight);\n\t            this.popupInit(element, ele);\n\t        };\n\t        Toolbar.prototype.popupInit = function (element, ele) {\n\t            if (!this.popObj) {\n\t                element.appendChild(ele);\n\t                ej2_base_3.setStyleAttribute(this.element, { overflow: '' });\n\t                var popup = new ej2_popups_1.Popup(null, {\n\t                    relateTo: this.element,\n\t                    offsetY: (element.offsetHeight),\n\t                    enableRtl: this.enableRtl,\n\t                    open: this.popupOpen.bind(this),\n\t                    close: this.popupClose,\n\t                    position: this.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }\n\t                });\n\t                popup.appendTo(ele);\n\t                ej2_base_1.EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n\t                ej2_base_1.EventHandler.add(document, 'click ', this.docEvent.bind(this));\n\t                popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n\t                popup.hide();\n\t                this.popObj = popup;\n\t                this.element.setAttribute('aria-haspopup', 'true');\n\t            }\n\t            else {\n\t                var popupEle = this.popObj.element;\n\t                ej2_base_3.setStyleAttribute(popupEle, { maxHeight: '', display: 'block' });\n\t                ej2_base_3.setStyleAttribute(popupEle, { maxHeight: popupEle.offsetHeight + 'px', display: '' });\n\t            }\n\t        };\n\t        Toolbar.prototype.popupOpen = function (e) {\n\t            var popObj = this.popObj;\n\t            var popupEle = this.popObj.element;\n\t            var toolEle = this.popObj.element.parentElement;\n\t            var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n\t            ej2_base_3.setStyleAttribute(popObj.element, { height: 'auto', maxHeight: '' });\n\t            popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n\t            var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + ej2_popups_2.calculatePosition(toolEle).top;\n\t            var popIcon = popupNav.firstElementChild;\n\t            popupNav.classList.add(CLS_TBARNAVACT);\n\t            ej2_base_2.classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n\t            var scrollVal = ej2_base_4.isNullOrUndefined(window.scrollY) ? 0 : window.scrollY;\n\t            if ((window.innerHeight + scrollVal) < popupElePos) {\n\t                var overflowHeight = (popupEle.offsetHeight - ((popupElePos - window.innerHeight - scrollVal) + 5));\n\t                popObj.height = overflowHeight + 'px';\n\t                ej2_base_3.setStyleAttribute(popObj.element, { maxHeight: overflowHeight + 'px' });\n\t            }\n\t        };\n\t        Toolbar.prototype.popupClose = function (e) {\n\t            var element = this.element.parentElement;\n\t            var popupNav = element.querySelector('.' + CLS_TBARNAV);\n\t            var popIcon = popupNav.firstElementChild;\n\t            popupNav.classList.remove(CLS_TBARNAVACT);\n\t            ej2_base_2.classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n\t        };\n\t        Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n\t            var len = inEle.length;\n\t            var eleWid = eleWidth;\n\t            var sepCheck = 0;\n\t            var itemCount = 0;\n\t            var itemPopCount = 0;\n\t            var checkClass = function (ele, val) {\n\t                var rVal = false;\n\t                val.forEach(function (cls) {\n\t                    if (ele.classList.contains(cls)) {\n\t                        rVal = true;\n\t                    }\n\t                });\n\t                return rVal;\n\t            };\n\t            for (var i = len - 1; i >= 0; i--) {\n\t                var mrgn = parseFloat((window.getComputedStyle(inEle[i])).marginRight);\n\t                mrgn += parseFloat((window.getComputedStyle(inEle[i])).marginLeft);\n\t                if (inEle[i] === this.tbarEle[0]) {\n\t                    this.tbarEleMrgn = mrgn;\n\t                }\n\t                if ((inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn) > eleWidth) {\n\t                    if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n\t                        if (sepCheck > 0 && itemCount === itemPopCount) {\n\t                            var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n\t                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n\t                                ej2_base_3.setStyleAttribute(sepEle, { display: 'none' });\n\t                            }\n\t                        }\n\t                        sepCheck++;\n\t                        itemCount = 0;\n\t                        itemPopCount = 0;\n\t                    }\n\t                    else {\n\t                        itemCount++;\n\t                    }\n\t                    if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n\t                        eleWidth -= (inEle[i].offsetWidth + (mrgn));\n\t                    }\n\t                    else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n\t                        inEle[i].classList.add(CLS_POPUP);\n\t                        ej2_base_3.setStyleAttribute(inEle[i], { display: 'none', minWidth: inEle[i].offsetWidth + 'px' });\n\t                        itemPopCount++;\n\t                    }\n\t                    else {\n\t                        eleWidth -= (inEle[i].offsetWidth + (mrgn));\n\t                    }\n\t                }\n\t            }\n\t            if (pre) {\n\t                var popedEle = ej2_base_3.selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n\t                this.checkPriority(ele, popedEle, eleWid, false);\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopupIcon = function (element) {\n\t            var id = element.id.concat('_nav');\n\t            var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n\t            var nav = ej2_base_3.createElement('div', { id: id, className: className });\n\t            if (ej2_base_5.Browser.info.name === 'msie' || ej2_base_5.Browser.info.name === 'edge') {\n\t                nav.classList.add('e-ie-align');\n\t            }\n\t            var navItem = ej2_base_3.createElement('div', { className: CLS_POPUPDOWN + ' e-icons' });\n\t            nav.appendChild(navItem);\n\t            nav.setAttribute('tabindex', '0');\n\t            element.appendChild(nav);\n\t        };\n\t        Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n\t            var ignoreCount = ig;\n\t            var popEle = this.popObj.element;\n\t            var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n\t            var priEleCnt = ej2_base_3.selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n\t            var checkClass = function (ele, val) {\n\t                return ele.classList.contains(val);\n\t            };\n\t            if (ej2_base_3.selectAll(query, inEle).length === 0) {\n\t                var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n\t                var ignoreCheck = (!ej2_base_4.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_TBARIGNORE));\n\t                if ((!ej2_base_4.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !ej2_base_2.isVisible(eleSep)) || ignoreCheck) {\n\t                    var sepDisplay = 'none';\n\t                    eleSep.style.display = 'inherit';\n\t                    var eleSepWidth = eleSep.offsetWidth + (parseFloat(window.getComputedStyle(eleSep).marginRight) * 2);\n\t                    var prevSep = eleSep.previousElementSibling;\n\t                    if ((elWid + eleSepWidth) < wid || des) {\n\t                        inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n\t                        if (!ej2_base_4.isNullOrUndefined(prevSep)) {\n\t                            prevSep.style.display = '';\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (prevSep.classList.contains(CLS_SEPARATOR)) {\n\t                            prevSep.style.display = sepDisplay;\n\t                        }\n\t                    }\n\t                    eleSep.style.display = '';\n\t                }\n\t                else {\n\t                    inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n\t                }\n\t            }\n\t            else {\n\t                inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - priEleCnt]);\n\t            }\n\t        };\n\t        Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n\t            var ele = this.element;\n\t            var popNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            var innerEle = ele.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(popNav)) {\n\t                return;\n\t            }\n\t            innerEle.removeAttribute('style');\n\t            popupEle.style.display = 'block';\n\t            var width = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n\t            this.popupEleRefresh(width, popupEle, destroy);\n\t            popupEle.style.display = '';\n\t            if (popupEle.children.length === 0 && popNav && this.popObj) {\n\t                ej2_base_2.detach(popNav);\n\t                popNav = null;\n\t                this.popObj.destroy();\n\t                ej2_base_2.detach(this.popObj.element);\n\t                this.popObj = null;\n\t                ele.setAttribute('aria-haspopup', 'false');\n\t                ele.classList.remove('e-toolpop');\n\t            }\n\t        };\n\t        Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n\t            var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n\t            var ignoreInx = [];\n\t            var count = 0;\n\t            if (ignoreEle.length > 0) {\n\t                ignoreEle.forEach(function (ele) {\n\t                    ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n\t                });\n\t            }\n\t            else {\n\t                return 0;\n\t            }\n\t            ignoreInx.forEach(function (val) {\n\t                if (val <= index) {\n\t                    count++;\n\t                }\n\t            });\n\t            return count;\n\t        };\n\t        Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n\t            var eleSplice = this.tbarEle;\n\t            var priEleCnt;\n\t            var index;\n\t            var checkOverflow;\n\t            var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n\t            var ignoreCount = 0;\n\t            var _loop_1 = function (el) {\n\t                el.style.position = 'absolute';\n\t                var elWidth = el.offsetWidth;\n\t                var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n\t                if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n\t                    var btn = el.children[0];\n\t                    if (!ej2_base_4.isNullOrUndefined(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n\t                        btnText.style.display = 'none';\n\t                    }\n\t                    else if (!ej2_base_4.isNullOrUndefined(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n\t                        btnText.style.display = 'block';\n\t                    }\n\t                    btn.style.minWidth = '0%';\n\t                    elWidth = el.offsetWidth;\n\t                    btn.style.minWidth = '';\n\t                    if (!ej2_base_4.isNullOrUndefined(btnText)) {\n\t                        btnText.style.display = '';\n\t                    }\n\t                }\n\t                if (el === this_1.tbarEle[0]) {\n\t                    elWidth += this_1.tbarEleMrgn;\n\t                }\n\t                el.style.position = '';\n\t                if (elWidth < width || destroy) {\n\t                    el.style.minWidth = '';\n\t                    if (!el.classList.contains(CLS_POPOVERFLOW)) {\n\t                        el.classList.remove(CLS_POPUP);\n\t                    }\n\t                    index = this_1.tbarEle.indexOf(el);\n\t                    if (this_1.tbarAlign) {\n\t                        var pos = this_1.items[index].align;\n\t                        index = this_1.tbarAlgEle[(pos + 's')].indexOf(el);\n\t                        eleSplice = this_1.tbarAlgEle[(pos + 's')];\n\t                        innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos);\n\t                    }\n\t                    var sepBeforePri_1 = 0;\n\t                    eleSplice.slice(0, index).forEach(function (el) {\n\t                        if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n\t                            if (el.classList.contains(CLS_SEPARATOR)) {\n\t                                el.style.display = '';\n\t                                width -= el.offsetWidth;\n\t                            }\n\t                            sepBeforePri_1++;\n\t                        }\n\t                    });\n\t                    ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n\t                    if (el.classList.contains(CLS_TBAROVERFLOW)) {\n\t                        this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    else if (index === 0) {\n\t                        innerEle.insertBefore(el, innerEle.firstChild);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    else {\n\t                        priEleCnt = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n\t                        innerEle.insertBefore(el, innerEle.children[(index + ignoreCount) - priEleCnt]);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    el.style.height = '';\n\t                }\n\t                else {\n\t                    return \"break\";\n\t                }\n\t            };\n\t            var this_1 = this;\n\t            for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n\t                var el = _a[_i];\n\t                var state_1 = _loop_1(el);\n\t                if (state_1 === \"break\")\n\t                    break;\n\t            }\n\t            checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);\n\t            if (checkOverflow && !destroy) {\n\t                this.renderOverflowMode();\n\t            }\n\t        };\n\t        Toolbar.prototype.removePositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n\t                return;\n\t            }\n\t            this.remove(item, CLS_TBARPOS);\n\t            var innerItem = [].slice.call(item.childNodes);\n\t            innerItem[1].removeAttribute('style');\n\t            innerItem[2].removeAttribute('style');\n\t        };\n\t        Toolbar.prototype.refreshPositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            this.add(item, CLS_TBARPOS);\n\t            this.itemPositioning();\n\t        };\n\t        Toolbar.prototype.itemPositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n\t                return;\n\t            }\n\t            var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n\t            var innerItem;\n\t            if (this.scrollModule) {\n\t                innerItem = [].slice.call(item.querySelector('.' + CLS_TBARSCROLL).children);\n\t            }\n\t            else {\n\t                innerItem = [].slice.call(item.childNodes);\n\t            }\n\t            var margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n\t            var tbarWid = this.element.offsetWidth;\n\t            if (popupNav) {\n\t                tbarWid -= popupNav.offsetWidth;\n\t                var popWid = popupNav.offsetWidth + 'px';\n\t                innerItem[2].removeAttribute('style');\n\t                this.enableRtl ? innerItem[2].style.left = popWid : innerItem[2].style.right = popWid;\n\t            }\n\t            if (tbarWid <= margin) {\n\t                return;\n\t            }\n\t            var value = (((tbarWid - margin)) - innerItem[1].offsetWidth) / 2;\n\t            innerItem[1].removeAttribute('style');\n\t            var mrgn = (innerItem[0].offsetWidth + value) + 'px';\n\t            this.enableRtl ? innerItem[1].style.marginRight = mrgn : innerItem[1].style.marginLeft = mrgn;\n\t        };\n\t        Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n\t            var _this = this;\n\t            var alignDiv = [];\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARLEFT }));\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARCENTER }));\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARRIGHT }));\n\t            if (pos === 0 && item.align !== 'left') {\n\t                alignDiv.forEach(function (ele) {\n\t                    itemEle.appendChild(ele);\n\t                });\n\t                this.tbarAlign = true;\n\t                this.add(itemEle, CLS_TBARPOS);\n\t            }\n\t            else if (item.align !== 'left') {\n\t                var alignEle = itemEle.childNodes;\n\t                var leftAlign_1 = alignDiv[0];\n\t                [].slice.call(alignEle).forEach(function (el) {\n\t                    _this.tbarAlgEle.lefts.push(el);\n\t                    leftAlign_1.appendChild(el);\n\t                });\n\t                itemEle.appendChild(leftAlign_1);\n\t                itemEle.appendChild(alignDiv[1]);\n\t                itemEle.appendChild(alignDiv[2]);\n\t                this.tbarAlign = true;\n\t                this.add(itemEle, CLS_TBARPOS);\n\t            }\n\t        };\n\t        Toolbar.prototype.ctrlTemplate = function () {\n\t            var _this = this;\n\t            this.ctrlTem = this.trgtEle.cloneNode(true);\n\t            this.add(this.trgtEle, CLS_ITEMS);\n\t            this.tbarEle = [];\n\t            var innerEle = [].slice.call(this.trgtEle.children);\n\t            innerEle.forEach(function (ele) {\n\t                if (ele.tagName === 'DIV') {\n\t                    _this.tbarEle.push(ele);\n\t                    ele.setAttribute('aria-disabled', 'false');\n\t                    _this.add(ele, CLS_ITEM);\n\t                }\n\t            });\n\t        };\n\t        Toolbar.prototype.renderItems = function () {\n\t            var ele = this.element;\n\t            var itemEleDom;\n\t            var innerItem;\n\t            var innerPos;\n\t            var items = this.items;\n\t            if (ele && ele.children.length > 0) {\n\t                itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n\t            }\n\t            if (this.trgtEle != null) {\n\t                this.ctrlTemplate();\n\t            }\n\t            else if (ele && items.length > 0) {\n\t                if (!itemEleDom) {\n\t                    itemEleDom = ej2_base_3.createElement('div', { className: CLS_ITEMS });\n\t                }\n\t                for (var i = 0; i < items.length; i++) {\n\t                    innerItem = this.renderSubComponent(items[i]);\n\t                    if (this.tbarEle.indexOf(innerItem) === -1) {\n\t                        this.tbarEle.push(innerItem);\n\t                    }\n\t                    if (!this.tbarAlign) {\n\t                        this.tbarItemAlign(items[i], itemEleDom, i);\n\t                    }\n\t                    innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n\t                    if (innerPos) {\n\t                        this.tbarAlgEle[(items[i].align + 's')].push(innerItem);\n\t                        innerPos.appendChild(innerItem);\n\t                    }\n\t                    else {\n\t                        itemEleDom.appendChild(innerItem);\n\t                    }\n\t                }\n\t                ele.appendChild(itemEleDom);\n\t            }\n\t        };\n\t        Toolbar.prototype.setAttr = function (attr, element) {\n\t            var key = Object.keys(attr);\n\t            var keyVal;\n\t            for (var i = 0; i < key.length; i++) {\n\t                keyVal = key[i];\n\t                keyVal === 'class' ? this.add(element, attr[keyVal]) : element.setAttribute(keyVal, attr[keyVal]);\n\t            }\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            var elements = items;\n\t            var len = elements.length;\n\t            if (ej2_base_4.isNullOrUndefined(isEnable)) {\n\t                isEnable = true;\n\t            }\n\t            var enable = function (isEnable, ele) {\n\t                if (isEnable) {\n\t                    ele.classList.remove(CLS_DISABLE);\n\t                    ele.setAttribute('aria-disabled', 'false');\n\t                }\n\t                else {\n\t                    ele.classList.add(CLS_DISABLE);\n\t                    ele.setAttribute('aria-disabled', 'true');\n\t                }\n\t            };\n\t            if (len && len > 1) {\n\t                for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n\t                    var ele = _a[_i];\n\t                    enable(isEnable, ele);\n\t                }\n\t                isEnable ? ej2_base_2.removeClass(elements, CLS_DISABLE) : ej2_base_2.addClass(elements, CLS_DISABLE);\n\t            }\n\t            else {\n\t                var ele = void 0;\n\t                ele = (len && len === 1) ? elements[0] : items;\n\t                enable(isEnable, ele);\n\t            }\n\t        };\n\t        Toolbar.prototype.addItems = function (items, index) {\n\t            var innerItems;\n\t            var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n\t            var innerEle;\n\t            var itemAgn = 'left';\n\t            if (ej2_base_4.isNullOrUndefined(index)) {\n\t                index = 0;\n\t            }\n\t            items.forEach(function (e) {\n\t                if (!ej2_base_4.isNullOrUndefined(e.align) && e.align !== 'left' && itemAgn === 'left') {\n\t                    itemAgn = e.align;\n\t                }\n\t            });\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                if (ej2_base_4.isNullOrUndefined(item.type)) {\n\t                    item.type = 'Button';\n\t                }\n\t                innerItems = ej2_base_3.selectAll('.' + CLS_ITEM, this.element);\n\t                item.align = itemAgn;\n\t                innerEle = this.renderSubComponent(item);\n\t                if (this.tbarEle.length >= index && innerItems.length > 0) {\n\t                    this.destroyMode();\n\t                    if (this.tbarAlign) {\n\t                        var algIndex = item.align[0] === 'l' ? 0 : item.align[0] === 'c' ? 1 : 2;\n\t                        var ele = void 0;\n\t                        ele = ej2_base_2.closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n\t                        ele.insertBefore(innerEle, ele.children[index]);\n\t                        this.tbarAlgEle[(item.align + 's')].splice(index, 0, innerEle);\n\t                        this.refreshPositioning();\n\t                    }\n\t                    else {\n\t                        innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n\t                    }\n\t                    this.items.splice(index, 0, item);\n\t                    this.tbarEle.splice(index, 0, innerEle);\n\t                    index++;\n\t                    this.offsetWid = itemsDiv.offsetWidth;\n\t                }\n\t            }\n\t            itemsDiv.style.width = '';\n\t            this.renderOverflowMode();\n\t        };\n\t        Toolbar.prototype.removeItems = function (args) {\n\t            var elements = args;\n\t            var index;\n\t            var innerItems = [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEM, this.element));\n\t            if (typeof (elements) === 'number') {\n\t                index = parseInt(args.toString(), 10);\n\t                this.removeItemByIndex(index, innerItems);\n\t            }\n\t            else {\n\t                if (elements && elements.length > 1) {\n\t                    for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n\t                        var ele = _a[_i];\n\t                        index = this.tbarEle.indexOf(ele);\n\t                        this.removeItemByIndex(index, innerItems);\n\t                        innerItems = ej2_base_3.selectAll('.' + CLS_ITEM, this.element);\n\t                    }\n\t                }\n\t                else {\n\t                    var ele = (elements && elements.length && elements.length === 1) ? elements[0] : args;\n\t                    index = innerItems.indexOf(ele);\n\t                    this.removeItemByIndex(index, innerItems);\n\t                }\n\t            }\n\t            this.resize();\n\t        };\n\t        Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n\t            if (this.tbarEle[index] && innerItems[index]) {\n\t                var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n\t                if (this.tbarAlign) {\n\t                    var indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's')].indexOf(this.tbarEle[eleIdx]);\n\t                    this.tbarAlgEle[(this.items[eleIdx].align + 's')].splice(indexAgn, 1);\n\t                }\n\t                ej2_base_2.detach(innerItems[index]);\n\t                this.items.splice(eleIdx, 1);\n\t                this.tbarEle.splice(eleIdx, 1);\n\t            }\n\t        };\n\t        Toolbar.prototype.templateRender = function (templateProp, innerEle, item) {\n\t            var itemType = item.type;\n\t            var eleObj = templateProp;\n\t            var isComponent;\n\t            if (typeof (templateProp) === 'object') {\n\t                isComponent = typeof (eleObj.appendTo) === 'function';\n\t            }\n\t            if (typeof (templateProp) === 'string' || !isComponent) {\n\t                var templateFn = void 0;\n\t                var val = templateProp;\n\t                val = (typeof (templateProp) === 'string') ? templateProp.trim() : templateProp;\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(val).length) {\n\t                        var ele = document.querySelector(val);\n\t                        templateFn = ej2_base_4.compile(ele.outerHTML.trim());\n\t                        ej2_base_2.detach(ele);\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    templateFn = ej2_base_4.compile(val);\n\t                }\n\t                var tempArray = void 0;\n\t                if (!ej2_base_4.isNullOrUndefined(templateFn)) {\n\t                    tempArray = templateFn({}, this, 'template');\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(tempArray) && tempArray.length > 0) {\n\t                    [].slice.call(tempArray).forEach(function (ele) {\n\t                        if (!ej2_base_4.isNullOrUndefined(ele.tagName)) {\n\t                            ele.style.display = '';\n\t                        }\n\t                        innerEle.appendChild(ele);\n\t                    });\n\t                }\n\t            }\n\t            else if (itemType === 'Input') {\n\t                var ele = ej2_base_3.createElement('input');\n\t                item.id ? (ele.id = item.id) : (ele.id = ej2_base_4.getUniqueID('tbr-ipt'));\n\t                innerEle.appendChild(ele);\n\t                eleObj.appendTo(ele);\n\t            }\n\t            this.add(innerEle, CLS_TEMPLATE);\n\t            this.tbarEle.push(innerEle);\n\t        };\n\t        Toolbar.prototype.buttonRendering = function (item, innerEle) {\n\t            var dom = ej2_base_3.createElement('button', { className: CLS_TBARBTN });\n\t            dom.setAttribute('type', 'button');\n\t            var textStr = item.text;\n\t            var iconCss;\n\t            var iconPos;\n\t            item.id ? (dom.id = item.id) : dom.id = ej2_base_4.getUniqueID('e-tbr-btn');\n\t            var btnTxt = ej2_base_3.createElement('div', { className: 'e-tbar-btn-text' });\n\t            if (textStr) {\n\t                btnTxt.innerHTML = textStr;\n\t                dom.appendChild(btnTxt);\n\t                dom.classList.add('e-tbtn-txt');\n\t            }\n\t            else {\n\t                this.add(innerEle, 'e-tbtn-align');\n\t            }\n\t            if (item.prefixIcon || item.suffixIcon) {\n\t                if ((item.prefixIcon && item.suffixIcon) || item.prefixIcon) {\n\t                    iconCss = item.prefixIcon + ' e-icons';\n\t                    iconPos = 'left';\n\t                }\n\t                else {\n\t                    iconCss = item.suffixIcon + ' e-icons';\n\t                    iconPos = 'right';\n\t                }\n\t            }\n\t            new ej2_buttons_1.Button({ iconCss: iconCss, iconPosition: iconPos }, dom);\n\t            if (item.width) {\n\t                ej2_base_3.setStyleAttribute(dom, { 'width': ej2_base_4.formatUnit(item.width) });\n\t            }\n\t            return dom;\n\t        };\n\t        Toolbar.prototype.renderSubComponent = function (item) {\n\t            var innerEle;\n\t            var dom;\n\t            innerEle = ej2_base_3.createElement('div', { className: CLS_ITEM });\n\t            innerEle.setAttribute('aria-disabled', 'false');\n\t            if (!this.tbarEle) {\n\t                this.tbarEle = [];\n\t            }\n\t            if (item.htmlAttributes) {\n\t                this.setAttr(item.htmlAttributes, innerEle);\n\t            }\n\t            if (item.tooltipText) {\n\t                innerEle.setAttribute('title', item.tooltipText);\n\t            }\n\t            if (item.cssClass) {\n\t                innerEle.className = innerEle.className + ' ' + item.cssClass;\n\t            }\n\t            if (item.template) {\n\t                this.templateRender(item.template, innerEle, item);\n\t            }\n\t            else {\n\t                switch (item.type) {\n\t                    case 'Button':\n\t                        dom = this.buttonRendering(item, innerEle);\n\t                        dom.setAttribute('tabindex', '-1');\n\t                        innerEle.appendChild(dom);\n\t                        innerEle.addEventListener('click', this.itemClick.bind(this));\n\t                        break;\n\t                    case 'Separator':\n\t                        this.add(innerEle, CLS_SEPARATOR);\n\t                        break;\n\t                }\n\t            }\n\t            if (item.showTextOn) {\n\t                var sTxt = item.showTextOn;\n\t                if (sTxt === 'Toolbar') {\n\t                    this.add(innerEle, CLS_POPUPTEXT);\n\t                    this.add(innerEle, 'e-tbtn-align');\n\t                }\n\t                else if (sTxt === 'Overflow') {\n\t                    this.add(innerEle, CLS_TBARTEXT);\n\t                }\n\t            }\n\t            if (item.overflow) {\n\t                var overflow = item.overflow;\n\t                if (overflow === 'Show') {\n\t                    this.add(innerEle, CLS_TBAROVERFLOW);\n\t                }\n\t                else if (overflow === 'Hide') {\n\t                    if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n\t                        this.add(innerEle, CLS_POPOVERFLOW);\n\t                    }\n\t                }\n\t            }\n\t            return innerEle;\n\t        };\n\t        Toolbar.prototype.itemClick = function (e) {\n\t            this.activeEleSwitch(e.currentTarget);\n\t        };\n\t        Toolbar.prototype.activeEleSwitch = function (ele) {\n\t            this.activeEleRemove(ele.firstElementChild);\n\t            this.activeEle.focus();\n\t        };\n\t        Toolbar.prototype.activeEleRemove = function (curEle) {\n\t            if (!ej2_base_4.isNullOrUndefined(this.activeEle)) {\n\t                this.activeEle.setAttribute('tabindex', '-1');\n\t            }\n\t            this.activeEle = curEle;\n\t            if (ej2_base_4.isNullOrUndefined(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n\t                curEle.removeAttribute('tabindex');\n\t            }\n\t            else {\n\t                this.activeEle.setAttribute('tabindex', '0');\n\t            }\n\t        };\n\t        Toolbar.prototype.getPersistData = function () {\n\t            return this.addOnPersist([]);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        Toolbar.prototype.resize = function () {\n\t            var ele = this.element;\n\t            this.tbResize = true;\n\t            if (this.tbarAlign) {\n\t                this.itemPositioning();\n\t            }\n\t            if (this.popObj) {\n\t                this.popObj.hide();\n\t            }\n\t            var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n\t            if (!checkOverflow) {\n\t                this.destroyHScroll();\n\t            }\n\t            if (checkOverflow && this.scrollModule && (this.offsetWid === ele.offsetWidth)) {\n\t                return;\n\t            }\n\t            if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n\t                this.renderOverflowMode();\n\t            }\n\t            if (this.popObj) {\n\t                if (this.tbarAlign) {\n\t                    this.removePositioning();\n\t                }\n\t                this.popupRefresh(this.popObj.element, false);\n\t                if (this.tbarAlign) {\n\t                    this.refreshPositioning();\n\t                }\n\t            }\n\t            this.offsetWid = ele.offsetWidth;\n\t            this.tbResize = false;\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var tEle = this.element;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'items':\n\t                        this.destroyMode();\n\t                        this.destroyItems();\n\t                        this.renderItems();\n\t                        this.renderOverflowMode();\n\t                        break;\n\t                    case 'width':\n\t                        var wid = tEle.offsetWidth;\n\t                        ej2_base_3.setStyleAttribute(tEle, { 'width': ej2_base_4.formatUnit(newProp.width) });\n\t                        this.renderOverflowMode();\n\t                        if (this.popObj && wid < tEle.offsetWidth) {\n\t                            this.popupRefresh(this.popObj.element, false);\n\t                        }\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_3.setStyleAttribute(this.element, { 'height': ej2_base_4.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'overflowMode':\n\t                        this.destroyMode();\n\t                        this.renderOverflowMode();\n\t                        if (this.enableRtl) {\n\t                            this.add(tEle, CLS_RTL);\n\t                        }\n\t                        this.refreshOverflow();\n\t                        break;\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.add(tEle, CLS_RTL) : this.remove(tEle, CLS_RTL);\n\t                        if (!ej2_base_4.isNullOrUndefined(this.scrollModule)) {\n\t                            newProp.enableRtl ? this.add(this.scrollModule.element, CLS_RTL) : this.remove(this.scrollModule.element, CLS_RTL);\n\t                        }\n\t                        if (!ej2_base_4.isNullOrUndefined(this.popObj)) {\n\t                            newProp.enableRtl ? this.add(this.popObj.element, CLS_RTL) : this.remove(this.popObj.element, CLS_RTL);\n\t                        }\n\t                        if (this.tbarAlign) {\n\t                            this.itemPositioning();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Toolbar;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Item)\n\t    ], Toolbar.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Toolbar.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Toolbar.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Scrollable')\n\t    ], Toolbar.prototype, \"overflowMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Toolbar.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"clicked\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"beforeCreate\", void 0);\n\t    Toolbar = __decorate([\n\t        ej2_base_5.NotifyPropertyChanges\n\t    ], Toolbar);\n\t    exports.Toolbar = Toolbar;\n\t    exports.toolbarBuilder = ej2_base_5.CreateBuilder(Toolbar);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, accordion_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(accordion_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_base_6) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ACRDN_ROOT = 'e-acrdn-root';\n\t    var CLS_ROOT = 'e-accordion';\n\t    var CLS_ITEM = 'e-acrdn-item';\n\t    var CLS_ITEMFOCUS = 'e-item-focus';\n\t    var CLS_ITEMHIDE = 'e-hide';\n\t    var CLS_HEADER = 'e-acrdn-header';\n\t    var CLS_HEADERICN = 'e-acrdn-header-icon';\n\t    var CLS_HEADERCTN = 'e-acrdn-header-content';\n\t    var CLS_CONTENT = 'e-acrdn-panel';\n\t    var CLS_CTENT = 'e-content';\n\t    var CLS_TOOGLEICN = 'e-toggle-icon';\n\t    var CLS_COLLAPSEICN = 'e-tgl-collapse-icon e-icons';\n\t    var CLS_EXPANDICN = 'e-expand-icon';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_CTNHIDE = 'e-content-hide';\n\t    var CLS_SLCT = 'e-select';\n\t    var CLS_SLCTED = 'e-selected';\n\t    var CLS_ACTIVE = 'e-active';\n\t    var CLS_ANIMATE = 'e-animate';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_TOGANIMATE = 'e-toggle-animation';\n\t    var CLS_NEST = 'e-nested';\n\t    var CLS_EXPANDSTATE = 'e-expand-state';\n\t    var AccordionActionSettings = (function (_super) {\n\t        __extends(AccordionActionSettings, _super);\n\t        function AccordionActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionActionSettings;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('SlideDown')\n\t    ], AccordionActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(400)\n\t    ], AccordionActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('linear')\n\t    ], AccordionActionSettings.prototype, \"easing\", void 0);\n\t    exports.AccordionActionSettings = AccordionActionSettings;\n\t    var AccordionAnimationSettings = (function (_super) {\n\t        __extends(AccordionAnimationSettings, _super);\n\t        function AccordionAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionAnimationSettings;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_5.Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, AccordionActionSettings)\n\t    ], AccordionAnimationSettings.prototype, \"collapse\", void 0);\n\t    __decorate([\n\t        ej2_base_5.Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, AccordionActionSettings)\n\t    ], AccordionAnimationSettings.prototype, \"expand\", void 0);\n\t    exports.AccordionAnimationSettings = AccordionAnimationSettings;\n\t    var AccordionItem = (function (_super) {\n\t        __extends(AccordionItem, _super);\n\t        function AccordionItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionItem;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"header\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], AccordionItem.prototype, \"expanded\", void 0);\n\t    exports.AccordionItem = AccordionItem;\n\t    var Accordion = (function (_super) {\n\t        __extends(Accordion, _super);\n\t        function Accordion(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.keyConfigs = {\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow',\n\t                enter: 'enter',\n\t                space: 'space',\n\t                home: 'home',\n\t                end: 'end',\n\t            };\n\t            return _this;\n\t        }\n\t        Accordion.prototype.destroy = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            _super.prototype.destroy.call(this);\n\t            this.unwireEvents();\n\t            this.isDestroy = true;\n\t            while (ele.firstChild) {\n\t                ele.removeChild(ele.firstChild);\n\t            }\n\t            if (this.trgtEle) {\n\t                while (this.ctrlTem.firstChild) {\n\t                    ele.appendChild(this.ctrlTem.firstChild);\n\t                }\n\t            }\n\t            ele.removeAttribute('style');\n\t            ['aria-disabled', 'aria-multiselectable', 'role'].forEach(function (attrb) {\n\t                _this.element.removeAttribute(attrb);\n\t            });\n\t        };\n\t        Accordion.prototype.preRender = function () {\n\t            var nested = ej2_base_3.closest(this.element, '.' + CLS_CONTENT);\n\t            this.isNested = false;\n\t            if (!this.isDestroy) {\n\t                this.isDestroy = false;\n\t            }\n\t            if (!ej2_base_6.isNullOrUndefined(nested)) {\n\t                nested.classList.add(CLS_NEST);\n\t                this.isNested = true;\n\t            }\n\t            else {\n\t                this.element.classList.add(CLS_ACRDN_ROOT);\n\t            }\n\t            if (this.enableRtl) {\n\t                this.add(this.element, CLS_RTL);\n\t            }\n\t            this.expandedItems = [];\n\t        };\n\t        Accordion.prototype.add = function (ele, val) {\n\t            ele.classList.add(val);\n\t        };\n\t        Accordion.prototype.remove = function (ele, val) {\n\t            ele.classList.remove(val);\n\t        };\n\t        Accordion.prototype.render = function () {\n\t            this.initialize();\n\t            this.renderControl();\n\t            this.wireEvents();\n\t        };\n\t        Accordion.prototype.initialize = function () {\n\t            var width = ej2_base_6.formatUnit(this.width);\n\t            var height = ej2_base_6.formatUnit(this.height);\n\t            ej2_base_5.setStyleAttribute(this.element, { 'width': width, 'height': height });\n\t            var ariaAttr = {\n\t                'aria-disabled': 'false', 'role': 'presentation', 'aria-multiselectable': 'true'\n\t            };\n\t            if (this.expandedItems.length > 0) {\n\t                this.initExpand = this.expandedItems;\n\t            }\n\t            ej2_base_3.attributes(this.element, ariaAttr);\n\t            if (this.expandMode === 'Single') {\n\t                this.element.setAttribute('aria-multiselectable', 'false');\n\t            }\n\t        };\n\t        Accordion.prototype.renderControl = function () {\n\t            this.trgtEle = (this.element.children.length > 0) ? ej2_base_3.select('div', this.element) : null;\n\t            this.renderItems();\n\t            this.initItemExpand();\n\t        };\n\t        Accordion.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t            if (!ej2_base_6.isNullOrUndefined(this.keyModule)) {\n\t                this.keyModule.destroy();\n\t            }\n\t        };\n\t        Accordion.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t            if (!this.isNested && !this.isDestroy) {\n\t                ej2_base_1.rippleEffect(this.element, { selector: '.' + CLS_HEADER });\n\t            }\n\t            if (!this.isNested) {\n\t                this.keyModule = new ej2_base_1.KeyboardEvents(this.element, {\n\t                    keyAction: this.keyActionHandler.bind(this),\n\t                    keyConfigs: this.keyConfigs,\n\t                    eventName: 'keydown'\n\t                });\n\t            }\n\t        };\n\t        Accordion.prototype.focusIn = function (e) {\n\t            e.target.parentElement.classList.add(CLS_ITEMFOCUS);\n\t        };\n\t        Accordion.prototype.focusOut = function (e) {\n\t            e.target.parentElement.classList.remove(CLS_ITEMFOCUS);\n\t        };\n\t        Accordion.prototype.ctrlTemplate = function () {\n\t            var _this = this;\n\t            this.ctrlTem = this.element.cloneNode(true);\n\t            var innerEles = this.element.children;\n\t            var content;\n\t            ej2_base_3.addClass(innerEles, [CLS_ITEM]);\n\t            [].slice.call(innerEles).forEach(function (el) {\n\t                el.id = ej2_base_2.getUniqueID('acrdn_item');\n\t                if (el.children.length > 0) {\n\t                    _this.add(el.children[0], CLS_HEADER);\n\t                    var header = el.children[0];\n\t                    ej2_base_3.attributes(header, { 'tabindex': '0', 'role': 'heading', 'aria-level': innerEles.length.toString() });\n\t                    header.id = ej2_base_2.getUniqueID('acrdn_header');\n\t                    ej2_base_1.EventHandler.add(header, 'focus', _this.focusIn, _this);\n\t                    ej2_base_1.EventHandler.add(header, 'blur', _this.focusOut, _this);\n\t                    var headerEle = header.firstElementChild;\n\t                    if (headerEle) {\n\t                        headerEle.classList.add(CLS_HEADERCTN);\n\t                    }\n\t                    content = el.children[1];\n\t                    if (content) {\n\t                        content.id = ej2_base_2.getUniqueID('acrdn_panel');\n\t                        header.setAttribute('aria-controls', content.id);\n\t                        content.style.display = '';\n\t                        el.classList.add(CLS_SLCT);\n\t                        el.children[0].appendChild(_this.toggleIconGenerate());\n\t                        ej2_base_3.classList(content, [CLS_CONTENT, CLS_CTNHIDE], []);\n\t                        ej2_base_3.attributes(content, { 'aria-labelledby': header.id, 'aria-hidden': 'true' });\n\t                        content = content.firstElementChild;\n\t                        if (content) {\n\t                            content.classList.add(CLS_CTENT);\n\t                            content.style.display = '';\n\t                        }\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        Accordion.prototype.toggleIconGenerate = function () {\n\t            var tglIcon = ej2_base_5.createElement('div', { className: CLS_TOOGLEICN });\n\t            var hdrColIcon = ej2_base_5.createElement('span', { className: CLS_COLLAPSEICN });\n\t            tglIcon.appendChild(hdrColIcon);\n\t            return tglIcon;\n\t        };\n\t        Accordion.prototype.initItemExpand = function () {\n\t            var len = this.initExpand.length;\n\t            if (len === 0) {\n\t                return;\n\t            }\n\t            if (this.expandMode === 'Single') {\n\t                this.expandItem(true, this.initExpand[len - 1]);\n\t            }\n\t            else {\n\t                for (var i = 0; i < len; i++) {\n\t                    this.expandItem(true, this.initExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.renderItems = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            var innerItem;\n\t            if (ej2_base_6.isNullOrUndefined(this.initExpand)) {\n\t                this.initExpand = [];\n\t            }\n\t            var items = this.items;\n\t            if (!ej2_base_6.isNullOrUndefined(this.trgtEle)) {\n\t                this.ctrlTemplate();\n\t            }\n\t            else if (ele && items.length > 0) {\n\t                items.forEach(function (item, index) {\n\t                    innerItem = _this.renderInnerItem(item, index);\n\t                    ele.appendChild(innerItem);\n\t                    if (innerItem.childElementCount > 0) {\n\t                        ej2_base_1.EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'focus', _this.focusIn, _this);\n\t                        ej2_base_1.EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'blur', _this.focusOut, _this);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Accordion.prototype.clickHandler = function (e) {\n\t            var _this = this;\n\t            var trgt = e.target;\n\t            var eventArgs = {};\n\t            var index;\n\t            var tglIcon;\n\t            var acrdEle = ej2_base_3.closest(trgt, '.' + CLS_ROOT);\n\t            if (acrdEle !== this.element) {\n\t                return;\n\t            }\n\t            trgt.classList.add('e-target');\n\t            var acrdnItem = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            var acrdnHdr = ej2_base_3.closest(trgt, '.' + CLS_HEADER);\n\t            var acrdnCtn = ej2_base_3.closest(trgt, '.' + CLS_CONTENT);\n\t            if (acrdnItem && (ej2_base_6.isNullOrUndefined(acrdnHdr) || ej2_base_6.isNullOrUndefined(acrdnCtn))) {\n\t                acrdnHdr = acrdnItem.children[0];\n\t                acrdnCtn = acrdnItem.children[1];\n\t            }\n\t            if (acrdnHdr) {\n\t                tglIcon = ej2_base_3.select('.' + CLS_TOOGLEICN, acrdnHdr);\n\t            }\n\t            var acrdnCtnItem;\n\t            if (acrdnCtn) {\n\t                acrdnCtnItem = ej2_base_3.closest(acrdnCtn, '.' + CLS_ITEM);\n\t            }\n\t            var acrdActive = [];\n\t            index = this.getIndexByItem(acrdnItem);\n\t            if (acrdnCtnItem) {\n\t                eventArgs.item = this.items[this.getIndexByItem(acrdnCtnItem)];\n\t            }\n\t            eventArgs.originalEvent = e;\n\t            var ctnCheck = !ej2_base_6.isNullOrUndefined(tglIcon) && ej2_base_6.isNullOrUndefined(this.trgtEle) && acrdnItem.childElementCount <= 1;\n\t            if (ctnCheck && (ej2_base_6.isNullOrUndefined(acrdnCtn) || !ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_HEADER + ' .' + CLS_TOOGLEICN, acrdnCtnItem)))) {\n\t                acrdnItem.appendChild(this.contentRendering(index));\n\t                this.ariaAttrUpdate(acrdnItem);\n\t            }\n\t            this.trigger('clicked', eventArgs);\n\t            var cntclkCheck = (acrdnCtn && !ej2_base_6.isNullOrUndefined(ej2_base_3.select('.e-target', acrdnCtn)));\n\t            cntclkCheck = cntclkCheck && (ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_ROOT, acrdnCtn)) || !(ej2_base_3.closest(trgt, '.' + CLS_ROOT) === this.element));\n\t            trgt.classList.remove('e-target');\n\t            if (trgt.classList.contains(CLS_CONTENT) || trgt.classList.contains(CLS_CTENT) || cntclkCheck) {\n\t                return;\n\t            }\n\t            [].slice.call(this.element.children).forEach(function (el) {\n\t                if (el.classList.contains(CLS_ACTIVE)) {\n\t                    acrdActive.push(el);\n\t                }\n\t            });\n\t            var acrdAniEle = [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM + ' [' + CLS_ANIMATE + ']'));\n\t            if (acrdAniEle.length > 0) {\n\t                for (var _i = 0, acrdAniEle_1 = acrdAniEle; _i < acrdAniEle_1.length; _i++) {\n\t                    var el = acrdAniEle_1[_i];\n\t                    acrdActive.push(el.parentElement);\n\t                }\n\t            }\n\t            var sameContentCheck = acrdActive.indexOf(acrdnCtnItem) !== -1 && acrdnCtn.getAttribute('e-animate') === 'true';\n\t            var sameHeader = false;\n\t            if (!ej2_base_6.isNullOrUndefined(acrdnItem) && !ej2_base_6.isNullOrUndefined(acrdnHdr)) {\n\t                var acrdnCtn_1 = ej2_base_3.select('.' + CLS_CONTENT, acrdnItem);\n\t                var acrdnRoot = ej2_base_3.closest(acrdnItem, '.' + CLS_ACRDN_ROOT);\n\t                var expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n\t                if (ej2_base_6.isNullOrUndefined(acrdnCtn_1)) {\n\t                    return;\n\t                }\n\t                sameHeader = (expandState === acrdnItem);\n\t                if (ej2_base_3.isVisible(acrdnCtn_1) && (!sameContentCheck || acrdnCtnItem.classList.contains(CLS_SLCTED))) {\n\t                    this.collapse(acrdnCtn_1);\n\t                }\n\t                else {\n\t                    if ((acrdActive.length > 0) && this.expandMode === 'Single' && !sameContentCheck) {\n\t                        acrdActive.forEach(function (el) {\n\t                            _this.collapse(ej2_base_3.select('.' + CLS_CONTENT, el));\n\t                            el.classList.remove(CLS_EXPANDSTATE);\n\t                        });\n\t                    }\n\t                    this.expand(acrdnCtn_1);\n\t                }\n\t                if (!ej2_base_6.isNullOrUndefined(expandState) && !sameHeader) {\n\t                    expandState.classList.remove(CLS_EXPANDSTATE);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.eleMoveFocus = function (action, root, trgt) {\n\t            var clst;\n\t            var clstItem = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (trgt === root) {\n\t                clst = ((action === 'moveUp' ? trgt.lastElementChild : trgt).querySelector('.' + CLS_HEADER));\n\t            }\n\t            else if (trgt.classList.contains(CLS_HEADER)) {\n\t                clstItem = (action === 'moveUp' ? clstItem.previousElementSibling : clstItem.nextElementSibling);\n\t                if (clstItem) {\n\t                    clst = ej2_base_3.select('.' + CLS_HEADER, clstItem);\n\t                }\n\t            }\n\t            if (clst) {\n\t                clst.focus();\n\t            }\n\t        };\n\t        Accordion.prototype.keyActionHandler = function (e) {\n\t            e.preventDefault();\n\t            var clst;\n\t            var root = this.element;\n\t            var trgt = e.target;\n\t            var content;\n\t            switch (e.action) {\n\t                case 'moveUp':\n\t                    this.eleMoveFocus(e.action, root, trgt);\n\t                    break;\n\t                case 'moveDown':\n\t                    this.eleMoveFocus(e.action, root, trgt);\n\t                    break;\n\t                case 'space':\n\t                case 'enter':\n\t                    content = trgt.nextElementSibling;\n\t                    if (!ej2_base_6.isNullOrUndefined(content) && content.classList.contains(CLS_CONTENT)) {\n\t                        if (content.getAttribute('e-animate') !== 'true') {\n\t                            trgt.click();\n\t                        }\n\t                    }\n\t                    else {\n\t                        trgt.click();\n\t                    }\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    clst = e.action === 'home' ? root.firstElementChild.children[0] : root.lastElementChild.children[0];\n\t                    clst.focus();\n\t                    break;\n\t            }\n\t        };\n\t        Accordion.prototype.headerEleGenerate = function () {\n\t            var header = ej2_base_5.createElement('div', { className: CLS_HEADER, id: ej2_base_2.getUniqueID('acrdn_header') });\n\t            var ariaAttr = {\n\t                'tabindex': '0', 'role': 'heading', 'aria-expanded': 'false', 'aria-selected': 'false',\n\t                'aria-disabled': 'false', 'aria-level': this.items.length.toString()\n\t            };\n\t            ej2_base_3.attributes(header, ariaAttr);\n\t            return header;\n\t        };\n\t        Accordion.prototype.renderInnerItem = function (item, index) {\n\t            var innerEle;\n\t            innerEle = ej2_base_5.createElement('div', { className: CLS_ITEM });\n\t            innerEle.id = ej2_base_2.getUniqueID('acrdn_item');\n\t            if (item.header) {\n\t                var ctnEle = this.headerEleGenerate();\n\t                var hdrEle = ej2_base_5.createElement('div', { className: CLS_HEADERCTN });\n\t                ctnEle.appendChild(hdrEle);\n\t                ctnEle.appendChild(this.fetchElement(hdrEle, item.header, index, true));\n\t                innerEle.appendChild(ctnEle);\n\t            }\n\t            var hdr = ej2_base_3.select('.' + CLS_HEADER, innerEle);\n\t            if (item.expanded && !ej2_base_6.isNullOrUndefined(index) && (!this.enablePersistence)) {\n\t                if (this.initExpand.indexOf(index) === -1) {\n\t                    this.initExpand.push(index);\n\t                }\n\t            }\n\t            if (item.cssClass) {\n\t                innerEle.classList.add(item.cssClass);\n\t            }\n\t            if (item.iconCss) {\n\t                var hdrIcnEle = ej2_base_5.createElement('div', { className: CLS_HEADERICN });\n\t                var icon = ej2_base_5.createElement('span', { className: item.iconCss + ' e-icons' });\n\t                hdrIcnEle.appendChild(icon);\n\t                if (ej2_base_6.isNullOrUndefined(hdr)) {\n\t                    hdr = this.headerEleGenerate();\n\t                    hdr.appendChild(hdrIcnEle);\n\t                    innerEle.appendChild(hdr);\n\t                }\n\t                else {\n\t                    hdr.insertBefore(hdrIcnEle, hdr.childNodes[0]);\n\t                }\n\t            }\n\t            if (item.content) {\n\t                var hdrIcon = this.toggleIconGenerate();\n\t                if (ej2_base_6.isNullOrUndefined(hdr)) {\n\t                    hdr = this.headerEleGenerate();\n\t                    innerEle.appendChild(hdr);\n\t                }\n\t                hdr.appendChild(hdrIcon);\n\t                this.add(innerEle, CLS_SLCT);\n\t            }\n\t            return innerEle;\n\t        };\n\t        Accordion.prototype.fetchElement = function (ele, value, index, isHeader) {\n\t            var templateFn;\n\t            var temString;\n\t            try {\n\t                if (document.querySelectorAll(value).length) {\n\t                    var eleVal = document.querySelector(value);\n\t                    temString = eleVal.outerHTML.trim();\n\t                    templateFn = ej2_base_2.compile(temString);\n\t                    ej2_base_3.detach(eleVal);\n\t                }\n\t            }\n\t            catch (e) {\n\t                templateFn = ej2_base_2.compile(value);\n\t            }\n\t            if (!ej2_base_6.isNullOrUndefined(templateFn) && templateFn().length > 0 && !(ej2_base_6.isNullOrUndefined(templateFn()[0].tagName) && templateFn().length === 1)) {\n\t                [].slice.call(templateFn()).forEach(function (el) {\n\t                    if (!ej2_base_6.isNullOrUndefined(el.tagName)) {\n\t                        el.style.display = '';\n\t                    }\n\t                    ele.appendChild(el);\n\t                });\n\t                if (!ej2_base_6.isNullOrUndefined(temString)) {\n\t                    if (isHeader) {\n\t                        this.items[index].header = temString;\n\t                    }\n\t                    else {\n\t                        this.items[index].content = temString;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                ele.innerHTML = value;\n\t            }\n\t            return ele;\n\t        };\n\t        Accordion.prototype.ariaAttrUpdate = function (itemEle) {\n\t            var header = ej2_base_3.select('.' + CLS_HEADER, itemEle);\n\t            var content = ej2_base_3.select('.' + CLS_CONTENT, itemEle);\n\t            header.setAttribute('aria-controls', content.id);\n\t            content.setAttribute('aria-labelledby', header.id);\n\t        };\n\t        Accordion.prototype.contentRendering = function (index) {\n\t            var content = this.items[index].content;\n\t            var itemcnt = ej2_base_5.createElement('div', { className: CLS_CONTENT + ' ' + CLS_CTNHIDE, id: ej2_base_2.getUniqueID('acrdn_panel') });\n\t            ej2_base_3.attributes(itemcnt, { 'aria-hidden': 'true' });\n\t            var ctn = ej2_base_5.createElement('div', { className: CLS_CTENT });\n\t            itemcnt.appendChild(this.fetchElement(ctn, content, index, false));\n\t            return itemcnt;\n\t        };\n\t        Accordion.prototype.expand = function (trgt) {\n\t            var eventArgs;\n\t            var trgtItemEle = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (ej2_base_6.isNullOrUndefined(trgt) || (ej2_base_3.isVisible(trgt) && trgt.getAttribute('e-animate') !== 'true') || trgtItemEle.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            var acrdnRoot = ej2_base_3.closest(trgtItemEle, '.' + CLS_ACRDN_ROOT);\n\t            var expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n\t            var animation = {\n\t                name: this.animation.expand.effect,\n\t                duration: this.animation.expand.duration,\n\t                timingFunction: this.animation.expand.easing\n\t            };\n\t            var icon = ej2_base_3.select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n\t            eventArgs = { element: trgtItemEle,\n\t                item: this.items[this.getIndexByItem(trgtItemEle)],\n\t                isExpanded: true };\n\t            var eff = animation.name;\n\t            this.trigger('expanding', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            icon.classList.add(CLS_TOGANIMATE);\n\t            this.expandedItemsPush(trgtItemEle);\n\t            if (!ej2_base_6.isNullOrUndefined(expandState)) {\n\t                expandState.classList.remove(CLS_EXPANDSTATE);\n\t            }\n\t            trgtItemEle.classList.add(CLS_EXPANDSTATE);\n\t            if ((animation.name === 'None')) {\n\t                this.expandProgress('begin', icon, trgt, trgtItemEle, eventArgs);\n\t                this.expandProgress('end', icon, trgt, trgtItemEle, eventArgs);\n\t                return;\n\t            }\n\t            this.expandAnimation(eff, icon, trgt, trgtItemEle, animation, eventArgs);\n\t        };\n\t        Accordion.prototype.expandAnimation = function (ef, icn, trgt, trgtItemEle, animate, args) {\n\t            var _this = this;\n\t            var height;\n\t            var trgtHgt;\n\t            if (ef === 'SlideDown') {\n\t                animate.begin = function () {\n\t                    _this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n\t                    trgt.style.position = 'absolute';\n\t                    height = trgtItemEle.offsetHeight;\n\t                    trgtHgt = trgt.offsetHeight;\n\t                    trgt.style.maxHeight = (trgt.offsetHeight) + 'px';\n\t                    trgtItemEle.style.maxHeight = '';\n\t                };\n\t                animate.progress = function () {\n\t                    trgtItemEle.style.minHeight = (height + trgt.offsetHeight) + 'px';\n\t                };\n\t                animate.end = function () {\n\t                    ej2_base_5.setStyleAttribute(trgt, { 'position': '', 'maxHeight': '' });\n\t                    trgtItemEle.style.minHeight = '';\n\t                    _this.expandProgress('end', icn, trgt, trgtItemEle, args);\n\t                };\n\t            }\n\t            else {\n\t                animate.begin = function () {\n\t                    _this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n\t                };\n\t                animate.end = function () {\n\t                    _this.expandProgress('end', icn, trgt, trgtItemEle, args);\n\t                };\n\t            }\n\t            new ej2_base_4.Animation(animate).animate(trgt);\n\t        };\n\t        Accordion.prototype.expandProgress = function (progress, icon, trgt, trgtItemEle, eventArgs) {\n\t            this.remove(trgt, CLS_CTNHIDE);\n\t            this.add(trgtItemEle, CLS_SLCTED);\n\t            this.add(icon, CLS_EXPANDICN);\n\t            if (progress === 'end') {\n\t                this.add(trgtItemEle, CLS_ACTIVE);\n\t                trgt.setAttribute('aria-hidden', 'false');\n\t                ej2_base_3.attributes(trgt.previousElementSibling, { 'aria-selected': 'true', 'aria-expanded': 'true' });\n\t                icon.classList.remove(CLS_TOGANIMATE);\n\t                this.trigger('expanded', eventArgs);\n\t            }\n\t        };\n\t        Accordion.prototype.expandedItemsPush = function (item) {\n\t            var index = this.getIndexByItem(item);\n\t            if (this.expandedItems.indexOf(index) === -1) {\n\t                this.expandedItems.push(index);\n\t            }\n\t        };\n\t        Accordion.prototype.getIndexByItem = function (item) {\n\t            return [].slice.call(this.element.children).indexOf(item);\n\t        };\n\t        Accordion.prototype.expandedItemsPop = function (item) {\n\t            var index = this.getIndexByItem(item);\n\t            this.expandedItems.splice(this.expandedItems.indexOf(index), 1);\n\t        };\n\t        Accordion.prototype.collapse = function (trgt) {\n\t            var eventArgs;\n\t            var trgtItemEle = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (ej2_base_6.isNullOrUndefined(trgt) || !ej2_base_3.isVisible(trgt) || trgtItemEle.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            var animation = {\n\t                name: this.animation.collapse.effect,\n\t                duration: this.animation.collapse.duration,\n\t                timingFunction: this.animation.collapse.easing,\n\t            };\n\t            var icon = ej2_base_3.select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n\t            eventArgs = { element: trgtItemEle,\n\t                item: this.items[this.getIndexByItem(trgtItemEle)],\n\t                isExpanded: false };\n\t            var eff = animation.name;\n\t            this.trigger('expanding', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            this.expandedItemsPop(trgtItemEle);\n\t            trgtItemEle.classList.add(CLS_EXPANDSTATE);\n\t            icon.classList.add(CLS_TOGANIMATE);\n\t            if ((animation.name === 'None')) {\n\t                this.collapseProgress('begin', icon, trgt, trgtItemEle, eventArgs);\n\t                this.collapseProgress('end', icon, trgt, trgtItemEle, eventArgs);\n\t                return;\n\t            }\n\t            this.collapseAnimation(eff, trgt, trgtItemEle, icon, animation, eventArgs);\n\t        };\n\t        Accordion.prototype.collapseAnimation = function (ef, trgt, trgtItEl, icn, animate, args) {\n\t            var _this = this;\n\t            var height;\n\t            var trgtHeight;\n\t            var itemHeight;\n\t            var remain;\n\t            if (ef === 'SlideUp') {\n\t                animate.begin = function () {\n\t                    itemHeight = trgtItEl.offsetHeight;\n\t                    trgtItEl.style.minHeight = itemHeight + 'px';\n\t                    trgt.style.position = 'absolute';\n\t                    height = trgtItEl.offsetHeight;\n\t                    trgtHeight = trgt.offsetHeight;\n\t                    trgt.style.maxHeight = trgtHeight + 'px';\n\t                    _this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n\t                };\n\t                animate.progress = function () {\n\t                    remain = ((height - (trgtHeight - trgt.offsetHeight)));\n\t                    if (remain < itemHeight) {\n\t                        trgtItEl.style.minHeight = remain + 'px';\n\t                    }\n\t                };\n\t                animate.end = function () {\n\t                    trgt.style.display = 'none';\n\t                    _this.collapseProgress('end', icn, trgt, trgtItEl, args);\n\t                    trgtItEl.style.minHeight = '';\n\t                    ej2_base_5.setStyleAttribute(trgt, { 'position': '', 'maxHeight': '', 'display': '' });\n\t                };\n\t            }\n\t            else {\n\t                animate.begin = function () {\n\t                    _this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n\t                };\n\t                animate.end = function () {\n\t                    _this.collapseProgress('end', icn, trgt, trgtItEl, args);\n\t                };\n\t            }\n\t            new ej2_base_4.Animation(animate).animate(trgt);\n\t        };\n\t        Accordion.prototype.collapseProgress = function (progress, icon, trgt, trgtItemEle, eventArgs) {\n\t            this.remove(icon, CLS_EXPANDICN);\n\t            this.remove(trgtItemEle, CLS_SLCTED);\n\t            if (progress === 'end') {\n\t                this.add(trgt, CLS_CTNHIDE);\n\t                icon.classList.remove(CLS_TOGANIMATE);\n\t                this.remove(trgtItemEle, CLS_ACTIVE);\n\t                trgt.setAttribute('aria-hidden', 'true');\n\t                ej2_base_3.attributes(trgt.previousElementSibling, { 'aria-selected': 'false', 'aria-expanded': 'false' });\n\t                this.trigger('expanded', eventArgs);\n\t            }\n\t        };\n\t        Accordion.prototype.getModuleName = function () {\n\t            return 'accordion';\n\t        };\n\t        Accordion.prototype.itemAttribUpdate = function () {\n\t            var itemEle = [].slice.call(this.element.children);\n\t            var itemLen = this.items.length;\n\t            itemEle.forEach(function (ele) {\n\t                ej2_base_3.select('.' + CLS_HEADER, ele).setAttribute('aria-level', '' + itemLen);\n\t            });\n\t        };\n\t        Accordion.prototype.addItem = function (item, index) {\n\t            var ele = this.element;\n\t            if (ej2_base_6.isNullOrUndefined(index)) {\n\t                index = this.items.length;\n\t            }\n\t            if (ele.childElementCount >= index) {\n\t                this.items.splice(index, 0, item);\n\t                var innerItemEle = this.renderInnerItem(item, index);\n\t                if (ele.childElementCount === index) {\n\t                    ele.appendChild(innerItemEle);\n\t                }\n\t                else {\n\t                    ele.insertBefore(innerItemEle, ele.children[index]);\n\t                }\n\t                ej2_base_1.EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n\t                ej2_base_1.EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n\t                this.itemAttribUpdate();\n\t            }\n\t            this.expandedItems = [];\n\t            this.expandedItemRefresh(ele);\n\t            if (item.expanded) {\n\t                this.expandItem(true, index);\n\t            }\n\t        };\n\t        Accordion.prototype.expandedItemRefresh = function (ele) {\n\t            var _this = this;\n\t            [].slice.call(ele.children).forEach(function (el) {\n\t                if (el.classList.contains(CLS_SLCTED)) {\n\t                    _this.expandedItemsPush(el);\n\t                }\n\t            });\n\t        };\n\t        Accordion.prototype.removeItem = function (index) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            ej2_base_3.detach(ele);\n\t            this.items.splice(index, 1);\n\t            this.itemAttribUpdate();\n\t            this.expandedItems = [];\n\t            this.expandedItemRefresh(this.element);\n\t        };\n\t        Accordion.prototype.select = function (index) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele) || ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_HEADER, ele))) {\n\t                return;\n\t            }\n\t            ele.children[0].focus();\n\t        };\n\t        Accordion.prototype.hideItem = function (index, isHidden) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            if (ej2_base_6.isNullOrUndefined(isHidden)) {\n\t                isHidden = true;\n\t            }\n\t            isHidden ? this.add(ele, CLS_ITEMHIDE) : this.remove(ele, CLS_ITEMHIDE);\n\t        };\n\t        Accordion.prototype.enableItem = function (index, isEnable) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            var eleHeader = ele.firstElementChild;\n\t            if (isEnable) {\n\t                this.remove(ele, CLS_DISABLE);\n\t                ej2_base_3.attributes(eleHeader, { 'tabindex': '0', 'aria-disabled': 'false' });\n\t                eleHeader.focus();\n\t            }\n\t            else {\n\t                if (ele.classList.contains(CLS_ACTIVE)) {\n\t                    this.expandItem(false, index);\n\t                    this.eleMoveFocus('movedown', this.element, eleHeader);\n\t                }\n\t                this.add(ele, CLS_DISABLE);\n\t                eleHeader.setAttribute('aria-disabled', 'true');\n\t                eleHeader.removeAttribute('tabindex');\n\t            }\n\t        };\n\t        Accordion.prototype.expandItem = function (isExpand, index) {\n\t            var _this = this;\n\t            var root = this.element;\n\t            if (ej2_base_6.isNullOrUndefined(index)) {\n\t                if (this.expandMode === 'Single' && isExpand) {\n\t                    var ele = root.children[root.childElementCount - 1];\n\t                    this.itemExpand(isExpand, ele, this.getIndexByItem(ele));\n\t                }\n\t                else {\n\t                    [].slice.call(this.element.children).forEach(function (el) {\n\t                        _this.itemExpand(isExpand, el, _this.getIndexByItem(el));\n\t                    });\n\t                }\n\t            }\n\t            else {\n\t                var ele = this.element.children[index];\n\t                if (ej2_base_6.isNullOrUndefined(ele) || !ele.classList.contains(CLS_SLCT) || (ele.classList.contains(CLS_ACTIVE) && isExpand)) {\n\t                    return;\n\t                }\n\t                else {\n\t                    if (this.expandMode === 'Single') {\n\t                        this.expandItem(false);\n\t                    }\n\t                    this.itemExpand(isExpand, ele, index);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.itemExpand = function (isExpand, ele, index) {\n\t            var ctn = ele.children[1];\n\t            if (ele.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            if (ej2_base_6.isNullOrUndefined(ctn) && isExpand) {\n\t                ctn = this.contentRendering(index);\n\t                ele.appendChild(ctn);\n\t                this.ariaAttrUpdate(ele);\n\t            }\n\t            else if (ej2_base_6.isNullOrUndefined(ctn)) {\n\t                return;\n\t            }\n\t            isExpand ? this.expand(ctn) : this.collapse(ctn);\n\t        };\n\t        Accordion.prototype.getPersistData = function () {\n\t            var keyEntity = ['expandedItems'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Accordion.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var acrdn = this.element;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.add(acrdn, CLS_RTL) : this.remove(acrdn, CLS_RTL);\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_5.setStyleAttribute(this.element, { 'height': ej2_base_6.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'width':\n\t                        ej2_base_5.setStyleAttribute(this.element, { 'width': ej2_base_6.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'expandMode':\n\t                        if (newProp.expandMode === 'Single') {\n\t                            this.element.setAttribute('aria-multiselectable', 'false');\n\t                            if (this.expandedItems.length > 1) {\n\t                                this.expandItem(false);\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.element.setAttribute('aria-multiselectable', 'true');\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Accordion;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Collection([], AccordionItem)\n\t    ], Accordion.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Accordion.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Accordion.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Multiple')\n\t    ], Accordion.prototype, \"expandMode\", void 0);\n\t    __decorate([\n\t        ej2_base_5.Complex({}, AccordionAnimationSettings)\n\t    ], Accordion.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"clicked\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"expanding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"expanded\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"destroyed\", void 0);\n\t    Accordion = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Accordion);\n\t    exports.Accordion = Accordion;\n\t    exports.accordionBuilder = ej2_base_4.CreateBuilder(Accordion);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, context_menu_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(context_menu_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(12), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_lists_1, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DOWNARROW = 'downarrow';\n\t    var ENTER = 'enter';\n\t    var ESCAPE = 'escape';\n\t    var FOCUSED = 'e-focused';\n\t    var HEADER = 'e-menuheader';\n\t    var LEFTARROW = 'leftarrow';\n\t    var RIGHTARROW = 'rightarrow';\n\t    var RTL = 'e-rtl';\n\t    var SELECTED = 'e-selected';\n\t    var SEPARATOR = 'e-separator';\n\t    var UPARROW = 'uparrow';\n\t    var WRAPPER = 'e-contextmenu-wrapper';\n\t    var CARET = 'e-caret';\n\t    var ITEM = 'e-menu-item';\n\t    var DISABLED = 'e-disabled';\n\t    var HIDE = 'e-menu-hide';\n\t    var ICONS = 'e-icons';\n\t    var MenuItem = (function (_super) {\n\t        __extends(MenuItem, _super);\n\t        function MenuItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return MenuItem;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], MenuItem.prototype, \"separator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], MenuItem)\n\t    ], MenuItem.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"url\", void 0);\n\t    exports.MenuItem = MenuItem;\n\t    var ContextMenu = (function (_super) {\n\t        __extends(ContextMenu, _super);\n\t        function ContextMenu(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.animation = new ej2_base_3.Animation({});\n\t            _this.navIdx = [];\n\t            _this.isTapHold = false;\n\t            return _this;\n\t        }\n\t        ContextMenu.prototype.preRender = function () {\n\t            if (this.element.tagName === 'EJ-CONTEXTMENU') {\n\t                var ejInst = ej2_base_4.getValue('ej2_instances', this.element);\n\t                var ul = ej2_base_5.createElement('ul');\n\t                var wrapper = ej2_base_5.createElement('EJ-CONTEXTMENU', { className: WRAPPER });\n\t                this.element.parentNode.insertBefore(ul, this.element);\n\t                ej2_base_5.detach(this.element);\n\t                this.element = ul;\n\t                this.element.classList.add('e-' + this.getModuleName());\n\t                document.body.appendChild(wrapper);\n\t                wrapper.appendChild(this.element);\n\t                ej2_base_4.setValue('ej2_instances', ejInst, this.element);\n\t                if (!this.element.id) {\n\t                    this.element.id = ej2_base_4.getUniqueID(this.getModuleName());\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.render = function () {\n\t            this.initWrapper();\n\t            this.renderItems();\n\t            this.wireEvents();\n\t        };\n\t        ContextMenu.prototype.initWrapper = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (!wrapper) {\n\t                wrapper = ej2_base_5.createElement('div', { className: WRAPPER });\n\t                document.body.appendChild(wrapper);\n\t            }\n\t            if (this.cssClass) {\n\t                wrapper.classList.add(this.cssClass);\n\t            }\n\t            if (this.enableRtl) {\n\t                wrapper.classList.add(RTL);\n\t            }\n\t            ej2_base_3.attributes(this.element, { 'role': 'menu', 'tabindex': '0' });\n\t            wrapper.appendChild(this.element);\n\t            this.element.style.zIndex = this.getZIndex();\n\t        };\n\t        ContextMenu.prototype.renderItems = function () {\n\t            if (!this.items.length) {\n\t                this.items = ej2_lists_1.ListBase.createJsonFromElement(this.element);\n\t                this.element.innerHTML = '';\n\t            }\n\t            var ul = this.createItems(this.items);\n\t            ej2_base_5.append(Array.prototype.slice.call(ul.children), this.element);\n\t        };\n\t        ContextMenu.prototype.wireEvents = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (this.target) {\n\t                var target = void 0;\n\t                var targetElems = ej2_base_5.selectAll(this.target);\n\t                for (var i = 0, len = targetElems.length; i < len; i++) {\n\t                    target = targetElems[i];\n\t                    if (ej2_base_4.Browser.isIos) {\n\t                        new ej2_base_2.Touch(target, { tapHold: this.touchHandler.bind(this) });\n\t                    }\n\t                    else {\n\t                        ej2_base_2.EventHandler.add(target, 'contextmenu', this.cmenuHandler, this);\n\t                    }\n\t                }\n\t                for (var _i = 0, _a = this.getScrollableParents(target); _i < _a.length; _i++) {\n\t                    var parent_1 = _a[_i];\n\t                    ej2_base_2.EventHandler.add(parent_1, 'scroll', this.scrollHandler, this);\n\t                }\n\t            }\n\t            if (!ej2_base_4.Browser.isDevice) {\n\t                ej2_base_2.EventHandler.add(wrapper, 'mouseover', this.moverHandler, this);\n\t                ej2_base_2.EventHandler.add(document, 'mousedown', this.mouseDownHandler, this);\n\t            }\n\t            ej2_base_2.EventHandler.add(document, 'click', this.clickHandler, this);\n\t            new ej2_base_2.KeyboardEvents(wrapper, {\n\t                keyAction: this.keyBoardHandler.bind(this),\n\t                keyConfigs: {\n\t                    downarrow: DOWNARROW,\n\t                    uparrow: UPARROW,\n\t                    enter: ENTER,\n\t                    leftarrow: LEFTARROW,\n\t                    rightarrow: RIGHTARROW,\n\t                    escape: ESCAPE\n\t                }\n\t            });\n\t            ej2_base_5.rippleEffect(wrapper, { selector: '.' + ITEM });\n\t        };\n\t        ContextMenu.prototype.mouseDownHandler = function (e) {\n\t            if (ej2_base_5.closest(e.target, '.' + WRAPPER) !== this.getWrapper()) {\n\t                this.closeMenu(this.navIdx.length, e);\n\t            }\n\t        };\n\t        ContextMenu.prototype.getScrollableParents = function (target) {\n\t            var elemStyle = getComputedStyle(target);\n\t            var parentCollection = [];\n\t            var regex = /(auto|scroll)/;\n\t            var parentEle = target.parentElement;\n\t            while (parentEle && parentEle.tagName !== 'HTML') {\n\t                var parentStyle = getComputedStyle(parentEle);\n\t                if (!(elemStyle.position === 'absolute' && parentStyle.position === 'static')\n\t                    && regex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {\n\t                    parentCollection.push(parentEle);\n\t                }\n\t                parentEle = parentEle.parentElement;\n\t            }\n\t            parentCollection.push(document);\n\t            return parentCollection;\n\t        };\n\t        ContextMenu.prototype.keyBoardHandler = function (e) {\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case DOWNARROW:\n\t                case UPARROW:\n\t                    this.upDownKeyHandler(e);\n\t                    break;\n\t                case RIGHTARROW:\n\t                    this.rightEnterKeyHandler({ action: RIGHTARROW });\n\t                    break;\n\t                case LEFTARROW:\n\t                    this.leftEscKeyHandler({ action: LEFTARROW });\n\t                    break;\n\t                case ENTER:\n\t                    this.rightEnterKeyHandler({ action: ENTER });\n\t                    break;\n\t                case ESCAPE:\n\t                    this.leftEscKeyHandler({ action: ESCAPE });\n\t                    break;\n\t            }\n\t        };\n\t        ContextMenu.prototype.upDownKeyHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            var defaultIdx = e.action === DOWNARROW ? 0 : cul.childElementCount - 1;\n\t            var fliIdx = defaultIdx;\n\t            var fli = this.getLIByClass(cul, FOCUSED);\n\t            if (fli) {\n\t                fliIdx = this.getIdx(cul, fli);\n\t                fli.classList.remove(FOCUSED);\n\t                e.action === DOWNARROW ? fliIdx++ : fliIdx--;\n\t                if (fliIdx === (e.action === DOWNARROW ? cul.childElementCount : -1)) {\n\t                    fliIdx = defaultIdx;\n\t                }\n\t            }\n\t            var cli = cul.children[fliIdx];\n\t            fliIdx = this.isValidLI(cli, fliIdx, e.action);\n\t            cul.children[fliIdx].classList.add(FOCUSED);\n\t            cul.children[fliIdx].focus();\n\t        };\n\t        ContextMenu.prototype.isValidLI = function (cli, index, action) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED)) {\n\t                action === (DOWNARROW || RIGHTARROW) ? index++ : index--;\n\t            }\n\t            cli = cul.children[index];\n\t            if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED)) {\n\t                index = this.isValidLI(cli, index, action);\n\t            }\n\t            return index;\n\t        };\n\t        ContextMenu.prototype.rightEnterKeyHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            var fli = this.getLIByClass(cul, FOCUSED);\n\t            if (fli) {\n\t                var fliIdx = this.getIdx(cul, fli);\n\t                var navIdx = this.navIdx.concat(fliIdx);\n\t                var index = void 0;\n\t                var item = this.getItem(navIdx);\n\t                if (item.items.length) {\n\t                    this.navIdx.push(fliIdx);\n\t                    this.openMenu(fli, item, null, null, e);\n\t                    fli.classList.remove(FOCUSED);\n\t                    fli.classList.add(SELECTED);\n\t                    if (e.action === ENTER) {\n\t                        var eventArgs = { element: fli, item: item };\n\t                        this.trigger('select', eventArgs);\n\t                    }\n\t                    fli.focus();\n\t                    cul = wrapper.children[this.navIdx.length];\n\t                    index = this.isValidLI(cul.children[0], 0, e.action);\n\t                    cul.children[index].classList.add(FOCUSED);\n\t                    cul.children[index].focus();\n\t                }\n\t                else {\n\t                    if (e.action === ENTER) {\n\t                        this.close();\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.leftEscKeyHandler = function (e) {\n\t            if (this.navIdx.length) {\n\t                var wrapper = this.getWrapper();\n\t                this.closeMenu(this.navIdx.length, e);\n\t                var cul = wrapper.children[this.navIdx.length];\n\t                var sli = this.getLIByClass(cul, SELECTED);\n\t                sli.setAttribute('aria-expanded', 'false');\n\t                if (sli) {\n\t                    sli.classList.remove(SELECTED);\n\t                    sli.classList.add(FOCUSED);\n\t                    sli.focus();\n\t                }\n\t            }\n\t            else {\n\t                if (e.action === ESCAPE) {\n\t                    this.close();\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.scrollHandler = function (e) {\n\t            this.closeMenu(null, e);\n\t        };\n\t        ContextMenu.prototype.touchHandler = function (e) {\n\t            this.isTapHold = true;\n\t            this.cmenuHandler(e.originalEvent);\n\t        };\n\t        ContextMenu.prototype.cmenuHandler = function (e) {\n\t            e.preventDefault();\n\t            this.closeMenu(null, e);\n\t            if (this.canOpen(e.target)) {\n\t                if (e.changedTouches) {\n\t                    this.openMenu(null, null, e.changedTouches[0].clientY, e.changedTouches[0].clientX, e);\n\t                }\n\t                else {\n\t                    this.openMenu(null, null, e.clientY, e.clientX, e);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.close = function () {\n\t            this.closeMenu();\n\t        };\n\t        ContextMenu.prototype.closeMenu = function (ulIndex, e) {\n\t            if (ulIndex === void 0) { ulIndex = 0; }\n\t            if (e === void 0) { e = null; }\n\t            if (this.isMenuVisible()) {\n\t                var ul = void 0;\n\t                var item = void 0;\n\t                var items = void 0;\n\t                var closeArgs = void 0;\n\t                var beforeCloseArgs = void 0;\n\t                var wrapper = this.getWrapper();\n\t                for (var cnt = wrapper.childElementCount; cnt > ulIndex; cnt--) {\n\t                    item = this.navIdx.length ? this.getItem(this.navIdx) : null;\n\t                    items = item ? item.items : this.items;\n\t                    ul = wrapper.children[cnt - 1];\n\t                    beforeCloseArgs = { element: ul, parentItem: item, items: items, event: e, cancel: false };\n\t                    this.trigger('beforeClose', beforeCloseArgs);\n\t                    if (!beforeCloseArgs.cancel) {\n\t                        this.toggleAnimation(ul, false);\n\t                        this.navIdx.length = ulIndex ? ulIndex - 1 : ulIndex;\n\t                        closeArgs = { element: ul, parentItem: item, items: items };\n\t                        this.trigger('onClose', closeArgs);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.isMenuVisible = function () {\n\t            return (this.navIdx.length > 0 || (this.element.classList.contains('e-contextmenu') && ej2_base_5.isVisible(this.element).valueOf()));\n\t        };\n\t        ContextMenu.prototype.canOpen = function (target) {\n\t            var canOpen = true;\n\t            if (this.filter) {\n\t                canOpen = false;\n\t                var filter = this.filter.split(' ');\n\t                for (var i = 0, len = target.classList.length; i < len; i++) {\n\t                    if (filter.indexOf(target.classList[i]) > -1) {\n\t                        canOpen = true;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            return canOpen;\n\t        };\n\t        ContextMenu.prototype.open = function (top, left) {\n\t            this.openMenu(null, null, top, left);\n\t        };\n\t        ContextMenu.prototype.openMenu = function (li, item, top, left, e) {\n\t            if (top === void 0) { top = 0; }\n\t            if (left === void 0) { left = 0; }\n\t            if (e === void 0) { e = null; }\n\t            var ul;\n\t            var navIdx;\n\t            var wrapper = this.getWrapper();\n\t            if (li) {\n\t                ul = this.createItems(item.items);\n\t                if (ej2_base_4.Browser.isDevice) {\n\t                    wrapper.lastChild.style.display = 'none';\n\t                    var data = { text: item.text, iconCss: ICONS + ' e-previous' };\n\t                    var hdata = new MenuItem(this.items[0], null, data, true);\n\t                    var hli = this.createItem([hdata], true, 'menu', true);\n\t                    ul.insertBefore(hli, ul.children[0]);\n\t                }\n\t                ul.style.zIndex = this.element.style.zIndex;\n\t                wrapper.appendChild(ul);\n\t            }\n\t            else {\n\t                ul = this.element;\n\t            }\n\t            navIdx = this.getIndex(li ? li.textContent : null);\n\t            var items = li ? item.items : this.items;\n\t            var eventArgs = { element: ul, items: items, parentItem: item, event: e, cancel: false };\n\t            this.trigger('beforeOpen', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                this.navIdx.pop();\n\t            }\n\t            else {\n\t                this.setPosition(li, ul, top, left);\n\t                this.toggleAnimation(ul);\n\t            }\n\t        };\n\t        ContextMenu.prototype.createItem = function (item, showIcon, moduleName, isHeader) {\n\t            if (isHeader === void 0) { isHeader = true; }\n\t            var listOpt = { showIcon: showIcon, moduleName: moduleName };\n\t            if (isHeader) {\n\t                listOpt.itemClass = HEADER;\n\t            }\n\t            var li = ej2_lists_1.ListBase.createListItemFromJson(this.toRawObject(item), listOpt, 0, true);\n\t            return li[0];\n\t        };\n\t        ContextMenu.prototype.setPosition = function (li, ul, top, left) {\n\t            var px = 'px';\n\t            this.toggleVisiblity(ul);\n\t            if (ul === this.element) {\n\t                var collide = ej2_popups_1.isCollide(ul, null, left, top);\n\t                if (collide.indexOf('right') > -1) {\n\t                    left = left - ul.offsetWidth;\n\t                }\n\t                if (collide.indexOf('bottom') > -1) {\n\t                    var offset = ej2_popups_1.fit(ul, null, { X: false, Y: true }, { top: top, left: left });\n\t                    top = offset.top;\n\t                }\n\t                collide = ej2_popups_1.isCollide(ul, null, left, top);\n\t                if (collide.indexOf('left') > -1) {\n\t                    var offset = ej2_popups_1.fit(ul, null, { X: true, Y: false }, { top: top, left: left });\n\t                    left = offset.left;\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_4.Browser.isDevice) {\n\t                    top = Number(this.element.style.top.replace(px, ''));\n\t                    left = Number(this.element.style.left.replace(px, ''));\n\t                }\n\t                else {\n\t                    var x = this.enableRtl ? 'left' : 'right';\n\t                    var offset = ej2_popups_1.calculatePosition(li, x, 'top');\n\t                    top = offset.top;\n\t                    left = offset.left;\n\t                    var collide = ej2_popups_1.isCollide(ul, null, this.enableRtl ? left - ul.offsetWidth : left, top);\n\t                    var xCollision = collide.indexOf('left') > -1 || collide.indexOf('right') > -1;\n\t                    if (xCollision) {\n\t                        offset = ej2_popups_1.calculatePosition(li, this.enableRtl ? 'right' : 'left', 'top');\n\t                        left = offset.left;\n\t                    }\n\t                    if (this.enableRtl || xCollision) {\n\t                        left = (this.enableRtl && xCollision) ? left : left - ul.offsetWidth;\n\t                    }\n\t                    if (collide.indexOf('bottom') > -1) {\n\t                        offset = ej2_popups_1.fit(ul, null, { X: false, Y: true }, { top: top, left: left });\n\t                        top = offset.top;\n\t                    }\n\t                }\n\t            }\n\t            this.toggleVisiblity(ul, false);\n\t            ul.style.top = top + px;\n\t            ul.style.left = left + px;\n\t        };\n\t        ContextMenu.prototype.toggleVisiblity = function (ul, isVisible) {\n\t            if (isVisible === void 0) { isVisible = true; }\n\t            ul.style.visibility = isVisible ? 'hidden' : '';\n\t            ul.style.display = isVisible ? 'block' : 'none';\n\t        };\n\t        ContextMenu.prototype.createItems = function (items) {\n\t            var _this = this;\n\t            var showIcon = this.hasField(items, 'iconCss');\n\t            var listBaseOptions = {\n\t                showIcon: showIcon,\n\t                moduleName: 'menu',\n\t                itemCreating: function (args) {\n\t                    args.curData.htmlAttributes = {\n\t                        role: 'menuitem',\n\t                        tabindex: '-1'\n\t                    };\n\t                    if (showIcon && !args.curData.iconCss) {\n\t                        args.curData.iconCss = ICONS + ' e-blankicon';\n\t                    }\n\t                },\n\t                itemCreated: function (args) {\n\t                    if (args.curData.separator) {\n\t                        args.item.classList.remove(ITEM);\n\t                        args.item.classList.add(SEPARATOR);\n\t                        args.item.removeAttribute('role');\n\t                    }\n\t                    if (args.curData.items && args.curData.items.length) {\n\t                        var span = ej2_base_5.createElement('span', { className: ICONS + ' ' + CARET });\n\t                        args.item.appendChild(span);\n\t                        args.item.setAttribute('aria-haspopup', 'true');\n\t                        args.item.setAttribute('aria-expanded', 'false');\n\t                        args.item.removeAttribute('role');\n\t                        args.item.classList.add('e-menu-caret-icon');\n\t                    }\n\t                    var eventArgs = { item: args.curData, element: args.item };\n\t                    _this.trigger('beforeItemRender', eventArgs);\n\t                }\n\t            };\n\t            var ul = ej2_lists_1.ListBase.createList(this.toRawObject(items.slice()), listBaseOptions, true);\n\t            ul.setAttribute('tabindex', '0');\n\t            return ul;\n\t        };\n\t        ContextMenu.prototype.toRawObject = function (items) {\n\t            var item;\n\t            var menuItems = [];\n\t            for (var i = 0, len = items.length; i < len; i++) {\n\t                item = items[i].properties;\n\t                menuItems.push(item);\n\t            }\n\t            return menuItems;\n\t        };\n\t        ContextMenu.prototype.moverHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var trgt = e.target;\n\t            var cli = this.getLI(trgt);\n\t            if (cli && ej2_base_5.closest(cli, '.' + WRAPPER)) {\n\t                var fli = ej2_base_5.select('.' + FOCUSED, wrapper);\n\t                if (fli) {\n\t                    fli.classList.remove(FOCUSED);\n\t                }\n\t                cli.classList.add(FOCUSED);\n\t                if (!this.showItemOnClick) {\n\t                    this.clickHandler(e);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.hasField = function (items, field) {\n\t            for (var i = 0, len = items.length; i < len; i++) {\n\t                if (items[i][field]) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        ContextMenu.prototype.getWrapper = function () {\n\t            return ej2_base_5.closest(this.element, '.' + WRAPPER);\n\t        };\n\t        ContextMenu.prototype.clickHandler = function (e) {\n\t            if (this.isTapHold) {\n\t                this.isTapHold = false;\n\t            }\n\t            else {\n\t                var wrapper = this.getWrapper();\n\t                var trgt = e.target;\n\t                var cli = this.getLI(trgt);\n\t                var cliWrapper = cli ? ej2_base_5.closest(cli, '.' + WRAPPER) : null;\n\t                var isInstLI = cli && cliWrapper && wrapper.firstElementChild.id === cliWrapper.firstElementChild.id;\n\t                if (isInstLI && e.type === 'click' && !cli.classList.contains(HEADER)) {\n\t                    this.setLISelected(cli);\n\t                    var navIdx = this.getIndex(cli.textContent);\n\t                    var item = this.getItem(navIdx);\n\t                    var eventArgs = { element: cli, item: item };\n\t                    this.trigger('select', eventArgs);\n\t                }\n\t                if (isInstLI && (e.type === 'mouseover' || ej2_base_4.Browser.isDevice || this.showItemOnClick)) {\n\t                    var ul = void 0;\n\t                    if (cli.classList.contains(HEADER)) {\n\t                        ul = wrapper.children[this.navIdx.length - 1];\n\t                        this.toggleAnimation(ul);\n\t                        var sli = this.getLIByClass(ul, SELECTED);\n\t                        if (sli) {\n\t                            sli.classList.remove(SELECTED);\n\t                        }\n\t                        ej2_base_5.detach(cli.parentNode);\n\t                        this.navIdx.pop();\n\t                    }\n\t                    else {\n\t                        if (!cli.classList.contains(SEPARATOR)) {\n\t                            var showSubMenu = true;\n\t                            var cul = cli.parentNode;\n\t                            var cliIdx = this.getIdx(cul, cli);\n\t                            if (!ej2_base_4.Browser.isDevice) {\n\t                                var culIdx = this.getIdx(wrapper, cul);\n\t                                if (this.navIdx[culIdx] === cliIdx) {\n\t                                    showSubMenu = false;\n\t                                }\n\t                                if (culIdx !== this.navIdx.length && (e.type !== 'mouseover' || showSubMenu)) {\n\t                                    var sli = this.getLIByClass(cul, SELECTED);\n\t                                    if (sli) {\n\t                                        sli.classList.remove(SELECTED);\n\t                                    }\n\t                                    this.closeMenu(culIdx + 1, e);\n\t                                }\n\t                            }\n\t                            if (showSubMenu) {\n\t                                var idx = this.navIdx.concat(cliIdx);\n\t                                var item = this.getItem(idx);\n\t                                if (item.items.length) {\n\t                                    if (e.type === 'mouseover') {\n\t                                        this.setLISelected(cli);\n\t                                    }\n\t                                    cli.setAttribute('aria-expanded', 'true');\n\t                                    this.navIdx.push(cliIdx);\n\t                                    this.openMenu(cli, item, null, null, e);\n\t                                }\n\t                                else {\n\t                                    if (e.type !== 'mouseover') {\n\t                                        this.closeMenu(null, e);\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (trgt.tagName !== 'UL' || trgt.parentElement !== wrapper) {\n\t                        if (!cli || !cli.querySelector('.' + CARET)) {\n\t                            this.closeMenu(null, e);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.setLISelected = function (li) {\n\t            var sli = this.getLIByClass(li.parentElement, SELECTED);\n\t            if (sli) {\n\t                sli.classList.remove(SELECTED);\n\t            }\n\t            li.classList.remove(FOCUSED);\n\t            li.classList.add(SELECTED);\n\t        };\n\t        ContextMenu.prototype.getLIByClass = function (ul, classname) {\n\t            for (var i = 0, len = ul.children.length; i < len; i++) {\n\t                if (ul.children[i].classList.contains(classname)) {\n\t                    return ul.children[i];\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        ContextMenu.prototype.getItem = function (navIdx) {\n\t            navIdx = navIdx.slice();\n\t            var idx = navIdx.pop();\n\t            var items = this.getItems(navIdx);\n\t            return items[idx];\n\t        };\n\t        ContextMenu.prototype.getItems = function (navIdx) {\n\t            var items = this.items;\n\t            for (var i = 0; i < navIdx.length; i++) {\n\t                items = items[navIdx[i]].items;\n\t            }\n\t            return items;\n\t        };\n\t        ContextMenu.prototype.getIdx = function (ul, li, skipHdr) {\n\t            if (skipHdr === void 0) { skipHdr = true; }\n\t            var idx = Array.prototype.indexOf.call(ul.children, li);\n\t            if (skipHdr && ul.children[0].classList.contains(HEADER)) {\n\t                idx--;\n\t            }\n\t            return idx;\n\t        };\n\t        ContextMenu.prototype.getLI = function (elem) {\n\t            if (elem.tagName === 'LI') {\n\t                return elem;\n\t            }\n\t            return ej2_base_5.closest(elem, 'li');\n\t        };\n\t        ContextMenu.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var wrapper = this.getWrapper();\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'cssClass':\n\t                        if (oldProp.cssClass) {\n\t                            wrapper.classList.remove(oldProp.cssClass);\n\t                        }\n\t                        if (newProp.cssClass) {\n\t                            wrapper.classList.add(newProp.cssClass);\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        wrapper.classList.toggle(RTL);\n\t                        break;\n\t                    case 'filter':\n\t                        this.closeMenu();\n\t                        this.filter = newProp.filter;\n\t                        break;\n\t                    case 'showItemOnClick':\n\t                        this.unWireEvents();\n\t                        this.showItemOnClick = newProp.showItemOnClick;\n\t                        this.wireEvents();\n\t                        break;\n\t                    case 'target':\n\t                        this.unWireEvents();\n\t                        this.target = newProp.target;\n\t                        this.wireEvents();\n\t                        break;\n\t                    case 'items':\n\t                        this.refresh();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.unWireEvents = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (this.target) {\n\t                var target = void 0;\n\t                var touchModule = void 0;\n\t                var targetElems = ej2_base_5.selectAll(this.target);\n\t                for (var i = 0, len = targetElems.length; i < len; i++) {\n\t                    target = targetElems[i];\n\t                    if (ej2_base_4.Browser.isIos) {\n\t                        touchModule = ej2_base_4.getInstance(target, ej2_base_2.Touch);\n\t                        if (touchModule) {\n\t                            touchModule.destroy();\n\t                        }\n\t                    }\n\t                    else {\n\t                        ej2_base_2.EventHandler.remove(target, 'contextmenu', this.cmenuHandler);\n\t                    }\n\t                }\n\t                if (target) {\n\t                    for (var _i = 0, _a = this.getScrollableParents(target); _i < _a.length; _i++) {\n\t                        var parent_2 = _a[_i];\n\t                        ej2_base_2.EventHandler.remove(parent_2, 'scroll', this.scrollHandler);\n\t                    }\n\t                }\n\t            }\n\t            if (!ej2_base_4.Browser.isDevice) {\n\t                ej2_base_2.EventHandler.remove(wrapper, 'mouseover', this.moverHandler);\n\t                ej2_base_2.EventHandler.remove(document, 'mousedown', this.mouseDownHandler);\n\t            }\n\t            ej2_base_2.EventHandler.remove(document, 'click', this.clickHandler);\n\t            var keyboardModule = ej2_base_4.getInstance(wrapper, ej2_base_2.KeyboardEvents);\n\t            if (keyboardModule) {\n\t                keyboardModule.destroy();\n\t            }\n\t        };\n\t        ContextMenu.prototype.toggleAnimation = function (ul, isMenuOpen) {\n\t            var _this = this;\n\t            if (isMenuOpen === void 0) { isMenuOpen = true; }\n\t            if (this.animationSettings.effect === 'None' || !isMenuOpen) {\n\t                this.end(ul, isMenuOpen);\n\t            }\n\t            else {\n\t                this.animation.animate(ul, {\n\t                    name: this.animationSettings.effect,\n\t                    duration: this.animationSettings.duration,\n\t                    timingFunction: this.animationSettings.easing,\n\t                    begin: function (options) {\n\t                        options.element.style.display = 'block';\n\t                        options.element.style.maxHeight = options.element.getBoundingClientRect().height + 'px';\n\t                    },\n\t                    end: function (options) {\n\t                        _this.end(options.element, isMenuOpen);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        ContextMenu.prototype.end = function (ul, isMenuOpen) {\n\t            if (isMenuOpen) {\n\t                ul.style.display = 'block';\n\t                ul.style.maxHeight = '';\n\t                var item = this.navIdx.length ? this.getItem(this.navIdx) : null;\n\t                var eventArgs = { element: ul, parentItem: item, items: item ? item.items : this.items };\n\t                this.trigger('onOpen', eventArgs);\n\t                if (ul.querySelector('.' + FOCUSED)) {\n\t                    ul.querySelector('.' + FOCUSED).focus();\n\t                }\n\t                else {\n\t                    var ele = void 0;\n\t                    ele = this.getWrapper().children[this.getIdx(this.getWrapper(), ul) - 1];\n\t                    if (ele) {\n\t                        ele.querySelector('.' + SELECTED).focus();\n\t                    }\n\t                    else {\n\t                        this.element.focus();\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (ul === this.element) {\n\t                    var fli = this.getLIByClass(this.element, FOCUSED);\n\t                    if (fli) {\n\t                        fli.classList.remove(FOCUSED);\n\t                    }\n\t                    var sli = this.getLIByClass(this.element, SELECTED);\n\t                    if (sli) {\n\t                        sli.classList.remove(SELECTED);\n\t                    }\n\t                    ul.style.display = 'none';\n\t                }\n\t                else {\n\t                    ej2_base_5.detach(ul);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.getPersistData = function () {\n\t            return '';\n\t        };\n\t        ContextMenu.prototype.getModuleName = function () {\n\t            return 'contextmenu';\n\t        };\n\t        ContextMenu.prototype.getIndex = function (data, items, navIdx, isCallBack) {\n\t            if (items === void 0) { items = this.items; }\n\t            if (navIdx === void 0) { navIdx = []; }\n\t            if (isCallBack === void 0) { isCallBack = false; }\n\t            var item;\n\t            for (var i = 0, len = items.length; i < len; i++) {\n\t                item = items[i];\n\t                if (item.text === data) {\n\t                    navIdx.push(i);\n\t                    break;\n\t                }\n\t                else if (item.items.length) {\n\t                    navIdx = this.getIndex(data, item.items, navIdx, true);\n\t                    if (navIdx[navIdx.length - 1] === -1) {\n\t                        if (i !== len - 1) {\n\t                            navIdx.pop();\n\t                        }\n\t                    }\n\t                    else {\n\t                        navIdx.unshift(i);\n\t                        break;\n\t                    }\n\t                }\n\t                else {\n\t                    if (i === len - 1) {\n\t                        navIdx.push(-1);\n\t                    }\n\t                }\n\t            }\n\t            return (!isCallBack && navIdx[0] === -1) ? [] : navIdx;\n\t        };\n\t        ContextMenu.prototype.enableItems = function (items, enable) {\n\t            if (enable === void 0) { enable = true; }\n\t            var ul;\n\t            var idx;\n\t            var navIdx;\n\t            var disabled = DISABLED;\n\t            var wrapper = this.getWrapper();\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                ul = wrapper.children[navIdx.length];\n\t                if (ul) {\n\t                    if (enable) {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.remove(disabled);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.remove(disabled);\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.add(disabled);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.add(disabled);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.showItems = function (items) {\n\t            this.showHideItems(items, false);\n\t        };\n\t        ContextMenu.prototype.hideItems = function (items) {\n\t            this.showHideItems(items, true);\n\t        };\n\t        ContextMenu.prototype.showHideItems = function (items, ishide) {\n\t            var ul;\n\t            var idx;\n\t            var navIdx;\n\t            var wrapper = this.getWrapper();\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                ul = wrapper.children[navIdx.length];\n\t                if (ul) {\n\t                    if (ishide) {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.add(HIDE);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.add(HIDE);\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.remove(HIDE);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.remove(HIDE);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.removeItems = function (items) {\n\t            var idx;\n\t            var navIdx;\n\t            var iitems;\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                iitems = this.getItems(navIdx);\n\t                iitems.splice(idx, 1);\n\t                if (!navIdx.length) {\n\t                    ej2_base_5.detach(this.element.children[idx]);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.insertAfter = function (items, text) {\n\t            this.insertItems(items, text);\n\t        };\n\t        ContextMenu.prototype.insertBefore = function (items, text) {\n\t            this.insertItems(items, text, false);\n\t        };\n\t        ContextMenu.prototype.insertItems = function (items, text, isAfter) {\n\t            if (isAfter === void 0) { isAfter = true; }\n\t            var li;\n\t            var idx;\n\t            var navIdx;\n\t            var iitems;\n\t            var menuitem;\n\t            var showIcon;\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(text);\n\t                idx = navIdx.pop();\n\t                iitems = this.getItems(navIdx);\n\t                menuitem = new MenuItem(iitems[0], null, items[i], true);\n\t                iitems.splice(isAfter ? idx + 1 : idx, 0, menuitem);\n\t                if (!navIdx.length) {\n\t                    idx = isAfter ? idx + 1 : idx;\n\t                    showIcon = this.hasField(iitems, 'iconCss');\n\t                    li = this.createItem([menuitem], showIcon, 'menu', false);\n\t                    this.element.insertBefore(li, this.element.children[idx]);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.getZIndex = function () {\n\t            var index;\n\t            var position;\n\t            var props;\n\t            var zIndex = ['999'];\n\t            for (var i = 0, len = document.body.children.length; i < len; i++) {\n\t                props = document.defaultView.getComputedStyle(document.body.children[i]);\n\t                index = props.getPropertyValue('z-index');\n\t                position = props.getPropertyValue('position');\n\t                if (index !== 'auto' && position !== 'static') {\n\t                    zIndex.push(index);\n\t                }\n\t            }\n\t            return (Math.max.apply(Math, zIndex) + 1).toString();\n\t        };\n\t        ContextMenu.prototype.destroy = function () {\n\t            var _this = this;\n\t            var wrapper = this.getWrapper();\n\t            if (wrapper) {\n\t                _super.prototype.destroy.call(this);\n\t                this.unWireEvents();\n\t                this.closeMenu();\n\t                this.element.innerHTML = '';\n\t                ['top', 'left', 'display', 'z-index'].forEach(function (key) {\n\t                    _this.element.style.removeProperty(key);\n\t                });\n\t                ['role', 'tabindex', 'class', 'style'].forEach(function (key) {\n\t                    if (['class', 'style'].indexOf(key) === -1 || !_this.element.getAttribute(key)) {\n\t                        _this.element.removeAttribute(key);\n\t                    }\n\t                });\n\t                wrapper.parentNode.insertBefore(this.element, wrapper);\n\t                ej2_base_5.detach(wrapper);\n\t            }\n\t        };\n\t        return ContextMenu;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"filter\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], ContextMenu.prototype, \"showItemOnClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], MenuItem)\n\t    ], ContextMenu.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"target\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property({ duration: 400, easing: 'ease', effect: 'SlideDown' })\n\t    ], ContextMenu.prototype, \"animationSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"beforeItemRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"beforeOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"onOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"beforeClose\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"onClose\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"select\", void 0);\n\t    ContextMenu = __decorate([\n\t        ej2_base_1.NotifyPropertyChanges\n\t    ], ContextMenu);\n\t    exports.ContextMenu = ContextMenu;\n\t    exports.contextMenuBuilder = ej2_base_1.CreateBuilder(ContextMenu);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, tab_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(tab_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, toolbar_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_TAB = 'e-tab';\n\t    var CLS_HEADER = 'e-tab-header';\n\t    var CLS_CONTENT = 'e-content';\n\t    var CLS_ITEMS = 'e-items';\n\t    var CLS_ITEM = 'e-item';\n\t    var CLS_TEMPLATE = 'e-template';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_ACTIVE = 'e-active';\n\t    var CLS_DISABLE = 'e-disable';\n\t    var CLS_HIDDEN = 'e-hidden';\n\t    var CLS_FOCUS = 'e-focused';\n\t    var CLS_ICONS = 'e-icons';\n\t    var CLS_ICON = 'e-icon';\n\t    var CLS_ICON_CLOSE = 'e-close-icon';\n\t    var CLS_CLOSE_SHOW = 'e-close-show';\n\t    var CLS_TEXT = 'e-tab-text';\n\t    var CLS_INDICATOR = 'e-indicator';\n\t    var CLS_WRAP = 'e-tab-wrap';\n\t    var CLS_TEXT_WRAP = 'e-text-wrap';\n\t    var CLS_TAB_ICON = 'e-tab-icon';\n\t    var CLS_TB_ITEMS = 'e-toolbar-items';\n\t    var CLS_TB_ITEM = 'e-toolbar-item';\n\t    var CLS_TB_POP = 'e-toolbar-pop';\n\t    var CLS_TB_POPUP = 'e-toolbar-popup';\n\t    var CLS_POPUP_OPEN = 'e-popup-open';\n\t    var CLS_POPUP_CLOSE = 'e-popup-close';\n\t    var CLS_PROGRESS = 'e-progress';\n\t    var CLS_IGNORE = 'e-ignore';\n\t    var TabActionSettings = (function (_super) {\n\t        __extends(TabActionSettings, _super);\n\t        function TabActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabActionSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('SlideLeftIn')\n\t    ], TabActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(600)\n\t    ], TabActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('ease')\n\t    ], TabActionSettings.prototype, \"easing\", void 0);\n\t    exports.TabActionSettings = TabActionSettings;\n\t    var TabAnimationSettings = (function (_super) {\n\t        __extends(TabAnimationSettings, _super);\n\t        function TabAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabAnimationSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Complex({ effect: 'SlideLeftIn', duration: 600, easing: 'ease' }, TabActionSettings)\n\t    ], TabAnimationSettings.prototype, \"previous\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ effect: 'SlideRightIn', duration: 600, easing: 'ease' }, TabActionSettings)\n\t    ], TabAnimationSettings.prototype, \"next\", void 0);\n\t    exports.TabAnimationSettings = TabAnimationSettings;\n\t    var Header = (function (_super) {\n\t        __extends(Header, _super);\n\t        function Header() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Header;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Header.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Header.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('left')\n\t    ], Header.prototype, \"iconPosition\", void 0);\n\t    exports.Header = Header;\n\t    var TabItem = (function (_super) {\n\t        __extends(TabItem, _super);\n\t        function TabItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabItem;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Complex({}, Header)\n\t    ], TabItem.prototype, \"header\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], TabItem.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], TabItem.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], TabItem.prototype, \"disabled\", void 0);\n\t    exports.TabItem = TabItem;\n\t    var Tab = (function (_super) {\n\t        __extends(Tab, _super);\n\t        function Tab(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.prevIndex = 0;\n\t            _this.show = { name: 'SlideDown', duration: 100 };\n\t            _this.hide = { name: 'SlideUp', duration: 100 };\n\t            _this.animateOptions = {};\n\t            _this.animObj = new ej2_base_5.Animation(_this.animateOptions);\n\t            _this.maxHeight = 0;\n\t            _this.title = 'Close';\n\t            _this.keyConfigs = {\n\t                tab: 'tab',\n\t                home: 'home',\n\t                end: 'end',\n\t                enter: 'enter',\n\t                space: 'space',\n\t                delete: 'delete',\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow'\n\t            };\n\t            return _this;\n\t        }\n\t        Tab.prototype.destroy = function () {\n\t            var _this = this;\n\t            if (!ej2_base_4.isNullOrUndefined(this.tbObj)) {\n\t                this.tbObj.destroy();\n\t            }\n\t            this.unWireEvents();\n\t            ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation'].forEach(function (val) {\n\t                _this.element.removeAttribute(val);\n\t            });\n\t            if (!this.isTemplate) {\n\t                this.element.innerHTML = '';\n\t            }\n\t            else {\n\t                var cntEle = ej2_base_2.select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n\t                this.element.classList.remove(CLS_TEMPLATE);\n\t                if (!ej2_base_4.isNullOrUndefined(cntEle)) {\n\t                    cntEle.innerHTML = this.cnt;\n\t                }\n\t            }\n\t            _super.prototype.destroy.call(this);\n\t            this.trigger('destroyed');\n\t        };\n\t        Tab.prototype.preRender = function () {\n\t            this.isPopup = false;\n\t            this.initRender = true;\n\t            this.isSwipeed = false;\n\t            var name = ej2_base_3.Browser.info.name;\n\t            var css = (name === 'msie') ? 'e-ie' : (name === 'edge') ? 'e-edge' : (name === 'safari') ? 'e-safari' : '';\n\t            ej2_base_4.setStyleAttribute(this.element, { 'width': ej2_base_3.formatUnit(this.width), 'height': ej2_base_3.formatUnit(this.height) });\n\t            this.setCssClass(this.element, this.cssClass, true);\n\t            ej2_base_1.attributes(this.element, { role: 'tablist', 'aria-disabled': 'false', 'aria-activedescendant': '' });\n\t            this.setCssClass(this.element, css, true);\n\t        };\n\t        Tab.prototype.render = function () {\n\t            this.renderContainer();\n\t            this.wireEvents();\n\t            this.initRender = false;\n\t        };\n\t        Tab.prototype.renderContainer = function () {\n\t            var ele = this.element;\n\t            if (this.items.length > 0 && ele.children.length === 0) {\n\t                ele.appendChild(ej2_base_4.createElement('div', { className: CLS_CONTENT }));\n\t                this.setOrientation(this.headerPlacement, ej2_base_4.createElement('div', { className: CLS_HEADER }));\n\t                this.isTemplate = false;\n\t            }\n\t            else if (this.element.children.length > 0) {\n\t                this.isTemplate = true;\n\t                ele.classList.add(CLS_TEMPLATE);\n\t                var header = ele.querySelector('.' + CLS_HEADER);\n\t                if (header && this.headerPlacement === 'Bottom') {\n\t                    this.setOrientation(this.headerPlacement, header);\n\t                }\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(ej2_base_2.select('.' + CLS_HEADER, this.element)) && !ej2_base_4.isNullOrUndefined(ej2_base_2.select('.' + CLS_CONTENT, this.element))) {\n\t                this.renderHeader();\n\t                this.tbItems = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\t                if (!ej2_base_4.isNullOrUndefined(this.tbItems)) {\n\t                    ej2_base_5.rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\n\t                }\n\t                this.renderContent();\n\t                if (ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n\t                    this.tbItems = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\t                    this.bdrLine = ej2_base_4.createElement('div', { className: CLS_INDICATOR + ' ' + CLS_HIDDEN + ' ' + CLS_IGNORE });\n\t                    var scrCnt = ej2_base_2.select('.e-hscroll-content', this.tbItems);\n\t                    if (!ej2_base_4.isNullOrUndefined(scrCnt)) {\n\t                        scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n\t                    }\n\t                    else {\n\t                        this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n\t                    }\n\t                    this.setContentHeight(true);\n\t                    this.select(this.selectedItem);\n\t                }\n\t                this.setRTL(this.enableRtl);\n\t            }\n\t        };\n\t        Tab.prototype.renderHeader = function () {\n\t            var _this = this;\n\t            var tabItems = [];\n\t            this.hdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            this.btnCls = ej2_base_4.createElement('span', { className: CLS_ICONS + ' ' + CLS_ICON_CLOSE, attrs: { title: this.title } }).outerHTML;\n\t            if (!this.isTemplate) {\n\t                tabItems = this.parseObject(this.items);\n\t            }\n\t            else {\n\t                var count = this.hdrEle.children.length;\n\t                var hdrItems = [];\n\t                for (var i = 0; i < count; i++) {\n\t                    hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n\t                }\n\t                if (count > 0) {\n\t                    this.hdrEle.innerHTML = '';\n\t                    this.hdrEle.appendChild(ej2_base_4.createElement('div', { className: CLS_ITEMS }));\n\t                    hdrItems.forEach(function (item, index) {\n\t                        var attr = {\n\t                            className: CLS_ITEM, id: CLS_ITEM + '_' + index,\n\t                            attrs: { role: 'tab', 'aria-controls': CLS_CONTENT + '_' + index, 'aria-selected': 'false' }\n\t                        };\n\t                        var txt = ej2_base_4.createElement('span', { className: CLS_TEXT, innerHTML: item, attrs: { 'role': 'presentation' } }).outerHTML;\n\t                        var cont = ej2_base_4.createElement('div', { className: CLS_TEXT_WRAP, innerHTML: txt + _this.btnCls }).outerHTML;\n\t                        var wrap = ej2_base_4.createElement('div', { className: CLS_WRAP, innerHTML: cont, attrs: { tabIndex: '-1' } });\n\t                        ej2_base_2.select('.' + CLS_ITEMS, _this.element).appendChild(ej2_base_4.createElement('div', attr));\n\t                        ej2_base_4.selectAll('.' + CLS_ITEM, _this.element)[index].appendChild(wrap);\n\t                    });\n\t                }\n\t            }\n\t            this.tbObj = new toolbar_1.Toolbar({\n\t                width: '100%',\n\t                overflowMode: this.overflowMode,\n\t                items: (tabItems.length !== 0) ? tabItems : [],\n\t                clicked: this.clickHandler.bind(this)\n\t            });\n\t            this.tbObj.appendTo(this.hdrEle);\n\t            ej2_base_1.attributes(this.element, { 'aria-orientation': 'horizontal' });\n\t            this.setCloseButton(this.showCloseButton);\n\t            this.setProperties({ headerPlacement: (this.element.children.item(0).classList.contains(CLS_HEADER)) ? 'Top' : 'Bottom' }, true);\n\t        };\n\t        Tab.prototype.renderContent = function () {\n\t            this.cntEle = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t            var hdrItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element);\n\t            if (this.isTemplate) {\n\t                this.cnt = (this.cntEle.children.length > 0) ? this.cntEle.innerHTML : '';\n\t                var contents = this.cntEle.children;\n\t                for (var i = 0; i < hdrItem.length; i++) {\n\t                    if (contents.length - 1 >= i) {\n\t                        contents.item(i).className += CLS_ITEM;\n\t                        ej2_base_1.attributes(contents.item(i), { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + i });\n\t                        contents.item(i).id = CLS_CONTENT + '_' + i;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.parseObject = function (items) {\n\t            var _this = this;\n\t            var inHTML = '';\n\t            var tbCount = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length;\n\t            var tItems = [];\n\t            items.forEach(function (item, index) {\n\t                var pos = (ej2_base_4.isNullOrUndefined(item.header.iconPosition)) ? '' : item.header.iconPosition;\n\t                var css = (ej2_base_4.isNullOrUndefined(item.header.iconCss)) ? '' : item.header.iconCss;\n\t                var txt = item.header.text;\n\t                var id = ((tbCount === 0) ? index : (_this.isReplace === true) ? index : tbCount + index);\n\t                var disabled = (item.disabled) ? ' ' + CLS_DISABLE : '';\n\t                var tHtml = ((txt instanceof Object) ? txt.outerHTML : txt);\n\t                var txtEmpty = (!ej2_base_4.isNullOrUndefined(tHtml) && tHtml !== '');\n\t                var tEle = (txtEmpty) ? ej2_base_4.createElement('div', {\n\t                    className: CLS_TEXT, innerHTML: tHtml, attrs: { 'role': 'presentation' }\n\t                }).outerHTML : '';\n\t                var icon = ej2_base_4.createElement('span', {\n\t                    className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n\t                }).outerHTML;\n\t                if ((txt === '' || txt === undefined) && css === '') {\n\t                    return;\n\t                }\n\t                else {\n\t                    if ((txt !== '' && txt !== undefined) && css !== '') {\n\t                        inHTML = (pos === 'left' || pos === 'top') ? icon + '' + tEle : tEle + '' + icon;\n\t                    }\n\t                    else {\n\t                        inHTML = (css === '') ? tEle : icon;\n\t                    }\n\t                }\n\t                var tCont = ej2_base_4.createElement('div', { className: CLS_TEXT_WRAP, innerHTML: inHTML + '' + _this.btnCls }).outerHTML;\n\t                var wrap = ej2_base_4.createElement('div', { className: CLS_WRAP, innerHTML: tCont, attrs: { tabIndex: '-1' } });\n\t                var attrObj = {\n\t                    id: CLS_ITEM + '_' + id, role: 'tab', 'aria-selected': 'false'\n\t                };\n\t                var tItem = { htmlAttributes: attrObj, template: wrap.outerHTML };\n\t                tItem.cssClass = item.cssClass + '' + disabled + '' + ((css !== '') ? 'e-i' + pos : '') + ' ' + ((!txtEmpty) ? CLS_ICON : '');\n\t                if (pos === 'top' || pos === 'bottom') {\n\t                    _this.element.classList.add('e-vertical-icon');\n\t                }\n\t                tItems.push(tItem);\n\t            });\n\t            return tItems;\n\t        };\n\t        Tab.prototype.removeActiveClass = function (id) {\n\t            var hdrActEle = ej2_base_4.selectAll(':root .' + CLS_HEADER + ' .' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element)[0];\n\t            if (this.headerPlacement === 'Bottom') {\n\t                hdrActEle = ej2_base_4.selectAll(':root .' + CLS_HEADER + ' .' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element.children[1])[0];\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(hdrActEle)) {\n\t                hdrActEle.classList.remove(CLS_ACTIVE);\n\t                var no = this.extIndex(hdrActEle.id);\n\t                var trg = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t            }\n\t        };\n\t        Tab.prototype.checkPopupOverflow = function (ele) {\n\t            this.tbPop = ej2_base_2.select('.' + CLS_TB_POP, this.element);\n\t            var popIcon = ej2_base_2.select('.e-hor-nav', this.element);\n\t            var tbrItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            if ((this.enableRtl && ((popIcon.offsetLeft + popIcon.offsetWidth) > tbrItems.offsetLeft))\n\t                || (!this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth)) {\n\t                ele.classList.add(CLS_TB_POPUP);\n\t                this.tbPop.insertBefore(ele.cloneNode(true), ej2_base_4.selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n\t                ele.outerHTML = '';\n\t            }\n\t            return true;\n\t        };\n\t        Tab.prototype.popupHandler = function (target) {\n\t            var ripEle = target.querySelector('.e-ripple-element');\n\t            if (!ej2_base_4.isNullOrUndefined(ripEle)) {\n\t                ripEle.outerHTML = '';\n\t                target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n\t            }\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n\t            var lastChild = this.tbItem[this.tbItem.length - 1];\n\t            if (this.tbItem.length !== 0) {\n\t                target.classList.remove(CLS_TB_POPUP);\n\t                this.tbItems.appendChild(target.cloneNode(true));\n\t                this.actEleId = target.id;\n\t                target.outerHTML = '';\n\t                if (this.checkPopupOverflow(lastChild)) {\n\t                    var prevEle = this.tbItems.lastChild.previousElementSibling;\n\t                    this.checkPopupOverflow(prevEle);\n\t                }\n\t                this.isPopup = true;\n\t            }\n\t            return ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n\t        };\n\t        Tab.prototype.setCloseButton = function (val) {\n\t            var trg = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            (val === true) ? trg.classList.add(CLS_CLOSE_SHOW) : trg.classList.remove(CLS_CLOSE_SHOW);\n\t            this.tbObj.refreshOverflow();\n\t            this.refreshActElePosition();\n\t        };\n\t        Tab.prototype.prevCtnAnimation = function (prev, current) {\n\t            var animation;\n\t            var checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL);\n\t            if (this.isPopup || prev <= current) {\n\t                if (this.animation.previous.effect === 'SlideLeftIn') {\n\t                    animation = { name: 'SlideLeftOut',\n\t                        duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing };\n\t                }\n\t                else {\n\t                    animation = null;\n\t                }\n\t            }\n\t            else {\n\t                if (this.animation.next.effect === 'SlideRightIn') {\n\t                    animation = { name: 'SlideRightOut',\n\t                        duration: this.animation.next.duration, timingFunction: this.animation.next.easing };\n\t                }\n\t                else {\n\t                    animation = null;\n\t                }\n\t            }\n\t            return animation;\n\t        };\n\t        Tab.prototype.triggerPrevAnimation = function (oldCnt, prevIndex) {\n\t            var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n\t            if (!ej2_base_4.isNullOrUndefined(animateObj)) {\n\t                animateObj.begin = function () {\n\t                    ej2_base_4.setStyleAttribute(oldCnt, { 'position': 'absolute' });\n\t                    oldCnt.classList.add(CLS_PROGRESS);\n\t                    oldCnt.classList.add('e-view');\n\t                };\n\t                animateObj.end = function () {\n\t                    oldCnt.style.display = 'none';\n\t                    oldCnt.classList.remove(CLS_ACTIVE);\n\t                    oldCnt.classList.remove(CLS_PROGRESS);\n\t                    oldCnt.classList.remove('e-view');\n\t                    ej2_base_4.setStyleAttribute(oldCnt, { 'display': '', 'position': '' });\n\t                };\n\t                new ej2_base_5.Animation(animateObj).animate(oldCnt);\n\t            }\n\t            else {\n\t                oldCnt.classList.remove(CLS_ACTIVE);\n\t            }\n\t        };\n\t        Tab.prototype.triggerAnimation = function (id, value) {\n\t            var _this = this;\n\t            var prevIndex = this.prevIndex;\n\t            var itemCollection = [].slice.call(this.element.querySelector('.' + CLS_CONTENT).children);\n\t            var oldCnt;\n\t            itemCollection.forEach(function (item) {\n\t                if (item.id === _this.prevActiveEle) {\n\t                    oldCnt = item;\n\t                }\n\t            });\n\t            var prevEle = this.tbItem[prevIndex];\n\t            var no = this.extIndex(this.tbItem[this.selectedItem].id);\n\t            var newCnt;\n\t            newCnt = this.findEle(this.cntEle.children, CLS_CONTENT + '_' + no);\n\t            if (ej2_base_4.isNullOrUndefined(oldCnt) && !ej2_base_4.isNullOrUndefined(prevEle)) {\n\t                var idNo = this.extIndex(prevEle.id);\n\t                oldCnt = this.findEle(this.cntEle.children, CLS_CONTENT + '_' + idNo);\n\t            }\n\t            if (this.initRender || value === false || this.animation === {} || ej2_base_4.isNullOrUndefined(this.animation)) {\n\t                if (oldCnt && oldCnt !== newCnt) {\n\t                    oldCnt.classList.remove(CLS_ACTIVE);\n\t                }\n\t                return;\n\t            }\n\t            var cnt = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t            var animateObj;\n\t            if (this.prevIndex > this.selectedItem && !this.isPopup) {\n\t                var openEff = this.animation.previous.effect;\n\t                animateObj = {\n\t                    name: ((openEff === 'None') ? '' : ((openEff !== 'SlideLeftIn') ? openEff : 'SlideLeftIn')),\n\t                    duration: this.animation.previous.duration,\n\t                    timingFunction: this.animation.previous.easing\n\t                };\n\t            }\n\t            else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n\t                var clsEff = this.animation.next.effect;\n\t                animateObj = {\n\t                    name: ((clsEff === 'None') ? '' : ((clsEff !== 'SlideRightIn') ? clsEff : 'SlideRightIn')),\n\t                    duration: this.animation.next.duration,\n\t                    timingFunction: this.animation.next.easing\n\t                };\n\t            }\n\t            animateObj.progress = function () {\n\t                cnt.classList.add(CLS_PROGRESS);\n\t                _this.setActiveBorder();\n\t            };\n\t            animateObj.end = function () {\n\t                cnt.classList.remove(CLS_PROGRESS);\n\t                newCnt.classList.add(CLS_ACTIVE);\n\t            };\n\t            if (!this.initRender) {\n\t                this.triggerPrevAnimation(oldCnt, prevIndex);\n\t            }\n\t            this.prevActiveEle = newCnt.id;\n\t            this.isPopup = false;\n\t            if (animateObj.name === '') {\n\t                newCnt.classList.add(CLS_ACTIVE);\n\t            }\n\t            else {\n\t                new ej2_base_5.Animation(animateObj).animate(newCnt);\n\t            }\n\t        };\n\t        Tab.prototype.keyPressed = function (trg) {\n\t            var trgParent = ej2_base_1.closest(trg, '.' + CLS_HEADER + ' .' + CLS_TB_ITEM);\n\t            var trgIndex = this.getEleIndex(trgParent);\n\t            if (!ej2_base_4.isNullOrUndefined(this.popEle) && trg.classList.contains('e-hor-nav')) {\n\t                (this.popEle.classList.contains(CLS_POPUP_OPEN)) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n\t            }\n\t            else if (trg.classList.contains('e-scroll-nav')) {\n\t                trg.click();\n\t            }\n\t            else {\n\t                if (!ej2_base_4.isNullOrUndefined(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {\n\t                    this.select(trgIndex);\n\t                    if (!ej2_base_4.isNullOrUndefined(this.popEle)) {\n\t                        this.popObj.hide(this.hide);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.getEleIndex = function (item) {\n\t            return Array.prototype.indexOf.call(ej2_base_4.selectAll('.' + CLS_HEADER + ' .' + CLS_TB_ITEM, this.element), item);\n\t        };\n\t        Tab.prototype.extIndex = function (id) {\n\t            return id.replace(CLS_ITEM + '_', '');\n\t        };\n\t        Tab.prototype.getContent = function (ele, index) {\n\t            var templateFn;\n\t            var content;\n\t            var tempEle = ej2_base_4.createElement('div');\n\t            var cnt = this.items[Number(index)].content;\n\t            var cntHTML = (typeof cnt !== 'object') ? cnt : cnt.outerHTML;\n\t            templateFn = ej2_base_5.compile(cntHTML);\n\t            if (!ej2_base_4.isNullOrUndefined(templateFn) && templateFn().length > 0) {\n\t                [].slice.call(templateFn()).forEach(function (el) {\n\t                    tempEle.appendChild(el);\n\t                });\n\t                ele.appendChild(tempEle);\n\t            }\n\t            else {\n\t                ele.innerHTML = cntHTML;\n\t            }\n\t        };\n\t        Tab.prototype.findEle = function (items, key) {\n\t            var ele;\n\t            for (var i = 0; i < items.length; i++) {\n\t                if (items[i].id === key) {\n\t                    ele = items[i];\n\t                    break;\n\t                }\n\t            }\n\t            return ele;\n\t        };\n\t        Tab.prototype.setOrientation = function (place, ele) {\n\t            (place === 'Bottom') ? this.element.appendChild(ele) : this.element.insertBefore(ele, ej2_base_2.select('.' + CLS_CONTENT, this.element));\n\t        };\n\t        Tab.prototype.setCssClass = function (ele, cls, val) {\n\t            if (cls === '') {\n\t                return;\n\t            }\n\t            var list = cls.split(' ');\n\t            for (var i = 0; i < list.length; i++) {\n\t                if (val) {\n\t                    ele.classList.add(list[i]);\n\t                }\n\t                else {\n\t                    ele.classList.remove(list[i]);\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.setContentHeight = function (val) {\n\t            if (ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                return;\n\t            }\n\t            var height;\n\t            var hdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            if (this.heightAdjustMode === 'None') {\n\t                if (this.height === 'auto') {\n\t                    return;\n\t                }\n\t                else {\n\t                    ej2_base_4.setStyleAttribute(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\n\t                }\n\t            }\n\t            else if (this.heightAdjustMode === 'Fill') {\n\t                ej2_base_4.setStyleAttribute(this.element, { 'height': '100%' });\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': 'auto' });\n\t            }\n\t            else if (this.heightAdjustMode === 'Auto') {\n\t                var cnt = ej2_base_4.selectAll('.' + CLS_CONTENT + ' > .' + CLS_ITEM, this.element);\n\t                if (this.isTemplate === true) {\n\t                    for (var i = 0; i < cnt.length; i++) {\n\t                        cnt[i].setAttribute('style', 'display:block; visibility: visible');\n\t                        this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n\t                        cnt[i].style.removeProperty('display');\n\t                        cnt[i].style.removeProperty('visibility');\n\t                    }\n\t                }\n\t                else {\n\t                    this.cntEle = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t                    if (val === true) {\n\t                        this.cntEle.appendChild(ej2_base_4.createElement('div', {\n\t                            id: (CLS_CONTENT + '_' + 0), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n\t                            attrs: { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + 0 }\n\t                        }));\n\t                    }\n\t                    var ele = this.cntEle.children.item(0);\n\t                    for (var i = 0; i < this.items.length; i++) {\n\t                        this.getContent(ele, i);\n\t                        this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n\t                        ele.innerHTML = '';\n\t                    }\n\t                    this.getContent(ele, 0);\n\t                    ele.classList.remove(CLS_ACTIVE);\n\t                }\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': this.maxHeight + 'px' });\n\t            }\n\t            else {\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': 'auto' });\n\t            }\n\t        };\n\t        Tab.prototype.getHeight = function (ele) {\n\t            var cs = window.getComputedStyle(ele);\n\t            return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) +\n\t                parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n\t        };\n\t        Tab.prototype.setActiveBorder = function () {\n\t            var trg = ej2_base_2.select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element);\n\t            if (this.headerPlacement === 'Bottom') {\n\t                trg = ej2_base_2.select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element.children[1]);\n\t            }\n\t            if (trg === null) {\n\t                return;\n\t            }\n\t            var root = ej2_base_1.closest(trg, '.' + CLS_TAB);\n\t            if (this.element !== root) {\n\t                return;\n\t            }\n\t            var hsCnt = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS + ' .e-hscroll-content', this.element.children[0]);\n\t            this.tbItems = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\t            var bar = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_INDICATOR, this.element);\n\t            if (this.headerPlacement === 'Bottom') {\n\t                hsCnt = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS + ' .e-hscroll-content', this.element.children[1]);\n\t            }\n\t            var tbWidth = (ej2_base_4.isNullOrUndefined(hsCnt)) ? this.tbItems.offsetWidth : hsCnt.offsetWidth;\n\t            if (tbWidth !== 0) {\n\t                ej2_base_4.setStyleAttribute(bar, { 'left': trg.offsetLeft + 'px', 'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px' });\n\t            }\n\t            else {\n\t                ej2_base_4.setStyleAttribute(bar, { 'left': 'auto', 'right': 'auto' });\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(this.bdrLine)) {\n\t                this.bdrLine.classList.remove(CLS_HIDDEN);\n\t            }\n\t        };\n\t        Tab.prototype.setActive = function (value) {\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_HEADER + ' .' + CLS_TB_ITEM, this.element);\n\t            var trg = this.tbItem[value];\n\t            if (value >= 0) {\n\t                this.setProperties({ selectedItem: value }, true);\n\t            }\n\t            if (value < 0 || isNaN(value) || this.tbItem.length === 0) {\n\t                return;\n\t            }\n\t            if (trg.classList.contains(CLS_ACTIVE)) {\n\t                this.setActiveBorder();\n\t                return;\n\t            }\n\t            if (!this.isTemplate) {\n\t                var prev = this.tbItem[this.prevIndex];\n\t                if (!ej2_base_4.isNullOrUndefined(prev)) {\n\t                    prev.removeAttribute('aria-controls');\n\t                }\n\t                ej2_base_1.attributes(trg, { 'aria-controls': CLS_CONTENT + '_' + value });\n\t            }\n\t            var id = trg.id;\n\t            this.removeActiveClass(id);\n\t            trg.classList.add(CLS_ACTIVE);\n\t            trg.setAttribute('aria-selected', 'true');\n\t            var no = Number(this.extIndex(id));\n\t            ej2_base_1.attributes(this.element, { 'aria-activedescendant': id });\n\t            if (this.isTemplate) {\n\t                if (ej2_base_2.select('.' + CLS_CONTENT, this.element).children.length > 0) {\n\t                    var trg_1 = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t                    if (!ej2_base_4.isNullOrUndefined(trg_1)) {\n\t                        trg_1.classList.add(CLS_ACTIVE);\n\t                    }\n\t                    this.triggerAnimation(id, this.enableAnimation);\n\t                }\n\t            }\n\t            else {\n\t                var item = ej2_base_2.select('.' + CLS_CONTENT + ' > #' + CLS_CONTENT + '_' + this.extIndex(id), this.element);\n\t                if (ej2_base_4.isNullOrUndefined(item)) {\n\t                    this.cntEle.appendChild(ej2_base_4.createElement('div', {\n\t                        id: CLS_CONTENT + '_' + this.extIndex(id), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n\t                        attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + this.extIndex(id) }\n\t                    }));\n\t                    var eleTrg = ej2_base_2.select('.' + CLS_CONTENT + ' > #' + CLS_CONTENT + '_' + this.extIndex(id), this.element);\n\t                    this.getContent(eleTrg, Number(this.extIndex(id)));\n\t                }\n\t                else {\n\t                    item.classList.add(CLS_ACTIVE);\n\t                }\n\t                this.triggerAnimation(id, this.enableAnimation);\n\t            }\n\t            this.setActiveBorder();\n\t            var curActItem = ej2_base_2.select('.' + CLS_HEADER + ' #' + id, this.element);\n\t            this.refreshItemVisibility(curActItem);\n\t            curActItem.firstChild.focus();\n\t            var eventArg = {\n\t                previousItem: this.prevItem,\n\t                previousIndex: this.prevIndex,\n\t                selectedItem: trg,\n\t                selectedIndex: value,\n\t                isSwiped: this.isSwipeed\n\t            };\n\t            this.trigger('selected', eventArg);\n\t        };\n\t        Tab.prototype.setItems = function (items) {\n\t            this.isReplace = true;\n\t            this.tbItems = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\t            this.tbObj.items = this.parseObject(items);\n\t            this.tbObj.dataBind();\n\t            this.isReplace = false;\n\t        };\n\t        Tab.prototype.setRTL = function (value) {\n\t            this.tbObj.enableRtl = value;\n\t            this.tbObj.dataBind();\n\t            this.setCssClass(this.element, CLS_RTL, value);\n\t            this.refreshActiveBorder();\n\t        };\n\t        Tab.prototype.refreshActiveBorder = function () {\n\t            if (!ej2_base_4.isNullOrUndefined(this.bdrLine)) {\n\t                this.bdrLine.classList.add(CLS_HIDDEN);\n\t            }\n\t            this.setActiveBorder();\n\t        };\n\t        Tab.prototype.wireEvents = function () {\n\t            window.addEventListener('resize', this.refreshActElePosition.bind(this));\n\t            ej2_base_5.EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n\t            if (!ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                this.touchModule = new ej2_base_5.Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n\t            }\n\t            this.keyModule = new ej2_base_3.KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });\n\t            this.tabKeyModule = new ej2_base_3.KeyboardEvents(this.element, {\n\t                keyAction: this.keyHandler.bind(this),\n\t                keyConfigs: { openPopup: 'shift+f10', tab: 'tab', shiftTab: 'shift+tab' },\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Tab.prototype.unWireEvents = function () {\n\t            this.keyModule.destroy();\n\t            this.tabKeyModule.destroy();\n\t            if (!ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                this.touchModule.destroy();\n\t            }\n\t            window.removeEventListener('resize', this.refreshActElePosition.bind(this));\n\t            this.element.removeEventListener('mouseover', this.hoverHandler.bind(this));\n\t        };\n\t        Tab.prototype.clickHandler = function (args) {\n\t            this.element.classList.remove(CLS_FOCUS);\n\t            var trg = args.originalEvent.target;\n\t            var trgParent = ej2_base_1.closest(trg, '.' + CLS_TB_ITEM);\n\t            var trgIndex = this.getEleIndex(trgParent);\n\t            if (trg.classList.contains(CLS_ICON_CLOSE)) {\n\t                this.removeTab(trgIndex);\n\t            }\n\t            else {\n\t                this.isPopup = false;\n\t                if (!ej2_base_4.isNullOrUndefined(trgParent) && trgIndex !== this.selectedItem) {\n\t                    this.select(trgIndex);\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.swipeHandler = function (e) {\n\t            if (e.velocity < 3 && ej2_base_4.isNullOrUndefined(e.originalEvent.changedTouches)) {\n\t                return;\n\t            }\n\t            this.isSwipeed = true;\n\t            if (e.swipeDirection === 'Right') {\n\t                this.select(this.selectedItem - 1);\n\t            }\n\t            else {\n\t                if (e.swipeDirection === 'Left' && (this.selectedItem !== ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length - 1)) {\n\t                    this.select(this.selectedItem + 1);\n\t                }\n\t            }\n\t            this.isSwipeed = false;\n\t        };\n\t        Tab.prototype.spaceKeyDown = function (e) {\n\t            if ((e.keyCode === 32 && e.which === 32) || (e.keyCode === 35 && e.which === 35)) {\n\t                var clstHead = ej2_base_1.closest(e.target, '.' + CLS_HEADER);\n\t                if (!ej2_base_4.isNullOrUndefined(clstHead)) {\n\t                    e.preventDefault();\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.keyHandler = function (e) {\n\t            this.element.classList.add(CLS_FOCUS);\n\t            var trg = e.target;\n\t            var actEle = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_ACTIVE, this.element);\n\t            var tabItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element);\n\t            this.popEle = ej2_base_2.select('.' + CLS_TB_POP, this.element);\n\t            if (!ej2_base_4.isNullOrUndefined(this.popEle)) {\n\t                this.popObj = this.popEle.ej2_instances[0];\n\t            }\n\t            switch (e.action) {\n\t                case 'space':\n\t                case 'enter':\n\t                    if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n\t                        break;\n\t                    }\n\t                    this.keyPressed(trg);\n\t                    break;\n\t                case 'tab':\n\t                case 'shiftTab':\n\t                    if (trg.classList.contains(CLS_WRAP)\n\t                        && ej2_base_1.closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {\n\t                        trg.setAttribute('tabindex', '-1');\n\t                    }\n\t                    if (this.popObj && ej2_base_2.isVisible(this.popObj.element)) {\n\t                        this.popObj.hide(this.hide);\n\t                    }\n\t                    actEle.children.item(0).setAttribute('tabindex', '0');\n\t                    break;\n\t                case 'moveLeft':\n\t                case 'moveRight':\n\t                    var item = ej2_base_1.closest(document.activeElement, '.' + CLS_TB_ITEM);\n\t                    if (!ej2_base_4.isNullOrUndefined(item)) {\n\t                        this.refreshItemVisibility(item);\n\t                    }\n\t                    break;\n\t                case 'openPopup':\n\t                    e.preventDefault();\n\t                    if (!ej2_base_4.isNullOrUndefined(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n\t                        this.popObj.show(this.show);\n\t                    }\n\t                    break;\n\t                case 'delete':\n\t                    var trgParent = ej2_base_1.closest(trg, '.' + CLS_TB_ITEM);\n\t                    if (this.showCloseButton === true && !ej2_base_4.isNullOrUndefined(trgParent)) {\n\t                        var nxtSib = trgParent.nextSibling;\n\t                        if (!ej2_base_4.isNullOrUndefined(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n\t                            nxtSib.firstChild.focus();\n\t                        }\n\t                        this.removeTab(this.getEleIndex(trgParent));\n\t                    }\n\t                    this.setActiveBorder();\n\t                    break;\n\t            }\n\t        };\n\t        Tab.prototype.refreshActElePosition = function () {\n\t            var activeEle = ej2_base_2.select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE, this.element);\n\t            if (!ej2_base_4.isNullOrUndefined(activeEle)) {\n\t                this.select(this.getEleIndex(activeEle));\n\t            }\n\t            this.refreshActiveBorder();\n\t        };\n\t        Tab.prototype.refreshItemVisibility = function (target) {\n\t            var scrCnt = ej2_base_2.select('.e-hscroll-content', this.tbItems);\n\t            if (!ej2_base_4.isNullOrUndefined(scrCnt)) {\n\t                var scrBar = ej2_base_2.select('.e-hscroll-bar', this.tbItems);\n\t                var scrStart = scrBar.scrollLeft;\n\t                var scrEnd = scrStart + scrBar.offsetWidth;\n\t                var eleStart = target.offsetLeft;\n\t                var eleWidth = target.offsetWidth;\n\t                var eleEnd = target.offsetLeft + target.offsetWidth;\n\t                if ((scrStart < eleStart) && (scrEnd < eleEnd)) {\n\t                    var eleViewRange = scrEnd - eleStart;\n\t                    scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n\t                }\n\t                else {\n\t                    if ((scrStart > eleStart) && (scrEnd > eleEnd)) {\n\t                        var eleViewRange = eleEnd - scrStart;\n\t                        scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                return;\n\t            }\n\t        };\n\t        Tab.prototype.hoverHandler = function (e) {\n\t            var trg = e.target;\n\t            if (!ej2_base_4.isNullOrUndefined(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {\n\t                trg.setAttribute('title', new ej2_base_3.L10n('tab', { title: this.title }, this.locale).getConstant('title'));\n\t            }\n\t        };\n\t        Tab.prototype.enableTab = function (index, value) {\n\t            var tbItems = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            if (ej2_base_4.isNullOrUndefined(tbItems)) {\n\t                return;\n\t            }\n\t            if (value === true) {\n\t                tbItems.classList.remove(CLS_DISABLE);\n\t            }\n\t            else {\n\t                tbItems.classList.add(CLS_DISABLE);\n\t                if (tbItems.classList.contains(CLS_ACTIVE)) {\n\t                    this.select(index + 1);\n\t                }\n\t            }\n\t            tbItems.setAttribute('aria-disabled', (value === true) ? 'false' : 'true');\n\t        };\n\t        Tab.prototype.addTab = function (items, index) {\n\t            var _this = this;\n\t            this.trigger('adding', { addedItems: items });\n\t            if (ej2_base_4.isNullOrUndefined(index)) {\n\t                index = ej2_base_4.selectAll('.' + CLS_TB_ITEM).length - 1;\n\t            }\n\t            if (this.isTemplate === true || ej2_base_4.selectAll('.' + CLS_TB_ITEM).length - 1 < index || index < 0 || isNaN(index)) {\n\t                return;\n\t            }\n\t            this.bdrLine.classList.add(CLS_HIDDEN);\n\t            this.tbItems = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\t            var tabItems = this.parseObject(items);\n\t            items.forEach(function (item) {\n\t                _this.items.push(item);\n\t            });\n\t            this.tbObj.addItems(tabItems, index);\n\t            this.trigger('added', { addedItems: items });\n\t            if (this.selectedItem === index) {\n\t                this.select(index);\n\t            }\n\t            else {\n\t                this.setActiveBorder();\n\t            }\n\t        };\n\t        Tab.prototype.removeTab = function (index) {\n\t            var trg = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            var removingArgs = { removedItem: trg, removedIndex: index };\n\t            this.trigger('removing', removingArgs);\n\t            if (ej2_base_4.isNullOrUndefined(trg)) {\n\t                return;\n\t            }\n\t            this.tbObj.removeItems(index);\n\t            this.refreshActiveBorder();\n\t            var no = this.extIndex(trg.id);\n\t            var cntTrg = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t            if (!ej2_base_4.isNullOrUndefined(cntTrg)) {\n\t                cntTrg.outerHTML = '';\n\t            }\n\t            var removedArgs = { removedItem: trg, removedIndex: index };\n\t            this.trigger('removed', removedArgs);\n\t            if (trg.classList.contains(CLS_ACTIVE)) {\n\t                index = (index > ej2_base_4.selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element).length - 1) ? index - 1 : index;\n\t                this.enableAnimation = false;\n\t                this.select(index);\n\t            }\n\t            if (ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length === 0) {\n\t                this.hdrEle.style.display = 'none';\n\t            }\n\t            this.enableAnimation = true;\n\t        };\n\t        Tab.prototype.hideTab = function (index, value) {\n\t            var item = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            if (ej2_base_4.isNullOrUndefined(item)) {\n\t                return;\n\t            }\n\t            if (ej2_base_4.isNullOrUndefined(value)) {\n\t                value = true;\n\t            }\n\t            this.bdrLine.classList.add(CLS_HIDDEN);\n\t            if (value === true) {\n\t                item.classList.add(CLS_HIDDEN);\n\t                if (item.classList.contains(CLS_ACTIVE)) {\n\t                    this.select((index !== 0) ? index - 1 : index + 1);\n\t                }\n\t            }\n\t            else {\n\t                item.classList.remove(CLS_HIDDEN);\n\t            }\n\t            this.setActiveBorder();\n\t            item.setAttribute('aria-hidden', '' + value);\n\t        };\n\t        Tab.prototype.select = function (args) {\n\t            this.tbItems = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_HEADER + ' .' + CLS_TB_ITEM, this.element);\n\t            this.prevItem = this.tbItem[this.prevIndex];\n\t            if (!ej2_base_4.isNullOrUndefined(this.prevItem)) {\n\t                this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n\t            }\n\t            var eventArg = {\n\t                previousItem: this.prevItem,\n\t                previousIndex: this.prevIndex,\n\t                selectedItem: this.tbItem[this.selectedItem],\n\t                selectedIndex: this.selectedItem,\n\t                isSwiped: this.isSwipeed\n\t            };\n\t            this.trigger('selecting', eventArg);\n\t            if (eventArg.cancel) {\n\t                return;\n\t            }\n\t            if (typeof args === 'number') {\n\t                if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n\t                    this.prevIndex = this.selectedItem;\n\t                    if (this.tbItem[args].classList.contains(CLS_TB_POPUP)) {\n\t                        this.setActive(this.popupHandler(this.tbItem[args]));\n\t                    }\n\t                    else {\n\t                        this.setActive(args);\n\t                    }\n\t                }\n\t                else {\n\t                    this.setActive(0);\n\t                }\n\t            }\n\t            else if (args instanceof (HTMLElement)) {\n\t                this.setActive(this.getEleIndex(args));\n\t            }\n\t        };\n\t        Tab.prototype.disable = function (value) {\n\t            this.setCssClass(this.element, CLS_DISABLE, value);\n\t            this.element.setAttribute('aria-disabled', '' + value);\n\t        };\n\t        Tab.prototype.getPersistData = function () {\n\t            return this.addOnPersist(['selectedItem', 'actEleId']);\n\t        };\n\t        Tab.prototype.getModuleName = function () {\n\t            return 'tab';\n\t        };\n\t        Tab.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'width':\n\t                        ej2_base_4.setStyleAttribute(this.element, { width: ej2_base_3.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_4.setStyleAttribute(this.element, { height: ej2_base_3.formatUnit(newProp.height) });\n\t                        this.setContentHeight(false);\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCssClass(this.element, newProp.cssClass, true);\n\t                        break;\n\t                    case 'items':\n\t                        if (ej2_base_4.isNullOrUndefined(this.tbObj)) {\n\t                            this.renderContainer();\n\t                            if (!ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                                this.touchModule = new ej2_base_5.Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.setItems(newProp.items);\n\t                            this.select(this.selectedItem);\n\t                        }\n\t                        break;\n\t                    case 'showCloseButton':\n\t                        this.setCloseButton(newProp.showCloseButton);\n\t                        break;\n\t                    case 'selectedItem':\n\t                        this.selectedItem = oldProp.selectedItem;\n\t                        this.select(newProp.selectedItem);\n\t                        break;\n\t                    case 'headerPlacement':\n\t                        var tempHdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t                        this.setOrientation(newProp.headerPlacement, tempHdrEle);\n\t                        this.select(this.selectedItem);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setRTL(newProp.enableRtl);\n\t                        break;\n\t                    case 'overflowMode':\n\t                        this.tbObj.overflowMode = newProp.overflowMode;\n\t                        this.tbObj.dataBind();\n\t                        this.refreshActElePosition();\n\t                        break;\n\t                    case 'heightAdjustMode':\n\t                        this.setContentHeight(false);\n\t                        this.select(this.selectedItem);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Tab;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Collection([], TabItem)\n\t    ], Tab.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Tab.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Tab.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Tab.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Tab.prototype, \"selectedItem\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Top')\n\t    ], Tab.prototype, \"headerPlacement\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Content')\n\t    ], Tab.prototype, \"heightAdjustMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Scrollable')\n\t    ], Tab.prototype, \"overflowMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tab.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tab.prototype, \"showCloseButton\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, TabAnimationSettings)\n\t    ], Tab.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"adding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"added\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"selecting\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"selected\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"removing\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"removed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"destroyed\", void 0);\n\t    Tab = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], Tab);\n\t    exports.Tab = Tab;\n\t    exports.tabBuilder = ej2_base_1.CreateBuilder(Tab);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, treeview_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(treeview_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(17), __webpack_require__(3), __webpack_require__(12), __webpack_require__(7), __webpack_require__(18), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_base_6, ej2_data_1, ej2_base_7, ej2_lists_1, ej2_buttons_1, ej2_inputs_1, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ROOT = 'e-treeview';\n\t    var COLLAPSIBLE = 'e-icon-collapsible';\n\t    var EXPANDABLE = 'e-icon-expandable';\n\t    var LISTITEM = 'e-list-item';\n\t    var LISTTEXT = 'e-list-text';\n\t    var PARENTITEM = 'e-list-parent';\n\t    var HOVER = 'e-hover';\n\t    var ACTIVE = 'e-active';\n\t    var LOAD = 'e-icons-spinner';\n\t    var PROCESS = 'e-process';\n\t    var ICON = 'e-icons';\n\t    var TEXTWRAP = 'e-text-content';\n\t    var INPUT = 'e-input';\n\t    var INPUTGROUP = 'e-input-group';\n\t    var EDITING = 'e-editing';\n\t    var RTL = 'e-rtl';\n\t    var DRAGITEM = 'e-drag-item';\n\t    var DROPPABLE = 'e-droppable';\n\t    var DRAGGING = 'e-dragging';\n\t    var SIBLING = 'e-sibling';\n\t    var DROPIN = 'e-drop-in';\n\t    var DROPNEXT = 'e-drop-next';\n\t    var DROPOUT = 'e-drop-out';\n\t    var NODROP = 'e-no-drop';\n\t    var FULLROWWRAP = 'e-fullrow-wrap';\n\t    var FULLROW = 'e-fullrow';\n\t    var POPUP = 'e-popup';\n\t    var SELECTED = 'e-selected';\n\t    var EXPANDED = 'e-expanded';\n\t    var NODECOLLAPSED = 'e-node-collapsed';\n\t    var DISABLE = 'e-disable';\n\t    var POPUPSELECT = 'e-select';\n\t    var CONTENT = 'e-content';\n\t    var DOWNTAIL = 'e-downtail';\n\t    var DROPCOUNT = 'e-drop-count';\n\t    var CHECK = 'e-check';\n\t    var INDETERMINATE = 'e-stop';\n\t    var CHECKBOXWRAP = 'e-checkbox-wrapper';\n\t    var CHECKBOXFRAME = 'e-frame';\n\t    var CHECKBOXRIPPLE = 'e-ripple-container';\n\t    var FOCUS = 'e-node-focus';\n\t    var SPINNER_SIZE = ej2_base_1.Browser.isDevice ? 16 : 14;\n\t    var IMAGE = 'e-list-img';\n\t    var treeAriaAttr = {\n\t        treeRole: 'tree',\n\t        itemRole: 'treeitem',\n\t        listRole: 'group',\n\t        itemText: '',\n\t    };\n\t    var FieldsSettings = (function (_super) {\n\t        __extends(FieldsSettings, _super);\n\t        function FieldsSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FieldsSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Property('child')\n\t    ], FieldsSettings.prototype, \"child\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property([])\n\t    ], FieldsSettings.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('expanded')\n\t    ], FieldsSettings.prototype, \"expanded\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('hasChildren')\n\t    ], FieldsSettings.prototype, \"hasChildren\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('htmlAttributes')\n\t    ], FieldsSettings.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('iconCss')\n\t    ], FieldsSettings.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('id')\n\t    ], FieldsSettings.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('imageUrl')\n\t    ], FieldsSettings.prototype, \"imageUrl\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('isChecked')\n\t    ], FieldsSettings.prototype, \"isChecked\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('parentID')\n\t    ], FieldsSettings.prototype, \"parentID\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(null)\n\t    ], FieldsSettings.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('selected')\n\t    ], FieldsSettings.prototype, \"selected\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(null)\n\t    ], FieldsSettings.prototype, \"tableName\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('text')\n\t    ], FieldsSettings.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('tooltip')\n\t    ], FieldsSettings.prototype, \"tooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('navigateUrl')\n\t    ], FieldsSettings.prototype, \"navigateUrl\", void 0);\n\t    exports.FieldsSettings = FieldsSettings;\n\t    var ActionSettings = (function (_super) {\n\t        __extends(ActionSettings, _super);\n\t        function ActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ActionSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Property('SlideDown')\n\t    ], ActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(400)\n\t    ], ActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('linear')\n\t    ], ActionSettings.prototype, \"easing\", void 0);\n\t    exports.ActionSettings = ActionSettings;\n\t    var NodeAnimationSettings = (function (_super) {\n\t        __extends(NodeAnimationSettings, _super);\n\t        function NodeAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return NodeAnimationSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, ActionSettings)\n\t    ], NodeAnimationSettings.prototype, \"collapse\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, ActionSettings)\n\t    ], NodeAnimationSettings.prototype, \"expand\", void 0);\n\t    exports.NodeAnimationSettings = NodeAnimationSettings;\n\t    var TreeView = (function (_super) {\n\t        __extends(TreeView, _super);\n\t        function TreeView(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.checkActionNodes = [];\n\t            _this.dragStartAction = false;\n\t            _this.isAnimate = false;\n\t            _this.keyConfigs = {\n\t                escape: 'escape',\n\t                end: 'end',\n\t                enter: 'enter',\n\t                f2: 'f2',\n\t                home: 'home',\n\t                moveDown: 'downarrow',\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                ctrlDown: 'ctrl+downarrow',\n\t                ctrlUp: 'ctrl+uparrow',\n\t                ctrlEnter: 'ctrl+enter',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                ctrlA: 'ctrl+A',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftEnter: 'shift+enter',\n\t                shiftHome: 'shift+home',\n\t                shiftEnd: 'shift+end',\n\t                csDown: 'ctrl+shift+downarrow',\n\t                csUp: 'ctrl+shift+uparrow',\n\t                csEnter: 'ctrl+shift+enter',\n\t                csHome: 'ctrl+shift+home',\n\t                csEnd: 'ctrl+shift+end',\n\t                space: 'space',\n\t            };\n\t            _this.mouseDownStatus = false;\n\t            return _this;\n\t        }\n\t        TreeView.prototype.getModuleName = function () {\n\t            return 'treeview';\n\t        };\n\t        TreeView.prototype.preRender = function () {\n\t            var _this = this;\n\t            this.listBaseOption = {\n\t                expandCollapse: true,\n\t                fields: this.fields.properties,\n\t                showIcon: true,\n\t                expandIconClass: EXPANDABLE,\n\t                ariaAttributes: treeAriaAttr,\n\t                expandIconPosition: 'left',\n\t                itemCreated: function (e) {\n\t                    _this.beforeNodeCreate(e);\n\t                },\n\t            };\n\t            this.listBaseOption.fields.url = this.fields.navigateUrl;\n\t            this.aniObj = new ej2_base_4.Animation({});\n\t            this.treeList = [];\n\t            this.isLoaded = false;\n\t            if (ej2_base_7.isNullOrUndefined(this.selectedNodes)) {\n\t                this.setProperties({ selectedNodes: [] }, true);\n\t            }\n\t            if (ej2_base_7.isNullOrUndefined(this.checkedNodes)) {\n\t                this.setProperties({ checkedNodes: [] }, true);\n\t            }\n\t        };\n\t        TreeView.prototype.getPersistData = function () {\n\t            var keyEntity = ['selectedNodes', 'checkedNodes'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        TreeView.prototype.render = function () {\n\t            this.isAnimate = true;\n\t            this.initialize();\n\t            this.setDataBinding();\n\t            this.setExpandOnType();\n\t            this.setRipple();\n\t            this.wireEditingEvents(this.allowEditing);\n\t            this.setDragAndDrop(this.allowDragAndDrop);\n\t            this.wireEvents();\n\t        };\n\t        TreeView.prototype.initialize = function () {\n\t            this.element.setAttribute('role', 'tree');\n\t            this.element.setAttribute('tabindex', '0');\n\t            this.element.setAttribute('aria-activedescendant', 'node_active');\n\t            this.setCssClass(null, this.cssClass);\n\t            this.setEnableRtl();\n\t            this.setFullRow(this.fullRowSelect);\n\t            this.setTouchPopup(this.allowMultiSelection);\n\t            this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n\t        };\n\t        TreeView.prototype.setEnableRtl = function () {\n\t            this.enableRtl ? ej2_base_6.addClass([this.element], RTL) : ej2_base_6.removeClass([this.element], RTL);\n\t        };\n\t        TreeView.prototype.setRipple = function () {\n\t            var tempStr = '.' + FULLROW + ',.' + TEXTWRAP;\n\t            var rippleModel = {\n\t                selector: tempStr,\n\t                ignore: '.' + TEXTWRAP + ' > .' + ICON + ',.' + INPUTGROUP + ',.' + INPUT + ', .' + CHECKBOXWRAP\n\t            };\n\t            this.rippleFn = ej2_base_4.rippleEffect(this.element, rippleModel);\n\t            var iconModel = {\n\t                selector: '.' + TEXTWRAP + ' > .' + ICON,\n\t                isCenterRipple: true,\n\t            };\n\t            this.rippleIconFn = ej2_base_4.rippleEffect(this.element, iconModel);\n\t        };\n\t        TreeView.prototype.setFullRow = function (isEnabled) {\n\t            isEnabled ? ej2_base_6.addClass([this.element], FULLROWWRAP) : ej2_base_6.removeClass([this.element], FULLROWWRAP);\n\t        };\n\t        TreeView.prototype.setTouchPopup = function (isEnabled) {\n\t            if (isEnabled) {\n\t                var popup = ej2_base_6.createElement('div', { className: POPUP, styles: 'display:none;' });\n\t                var content = ej2_base_6.createElement('div', { className: CONTENT, attrs: { tabIndex: '-1' } });\n\t                var icon = ej2_base_6.createElement('span', { className: ICON });\n\t                content.appendChild(icon);\n\t                ej2_base_6.append([content, ej2_base_6.createElement('div', { className: DOWNTAIL })], popup);\n\t                this.element.appendChild(popup);\n\t                ej2_base_3.EventHandler.add(content, 'click', this.popupClick, this);\n\t            }\n\t            else {\n\t                var popup = ej2_base_6.select('.' + POPUP, this.element);\n\t                if (popup) {\n\t                    ej2_base_6.detach(popup);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.setMultiSelect = function (isEnabled) {\n\t            var firstUl = ej2_base_6.select('.' + PARENTITEM, this.element);\n\t            if (isEnabled) {\n\t                firstUl.setAttribute('aria-multiselectable', 'true');\n\t            }\n\t            else {\n\t                firstUl.removeAttribute('aria-multiselectable');\n\t            }\n\t        };\n\t        TreeView.prototype.popupClick = function (e) {\n\t            e.stopImmediatePropagation();\n\t            var target = e.currentTarget;\n\t            target = ej2_base_6.closest(target, '.' + POPUP);\n\t            if (target.classList.contains(POPUPSELECT)) {\n\t                ej2_base_6.removeClass([target], POPUPSELECT);\n\t                ej2_base_6.select('.' + POPUP, this.element).style.display = 'none';\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([target], POPUPSELECT);\n\t            }\n\t        };\n\t        TreeView.prototype.templateComplier = function (template) {\n\t            if (template) {\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(template).length) {\n\t                        return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    return ej2_base_1.compile(template);\n\t                }\n\t            }\n\t            return undefined;\n\t        };\n\t        TreeView.prototype.setDataBinding = function () {\n\t            var _this = this;\n\t            this.treeList.push('false');\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function (e) {\n\t                    _this.treeList.pop();\n\t                    _this.treeData = e.result;\n\t                    _this.isNumberTypeId = _this.treeData[0] ? ((typeof _this.treeData[0][_this.fields.id] === 'number') ? true : false) : false;\n\t                    _this.setRootData();\n\t                    _this.renderItems(true);\n\t                    if (_this.treeList.length === 0 && !_this.isLoaded) {\n\t                        _this.finalize();\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                this.treeList.pop();\n\t                if (ej2_base_7.isNullOrUndefined(this.fields.dataSource)) {\n\t                    this.rootData = this.treeData = [];\n\t                }\n\t                else {\n\t                    this.treeData = this.fields.dataSource;\n\t                    this.setRootData();\n\t                }\n\t                this.renderItems(false);\n\t            }\n\t            if (this.treeList.length === 0 && !this.isLoaded) {\n\t                this.finalize();\n\t            }\n\t        };\n\t        TreeView.prototype.getQuery = function (mapper, value) {\n\t            if (value === void 0) { value = null; }\n\t            var columns = [];\n\t            var query;\n\t            if (!mapper.query) {\n\t                query = new ej2_data_1.Query();\n\t                var prop = this.getActualProperties(mapper);\n\t                for (var _i = 0, _a = Object.keys(prop); _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (col !== 'dataSource' && col !== 'tableName' && col !== 'child' && !!mapper[col]\n\t                        && columns.indexOf(mapper[col]) === -1) {\n\t                        columns.push(mapper[col]);\n\t                    }\n\t                }\n\t                query.select(columns);\n\t                if (prop.hasOwnProperty('tableName')) {\n\t                    query.from(mapper.tableName);\n\t                }\n\t            }\n\t            else {\n\t                query = mapper.query.clone();\n\t            }\n\t            ej2_lists_1.ListBase.addSorting(this.sortOrder, mapper.text, query);\n\t            if (!ej2_base_7.isNullOrUndefined(value) && !ej2_base_7.isNullOrUndefined(mapper.parentID)) {\n\t                query.where(mapper.parentID, 'equal', (this.isNumberTypeId ? parseFloat(value) : value));\n\t            }\n\t            return query;\n\t        };\n\t        TreeView.prototype.setRootData = function () {\n\t            this.dataType = this.getDataType(this.treeData, this.fields);\n\t            if (this.dataType === 1) {\n\t                this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n\t                var rootItems = this.getChildNodes(this.treeData, undefined, true);\n\t                if (ej2_base_7.isNullOrUndefined(rootItems)) {\n\t                    this.rootData = [];\n\t                }\n\t                else {\n\t                    this.rootData = rootItems;\n\t                }\n\t            }\n\t            else {\n\t                this.rootData = this.treeData;\n\t            }\n\t        };\n\t        TreeView.prototype.renderItems = function (isSorted) {\n\t            this.listBaseOption.ariaAttributes.level = 1;\n\t            this.ulElement = ej2_lists_1.ListBase.createList(isSorted ? this.rootData : this.getSortedData(this.rootData), this.listBaseOption);\n\t            this.element.appendChild(this.ulElement);\n\t            this.finalizeNode(this.element);\n\t        };\n\t        TreeView.prototype.beforeNodeCreate = function (e) {\n\t            if (this.showCheckBox) {\n\t                var checkboxEle = ej2_buttons_1.createCheckBox(true);\n\t                var icon = ej2_base_6.select('div.' + ICON, e.item);\n\t                var id = e.item.getAttribute('data-uid');\n\t                e.item.childNodes[0].insertBefore(checkboxEle, e.item.childNodes[0].childNodes[ej2_base_7.isNullOrUndefined(icon) ? 0 : 1]);\n\t                if (this.checkedNodes.indexOf(id) > -1) {\n\t                    ej2_base_6.select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n\t                    checkboxEle.setAttribute('aria-checked', 'true');\n\t                    this.addCheck(e.item);\n\t                }\n\t                else if (!ej2_base_7.isNullOrUndefined(e.curData[e.fields.isChecked]) && e.curData[e.fields.isChecked].toString() === 'true') {\n\t                    ej2_base_6.select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n\t                    checkboxEle.setAttribute('aria-checked', 'true');\n\t                    this.addCheck(e.item);\n\t                }\n\t                else {\n\t                    checkboxEle.setAttribute('aria-checked', 'false');\n\t                }\n\t                var frame = ej2_base_6.select('.' + CHECKBOXFRAME, checkboxEle);\n\t                ej2_base_3.EventHandler.add(frame, 'mousedown', this.frameMouseHandler, this);\n\t                ej2_base_3.EventHandler.add(frame, 'mouseup', this.frameMouseHandler, this);\n\t            }\n\t            if (this.fullRowSelect) {\n\t                this.createFullRow(e.item);\n\t            }\n\t            if (this.allowMultiSelection && !e.item.classList.contains(SELECTED)) {\n\t                e.item.setAttribute('aria-selected', 'false');\n\t            }\n\t            var fields = e.fields;\n\t            this.addActionClass(e, fields.selected, SELECTED);\n\t            this.addActionClass(e, fields.expanded, EXPANDED);\n\t            if (!ej2_base_7.isNullOrUndefined(this.nodeTemplateFn)) {\n\t                var textEle = e.item.querySelector('.' + LISTTEXT);\n\t                textEle.innerHTML = '';\n\t                ej2_base_6.append(this.nodeTemplateFn(e.curData), textEle);\n\t            }\n\t            var eventArgs = {\n\t                node: e.item,\n\t                nodeData: e.curData,\n\t                text: e.text,\n\t            };\n\t            this.trigger('drawNode', eventArgs);\n\t        };\n\t        TreeView.prototype.frameMouseHandler = function (e) {\n\t            var rippleSpan = ej2_base_6.select('.' + CHECKBOXRIPPLE, e.target.parentElement);\n\t            if (rippleSpan) {\n\t                var event_1 = document.createEvent('MouseEvents');\n\t                event_1.initEvent(e.type, false, true);\n\t                rippleSpan.dispatchEvent(event_1);\n\t            }\n\t        };\n\t        TreeView.prototype.addActionClass = function (e, action, cssClass) {\n\t            var data = e.curData;\n\t            if (data.hasOwnProperty(action) && !ej2_base_7.isNullOrUndefined(data[action]) && data[action].toString() !== 'false') {\n\t                e.item.classList.add(cssClass);\n\t            }\n\t        };\n\t        TreeView.prototype.getDataType = function (ds, mapper) {\n\t            for (var i = 0, len = ds.length; i < len; i++) {\n\t                if ((typeof mapper.child === 'string') && ds[i].hasOwnProperty(mapper.child)) {\n\t                    return 2;\n\t                }\n\t                if (ds[i].hasOwnProperty(mapper.parentID) || ds[i].hasOwnProperty(mapper.hasChildren)) {\n\t                    return 1;\n\t                }\n\t            }\n\t            return 1;\n\t        };\n\t        TreeView.prototype.getGroupedData = function (dataSource, groupBy) {\n\t            var cusQuery = new ej2_data_1.Query().group(groupBy);\n\t            var ds = ej2_lists_1.ListBase.getDataSource(dataSource, cusQuery);\n\t            var grpItem = [];\n\t            for (var j = 0; j < ds.length; j++) {\n\t                var itemObj = ds[j].items;\n\t                grpItem.push(itemObj);\n\t            }\n\t            return grpItem;\n\t        };\n\t        TreeView.prototype.getSortedData = function (list) {\n\t            if (list && this.sortOrder !== 'None') {\n\t                list = ej2_lists_1.ListBase.getDataSource(list, ej2_lists_1.ListBase.addSorting(this.sortOrder, this.fields.text));\n\t            }\n\t            return list;\n\t        };\n\t        TreeView.prototype.finalizeNode = function (element) {\n\t            var _this = this;\n\t            var iNodes = ej2_base_6.selectAll('.' + IMAGE, element);\n\t            for (var k = 0; k < iNodes.length; k++) {\n\t                iNodes[k].setAttribute('alt', IMAGE);\n\t            }\n\t            if (this.isLoaded) {\n\t                var sNodes = ej2_base_6.selectAll('.' + SELECTED, element);\n\t                for (var i = 0; i < sNodes.length; i++) {\n\t                    this.selectNode(sNodes[i], null);\n\t                    break;\n\t                }\n\t                ej2_base_6.removeClass(sNodes, SELECTED);\n\t            }\n\t            var cNodes = ej2_base_6.selectAll('.' + LISTITEM + ':not(.' + EXPANDED + ')', element);\n\t            for (var j = 0; j < cNodes.length; j++) {\n\t                var icon = ej2_base_6.select('div.' + ICON, cNodes[j]);\n\t                if (icon && icon.classList.contains(EXPANDABLE)) {\n\t                    cNodes[j].setAttribute('aria-expanded', 'false');\n\t                    ej2_base_6.addClass([cNodes[j]], NODECOLLAPSED);\n\t                }\n\t            }\n\t            var eNodes = ej2_base_6.selectAll('.' + EXPANDED, element);\n\t            for (var i = 0; i < eNodes.length; i++) {\n\t                this.renderChildNodes(eNodes[i]);\n\t            }\n\t            ej2_base_6.removeClass(eNodes, EXPANDED);\n\t            this.updateList();\n\t            if (this.showCheckBox) {\n\t                var nodes_1 = [].concat([], this.checkedNodes);\n\t                this.checkedNodes.forEach(function (value, index) {\n\t                    var checkBox = _this.element.querySelector('[data-uid=\"' + value + '\"]');\n\t                    if (ej2_base_7.isNullOrUndefined(checkBox)) {\n\t                        nodes_1 = nodes_1.filter(function (e) { return e !== value; });\n\t                    }\n\t                });\n\t                this.setProperties({ checkedNodes: nodes_1 }, true);\n\t            }\n\t        };\n\t        TreeView.prototype.ensureParentCheckState = function (element) {\n\t            if (!ej2_base_7.isNullOrUndefined(element)) {\n\t                if (element.classList.contains(ROOT)) {\n\t                    return;\n\t                }\n\t                var ulElement = element;\n\t                if (element.classList.contains(LISTITEM)) {\n\t                    ulElement = ej2_base_6.select('.' + PARENTITEM, element);\n\t                }\n\t                var checkedNodes = ej2_base_6.selectAll('.' + CHECK, ulElement);\n\t                var nodes = ej2_base_6.selectAll('.' + LISTITEM, ulElement);\n\t                var checkBoxEle = element.getElementsByClassName(CHECKBOXWRAP)[0];\n\t                if (nodes.length === checkedNodes.length) {\n\t                    this.changeState(checkBoxEle, 'check', null, true, true);\n\t                }\n\t                else if (checkedNodes.length > 0) {\n\t                    this.changeState(checkBoxEle, 'indeterminate', null, true, true);\n\t                }\n\t                else if (checkedNodes.length === 0) {\n\t                    this.changeState(checkBoxEle, 'uncheck', null, true, true);\n\t                }\n\t                var parentUL = ej2_base_6.closest(element, '.' + PARENTITEM);\n\t                if (!ej2_base_7.isNullOrUndefined(parentUL)) {\n\t                    var currentParent = ej2_base_6.closest(parentUL, '.' + LISTITEM);\n\t                    this.ensureParentCheckState(currentParent);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.ensureChildCheckState = function (element, e) {\n\t            if (!ej2_base_7.isNullOrUndefined(element)) {\n\t                var childElement = ej2_base_6.select('.' + PARENTITEM, element);\n\t                var checkBoxes = void 0;\n\t                if (!ej2_base_7.isNullOrUndefined(childElement)) {\n\t                    checkBoxes = ej2_base_6.selectAll('.' + CHECKBOXWRAP, childElement);\n\t                    var isChecked = element.getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n\t                    var checkedState = void 0;\n\t                    for (var index = 0; index < checkBoxes.length; index++) {\n\t                        if (!ej2_base_7.isNullOrUndefined(this.currentLoadData) && !ej2_base_7.isNullOrUndefined(this.currentLoadData[index][this.fields.isChecked])) {\n\t                            checkedState = this.currentLoadData[index][this.fields.isChecked] ? 'check' : 'uncheck';\n\t                        }\n\t                        else {\n\t                            checkedState = isChecked ? 'check' : 'uncheck';\n\t                        }\n\t                        this.changeState(checkBoxes[index], checkedState, e, true, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.doCheckBoxAction = function (nodes, doCheck) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                for (var i = 0, len = nodes.length; i < len; i++) {\n\t                    var liEle = this.getElement(nodes[i]);\n\t                    if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                        continue;\n\t                    }\n\t                    var checkBox = ej2_base_6.select('.' + PARENTITEM + ' .' + CHECKBOXWRAP, liEle);\n\t                    this.validateCheckNode(checkBox, !doCheck, liEle, null);\n\t                }\n\t            }\n\t            else {\n\t                var checkBoxes = ej2_base_6.selectAll('.' + CHECKBOXWRAP, this.element);\n\t                for (var index = 0; index < checkBoxes.length; index++) {\n\t                    this.changeState(checkBoxes[index], doCheck ? 'check' : 'uncheck');\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.changeState = function (wrapper, state, e, isPrevent, isAdd) {\n\t            var ariaState;\n\t            var eventArgs;\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            if (!isPrevent) {\n\t                this.checkActionNodes = [];\n\t                eventArgs = this.getCheckEvent(currLi, state, e);\n\t                this.trigger('nodeChecking', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n\t            if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n\t                frameSpan.classList.remove(INDETERMINATE);\n\t                frameSpan.classList.add(CHECK);\n\t                this.addCheck(currLi);\n\t                ariaState = 'true';\n\t            }\n\t            else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {\n\t                ej2_base_6.removeClass([frameSpan], [CHECK, INDETERMINATE]);\n\t                this.removeCheck(currLi);\n\t                ariaState = 'false';\n\t            }\n\t            else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n\t                frameSpan.classList.remove(CHECK);\n\t                frameSpan.classList.add(INDETERMINATE);\n\t                this.removeCheck(currLi);\n\t                ariaState = 'mixed';\n\t            }\n\t            ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n\t            if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                wrapper.setAttribute('aria-checked', ariaState);\n\t            }\n\t            if (isAdd) {\n\t                var data = [].concat([], this.checkActionNodes);\n\t                eventArgs = this.getCheckEvent(currLi, state, e);\n\t                if (ej2_base_1.isUndefined(isPrevent)) {\n\t                    eventArgs.data = data;\n\t                }\n\t            }\n\t            if (!isPrevent) {\n\t                if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                    wrapper.setAttribute('aria-checked', ariaState);\n\t                    eventArgs.data[0].checked = ariaState;\n\t                    this.trigger('nodeChecked', eventArgs);\n\t                    this.checkActionNodes = [];\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.addCheck = function (liEle) {\n\t            var id = liEle.getAttribute('data-uid');\n\t            if (!ej2_base_7.isNullOrUndefined(id) && this.checkedNodes.indexOf(id) === -1) {\n\t                this.checkedNodes.push(id);\n\t            }\n\t        };\n\t        TreeView.prototype.removeCheck = function (liEle) {\n\t            var index = this.checkedNodes.indexOf(liEle.getAttribute('data-uid'));\n\t            if (index > -1) {\n\t                this.checkedNodes.splice(index, 1);\n\t            }\n\t        };\n\t        TreeView.prototype.getCheckEvent = function (currLi, action, e) {\n\t            this.checkActionNodes.push(this.getNodeData(currLi));\n\t            var nodeData = this.checkActionNodes;\n\t            return { action: action, cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, data: nodeData };\n\t        };\n\t        TreeView.prototype.finalize = function () {\n\t            var firstUl = ej2_base_6.select('.' + PARENTITEM, this.element);\n\t            firstUl.setAttribute('role', treeAriaAttr.treeRole);\n\t            this.setMultiSelect(this.allowMultiSelection);\n\t            var firstNode = ej2_base_6.select('.' + LISTITEM, this.element);\n\t            if (firstNode) {\n\t                ej2_base_6.addClass([firstNode], FOCUS);\n\t                this.updateIdAttr(null, firstNode);\n\t            }\n\t            this.doSelectionAction();\n\t            this.isLoaded = true;\n\t            this.isAnimate = false;\n\t            var eventArgs = { data: this.treeData };\n\t            this.trigger('dataBound', eventArgs);\n\t        };\n\t        TreeView.prototype.doSelectionAction = function () {\n\t            var sNodes = ej2_base_6.selectAll('.' + SELECTED, this.element);\n\t            var sUids = this.selectedNodes;\n\t            if (sUids.length > 0) {\n\t                this.setProperties({ selectedNodes: [] }, true);\n\t                for (var i = 0; i < sUids.length; i++) {\n\t                    var sNode = ej2_base_6.select('[data-uid=\"' + sUids[i] + '\"]', this.element);\n\t                    this.selectNode(sNode, null, true);\n\t                    if (!this.allowMultiSelection) {\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.selectGivenNodes(sNodes);\n\t            }\n\t            ej2_base_6.removeClass(sNodes, SELECTED);\n\t        };\n\t        TreeView.prototype.selectGivenNodes = function (sNodes) {\n\t            for (var i = 0; i < sNodes.length; i++) {\n\t                this.selectNode(sNodes[i], null, true);\n\t                if (!this.allowMultiSelection) {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            ej2_base_3.EventHandler.remove(this.element, 'contextmenu ', this.preventContextMenu);\n\t            if (!target || this.dragStartAction) {\n\t                return;\n\t            }\n\t            else {\n\t                var classList = target.classList;\n\t                var li = ej2_base_6.closest(target, '.' + LISTITEM);\n\t                if (!li) {\n\t                    return;\n\t                }\n\t                else {\n\t                    this.removeHover();\n\t                    this.setFocusElement(li);\n\t                    if (this.showCheckBox) {\n\t                        var checkWrapper = ej2_base_6.closest(target, '.' + CHECKBOXWRAP);\n\t                        if (!ej2_base_7.isNullOrUndefined(checkWrapper)) {\n\t                            var checkElement = ej2_base_6.select('.' + CHECKBOXFRAME, checkWrapper);\n\t                            this.validateCheckNode(checkWrapper, checkElement.classList.contains(CHECK), li, e);\n\t                            this.triggerClickEvent(e, li);\n\t                            return;\n\t                        }\n\t                    }\n\t                    if (classList.contains(EXPANDABLE)) {\n\t                        this.expandAction(li, target, e);\n\t                    }\n\t                    else if (classList.contains(COLLAPSIBLE)) {\n\t                        this.collapseNode(li, target, e);\n\t                    }\n\t                    else {\n\t                        if (!classList.contains(PARENTITEM) && !classList.contains(LISTITEM)) {\n\t                            var multiSelect = false;\n\t                            if (ej2_base_1.Browser.isDevice && this.allowMultiSelection) {\n\t                                var popup = ej2_base_6.select('.' + POPUP, this.element);\n\t                                if (!ej2_base_6.isVisible(popup)) {\n\t                                    popup.style.display = '';\n\t                                }\n\t                                var txtWrap = ej2_base_6.closest(target, '.' + TEXTWRAP);\n\t                                txtWrap = !txtWrap ? e.target : txtWrap;\n\t                                var pos = txtWrap.getBoundingClientRect();\n\t                                var posLeft = (e.clientX - pos.left) + txtWrap.offsetLeft - (popup.offsetWidth / 2);\n\t                                var posTop = txtWrap.offsetTop - popup.offsetHeight - 10;\n\t                                popup.style.left = (posLeft < 0 ? 0 : posLeft) + 'px';\n\t                                popup.style.top = (posTop < 0 ? 0 : posTop) + 'px';\n\t                                if (popup.classList.contains(POPUPSELECT)) {\n\t                                    multiSelect = true;\n\t                                }\n\t                            }\n\t                            this.toggleSelect(li, e, multiSelect);\n\t                        }\n\t                    }\n\t                    this.triggerClickEvent(e, li);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.nodeCheckingEvent = function (wrapper, isCheck, e) {\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            this.checkActionNodes = [];\n\t            var ariaState = !isCheck ? 'true' : 'false';\n\t            if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                wrapper.setAttribute('aria-checked', ariaState);\n\t            }\n\t            var eventArgs = this.getCheckEvent(currLi, !isCheck ? 'uncheck' : 'check', e);\n\t            this.trigger('nodeChecking', eventArgs);\n\t            return eventArgs;\n\t        };\n\t        TreeView.prototype.nodeCheckedEvent = function (wrapper, isCheck, e) {\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            var eventArgs = this.getCheckEvent(wrapper, isCheck ? 'uncheck' : 'check', e);\n\t            eventArgs.data = eventArgs.data.splice(0, eventArgs.data.length - 1);\n\t            this.trigger('nodeChecked', eventArgs);\n\t        };\n\t        TreeView.prototype.triggerClickEvent = function (e, li) {\n\t            var eventArgs = {\n\t                event: e,\n\t                node: li,\n\t            };\n\t            this.trigger('nodeClicked', eventArgs);\n\t        };\n\t        TreeView.prototype.expandNode = function (currLi, icon) {\n\t            var _this = this;\n\t            if (icon.classList.contains(LOAD)) {\n\t                this.hideSpinner(icon);\n\t            }\n\t            ej2_base_6.removeClass([icon], EXPANDABLE);\n\t            ej2_base_6.addClass([icon], COLLAPSIBLE);\n\t            var start = 0;\n\t            var end = 0;\n\t            var proxy = this;\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            var liEle = currLi;\n\t            this.setHeight(liEle, ul);\n\t            if (!this.isAnimate) {\n\t                this.aniObj.animate(ul, {\n\t                    name: this.animation.expand.effect,\n\t                    duration: this.animation.expand.duration,\n\t                    timingFunction: this.animation.expand.easing,\n\t                    begin: function (args) {\n\t                        liEle.style.overflow = 'hidden';\n\t                        start = liEle.offsetHeight;\n\t                        end = ej2_base_6.select('.' + TEXTWRAP, currLi).offsetHeight;\n\t                    },\n\t                    progress: function (args) {\n\t                        args.element.style.display = 'block';\n\t                        proxy.animateHeight(args, start, end);\n\t                    },\n\t                    end: function (args) {\n\t                        args.element.style.display = 'block';\n\t                        _this.expandedNode(liEle, ul, icon);\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                this.expandedNode(liEle, ul, icon);\n\t            }\n\t        };\n\t        TreeView.prototype.expandedNode = function (currLi, ul, icon) {\n\t            ul.style.display = 'block';\n\t            currLi.style.display = 'block';\n\t            currLi.style.overflow = '';\n\t            currLi.style.height = '';\n\t            ej2_base_6.removeClass([icon], PROCESS);\n\t            currLi.setAttribute('aria-expanded', 'true');\n\t            ej2_base_6.removeClass([currLi], NODECOLLAPSED);\n\t            if (this.isLoaded && this.expandArgs) {\n\t                this.trigger('nodeExpanded', this.expandArgs);\n\t            }\n\t        };\n\t        TreeView.prototype.collapseNode = function (currLi, icon, e) {\n\t            var _this = this;\n\t            if (icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], PROCESS);\n\t            }\n\t            var colArgs;\n\t            if (this.isLoaded) {\n\t                colArgs = this.getExpandEvent(currLi, e);\n\t                this.trigger('nodeCollapsing', colArgs);\n\t                if (colArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            ej2_base_6.removeClass([icon], COLLAPSIBLE);\n\t            ej2_base_6.addClass([icon], EXPANDABLE);\n\t            var start = 0;\n\t            var end = 0;\n\t            var proxy = this;\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            var liEle = currLi;\n\t            ej2_base_6.addClass([currLi], NODECOLLAPSED);\n\t            this.aniObj.animate(ul, {\n\t                name: this.animation.collapse.effect,\n\t                duration: this.animation.collapse.duration,\n\t                timingFunction: this.animation.collapse.easing,\n\t                begin: function (args) {\n\t                    liEle.style.overflow = 'hidden';\n\t                    start = ej2_base_6.select('.' + TEXTWRAP, currLi).offsetHeight;\n\t                    end = liEle.offsetHeight;\n\t                },\n\t                progress: function (args) {\n\t                    proxy.animateHeight(args, start, end);\n\t                },\n\t                end: function (args) {\n\t                    liEle.style.overflow = '';\n\t                    args.element.style.display = 'none';\n\t                    liEle.style.height = '';\n\t                    ej2_base_6.removeClass([icon], PROCESS);\n\t                    currLi.setAttribute('aria-expanded', 'false');\n\t                    if (_this.isLoaded) {\n\t                        _this.trigger('nodeCollapsed', colArgs);\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        TreeView.prototype.setHeight = function (currLi, ul) {\n\t            ul.style.display = 'block';\n\t            ul.style.visibility = 'hidden';\n\t            currLi.style.height = currLi.offsetHeight + 'px';\n\t            ul.style.display = 'none';\n\t            ul.style.visibility = '';\n\t        };\n\t        TreeView.prototype.animateHeight = function (args, start, end) {\n\t            var remaining = (args.duration - args.timeStamp) / args.duration;\n\t            var currentHeight = (end - start) * remaining + start;\n\t            args.element.parentElement.style.height = currentHeight + 'px';\n\t        };\n\t        TreeView.prototype.renderChildNodes = function (parentLi, expandChild) {\n\t            var _this = this;\n\t            var eicon = ej2_base_6.select('div.' + ICON, parentLi);\n\t            if (ej2_base_7.isNullOrUndefined(eicon)) {\n\t                return;\n\t            }\n\t            this.showSpinner(eicon);\n\t            var childItems;\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                var level = this.parents(parentLi, '.' + PARENTITEM).length;\n\t                var mapper_1 = this.getChildFields(this.fields, level, 1);\n\t                if (ej2_base_7.isNullOrUndefined(mapper_1) || ej2_base_7.isNullOrUndefined(mapper_1.dataSource)) {\n\t                    ej2_base_6.detach(eicon);\n\t                    parentLi.removeAttribute('aria-expanded');\n\t                    return;\n\t                }\n\t                this.treeList.push('false');\n\t                mapper_1.dataSource.executeQuery(this.getQuery(mapper_1, parentLi.getAttribute('data-uid'))).then(function (e) {\n\t                    _this.treeList.pop();\n\t                    childItems = e.result;\n\t                    _this.currentLoadData = childItems;\n\t                    if (ej2_base_7.isNullOrUndefined(childItems) || childItems.length === 0) {\n\t                        ej2_base_6.detach(eicon);\n\t                        parentLi.removeAttribute('aria-expanded');\n\t                    }\n\t                    else {\n\t                        var prop = _this.getActualProperties(mapper_1);\n\t                        _this.listBaseOption.fields = prop;\n\t                        _this.listBaseOption.fields.url = prop.navigateUrl;\n\t                        _this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n\t                        parentLi.appendChild(ej2_lists_1.ListBase.createList(childItems, _this.listBaseOption));\n\t                        _this.expandNode(parentLi, eicon);\n\t                        _this.ensureCheckNode(parentLi);\n\t                        _this.finalizeNode(parentLi);\n\t                        _this.renderSubChild(parentLi, expandChild);\n\t                    }\n\t                    if (_this.treeList.length === 0 && !_this.isLoaded) {\n\t                        _this.finalize();\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                childItems = this.getChildNodes(this.treeData, parentLi.getAttribute('data-uid'));\n\t                this.currentLoadData = childItems;\n\t                if (ej2_base_7.isNullOrUndefined(childItems) || childItems.length === 0) {\n\t                    ej2_base_6.detach(eicon);\n\t                    parentLi.removeAttribute('aria-expanded');\n\t                    return;\n\t                }\n\t                else {\n\t                    this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n\t                    parentLi.appendChild(ej2_lists_1.ListBase.createList(this.getSortedData(childItems), this.listBaseOption));\n\t                    this.expandNode(parentLi, eicon);\n\t                    this.ensureCheckNode(parentLi);\n\t                    this.finalizeNode(parentLi);\n\t                    this.renderSubChild(parentLi, expandChild);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.ensureCheckNode = function (element) {\n\t            if (this.showCheckBox) {\n\t                this.ensureChildCheckState(element);\n\t                this.ensureParentCheckState(element);\n\t            }\n\t            this.currentLoadData = null;\n\t        };\n\t        TreeView.prototype.getChildFields = function (mapper, nodeLevel, dataLevel) {\n\t            var childData;\n\t            if (nodeLevel === dataLevel) {\n\t                return this.getChildMapper(mapper);\n\t            }\n\t            else {\n\t                return this.getChildFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n\t            }\n\t        };\n\t        TreeView.prototype.getChildMapper = function (mapper) {\n\t            return (typeof mapper.child === 'string' || ej2_base_7.isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n\t        };\n\t        TreeView.prototype.getChildNodes = function (obj, parentId, isRoot) {\n\t            if (isRoot === void 0) { isRoot = false; }\n\t            var childNodes;\n\t            if (ej2_base_7.isNullOrUndefined(obj)) {\n\t                return childNodes;\n\t            }\n\t            else if (this.dataType === 1) {\n\t                return this.getChildGroup(this.groupedData, parentId, isRoot);\n\t            }\n\t            else {\n\t                if (typeof this.fields.child === 'string') {\n\t                    for (var i = 0, objlen = obj.length; i < objlen; i++) {\n\t                        if (obj[i][this.fields.id] && obj[i][this.fields.id].toString() === parentId) {\n\t                            return obj[i][this.fields.child];\n\t                        }\n\t                        else if (obj[i].hasOwnProperty(this.fields.child)) {\n\t                            childNodes = this.getChildNodes(obj[i][this.fields.child], parentId);\n\t                            if (childNodes !== undefined) {\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return childNodes;\n\t        };\n\t        TreeView.prototype.getChildGroup = function (data, parentId, isRoot) {\n\t            var childNodes;\n\t            if (ej2_base_7.isNullOrUndefined(data)) {\n\t                return childNodes;\n\t            }\n\t            for (var i = 0, objlen = data.length; i < objlen; i++) {\n\t                if (!ej2_base_7.isNullOrUndefined(data[i][0]) && !ej2_base_7.isNullOrUndefined(data[i][0][this.fields.parentID])) {\n\t                    if (data[i][0][this.fields.parentID].toString() === parentId) {\n\t                        return data[i];\n\t                    }\n\t                }\n\t                else if (isRoot) {\n\t                    return data[i];\n\t                }\n\t                else {\n\t                    return [];\n\t                }\n\t            }\n\t            return childNodes;\n\t        };\n\t        TreeView.prototype.renderSubChild = function (element, expandChild) {\n\t            if (expandChild) {\n\t                var cIcons = ej2_base_6.selectAll('.' + EXPANDABLE, element);\n\t                for (var i = 0, len = cIcons.length; i < len; i++) {\n\t                    var icon = cIcons[i];\n\t                    var curLi = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                    this.renderChildNodes(curLi, expandChild);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.toggleSelect = function (li, e, multiSelect) {\n\t            if (this.allowMultiSelection && ((e && e.ctrlKey) || multiSelect) && this.isActive(li)) {\n\t                this.unselectNode(li, e);\n\t            }\n\t            else {\n\t                this.selectNode(li, e, multiSelect);\n\t            }\n\t        };\n\t        TreeView.prototype.isActive = function (li) {\n\t            return li.classList.contains(ACTIVE) ? true : false;\n\t        };\n\t        TreeView.prototype.selectNode = function (li, e, multiSelect) {\n\t            if (ej2_base_7.isNullOrUndefined(li) || (!this.allowMultiSelection && this.isActive(li) && !ej2_base_7.isNullOrUndefined(e))) {\n\t                this.setFocusElement(li);\n\t                return;\n\t            }\n\t            var eventArgs;\n\t            if (this.isLoaded) {\n\t                eventArgs = this.getSelectEvent(li, 'select', e);\n\t                this.trigger('nodeSelecting', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            if (!this.allowMultiSelection || (!multiSelect && (!e || (e && !e.ctrlKey)))) {\n\t                this.removeSelectAll();\n\t            }\n\t            if (this.allowMultiSelection && e && e.shiftKey) {\n\t                if (!this.startNode) {\n\t                    this.startNode = li;\n\t                }\n\t                var startIndex = this.liList.indexOf(this.startNode);\n\t                var endIndex = this.liList.indexOf(li);\n\t                if (startIndex > endIndex) {\n\t                    var temp = startIndex;\n\t                    startIndex = endIndex;\n\t                    endIndex = temp;\n\t                }\n\t                for (var i = startIndex; i <= endIndex; i++) {\n\t                    var currNode = this.liList[i];\n\t                    if (ej2_base_6.isVisible(currNode)) {\n\t                        this.addSelect(currNode);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.startNode = li;\n\t                this.addSelect(li);\n\t            }\n\t            this.setFocusElement(li);\n\t            if (this.isLoaded) {\n\t                this.trigger('nodeSelected', eventArgs);\n\t            }\n\t        };\n\t        TreeView.prototype.unselectNode = function (li, e) {\n\t            var eventArgs;\n\t            if (this.isLoaded) {\n\t                eventArgs = this.getSelectEvent(li, 'un-select', e);\n\t                this.trigger('nodeSelecting', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            this.removeSelect(li);\n\t            this.setFocusElement(li);\n\t            if (this.isLoaded) {\n\t                this.trigger('nodeSelected', eventArgs);\n\t            }\n\t        };\n\t        TreeView.prototype.setFocusElement = function (li) {\n\t            if (!ej2_base_7.isNullOrUndefined(li)) {\n\t                var focusedNode = this.getFocusedNode();\n\t                if (focusedNode) {\n\t                    ej2_base_6.removeClass([focusedNode], FOCUS);\n\t                }\n\t                ej2_base_6.addClass([li], FOCUS);\n\t                this.updateIdAttr(focusedNode, li);\n\t            }\n\t        };\n\t        TreeView.prototype.addSelect = function (liEle) {\n\t            liEle.setAttribute('aria-selected', 'true');\n\t            ej2_base_6.addClass([liEle], ACTIVE);\n\t            var id = liEle.getAttribute('data-uid');\n\t            if (!ej2_base_7.isNullOrUndefined(id) && this.selectedNodes.indexOf(id) === -1) {\n\t                this.selectedNodes.push(id);\n\t            }\n\t        };\n\t        TreeView.prototype.removeSelect = function (liEle) {\n\t            if (this.allowMultiSelection) {\n\t                liEle.setAttribute('aria-selected', 'false');\n\t            }\n\t            else {\n\t                liEle.removeAttribute('aria-selected');\n\t            }\n\t            ej2_base_6.removeClass([liEle], ACTIVE);\n\t            var index = this.selectedNodes.indexOf(liEle.getAttribute('data-uid'));\n\t            if (index > -1) {\n\t                this.selectedNodes.splice(index, 1);\n\t            }\n\t        };\n\t        TreeView.prototype.removeSelectAll = function () {\n\t            var selectedLI = this.element.querySelectorAll('.' + ACTIVE);\n\t            for (var _i = 0, selectedLI_1 = selectedLI; _i < selectedLI_1.length; _i++) {\n\t                var ele = selectedLI_1[_i];\n\t                if (this.allowMultiSelection) {\n\t                    ele.setAttribute('aria-selected', 'false');\n\t                }\n\t                else {\n\t                    ele.removeAttribute('aria-selected');\n\t                }\n\t            }\n\t            ej2_base_6.removeClass(selectedLI, ACTIVE);\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t        };\n\t        TreeView.prototype.getSelectEvent = function (currLi, action, e) {\n\t            var nodeData = this.getNodeData(currLi);\n\t            return { action: action, cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, nodeData: nodeData };\n\t        };\n\t        TreeView.prototype.setExpandOnType = function () {\n\t            this.expandOnType = (this.expandOn === 'auto') ? (ej2_base_1.Browser.isDevice ? 'click' : 'dblclick') : this.expandOn;\n\t        };\n\t        TreeView.prototype.expandHandler = function (e) {\n\t            var target = e.target;\n\t            if (!target || (this.allowEditing && e.type === 'dblclick') || target.classList.contains(ROOT) ||\n\t                target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) ||\n\t                target.classList.contains(ICON) || this.showCheckBox && ej2_base_6.closest(target, '.' + CHECKBOXWRAP)) {\n\t                return;\n\t            }\n\t            else {\n\t                this.expandCollapseAction(ej2_base_6.closest(target, '.' + LISTITEM), e);\n\t            }\n\t        };\n\t        TreeView.prototype.expandCollapseAction = function (currLi, e) {\n\t            var icon = ej2_base_6.select('div.' + ICON, currLi);\n\t            if (!icon || icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                var classList = icon.classList;\n\t                if (classList.contains(EXPANDABLE)) {\n\t                    this.expandAction(currLi, icon, e);\n\t                }\n\t                else {\n\t                    this.collapseNode(currLi, icon, e);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.expandAction = function (currLi, icon, e, expandChild) {\n\t            if (icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], PROCESS);\n\t            }\n\t            if (this.isLoaded) {\n\t                this.expandArgs = this.getExpandEvent(currLi, e);\n\t                this.trigger('nodeExpanding', this.expandArgs);\n\t                if (this.expandArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            if (ul && ul.nodeName === 'UL') {\n\t                this.expandNode(currLi, icon);\n\t            }\n\t            else {\n\t                this.renderChildNodes(currLi, expandChild);\n\t            }\n\t        };\n\t        TreeView.prototype.keyActionHandler = function (e) {\n\t            var target = e.target;\n\t            var focusedNode = this.getFocusedNode();\n\t            if (target && target.classList.contains(INPUT)) {\n\t                var inpEle = target;\n\t                if (e.action === 'enter') {\n\t                    inpEle.blur();\n\t                    this.element.focus();\n\t                    ej2_base_6.addClass([focusedNode], HOVER);\n\t                }\n\t                else if (e.action === 'escape') {\n\t                    inpEle.value = this.oldText;\n\t                    inpEle.blur();\n\t                    this.element.focus();\n\t                    ej2_base_6.addClass([focusedNode], HOVER);\n\t                }\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            var eventArgs = {\n\t                cancel: false,\n\t                event: e,\n\t                node: focusedNode,\n\t            };\n\t            this.trigger('keyPress', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            switch (e.action) {\n\t                case 'space':\n\t                    if (this.showCheckBox) {\n\t                        this.checkNode(e);\n\t                    }\n\t                    break;\n\t                case 'moveRight':\n\t                    this.openNode(this.enableRtl ? false : true, e);\n\t                    break;\n\t                case 'moveLeft':\n\t                    this.openNode(this.enableRtl ? true : false, e);\n\t                    break;\n\t                case 'shiftDown':\n\t                    this.shiftKeySelect(true, e);\n\t                    break;\n\t                case 'moveDown':\n\t                case 'ctrlDown':\n\t                case 'csDown':\n\t                    this.navigateNode(true);\n\t                    break;\n\t                case 'shiftUp':\n\t                    this.shiftKeySelect(false, e);\n\t                    break;\n\t                case 'moveUp':\n\t                case 'ctrlUp':\n\t                case 'csUp':\n\t                    this.navigateNode(false);\n\t                    break;\n\t                case 'home':\n\t                case 'shiftHome':\n\t                case 'ctrlHome':\n\t                case 'csHome':\n\t                    this.navigateRootNode(true);\n\t                    break;\n\t                case 'end':\n\t                case 'shiftEnd':\n\t                case 'ctrlEnd':\n\t                case 'csEnd':\n\t                    this.navigateRootNode(false);\n\t                    break;\n\t                case 'enter':\n\t                case 'ctrlEnter':\n\t                case 'shiftEnter':\n\t                case 'csEnter':\n\t                    this.toggleSelect(focusedNode, e);\n\t                    break;\n\t                case 'f2':\n\t                    if (this.allowEditing) {\n\t                        this.createTextbox(focusedNode, e);\n\t                    }\n\t                    break;\n\t                case 'ctrlA':\n\t                    if (this.allowMultiSelection) {\n\t                        var sNodes = ej2_base_6.selectAll('.' + LISTITEM + ':not(.' + ACTIVE + ')', this.element);\n\t                        this.selectGivenNodes(sNodes);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        TreeView.prototype.navigateToFocus = function (isUp) {\n\t            var focusNode = this.getFocusedNode().querySelector('.' + TEXTWRAP);\n\t            var pos = focusNode.getBoundingClientRect();\n\t            var parent = this.getScrollParent(this.element);\n\t            if (!ej2_base_7.isNullOrUndefined(parent)) {\n\t                var parentPos = parent.getBoundingClientRect();\n\t                if (pos.bottom > parentPos.bottom) {\n\t                    parent.scrollTop += pos.bottom - parentPos.bottom;\n\t                }\n\t                else if (pos.top < parentPos.top) {\n\t                    parent.scrollTop -= parentPos.top - pos.top;\n\t                }\n\t            }\n\t            var isVisible = this.isVisibleInViewport(focusNode);\n\t            if (!isVisible) {\n\t                focusNode.scrollIntoView(isUp);\n\t            }\n\t        };\n\t        TreeView.prototype.isVisibleInViewport = function (txtWrap) {\n\t            var pos = txtWrap.getBoundingClientRect();\n\t            return (pos.top >= 0 && pos.left >= 0 && pos.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n\t                pos.right <= (window.innerWidth || document.documentElement.clientWidth));\n\t        };\n\t        TreeView.prototype.getScrollParent = function (node) {\n\t            if (ej2_base_7.isNullOrUndefined(node)) {\n\t                return null;\n\t            }\n\t            return (node.scrollHeight > node.clientHeight) ? node : this.getScrollParent(node.parentElement);\n\t        };\n\t        TreeView.prototype.shiftKeySelect = function (isTowards, e) {\n\t            if (this.allowMultiSelection) {\n\t                var focusedNode = this.getFocusedNode();\n\t                var nextNode = isTowards ? this.getNextNode(focusedNode) : this.getPrevNode(focusedNode);\n\t                this.removeHover();\n\t                this.setFocusElement(nextNode);\n\t                this.toggleSelect(nextNode, e, false);\n\t                this.navigateToFocus(!isTowards);\n\t            }\n\t            else {\n\t                this.navigateNode(isTowards);\n\t            }\n\t        };\n\t        TreeView.prototype.checkNode = function (e) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var checkWrap = ej2_base_6.select('.' + CHECKBOXWRAP, focusedNode);\n\t            var isChecked = ej2_base_6.select(' .' + CHECKBOXFRAME, checkWrap).classList.contains(CHECK);\n\t            this.validateCheckNode(checkWrap, isChecked, focusedNode, e);\n\t        };\n\t        TreeView.prototype.validateCheckNode = function (checkWrap, isCheck, li, e) {\n\t            var eventArgs = this.nodeCheckingEvent(checkWrap, isCheck, e);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true);\n\t            this.ensureChildCheckState(li);\n\t            this.ensureParentCheckState(ej2_base_6.closest(ej2_base_6.closest(li, '.' + PARENTITEM), '.' + LISTITEM));\n\t            this.nodeCheckedEvent(checkWrap, isCheck, e);\n\t        };\n\t        TreeView.prototype.openNode = function (toBeOpened, e) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var icon = ej2_base_6.select('div.' + ICON, focusedNode);\n\t            if (toBeOpened) {\n\t                if (!icon) {\n\t                    return;\n\t                }\n\t                else if (icon.classList.contains(EXPANDABLE)) {\n\t                    this.expandAction(focusedNode, icon, e);\n\t                }\n\t                else {\n\t                    this.focusNextNode(focusedNode, true);\n\t                }\n\t            }\n\t            else {\n\t                if (icon && icon.classList.contains(COLLAPSIBLE)) {\n\t                    this.collapseNode(focusedNode, icon, e);\n\t                }\n\t                else {\n\t                    var parentLi = ej2_base_6.closest(ej2_base_6.closest(focusedNode, '.' + PARENTITEM), '.' + LISTITEM);\n\t                    if (!parentLi) {\n\t                        return;\n\t                    }\n\t                    else {\n\t                        this.setFocus(focusedNode, parentLi);\n\t                        this.navigateToFocus(true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.navigateNode = function (isTowards) {\n\t            var focusedNode = this.getFocusedNode();\n\t            this.focusNextNode(focusedNode, isTowards);\n\t        };\n\t        TreeView.prototype.navigateRootNode = function (isBackwards) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var rootNode = isBackwards ? this.getRootNode() : this.getEndNode();\n\t            this.setFocus(focusedNode, rootNode);\n\t            this.navigateToFocus(isBackwards);\n\t        };\n\t        TreeView.prototype.getFocusedNode = function () {\n\t            var fNode = ej2_base_6.select('.' + LISTITEM + '.' + FOCUS, this.element);\n\t            return ej2_base_7.isNullOrUndefined(fNode) ? ej2_base_6.select('.' + LISTITEM, this.element) : fNode;\n\t        };\n\t        TreeView.prototype.focusNextNode = function (li, isTowards) {\n\t            var nextNode = isTowards ? this.getNextNode(li) : this.getPrevNode(li);\n\t            this.setFocus(li, nextNode);\n\t            this.navigateToFocus(!isTowards);\n\t        };\n\t        TreeView.prototype.getNextNode = function (li) {\n\t            var index = this.liList.indexOf(li);\n\t            var nextNode;\n\t            do {\n\t                index++;\n\t                nextNode = this.liList[index];\n\t                if (ej2_base_7.isNullOrUndefined(nextNode)) {\n\t                    return li;\n\t                }\n\t            } while (!ej2_base_6.isVisible(nextNode));\n\t            return nextNode;\n\t        };\n\t        TreeView.prototype.getPrevNode = function (li) {\n\t            var index = this.liList.indexOf(li);\n\t            var prevNode;\n\t            do {\n\t                index--;\n\t                prevNode = this.liList[index];\n\t                if (ej2_base_7.isNullOrUndefined(prevNode)) {\n\t                    return li;\n\t                }\n\t            } while (!ej2_base_6.isVisible(prevNode));\n\t            return prevNode;\n\t        };\n\t        TreeView.prototype.getRootNode = function () {\n\t            var index = 0;\n\t            var rootNode;\n\t            do {\n\t                rootNode = this.liList[index];\n\t                index++;\n\t            } while (!ej2_base_6.isVisible(rootNode));\n\t            return rootNode;\n\t        };\n\t        TreeView.prototype.getEndNode = function () {\n\t            var index = this.liList.length - 1;\n\t            var endNode;\n\t            do {\n\t                endNode = this.liList[index];\n\t                index--;\n\t            } while (!ej2_base_6.isVisible(endNode));\n\t            return endNode;\n\t        };\n\t        TreeView.prototype.setFocus = function (preNode, nextNode) {\n\t            ej2_base_6.removeClass([preNode], [HOVER, FOCUS]);\n\t            ej2_base_6.addClass([nextNode], [HOVER, FOCUS]);\n\t            this.updateIdAttr(preNode, nextNode);\n\t        };\n\t        TreeView.prototype.updateIdAttr = function (preNode, nextNode) {\n\t            this.element.removeAttribute('aria-activedescendant');\n\t            if (preNode) {\n\t                preNode.removeAttribute('id');\n\t            }\n\t            nextNode.setAttribute('id', 'node_active');\n\t            this.element.setAttribute('aria-activedescendant', 'node_active');\n\t        };\n\t        TreeView.prototype.focusIn = function () {\n\t            if (!this.mouseDownStatus) {\n\t                ej2_base_6.addClass([this.getFocusedNode()], HOVER);\n\t            }\n\t            this.mouseDownStatus = false;\n\t        };\n\t        TreeView.prototype.focusOut = function () {\n\t            ej2_base_6.removeClass([this.getFocusedNode()], HOVER);\n\t        };\n\t        TreeView.prototype.onMouseOver = function (e) {\n\t            var target = e.target;\n\t            var classList = target.classList;\n\t            var currentLi = ej2_base_6.closest(target, '.' + LISTITEM);\n\t            if (!currentLi || classList.contains(PARENTITEM) || classList.contains(LISTITEM)) {\n\t                this.removeHover();\n\t                return;\n\t            }\n\t            else {\n\t                this.setHover(currentLi);\n\t            }\n\t        };\n\t        TreeView.prototype.setHover = function (li) {\n\t            if (!li.classList.contains(HOVER)) {\n\t                this.removeHover();\n\t                ej2_base_6.addClass([li], HOVER);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.onMouseLeave = function (e) {\n\t            this.removeHover();\n\t        };\n\t        TreeView.prototype.removeHover = function () {\n\t            var hoveredNode = ej2_base_6.selectAll('.' + HOVER, this.element);\n\t            if (hoveredNode && hoveredNode.length) {\n\t                ej2_base_6.removeClass(hoveredNode, HOVER);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.getNodeData = function (currLi) {\n\t            if (!ej2_base_7.isNullOrUndefined(currLi) && currLi.classList.contains(LISTITEM)) {\n\t                var id = currLi.getAttribute('data-uid');\n\t                var text = ej2_base_6.select('.' + LISTTEXT, currLi).textContent;\n\t                var pNode = ej2_base_6.closest(currLi.parentNode, '.' + LISTITEM);\n\t                var pid = pNode ? pNode.getAttribute('data-uid') : null;\n\t                var selected = currLi.classList.contains(ACTIVE);\n\t                var expanded = (currLi.getAttribute('aria-expanded') === 'true') ? true : false;\n\t                var checked = null;\n\t                if (this.showCheckBox) {\n\t                    checked = ej2_base_6.select('.' + CHECKBOXWRAP, currLi).getAttribute('aria-checked');\n\t                }\n\t                return { id: id, text: text, parentID: pid, selected: selected, expanded: expanded, isChecked: checked };\n\t            }\n\t            return { id: '', text: '', parentID: '', selected: '', expanded: '', isChecked: '' };\n\t        };\n\t        TreeView.prototype.getExpandEvent = function (currLi, e) {\n\t            var nodeData = this.getNodeData(currLi);\n\t            return { cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, nodeData: nodeData };\n\t        };\n\t        TreeView.prototype.reRenderNodes = function () {\n\t            this.element.innerHTML = '';\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t            this.isLoaded = false;\n\t            this.setDataBinding();\n\t        };\n\t        TreeView.prototype.setCssClass = function (oldClass, newClass) {\n\t            if (!ej2_base_7.isNullOrUndefined(oldClass) && oldClass !== '') {\n\t                ej2_base_6.removeClass([this.element], oldClass.split(' '));\n\t            }\n\t            if (!ej2_base_7.isNullOrUndefined(newClass) && newClass !== '') {\n\t                ej2_base_6.addClass([this.element], newClass.split(' '));\n\t            }\n\t        };\n\t        TreeView.prototype.editingHandler = function (e) {\n\t            var target = e.target;\n\t            if (!target || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) ||\n\t                target.classList.contains(LISTITEM) || target.classList.contains(ICON) ||\n\t                target.classList.contains(INPUT) || target.classList.contains(INPUTGROUP)) {\n\t                return;\n\t            }\n\t            else {\n\t                e.stopImmediatePropagation();\n\t                var liEle = ej2_base_6.closest(target, '.' + LISTITEM);\n\t                this.createTextbox(liEle, e);\n\t            }\n\t        };\n\t        TreeView.prototype.createTextbox = function (liEle, e) {\n\t            var textEle = ej2_base_6.select('.' + LISTTEXT, liEle);\n\t            this.oldText = textEle.textContent;\n\t            var eventArgs = this.getEditEvent(liEle, null);\n\t            this.trigger('nodeEditing', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            var inpWidth = textEle.offsetWidth + 5;\n\t            var style = 'width:' + inpWidth + 'px';\n\t            var inpEle = ej2_base_6.createElement('input', { attrs: { value: this.oldText } });\n\t            ej2_base_6.addClass([liEle], EDITING);\n\t            textEle.childNodes[0].nodeValue = '';\n\t            textEle.appendChild(inpEle);\n\t            this.inputObj = ej2_inputs_1.Input.createInput({\n\t                element: inpEle,\n\t                properties: {\n\t                    enableRtl: this.enableRtl,\n\t                }\n\t            });\n\t            this.inputObj.container.setAttribute('style', style);\n\t            inpEle.focus();\n\t            var inputEle = inpEle;\n\t            inputEle.setSelectionRange(0, inputEle.value.length);\n\t            this.wireInputEvents(inpEle);\n\t        };\n\t        TreeView.prototype.inputFocusOut = function (e) {\n\t            var target = e.target;\n\t            var newText = target.value;\n\t            var txtEle = ej2_base_6.closest(target, '.' + LISTTEXT);\n\t            var liEle = ej2_base_6.closest(target, '.' + LISTITEM);\n\t            txtEle.childNodes[0].nodeValue = newText;\n\t            ej2_base_6.detach(this.inputObj.container);\n\t            ej2_base_6.removeClass([liEle], EDITING);\n\t            txtEle.focus();\n\t            this.trigger('nodeEdited', this.getEditEvent(liEle, newText));\n\t        };\n\t        TreeView.prototype.getElement = function (ele) {\n\t            if (ej2_base_7.isNullOrUndefined(ele)) {\n\t                return null;\n\t            }\n\t            else if (typeof ele === 'string') {\n\t                return this.element.querySelector('[data-uid=\"' + ele + '\"]');\n\t            }\n\t            else if (typeof ele === 'object') {\n\t                return ele;\n\t            }\n\t            else {\n\t                return null;\n\t            }\n\t        };\n\t        TreeView.prototype.getEditEvent = function (liEle, newText) {\n\t            var data = this.getNodeData(liEle);\n\t            return { cancel: false, newText: newText, node: liEle, nodeData: data, oldText: this.oldText };\n\t        };\n\t        TreeView.prototype.setDragAndDrop = function (toBind) {\n\t            if (toBind) {\n\t                this.initializeDrag();\n\t            }\n\t            else {\n\t                this.destroyDrag();\n\t            }\n\t        };\n\t        TreeView.prototype.initializeDrag = function () {\n\t            var _this = this;\n\t            var virtualEle;\n\t            this.dragObj = new ej2_base_5.Draggable(this.element, {\n\t                enableTailMode: true,\n\t                preventDefault: ej2_base_1.Browser.isIos ? true : false,\n\t                dragTarget: '.' + TEXTWRAP,\n\t                helper: function (e) {\n\t                    _this.dragTarget = e.sender.target;\n\t                    var dragRoot = ej2_base_6.closest(_this.dragTarget, '.' + ROOT);\n\t                    var dragWrap = ej2_base_6.closest(_this.dragTarget, '.' + TEXTWRAP);\n\t                    _this.dragLi = ej2_base_6.closest(_this.dragTarget, '.' + LISTITEM);\n\t                    if (_this.fullRowSelect && !dragWrap && _this.dragTarget.classList.contains(FULLROW)) {\n\t                        dragWrap = _this.dragTarget.nextElementSibling;\n\t                    }\n\t                    if (!_this.dragTarget || !e.element.isSameNode(dragRoot) || !dragWrap ||\n\t                        _this.dragTarget.classList.contains(ROOT) || _this.dragTarget.classList.contains(PARENTITEM) ||\n\t                        _this.dragTarget.classList.contains(LISTITEM)) {\n\t                        return false;\n\t                    }\n\t                    var cloneEle = (dragWrap.cloneNode(true));\n\t                    if (ej2_base_7.isNullOrUndefined(ej2_base_6.select('div.' + ICON, cloneEle))) {\n\t                        var icon = ej2_base_6.createElement('div', { className: ICON + ' ' + EXPANDABLE });\n\t                        cloneEle.insertBefore(icon, cloneEle.children[0]);\n\t                    }\n\t                    var cssClass = DRAGITEM + ' ' + ROOT + ' ' + (_this.enableRtl ? RTL : '');\n\t                    virtualEle = ej2_base_6.createElement('div', { className: cssClass });\n\t                    virtualEle.appendChild(cloneEle);\n\t                    var nLen = _this.selectedNodes.length;\n\t                    if (nLen > 1 && _this.allowMultiSelection && _this.dragLi.classList.contains(ACTIVE)) {\n\t                        var cNode = ej2_base_6.createElement('span', { className: DROPCOUNT, innerHTML: '' + nLen });\n\t                        virtualEle.appendChild(cNode);\n\t                    }\n\t                    document.body.appendChild(virtualEle);\n\t                    document.body.style.cursor = '';\n\t                    _this.dragData = _this.getNodeData(_this.dragLi);\n\t                    return virtualEle;\n\t                },\n\t                dragStart: function (e) {\n\t                    ej2_base_6.addClass([_this.element], DRAGGING);\n\t                    var eventArgs = _this.getDragEvent(e.event, _this, null, e.target);\n\t                    _this.trigger('nodeDragStart', eventArgs);\n\t                    if (eventArgs.cancel) {\n\t                        ej2_base_6.detach(virtualEle);\n\t                        ej2_base_6.removeClass([_this.element], DRAGGING);\n\t                    }\n\t                    _this.dragStartAction = true;\n\t                },\n\t                drag: function (e) {\n\t                    _this.dragObj.setProperties({ cursorAt: { top: (!ej2_base_7.isNullOrUndefined(e.event.targetTouches) || ej2_base_1.Browser.isDevice) ? 60 : -20 } });\n\t                    _this.dragAction(e, virtualEle);\n\t                },\n\t                dragStop: function (e) {\n\t                    ej2_base_6.removeClass([_this.element], DRAGGING);\n\t                    _this.removeVirtualEle();\n\t                    var dropTarget = e.target;\n\t                    var dropRoot = (ej2_base_6.closest(dropTarget, '.' + DROPPABLE));\n\t                    if (!dropTarget || !dropRoot || dropTarget.classList.contains(ROOT)) {\n\t                        ej2_base_6.detach(e.helper);\n\t                        document.body.style.cursor = '';\n\t                    }\n\t                    var eventArgs = _this.getDragEvent(e.event, _this, dropTarget, dropTarget);\n\t                    _this.trigger('nodeDragStop', eventArgs);\n\t                    if (eventArgs.cancel) {\n\t                        ej2_base_6.detach(e.helper);\n\t                        document.body.style.cursor = '';\n\t                    }\n\t                    _this.dragStartAction = false;\n\t                }\n\t            });\n\t            this.dropObj = new ej2_base_5.Droppable(this.element, {\n\t                out: function (e) {\n\t                    if (!ej2_base_7.isNullOrUndefined(e) && !e.target.classList.contains(SIBLING)) {\n\t                        document.body.style.cursor = 'not-allowed';\n\t                    }\n\t                },\n\t                over: function (e) {\n\t                    document.body.style.cursor = '';\n\t                },\n\t                drop: function (e) {\n\t                    _this.dropAction(e);\n\t                }\n\t            });\n\t        };\n\t        TreeView.prototype.dragAction = function (e, virtualEle) {\n\t            var dropRoot = ej2_base_6.closest(e.target, '.' + DROPPABLE);\n\t            var dropWrap = ej2_base_6.closest(e.target, '.' + TEXTWRAP);\n\t            var icon = ej2_base_6.select('div.' + ICON, virtualEle);\n\t            ej2_base_6.removeClass([icon], [DROPIN, DROPNEXT, DROPOUT, NODROP]);\n\t            this.removeVirtualEle();\n\t            document.body.style.cursor = '';\n\t            var classList = e.target.classList;\n\t            if (this.fullRowSelect && !dropWrap && !ej2_base_7.isNullOrUndefined(classList) && classList.contains(FULLROW)) {\n\t                dropWrap = e.target.nextElementSibling;\n\t            }\n\t            if (dropRoot) {\n\t                var dropLi = ej2_base_6.closest(e.target, '.' + LISTITEM);\n\t                if (!dropRoot.classList.contains(ROOT) || (dropWrap &&\n\t                    (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)))) {\n\t                    if (e && (e.event.offsetY < 7)) {\n\t                        ej2_base_6.addClass([icon], DROPNEXT);\n\t                        var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t                        var index = this.fullRowSelect ? (1) : (0);\n\t                        dropLi.insertBefore(virEle, dropLi.children[index]);\n\t                    }\n\t                    else if (e && (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10))) {\n\t                        ej2_base_6.addClass([icon], DROPNEXT);\n\t                        var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t                        var index = this.fullRowSelect ? (2) : (1);\n\t                        dropLi.insertBefore(virEle, dropLi.children[index]);\n\t                    }\n\t                    else {\n\t                        ej2_base_6.addClass([icon], DROPIN);\n\t                    }\n\t                }\n\t                else if (e.target.nodeName === 'LI' && (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi))) {\n\t                    ej2_base_6.addClass([icon], DROPNEXT);\n\t                    this.renderVirtualEle(e);\n\t                }\n\t                else if (e.target.classList.contains(SIBLING)) {\n\t                    ej2_base_6.addClass([icon], DROPNEXT);\n\t                }\n\t                else {\n\t                    ej2_base_6.addClass([icon], DROPOUT);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], NODROP);\n\t                document.body.style.cursor = 'not-allowed';\n\t            }\n\t            this.trigger('nodeDragging', this.getDragEvent(e.event, this, e.target, e.target));\n\t        };\n\t        TreeView.prototype.dropAction = function (e) {\n\t            var offsetY = e.event.offsetY;\n\t            var dropTarget = e.target;\n\t            var dragObj = e.dragData.draggable.ej2_instances[0];\n\t            var dragTarget = dragObj.dragTarget;\n\t            var dragLi = (ej2_base_6.closest(dragTarget, '.' + LISTITEM));\n\t            var dropLi = (ej2_base_6.closest(dropTarget, '.' + LISTITEM));\n\t            ej2_base_6.detach(e.droppedElement);\n\t            document.body.style.cursor = '';\n\t            if (!dropLi || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n\t                return;\n\t            }\n\t            if (dragObj.allowMultiSelection && (dragLi.classList.contains(ACTIVE) || (offsetY < 7 ||\n\t                (e.target.offsetHeight > 0 && offsetY > (e.target.offsetHeight - 10))))) {\n\t                var sNodes = ej2_base_6.selectAll('.' + ACTIVE, dragObj.element);\n\t                for (var i = 0; i < sNodes.length; i++) {\n\t                    if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {\n\t                        continue;\n\t                    }\n\t                    this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj, offsetY);\n\t                }\n\t            }\n\t            else {\n\t                this.appendNode(dropTarget, dragLi, dropLi, e, dragObj, offsetY);\n\t            }\n\t            this.trigger('nodeDropped', this.getDragEvent(e.event, dragObj, dropTarget, e.target));\n\t        };\n\t        TreeView.prototype.appendNode = function (dropTarget, dragLi, dropLi, e, dragObj, offsetY) {\n\t            if (dropTarget.nodeName === 'LI') {\n\t                this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n\t            }\n\t            else {\n\t                this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY);\n\t            }\n\t        };\n\t        TreeView.prototype.dropAsSiblingNode = function (dragLi, dropLi, e, dragObj) {\n\t            var dropUl = ej2_base_6.closest(dropLi, '.' + PARENTITEM);\n\t            var dragParentUl = ej2_base_6.closest(dragLi, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            var pre;\n\t            if (e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 2) {\n\t                pre = false;\n\t            }\n\t            else if (e.event.offsetY < 2) {\n\t                pre = true;\n\t            }\n\t            dropUl.insertBefore(dragLi, pre ? e.target : e.target.nextElementSibling);\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            this.updateAriaLevel(dragLi);\n\t            if (dragObj.element.id === this.element.id) {\n\t                this.updateList();\n\t            }\n\t            else {\n\t                dragObj.updateInstance();\n\t                this.updateInstance();\n\t            }\n\t        };\n\t        TreeView.prototype.dropAsChildNode = function (dragLi, dropLi, dragObj, index, e, pos) {\n\t            var dragParentUl = ej2_base_6.closest(dragLi, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            var dropParentUl = ej2_base_6.closest(dropLi, '.' + PARENTITEM);\n\t            if (e && (pos < 7)) {\n\t                dropParentUl.insertBefore(dragLi, dropLi);\n\t            }\n\t            else if (e && (e.target.offsetHeight > 0 && pos > (e.target.offsetHeight - 10))) {\n\t                dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);\n\t            }\n\t            else {\n\t                var dropUl = this.expandParent(dropLi);\n\t                dropUl.insertBefore(dragLi, dropUl.childNodes[index]);\n\t            }\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            this.updateAriaLevel(dragLi);\n\t            if (dragObj.element.id === this.element.id) {\n\t                this.updateList();\n\t            }\n\t            else {\n\t                dragObj.updateInstance();\n\t                this.updateInstance();\n\t            }\n\t        };\n\t        TreeView.prototype.expandParent = function (dropLi) {\n\t            var dropIcon = ej2_base_6.select('div.' + ICON, dropLi);\n\t            if (dropIcon && dropIcon.classList.contains(EXPANDABLE)) {\n\t                this.expandAction(dropLi, dropIcon, null);\n\t            }\n\t            var dropUl = ej2_base_6.select('.' + PARENTITEM, dropLi);\n\t            if (ej2_base_7.isNullOrUndefined(dropUl)) {\n\t                ej2_lists_1.ListBase.generateIcon(dropLi, COLLAPSIBLE, this.listBaseOption);\n\t                var icon = ej2_base_6.select('div.' + ICON, dropLi);\n\t                ej2_base_6.removeClass([icon], EXPANDABLE);\n\t                dropUl = ej2_lists_1.ListBase.generateUL([], null, this.listBaseOption);\n\t                dropLi.appendChild(dropUl);\n\t                dropLi.setAttribute('aria-expanded', 'true');\n\t                ej2_base_6.removeClass([dropLi], NODECOLLAPSED);\n\t            }\n\t            return dropUl;\n\t        };\n\t        TreeView.prototype.updateElement = function (dragParentUl, dragParentLi) {\n\t            if (dragParentLi && dragParentUl.childElementCount === 0) {\n\t                var dragIcon = ej2_base_6.select('div.' + ICON, dragParentLi);\n\t                ej2_base_6.detach(dragParentUl);\n\t                ej2_base_6.detach(dragIcon);\n\t                dragParentLi.removeAttribute('aria-expanded');\n\t            }\n\t        };\n\t        TreeView.prototype.updateAriaLevel = function (dragLi) {\n\t            var level = this.parents(dragLi, '.' + PARENTITEM).length;\n\t            dragLi.setAttribute('aria-level', '' + level);\n\t            this.updateChildAriaLevel(ej2_base_6.select('.' + PARENTITEM, dragLi), level + 1);\n\t        };\n\t        TreeView.prototype.updateChildAriaLevel = function (element, level) {\n\t            if (!ej2_base_7.isNullOrUndefined(element)) {\n\t                var cNodes = element.childNodes;\n\t                for (var i = 0, len = cNodes.length; i < len; i++) {\n\t                    var liEle = cNodes[i];\n\t                    liEle.setAttribute('aria-level', '' + level);\n\t                    this.updateChildAriaLevel(ej2_base_6.select('.' + PARENTITEM, liEle), level + 1);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.renderVirtualEle = function (e) {\n\t            var pre;\n\t            if (e.event.offsetY > e.target.offsetHeight - 2) {\n\t                pre = false;\n\t            }\n\t            else if (e.event.offsetY < 2) {\n\t                pre = true;\n\t            }\n\t            var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t            var index = this.fullRowSelect ? (pre ? 1 : 2) : (pre ? 0 : 1);\n\t            e.target.insertBefore(virEle, e.target.children[index]);\n\t        };\n\t        TreeView.prototype.removeVirtualEle = function () {\n\t            var sibEle = ej2_base_6.select('.' + SIBLING);\n\t            if (sibEle) {\n\t                ej2_base_6.detach(sibEle);\n\t            }\n\t        };\n\t        TreeView.prototype.destroyDrag = function () {\n\t            if (this.dragObj && this.dropObj) {\n\t                this.dragObj.destroy();\n\t                this.dropObj.destroy();\n\t            }\n\t        };\n\t        TreeView.prototype.getDragEvent = function (event, obj, dropTarget, target) {\n\t            var dropLi = dropTarget ? ej2_base_6.closest(dropTarget, '.' + LISTITEM) : null;\n\t            var dropData = dropLi ? this.getNodeData(dropLi) : null;\n\t            return {\n\t                cancel: false,\n\t                event: event,\n\t                draggedNode: obj.dragLi,\n\t                draggedNodeData: obj.dragData,\n\t                droppedNode: dropLi,\n\t                droppedNodeData: dropData,\n\t                target: target\n\t            };\n\t        };\n\t        TreeView.prototype.addFullRow = function (toAdd) {\n\t            var len = this.liList.length;\n\t            if (toAdd) {\n\t                for (var i = 0; i < len; i++) {\n\t                    this.createFullRow(this.liList[i]);\n\t                }\n\t            }\n\t            else {\n\t                for (var i = 0; i < len; i++) {\n\t                    var rowDiv = ej2_base_6.select('.' + FULLROW, this.liList[i]);\n\t                    ej2_base_6.detach(rowDiv);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.createFullRow = function (item) {\n\t            var rowDiv = ej2_base_6.createElement('div', { className: FULLROW });\n\t            item.insertBefore(rowDiv, item.childNodes[0]);\n\t        };\n\t        TreeView.prototype.addMultiSelect = function (toAdd) {\n\t            if (toAdd) {\n\t                var liEles = ej2_base_6.selectAll('.' + LISTITEM + ':not([aria-selected=\"true\"])', this.element);\n\t                for (var _i = 0, liEles_1 = liEles; _i < liEles_1.length; _i++) {\n\t                    var ele = liEles_1[_i];\n\t                    ele.setAttribute('aria-selected', 'false');\n\t                }\n\t            }\n\t            else {\n\t                var liEles = ej2_base_6.selectAll('.' + LISTITEM + '[aria-selected=\"false\"]', this.element);\n\t                for (var _a = 0, liEles_2 = liEles; _a < liEles_2.length; _a++) {\n\t                    var ele = liEles_2[_a];\n\t                    ele.removeAttribute('aria-selected');\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.collapseByLevel = function (element, level, excludeHiddenNodes) {\n\t            if (level > 0 && !ej2_base_7.isNullOrUndefined(element)) {\n\t                var cNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n\t                for (var i = 0, len = cNodes.length; i < len; i++) {\n\t                    var liEle = cNodes[i];\n\t                    var icon = ej2_base_6.select('.' + COLLAPSIBLE, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                    if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                        this.collapseNode(liEle, icon, null);\n\t                    }\n\t                    this.collapseByLevel(ej2_base_6.select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.collapseAllNodes = function (excludeHiddenNodes) {\n\t            var cIcons = this.getVisibleNodes(excludeHiddenNodes, ej2_base_6.selectAll('.' + COLLAPSIBLE, this.element));\n\t            for (var i = 0, len = cIcons.length; i < len; i++) {\n\t                var icon = cIcons[i];\n\t                var liEle = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                this.collapseNode(liEle, icon, null);\n\t            }\n\t        };\n\t        TreeView.prototype.expandByLevel = function (element, level, excludeHiddenNodes) {\n\t            if (level > 0 && !ej2_base_7.isNullOrUndefined(element)) {\n\t                var eNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n\t                for (var i = 0, len = eNodes.length; i < len; i++) {\n\t                    var liEle = eNodes[i];\n\t                    var icon = ej2_base_6.select('.' + EXPANDABLE, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                    if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                        this.expandAction(liEle, icon, null);\n\t                    }\n\t                    this.expandByLevel(ej2_base_6.select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.expandAllNodes = function (excludeHiddenNodes) {\n\t            var eIcons = this.getVisibleNodes(excludeHiddenNodes, ej2_base_6.selectAll('.' + EXPANDABLE, this.element));\n\t            for (var i = 0, len = eIcons.length; i < len; i++) {\n\t                var icon = eIcons[i];\n\t                var liEle = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                this.expandAction(liEle, icon, null, true);\n\t            }\n\t        };\n\t        TreeView.prototype.getVisibleNodes = function (excludeHiddenNodes, nodes) {\n\t            var vNodes = Array.prototype.slice.call(nodes);\n\t            if (excludeHiddenNodes) {\n\t                for (var i = 0; i < vNodes.length; i++) {\n\t                    if (!ej2_base_6.isVisible(vNodes[i])) {\n\t                        vNodes.splice(i, 1);\n\t                        i--;\n\t                    }\n\t                }\n\t            }\n\t            return vNodes;\n\t        };\n\t        TreeView.prototype.removeNode = function (node) {\n\t            var dragParentUl = ej2_base_6.closest(node, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            ej2_base_6.detach(node);\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            this.updateInstance();\n\t        };\n\t        TreeView.prototype.updateInstance = function () {\n\t            this.updateList();\n\t            this.updateSelectedNodes();\n\t        };\n\t        TreeView.prototype.updateList = function () {\n\t            this.liList = Array.prototype.slice.call(ej2_base_6.selectAll('.' + LISTITEM, this.element));\n\t        };\n\t        TreeView.prototype.updateSelectedNodes = function () {\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t            var sNodes = ej2_base_6.selectAll('.' + ACTIVE, this.element);\n\t            this.selectGivenNodes(sNodes);\n\t        };\n\t        TreeView.prototype.doGivenAction = function (nodes, selector, toExpand) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                var icon = ej2_base_6.select('.' + selector, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                    toExpand ? this.expandAction(liEle, icon, null) : this.collapseNode(liEle, icon, null);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.addGivenNodes = function (nodes, dropLi, index, isRemote) {\n\t            var level = dropLi ? parseFloat(dropLi.getAttribute('aria-level')) + 1 : 1;\n\t            if (isRemote) {\n\t                this.updateMapper(level);\n\t            }\n\t            var li = ej2_lists_1.ListBase.createListItemFromJson(nodes, this.listBaseOption, level);\n\t            var dropUl = dropLi ? this.expandParent(dropLi) : ej2_base_6.select('.' + PARENTITEM, this.element);\n\t            var refNode = dropUl.childNodes[index];\n\t            for (var i = 0; i < li.length; i++) {\n\t                dropUl.insertBefore(li[i], refNode);\n\t            }\n\t            this.finalizeNode(dropUl);\n\t        };\n\t        TreeView.prototype.updateMapper = function (level) {\n\t            var mapper = (level === 1) ? this.fields : this.getChildFields(this.fields, level - 1, 1);\n\t            var prop = this.getActualProperties(mapper);\n\t            this.listBaseOption.fields = prop;\n\t            this.listBaseOption.fields.url = prop.navigateUrl;\n\t        };\n\t        TreeView.prototype.doDisableAction = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                liEle.setAttribute('aria-disabled', 'true');\n\t                ej2_base_6.addClass([liEle], DISABLE);\n\t            }\n\t        };\n\t        TreeView.prototype.doEnableAction = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                liEle.removeAttribute('aria-disabled');\n\t                ej2_base_6.removeClass([liEle], DISABLE);\n\t            }\n\t        };\n\t        TreeView.prototype.wireInputEvents = function (inpEle) {\n\t            ej2_base_3.EventHandler.add(inpEle, 'blur', this.inputFocusOut, this);\n\t        };\n\t        TreeView.prototype.wireEditingEvents = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_1 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    this.touchEditObj = new ej2_base_7.Touch(this.element, {\n\t                        doubleTap: function (e) {\n\t                            e.originalEvent.preventDefault();\n\t                            proxy_1.editingHandler(e.originalEvent);\n\t                        }\n\t                    });\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, 'dblclick', this.editingHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchEditObj) {\n\t                    this.touchEditObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, 'dblclick', this.editingHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.wireClickEvent = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_2 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    this.touchClickObj = new ej2_base_7.Touch(this.element, {\n\t                        tap: function (e) {\n\t                            proxy_2.clickHandler(e.originalEvent);\n\t                        }\n\t                    });\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchClickObj) {\n\t                    this.touchClickObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.wireExpandOnEvent = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_3 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    if (this.expandOnType === 'click') {\n\t                        this.touchExpandObj = new ej2_base_7.Touch(this.element, {\n\t                            tap: function (e) {\n\t                                proxy_3.expandHandler(e.originalEvent);\n\t                            }\n\t                        });\n\t                    }\n\t                    else {\n\t                        this.touchExpandObj = new ej2_base_7.Touch(this.element, {\n\t                            doubleTap: function (e) {\n\t                                proxy_3.expandHandler(e.originalEvent);\n\t                            }\n\t                        });\n\t                    }\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, this.expandOnType, this.expandHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchExpandObj) {\n\t                    this.touchExpandObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, this.expandOnType, this.expandHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.mouseDownHandler = function (e) {\n\t            this.mouseDownStatus = true;\n\t            if (e.ctrlKey && this.allowMultiSelection) {\n\t                ej2_base_3.EventHandler.add(this.element, 'contextmenu ', this.preventContextMenu, this);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.preventContextMenu = function (e) {\n\t            e.preventDefault();\n\t        };\n\t        TreeView.prototype.wireEvents = function () {\n\t            ej2_base_3.EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);\n\t            this.wireClickEvent(true);\n\t            this.wireExpandOnEvent(true);\n\t            ej2_base_3.EventHandler.add(this.element, 'focus', this.focusIn, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'blur', this.focusOut, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'mouseover', this.onMouseOver, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'mouseout', this.onMouseLeave, this);\n\t            this.keyboardModule = new ej2_base_3.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown',\n\t            });\n\t        };\n\t        TreeView.prototype.unWireEvents = function () {\n\t            ej2_base_3.EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);\n\t            this.wireClickEvent(false);\n\t            this.wireExpandOnEvent(false);\n\t            ej2_base_3.EventHandler.remove(this.element, 'focus', this.focusIn);\n\t            ej2_base_3.EventHandler.remove(this.element, 'blur', this.focusOut);\n\t            ej2_base_3.EventHandler.remove(this.element, 'mouseover', this.onMouseOver);\n\t            ej2_base_3.EventHandler.remove(this.element, 'mouseout', this.onMouseLeave);\n\t            this.keyboardModule.destroy();\n\t        };\n\t        TreeView.prototype.parents = function (element, selector) {\n\t            var matched = [];\n\t            var el = element.parentNode;\n\t            while (!ej2_base_7.isNullOrUndefined(el)) {\n\t                if (ej2_base_6.matches(el, selector)) {\n\t                    matched.push(el);\n\t                }\n\t                el = el.parentNode;\n\t            }\n\t            return matched;\n\t        };\n\t        TreeView.prototype.isDescendant = function (parent, child) {\n\t            var node = child.parentNode;\n\t            while (!ej2_base_7.isNullOrUndefined(node)) {\n\t                if (node === parent) {\n\t                    return true;\n\t                }\n\t                node = node.parentNode;\n\t            }\n\t            return false;\n\t        };\n\t        TreeView.prototype.showSpinner = function (element) {\n\t            ej2_base_6.addClass([element], LOAD);\n\t            ej2_popups_1.createSpinner({\n\t                target: element,\n\t                width: SPINNER_SIZE\n\t            });\n\t            ej2_popups_1.showSpinner(element);\n\t        };\n\t        TreeView.prototype.hideSpinner = function (element) {\n\t            ej2_popups_1.hideSpinner(element);\n\t            element.innerHTML = '';\n\t            ej2_base_6.removeClass([element], LOAD);\n\t        };\n\t        TreeView.prototype.setCheckedNodes = function (nodes) {\n\t            nodes = JSON.parse(JSON.stringify(nodes));\n\t            this.uncheckAll();\n\t            if (nodes.length > 0) {\n\t                this.checkAll(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowDragAndDrop':\n\t                        this.setDragAndDrop(this.allowDragAndDrop);\n\t                        break;\n\t                    case 'allowEditing':\n\t                        this.wireEditingEvents(this.allowEditing);\n\t                        break;\n\t                    case 'allowMultiSelection':\n\t                        if (this.selectedNodes.length > 1) {\n\t                            var sNode = this.getElement(this.selectedNodes[0]);\n\t                            this.isLoaded = false;\n\t                            this.removeSelectAll();\n\t                            this.selectNode(sNode, null);\n\t                            this.isLoaded = true;\n\t                        }\n\t                        this.setTouchPopup(this.allowMultiSelection);\n\t                        this.setMultiSelect(this.allowMultiSelection);\n\t                        this.addMultiSelect(this.allowMultiSelection);\n\t                        break;\n\t                    case 'checkedNodes':\n\t                        if (this.showCheckBox) {\n\t                            this.checkedNodes = oldProp.checkedNodes;\n\t                            this.setCheckedNodes(newProp.checkedNodes);\n\t                        }\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCssClass(oldProp.cssClass, newProp.cssClass);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setEnableRtl();\n\t                        break;\n\t                    case 'expandOn':\n\t                        this.wireExpandOnEvent(false);\n\t                        this.setExpandOnType();\n\t                        this.wireExpandOnEvent(true);\n\t                        break;\n\t                    case 'fields':\n\t                        this.listBaseOption.fields = this.fields.properties;\n\t                        this.listBaseOption.fields.url = this.fields.navigateUrl;\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'fullRowSelect':\n\t                        this.setFullRow(this.fullRowSelect);\n\t                        this.addFullRow(this.fullRowSelect);\n\t                        break;\n\t                    case 'nodeTemplate':\n\t                        this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'selectedNodes':\n\t                        this.removeSelectAll();\n\t                        this.setProperties({ selectedNodes: newProp.selectedNodes }, true);\n\t                        this.doSelectionAction();\n\t                        break;\n\t                    case 'showCheckBox':\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'sortOrder':\n\t                        this.reRenderNodes();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.destroy = function () {\n\t            this.element.removeAttribute('aria-activedescendant');\n\t            this.element.removeAttribute('tabindex');\n\t            this.unWireEvents();\n\t            this.wireEditingEvents(false);\n\t            this.rippleFn();\n\t            this.rippleIconFn();\n\t            this.setCssClass(this.cssClass, null);\n\t            this.setDragAndDrop(false);\n\t            this.setFullRow(false);\n\t            this.setTouchPopup(false);\n\t            this.element.innerHTML = '';\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        TreeView.prototype.addNodes = function (nodes, target, index) {\n\t            if (ej2_base_7.isNullOrUndefined(nodes)) {\n\t                return;\n\t            }\n\t            var dropLi = this.getElement(target);\n\t            nodes = this.getSortedData(nodes);\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                this.addGivenNodes(nodes, dropLi, index, true);\n\t            }\n\t            else if (this.dataType === 2) {\n\t                this.addGivenNodes(nodes, dropLi, index);\n\t            }\n\t            else {\n\t                if (dropLi) {\n\t                    this.addGivenNodes(nodes, dropLi, index);\n\t                }\n\t                else {\n\t                    for (var i = 0; i < nodes.length; i++) {\n\t                        var pid = nodes[i][this.fields.parentID];\n\t                        dropLi = pid ? this.getElement(pid.toString()) : pid;\n\t                        this.addGivenNodes([nodes[i]], dropLi, index);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.checkAll = function (nodes) {\n\t            if (this.showCheckBox) {\n\t                this.doCheckBoxAction(nodes, true);\n\t            }\n\t        };\n\t        TreeView.prototype.collapseAll = function (nodes, level, excludeHiddenNodes) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doGivenAction(nodes, COLLAPSIBLE, false);\n\t            }\n\t            else {\n\t                if (level > 0) {\n\t                    this.collapseByLevel(ej2_base_6.select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n\t                }\n\t                else {\n\t                    this.collapseAllNodes(excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.disableNodes = function (nodes) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doDisableAction(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.enableNodes = function (nodes) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doEnableAction(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.ensureVisible = function (node) {\n\t            var liEle = this.getElement(node);\n\t            if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                return;\n\t            }\n\t            var parents = this.parents(liEle, '.' + LISTITEM);\n\t            this.expandAll(parents);\n\t            setTimeout(function () { liEle.scrollIntoView(true); }, 450);\n\t        };\n\t        TreeView.prototype.expandAll = function (nodes, level, excludeHiddenNodes) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doGivenAction(nodes, EXPANDABLE, true);\n\t            }\n\t            else {\n\t                if (level > 0) {\n\t                    this.expandByLevel(ej2_base_6.select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n\t                }\n\t                else {\n\t                    this.expandAllNodes(excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.getNode = function (node) {\n\t            return this.getElement(node);\n\t        };\n\t        TreeView.prototype.getNodeDetails = function (node) {\n\t            var ele = this.getElement(node);\n\t            return this.getNodeData(ele);\n\t        };\n\t        TreeView.prototype.moveNodes = function (sourceNodes, target, index) {\n\t            var dropLi = this.getElement(target);\n\t            if (ej2_base_7.isNullOrUndefined(dropLi)) {\n\t                return;\n\t            }\n\t            for (var i = 0; i < sourceNodes.length; i++) {\n\t                var dragLi = this.getElement(sourceNodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(dragLi) || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n\t                    continue;\n\t                }\n\t                this.dropAsChildNode(dragLi, dropLi, this, index);\n\t            }\n\t        };\n\t        TreeView.prototype.removeNodes = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                this.removeNode(liEle);\n\t            }\n\t        };\n\t        TreeView.prototype.replaceText = function (target, newText) {\n\t            if (ej2_base_7.isNullOrUndefined(target) || ej2_base_7.isNullOrUndefined(newText) || !this.allowEditing) {\n\t                return;\n\t            }\n\t            var liEle = this.getElement(target);\n\t            if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                return;\n\t            }\n\t            var txtEle = ej2_base_6.select('.' + LISTTEXT, liEle);\n\t            txtEle.childNodes[0].nodeValue = newText;\n\t        };\n\t        TreeView.prototype.uncheckAll = function (nodes) {\n\t            if (this.showCheckBox) {\n\t                this.doCheckBoxAction(nodes, false);\n\t            }\n\t        };\n\t        return TreeView;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowMultiSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({}, NodeAnimationSettings)\n\t    ], TreeView.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"checkedNodes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('')\n\t    ], TreeView.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"enablePersistence\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('auto')\n\t    ], TreeView.prototype, \"expandOn\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({}, FieldsSettings)\n\t    ], TreeView.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(true)\n\t    ], TreeView.prototype, \"fullRowSelect\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"nodeTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"selectedNodes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('None')\n\t    ], TreeView.prototype, \"sortOrder\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"showCheckBox\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"drawNode\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"keyPress\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeChecked\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeChecking\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeClicked\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeCollapsed\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeCollapsing\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragging\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragStop\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDropped\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeEdited\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeExpanded\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeExpanding\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeSelecting\", void 0);\n\t    TreeView = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], TreeView);\n\t    exports.TreeView = TreeView;\n\t    exports.treeViewHelper = ej2_base_1.CreateBuilder(TreeView);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_17__;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA5ZTNmODYwNTg1M2VmODliNDg1NCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2gtc2Nyb2xsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xiYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xiYXIvdG9vbGJhci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3JkaW9uL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9hY2NvcmRpb24vYWNjb3JkaW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb250ZXh0LW1lbnUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRleHQtbWVudS9jb250ZXh0LW1lbnUuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWxpc3RzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RhYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGFiL3RhYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdHJlZXZpZXcvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyZWV2aWV3L3RyZWV2aWV3LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiIl0sIm5h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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFrQyxpQ0FBaUM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBa0MsaUNBQWlDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBcUMsbUNBQW1DO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXNFLG9CQUFvQjtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQW9DLG9CQUFvQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0Esb0NBQW1DLG9CQUFvQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxnQkFBZ0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0EscUVBQW9FLDhDQUE4QztBQUNsSDtBQUNBO0FBQ0EscUVBQW9FLGdEQUFnRDtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RkFBc0Ysc0NBQXNDO0FBQzVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNybENEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBLEVBQUM7Ozs7Ozs7QUNQRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsNkJBQTRCLHFEQUFxRDtBQUNqRjtBQUNBO0FBQ0EsNkJBQTRCLHVEQUF1RDtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBLHNEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0Msb0JBQW9CO0FBQ3hEO0FBQ0E7QUFDQSxxQ0FBb0MsbUJBQW1CO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBNkQseUNBQXlDLEdBQUc7QUFDekcsZ0VBQStELDZCQUE2QixpQkFBaUIsRUFBRTtBQUMvRyw4REFBNkQsa0JBQWtCO0FBQy9FO0FBQ0EsOEVBQTZFLHNCQUFzQjtBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW1DLGNBQWM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RCxnQkFBZ0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE0QyxTQUFTO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGVBQWU7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0IsbUJBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsbUJBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUErRCxvQkFBb0IsRUFBRTtBQUNyRjtBQUNBLGtCQUFpQjtBQUNqQixxQ0FBb0Msd0JBQXdCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsMkJBQTJCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW1ELFNBQVM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsMkJBQTJCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0Msb0JBQW9CO0FBQ3hELGdDQUErQixrQkFBa0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsbUJBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MsZ0JBQWdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RCxZQUFZO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWlELFlBQVk7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRCxTQUFTO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBd0MsZUFBZTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsMEJBQTBCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQyxvQkFBb0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsZ0JBQWdCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLHVDQUF1QztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsa0JBQWtCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyw0QkFBNEIsRUFBRTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQStDLFNBQVM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztBQ244RUQsaUQ7Ozs7OztBQ0FBLGlEIiwiZmlsZSI6ImVqMi1uYXZpZ2F0aW9ucy51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1saXN0c1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1saXN0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbGlzdHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIikpIDogZmFjdG9yeShyb290W1wiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItbGlzdHNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE3X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMThfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA5ZTNmODYwNTg1M2VmODliNDg1NCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vY29tbW9uL2luZGV4XCIsIFwiLi90b29sYmFyL2luZGV4XCIsIFwiLi9hY2NvcmRpb24vaW5kZXhcIiwgXCIuL2NvbnRleHQtbWVudS9pbmRleFwiLCBcIi4vdGFiL2luZGV4XCIsIFwiLi90cmVldmlldy9pbmRleFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGluZGV4XzEsIGluZGV4XzIsIGluZGV4XzMsIGluZGV4XzQsIGluZGV4XzUsIGluZGV4XzYpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGluZGV4XzEpO1xuICAgIF9fZXhwb3J0KGluZGV4XzIpO1xuICAgIF9fZXhwb3J0KGluZGV4XzMpO1xuICAgIF9fZXhwb3J0KGluZGV4XzQpO1xuICAgIF9fZXhwb3J0KGluZGV4XzUpO1xuICAgIF9fZXhwb3J0KGluZGV4XzYpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2gtc2Nyb2xsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaF9zY3JvbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoaF9zY3JvbGxfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDTFNfUk9PVCA9ICdlLWhzY3JvbGwnO1xuICAgIHZhciBDTFNfUlRMID0gJ2UtcnRsJztcbiAgICB2YXIgQ0xTX0RJU0FCTEUgPSAnZS1vdmVybGF5JztcbiAgICB2YXIgQ0xTX0hTQ1JPTExCQVIgPSAnZS1oc2Nyb2xsLWJhcic7XG4gICAgdmFyIENMU19IU0NST0xMQ09OID0gJ2UtaHNjcm9sbC1jb250ZW50JztcbiAgICB2YXIgQ0xTX05BVkFSUk9XID0gJ2UtbmF2LWFycm93JztcbiAgICB2YXIgQ0xTX05BVlJJR0hUQVJST1cgPSAnZS1uYXYtcmlnaHQtYXJyb3cnO1xuICAgIHZhciBDTFNfTkFWTEVGVEFSUk9XID0gJ2UtbmF2LWxlZnQtYXJyb3cnO1xuICAgIHZhciBDTFNfSFNDUk9MTE5BViA9ICdlLXNjcm9sbC1uYXYnO1xuICAgIHZhciBDTFNfSFNDUk9MTE5BVlJJR0hUID0gJ2Utc2Nyb2xsLXJpZ2h0LW5hdic7XG4gICAgdmFyIENMU19IU0NST0xMTkFWTEVGVCA9ICdlLXNjcm9sbC1sZWZ0LW5hdic7XG4gICAgdmFyIENMU19ERVZJQ0UgPSAnZS1zY3JvbGwtZGV2aWNlJztcbiAgICB2YXIgSFNjcm9sbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhIU2Nyb2xsLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIU2Nyb2xsKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYnJvd3NlciA9IGVqMl9iYXNlXzIuQnJvd3Nlci5pbmZvLm5hbWU7XG4gICAgICAgICAgICB0aGlzLmJyb3dzZXJDaGVjayA9IHRoaXMuYnJvd3NlciA9PT0gJ21vemlsbGEnO1xuICAgICAgICAgICAgdGhpcy5pc0RldmljZSA9IGVqMl9iYXNlXzIuQnJvd3Nlci5pc0RldmljZTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5pZUNoZWNrID0gdGhpcy5icm93c2VyID09PSAnZWRnZScgfHwgdGhpcy5icm93c2VyID09PSAnbXNpZSc7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmlkID09PSAnJykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBlajJfYmFzZV8xLmdldFVuaXF1ZUlEKCdoc2Nyb2xsJyk7XG4gICAgICAgICAgICAgICAgdGhpcy51bmlxdWVJZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMU19SVEwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlID0gbmV3IGVqMl9iYXNlXzEuVG91Y2godGhpcy5lbGVtZW50LCB7IHNjcm9sbDogdGhpcy50b3VjaEhhbmRsZXIuYmluZCh0aGlzKSB9KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTmF2SWNvbih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNjcm9sbEVsZSwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfREVWSUNFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxFbGUgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSFNDUk9MTENPTiB9KTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSFNDUk9MTEJBUiB9KTtcbiAgICAgICAgICAgIHNjcm9sbERpdi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlID0gW10uc2xpY2UuY2FsbChlbGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpbm5lckVsZV8xID0gaW5uZXJFbGU7IF9pIDwgaW5uZXJFbGVfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlXzEgPSBpbm5lckVsZV8xW19pXTtcbiAgICAgICAgICAgICAgICBzY3JvbGxFbGUuYXBwZW5kQ2hpbGQoZWxlXzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Nyb2xsRGl2LmFwcGVuZENoaWxkKHNjcm9sbEVsZSk7XG4gICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KTtcbiAgICAgICAgICAgIHNjcm9sbERpdi5zdHlsZS5vdmVyZmxvd1ggPSAnaGlkZGVuJztcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsRWxlID0gc2Nyb2xsRGl2O1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxJdGVtcyA9IHNjcm9sbEVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydzY3JvbGxTdGVwJ107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnaFNjcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZWxlLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19ST09UKTtcbiAgICAgICAgICAgIHZhciBuYXYgPSBlajJfYmFzZV8xLnNlbGVjdEFsbCgnIycgKyBlbGUuaWQgKyAnX25hdi5lLScgKyBlbGUuaWQgKyAnX25hdicpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IFtdLnNsaWNlLmNhbGwodGhpcy5zY3JvbGxJdGVtcy5jaGlsZHJlbik7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudW5pcXVlSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2godGhpcy5zY3JvbGxFbGUpO1xuICAgICAgICAgICAgaWYgKG5hdi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2gobmF2WzBdKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaChuYXZbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc2Nyb2xsRWxlLCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG51bGw7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuY3JlYXRlTmF2SWNvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBlbGVtZW50LmlkLmNvbmNhdCgnX25hdicpO1xuICAgICAgICAgICAgdmFyIGNsc1JpZ2h0ID0gJ2UtJyArIGVsZW1lbnQuaWQuY29uY2F0KCdfbmF2ICcgKyBDTFNfSFNDUk9MTE5BViArICcgJyArIENMU19IU0NST0xMTkFWUklHSFQpO1xuICAgICAgICAgICAgdmFyIG5hdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogaWQsIGNsYXNzTmFtZTogY2xzUmlnaHQgfSk7XG4gICAgICAgICAgICBuYXYuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICB2YXIgbmF2SXRlbSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19OQVZSSUdIVEFSUk9XICsgJyAnICsgQ0xTX05BVkFSUk9XICsgJyBlLWljb25zJyB9KTtcbiAgICAgICAgICAgIHZhciBjbHNMZWZ0ID0gJ2UtJyArIGVsZW1lbnQuaWQuY29uY2F0KCdfbmF2ICcgKyBDTFNfSFNDUk9MTE5BViArICcgJyArIENMU19IU0NST0xMTkFWTEVGVCk7XG4gICAgICAgICAgICB2YXIgbmF2RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiBpZCwgY2xhc3NOYW1lOiBjbHNMZWZ0ICsgJyAnICsgQ0xTX0RJU0FCTEUgfSk7XG4gICAgICAgICAgICBuYXZFbGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIHZhciBuYXZMZWZ0SXRlbSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19OQVZMRUZUQVJST1cgKyAnICcgKyBDTFNfTkFWQVJST1cgKyAnIGUtaWNvbnMnIH0pO1xuICAgICAgICAgICAgbmF2RWxlLmFwcGVuZENoaWxkKG5hdkxlZnRJdGVtKTtcbiAgICAgICAgICAgIG5hdi5hcHBlbmRDaGlsZChuYXZJdGVtKTtcbiAgICAgICAgICAgIG5hdi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobmF2KTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKG5hdkVsZSwgZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmllQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBuYXYuY2xhc3NMaXN0LmFkZCgnZS1pZS1hbGlnbicpO1xuICAgICAgICAgICAgICAgIG5hdkVsZS5jbGFzc0xpc3QuYWRkKCdlLWllLWFsaWduJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV2ZW50QmluZGluZyhbbmF2LCBuYXZFbGVdKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbWVvdXRGdW5fMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMua2V5VGltZW91dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVsZVNjcm9sbGluZygxMCwgZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dEZ1bl8xKCk7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUub25LZXlVcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgIT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5rZXlUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlUaW1lb3V0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMua2V5VGltZXIpO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5ldmVudEJpbmRpbmcgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgZWxlLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzEuVG91Y2goZWwsIHsgdGFwSG9sZDogX3RoaXMudGFiSG9sZEhhbmRsZXIuYmluZChfdGhpcyksIHRhcEhvbGRUaHJlc2hvbGQ6IDUwMCB9KTtcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgX3RoaXMub25LZXlQcmVzcy5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBfdGhpcy5vbktleVVwLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgX3RoaXMucmVwZWF0U2Nyb2xsLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIF90aGlzLnJlcGVhdFNjcm9sbC5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGVsLCAnY2xpY2snLCBfdGhpcy5jbGlja0V2ZW50SGFuZGxlciwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnJlcGVhdFNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lb3V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUudGFiSG9sZEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0cmd0ID0gZS5vcmlnaW5hbEV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIHRyZ3QgPSB0aGlzLmNvbnRhaW5zKHRyZ3QsIENMU19IU0NST0xMTkFWKSA/IHRyZ3QuZmlyc3RFbGVtZW50Q2hpbGQgOiB0cmd0O1xuICAgICAgICAgICAgdmFyIHNjcm9sbERpcyA9IDEwO1xuICAgICAgICAgICAgdmFyIHRpbWVvdXRGdW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlU2Nyb2xsaW5nKHNjcm9sbERpcywgdHJndCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aW1lb3V0RnVuKCk7XG4gICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGVsZSwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5lbGVTY3JvbGxpbmcgPSBmdW5jdGlvbiAoc2Nyb2xsRGlzLCB0cmd0KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuc2Nyb2xsRWxlO1xuICAgICAgICAgICAgdmFyIHJvb3RFbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gdHJndC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKENMU19IU0NST0xMTkFWKSkge1xuICAgICAgICAgICAgICAgIGNsYXNzTGlzdCA9IHRyZ3QucXVlcnlTZWxlY3RvcignLicgKyBDTFNfTkFWQVJST1cpLmNsYXNzTGlzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKHJvb3RFbGUsIENMU19SVEwpICYmIHRoaXMuYnJvd3NlckNoZWNrKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsRGlzID0gLXNjcm9sbERpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzY3JsTGVmdCA9IGVsZW1lbnQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGlmICgoIXRoaXMuY29udGFpbnMocm9vdEVsZSwgQ0xTX1JUTCkgfHwgdGhpcy5icm93c2VyQ2hlY2spIHx8IHRoaXMuaWVDaGVjaykge1xuICAgICAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoQ0xTX05BVlJJR0hUQVJST1cpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNjcmxMZWZ0ICsgc2Nyb2xsRGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gc2NybExlZnQgLSBzY3JvbGxEaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNsYXNzTGlzdC5jb250YWlucyhDTFNfTkFWTEVGVEFSUk9XKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBzY3JsTGVmdCArIHNjcm9sbERpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNjcmxMZWZ0IC0gc2Nyb2xsRGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuY2xpY2tFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbGVTY3JvbGxpbmcodGhpcy5zY3JvbGxTdGVwLCBlLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnRvdWNoSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5zY3JvbGxFbGU7XG4gICAgICAgICAgICB2YXIgZGlzdGFuY2U7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IGUuZGlzdGFuY2VYO1xuICAgICAgICAgICAgaWYgKCh0aGlzLmllQ2hlY2spICYmIHRoaXMuY29udGFpbnModGhpcy5lbGVtZW50LCBDTFNfUlRMKSkge1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gLWRpc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUuc2Nyb2xsRGlyZWN0aW9uID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgICAgICBlbGUuc2Nyb2xsTGVmdCA9IGVsZS5zY3JvbGxMZWZ0ICsgZGlzdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLnNjcm9sbERpcmVjdGlvbiA9PT0gJ1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIGVsZS5zY3JvbGxMZWZ0ID0gZWxlLnNjcm9sbExlZnQgLSBkaXN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuYXJyb3dEaXNhYmxpbmcgPSBmdW5jdGlvbiAoYWRkRGlzYWJsZSwgcmVtb3ZlRGlzYWJsZSkge1xuICAgICAgICAgICAgYWRkRGlzYWJsZS5jbGFzc0xpc3QuYWRkKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgIGFkZERpc2FibGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIGFkZERpc2FibGUucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICAgICAgcmVtb3ZlRGlzYWJsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgIHJlbW92ZURpc2FibGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICByZW1vdmVEaXNhYmxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgdGhpcy5yZXBlYXRTY3JvbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0YXJnZXQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgcm9vdEVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBuYXZMZWZ0RWxlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0hTQ1JPTExOQVZMRUZUKTtcbiAgICAgICAgICAgIHZhciBuYXZSaWdodEVsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IU0NST0xMTkFWUklHSFQpO1xuICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSB0YXJnZXQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGlmIChzY3JvbGxMZWZ0IDw9IDApIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxMZWZ0ID0gLXNjcm9sbExlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2Nyb2xsTGVmdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmICgoIXRoaXMuY29udGFpbnMocm9vdEVsZSwgQ0xTX1JUTCkgfHwgdGhpcy5icm93c2VyQ2hlY2spIHx8IHRoaXMuaWVDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93RGlzYWJsaW5nKG5hdkxlZnRFbGUsIG5hdlJpZ2h0RWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dEaXNhYmxpbmcobmF2UmlnaHRFbGUsIG5hdkxlZnRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKE1hdGguY2VpbCh3aWR0aCArIHNjcm9sbExlZnQgKyAuMSkgPj0gdGFyZ2V0LnNjcm9sbFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCghdGhpcy5jb250YWlucyhyb290RWxlLCBDTFNfUlRMKSB8fCB0aGlzLmJyb3dzZXJDaGVjaykgfHwgdGhpcy5pZUNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dEaXNhYmxpbmcobmF2UmlnaHRFbGUsIG5hdkxlZnRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJvd0Rpc2FibGluZyhuYXZMZWZ0RWxlLCBuYXZSaWdodEVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc0VsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlzRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc0VsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzRWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgICAgICBkaXNFbGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Njcm9sbFN0ZXAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wLmVuYWJsZVJ0bCA/IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMU19SVEwpIDogdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIU2Nyb2xsO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSg0MClcbiAgICBdLCBIU2Nyb2xsLnByb3RvdHlwZSwgXCJzY3JvbGxTdGVwXCIsIHZvaWQgMCk7XG4gICAgSFNjcm9sbCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIEhTY3JvbGwpO1xuICAgIGV4cG9ydHMuSFNjcm9sbCA9IEhTY3JvbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9oLXNjcm9sbC5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIlxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3Rvb2xiYXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB0b29sYmFyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHRvb2xiYXJfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3Rvb2xiYXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIi4uL2NvbW1vbi9oLXNjcm9sbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9wb3B1cHNfMSwgZWoyX3BvcHVwc18yLCBlajJfYnV0dG9uc18xLCBoX3Njcm9sbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDTFNfSVRFTVMgPSAnZS10b29sYmFyLWl0ZW1zJztcbiAgICB2YXIgQ0xTX0lURU0gPSAnZS10b29sYmFyLWl0ZW0nO1xuICAgIHZhciBDTFNfUlRMID0gJ2UtcnRsJztcbiAgICB2YXIgQ0xTX1NFUEFSQVRPUiA9ICdlLXNlcGFyYXRvcic7XG4gICAgdmFyIENMU19QT1BVUElDT04gPSAnZS1wb3B1cC11cC1pY29uJztcbiAgICB2YXIgQ0xTX1BPUFVQRE9XTiA9ICdlLXBvcHVwLWRvd24taWNvbic7XG4gICAgdmFyIENMU19URU1QTEFURSA9ICdlLXRlbXBsYXRlJztcbiAgICB2YXIgQ0xTX0RJU0FCTEUgPSAnZS1vdmVybGF5JztcbiAgICB2YXIgQ0xTX1BPUFVQVEVYVCA9ICdlLXRvb2xiYXItdGV4dCc7XG4gICAgdmFyIENMU19UQkFSVEVYVCA9ICdlLXBvcHVwLXRleHQnO1xuICAgIHZhciBDTFNfVEJBUk9WRVJGTE9XID0gJ2Utb3ZlcmZsb3ctc2hvdyc7XG4gICAgdmFyIENMU19QT1BPVkVSRkxPVyA9ICdlLW92ZXJmbG93LWhpZGUnO1xuICAgIHZhciBDTFNfVEJBUkJUTiA9ICdlLXRiYXItYnRuJztcbiAgICB2YXIgQ0xTX1RCQVJOQVYgPSAnZS1ob3ItbmF2JztcbiAgICB2YXIgQ0xTX1RCQVJTQ1JMTkFWID0gJ2Utc2Nyb2xsLW5hdic7XG4gICAgdmFyIENMU19UQkFSUklHSFQgPSAnZS10b29sYmFyLXJpZ2h0JztcbiAgICB2YXIgQ0xTX1RCQVJMRUZUID0gJ2UtdG9vbGJhci1sZWZ0JztcbiAgICB2YXIgQ0xTX1RCQVJDRU5URVIgPSAnZS10b29sYmFyLWNlbnRlcic7XG4gICAgdmFyIENMU19UQkFSUE9TID0gJ2UtdGJhci1wb3MnO1xuICAgIHZhciBDTFNfVEJBUlNDUk9MTCA9ICdlLWhzY3JvbGwtY29udGVudCc7XG4gICAgdmFyIENMU19QT1BVUE5BViA9ICdlLWhvci1uYXYnO1xuICAgIHZhciBDTFNfUE9QVVBDTEFTUyA9ICdlLXRvb2xiYXItcG9wJztcbiAgICB2YXIgQ0xTX1BPUFVQID0gJ2UtdG9vbGJhci1wb3B1cCc7XG4gICAgdmFyIENMU19UQkFSQlROVEVYVCA9ICdlLXRiYXItYnRuLXRleHQnO1xuICAgIHZhciBDTFNfVEJBUk5BVkFDVCA9ICdlLW5hdi1hY3RpdmUnO1xuICAgIHZhciBDTFNfVEJBUklHTk9SRSA9ICdlLWlnbm9yZSc7XG4gICAgdmFyIEl0ZW0gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSXRlbSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSXRlbSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSXRlbTtcbiAgICB9KGVqMl9iYXNlXzUuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwicHJlZml4SWNvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInN1ZmZpeEljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnTm9uZScpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwib3ZlcmZsb3dcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdCdXR0b24nKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQm90aCcpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwic2hvd1RleHRPblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwiaHRtbEF0dHJpYnV0ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJ0b29sdGlwVGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdsZWZ0JylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJhbGlnblwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuSXRlbSA9IEl0ZW07XG4gICAgdmFyIFRvb2xiYXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVG9vbGJhciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVG9vbGJhcihvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICBtb3ZlTGVmdDogJ2xlZnRhcnJvdycsXG4gICAgICAgICAgICAgICAgbW92ZVJpZ2h0OiAncmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgbW92ZVVwOiAndXBhcnJvdycsXG4gICAgICAgICAgICAgICAgbW92ZURvd246ICdkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHBvcHVwT3BlbjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBwb3B1cENsb3NlOiAnZXNjYXBlJyxcbiAgICAgICAgICAgICAgICB0YWI6ICd0YWInLFxuICAgICAgICAgICAgICAgIGhvbWU6ICdob21lJyxcbiAgICAgICAgICAgICAgICBlbmQ6ICdlbmQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB3aGlsZSAoZWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQ2hpbGQoZWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHJndEVsZSkge1xuICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZCh0aGlzLmN0cmxUZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclByb3BlcnR5KCk7XG4gICAgICAgICAgICB0aGlzLnBvcE9iaiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRiYXJBbGlnbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdlLXRvb2xwb3AnKTtcbiAgICAgICAgICAgIGVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICBbJ2FyaWEtZGlzYWJsZWQnLCAnYXJpYS1vcmllbnRhdGlvbicsICdhcmlhLWhhc3BvcHVwJywgJ3JvbGUnXS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyYikge1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZUNyZWF0ZScpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wb3BPYmogPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5lbGVtZW50LCBDTFNfUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMua2V5TW9kdWxlID0gbmV3IGVqMl9iYXNlXzIuS2V5Ym9hcmRFdmVudHModGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAga2V5QWN0aW9uOiB0aGlzLmtleUFjdGlvbkhhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBrZXlDb25maWdzOiB0aGlzLmtleUNvbmZpZ3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2tleWRvd24nLCB0aGlzLmRvY0tleURvd24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCAnMCcpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kb2NLZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDkgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhvci1uYXYnKSA9PT0gdHJ1ZSAmJiBlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmhpZGUoeyBuYW1lOiAnU2xpZGVVcCcsIGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2V5Q2hlY2sgPSAoZS5rZXlDb2RlID09PSA0MCB8fCBlLmtleUNvZGUgPT09IDM4IHx8IGUua2V5Q29kZSA9PT0gMzUgfHwgZS5rZXlDb2RlID09PSAzNik7XG4gICAgICAgICAgICBpZiAoa2V5Q2hlY2spIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUhTY3JvbGwoKTtcbiAgICAgICAgICAgIHRoaXMua2V5TW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ3Njcm9sbCcsIHRoaXMuZG9jRXZlbnQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2tleWRvd24nLCB0aGlzLmRvY0tleURvd24pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCAnY2xpY2snLCB0aGlzLmRvY0V2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY2xlYXJQcm9wZXJ0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudGJhckVsZSA9IFtdO1xuICAgICAgICAgICAgdGhpcy50YmFyQWxnRWxlID0geyBsZWZ0czogW10sIGNlbnRlcnM6IFtdLCByaWdodHM6IFtdIH07XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmRvY0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwb3BFbGUgPSBlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1wb3B1cCcpO1xuICAgICAgICAgICAgaWYgKHRoaXMucG9wT2JqICYmIGVqMl9iYXNlXzIuaXNWaXNpYmxlKHRoaXMucG9wT2JqLmVsZW1lbnQpICYmICFwb3BFbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcE9iai5oaWRlKHsgbmFtZTogJ1NsaWRlVXAnLCBkdXJhdGlvbjogMTAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95SFNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnNjcm9sbE1vZHVsZS5lbGVtZW50LCBDTFNfVEJBUlBPUyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmRlc3Ryb3lJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQ0xTX0lURU0pKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jbGVhclByb3BlcnR5KCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmRlc3Ryb3lNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhpcy5zY3JvbGxNb2R1bGUuZWxlbWVudCwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95SFNjcm9sbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucG9wT2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cFJlZnJlc2godGhpcy5wb3BPYmouZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChlbGUsIHZhbCkge1xuICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQodmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGVsZSwgdmFsKSB7XG4gICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZSh2YWwpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5lbGVtZW50Rm9jdXMgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB2YXIgZkNoaWxkID0gZWxlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgaWYgKGZDaGlsZCkge1xuICAgICAgICAgICAgICAgIGZDaGlsZC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlU3dpdGNoKGVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGUuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY2xzdEVsZW1lbnQgPSBmdW5jdGlvbiAodGJyTmF2Q2hrLCB0cmd0KSB7XG4gICAgICAgICAgICB2YXIgY2xzdDtcbiAgICAgICAgICAgIGlmICh0YnJOYXZDaGsgJiYgdGhpcy5wb3BPYmogJiYgZWoyX2Jhc2VfMi5pc1Zpc2libGUodGhpcy5wb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBjbHN0ID0gdGhpcy5wb3BPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZWxlbWVudCA9PT0gdHJndCB8fCB0YnJOYXZDaGspIHtcbiAgICAgICAgICAgICAgICBjbHN0ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0cmd0LCAnLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xzdDtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUua2V5SGFuZGxpbmcgPSBmdW5jdGlvbiAoY2xzdCwgZSwgdHJndCwgbmF2Q2hrLCBzY3JvbGxDaGspIHtcbiAgICAgICAgICAgIHZhciBwb3BPYmogPSB0aGlzLnBvcE9iajtcbiAgICAgICAgICAgIHZhciByb290RWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIHBvcEFuaW1hdGUgPSB7IG5hbWU6ICdTbGlkZVVwJywgZHVyYXRpb246IDEwMCB9O1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb290RWxlID09PSB0cmd0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRGb2N1cyhjbHN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghbmF2Q2hrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZUZvY3VzKGNsc3QsICduZXh0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZUxlZnQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5hdkNoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhjbHN0LCAncHJldmlvdXMnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdob21lJzpcbiAgICAgICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbHN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9wdXBDaGVjayA9IGVqMl9iYXNlXzIuY2xvc2VzdChjbHN0LCAnLmUtcG9wdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cENoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNWaXNpYmxlKHRoaXMucG9wT2JqLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzID0gcG9wdXBDaGVjay5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSAnaG9tZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZSA9IG5vZGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlID0gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIENMU19JVEVNUyArICcgLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSAnaG9tZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlID0gbm9kZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Rm9jdXMoZWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlVXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVEb3duJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZS5hY3Rpb24gPT09ICdtb3ZlVXAnID8gJ3ByZXZpb3VzJyA6ICduZXh0JztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcE9iaiAmJiBlajJfYmFzZV8yLmNsb3Nlc3QodHJndCwgJy5lLXBvcHVwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3BFbGUgPSBwb3BPYmouZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3BGcnN0RWxlID0gcG9wRWxlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSA9PT0gJ3ByZXZpb3VzJyAmJiBwb3BGcnN0RWxlID09PSBjbHN0KSB8fCAodmFsdWUgPT09ICduZXh0JyAmJiBwb3BFbGUubGFzdEVsZW1lbnRDaGlsZCA9PT0gY2xzdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZUZvY3VzKGNsc3QsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmFjdGlvbiA9PT0gJ21vdmVEb3duJyAmJiBwb3BPYmogJiYgZWoyX2Jhc2VfMi5pc1Zpc2libGUocG9wT2JqLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRGb2N1cyhjbHN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0YWInOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbENoayAmJiAhbmF2Q2hrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlXzEgPSBjbHN0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RFbGUgPT09IHRyZ3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVFbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGUuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlUmVtb3ZlKGVsZV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlXzEuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwb3B1cENsb3NlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcE9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wT2JqLmhpZGUocG9wQW5pbWF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncG9wdXBPcGVuJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYXZDaGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9wT2JqICYmICFlajJfYmFzZV8yLmlzVmlzaWJsZShwb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcE9iai5lbGVtZW50LnN0eWxlLnRvcCA9IHJvb3RFbGUub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcE9iai5zaG93KHsgbmFtZTogJ1NsaWRlRG93bicsIGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3BPYmouaGlkZShwb3BBbmltYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgY2xzdDtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgdGJyTmF2Q2hrID0gdHJndC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIHRiYXJTY3JvbGxDaGsgPSB0cmd0LmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUlNDUkxOQVYpO1xuICAgICAgICAgICAgY2xzdCA9IHRoaXMuY2xzdEVsZW1lbnQodGJyTmF2Q2hrLCB0cmd0KTtcbiAgICAgICAgICAgIGlmIChjbHN0IHx8IHRiYXJTY3JvbGxDaGspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleUhhbmRsaW5nKGNsc3QsIGUsIHRyZ3QsIHRick5hdkNoaywgdGJhclNjcm9sbENoayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmVsZUZvY3VzID0gZnVuY3Rpb24gKGNsb3Nlc3QsIHBvcykge1xuICAgICAgICAgICAgdmFyIHNpYiA9IE9iamVjdChjbG9zZXN0KVtwb3MgKyAnRWxlbWVudFNpYmxpbmcnXTtcbiAgICAgICAgICAgIHZhciBjb250YWlucyA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoc2liKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNraXBFbGUgPSBjb250YWlucyhzaWIpO1xuICAgICAgICAgICAgICAgIGlmIChza2lwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qoc2liKVtwb3MgKyAnU2libGluZyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWIgPSBPYmplY3Qoc2liKVtwb3MgKyAnU2libGluZyddO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEVsZSA9IGNvbnRhaW5zKHNpYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoc2liLCBwb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRGb2N1cyhzaWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IE9iamVjdChjbG9zZXN0LnBhcmVudEVsZW1lbnQpW3BvcyArICdFbGVtZW50U2libGluZyddO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlbGVtKSAmJiBlbGVtLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtID0gT2JqZWN0KGVsZW0pW3BvcyArICdFbGVtZW50U2libGluZyddO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWxlbSkgJiYgZWxlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPT09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWlucyhlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZUZvY3VzKGVsLCBwb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuZmlyc3RFbGVtZW50Q2hpbGQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZVN3aXRjaChlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBlbGVtLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbnMoZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVGb2N1cyhlbCwgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudEZvY3VzKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgY2xzTGlzdCA9IHRyZ3QuY2xhc3NMaXN0O1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpc1BvcHVwRWxlbWVudCA9ICFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0cmd0LCAnLicgKyBDTFNfUE9QVVBDTEFTUykpO1xuICAgICAgICAgICAgdmFyIHBvcHVwTmF2ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRyZ3QsICgnLicgKyBDTFNfVEJBUk5BVikpO1xuICAgICAgICAgICAgaWYgKCFwb3B1cE5hdikge1xuICAgICAgICAgICAgICAgIHBvcHVwTmF2ID0gdHJndDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWxlLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucygnZS1oc2Nyb2xsJykgJiYgKGNsc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJOQVYpKSkge1xuICAgICAgICAgICAgICAgIGNsc0xpc3QgPSB0cmd0LnF1ZXJ5U2VsZWN0b3IoJy5lLWljb25zJykuY2xhc3NMaXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNsc0xpc3QuY29udGFpbnMoQ0xTX1BPUFVQSUNPTikgfHwgY2xzTGlzdC5jb250YWlucyhDTFNfUE9QVVBET1dOKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBDbGlja0hhbmRsZXIoZWxlLCBwb3B1cE5hdiwgQ0xTX1JUTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXRlbU9iajtcbiAgICAgICAgICAgIHZhciBjbHN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAnLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICBpZiAoKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoY2xzdCkgfHwgY2xzdC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0RJU0FCTEUpKSAmJiAhcG9wdXBOYXYuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSTkFWKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbHN0KSB7XG4gICAgICAgICAgICAgICAgaXRlbU9iaiA9IHRoaXMuaXRlbXNbdGhpcy50YmFyRWxlLmluZGV4T2YoY2xzdCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHsgb3JpZ2luYWxFdmVudDogZSwgaXRlbTogaXRlbU9iaiB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbGlja2VkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmIChpc1BvcHVwRWxlbWVudCAmJiAhZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmhpZGUoeyBuYW1lOiAnU2xpZGVVcCcsIGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucG9wdXBDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZWxlLCBwb3B1cE5hdiwgQ0xTX1JUTCkge1xuICAgICAgICAgICAgdmFyIHBvcE9iaiA9IHRoaXMucG9wT2JqO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNWaXNpYmxlKHBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHBvcHVwTmF2LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1RCQVJOQVZBQ1QpO1xuICAgICAgICAgICAgICAgIHBvcE9iai5oaWRlKHsgbmFtZTogJ1NsaWRlVXAnLCBkdXJhdGlvbjogMTAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1JUTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wT2JqLmVuYWJsZVJ0bCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHBvcE9iai5wb3NpdGlvbiA9IHsgWDogJ2xlZnQnLCBZOiAndG9wJyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9wT2JqLm9mZnNldFggPT09IDAgJiYgIWVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1JUTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wT2JqLmVuYWJsZVJ0bCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBwb3BPYmoucG9zaXRpb24gPSB7IFg6ICdyaWdodCcsIFk6ICd0b3AnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvcE9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIHBvcE9iai5lbGVtZW50LnN0eWxlLnRvcCA9IHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHBvcHVwTmF2LmNsYXNzTGlzdC5hZGQoQ0xTX1RCQVJOQVZBQ1QpO1xuICAgICAgICAgICAgICAgIHBvcE9iai5zaG93KHsgbmFtZTogJ1NsaWRlRG93bicsIGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDb250cm9sKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGVqMl9iYXNlXzQuZm9ybWF0VW5pdCh0aGlzLndpZHRoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlajJfYmFzZV80LmZvcm1hdFVuaXQodGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzUuQnJvd3Nlci5pbmZvLm5hbWUgIT09ICdtc2llJyB8fCB0aGlzLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6IGhlaWdodCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd3aWR0aCc6IHdpZHRoIH0pO1xuICAgICAgICAgICAgdmFyIGFyaWFBdHRyID0ge1xuICAgICAgICAgICAgICAgICdyb2xlJzogJ3Rvb2xiYXInLCAnYXJpYS1kaXNhYmxlZCc6ICdmYWxzZScsICdhcmlhLWhhc3BvcHVwJzogJ2ZhbHNlJywgJ2FyaWEtb3JpZW50YXRpb24nOiAnaG9yaXpvbnRhbCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgYXJpYUF0dHIpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW5kZXJDb250cm9sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50cmd0RWxlID0gKHRoaXMuZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggPiAwKSA/IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdkaXYnKSA6IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRiYXJBbGdFbGUgPSB7IGxlZnRzOiBbXSwgY2VudGVyczogW10sIHJpZ2h0czogW10gfTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVySXRlbXMoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1Qb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5pbml0SFNjcm9sbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBpbm5lckl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2Nyb2xsTW9kdWxlICYmIHRoaXMuY2hlY2tPdmVyZmxvdyhlbGVtZW50LCBpbm5lckl0ZW1zWzBdKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMgKyAnIC4nICsgQ0xTX1RCQVJDRU5URVIpLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBuZXcgaF9zY3JvbGxfMS5IU2Nyb2xsKHsgc2Nyb2xsU3RlcDogNTAsIGVuYWJsZVJ0bDogdGhpcy5lbmFibGVSdGwgfSwgaW5uZXJJdGVtc1swXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhpcy5zY3JvbGxNb2R1bGUuZWxlbWVudCwgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7IG92ZXJmbG93OiAnaGlkZGVuJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuaXRlbVdpZHRoQ2FsID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSAwO1xuICAgICAgICAgICAgW10uc2xpY2UuY2FsbChlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfSVRFTSwgaXRlbXMpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHdpZHRoICs9IChlbC5vZmZzZXRXaWR0aCArIHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLm1hcmdpblJpZ2h0KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY2hlY2tPdmVyZmxvdyA9IGZ1bmN0aW9uIChlbGVtZW50LCBpbm5lckl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpIHx8IGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaW5uZXJJdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbGVXaWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgaXRlbVdpZHRoO1xuICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduIHx8IHRoaXMuc2Nyb2xsTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgaXRlbVdpZHRoID0gdGhpcy5pdGVtV2lkdGhDYWwodGhpcy5zY3JvbGxNb2R1bGUgPyBpbm5lckl0ZW0ucXVlcnlTZWxlY3RvcignLmUtaHNjcm9sbC1jb250ZW50JykgOiBpbm5lckl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbVdpZHRoID0gaW5uZXJJdGVtLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcE5hdiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsTmF2ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSU0NSTE5BVik7XG4gICAgICAgICAgICBpZiAoaXRlbVdpZHRoID4gZWxlV2lkdGggLSAocG9wTmF2ID8gcG9wTmF2Lm9mZnNldFdpZHRoIDogKHNjcm9sbE5hdiA/IHNjcm9sbE5hdi5vZmZzZXRXaWR0aCAqIDIgOiAwKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVmcmVzaE92ZXJmbG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyT3ZlcmZsb3dNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW1zID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIGlmIChlbGUgJiYgZWxlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldFdpZCA9IGVsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMub3ZlcmZsb3dNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1Njcm9sbGFibGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95SFNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0SFNjcm9sbChlbGUsIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMU19JVEVNUykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1BvcHVwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuZWxlbWVudCwgJ2UtdG9vbHBvcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tPdmVyZmxvdyhlbGUsIGlubmVySXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cEVsZShlbGUsIFtdLnNsaWNlLmNhbGwoZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU1TICsgJyAuJyArIENMU19JVEVNLCBlbGUpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpLnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJJdGVtcywgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbVBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNyZWF0ZVBvcHVwRWxlID0gZnVuY3Rpb24gKGVsZSwgaW5uZXJFbGUpIHtcbiAgICAgICAgICAgIHZhciBpbm5lck5hdiA9IGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIGlmICghaW5uZXJOYXYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBvcHVwSWNvbihlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5uZXJOYXYgPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgZWxlV2lkdGggPSAoZWxlLm9mZnNldFdpZHRoIC0gKGlubmVyTmF2Lm9mZnNldFdpZHRoKSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ydGwnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7IGRpcmVjdGlvbjogJ2luaXRpYWwnIH0pO1xuICAgICAgICAgICAgdGhpcy5jaGVja1ByaW9yaXR5KGVsZSwgaW5uZXJFbGUsIGVsZVdpZHRoLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXJlY3Rpb24nKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXAoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucHVzaGluZ1BvcHBlZEVsZSA9IGZ1bmN0aW9uICh0YmFyT2JqLCBwb3B1cFByaSwgZWxlLCBlbGVIZWlnaHQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGJhck9iai5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIG5vZGVzID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCQVJPVkVSRkxPVywgZWxlKTtcbiAgICAgICAgICAgIHZhciBub2RlSW5kZXggPSAwO1xuICAgICAgICAgICAgdmFyIHBvcHBlZEVsZSA9IFtdLnNsaWNlLmNhbGwoZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX1BPUFVQLCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKSkpO1xuICAgICAgICAgICAgdmFyIG5vZGVQcmkgPSAwO1xuICAgICAgICAgICAgcG9wcGVkRWxlLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIG5vZGVzID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCQVJPVkVSRkxPVywgZWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFST1ZFUkZMT1cpICYmIG5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRiYXJPYmoudGJSZXNpemUgJiYgbm9kZXMubGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoZWwsIG5vZGVzW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICArK25vZGVQcmk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuaW5zZXJ0QmVmb3JlKGVsLCBlbGUuY2hpbGRyZW5bbm9kZXMubGVuZ3RoXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICArK25vZGVQcmk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFST1ZFUkZMT1cpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoZWwsIGVsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgKytub2RlUHJpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0YmFyT2JqLnRiUmVzaXplICYmIGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUE9QT1ZFUkZMT1cpICYmIGVsZS5jaGlsZHJlbi5sZW5ndGggPiAwICYmIG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuaW5zZXJ0QmVmb3JlKGVsLCBlbGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICsrbm9kZVByaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19QT1BPVkVSRkxPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBQcmkucHVzaChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRiYXJPYmoudGJSZXNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShlbCwgZWxlLmNoaWxkTm9kZXNbbm9kZUluZGV4ICsgbm9kZVByaV0pO1xuICAgICAgICAgICAgICAgICAgICArK25vZGVJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUoZWwsIHsgZGlzcGxheTogJycsIGhlaWdodDogZWxlSGVpZ2h0ICsgJ3B4JyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcG9wdXBQcmkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgdGJhckVsZSA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNLCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGJhckVsZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHZhciB0YmFyRWxlbWVudCA9IHRiYXJFbGVbaV07XG4gICAgICAgICAgICAgICAgaWYgKHRiYXJFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTFNfU0VQQVJBVE9SKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRiYXJFbGVtZW50LCB7IGRpc3BsYXk6ICdub25lJyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY3JlYXRlUG9wdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBlbGVIZWlnaHQ7XG4gICAgICAgICAgICB2YXIgZWxlSXRlbTtcbiAgICAgICAgICAgIGVsZUl0ZW0gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU0gKyAnOm5vdCguJyArIENMU19TRVBBUkFUT1IgKyAnICk6bm90KC4nICsgQ0xTX1BPUFVQICsgJyApJyk7XG4gICAgICAgICAgICBlbGVIZWlnaHQgPSAoZWxlbWVudC5zdHlsZS5oZWlnaHQgPT09ICdhdXRvJyB8fCBlbGVtZW50LnN0eWxlLmhlaWdodCA9PT0gJycpID8gbnVsbCA6IGVsZUl0ZW0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGVsZTtcbiAgICAgICAgICAgIHZhciBwb3B1cFByaSA9IFtdO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBlbGVtZW50LmlkICsgJ19wb3B1cC4nICsgQ0xTX1BPUFVQQ0xBU1MpKSB7XG4gICAgICAgICAgICAgICAgZWxlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGVsZW1lbnQuaWQgKyAnX3BvcHVwLicgKyBDTFNfUE9QVVBDTEFTUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IGVsZW1lbnQuaWQgKyAnX3BvcHVwJywgY2xhc3NOYW1lOiBDTFNfUE9QVVBDTEFTUyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHVzaGluZ1BvcHBlZEVsZSh0aGlzLCBwb3B1cFByaSwgZWxlLCBlbGVIZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEluaXQoZWxlbWVudCwgZWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucG9wdXBJbml0ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGVsZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBvcE9iaikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyBvdmVyZmxvdzogJycgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gbmV3IGVqMl9wb3B1cHNfMS5Qb3B1cChudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0ZVRvOiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFk6IChlbGVtZW50Lm9mZnNldEhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgICAgIG9wZW46IHRoaXMucG9wdXBPcGVuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlOiB0aGlzLnBvcHVwQ2xvc2UsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLmVuYWJsZVJ0bCA/IHsgWDogJ2xlZnQnLCBZOiAndG9wJyB9IDogeyBYOiAncmlnaHQnLCBZOiAndG9wJyB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcG9wdXAuYXBwZW5kVG8oZWxlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLmRvY0V2ZW50LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgJ2NsaWNrICcsIHRoaXMuZG9jRXZlbnQuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgcG9wdXAuZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSBwb3B1cC5lbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgcG9wdXAuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqID0gcG9wdXA7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oYXNwb3B1cCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9wdXBFbGUgPSB0aGlzLnBvcE9iai5lbGVtZW50O1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUocG9wdXBFbGUsIHsgbWF4SGVpZ2h0OiAnJywgZGlzcGxheTogJ2Jsb2NrJyB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHBvcHVwRWxlLCB7IG1heEhlaWdodDogcG9wdXBFbGUub2Zmc2V0SGVpZ2h0ICsgJ3B4JywgZGlzcGxheTogJycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwT3BlbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcG9wT2JqID0gdGhpcy5wb3BPYmo7XG4gICAgICAgICAgICB2YXIgcG9wdXBFbGUgPSB0aGlzLnBvcE9iai5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIHRvb2xFbGUgPSB0aGlzLnBvcE9iai5lbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcG9wdXBOYXYgPSB0b29sRWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShwb3BPYmouZWxlbWVudCwgeyBoZWlnaHQ6ICdhdXRvJywgbWF4SGVpZ2h0OiAnJyB9KTtcbiAgICAgICAgICAgIHBvcE9iai5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IHBvcE9iai5lbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICB2YXIgcG9wdXBFbGVQb3MgPSBwb3B1cEVsZS5vZmZzZXRUb3AgKyBwb3B1cEVsZS5vZmZzZXRIZWlnaHQgKyBlajJfcG9wdXBzXzIuY2FsY3VsYXRlUG9zaXRpb24odG9vbEVsZSkudG9wO1xuICAgICAgICAgICAgdmFyIHBvcEljb24gPSBwb3B1cE5hdi5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIHBvcHVwTmF2LmNsYXNzTGlzdC5hZGQoQ0xTX1RCQVJOQVZBQ1QpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QocG9wSWNvbiwgW0NMU19QT1BVUElDT05dLCBbQ0xTX1BPUFVQRE9XTl0pO1xuICAgICAgICAgICAgdmFyIHNjcm9sbFZhbCA9IGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQod2luZG93LnNjcm9sbFkpID8gMCA6IHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICAgICAgaWYgKCh3aW5kb3cuaW5uZXJIZWlnaHQgKyBzY3JvbGxWYWwpIDwgcG9wdXBFbGVQb3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3ZlcmZsb3dIZWlnaHQgPSAocG9wdXBFbGUub2Zmc2V0SGVpZ2h0IC0gKChwb3B1cEVsZVBvcyAtIHdpbmRvdy5pbm5lckhlaWdodCAtIHNjcm9sbFZhbCkgKyA1KSk7XG4gICAgICAgICAgICAgICAgcG9wT2JqLmhlaWdodCA9IG92ZXJmbG93SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHBvcE9iai5lbGVtZW50LCB7IG1heEhlaWdodDogb3ZlcmZsb3dIZWlnaHQgKyAncHgnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wb3B1cENsb3NlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcG9wdXBOYXYgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIHBvcEljb24gPSBwb3B1cE5hdi5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIHBvcHVwTmF2LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1RCQVJOQVZBQ1QpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QocG9wSWNvbiwgW0NMU19QT1BVUERPV05dLCBbQ0xTX1BPUFVQSUNPTl0pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jaGVja1ByaW9yaXR5ID0gZnVuY3Rpb24gKGVsZSwgaW5FbGUsIGVsZVdpZHRoLCBwcmUpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBpbkVsZS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgZWxlV2lkID0gZWxlV2lkdGg7XG4gICAgICAgICAgICB2YXIgc2VwQ2hlY2sgPSAwO1xuICAgICAgICAgICAgdmFyIGl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgaXRlbVBvcENvdW50ID0gMDtcbiAgICAgICAgICAgIHZhciBjaGVja0NsYXNzID0gZnVuY3Rpb24gKGVsZSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJWYWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YWwuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNscykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJWYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJWYWw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1yZ24gPSBwYXJzZUZsb2F0KCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpbkVsZVtpXSkpLm1hcmdpblJpZ2h0KTtcbiAgICAgICAgICAgICAgICBtcmduICs9IHBhcnNlRmxvYXQoKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGluRWxlW2ldKSkubWFyZ2luTGVmdCk7XG4gICAgICAgICAgICAgICAgaWYgKGluRWxlW2ldID09PSB0aGlzLnRiYXJFbGVbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFyRWxlTXJnbiA9IG1yZ247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoaW5FbGVbaV0ub2Zmc2V0TGVmdCArIGluRWxlW2ldLm9mZnNldFdpZHRoICsgbXJnbikgPiBlbGVXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5FbGVbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VwQ2hlY2sgPiAwICYmIGl0ZW1Db3VudCA9PT0gaXRlbVBvcENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcEVsZSA9IGluRWxlW2kgKyBpdGVtQ291bnQgKyAoc2VwQ2hlY2sgLSAxKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQ2xhc3Moc2VwRWxlLCBbQ0xTX1NFUEFSQVRPUiwgQ0xTX1RCQVJJR05PUkVdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHNlcEVsZSwgeyBkaXNwbGF5OiAnbm9uZScgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VwQ2hlY2srKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtUG9wQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluRWxlW2ldLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk9WRVJGTE9XKSAmJiBwcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZVdpZHRoIC09IChpbkVsZVtpXS5vZmZzZXRXaWR0aCArIChtcmduKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNoZWNrQ2xhc3MoaW5FbGVbaV0sIFtDTFNfU0VQQVJBVE9SLCBDTFNfVEJBUklHTk9SRV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkVsZVtpXS5jbGFzc0xpc3QuYWRkKENMU19QT1BVUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKGluRWxlW2ldLCB7IGRpc3BsYXk6ICdub25lJywgbWluV2lkdGg6IGluRWxlW2ldLm9mZnNldFdpZHRoICsgJ3B4JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Qb3BDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlV2lkdGggLT0gKGluRWxlW2ldLm9mZnNldFdpZHRoICsgKG1yZ24pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9wZWRFbGUgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfSVRFTSArICc6bm90KC4nICsgQ0xTX1BPUFVQICsgJyknLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQcmlvcml0eShlbGUsIHBvcGVkRWxlLCBlbGVXaWQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY3JlYXRlUG9wdXBJY29uID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGVsZW1lbnQuaWQuY29uY2F0KCdfbmF2Jyk7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gJ2UtJyArIGVsZW1lbnQuaWQuY29uY2F0KCdfbmF2ICcgKyBDTFNfUE9QVVBOQVYpO1xuICAgICAgICAgICAgdmFyIG5hdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogaWQsIGNsYXNzTmFtZTogY2xhc3NOYW1lIH0pO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzUuQnJvd3Nlci5pbmZvLm5hbWUgPT09ICdtc2llJyB8fCBlajJfYmFzZV81LkJyb3dzZXIuaW5mby5uYW1lID09PSAnZWRnZScpIHtcbiAgICAgICAgICAgICAgICBuYXYuY2xhc3NMaXN0LmFkZCgnZS1pZS1hbGlnbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5hdkl0ZW0gPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfUE9QVVBET1dOICsgJyBlLWljb25zJyB9KTtcbiAgICAgICAgICAgIG5hdi5hcHBlbmRDaGlsZChuYXZJdGVtKTtcbiAgICAgICAgICAgIG5hdi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobmF2KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudGJhclByaVJlZiA9IGZ1bmN0aW9uIChpbkVsZSwgaW5keCwgc2VwUHJpLCBlbCwgZGVzLCBlbFdpZCwgd2lkLCBpZykge1xuICAgICAgICAgICAgdmFyIGlnbm9yZUNvdW50ID0gaWc7XG4gICAgICAgICAgICB2YXIgcG9wRWxlID0gdGhpcy5wb3BPYmouZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9ICcuJyArIENMU19JVEVNICsgJzpub3QoLicgKyBDTFNfU0VQQVJBVE9SICsgJyk6bm90KC4nICsgQ0xTX1RCQVJPVkVSRkxPVyArICcpJztcbiAgICAgICAgICAgIHZhciBwcmlFbGVDbnQgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfUE9QVVAgKyAnOm5vdCguJyArIENMU19UQkFST1ZFUkZMT1cgKyAnKScsIHBvcEVsZSkubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNoZWNrQ2xhc3MgPSBmdW5jdGlvbiAoZWxlLCB2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlLmNsYXNzTGlzdC5jb250YWlucyh2YWwpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLnNlbGVjdEFsbChxdWVyeSwgaW5FbGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVTZXAgPSBpbkVsZS5jaGlsZHJlbltpbmR4IC0gKGluZHggLSBzZXBQcmkpIC0gMV07XG4gICAgICAgICAgICAgICAgdmFyIGlnbm9yZUNoZWNrID0gKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVsZVNlcCkgJiYgY2hlY2tDbGFzcyhlbGVTZXAsIENMU19UQkFSSUdOT1JFKSk7XG4gICAgICAgICAgICAgICAgaWYgKCghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlbGVTZXApICYmIGNoZWNrQ2xhc3MoZWxlU2VwLCBDTFNfU0VQQVJBVE9SKSAmJiAhZWoyX2Jhc2VfMi5pc1Zpc2libGUoZWxlU2VwKSkgfHwgaWdub3JlQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcERpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGVsZVNlcC5zdHlsZS5kaXNwbGF5ID0gJ2luaGVyaXQnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlU2VwV2lkdGggPSBlbGVTZXAub2Zmc2V0V2lkdGggKyAocGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVTZXApLm1hcmdpblJpZ2h0KSAqIDIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldlNlcCA9IGVsZVNlcC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGVsV2lkICsgZWxlU2VwV2lkdGgpIDwgd2lkIHx8IGRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5FbGUuaW5zZXJ0QmVmb3JlKGVsLCBpbkVsZS5jaGlsZHJlblsoaW5keCArIGlnbm9yZUNvdW50KSAtIChpbmR4IC0gc2VwUHJpKV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHByZXZTZXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNlcC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldlNlcC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2VwLnN0eWxlLmRpc3BsYXkgPSBzZXBEaXNwbGF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZVNlcC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbkVsZS5pbnNlcnRCZWZvcmUoZWwsIGluRWxlLmNoaWxkcmVuWyhpbmR4ICsgaWdub3JlQ291bnQpIC0gKGluZHggLSBzZXBQcmkpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5FbGUuaW5zZXJ0QmVmb3JlKGVsLCBpbkVsZS5jaGlsZHJlblsoaW5keCArIGlnbm9yZUNvdW50KSAtIHByaUVsZUNudF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wb3B1cFJlZnJlc2ggPSBmdW5jdGlvbiAocG9wdXBFbGUsIGRlc3Ryb3kpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcG9wTmF2ID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHBvcE5hdikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbm5lckVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICBwb3B1cEVsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGVsZS5vZmZzZXRXaWR0aCAtIChwb3BOYXYub2Zmc2V0V2lkdGggKyBpbm5lckVsZS5vZmZzZXRXaWR0aCk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWxlUmVmcmVzaCh3aWR0aCwgcG9wdXBFbGUsIGRlc3Ryb3kpO1xuICAgICAgICAgICAgcG9wdXBFbGUuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgaWYgKHBvcHVwRWxlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCAmJiBwb3BOYXYgJiYgdGhpcy5wb3BPYmopIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaChwb3BOYXYpO1xuICAgICAgICAgICAgICAgIHBvcE5hdiA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHRoaXMucG9wT2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqID0gbnVsbDtcbiAgICAgICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdhcmlhLWhhc3BvcHVwJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdG9vbHBvcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5pZ25vcmVFbGVGZXRjaCA9IGZ1bmN0aW9uIChpbmRleCwgaW5uZXJFbGUpIHtcbiAgICAgICAgICAgIHZhciBpZ25vcmVFbGUgPSBbXS5zbGljZS5jYWxsKGlubmVyRWxlLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQ0xTX1RCQVJJR05PUkUpKTtcbiAgICAgICAgICAgIHZhciBpZ25vcmVJbnggPSBbXTtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICBpZiAoaWdub3JlRWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZ25vcmVFbGUuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZUlueC5wdXNoKFtdLnNsaWNlLmNhbGwoaW5uZXJFbGUuY2hpbGRyZW4pLmluZGV4T2YoZWxlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlnbm9yZUlueC5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsIDw9IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwRWxlUmVmcmVzaCA9IGZ1bmN0aW9uICh3aWR0aCwgcG9wdXBFbGUsIGRlc3Ryb3kpIHtcbiAgICAgICAgICAgIHZhciBlbGVTcGxpY2UgPSB0aGlzLnRiYXJFbGU7XG4gICAgICAgICAgICB2YXIgcHJpRWxlQ250O1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIGNoZWNrT3ZlcmZsb3c7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgdmFyIGlnbm9yZUNvdW50ID0gMDtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgZWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgIHZhciBlbFdpZHRoID0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGJ0blRleHQgPSBlbC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSQlROVEVYVCk7XG4gICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnZS10YnRuLWFsaWduJykgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSVEVYVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ0biA9IGVsLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoYnRuVGV4dCkgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSVEVYVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blRleHQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChidG5UZXh0KSAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1BPUFVQVEVYVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blRleHQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLm1pbldpZHRoID0gJzAlJztcbiAgICAgICAgICAgICAgICAgICAgZWxXaWR0aCA9IGVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUubWluV2lkdGggPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGJ0blRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG5UZXh0LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZWwgPT09IHRoaXNfMS50YmFyRWxlWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsV2lkdGggKz0gdGhpc18xLnRiYXJFbGVNcmduO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5wb3NpdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChlbFdpZHRoIDwgd2lkdGggfHwgZGVzdHJveSkge1xuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5taW5XaWR0aCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUE9QT1ZFUkZMT1cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKENMU19QT1BVUCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzXzEudGJhckVsZS5pbmRleE9mKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNfMS50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzXzEuaXRlbXNbaW5kZXhdLmFsaWduO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzXzEudGJhckFsZ0VsZVsocG9zICsgJ3MnKV0uaW5kZXhPZihlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVTcGxpY2UgPSB0aGlzXzEudGJhckFsZ0VsZVsocG9zICsgJ3MnKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckVsZSA9IHRoaXNfMS5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TICsgJyAuJyArICdlLXRvb2xiYXItJyArIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcEJlZm9yZVByaV8xID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZWxlU3BsaWNlLnNsaWNlKDAsIGluZGV4KS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk9WRVJGTE9XKSB8fCBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggLT0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcEJlZm9yZVByaV8xKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZ25vcmVDb3VudCA9IHRoaXNfMS5pZ25vcmVFbGVGZXRjaChpbmRleCwgaW5uZXJFbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFST1ZFUkZMT1cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEudGJhclByaVJlZihpbm5lckVsZSwgaW5kZXgsIHNlcEJlZm9yZVByaV8xLCBlbCwgZGVzdHJveSwgZWxXaWR0aCwgd2lkdGgsIGlnbm9yZUNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoIC09IGVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckVsZS5pbnNlcnRCZWZvcmUoZWwsIGlubmVyRWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggLT0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmlFbGVDbnQgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfVEJBUk9WRVJGTE9XLCB0aGlzXzEucG9wT2JqLmVsZW1lbnQpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmluc2VydEJlZm9yZShlbCwgaW5uZXJFbGUuY2hpbGRyZW5bKGluZGV4ICsgaWdub3JlQ291bnQpIC0gcHJpRWxlQ250XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAtPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImJyZWFrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IFtdLnNsaWNlLmNhbGwocG9wdXBFbGUuY2hpbGRyZW4pOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGVfMSA9IF9sb29wXzEoZWwpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZV8xID09PSBcImJyZWFrXCIpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2tPdmVyZmxvdyA9IHRoaXMuY2hlY2tPdmVyZmxvdyh0aGlzLmVsZW1lbnQsIHRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMU19JVEVNUylbMF0pO1xuICAgICAgICAgICAgaWYgKGNoZWNrT3ZlcmZsb3cgJiYgIWRlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW1vdmVQb3NpdGlvbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0pIHx8ICFpdGVtLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUlBPUykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShpdGVtLCBDTFNfVEJBUlBPUyk7XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtID0gW10uc2xpY2UuY2FsbChpdGVtLmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgaW5uZXJJdGVtWzFdLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIGlubmVySXRlbVsyXS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlZnJlc2hQb3NpdGlvbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIHRoaXMuYWRkKGl0ZW0sIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgIHRoaXMuaXRlbVBvc2l0aW9uaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLml0ZW1Qb3NpdGlvbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0pIHx8ICFpdGVtLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUlBPUykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9wdXBOYXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJJdGVtID0gW10uc2xpY2UuY2FsbChpdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJTQ1JPTEwpLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlubmVySXRlbSA9IFtdLnNsaWNlLmNhbGwoaXRlbS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtYXJnaW4gPSBpbm5lckl0ZW1bMF0ub2Zmc2V0V2lkdGggKyBpbm5lckl0ZW1bMl0ub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgdGJhcldpZCA9IHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIGlmIChwb3B1cE5hdikge1xuICAgICAgICAgICAgICAgIHRiYXJXaWQgLT0gcG9wdXBOYXYub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHBvcFdpZCA9IHBvcHVwTmF2Lm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICBpbm5lckl0ZW1bMl0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlUnRsID8gaW5uZXJJdGVtWzJdLnN0eWxlLmxlZnQgPSBwb3BXaWQgOiBpbm5lckl0ZW1bMl0uc3R5bGUucmlnaHQgPSBwb3BXaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGJhcldpZCA8PSBtYXJnaW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAoKCh0YmFyV2lkIC0gbWFyZ2luKSkgLSBpbm5lckl0ZW1bMV0ub2Zmc2V0V2lkdGgpIC8gMjtcbiAgICAgICAgICAgIGlubmVySXRlbVsxXS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICB2YXIgbXJnbiA9IChpbm5lckl0ZW1bMF0ub2Zmc2V0V2lkdGggKyB2YWx1ZSkgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVSdGwgPyBpbm5lckl0ZW1bMV0uc3R5bGUubWFyZ2luUmlnaHQgPSBtcmduIDogaW5uZXJJdGVtWzFdLnN0eWxlLm1hcmdpbkxlZnQgPSBtcmduO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS50YmFySXRlbUFsaWduID0gZnVuY3Rpb24gKGl0ZW0sIGl0ZW1FbGUsIHBvcykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBhbGlnbkRpdiA9IFtdO1xuICAgICAgICAgICAgYWxpZ25EaXYucHVzaChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfVEJBUkxFRlQgfSkpO1xuICAgICAgICAgICAgYWxpZ25EaXYucHVzaChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfVEJBUkNFTlRFUiB9KSk7XG4gICAgICAgICAgICBhbGlnbkRpdi5wdXNoKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19UQkFSUklHSFQgfSkpO1xuICAgICAgICAgICAgaWYgKHBvcyA9PT0gMCAmJiBpdGVtLmFsaWduICE9PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICBhbGlnbkRpdi5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUVsZS5hcHBlbmRDaGlsZChlbGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMudGJhckFsaWduID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChpdGVtRWxlLCBDTFNfVEJBUlBPUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpdGVtLmFsaWduICE9PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxpZ25FbGUgPSBpdGVtRWxlLmNoaWxkTm9kZXM7XG4gICAgICAgICAgICAgICAgdmFyIGxlZnRBbGlnbl8xID0gYWxpZ25EaXZbMF07XG4gICAgICAgICAgICAgICAgW10uc2xpY2UuY2FsbChhbGlnbkVsZSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGJhckFsZ0VsZS5sZWZ0cy5wdXNoKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgbGVmdEFsaWduXzEuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGl0ZW1FbGUuYXBwZW5kQ2hpbGQobGVmdEFsaWduXzEpO1xuICAgICAgICAgICAgICAgIGl0ZW1FbGUuYXBwZW5kQ2hpbGQoYWxpZ25EaXZbMV0pO1xuICAgICAgICAgICAgICAgIGl0ZW1FbGUuYXBwZW5kQ2hpbGQoYWxpZ25EaXZbMl0pO1xuICAgICAgICAgICAgICAgIHRoaXMudGJhckFsaWduID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChpdGVtRWxlLCBDTFNfVEJBUlBPUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmN0cmxUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmN0cmxUZW0gPSB0aGlzLnRyZ3RFbGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5hZGQodGhpcy50cmd0RWxlLCBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgdGhpcy50YmFyRWxlID0gW107XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGUgPSBbXS5zbGljZS5jYWxsKHRoaXMudHJndEVsZS5jaGlsZHJlbik7XG4gICAgICAgICAgICBpbm5lckVsZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlLnRhZ05hbWUgPT09ICdESVYnKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRiYXJFbGUucHVzaChlbGUpO1xuICAgICAgICAgICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZChlbGUsIENMU19JVEVNKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVySXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGl0ZW1FbGVEb207XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtO1xuICAgICAgICAgICAgdmFyIGlubmVyUG9zO1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICAgICAgICAgIGlmIChlbGUgJiYgZWxlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpdGVtRWxlRG9tID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRyZ3RFbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3RybFRlbXBsYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGUgJiYgaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICghaXRlbUVsZURvbSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtRWxlRG9tID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0lURU1TIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVySXRlbSA9IHRoaXMucmVuZGVyU3ViQ29tcG9uZW50KGl0ZW1zW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckVsZS5pbmRleE9mKGlubmVySXRlbSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJFbGUucHVzaChpbm5lckl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckl0ZW1BbGlnbihpdGVtc1tpXSwgaXRlbUVsZURvbSwgaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5uZXJQb3MgPSBpdGVtRWxlRG9tLnF1ZXJ5U2VsZWN0b3IoJy5lLXRvb2xiYXItJyArIGl0ZW1zW2ldLmFsaWduLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJQb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckFsZ0VsZVsoaXRlbXNbaV0uYWxpZ24gKyAncycpXS5wdXNoKGlubmVySXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lclBvcy5hcHBlbmRDaGlsZChpbm5lckl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUVsZURvbS5hcHBlbmRDaGlsZChpbm5lckl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChpdGVtRWxlRG9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuc2V0QXR0ciA9IGZ1bmN0aW9uIChhdHRyLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gT2JqZWN0LmtleXMoYXR0cik7XG4gICAgICAgICAgICB2YXIga2V5VmFsO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBrZXlWYWwgPSBrZXlbaV07XG4gICAgICAgICAgICAgICAga2V5VmFsID09PSAnY2xhc3MnID8gdGhpcy5hZGQoZWxlbWVudCwgYXR0cltrZXlWYWxdKSA6IGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleVZhbCwgYXR0cltrZXlWYWxdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZW5hYmxlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIGlzRW5hYmxlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBpdGVtcztcbiAgICAgICAgICAgIHZhciBsZW4gPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpc0VuYWJsZSkpIHtcbiAgICAgICAgICAgICAgICBpc0VuYWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZW5hYmxlID0gZnVuY3Rpb24gKGlzRW5hYmxlLCBlbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNFbmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0RJU0FCTEUpO1xuICAgICAgICAgICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZChDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAobGVuICYmIGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gW10uc2xpY2UuY2FsbChlbGVtZW50cyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZShpc0VuYWJsZSwgZWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaXNFbmFibGUgPyBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKGVsZW1lbnRzLCBDTFNfRElTQUJMRSkgOiBlajJfYmFzZV8yLmFkZENsYXNzKGVsZW1lbnRzLCBDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGVsZSA9IChsZW4gJiYgbGVuID09PSAxKSA/IGVsZW1lbnRzWzBdIDogaXRlbXM7XG4gICAgICAgICAgICAgICAgZW5hYmxlKGlzRW5hYmxlLCBlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5hZGRJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW1zO1xuICAgICAgICAgICAgdmFyIGl0ZW1zRGl2ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZTtcbiAgICAgICAgICAgIHZhciBpdGVtQWduID0gJ2xlZnQnO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlLmFsaWduKSAmJiBlLmFsaWduICE9PSAnbGVmdCcgJiYgaXRlbUFnbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1BZ24gPSBlLmFsaWduO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpdGVtc18xID0gaXRlbXM7IF9pIDwgaXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50eXBlID0gJ0J1dHRvbic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlubmVySXRlbXMgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfSVRFTSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpdGVtLmFsaWduID0gaXRlbUFnbjtcbiAgICAgICAgICAgICAgICBpbm5lckVsZSA9IHRoaXMucmVuZGVyU3ViQ29tcG9uZW50KGl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJFbGUubGVuZ3RoID49IGluZGV4ICYmIGlubmVySXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsZ0luZGV4ID0gaXRlbS5hbGlnblswXSA9PT0gJ2wnID8gMCA6IGl0ZW0uYWxpZ25bMF0gPT09ICdjJyA/IDEgOiAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZSA9IGVqMl9iYXNlXzIuY2xvc2VzdChpbm5lckl0ZW1zWzBdLCAnLicgKyBDTFNfSVRFTVMpLmNoaWxkcmVuW2FsZ0luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoaW5uZXJFbGUsIGVsZS5jaGlsZHJlbltpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFyQWxnRWxlWyhpdGVtLmFsaWduICsgJ3MnKV0uc3BsaWNlKGluZGV4LCAwLCBpbm5lckVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hQb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJJdGVtc1swXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpbm5lckVsZSwgaW5uZXJJdGVtc1tpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAwLCBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFyRWxlLnNwbGljZShpbmRleCwgMCwgaW5uZXJFbGUpO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldFdpZCA9IGl0ZW1zRGl2Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZW1zRGl2LnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW1vdmVJdGVtcyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBhcmdzO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbXMgPSBbXS5zbGljZS5jYWxsKGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNLCB0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGVsZW1lbnRzKSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHBhcnNlSW50KGFyZ3MudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbUJ5SW5kZXgoaW5kZXgsIGlubmVySXRlbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzICYmIGVsZW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IFtdLnNsaWNlLmNhbGwoZWxlbWVudHMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy50YmFyRWxlLmluZGV4T2YoZWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbUJ5SW5kZXgoaW5kZXgsIGlubmVySXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJJdGVtcyA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gKGVsZW1lbnRzICYmIGVsZW1lbnRzLmxlbmd0aCAmJiBlbGVtZW50cy5sZW5ndGggPT09IDEpID8gZWxlbWVudHNbMF0gOiBhcmdzO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGlubmVySXRlbXMuaW5kZXhPZihlbGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW1CeUluZGV4KGluZGV4LCBpbm5lckl0ZW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW1vdmVJdGVtQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCwgaW5uZXJJdGVtcykge1xuICAgICAgICAgICAgaWYgKHRoaXMudGJhckVsZVtpbmRleF0gJiYgaW5uZXJJdGVtc1tpbmRleF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlSWR4ID0gdGhpcy50YmFyRWxlLmluZGV4T2YoaW5uZXJJdGVtc1tpbmRleF0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhBZ24gPSB0aGlzLnRiYXJBbGdFbGVbKHRoaXMuaXRlbXNbZWxlSWR4XS5hbGlnbiArICdzJyldLmluZGV4T2YodGhpcy50YmFyRWxlW2VsZUlkeF0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJBbGdFbGVbKHRoaXMuaXRlbXNbZWxlSWR4XS5hbGlnbiArICdzJyldLnNwbGljZShpbmRleEFnbiwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKGlubmVySXRlbXNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZShlbGVJZHgsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMudGJhckVsZS5zcGxpY2UoZWxlSWR4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudGVtcGxhdGVSZW5kZXIgPSBmdW5jdGlvbiAodGVtcGxhdGVQcm9wLCBpbm5lckVsZSwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGl0ZW1UeXBlID0gaXRlbS50eXBlO1xuICAgICAgICAgICAgdmFyIGVsZU9iaiA9IHRlbXBsYXRlUHJvcDtcbiAgICAgICAgICAgIHZhciBpc0NvbXBvbmVudDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRlbXBsYXRlUHJvcCkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgaXNDb21wb25lbnQgPSB0eXBlb2YgKGVsZU9iai5hcHBlbmRUbykgPT09ICdmdW5jdGlvbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mICh0ZW1wbGF0ZVByb3ApID09PSAnc3RyaW5nJyB8fCAhaXNDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVGbiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gdGVtcGxhdGVQcm9wO1xuICAgICAgICAgICAgICAgIHZhbCA9ICh0eXBlb2YgKHRlbXBsYXRlUHJvcCkgPT09ICdzdHJpbmcnKSA/IHRlbXBsYXRlUHJvcC50cmltKCkgOiB0ZW1wbGF0ZVByb3A7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfNC5jb21waWxlKGVsZS5vdXRlckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbiA9IGVqMl9iYXNlXzQuY29tcGlsZSh2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGVtcEFycmF5ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZUZuKSkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wQXJyYXkgPSB0ZW1wbGF0ZUZuKHt9LCB0aGlzLCAndGVtcGxhdGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRlbXBBcnJheSkgJiYgdGVtcEFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgW10uc2xpY2UuY2FsbCh0ZW1wQXJyYXkpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVsZS50YWdOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckVsZS5hcHBlbmRDaGlsZChlbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpdGVtVHlwZSA9PT0gJ0lucHV0Jykge1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgaXRlbS5pZCA/IChlbGUuaWQgPSBpdGVtLmlkKSA6IChlbGUuaWQgPSBlajJfYmFzZV80LmdldFVuaXF1ZUlEKCd0YnItaXB0JykpO1xuICAgICAgICAgICAgICAgIGlubmVyRWxlLmFwcGVuZENoaWxkKGVsZSk7XG4gICAgICAgICAgICAgICAgZWxlT2JqLmFwcGVuZFRvKGVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgQ0xTX1RFTVBMQVRFKTtcbiAgICAgICAgICAgIHRoaXMudGJhckVsZS5wdXNoKGlubmVyRWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuYnV0dG9uUmVuZGVyaW5nID0gZnVuY3Rpb24gKGl0ZW0sIGlubmVyRWxlKSB7XG4gICAgICAgICAgICB2YXIgZG9tID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7IGNsYXNzTmFtZTogQ0xTX1RCQVJCVE4gfSk7XG4gICAgICAgICAgICBkb20uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICAgICAgdmFyIHRleHRTdHIgPSBpdGVtLnRleHQ7XG4gICAgICAgICAgICB2YXIgaWNvbkNzcztcbiAgICAgICAgICAgIHZhciBpY29uUG9zO1xuICAgICAgICAgICAgaXRlbS5pZCA/IChkb20uaWQgPSBpdGVtLmlkKSA6IGRvbS5pZCA9IGVqMl9iYXNlXzQuZ2V0VW5pcXVlSUQoJ2UtdGJyLWJ0bicpO1xuICAgICAgICAgICAgdmFyIGJ0blR4dCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXRiYXItYnRuLXRleHQnIH0pO1xuICAgICAgICAgICAgaWYgKHRleHRTdHIpIHtcbiAgICAgICAgICAgICAgICBidG5UeHQuaW5uZXJIVE1MID0gdGV4dFN0cjtcbiAgICAgICAgICAgICAgICBkb20uYXBwZW5kQ2hpbGQoYnRuVHh0KTtcbiAgICAgICAgICAgICAgICBkb20uY2xhc3NMaXN0LmFkZCgnZS10YnRuLXR4dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsICdlLXRidG4tYWxpZ24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnByZWZpeEljb24gfHwgaXRlbS5zdWZmaXhJY29uKSB7XG4gICAgICAgICAgICAgICAgaWYgKChpdGVtLnByZWZpeEljb24gJiYgaXRlbS5zdWZmaXhJY29uKSB8fCBpdGVtLnByZWZpeEljb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNzcyA9IGl0ZW0ucHJlZml4SWNvbiArICcgZS1pY29ucyc7XG4gICAgICAgICAgICAgICAgICAgIGljb25Qb3MgPSAnbGVmdCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ3NzID0gaXRlbS5zdWZmaXhJY29uICsgJyBlLWljb25zJztcbiAgICAgICAgICAgICAgICAgICAgaWNvblBvcyA9ICdyaWdodCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IGVqMl9idXR0b25zXzEuQnV0dG9uKHsgaWNvbkNzczogaWNvbkNzcywgaWNvblBvc2l0aW9uOiBpY29uUG9zIH0sIGRvbSk7XG4gICAgICAgICAgICBpZiAoaXRlbS53aWR0aCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUoZG9tLCB7ICd3aWR0aCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdChpdGVtLndpZHRoKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb207XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlclN1YkNvbXBvbmVudCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGU7XG4gICAgICAgICAgICB2YXIgZG9tO1xuICAgICAgICAgICAgaW5uZXJFbGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSVRFTSB9KTtcbiAgICAgICAgICAgIGlubmVyRWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRiYXJFbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRiYXJFbGUgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmh0bWxBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyKGl0ZW0uaHRtbEF0dHJpYnV0ZXMsIGlubmVyRWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnRvb2x0aXBUZXh0KSB7XG4gICAgICAgICAgICAgICAgaW5uZXJFbGUuc2V0QXR0cmlidXRlKCd0aXRsZScsIGl0ZW0udG9vbHRpcFRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICBpbm5lckVsZS5jbGFzc05hbWUgPSBpbm5lckVsZS5jbGFzc05hbWUgKyAnICcgKyBpdGVtLmNzc0NsYXNzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlUmVuZGVyKGl0ZW0udGVtcGxhdGUsIGlubmVyRWxlLCBpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoaXRlbS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0J1dHRvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBkb20gPSB0aGlzLmJ1dHRvblJlbmRlcmluZyhpdGVtLCBpbm5lckVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb20uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoZG9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5pdGVtQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU2VwYXJhdG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfU0VQQVJBVE9SKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnNob3dUZXh0T24pIHtcbiAgICAgICAgICAgICAgICB2YXIgc1R4dCA9IGl0ZW0uc2hvd1RleHRPbjtcbiAgICAgICAgICAgICAgICBpZiAoc1R4dCA9PT0gJ1Rvb2xiYXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfUE9QVVBURVhUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsICdlLXRidG4tYWxpZ24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc1R4dCA9PT0gJ092ZXJmbG93Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgQ0xTX1RCQVJURVhUKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5vdmVyZmxvdykge1xuICAgICAgICAgICAgICAgIHZhciBvdmVyZmxvdyA9IGl0ZW0ub3ZlcmZsb3c7XG4gICAgICAgICAgICAgICAgaWYgKG92ZXJmbG93ID09PSAnU2hvdycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsIENMU19UQkFST1ZFUkZMT1cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvdmVyZmxvdyA9PT0gJ0hpZGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5uZXJFbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgQ0xTX1BPUE9WRVJGTE9XKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbm5lckVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuaXRlbUNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlU3dpdGNoKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmFjdGl2ZUVsZVN3aXRjaCA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlUmVtb3ZlKGVsZS5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZS5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5hY3RpdmVFbGVSZW1vdmUgPSBmdW5jdGlvbiAoY3VyRWxlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5hY3RpdmVFbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGUgPSBjdXJFbGU7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRyZ3RFbGUpICYmICFjdXJFbGUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RFTVBMQVRFKSkge1xuICAgICAgICAgICAgICAgIGN1ckVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3QoW10pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd0b29sYmFyJztcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMudGJSZXNpemUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGVja092ZXJmbG93ID0gdGhpcy5jaGVja092ZXJmbG93KGVsZSwgZWxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ0xTX0lURU1TKVswXSk7XG4gICAgICAgICAgICBpZiAoIWNoZWNrT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lIU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hlY2tPdmVyZmxvdyAmJiB0aGlzLnNjcm9sbE1vZHVsZSAmJiAodGhpcy5vZmZzZXRXaWQgPT09IGVsZS5vZmZzZXRXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vZmZzZXRXaWQgPiBlbGUub2Zmc2V0V2lkdGggfHwgY2hlY2tPdmVyZmxvdykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wb3BPYmopIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwUmVmcmVzaCh0aGlzLnBvcE9iai5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vZmZzZXRXaWQgPSBlbGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB0aGlzLnRiUmVzaXplID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciB0RWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpdGVtcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lJdGVtcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJJdGVtcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPdmVyZmxvd01vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lkID0gdEVsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodEVsZSwgeyAnd2lkdGgnOiBlajJfYmFzZV80LmZvcm1hdFVuaXQobmV3UHJvcC53aWR0aCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucG9wT2JqICYmIHdpZCA8IHRFbGUub2Zmc2V0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwUmVmcmVzaCh0aGlzLnBvcE9iai5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICdoZWlnaHQnOiBlajJfYmFzZV80LmZvcm1hdFVuaXQobmV3UHJvcC5oZWlnaHQpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ292ZXJmbG93TW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQodEVsZSwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hPdmVyZmxvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wLmVuYWJsZVJ0bCA/IHRoaXMuYWRkKHRFbGUsIENMU19SVEwpIDogdGhpcy5yZW1vdmUodEVsZSwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zY3JvbGxNb2R1bGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcC5lbmFibGVSdGwgPyB0aGlzLmFkZCh0aGlzLnNjcm9sbE1vZHVsZS5lbGVtZW50LCBDTFNfUlRMKSA6IHRoaXMucmVtb3ZlKHRoaXMuc2Nyb2xsTW9kdWxlLmVsZW1lbnQsIENMU19SVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucG9wT2JqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3AuZW5hYmxlUnRsID8gdGhpcy5hZGQodGhpcy5wb3BPYmouZWxlbWVudCwgQ0xTX1JUTCkgOiB0aGlzLnJlbW92ZSh0aGlzLnBvcE9iai5lbGVtZW50LCBDTFNfUlRMKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbVBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUb29sYmFyO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBJdGVtKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcIml0ZW1zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTY3JvbGxhYmxlJylcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJvdmVyZmxvd01vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJlbmFibGVSdGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwiY2xpY2tlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcImRlc3Ryb3llZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJiZWZvcmVDcmVhdGVcIiwgdm9pZCAwKTtcbiAgICBUb29sYmFyID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzUuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgVG9vbGJhcik7XG4gICAgZXhwb3J0cy5Ub29sYmFyID0gVG9vbGJhcjtcbiAgICBleHBvcnRzLnRvb2xiYXJCdWlsZGVyID0gZWoyX2Jhc2VfNS5DcmVhdGVCdWlsZGVyKFRvb2xiYXIpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90b29sYmFyL3Rvb2xiYXIuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIlxuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfN19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIlxuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2FjY29yZGlvblwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGFjY29yZGlvbl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChhY2NvcmRpb25fMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FjY29yZGlvbi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9iYXNlXzYpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENMU19BQ1JETl9ST09UID0gJ2UtYWNyZG4tcm9vdCc7XG4gICAgdmFyIENMU19ST09UID0gJ2UtYWNjb3JkaW9uJztcbiAgICB2YXIgQ0xTX0lURU0gPSAnZS1hY3Jkbi1pdGVtJztcbiAgICB2YXIgQ0xTX0lURU1GT0NVUyA9ICdlLWl0ZW0tZm9jdXMnO1xuICAgIHZhciBDTFNfSVRFTUhJREUgPSAnZS1oaWRlJztcbiAgICB2YXIgQ0xTX0hFQURFUiA9ICdlLWFjcmRuLWhlYWRlcic7XG4gICAgdmFyIENMU19IRUFERVJJQ04gPSAnZS1hY3Jkbi1oZWFkZXItaWNvbic7XG4gICAgdmFyIENMU19IRUFERVJDVE4gPSAnZS1hY3Jkbi1oZWFkZXItY29udGVudCc7XG4gICAgdmFyIENMU19DT05URU5UID0gJ2UtYWNyZG4tcGFuZWwnO1xuICAgIHZhciBDTFNfQ1RFTlQgPSAnZS1jb250ZW50JztcbiAgICB2YXIgQ0xTX1RPT0dMRUlDTiA9ICdlLXRvZ2dsZS1pY29uJztcbiAgICB2YXIgQ0xTX0NPTExBUFNFSUNOID0gJ2UtdGdsLWNvbGxhcHNlLWljb24gZS1pY29ucyc7XG4gICAgdmFyIENMU19FWFBBTkRJQ04gPSAnZS1leHBhbmQtaWNvbic7XG4gICAgdmFyIENMU19SVEwgPSAnZS1ydGwnO1xuICAgIHZhciBDTFNfQ1ROSElERSA9ICdlLWNvbnRlbnQtaGlkZSc7XG4gICAgdmFyIENMU19TTENUID0gJ2Utc2VsZWN0JztcbiAgICB2YXIgQ0xTX1NMQ1RFRCA9ICdlLXNlbGVjdGVkJztcbiAgICB2YXIgQ0xTX0FDVElWRSA9ICdlLWFjdGl2ZSc7XG4gICAgdmFyIENMU19BTklNQVRFID0gJ2UtYW5pbWF0ZSc7XG4gICAgdmFyIENMU19ESVNBQkxFID0gJ2Utb3ZlcmxheSc7XG4gICAgdmFyIENMU19UT0dBTklNQVRFID0gJ2UtdG9nZ2xlLWFuaW1hdGlvbic7XG4gICAgdmFyIENMU19ORVNUID0gJ2UtbmVzdGVkJztcbiAgICB2YXIgQ0xTX0VYUEFORFNUQVRFID0gJ2UtZXhwYW5kLXN0YXRlJztcbiAgICB2YXIgQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY29yZGlvbkFjdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzQuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTbGlkZURvd24nKVxuICAgIF0sIEFjY29yZGlvbkFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJlZmZlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSg0MDApXG4gICAgXSwgQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImR1cmF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2xpbmVhcicpXG4gICAgXSwgQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImVhc2luZ1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MgPSBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncztcbiAgICB2YXIgQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY29yZGlvbkFuaW1hdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzQuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV81LkNvbXBsZXgoeyBlZmZlY3Q6ICdTbGlkZVVwJywgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnbGluZWFyJyB9LCBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncylcbiAgICBdLCBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sbGFwc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNS5Db21wbGV4KHsgZWZmZWN0OiAnU2xpZGVEb3duJywgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnbGluZWFyJyB9LCBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncylcbiAgICBdLCBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZXhwYW5kXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5BY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncyA9IEFjY29yZGlvbkFuaW1hdGlvblNldHRpbmdzO1xuICAgIHZhciBBY2NvcmRpb25JdGVtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjY29yZGlvbkl0ZW0sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY29yZGlvbkl0ZW0oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFjY29yZGlvbkl0ZW07XG4gICAgfShlajJfYmFzZV80LkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh1bmRlZmluZWQpXG4gICAgXSwgQWNjb3JkaW9uSXRlbS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHVuZGVmaW5lZClcbiAgICBdLCBBY2NvcmRpb25JdGVtLnByb3RvdHlwZSwgXCJoZWFkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh1bmRlZmluZWQpXG4gICAgXSwgQWNjb3JkaW9uSXRlbS5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh1bmRlZmluZWQpXG4gICAgXSwgQWNjb3JkaW9uSXRlbS5wcm90b3R5cGUsIFwiaWNvbkNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEFjY29yZGlvbkl0ZW0ucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5BY2NvcmRpb25JdGVtID0gQWNjb3JkaW9uSXRlbTtcbiAgICB2YXIgQWNjb3JkaW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjY29yZGlvbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQWNjb3JkaW9uKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5rZXlDb25maWdzID0ge1xuICAgICAgICAgICAgICAgIG1vdmVVcDogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVEb3duOiAnZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBlbnRlcjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBzcGFjZTogJ3NwYWNlJyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmlzRGVzdHJveSA9IHRydWU7XG4gICAgICAgICAgICB3aGlsZSAoZWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQ2hpbGQoZWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHJndEVsZSkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLmN0cmxUZW0uZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQodGhpcy5jdHJsVGVtLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICBbJ2FyaWEtZGlzYWJsZWQnLCAnYXJpYS1tdWx0aXNlbGVjdGFibGUnLCAncm9sZSddLmZvckVhY2goZnVuY3Rpb24gKGF0dHJiKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG5lc3RlZCA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0aGlzLmVsZW1lbnQsICcuJyArIENMU19DT05URU5UKTtcbiAgICAgICAgICAgIHRoaXMuaXNOZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRGVzdHJveSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKG5lc3RlZCkpIHtcbiAgICAgICAgICAgICAgICBuZXN0ZWQuY2xhc3NMaXN0LmFkZChDTFNfTkVTVCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc05lc3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfQUNSRE5fUk9PVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmVsZW1lbnQsIENMU19SVEwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1zID0gW107XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGVsZSwgdmFsKSB7XG4gICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZCh2YWwpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlbGUsIHZhbCkge1xuICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUodmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udHJvbCgpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGVqMl9iYXNlXzYuZm9ybWF0VW5pdCh0aGlzLndpZHRoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlajJfYmFzZV82LmZvcm1hdFVuaXQodGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ3dpZHRoJzogd2lkdGgsICdoZWlnaHQnOiBoZWlnaHQgfSk7XG4gICAgICAgICAgICB2YXIgYXJpYUF0dHIgPSB7XG4gICAgICAgICAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnLCAncm9sZSc6ICdwcmVzZW50YXRpb24nLCAnYXJpYS1tdWx0aXNlbGVjdGFibGUnOiAndHJ1ZSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5leHBhbmRlZEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRFeHBhbmQgPSB0aGlzLmV4cGFuZGVkSXRlbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCBhcmlhQXR0cik7XG4gICAgICAgICAgICBpZiAodGhpcy5leHBhbmRNb2RlID09PSAnU2luZ2xlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUucmVuZGVyQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudHJndEVsZSA9ICh0aGlzLmVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkgPyBlajJfYmFzZV8zLnNlbGVjdCgnZGl2JywgdGhpcy5lbGVtZW50KSA6IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRJdGVtRXhwYW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMua2V5TW9kdWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5TW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmVzdGVkICYmICF0aGlzLmlzRGVzdHJveSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmlwcGxlRWZmZWN0KHRoaXMuZWxlbWVudCwgeyBzZWxlY3RvcjogJy4nICsgQ0xTX0hFQURFUiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc05lc3RlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5TW9kdWxlID0gbmV3IGVqMl9iYXNlXzEuS2V5Ym9hcmRFdmVudHModGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlBY3Rpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGtleUNvbmZpZ3M6IHRoaXMua2V5Q29uZmlncyxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAna2V5ZG93bidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5mb2N1c0luID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfSVRFTUZPQ1VTKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5mb2N1c091dCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0lURU1GT0NVUyk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuY3RybFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY3RybFRlbSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGVzID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFkZENsYXNzKGlubmVyRWxlcywgW0NMU19JVEVNXSk7XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKGlubmVyRWxlcykuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBlbC5pZCA9IGVqMl9iYXNlXzIuZ2V0VW5pcXVlSUQoJ2FjcmRuX2l0ZW0nKTtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGQoZWwuY2hpbGRyZW5bMF0sIENMU19IRUFERVIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gZWwuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhoZWFkZXIsIHsgJ3RhYmluZGV4JzogJzAnLCAncm9sZSc6ICdoZWFkaW5nJywgJ2FyaWEtbGV2ZWwnOiBpbm5lckVsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5pZCA9IGVqMl9iYXNlXzIuZ2V0VW5pcXVlSUQoJ2FjcmRuX2hlYWRlcicpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoaGVhZGVyLCAnZm9jdXMnLCBfdGhpcy5mb2N1c0luLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChoZWFkZXIsICdibHVyJywgX3RoaXMuZm9jdXNPdXQsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlckVsZSA9IGhlYWRlci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlckVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyRWxlLmNsYXNzTGlzdC5hZGQoQ0xTX0hFQURFUkNUTik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGVsLmNoaWxkcmVuWzFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5pZCA9IGVqMl9iYXNlXzIuZ2V0VW5pcXVlSUQoJ2FjcmRuX3BhbmVsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgY29udGVudC5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoQ0xTX1NMQ1QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5bMF0uYXBwZW5kQ2hpbGQoX3RoaXMudG9nZ2xlSWNvbkdlbmVyYXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY29udGVudCwgW0NMU19DT05URU5ULCBDTFNfQ1ROSElERV0sIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhjb250ZW50LCB7ICdhcmlhLWxhYmVsbGVkYnknOiBoZWFkZXIuaWQsICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoQ0xTX0NURU5UKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnRvZ2dsZUljb25HZW5lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0Z2xJY29uID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RPT0dMRUlDTiB9KTtcbiAgICAgICAgICAgIHZhciBoZHJDb2xJY29uID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IENMU19DT0xMQVBTRUlDTiB9KTtcbiAgICAgICAgICAgIHRnbEljb24uYXBwZW5kQ2hpbGQoaGRyQ29sSWNvbik7XG4gICAgICAgICAgICByZXR1cm4gdGdsSWNvbjtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5pbml0SXRlbUV4cGFuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSB0aGlzLmluaXRFeHBhbmQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmV4cGFuZE1vZGUgPT09ICdTaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKHRydWUsIHRoaXMuaW5pdEV4cGFuZFtsZW4gLSAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kSXRlbSh0cnVlLCB0aGlzLmluaXRFeHBhbmRbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5yZW5kZXJJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuaW5pdEV4cGFuZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRFeHBhbmQgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuaXRlbXM7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQodGhpcy50cmd0RWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3RybFRlbXBsYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGUgJiYgaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVySXRlbSA9IF90aGlzLnJlbmRlcklubmVySXRlbShpdGVtLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChpbm5lckl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJJdGVtLmNoaWxkRWxlbWVudENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGlubmVySXRlbS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IRUFERVIpLCAnZm9jdXMnLCBfdGhpcy5mb2N1c0luLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoaW5uZXJJdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0hFQURFUiksICdibHVyJywgX3RoaXMuZm9jdXNPdXQsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRyZ3QgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7fTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciB0Z2xJY29uO1xuICAgICAgICAgICAgdmFyIGFjcmRFbGUgPSBlajJfYmFzZV8zLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX1JPT1QpO1xuICAgICAgICAgICAgaWYgKGFjcmRFbGUgIT09IHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyZ3QuY2xhc3NMaXN0LmFkZCgnZS10YXJnZXQnKTtcbiAgICAgICAgICAgIHZhciBhY3Jkbkl0ZW0gPSBlajJfYmFzZV8zLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgdmFyIGFjcmRuSGRyID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19IRUFERVIpO1xuICAgICAgICAgICAgdmFyIGFjcmRuQ3RuID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19DT05URU5UKTtcbiAgICAgICAgICAgIGlmIChhY3Jkbkl0ZW0gJiYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoYWNyZG5IZHIpIHx8IGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoYWNyZG5DdG4pKSkge1xuICAgICAgICAgICAgICAgIGFjcmRuSGRyID0gYWNyZG5JdGVtLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgIGFjcmRuQ3RuID0gYWNyZG5JdGVtLmNoaWxkcmVuWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFjcmRuSGRyKSB7XG4gICAgICAgICAgICAgICAgdGdsSWNvbiA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19UT09HTEVJQ04sIGFjcmRuSGRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhY3JkbkN0bkl0ZW07XG4gICAgICAgICAgICBpZiAoYWNyZG5DdG4pIHtcbiAgICAgICAgICAgICAgICBhY3JkbkN0bkl0ZW0gPSBlajJfYmFzZV8zLmNsb3Nlc3QoYWNyZG5DdG4sICcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhY3JkQWN0aXZlID0gW107XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0SW5kZXhCeUl0ZW0oYWNyZG5JdGVtKTtcbiAgICAgICAgICAgIGlmIChhY3JkbkN0bkl0ZW0pIHtcbiAgICAgICAgICAgICAgICBldmVudEFyZ3MuaXRlbSA9IHRoaXMuaXRlbXNbdGhpcy5nZXRJbmRleEJ5SXRlbShhY3JkbkN0bkl0ZW0pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50QXJncy5vcmlnaW5hbEV2ZW50ID0gZTtcbiAgICAgICAgICAgIHZhciBjdG5DaGVjayA9ICFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRnbEljb24pICYmIGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQodGhpcy50cmd0RWxlKSAmJiBhY3Jkbkl0ZW0uY2hpbGRFbGVtZW50Q291bnQgPD0gMTtcbiAgICAgICAgICAgIGlmIChjdG5DaGVjayAmJiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChhY3JkbkN0bikgfHwgIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVE9PR0xFSUNOLCBhY3JkbkN0bkl0ZW0pKSkpIHtcbiAgICAgICAgICAgICAgICBhY3Jkbkl0ZW0uYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50UmVuZGVyaW5nKGluZGV4KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhQXR0clVwZGF0ZShhY3Jkbkl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbGlja2VkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIHZhciBjbnRjbGtDaGVjayA9IChhY3JkbkN0biAmJiAhZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8zLnNlbGVjdCgnLmUtdGFyZ2V0JywgYWNyZG5DdG4pKSk7XG4gICAgICAgICAgICBjbnRjbGtDaGVjayA9IGNudGNsa0NoZWNrICYmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19ST09ULCBhY3JkbkN0bikpIHx8ICEoZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19ST09UKSA9PT0gdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICB0cmd0LmNsYXNzTGlzdC5yZW1vdmUoJ2UtdGFyZ2V0Jyk7XG4gICAgICAgICAgICBpZiAodHJndC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0NPTlRFTlQpIHx8IHRyZ3QuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19DVEVOVCkgfHwgY250Y2xrQ2hlY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjcmRBY3RpdmUucHVzaChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgYWNyZEFuaUVsZSA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQ0xTX0lURU0gKyAnIFsnICsgQ0xTX0FOSU1BVEUgKyAnXScpKTtcbiAgICAgICAgICAgIGlmIChhY3JkQW5pRWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFjcmRBbmlFbGVfMSA9IGFjcmRBbmlFbGU7IF9pIDwgYWNyZEFuaUVsZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBhY3JkQW5pRWxlXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICBhY3JkQWN0aXZlLnB1c2goZWwucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNhbWVDb250ZW50Q2hlY2sgPSBhY3JkQWN0aXZlLmluZGV4T2YoYWNyZG5DdG5JdGVtKSAhPT0gLTEgJiYgYWNyZG5DdG4uZ2V0QXR0cmlidXRlKCdlLWFuaW1hdGUnKSA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgdmFyIHNhbWVIZWFkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChhY3Jkbkl0ZW0pICYmICFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGFjcmRuSGRyKSkge1xuICAgICAgICAgICAgICAgIHZhciBhY3JkbkN0bl8xID0gZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIGFjcmRuSXRlbSk7XG4gICAgICAgICAgICAgICAgdmFyIGFjcmRuUm9vdCA9IGVqMl9iYXNlXzMuY2xvc2VzdChhY3Jkbkl0ZW0sICcuJyArIENMU19BQ1JETl9ST09UKTtcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kU3RhdGUgPSBhY3JkblJvb3QucXVlcnlTZWxlY3RvcignLicgKyBDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGFjcmRuQ3RuXzEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2FtZUhlYWRlciA9IChleHBhbmRTdGF0ZSA9PT0gYWNyZG5JdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc1Zpc2libGUoYWNyZG5DdG5fMSkgJiYgKCFzYW1lQ29udGVudENoZWNrIHx8IGFjcmRuQ3RuSXRlbS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NMQ1RFRCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UoYWNyZG5DdG5fMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGFjcmRBY3RpdmUubGVuZ3RoID4gMCkgJiYgdGhpcy5leHBhbmRNb2RlID09PSAnU2luZ2xlJyAmJiAhc2FtZUNvbnRlbnRDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNyZEFjdGl2ZS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlKGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19DT05URU5ULCBlbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0VYUEFORFNUQVRFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kKGFjcmRuQ3RuXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZXhwYW5kU3RhdGUpICYmICFzYW1lSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZFN0YXRlLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0VYUEFORFNUQVRFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZWxlTW92ZUZvY3VzID0gZnVuY3Rpb24gKGFjdGlvbiwgcm9vdCwgdHJndCkge1xuICAgICAgICAgICAgdmFyIGNsc3Q7XG4gICAgICAgICAgICB2YXIgY2xzdEl0ZW0gPSBlajJfYmFzZV8zLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgaWYgKHRyZ3QgPT09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICBjbHN0ID0gKChhY3Rpb24gPT09ICdtb3ZlVXAnID8gdHJndC5sYXN0RWxlbWVudENoaWxkIDogdHJndCkucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSEVBREVSKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0cmd0LmNsYXNzTGlzdC5jb250YWlucyhDTFNfSEVBREVSKSkge1xuICAgICAgICAgICAgICAgIGNsc3RJdGVtID0gKGFjdGlvbiA9PT0gJ21vdmVVcCcgPyBjbHN0SXRlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIDogY2xzdEl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoY2xzdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2xzdCA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19IRUFERVIsIGNsc3RJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2xzdCkge1xuICAgICAgICAgICAgICAgIGNsc3QuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5rZXlBY3Rpb25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBjbHN0O1xuICAgICAgICAgICAgdmFyIHJvb3QgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgdHJndCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVVwJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVNb3ZlRm9jdXMoZS5hY3Rpb24sIHJvb3QsIHRyZ3QpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlRG93bic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlTW92ZUZvY3VzKGUuYWN0aW9uLCByb290LCB0cmd0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3BhY2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHRyZ3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoY29udGVudCkgJiYgY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0NPTlRFTlQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5nZXRBdHRyaWJ1dGUoJ2UtYW5pbWF0ZScpICE9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmd0LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmd0LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgY2xzdCA9IGUuYWN0aW9uID09PSAnaG9tZScgPyByb290LmZpcnN0RWxlbWVudENoaWxkLmNoaWxkcmVuWzBdIDogcm9vdC5sYXN0RWxlbWVudENoaWxkLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgICAgICBjbHN0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmhlYWRlckVsZUdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19IRUFERVIsIGlkOiBlajJfYmFzZV8yLmdldFVuaXF1ZUlEKCdhY3Jkbl9oZWFkZXInKSB9KTtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0ciA9IHtcbiAgICAgICAgICAgICAgICAndGFiaW5kZXgnOiAnMCcsICdyb2xlJzogJ2hlYWRpbmcnLCAnYXJpYS1leHBhbmRlZCc6ICdmYWxzZScsICdhcmlhLXNlbGVjdGVkJzogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICAnYXJpYS1kaXNhYmxlZCc6ICdmYWxzZScsICdhcmlhLWxldmVsJzogdGhpcy5pdGVtcy5sZW5ndGgudG9TdHJpbmcoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhoZWFkZXIsIGFyaWFBdHRyKTtcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXI7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUucmVuZGVySW5uZXJJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGU7XG4gICAgICAgICAgICBpbm5lckVsZSA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JVEVNIH0pO1xuICAgICAgICAgICAgaW5uZXJFbGUuaWQgPSBlajJfYmFzZV8yLmdldFVuaXF1ZUlEKCdhY3Jkbl9pdGVtJyk7XG4gICAgICAgICAgICBpZiAoaXRlbS5oZWFkZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3RuRWxlID0gdGhpcy5oZWFkZXJFbGVHZW5lcmF0ZSgpO1xuICAgICAgICAgICAgICAgIHZhciBoZHJFbGUgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSEVBREVSQ1ROIH0pO1xuICAgICAgICAgICAgICAgIGN0bkVsZS5hcHBlbmRDaGlsZChoZHJFbGUpO1xuICAgICAgICAgICAgICAgIGN0bkVsZS5hcHBlbmRDaGlsZCh0aGlzLmZldGNoRWxlbWVudChoZHJFbGUsIGl0ZW0uaGVhZGVyLCBpbmRleCwgdHJ1ZSkpO1xuICAgICAgICAgICAgICAgIGlubmVyRWxlLmFwcGVuZENoaWxkKGN0bkVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaGRyID0gZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgaW5uZXJFbGUpO1xuICAgICAgICAgICAgaWYgKGl0ZW0uZXhwYW5kZWQgJiYgIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpICYmICghdGhpcy5lbmFibGVQZXJzaXN0ZW5jZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0RXhwYW5kLmluZGV4T2YoaW5kZXgpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRFeHBhbmQucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICBpbm5lckVsZS5jbGFzc0xpc3QuYWRkKGl0ZW0uY3NzQ2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uaWNvbkNzcykge1xuICAgICAgICAgICAgICAgIHZhciBoZHJJY25FbGUgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSEVBREVSSUNOIH0pO1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IGl0ZW0uaWNvbkNzcyArICcgZS1pY29ucycgfSk7XG4gICAgICAgICAgICAgICAgaGRySWNuRWxlLmFwcGVuZENoaWxkKGljb24pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGhkcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaGRyID0gdGhpcy5oZWFkZXJFbGVHZW5lcmF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBoZHIuYXBwZW5kQ2hpbGQoaGRySWNuRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoaGRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhkci5pbnNlcnRCZWZvcmUoaGRySWNuRWxlLCBoZHIuY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uY29udGVudCkge1xuICAgICAgICAgICAgICAgIHZhciBoZHJJY29uID0gdGhpcy50b2dnbGVJY29uR2VuZXJhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChoZHIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkciA9IHRoaXMuaGVhZGVyRWxlR2VuZXJhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoaGRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGRyLmFwcGVuZENoaWxkKGhkckljb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfU0xDVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJFbGU7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZmV0Y2hFbGVtZW50ID0gZnVuY3Rpb24gKGVsZSwgdmFsdWUsIGluZGV4LCBpc0hlYWRlcikge1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm47XG4gICAgICAgICAgICB2YXIgdGVtU3RyaW5nO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWx1ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVWYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtU3RyaW5nID0gZWxlVmFsLm91dGVySFRNTC50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUodGVtU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5kZXRhY2goZWxlVmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRlbXBsYXRlRm4pICYmIHRlbXBsYXRlRm4oKS5sZW5ndGggPiAwICYmICEoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZUZuKClbMF0udGFnTmFtZSkgJiYgdGVtcGxhdGVGbigpLmxlbmd0aCA9PT0gMSkpIHtcbiAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRlbXBsYXRlRm4oKSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVsLnRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQodGVtU3RyaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLmhlYWRlciA9IHRlbVN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLmNvbnRlbnQgPSB0ZW1TdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGUuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmFyaWFBdHRyVXBkYXRlID0gZnVuY3Rpb24gKGl0ZW1FbGUpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSBlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCBpdGVtRWxlKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIGl0ZW1FbGUpO1xuICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGNvbnRlbnQuaWQpO1xuICAgICAgICAgICAgY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWxsZWRieScsIGhlYWRlci5pZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuY29udGVudFJlbmRlcmluZyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLml0ZW1zW2luZGV4XS5jb250ZW50O1xuICAgICAgICAgICAgdmFyIGl0ZW1jbnQgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfQ09OVEVOVCArICcgJyArIENMU19DVE5ISURFLCBpZDogZWoyX2Jhc2VfMi5nZXRVbmlxdWVJRCgnYWNyZG5fcGFuZWwnKSB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhpdGVtY250LCB7ICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9KTtcbiAgICAgICAgICAgIHZhciBjdG4gPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfQ1RFTlQgfSk7XG4gICAgICAgICAgICBpdGVtY250LmFwcGVuZENoaWxkKHRoaXMuZmV0Y2hFbGVtZW50KGN0biwgY29udGVudCwgaW5kZXgsIGZhbHNlKSk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbWNudDtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmQgPSBmdW5jdGlvbiAodHJndCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncztcbiAgICAgICAgICAgIHZhciB0cmd0SXRlbUVsZSA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0cmd0LCAnLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0cmd0KSB8fCAoZWoyX2Jhc2VfMy5pc1Zpc2libGUodHJndCkgJiYgdHJndC5nZXRBdHRyaWJ1dGUoJ2UtYW5pbWF0ZScpICE9PSAndHJ1ZScpIHx8IHRyZ3RJdGVtRWxlLmNsYXNzTGlzdC5jb250YWlucyhDTFNfRElTQUJMRSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWNyZG5Sb290ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3RJdGVtRWxlLCAnLicgKyBDTFNfQUNSRE5fUk9PVCk7XG4gICAgICAgICAgICB2YXIgZXhwYW5kU3RhdGUgPSBhY3JkblJvb3QucXVlcnlTZWxlY3RvcignLicgKyBDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFuaW1hdGlvbi5leHBhbmQuZWZmZWN0LFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvbi5leHBhbmQuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgdGltaW5nRnVuY3Rpb246IHRoaXMuYW5pbWF0aW9uLmV4cGFuZC5lYXNpbmdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19UT09HTEVJQ04sIHRyZ3RJdGVtRWxlKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGV2ZW50QXJncyA9IHsgZWxlbWVudDogdHJndEl0ZW1FbGUsXG4gICAgICAgICAgICAgICAgaXRlbTogdGhpcy5pdGVtc1t0aGlzLmdldEluZGV4QnlJdGVtKHRyZ3RJdGVtRWxlKV0sXG4gICAgICAgICAgICAgICAgaXNFeHBhbmRlZDogdHJ1ZSB9O1xuICAgICAgICAgICAgdmFyIGVmZiA9IGFuaW1hdGlvbi5uYW1lO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdleHBhbmRpbmcnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoQ0xTX1RPR0FOSU1BVEUpO1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1zUHVzaCh0cmd0SXRlbUVsZSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZXhwYW5kU3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgZXhwYW5kU3RhdGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJndEl0ZW1FbGUuY2xhc3NMaXN0LmFkZChDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgaWYgKChhbmltYXRpb24ubmFtZSA9PT0gJ05vbmUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kUHJvZ3Jlc3MoJ2JlZ2luJywgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRQcm9ncmVzcygnZW5kJywgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBhbmRBbmltYXRpb24oZWZmLCBpY29uLCB0cmd0LCB0cmd0SXRlbUVsZSwgYW5pbWF0aW9uLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmV4cGFuZEFuaW1hdGlvbiA9IGZ1bmN0aW9uIChlZiwgaWNuLCB0cmd0LCB0cmd0SXRlbUVsZSwgYW5pbWF0ZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBoZWlnaHQ7XG4gICAgICAgICAgICB2YXIgdHJndEhndDtcbiAgICAgICAgICAgIGlmIChlZiA9PT0gJ1NsaWRlRG93bicpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmRQcm9ncmVzcygnYmVnaW4nLCBpY24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IHRyZ3RJdGVtRWxlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdHJndEhndCA9IHRyZ3Qub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0cmd0LnN0eWxlLm1heEhlaWdodCA9ICh0cmd0Lm9mZnNldEhlaWdodCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB0cmd0SXRlbUVsZS5zdHlsZS5tYXhIZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3RJdGVtRWxlLnN0eWxlLm1pbkhlaWdodCA9IChoZWlnaHQgKyB0cmd0Lm9mZnNldEhlaWdodCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuc2V0U3R5bGVBdHRyaWJ1dGUodHJndCwgeyAncG9zaXRpb24nOiAnJywgJ21heEhlaWdodCc6ICcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0cmd0SXRlbUVsZS5zdHlsZS5taW5IZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kUHJvZ3Jlc3MoJ2VuZCcsIGljbiwgdHJndCwgdHJndEl0ZW1FbGUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmRQcm9ncmVzcygnYmVnaW4nLCBpY24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmRQcm9ncmVzcygnZW5kJywgaWNuLCB0cmd0LCB0cmd0SXRlbUVsZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV80LkFuaW1hdGlvbihhbmltYXRlKS5hbmltYXRlKHRyZ3QpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmV4cGFuZFByb2dyZXNzID0gZnVuY3Rpb24gKHByb2dyZXNzLCBpY29uLCB0cmd0LCB0cmd0SXRlbUVsZSwgZXZlbnRBcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0cmd0LCBDTFNfQ1ROSElERSk7XG4gICAgICAgICAgICB0aGlzLmFkZCh0cmd0SXRlbUVsZSwgQ0xTX1NMQ1RFRCk7XG4gICAgICAgICAgICB0aGlzLmFkZChpY29uLCBDTFNfRVhQQU5ESUNOKTtcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcyA9PT0gJ2VuZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0cmd0SXRlbUVsZSwgQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICAgICAgdHJndC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRyZ3QucHJldmlvdXNFbGVtZW50U2libGluZywgeyAnYXJpYS1zZWxlY3RlZCc6ICd0cnVlJywgJ2FyaWEtZXhwYW5kZWQnOiAndHJ1ZScgfSk7XG4gICAgICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKENMU19UT0dBTklNQVRFKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2V4cGFuZGVkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRlZEl0ZW1zUHVzaCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEluZGV4QnlJdGVtKGl0ZW0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRJdGVtcy5pbmRleE9mKGluZGV4KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZ2V0SW5kZXhCeUl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LmNoaWxkcmVuKS5pbmRleE9mKGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmV4cGFuZGVkSXRlbXNQb3AgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleEJ5SXRlbShpdGVtKTtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtcy5zcGxpY2UodGhpcy5leHBhbmRlZEl0ZW1zLmluZGV4T2YoaW5kZXgpLCAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5jb2xsYXBzZSA9IGZ1bmN0aW9uICh0cmd0KSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzO1xuICAgICAgICAgICAgdmFyIHRyZ3RJdGVtRWxlID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRyZ3QpIHx8ICFlajJfYmFzZV8zLmlzVmlzaWJsZSh0cmd0KSB8fCB0cmd0SXRlbUVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0RJU0FCTEUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5lZmZlY3QsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLmNvbGxhcHNlLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5lYXNpbmcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfVE9PR0xFSUNOLCB0cmd0SXRlbUVsZSkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBldmVudEFyZ3MgPSB7IGVsZW1lbnQ6IHRyZ3RJdGVtRWxlLFxuICAgICAgICAgICAgICAgIGl0ZW06IHRoaXMuaXRlbXNbdGhpcy5nZXRJbmRleEJ5SXRlbSh0cmd0SXRlbUVsZSldLFxuICAgICAgICAgICAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB2YXIgZWZmID0gYW5pbWF0aW9uLm5hbWU7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2V4cGFuZGluZycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtc1BvcCh0cmd0SXRlbUVsZSk7XG4gICAgICAgICAgICB0cmd0SXRlbUVsZS5jbGFzc0xpc3QuYWRkKENMU19FWFBBTkRTVEFURSk7XG4gICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoQ0xTX1RPR0FOSU1BVEUpO1xuICAgICAgICAgICAgaWYgKChhbmltYXRpb24ubmFtZSA9PT0gJ05vbmUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VQcm9ncmVzcygnYmVnaW4nLCBpY29uLCB0cmd0LCB0cmd0SXRlbUVsZSwgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlUHJvZ3Jlc3MoJ2VuZCcsIGljb24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbmltYXRpb24oZWZmLCB0cmd0LCB0cmd0SXRlbUVsZSwgaWNvbiwgYW5pbWF0aW9uLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmNvbGxhcHNlQW5pbWF0aW9uID0gZnVuY3Rpb24gKGVmLCB0cmd0LCB0cmd0SXRFbCwgaWNuLCBhbmltYXRlLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGhlaWdodDtcbiAgICAgICAgICAgIHZhciB0cmd0SGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGl0ZW1IZWlnaHQ7XG4gICAgICAgICAgICB2YXIgcmVtYWluO1xuICAgICAgICAgICAgaWYgKGVmID09PSAnU2xpZGVVcCcpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtSGVpZ2h0ID0gdHJndEl0RWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0cmd0SXRFbC5zdHlsZS5taW5IZWlnaHQgPSBpdGVtSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgdHJndC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IHRyZ3RJdEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdHJndEhlaWdodCA9IHRyZ3Qub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0cmd0LnN0eWxlLm1heEhlaWdodCA9IHRyZ3RIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2xsYXBzZVByb2dyZXNzKCdiZWdpbicsIGljbiwgdHJndCwgdHJndEl0RWwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluID0gKChoZWlnaHQgLSAodHJndEhlaWdodCAtIHRyZ3Qub2Zmc2V0SGVpZ2h0KSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluIDwgaXRlbUhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJndEl0RWwuc3R5bGUubWluSGVpZ2h0ID0gcmVtYWluICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3Quc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VQcm9ncmVzcygnZW5kJywgaWNuLCB0cmd0LCB0cmd0SXRFbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3RJdEVsLnN0eWxlLm1pbkhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LnNldFN0eWxlQXR0cmlidXRlKHRyZ3QsIHsgJ3Bvc2l0aW9uJzogJycsICdtYXhIZWlnaHQnOiAnJywgJ2Rpc3BsYXknOiAnJyB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VQcm9ncmVzcygnYmVnaW4nLCBpY24sIHRyZ3QsIHRyZ3RJdEVsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2xsYXBzZVByb2dyZXNzKCdlbmQnLCBpY24sIHRyZ3QsIHRyZ3RJdEVsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzQuQW5pbWF0aW9uKGFuaW1hdGUpLmFuaW1hdGUodHJndCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuY29sbGFwc2VQcm9ncmVzcyA9IGZ1bmN0aW9uIChwcm9ncmVzcywgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGV2ZW50QXJncykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoaWNvbiwgQ0xTX0VYUEFORElDTik7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0cmd0SXRlbUVsZSwgQ0xTX1NMQ1RFRCk7XG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPT09ICdlbmQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQodHJndCwgQ0xTX0NUTkhJREUpO1xuICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZShDTFNfVE9HQU5JTUFURSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUodHJndEl0ZW1FbGUsIENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgIHRyZ3Quc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRyZ3QucHJldmlvdXNFbGVtZW50U2libGluZywgeyAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZScsICdhcmlhLWV4cGFuZGVkJzogJ2ZhbHNlJyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2V4cGFuZGVkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdhY2NvcmRpb24nO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLml0ZW1BdHRyaWJVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbUVsZSA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LmNoaWxkcmVuKTtcbiAgICAgICAgICAgIHZhciBpdGVtTGVuID0gdGhpcy5pdGVtcy5sZW5ndGg7XG4gICAgICAgICAgICBpdGVtRWxlLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19IRUFERVIsIGVsZSkuc2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJywgJycgKyBpdGVtTGVuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmFkZEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChpbmRleCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsZS5jaGlsZEVsZW1lbnRDb3VudCA+PSBpbmRleCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAwLCBpdGVtKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJJdGVtRWxlID0gdGhpcy5yZW5kZXJJbm5lckl0ZW0oaXRlbSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmIChlbGUuY2hpbGRFbGVtZW50Q291bnQgPT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChpbm5lckl0ZW1FbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShpbm5lckl0ZW1FbGUsIGVsZS5jaGlsZHJlbltpbmRleF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoaW5uZXJJdGVtRWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0hFQURFUiksICdmb2N1cycsIHRoaXMuZm9jdXNJbiwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGlubmVySXRlbUVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IRUFERVIpLCAnYmx1cicsIHRoaXMuZm9jdXNPdXQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbUF0dHJpYlVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbVJlZnJlc2goZWxlKTtcbiAgICAgICAgICAgIGlmIChpdGVtLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKHRydWUsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRlZEl0ZW1SZWZyZXNoID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwoZWxlLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NMQ1RFRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kZWRJdGVtc1B1c2goZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzMuZGV0YWNoKGVsZSk7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLml0ZW1BdHRyaWJVcGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1SZWZyZXNoKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVsZSkgfHwgZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCBlbGUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZS5jaGlsZHJlblswXS5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmhpZGVJdGVtID0gZnVuY3Rpb24gKGluZGV4LCBpc0hpZGRlbikge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoaXNIaWRkZW4pKSB7XG4gICAgICAgICAgICAgICAgaXNIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNIaWRkZW4gPyB0aGlzLmFkZChlbGUsIENMU19JVEVNSElERSkgOiB0aGlzLnJlbW92ZShlbGUsIENMU19JVEVNSElERSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZW5hYmxlSXRlbSA9IGZ1bmN0aW9uIChpbmRleCwgaXNFbmFibGUpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbGVIZWFkZXIgPSBlbGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoaXNFbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShlbGUsIENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoZWxlSGVhZGVyLCB7ICd0YWJpbmRleCc6ICcwJywgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnIH0pO1xuICAgICAgICAgICAgICAgIGVsZUhlYWRlci5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKGZhbHNlLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlTW92ZUZvY3VzKCdtb3ZlZG93bicsIHRoaXMuZWxlbWVudCwgZWxlSGVhZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoZWxlLCBDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgZWxlSGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgZWxlSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRJdGVtID0gZnVuY3Rpb24gKGlzRXhwYW5kLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kTW9kZSA9PT0gJ1NpbmdsZScgJiYgaXNFeHBhbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IHJvb3QuY2hpbGRyZW5bcm9vdC5jaGlsZEVsZW1lbnRDb3VudCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1FeHBhbmQoaXNFeHBhbmQsIGVsZSwgdGhpcy5nZXRJbmRleEJ5SXRlbShlbGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXRlbUV4cGFuZChpc0V4cGFuZCwgZWwsIF90aGlzLmdldEluZGV4QnlJdGVtKGVsKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVsZSkgfHwgIWVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NMQ1QpIHx8IChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpICYmIGlzRXhwYW5kKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBhbmRNb2RlID09PSAnU2luZ2xlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1FeHBhbmQoaXNFeHBhbmQsIGVsZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5pdGVtRXhwYW5kID0gZnVuY3Rpb24gKGlzRXhwYW5kLCBlbGUsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY3RuID0gZWxlLmNoaWxkcmVuWzFdO1xuICAgICAgICAgICAgaWYgKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0RJU0FCTEUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoY3RuKSAmJiBpc0V4cGFuZCkge1xuICAgICAgICAgICAgICAgIGN0biA9IHRoaXMuY29udGVudFJlbmRlcmluZyhpbmRleCk7XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGN0bik7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhQXR0clVwZGF0ZShlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChjdG4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNFeHBhbmQgPyB0aGlzLmV4cGFuZChjdG4pIDogdGhpcy5jb2xsYXBzZShjdG4pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsnZXhwYW5kZWRJdGVtcyddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgdmFyIGFjcmRuID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcC5lbmFibGVSdGwgPyB0aGlzLmFkZChhY3JkbiwgQ0xTX1JUTCkgOiB0aGlzLnJlbW92ZShhY3JkbiwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICdoZWlnaHQnOiBlajJfYmFzZV82LmZvcm1hdFVuaXQobmV3UHJvcC5oZWlnaHQpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd3aWR0aCc6IGVqMl9iYXNlXzYuZm9ybWF0VW5pdChuZXdQcm9wLndpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdleHBhbmRNb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wLmV4cGFuZE1vZGUgPT09ICdTaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tdWx0aXNlbGVjdGFibGUnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBhbmRlZEl0ZW1zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW11bHRpc2VsZWN0YWJsZScsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBY2NvcmRpb247XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIEFjY29yZGlvbkl0ZW0pXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcxMDAlJylcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIEFjY29yZGlvbi5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ011bHRpcGxlJylcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImV4cGFuZE1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNS5Db21wbGV4KHt9LCBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncylcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImFuaW1hdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImNsaWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJleHBhbmRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJleHBhbmRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImNyZWF0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBBY2NvcmRpb24gPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBBY2NvcmRpb24pO1xuICAgIGV4cG9ydHMuQWNjb3JkaW9uID0gQWNjb3JkaW9uO1xuICAgIGV4cG9ydHMuYWNjb3JkaW9uQnVpbGRlciA9IGVqMl9iYXNlXzQuQ3JlYXRlQnVpbGRlcihBY2NvcmRpb24pO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2NvcmRpb24vYWNjb3JkaW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vY29udGV4dC1tZW51XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29udGV4dF9tZW51XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbnRleHRfbWVudV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29udGV4dC1tZW51L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbGlzdHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgZWoyX2Jhc2VfNSwgZWoyX2xpc3RzXzEsIGVqMl9wb3B1cHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRE9XTkFSUk9XID0gJ2Rvd25hcnJvdyc7XG4gICAgdmFyIEVOVEVSID0gJ2VudGVyJztcbiAgICB2YXIgRVNDQVBFID0gJ2VzY2FwZSc7XG4gICAgdmFyIEZPQ1VTRUQgPSAnZS1mb2N1c2VkJztcbiAgICB2YXIgSEVBREVSID0gJ2UtbWVudWhlYWRlcic7XG4gICAgdmFyIExFRlRBUlJPVyA9ICdsZWZ0YXJyb3cnO1xuICAgIHZhciBSSUdIVEFSUk9XID0gJ3JpZ2h0YXJyb3cnO1xuICAgIHZhciBSVEwgPSAnZS1ydGwnO1xuICAgIHZhciBTRUxFQ1RFRCA9ICdlLXNlbGVjdGVkJztcbiAgICB2YXIgU0VQQVJBVE9SID0gJ2Utc2VwYXJhdG9yJztcbiAgICB2YXIgVVBBUlJPVyA9ICd1cGFycm93JztcbiAgICB2YXIgV1JBUFBFUiA9ICdlLWNvbnRleHRtZW51LXdyYXBwZXInO1xuICAgIHZhciBDQVJFVCA9ICdlLWNhcmV0JztcbiAgICB2YXIgSVRFTSA9ICdlLW1lbnUtaXRlbSc7XG4gICAgdmFyIERJU0FCTEVEID0gJ2UtZGlzYWJsZWQnO1xuICAgIHZhciBISURFID0gJ2UtbWVudS1oaWRlJztcbiAgICB2YXIgSUNPTlMgPSAnZS1pY29ucyc7XG4gICAgdmFyIE1lbnVJdGVtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKE1lbnVJdGVtLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBNZW51SXRlbSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWVudUl0ZW07XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwiaWNvbkNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJzZXBhcmF0b3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBNZW51SXRlbSlcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwiaXRlbXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJ1cmxcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLk1lbnVJdGVtID0gTWVudUl0ZW07XG4gICAgdmFyIENvbnRleHRNZW51ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENvbnRleHRNZW51LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDb250ZXh0TWVudShvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuYW5pbWF0aW9uID0gbmV3IGVqMl9iYXNlXzMuQW5pbWF0aW9uKHt9KTtcbiAgICAgICAgICAgIF90aGlzLm5hdklkeCA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaXNUYXBIb2xkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudGFnTmFtZSA9PT0gJ0VKLUNPTlRFWFRNRU5VJykge1xuICAgICAgICAgICAgICAgIHZhciBlakluc3QgPSBlajJfYmFzZV80LmdldFZhbHVlKCdlajJfaW5zdGFuY2VzJywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgdWwgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ0VKLUNPTlRFWFRNRU5VJywgeyBjbGFzc05hbWU6IFdSQVBQRVIgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHVsLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdWw7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtJyArIHRoaXMuZ2V0TW9kdWxlTmFtZSgpKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFZhbHVlKCdlajJfaW5zdGFuY2VzJywgZWpJbnN0LCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IGVqMl9iYXNlXzQuZ2V0VW5pcXVlSUQodGhpcy5nZXRNb2R1bGVOYW1lKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdFdyYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVySXRlbXMoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaW5pdFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgaWYgKCF3cmFwcGVyKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlciA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IFdSQVBQRVIgfSk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKHRoaXMuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKFJUTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdyb2xlJzogJ21lbnUnLCAndGFiaW5kZXgnOiAnMCcgfSk7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuekluZGV4ID0gdGhpcy5nZXRaSW5kZXgoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnJlbmRlckl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSBlajJfbGlzdHNfMS5MaXN0QmFzZS5jcmVhdGVKc29uRnJvbUVsZW1lbnQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdWwgPSB0aGlzLmNyZWF0ZUl0ZW1zKHRoaXMuaXRlbXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5hcHBlbmQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodWwuY2hpbGRyZW4pLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRFbGVtcyA9IGVqMl9iYXNlXzUuc2VsZWN0QWxsKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGFyZ2V0RWxlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0RWxlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNJb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBlajJfYmFzZV8yLlRvdWNoKHRhcmdldCwgeyB0YXBIb2xkOiB0aGlzLnRvdWNoSGFuZGxlci5iaW5kKHRoaXMpIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRhcmdldCwgJ2NvbnRleHRtZW51JywgdGhpcy5jbWVudUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmdldFNjcm9sbGFibGVQYXJlbnRzKHRhcmdldCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfMSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHBhcmVudF8xLCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh3cmFwcGVyLCAnbW91c2VvdmVyJywgdGhpcy5tb3ZlckhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV8yLktleWJvYXJkRXZlbnRzKHdyYXBwZXIsIHtcbiAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5Qm9hcmRIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczoge1xuICAgICAgICAgICAgICAgICAgICBkb3duYXJyb3c6IERPV05BUlJPVyxcbiAgICAgICAgICAgICAgICAgICAgdXBhcnJvdzogVVBBUlJPVyxcbiAgICAgICAgICAgICAgICAgICAgZW50ZXI6IEVOVEVSLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0YXJyb3c6IExFRlRBUlJPVyxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRhcnJvdzogUklHSFRBUlJPVyxcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlOiBFU0NBUEVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUucmlwcGxlRWZmZWN0KHdyYXBwZXIsIHsgc2VsZWN0b3I6ICcuJyArIElURU0gfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5tb3VzZURvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV81LmNsb3Nlc3QoZS50YXJnZXQsICcuJyArIFdSQVBQRVIpICE9PSB0aGlzLmdldFdyYXBwZXIoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KHRoaXMubmF2SWR4Lmxlbmd0aCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRTY3JvbGxhYmxlUGFyZW50cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XG4gICAgICAgICAgICB2YXIgcGFyZW50Q29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gLyhhdXRvfHNjcm9sbCkvO1xuICAgICAgICAgICAgdmFyIHBhcmVudEVsZSA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgd2hpbGUgKHBhcmVudEVsZSAmJiBwYXJlbnRFbGUudGFnTmFtZSAhPT0gJ0hUTUwnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnRFbGUpO1xuICAgICAgICAgICAgICAgIGlmICghKGVsZW1TdHlsZS5wb3NpdGlvbiA9PT0gJ2Fic29sdXRlJyAmJiBwYXJlbnRTdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpXG4gICAgICAgICAgICAgICAgICAgICYmIHJlZ2V4LnRlc3QocGFyZW50U3R5bGUub3ZlcmZsb3cgKyBwYXJlbnRTdHlsZS5vdmVyZmxvd1kgKyBwYXJlbnRTdHlsZS5vdmVyZmxvd1gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudENvbGxlY3Rpb24ucHVzaChwYXJlbnRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnRFbGUgPSBwYXJlbnRFbGUucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudENvbGxlY3Rpb24ucHVzaChkb2N1bWVudCk7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50Q29sbGVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmtleUJvYXJkSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBET1dOQVJST1c6XG4gICAgICAgICAgICAgICAgY2FzZSBVUEFSUk9XOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwRG93bktleUhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgUklHSFRBUlJPVzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodEVudGVyS2V5SGFuZGxlcih7IGFjdGlvbjogUklHSFRBUlJPVyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBMRUZUQVJST1c6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdEVzY0tleUhhbmRsZXIoeyBhY3Rpb246IExFRlRBUlJPVyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFTlRFUjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodEVudGVyS2V5SGFuZGxlcih7IGFjdGlvbjogRU5URVIgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRVNDQVBFOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRFc2NLZXlIYW5kbGVyKHsgYWN0aW9uOiBFU0NBUEUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUudXBEb3duS2V5SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgdmFyIGN1bCA9IHdyYXBwZXIuY2hpbGRyZW5bdGhpcy5uYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0SWR4ID0gZS5hY3Rpb24gPT09IERPV05BUlJPVyA/IDAgOiBjdWwuY2hpbGRFbGVtZW50Q291bnQgLSAxO1xuICAgICAgICAgICAgdmFyIGZsaUlkeCA9IGRlZmF1bHRJZHg7XG4gICAgICAgICAgICB2YXIgZmxpID0gdGhpcy5nZXRMSUJ5Q2xhc3MoY3VsLCBGT0NVU0VEKTtcbiAgICAgICAgICAgIGlmIChmbGkpIHtcbiAgICAgICAgICAgICAgICBmbGlJZHggPSB0aGlzLmdldElkeChjdWwsIGZsaSk7XG4gICAgICAgICAgICAgICAgZmxpLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgZS5hY3Rpb24gPT09IERPV05BUlJPVyA/IGZsaUlkeCsrIDogZmxpSWR4LS07XG4gICAgICAgICAgICAgICAgaWYgKGZsaUlkeCA9PT0gKGUuYWN0aW9uID09PSBET1dOQVJST1cgPyBjdWwuY2hpbGRFbGVtZW50Q291bnQgOiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxpSWR4ID0gZGVmYXVsdElkeDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xpID0gY3VsLmNoaWxkcmVuW2ZsaUlkeF07XG4gICAgICAgICAgICBmbGlJZHggPSB0aGlzLmlzVmFsaWRMSShjbGksIGZsaUlkeCwgZS5hY3Rpb24pO1xuICAgICAgICAgICAgY3VsLmNoaWxkcmVuW2ZsaUlkeF0uY2xhc3NMaXN0LmFkZChGT0NVU0VEKTtcbiAgICAgICAgICAgIGN1bC5jaGlsZHJlbltmbGlJZHhdLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5pc1ZhbGlkTEkgPSBmdW5jdGlvbiAoY2xpLCBpbmRleCwgYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgdmFyIGN1bCA9IHdyYXBwZXIuY2hpbGRyZW5bdGhpcy5uYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgIGlmIChjbGkuY2xhc3NMaXN0LmNvbnRhaW5zKFNFUEFSQVRPUikgfHwgY2xpLmNsYXNzTGlzdC5jb250YWlucyhESVNBQkxFRCkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb24gPT09IChET1dOQVJST1cgfHwgUklHSFRBUlJPVykgPyBpbmRleCsrIDogaW5kZXgtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsaSA9IGN1bC5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBpZiAoY2xpLmNsYXNzTGlzdC5jb250YWlucyhTRVBBUkFUT1IpIHx8IGNsaS5jbGFzc0xpc3QuY29udGFpbnMoRElTQUJMRUQpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmlzVmFsaWRMSShjbGksIGluZGV4LCBhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUucmlnaHRFbnRlcktleUhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIHZhciBjdWwgPSB3cmFwcGVyLmNoaWxkcmVuW3RoaXMubmF2SWR4Lmxlbmd0aF07XG4gICAgICAgICAgICB2YXIgZmxpID0gdGhpcy5nZXRMSUJ5Q2xhc3MoY3VsLCBGT0NVU0VEKTtcbiAgICAgICAgICAgIGlmIChmbGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmxpSWR4ID0gdGhpcy5nZXRJZHgoY3VsLCBmbGkpO1xuICAgICAgICAgICAgICAgIHZhciBuYXZJZHggPSB0aGlzLm5hdklkeC5jb25jYXQoZmxpSWR4KTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmdldEl0ZW0obmF2SWR4KTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZJZHgucHVzaChmbGlJZHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5NZW51KGZsaSwgaXRlbSwgbnVsbCwgbnVsbCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGZsaS5jbGFzc0xpc3QucmVtb3ZlKEZPQ1VTRUQpO1xuICAgICAgICAgICAgICAgICAgICBmbGkuY2xhc3NMaXN0LmFkZChTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gRU5URVIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7IGVsZW1lbnQ6IGZsaSwgaXRlbTogaXRlbSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdzZWxlY3QnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZsaS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBjdWwgPSB3cmFwcGVyLmNoaWxkcmVuW3RoaXMubmF2SWR4Lmxlbmd0aF07XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5pc1ZhbGlkTEkoY3VsLmNoaWxkcmVuWzBdLCAwLCBlLmFjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGN1bC5jaGlsZHJlbltpbmRleF0uY2xhc3NMaXN0LmFkZChGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICAgICAgY3VsLmNoaWxkcmVuW2luZGV4XS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSBFTlRFUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUubGVmdEVzY0tleUhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubmF2SWR4Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUodGhpcy5uYXZJZHgubGVuZ3RoLCBlKTtcbiAgICAgICAgICAgICAgICB2YXIgY3VsID0gd3JhcHBlci5jaGlsZHJlblt0aGlzLm5hdklkeC5sZW5ndGhdO1xuICAgICAgICAgICAgICAgIHZhciBzbGkgPSB0aGlzLmdldExJQnlDbGFzcyhjdWwsIFNFTEVDVEVEKTtcbiAgICAgICAgICAgICAgICBzbGkuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHNsaSkge1xuICAgICAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LnJlbW92ZShTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgIHNsaS5jbGFzc0xpc3QuYWRkKEZPQ1VTRUQpO1xuICAgICAgICAgICAgICAgICAgICBzbGkuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09IEVTQ0FQRSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlTWVudShudWxsLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnRvdWNoSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmlzVGFwSG9sZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNtZW51SGFuZGxlcihlLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY21lbnVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KG51bGwsIGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FuT3BlbihlLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5jaGFuZ2VkVG91Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5NZW51KG51bGwsIG51bGwsIGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSwgZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3Blbk1lbnUobnVsbCwgbnVsbCwgZS5jbGllbnRZLCBlLmNsaWVudFgsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmNsb3NlTWVudSA9IGZ1bmN0aW9uICh1bEluZGV4LCBlKSB7XG4gICAgICAgICAgICBpZiAodWxJbmRleCA9PT0gdm9pZCAwKSB7IHVsSW5kZXggPSAwOyB9XG4gICAgICAgICAgICBpZiAoZSA9PT0gdm9pZCAwKSB7IGUgPSBudWxsOyB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc01lbnVWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdWwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBjbG9zZUFyZ3MgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGJlZm9yZUNsb3NlQXJncyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNudCA9IHdyYXBwZXIuY2hpbGRFbGVtZW50Q291bnQ7IGNudCA+IHVsSW5kZXg7IGNudC0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSB0aGlzLm5hdklkeC5sZW5ndGggPyB0aGlzLmdldEl0ZW0odGhpcy5uYXZJZHgpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBpdGVtID8gaXRlbS5pdGVtcyA6IHRoaXMuaXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIHVsID0gd3JhcHBlci5jaGlsZHJlbltjbnQgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2VBcmdzID0geyBlbGVtZW50OiB1bCwgcGFyZW50SXRlbTogaXRlbSwgaXRlbXM6IGl0ZW1zLCBldmVudDogZSwgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZUNsb3NlJywgYmVmb3JlQ2xvc2VBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiZWZvcmVDbG9zZUFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUFuaW1hdGlvbih1bCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZJZHgubGVuZ3RoID0gdWxJbmRleCA/IHVsSW5kZXggLSAxIDogdWxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQXJncyA9IHsgZWxlbWVudDogdWwsIHBhcmVudEl0ZW06IGl0ZW0sIGl0ZW1zOiBpdGVtcyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdvbkNsb3NlJywgY2xvc2VBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmlzTWVudVZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMubmF2SWR4Lmxlbmd0aCA+IDAgfHwgKHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY29udGV4dG1lbnUnKSAmJiBlajJfYmFzZV81LmlzVmlzaWJsZSh0aGlzLmVsZW1lbnQpLnZhbHVlT2YoKSkpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY2FuT3BlbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBjYW5PcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcikge1xuICAgICAgICAgICAgICAgIGNhbk9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gdGhpcy5maWx0ZXIuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGFyZ2V0LmNsYXNzTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmluZGV4T2YodGFyZ2V0LmNsYXNzTGlzdFtpXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuT3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjYW5PcGVuO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICh0b3AsIGxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMub3Blbk1lbnUobnVsbCwgbnVsbCwgdG9wLCBsZWZ0KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLm9wZW5NZW51ID0gZnVuY3Rpb24gKGxpLCBpdGVtLCB0b3AsIGxlZnQsIGUpIHtcbiAgICAgICAgICAgIGlmICh0b3AgPT09IHZvaWQgMCkgeyB0b3AgPSAwOyB9XG4gICAgICAgICAgICBpZiAobGVmdCA9PT0gdm9pZCAwKSB7IGxlZnQgPSAwOyB9XG4gICAgICAgICAgICBpZiAoZSA9PT0gdm9pZCAwKSB7IGUgPSBudWxsOyB9XG4gICAgICAgICAgICB2YXIgdWw7XG4gICAgICAgICAgICB2YXIgbmF2SWR4O1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIGlmIChsaSkge1xuICAgICAgICAgICAgICAgIHVsID0gdGhpcy5jcmVhdGVJdGVtcyhpdGVtLml0ZW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIubGFzdENoaWxkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0geyB0ZXh0OiBpdGVtLnRleHQsIGljb25Dc3M6IElDT05TICsgJyBlLXByZXZpb3VzJyB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGRhdGEgPSBuZXcgTWVudUl0ZW0odGhpcy5pdGVtc1swXSwgbnVsbCwgZGF0YSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBobGkgPSB0aGlzLmNyZWF0ZUl0ZW0oW2hkYXRhXSwgdHJ1ZSwgJ21lbnUnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdWwuaW5zZXJ0QmVmb3JlKGhsaSwgdWwuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1bC5zdHlsZS56SW5kZXggPSB0aGlzLmVsZW1lbnQuc3R5bGUuekluZGV4O1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuYXZJZHggPSB0aGlzLmdldEluZGV4KGxpID8gbGkudGV4dENvbnRlbnQgOiBudWxsKTtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGxpID8gaXRlbS5pdGVtcyA6IHRoaXMuaXRlbXM7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0geyBlbGVtZW50OiB1bCwgaXRlbXM6IGl0ZW1zLCBwYXJlbnRJdGVtOiBpdGVtLCBldmVudDogZSwgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVPcGVuJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uYXZJZHgucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKGxpLCB1bCwgdG9wLCBsZWZ0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUFuaW1hdGlvbih1bCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jcmVhdGVJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIHNob3dJY29uLCBtb2R1bGVOYW1lLCBpc0hlYWRlcikge1xuICAgICAgICAgICAgaWYgKGlzSGVhZGVyID09PSB2b2lkIDApIHsgaXNIZWFkZXIgPSB0cnVlOyB9XG4gICAgICAgICAgICB2YXIgbGlzdE9wdCA9IHsgc2hvd0ljb246IHNob3dJY29uLCBtb2R1bGVOYW1lOiBtb2R1bGVOYW1lIH07XG4gICAgICAgICAgICBpZiAoaXNIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBsaXN0T3B0Lml0ZW1DbGFzcyA9IEhFQURFUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3RJdGVtRnJvbUpzb24odGhpcy50b1Jhd09iamVjdChpdGVtKSwgbGlzdE9wdCwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbGlbMF07XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChsaSwgdWwsIHRvcCwgbGVmdCkge1xuICAgICAgICAgICAgdmFyIHB4ID0gJ3B4JztcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsaXR5KHVsKTtcbiAgICAgICAgICAgIGlmICh1bCA9PT0gdGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbGxpZGUgPSBlajJfcG9wdXBzXzEuaXNDb2xsaWRlKHVsLCBudWxsLCBsZWZ0LCB0b3ApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xsaWRlLmluZGV4T2YoJ3JpZ2h0JykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gbGVmdCAtIHVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29sbGlkZS5pbmRleE9mKCdib3R0b20nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBlajJfcG9wdXBzXzEuZml0KHVsLCBudWxsLCB7IFg6IGZhbHNlLCBZOiB0cnVlIH0sIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IG9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbGxpZGUgPSBlajJfcG9wdXBzXzEuaXNDb2xsaWRlKHVsLCBudWxsLCBsZWZ0LCB0b3ApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xsaWRlLmluZGV4T2YoJ2xlZnQnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBlajJfcG9wdXBzXzEuZml0KHVsLCBudWxsLCB7IFg6IHRydWUsIFk6IGZhbHNlIH0sIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBvZmZzZXQubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IE51bWJlcih0aGlzLmVsZW1lbnQuc3R5bGUudG9wLnJlcGxhY2UocHgsICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBOdW1iZXIodGhpcy5lbGVtZW50LnN0eWxlLmxlZnQucmVwbGFjZShweCwgJycpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGhpcy5lbmFibGVSdGwgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVBvc2l0aW9uKGxpLCB4LCAndG9wJyk7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IG9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBvZmZzZXQubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbGxpZGUgPSBlajJfcG9wdXBzXzEuaXNDb2xsaWRlKHVsLCBudWxsLCB0aGlzLmVuYWJsZVJ0bCA/IGxlZnQgLSB1bC5vZmZzZXRXaWR0aCA6IGxlZnQsIHRvcCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4Q29sbGlzaW9uID0gY29sbGlkZS5pbmRleE9mKCdsZWZ0JykgPiAtMSB8fCBjb2xsaWRlLmluZGV4T2YoJ3JpZ2h0JykgPiAtMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhDb2xsaXNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGVqMl9wb3B1cHNfMS5jYWxjdWxhdGVQb3NpdGlvbihsaSwgdGhpcy5lbmFibGVSdGwgPyAncmlnaHQnIDogJ2xlZnQnLCAndG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gb2Zmc2V0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsIHx8IHhDb2xsaXNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSAodGhpcy5lbmFibGVSdGwgJiYgeENvbGxpc2lvbikgPyBsZWZ0IDogbGVmdCAtIHVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xsaWRlLmluZGV4T2YoJ2JvdHRvbScpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGVqMl9wb3B1cHNfMS5maXQodWwsIG51bGwsIHsgWDogZmFsc2UsIFk6IHRydWUgfSwgeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IG9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGl0eSh1bCwgZmFsc2UpO1xuICAgICAgICAgICAgdWwuc3R5bGUudG9wID0gdG9wICsgcHg7XG4gICAgICAgICAgICB1bC5zdHlsZS5sZWZ0ID0gbGVmdCArIHB4O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUudG9nZ2xlVmlzaWJsaXR5ID0gZnVuY3Rpb24gKHVsLCBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgIGlmIChpc1Zpc2libGUgPT09IHZvaWQgMCkgeyBpc1Zpc2libGUgPSB0cnVlOyB9XG4gICAgICAgICAgICB1bC5zdHlsZS52aXNpYmlsaXR5ID0gaXNWaXNpYmxlID8gJ2hpZGRlbicgOiAnJztcbiAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY3JlYXRlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2hvd0ljb24gPSB0aGlzLmhhc0ZpZWxkKGl0ZW1zLCAnaWNvbkNzcycpO1xuICAgICAgICAgICAgdmFyIGxpc3RCYXNlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBzaG93SWNvbjogc2hvd0ljb24sXG4gICAgICAgICAgICAgICAgbW9kdWxlTmFtZTogJ21lbnUnLFxuICAgICAgICAgICAgICAgIGl0ZW1DcmVhdGluZzogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jdXJEYXRhLmh0bWxBdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogJ21lbnVpdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG93SWNvbiAmJiAhYXJncy5jdXJEYXRhLmljb25Dc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuY3VyRGF0YS5pY29uQ3NzID0gSUNPTlMgKyAnIGUtYmxhbmtpY29uJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXRlbUNyZWF0ZWQ6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmN1ckRhdGEuc2VwYXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0uY2xhc3NMaXN0LnJlbW92ZShJVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuaXRlbS5jbGFzc0xpc3QuYWRkKFNFUEFSQVRPUik7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0ucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY3VyRGF0YS5pdGVtcyAmJiBhcmdzLmN1ckRhdGEuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBJQ09OUyArICcgJyArIENBUkVUIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1oYXNwb3B1cCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0ucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0uY2xhc3NMaXN0LmFkZCgnZS1tZW51LWNhcmV0LWljb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0geyBpdGVtOiBhcmdzLmN1ckRhdGEsIGVsZW1lbnQ6IGFyZ3MuaXRlbSB9O1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdiZWZvcmVJdGVtUmVuZGVyJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHVsID0gZWoyX2xpc3RzXzEuTGlzdEJhc2UuY3JlYXRlTGlzdCh0aGlzLnRvUmF3T2JqZWN0KGl0ZW1zLnNsaWNlKCkpLCBsaXN0QmFzZU9wdGlvbnMsIHRydWUpO1xuICAgICAgICAgICAgdWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICByZXR1cm4gdWw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS50b1Jhd09iamVjdCA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgICAgICB2YXIgbWVudUl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbaV0ucHJvcGVydGllcztcbiAgICAgICAgICAgICAgICBtZW51SXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZW51SXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5tb3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgY2xpID0gdGhpcy5nZXRMSSh0cmd0KTtcbiAgICAgICAgICAgIGlmIChjbGkgJiYgZWoyX2Jhc2VfNS5jbG9zZXN0KGNsaSwgJy4nICsgV1JBUFBFUikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmxpID0gZWoyX2Jhc2VfNS5zZWxlY3QoJy4nICsgRk9DVVNFRCwgd3JhcHBlcik7XG4gICAgICAgICAgICAgICAgaWYgKGZsaSkge1xuICAgICAgICAgICAgICAgICAgICBmbGkuY2xhc3NMaXN0LnJlbW92ZShGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2xpLmNsYXNzTGlzdC5hZGQoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dJdGVtT25DbGljaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5oYXNGaWVsZCA9IGZ1bmN0aW9uIChpdGVtcywgZmllbGQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXVtmaWVsZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0V3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV81LmNsb3Nlc3QodGhpcy5lbGVtZW50LCAnLicgKyBXUkFQUEVSKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1RhcEhvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVGFwSG9sZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgdHJndCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBjbGkgPSB0aGlzLmdldExJKHRyZ3QpO1xuICAgICAgICAgICAgICAgIHZhciBjbGlXcmFwcGVyID0gY2xpID8gZWoyX2Jhc2VfNS5jbG9zZXN0KGNsaSwgJy4nICsgV1JBUFBFUikgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBpc0luc3RMSSA9IGNsaSAmJiBjbGlXcmFwcGVyICYmIHdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQuaWQgPT09IGNsaVdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQuaWQ7XG4gICAgICAgICAgICAgICAgaWYgKGlzSW5zdExJICYmIGUudHlwZSA9PT0gJ2NsaWNrJyAmJiAhY2xpLmNsYXNzTGlzdC5jb250YWlucyhIRUFERVIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TElTZWxlY3RlZChjbGkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmF2SWR4ID0gdGhpcy5nZXRJbmRleChjbGkudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShuYXZJZHgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0geyBlbGVtZW50OiBjbGksIGl0ZW06IGl0ZW0gfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdzZWxlY3QnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNJbnN0TEkgJiYgKGUudHlwZSA9PT0gJ21vdXNlb3ZlcicgfHwgZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlIHx8IHRoaXMuc2hvd0l0ZW1PbkNsaWNrKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGkuY2xhc3NMaXN0LmNvbnRhaW5zKEhFQURFUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsID0gd3JhcHBlci5jaGlsZHJlblt0aGlzLm5hdklkeC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQW5pbWF0aW9uKHVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbGkgPSB0aGlzLmdldExJQnlDbGFzcyh1bCwgU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNsaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaS5jbGFzc0xpc3QucmVtb3ZlKFNFTEVDVEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKGNsaS5wYXJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF2SWR4LnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbGkuY2xhc3NMaXN0LmNvbnRhaW5zKFNFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd1N1Yk1lbnUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdWwgPSBjbGkucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpSWR4ID0gdGhpcy5nZXRJZHgoY3VsLCBjbGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdWxJZHggPSB0aGlzLmdldElkeCh3cmFwcGVyLCBjdWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5uYXZJZHhbY3VsSWR4XSA9PT0gY2xpSWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93U3ViTWVudSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdWxJZHggIT09IHRoaXMubmF2SWR4Lmxlbmd0aCAmJiAoZS50eXBlICE9PSAnbW91c2VvdmVyJyB8fCBzaG93U3ViTWVudSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbGkgPSB0aGlzLmdldExJQnlDbGFzcyhjdWwsIFNFTEVDVEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LnJlbW92ZShTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWVudShjdWxJZHggKyAxLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd1N1Yk1lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHRoaXMubmF2SWR4LmNvbmNhdChjbGlJZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZW92ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMSVNlbGVjdGVkKGNsaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGkuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF2SWR4LnB1c2goY2xpSWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3Blbk1lbnUoY2xpLCBpdGVtLCBudWxsLCBudWxsLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgIT09ICdtb3VzZW92ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUobnVsbCwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmd0LnRhZ05hbWUgIT09ICdVTCcgfHwgdHJndC5wYXJlbnRFbGVtZW50ICE9PSB3cmFwcGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNsaSB8fCAhY2xpLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0FSRVQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUobnVsbCwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zZXRMSVNlbGVjdGVkID0gZnVuY3Rpb24gKGxpKSB7XG4gICAgICAgICAgICB2YXIgc2xpID0gdGhpcy5nZXRMSUJ5Q2xhc3MobGkucGFyZW50RWxlbWVudCwgU0VMRUNURUQpO1xuICAgICAgICAgICAgaWYgKHNsaSkge1xuICAgICAgICAgICAgICAgIHNsaS5jbGFzc0xpc3QucmVtb3ZlKFNFTEVDVEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNFRCk7XG4gICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKFNFTEVDVEVEKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldExJQnlDbGFzcyA9IGZ1bmN0aW9uICh1bCwgY2xhc3NuYW1lKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdWwuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodWwuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzbmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVsLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0SXRlbSA9IGZ1bmN0aW9uIChuYXZJZHgpIHtcbiAgICAgICAgICAgIG5hdklkeCA9IG5hdklkeC5zbGljZSgpO1xuICAgICAgICAgICAgdmFyIGlkeCA9IG5hdklkeC5wb3AoKTtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0SXRlbXMobmF2SWR4KTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtc1tpZHhdO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0SXRlbXMgPSBmdW5jdGlvbiAobmF2SWR4KSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLml0ZW1zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYXZJZHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtcyA9IGl0ZW1zW25hdklkeFtpXV0uaXRlbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRJZHggPSBmdW5jdGlvbiAodWwsIGxpLCBza2lwSGRyKSB7XG4gICAgICAgICAgICBpZiAoc2tpcEhkciA9PT0gdm9pZCAwKSB7IHNraXBIZHIgPSB0cnVlOyB9XG4gICAgICAgICAgICB2YXIgaWR4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh1bC5jaGlsZHJlbiwgbGkpO1xuICAgICAgICAgICAgaWYgKHNraXBIZHIgJiYgdWwuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKEhFQURFUikpIHtcbiAgICAgICAgICAgICAgICBpZHgtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRMSSA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICBpZiAoZWxlbS50YWdOYW1lID09PSAnTEknKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfNS5jbG9zZXN0KGVsZW0sICdsaScpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3NzQ2xhc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFByb3AuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUob2xkUHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UHJvcC5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZChuZXdQcm9wLmNzc0NsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKFJUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmlsdGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlciA9IG5ld1Byb3AuZmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dJdGVtT25DbGljayc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SXRlbU9uQ2xpY2sgPSBuZXdQcm9wLnNob3dJdGVtT25DbGljaztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RhcmdldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBuZXdQcm9wLnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2l0ZW1zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHRvdWNoTW9kdWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRFbGVtcyA9IGVqMl9iYXNlXzUuc2VsZWN0QWxsKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGFyZ2V0RWxlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0RWxlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNJb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoTW9kdWxlID0gZWoyX2Jhc2VfNC5nZXRJbnN0YW5jZSh0YXJnZXQsIGVqMl9iYXNlXzIuVG91Y2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdWNoTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHRhcmdldCwgJ2NvbnRleHRtZW51JywgdGhpcy5jbWVudUhhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0U2Nyb2xsYWJsZVBhcmVudHModGFyZ2V0KTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfMiA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZShwYXJlbnRfMiwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh3cmFwcGVyLCAnbW91c2VvdmVyJywgdGhpcy5tb3ZlckhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHZhciBrZXlib2FyZE1vZHVsZSA9IGVqMl9iYXNlXzQuZ2V0SW5zdGFuY2Uod3JhcHBlciwgZWoyX2Jhc2VfMi5LZXlib2FyZEV2ZW50cyk7XG4gICAgICAgICAgICBpZiAoa2V5Ym9hcmRNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICBrZXlib2FyZE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAodWwsIGlzTWVudU9wZW4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoaXNNZW51T3BlbiA9PT0gdm9pZCAwKSB7IGlzTWVudU9wZW4gPSB0cnVlOyB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QgPT09ICdOb25lJyB8fCAhaXNNZW51T3Blbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kKHVsLCBpc01lbnVPcGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLmFuaW1hdGUodWwsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvblNldHRpbmdzLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lYXNpbmcsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IG9wdGlvbnMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbmQob3B0aW9ucy5lbGVtZW50LCBpc01lbnVPcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKHVsLCBpc01lbnVPcGVuKSB7XG4gICAgICAgICAgICBpZiAoaXNNZW51T3Blbikge1xuICAgICAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHVsLnN0eWxlLm1heEhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5uYXZJZHgubGVuZ3RoID8gdGhpcy5nZXRJdGVtKHRoaXMubmF2SWR4KSA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHsgZWxlbWVudDogdWwsIHBhcmVudEl0ZW06IGl0ZW0sIGl0ZW1zOiBpdGVtID8gaXRlbS5pdGVtcyA6IHRoaXMuaXRlbXMgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ29uT3BlbicsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHVsLnF1ZXJ5U2VsZWN0b3IoJy4nICsgRk9DVVNFRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdWwucXVlcnlTZWxlY3RvcignLicgKyBGT0NVU0VEKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgZWxlID0gdGhpcy5nZXRXcmFwcGVyKCkuY2hpbGRyZW5bdGhpcy5nZXRJZHgodGhpcy5nZXRXcmFwcGVyKCksIHVsKSAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUucXVlcnlTZWxlY3RvcignLicgKyBTRUxFQ1RFRCkuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHVsID09PSB0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZsaSA9IHRoaXMuZ2V0TElCeUNsYXNzKHRoaXMuZWxlbWVudCwgRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsaS5jbGFzc0xpc3QucmVtb3ZlKEZPQ1VTRUQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBzbGkgPSB0aGlzLmdldExJQnlDbGFzcyh0aGlzLmVsZW1lbnQsIFNFTEVDVEVEKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpLmNsYXNzTGlzdC5yZW1vdmUoU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LmRldGFjaCh1bCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdjb250ZXh0bWVudSc7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRJbmRleCA9IGZ1bmN0aW9uIChkYXRhLCBpdGVtcywgbmF2SWR4LCBpc0NhbGxCYWNrKSB7XG4gICAgICAgICAgICBpZiAoaXRlbXMgPT09IHZvaWQgMCkgeyBpdGVtcyA9IHRoaXMuaXRlbXM7IH1cbiAgICAgICAgICAgIGlmIChuYXZJZHggPT09IHZvaWQgMCkgeyBuYXZJZHggPSBbXTsgfVxuICAgICAgICAgICAgaWYgKGlzQ2FsbEJhY2sgPT09IHZvaWQgMCkgeyBpc0NhbGxCYWNrID0gZmFsc2U7IH1cbiAgICAgICAgICAgIHZhciBpdGVtO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnRleHQgPT09IGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbmF2SWR4LnB1c2goaSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBuYXZJZHggPSB0aGlzLmdldEluZGV4KGRhdGEsIGl0ZW0uaXRlbXMsIG5hdklkeCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuYXZJZHhbbmF2SWR4Lmxlbmd0aCAtIDFdID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZJZHgucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZJZHgudW5zaGlmdChpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbGVuIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmF2SWR4LnB1c2goLTEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICghaXNDYWxsQmFjayAmJiBuYXZJZHhbMF0gPT09IC0xKSA/IFtdIDogbmF2SWR4O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZW5hYmxlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIGVuYWJsZSkge1xuICAgICAgICAgICAgaWYgKGVuYWJsZSA9PT0gdm9pZCAwKSB7IGVuYWJsZSA9IHRydWU7IH1cbiAgICAgICAgICAgIHZhciB1bDtcbiAgICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgICB2YXIgbmF2SWR4O1xuICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gRElTQUJMRUQ7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG5hdklkeCA9IHRoaXMuZ2V0SW5kZXgoaXRlbXNbaV0pO1xuICAgICAgICAgICAgICAgIGlkeCA9IG5hdklkeC5wb3AoKTtcbiAgICAgICAgICAgICAgICB1bCA9IHdyYXBwZXIuY2hpbGRyZW5bbmF2SWR4Lmxlbmd0aF07XG4gICAgICAgICAgICAgICAgaWYgKHVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNEZXZpY2UgJiYgIXVsLmNsYXNzTGlzdC5jb250YWlucygnZS1jb250ZXh0bWVudScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuY2hpbGRyZW5baWR4ICsgMV0uY2xhc3NMaXN0LnJlbW92ZShkaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5jaGlsZHJlbltpZHhdLmNsYXNzTGlzdC5yZW1vdmUoZGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuQnJvd3Nlci5pc0RldmljZSAmJiAhdWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbnRleHRtZW51JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5jaGlsZHJlbltpZHggKyAxXS5jbGFzc0xpc3QuYWRkKGRpc2FibGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLmNoaWxkcmVuW2lkeF0uY2xhc3NMaXN0LmFkZChkaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zaG93SXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVJdGVtcyhpdGVtcywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaGlkZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dIaWRlSXRlbXMoaXRlbXMsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuc2hvd0hpZGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgaXNoaWRlKSB7XG4gICAgICAgICAgICB2YXIgdWw7XG4gICAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgICAgdmFyIG5hdklkeDtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmF2SWR4ID0gdGhpcy5nZXRJbmRleChpdGVtc1tpXSk7XG4gICAgICAgICAgICAgICAgaWR4ID0gbmF2SWR4LnBvcCgpO1xuICAgICAgICAgICAgICAgIHVsID0gd3JhcHBlci5jaGlsZHJlbltuYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICBpZiAodWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzaGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuQnJvd3Nlci5pc0RldmljZSAmJiAhdWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbnRleHRtZW51JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5jaGlsZHJlbltpZHggKyAxXS5jbGFzc0xpc3QuYWRkKEhJREUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuY2hpbGRyZW5baWR4XS5jbGFzc0xpc3QuYWRkKEhJREUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuQnJvd3Nlci5pc0RldmljZSAmJiAhdWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbnRleHRtZW51JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5jaGlsZHJlbltpZHggKyAxXS5jbGFzc0xpc3QucmVtb3ZlKEhJREUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuY2hpbGRyZW5baWR4XS5jbGFzc0xpc3QucmVtb3ZlKEhJREUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUucmVtb3ZlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgICB2YXIgbmF2SWR4O1xuICAgICAgICAgICAgdmFyIGlpdGVtcztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuYXZJZHggPSB0aGlzLmdldEluZGV4KGl0ZW1zW2ldKTtcbiAgICAgICAgICAgICAgICBpZHggPSBuYXZJZHgucG9wKCk7XG4gICAgICAgICAgICAgICAgaWl0ZW1zID0gdGhpcy5nZXRJdGVtcyhuYXZJZHgpO1xuICAgICAgICAgICAgICAgIGlpdGVtcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5hdklkeC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNS5kZXRhY2godGhpcy5lbGVtZW50LmNoaWxkcmVuW2lkeF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmluc2VydEFmdGVyID0gZnVuY3Rpb24gKGl0ZW1zLCB0ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmluc2VydEl0ZW1zKGl0ZW1zLCB0ZXh0KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmluc2VydEJlZm9yZSA9IGZ1bmN0aW9uIChpdGVtcywgdGV4dCkge1xuICAgICAgICAgICAgdGhpcy5pbnNlcnRJdGVtcyhpdGVtcywgdGV4dCwgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaW5zZXJ0SXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIHRleHQsIGlzQWZ0ZXIpIHtcbiAgICAgICAgICAgIGlmIChpc0FmdGVyID09PSB2b2lkIDApIHsgaXNBZnRlciA9IHRydWU7IH1cbiAgICAgICAgICAgIHZhciBsaTtcbiAgICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgICB2YXIgbmF2SWR4O1xuICAgICAgICAgICAgdmFyIGlpdGVtcztcbiAgICAgICAgICAgIHZhciBtZW51aXRlbTtcbiAgICAgICAgICAgIHZhciBzaG93SWNvbjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuYXZJZHggPSB0aGlzLmdldEluZGV4KHRleHQpO1xuICAgICAgICAgICAgICAgIGlkeCA9IG5hdklkeC5wb3AoKTtcbiAgICAgICAgICAgICAgICBpaXRlbXMgPSB0aGlzLmdldEl0ZW1zKG5hdklkeCk7XG4gICAgICAgICAgICAgICAgbWVudWl0ZW0gPSBuZXcgTWVudUl0ZW0oaWl0ZW1zWzBdLCBudWxsLCBpdGVtc1tpXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWl0ZW1zLnNwbGljZShpc0FmdGVyID8gaWR4ICsgMSA6IGlkeCwgMCwgbWVudWl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmICghbmF2SWR4Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZHggPSBpc0FmdGVyID8gaWR4ICsgMSA6IGlkeDtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ljb24gPSB0aGlzLmhhc0ZpZWxkKGlpdGVtcywgJ2ljb25Dc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgbGkgPSB0aGlzLmNyZWF0ZUl0ZW0oW21lbnVpdGVtXSwgc2hvd0ljb24sICdtZW51JywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxpLCB0aGlzLmVsZW1lbnQuY2hpbGRyZW5baWR4XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0WkluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uO1xuICAgICAgICAgICAgdmFyIHByb3BzO1xuICAgICAgICAgICAgdmFyIHpJbmRleCA9IFsnOTk5J107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZG9jdW1lbnQuYm9keS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHByb3BzID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHByb3BzLmdldFByb3BlcnR5VmFsdWUoJ3otaW5kZXgnKTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHByb3BzLmdldFByb3BlcnR5VmFsdWUoJ3Bvc2l0aW9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAnYXV0bycgJiYgcG9zaXRpb24gIT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICAgICAgICAgIHpJbmRleC5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKE1hdGgubWF4LmFwcGx5KE1hdGgsIHpJbmRleCkgKyAxKS50b1N0cmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgaWYgKHdyYXBwZXIpIHtcbiAgICAgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIFsndG9wJywgJ2xlZnQnLCAnZGlzcGxheScsICd6LWluZGV4J10uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBbJ3JvbGUnLCAndGFiaW5kZXgnLCAnY2xhc3MnLCAnc3R5bGUnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFsnY2xhc3MnLCAnc3R5bGUnXS5pbmRleE9mKGtleSkgPT09IC0xIHx8ICFfdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsIHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKHdyYXBwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29udGV4dE1lbnU7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgXCJmaWx0ZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwic2hvd0l0ZW1PbkNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgTWVudUl0ZW0pXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcIml0ZW1zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcInRhcmdldFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHsgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnZWFzZScsIGVmZmVjdDogJ1NsaWRlRG93bicgfSlcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwiYW5pbWF0aW9uU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcImJlZm9yZUl0ZW1SZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcImJlZm9yZU9wZW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcIm9uT3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwiYmVmb3JlQ2xvc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcIm9uQ2xvc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcInNlbGVjdFwiLCB2b2lkIDApO1xuICAgIENvbnRleHRNZW51ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgQ29udGV4dE1lbnUpO1xuICAgIGV4cG9ydHMuQ29udGV4dE1lbnUgPSBDb250ZXh0TWVudTtcbiAgICBleHBvcnRzLmNvbnRleHRNZW51QnVpbGRlciA9IGVqMl9iYXNlXzEuQ3JlYXRlQnVpbGRlcihDb250ZXh0TWVudSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbnRleHQtbWVudS9jb250ZXh0LW1lbnUuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWxpc3RzXCJcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdGFiXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdGFiXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHRhYl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdGFiL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi90b29sYmFyL3Rvb2xiYXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCB0b29sYmFyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENMU19UQUIgPSAnZS10YWInO1xuICAgIHZhciBDTFNfSEVBREVSID0gJ2UtdGFiLWhlYWRlcic7XG4gICAgdmFyIENMU19DT05URU5UID0gJ2UtY29udGVudCc7XG4gICAgdmFyIENMU19JVEVNUyA9ICdlLWl0ZW1zJztcbiAgICB2YXIgQ0xTX0lURU0gPSAnZS1pdGVtJztcbiAgICB2YXIgQ0xTX1RFTVBMQVRFID0gJ2UtdGVtcGxhdGUnO1xuICAgIHZhciBDTFNfUlRMID0gJ2UtcnRsJztcbiAgICB2YXIgQ0xTX0FDVElWRSA9ICdlLWFjdGl2ZSc7XG4gICAgdmFyIENMU19ESVNBQkxFID0gJ2UtZGlzYWJsZSc7XG4gICAgdmFyIENMU19ISURERU4gPSAnZS1oaWRkZW4nO1xuICAgIHZhciBDTFNfRk9DVVMgPSAnZS1mb2N1c2VkJztcbiAgICB2YXIgQ0xTX0lDT05TID0gJ2UtaWNvbnMnO1xuICAgIHZhciBDTFNfSUNPTiA9ICdlLWljb24nO1xuICAgIHZhciBDTFNfSUNPTl9DTE9TRSA9ICdlLWNsb3NlLWljb24nO1xuICAgIHZhciBDTFNfQ0xPU0VfU0hPVyA9ICdlLWNsb3NlLXNob3cnO1xuICAgIHZhciBDTFNfVEVYVCA9ICdlLXRhYi10ZXh0JztcbiAgICB2YXIgQ0xTX0lORElDQVRPUiA9ICdlLWluZGljYXRvcic7XG4gICAgdmFyIENMU19XUkFQID0gJ2UtdGFiLXdyYXAnO1xuICAgIHZhciBDTFNfVEVYVF9XUkFQID0gJ2UtdGV4dC13cmFwJztcbiAgICB2YXIgQ0xTX1RBQl9JQ09OID0gJ2UtdGFiLWljb24nO1xuICAgIHZhciBDTFNfVEJfSVRFTVMgPSAnZS10b29sYmFyLWl0ZW1zJztcbiAgICB2YXIgQ0xTX1RCX0lURU0gPSAnZS10b29sYmFyLWl0ZW0nO1xuICAgIHZhciBDTFNfVEJfUE9QID0gJ2UtdG9vbGJhci1wb3AnO1xuICAgIHZhciBDTFNfVEJfUE9QVVAgPSAnZS10b29sYmFyLXBvcHVwJztcbiAgICB2YXIgQ0xTX1BPUFVQX09QRU4gPSAnZS1wb3B1cC1vcGVuJztcbiAgICB2YXIgQ0xTX1BPUFVQX0NMT1NFID0gJ2UtcG9wdXAtY2xvc2UnO1xuICAgIHZhciBDTFNfUFJPR1JFU1MgPSAnZS1wcm9ncmVzcyc7XG4gICAgdmFyIENMU19JR05PUkUgPSAnZS1pZ25vcmUnO1xuICAgIHZhciBUYWJBY3Rpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUYWJBY3Rpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGFiQWN0aW9uU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRhYkFjdGlvblNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ1NsaWRlTGVmdEluJylcbiAgICBdLCBUYWJBY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZWZmZWN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoNjAwKVxuICAgIF0sIFRhYkFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdlYXNlJylcbiAgICBdLCBUYWJBY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZWFzaW5nXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UYWJBY3Rpb25TZXR0aW5ncyA9IFRhYkFjdGlvblNldHRpbmdzO1xuICAgIHZhciBUYWJBbmltYXRpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUYWJBbmltYXRpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGFiQW5pbWF0aW9uU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRhYkFuaW1hdGlvblNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7IGVmZmVjdDogJ1NsaWRlTGVmdEluJywgZHVyYXRpb246IDYwMCwgZWFzaW5nOiAnZWFzZScgfSwgVGFiQWN0aW9uU2V0dGluZ3MpXG4gICAgXSwgVGFiQW5pbWF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInByZXZpb3VzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7IGVmZmVjdDogJ1NsaWRlUmlnaHRJbicsIGR1cmF0aW9uOiA2MDAsIGVhc2luZzogJ2Vhc2UnIH0sIFRhYkFjdGlvblNldHRpbmdzKVxuICAgIF0sIFRhYkFuaW1hdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJuZXh0XCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UYWJBbmltYXRpb25TZXR0aW5ncyA9IFRhYkFuaW1hdGlvblNldHRpbmdzO1xuICAgIHZhciBIZWFkZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGVhZGVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEhlYWRlcjtcbiAgICB9KGVqMl9iYXNlXzIuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEhlYWRlci5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEhlYWRlci5wcm90b3R5cGUsIFwiaWNvbkNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdsZWZ0JylcbiAgICBdLCBIZWFkZXIucHJvdG90eXBlLCBcImljb25Qb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuSGVhZGVyID0gSGVhZGVyO1xuICAgIHZhciBUYWJJdGVtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRhYkl0ZW0sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRhYkl0ZW0oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRhYkl0ZW07XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBIZWFkZXIpXG4gICAgXSwgVGFiSXRlbS5wcm90b3R5cGUsIFwiaGVhZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgVGFiSXRlbS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFRhYkl0ZW0ucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVGFiSXRlbS5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlRhYkl0ZW0gPSBUYWJJdGVtO1xuICAgIHZhciBUYWIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVGFiLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBUYWIob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnByZXZJbmRleCA9IDA7XG4gICAgICAgICAgICBfdGhpcy5zaG93ID0geyBuYW1lOiAnU2xpZGVEb3duJywgZHVyYXRpb246IDEwMCB9O1xuICAgICAgICAgICAgX3RoaXMuaGlkZSA9IHsgbmFtZTogJ1NsaWRlVXAnLCBkdXJhdGlvbjogMTAwIH07XG4gICAgICAgICAgICBfdGhpcy5hbmltYXRlT3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMuYW5pbU9iaiA9IG5ldyBlajJfYmFzZV81LkFuaW1hdGlvbihfdGhpcy5hbmltYXRlT3B0aW9ucyk7XG4gICAgICAgICAgICBfdGhpcy5tYXhIZWlnaHQgPSAwO1xuICAgICAgICAgICAgX3RoaXMudGl0bGUgPSAnQ2xvc2UnO1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICB0YWI6ICd0YWInLFxuICAgICAgICAgICAgICAgIGhvbWU6ICdob21lJyxcbiAgICAgICAgICAgICAgICBlbmQ6ICdlbmQnLFxuICAgICAgICAgICAgICAgIGVudGVyOiAnZW50ZXInLFxuICAgICAgICAgICAgICAgIHNwYWNlOiAnc3BhY2UnLFxuICAgICAgICAgICAgICAgIGRlbGV0ZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgbW92ZUxlZnQ6ICdsZWZ0YXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVSaWdodDogJ3JpZ2h0YXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVVcDogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVEb3duOiAnZG93bmFycm93J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBUYWIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGJPYmopKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50Yk9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgWydyb2xlJywgJ2FyaWEtZGlzYWJsZWQnLCAnYXJpYS1hY3RpdmVkZXNjZW5kYW50JywgJ3RhYmluZGV4JywgJ2FyaWEtb3JpZW50YXRpb24nXS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh2YWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjbnRFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEFCICsgJyA+IC4nICsgQ0xTX0NPTlRFTlQsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1RFTVBMQVRFKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoY250RWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBjbnRFbGUuaW5uZXJIVE1MID0gdGhpcy5jbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Rlc3Ryb3llZCcpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNQb3B1cCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pbml0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNTd2lwZWVkID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGVqMl9iYXNlXzMuQnJvd3Nlci5pbmZvLm5hbWU7XG4gICAgICAgICAgICB2YXIgY3NzID0gKG5hbWUgPT09ICdtc2llJykgPyAnZS1pZScgOiAobmFtZSA9PT0gJ2VkZ2UnKSA/ICdlLWVkZ2UnIDogKG5hbWUgPT09ICdzYWZhcmknKSA/ICdlLXNhZmFyaScgOiAnJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd3aWR0aCc6IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLndpZHRoKSwgJ2hlaWdodCc6IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLmhlaWdodCkgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKHRoaXMuZWxlbWVudCwgdGhpcy5jc3NDbGFzcywgdHJ1ZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7IHJvbGU6ICd0YWJsaXN0JywgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnLCAnYXJpYS1hY3RpdmVkZXNjZW5kYW50JzogJycgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKHRoaXMuZWxlbWVudCwgY3NzLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRhaW5lcigpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRSZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW5kZXJDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID4gMCAmJiBlbGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19DT05URU5UIH0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9yaWVudGF0aW9uKHRoaXMuaGVhZGVyUGxhY2VtZW50LCBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSEVBREVSIH0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVGVtcGxhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1RlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZChDTFNfVEVNUExBVEUpO1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSEVBREVSKTtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyICYmIHRoaXMuaGVhZGVyUGxhY2VtZW50ID09PSAnQm90dG9tJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE9yaWVudGF0aW9uKHRoaXMuaGVhZGVyUGxhY2VtZW50LCBoZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCB0aGlzLmVsZW1lbnQpKSAmJiAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgdGhpcy5lbGVtZW50KSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckhlYWRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19IRUFERVIgKyAnIC4nICsgQ0xTX1RCX0lURU1TLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRiSXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUucmlwcGxlRWZmZWN0KHRoaXMudGJJdGVtcywgeyBzZWxlY3RvcjogJy5lLXRhYi13cmFwJyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50Ykl0ZW1zID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVEJfSVRFTVMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmRyTGluZSA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JTkRJQ0FUT1IgKyAnICcgKyBDTFNfSElEREVOICsgJyAnICsgQ0xTX0lHTk9SRSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjckNudCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1oc2Nyb2xsLWNvbnRlbnQnLCB0aGlzLnRiSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoc2NyQ250KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyQ250Lmluc2VydEJlZm9yZSh0aGlzLmJkckxpbmUsIHNjckNudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJJdGVtcy5pbnNlcnRCZWZvcmUodGhpcy5iZHJMaW5lLCB0aGlzLnRiSXRlbXMuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50SGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UlRMKHRoaXMuZW5hYmxlUnRsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW5kZXJIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRhYkl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmhkckVsZSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19IRUFERVIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmJ0bkNscyA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBDTFNfSUNPTlMgKyAnICcgKyBDTFNfSUNPTl9DTE9TRSwgYXR0cnM6IHsgdGl0bGU6IHRoaXMudGl0bGUgfSB9KS5vdXRlckhUTUw7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRhYkl0ZW1zID0gdGhpcy5wYXJzZU9iamVjdCh0aGlzLml0ZW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IHRoaXMuaGRyRWxlLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgaGRySXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaGRySXRlbXMucHVzaCh0aGlzLmhkckVsZS5jaGlsZHJlbi5pdGVtKGkpLmlubmVySFRNTCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZHJFbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGRyRWxlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JVEVNUyB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGhkckl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IENMU19JVEVNLCBpZDogQ0xTX0lURU0gKyAnXycgKyBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyByb2xlOiAndGFiJywgJ2FyaWEtY29udHJvbHMnOiBDTFNfQ09OVEVOVCArICdfJyArIGluZGV4LCAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZScgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogQ0xTX1RFWFQsIGlubmVySFRNTDogaXRlbSwgYXR0cnM6IHsgJ3JvbGUnOiAncHJlc2VudGF0aW9uJyB9IH0pLm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RFWFRfV1JBUCwgaW5uZXJIVE1MOiB0eHQgKyBfdGhpcy5idG5DbHMgfSkub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdyYXAgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfV1JBUCwgaW5uZXJIVE1MOiBjb250LCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0lURU1TLCBfdGhpcy5lbGVtZW50KS5hcHBlbmRDaGlsZChlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIGF0dHIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNLCBfdGhpcy5lbGVtZW50KVtpbmRleF0uYXBwZW5kQ2hpbGQod3JhcCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGJPYmogPSBuZXcgdG9vbGJhcl8xLlRvb2xiYXIoe1xuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3dNb2RlOiB0aGlzLm92ZXJmbG93TW9kZSxcbiAgICAgICAgICAgICAgICBpdGVtczogKHRhYkl0ZW1zLmxlbmd0aCAhPT0gMCkgPyB0YWJJdGVtcyA6IFtdLFxuICAgICAgICAgICAgICAgIGNsaWNrZWQ6IHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50Yk9iai5hcHBlbmRUbyh0aGlzLmhkckVsZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLW9yaWVudGF0aW9uJzogJ2hvcml6b250YWwnIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRDbG9zZUJ1dHRvbih0aGlzLnNob3dDbG9zZUJ1dHRvbik7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBoZWFkZXJQbGFjZW1lbnQ6ICh0aGlzLmVsZW1lbnQuY2hpbGRyZW4uaXRlbSgwKS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0hFQURFUikpID8gJ1RvcCcgOiAnQm90dG9tJyB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW5kZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbnRFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBoZHJJdGVtID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbnQgPSAodGhpcy5jbnRFbGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgPyB0aGlzLmNudEVsZS5pbm5lckhUTUwgOiAnJztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSB0aGlzLmNudEVsZS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhkckl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRzLmxlbmd0aCAtIDEgPj0gaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHMuaXRlbShpKS5jbGFzc05hbWUgKz0gQ0xTX0lURU07XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXMoY29udGVudHMuaXRlbShpKSwgeyAncm9sZSc6ICd0YWJwYW5lbCcsICdhcmlhLWxhYmVsbGVkYnknOiBDTFNfSVRFTSArICdfJyArIGkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50cy5pdGVtKGkpLmlkID0gQ0xTX0NPTlRFTlQgKyAnXycgKyBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnBhcnNlT2JqZWN0ID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluSFRNTCA9ICcnO1xuICAgICAgICAgICAgdmFyIHRiQ291bnQgPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgdEl0ZW1zID0gW107XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtLmhlYWRlci5pY29uUG9zaXRpb24pKSA/ICcnIDogaXRlbS5oZWFkZXIuaWNvblBvc2l0aW9uO1xuICAgICAgICAgICAgICAgIHZhciBjc3MgPSAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtLmhlYWRlci5pY29uQ3NzKSkgPyAnJyA6IGl0ZW0uaGVhZGVyLmljb25Dc3M7XG4gICAgICAgICAgICAgICAgdmFyIHR4dCA9IGl0ZW0uaGVhZGVyLnRleHQ7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gKCh0YkNvdW50ID09PSAwKSA/IGluZGV4IDogKF90aGlzLmlzUmVwbGFjZSA9PT0gdHJ1ZSkgPyBpbmRleCA6IHRiQ291bnQgKyBpbmRleCk7XG4gICAgICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gKGl0ZW0uZGlzYWJsZWQpID8gJyAnICsgQ0xTX0RJU0FCTEUgOiAnJztcbiAgICAgICAgICAgICAgICB2YXIgdEh0bWwgPSAoKHR4dCBpbnN0YW5jZW9mIE9iamVjdCkgPyB0eHQub3V0ZXJIVE1MIDogdHh0KTtcbiAgICAgICAgICAgICAgICB2YXIgdHh0RW1wdHkgPSAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodEh0bWwpICYmIHRIdG1sICE9PSAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRFbGUgPSAodHh0RW1wdHkpID8gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogQ0xTX1RFWFQsIGlubmVySFRNTDogdEh0bWwsIGF0dHJzOiB7ICdyb2xlJzogJ3ByZXNlbnRhdGlvbicgfVxuICAgICAgICAgICAgICAgIH0pLm91dGVySFRNTCA6ICcnO1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IENMU19JQ09OUyArICcgJyArIENMU19UQUJfSUNPTiArICcgJyArIENMU19JQ09OICsgJy0nICsgcG9zICsgJyAnICsgY3NzXG4gICAgICAgICAgICAgICAgfSkub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgIGlmICgodHh0ID09PSAnJyB8fCB0eHQgPT09IHVuZGVmaW5lZCkgJiYgY3NzID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHR4dCAhPT0gJycgJiYgdHh0ICE9PSB1bmRlZmluZWQpICYmIGNzcyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluSFRNTCA9IChwb3MgPT09ICdsZWZ0JyB8fCBwb3MgPT09ICd0b3AnKSA/IGljb24gKyAnJyArIHRFbGUgOiB0RWxlICsgJycgKyBpY29uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5IVE1MID0gKGNzcyA9PT0gJycpID8gdEVsZSA6IGljb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRDb250ID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RFWFRfV1JBUCwgaW5uZXJIVE1MOiBpbkhUTUwgKyAnJyArIF90aGlzLmJ0bkNscyB9KS5vdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXAgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfV1JBUCwgaW5uZXJIVE1MOiB0Q29udCwgYXR0cnM6IHsgdGFiSW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0ck9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IENMU19JVEVNICsgJ18nICsgaWQsIHJvbGU6ICd0YWInLCAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB0SXRlbSA9IHsgaHRtbEF0dHJpYnV0ZXM6IGF0dHJPYmosIHRlbXBsYXRlOiB3cmFwLm91dGVySFRNTCB9O1xuICAgICAgICAgICAgICAgIHRJdGVtLmNzc0NsYXNzID0gaXRlbS5jc3NDbGFzcyArICcnICsgZGlzYWJsZWQgKyAnJyArICgoY3NzICE9PSAnJykgPyAnZS1pJyArIHBvcyA6ICcnKSArICcgJyArICgoIXR4dEVtcHR5KSA/IENMU19JQ09OIDogJycpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPT09ICd0b3AnIHx8IHBvcyA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXZlcnRpY2FsLWljb24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdEl0ZW1zLnB1c2godEl0ZW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdEl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnJlbW92ZUFjdGl2ZUNsYXNzID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgaGRyQWN0RWxlID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJzpyb290IC4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVEJfSVRFTSArICcuJyArIENMU19BQ1RJVkUsIHRoaXMuZWxlbWVudClbMF07XG4gICAgICAgICAgICBpZiAodGhpcy5oZWFkZXJQbGFjZW1lbnQgPT09ICdCb3R0b20nKSB7XG4gICAgICAgICAgICAgICAgaGRyQWN0RWxlID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJzpyb290IC4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVEJfSVRFTSArICcuJyArIENMU19BQ1RJVkUsIHRoaXMuZWxlbWVudC5jaGlsZHJlblsxXSlbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaGRyQWN0RWxlKSkge1xuICAgICAgICAgICAgICAgIGhkckFjdEVsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgIHZhciBubyA9IHRoaXMuZXh0SW5kZXgoaGRyQWN0RWxlLmlkKTtcbiAgICAgICAgICAgICAgICB2YXIgdHJnID0gdGhpcy5maW5kRWxlKGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1jb250ZW50JywgdGhpcy5lbGVtZW50KS5jaGlsZHJlbiwgQ0xTX0NPTlRFTlQgKyAnXycgKyBubyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuY2hlY2tQb3B1cE92ZXJmbG93ID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdGhpcy50YlBvcCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9QT1AsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgcG9wSWNvbiA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1ob3ItbmF2JywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciB0YnJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNUywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICgodGhpcy5lbmFibGVSdGwgJiYgKChwb3BJY29uLm9mZnNldExlZnQgKyBwb3BJY29uLm9mZnNldFdpZHRoKSA+IHRickl0ZW1zLm9mZnNldExlZnQpKVxuICAgICAgICAgICAgICAgIHx8ICghdGhpcy5lbmFibGVSdGwgJiYgcG9wSWNvbi5vZmZzZXRMZWZ0IDwgdGJySXRlbXMub2Zmc2V0V2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQoQ0xTX1RCX1BPUFVQKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRiUG9wLmluc2VydEJlZm9yZShlbGUuY2xvbmVOb2RlKHRydWUpLCBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfUE9QVVAsIHRoaXMudGJQb3ApWzBdKTtcbiAgICAgICAgICAgICAgICBlbGUub3V0ZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5wb3B1cEhhbmRsZXIgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgcmlwRWxlID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLXJpcHBsZS1lbGVtZW50Jyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQocmlwRWxlKSkge1xuICAgICAgICAgICAgICAgIHJpcEVsZS5vdXRlckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB0YXJnZXQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfV1JBUCkuY2xhc3NMaXN0LnJlbW92ZSgnZS1yaXBwbGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGJJdGVtID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU1TICsgJyAuJyArIENMU19UQl9JVEVNLCB0aGlzLmhkckVsZSk7XG4gICAgICAgICAgICB2YXIgbGFzdENoaWxkID0gdGhpcy50Ykl0ZW1bdGhpcy50Ykl0ZW0ubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAodGhpcy50Ykl0ZW0ubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1RCX1BPUFVQKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRiSXRlbXMuYXBwZW5kQ2hpbGQodGFyZ2V0LmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RFbGVJZCA9IHRhcmdldC5pZDtcbiAgICAgICAgICAgICAgICB0YXJnZXQub3V0ZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tQb3B1cE92ZXJmbG93KGxhc3RDaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZFbGUgPSB0aGlzLnRiSXRlbXMubGFzdENoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQb3B1cE92ZXJmbG93KHByZXZFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlzUG9wdXAgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLnRiSXRlbXMpLmxlbmd0aCAtIDE7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc2V0Q2xvc2VCdXR0b24gPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB2YXIgdHJnID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICh2YWwgPT09IHRydWUpID8gdHJnLmNsYXNzTGlzdC5hZGQoQ0xTX0NMT1NFX1NIT1cpIDogdHJnLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0NMT1NFX1NIT1cpO1xuICAgICAgICAgICAgdGhpcy50Yk9iai5yZWZyZXNoT3ZlcmZsb3coKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEFjdEVsZVBvc2l0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucHJldkN0bkFuaW1hdGlvbiA9IGZ1bmN0aW9uIChwcmV2LCBjdXJyZW50KSB7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uO1xuICAgICAgICAgICAgdmFyIGNoZWNrUlRMID0gdGhpcy5lbmFibGVSdGwgfHwgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTFNfUlRMKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUG9wdXAgfHwgcHJldiA8PSBjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uLnByZXZpb3VzLmVmZmVjdCA9PT0gJ1NsaWRlTGVmdEluJykge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gPSB7IG5hbWU6ICdTbGlkZUxlZnRPdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLnByZXZpb3VzLmR1cmF0aW9uLCB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb24ucHJldmlvdXMuZWFzaW5nIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbi5uZXh0LmVmZmVjdCA9PT0gJ1NsaWRlUmlnaHRJbicpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uID0geyBuYW1lOiAnU2xpZGVSaWdodE91dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb24ubmV4dC5kdXJhdGlvbiwgdGltaW5nRnVuY3Rpb246IHRoaXMuYW5pbWF0aW9uLm5leHQuZWFzaW5nIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhbmltYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUudHJpZ2dlclByZXZBbmltYXRpb24gPSBmdW5jdGlvbiAob2xkQ250LCBwcmV2SW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRlT2JqID0gdGhpcy5wcmV2Q3RuQW5pbWF0aW9uKHByZXZJbmRleCwgdGhpcy5zZWxlY3RlZEl0ZW0pO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGFuaW1hdGVPYmopKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZU9iai5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZShvbGRDbnQsIHsgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250LmNsYXNzTGlzdC5hZGQoQ0xTX1BST0dSRVNTKTtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250LmNsYXNzTGlzdC5hZGQoJ2UtdmlldycpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZU9iai5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZENudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBvbGRDbnQuY2xhc3NMaXN0LnJlbW92ZShDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1BST0dSRVNTKTtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250LmNsYXNzTGlzdC5yZW1vdmUoJ2UtdmlldycpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKG9sZENudCwgeyAnZGlzcGxheSc6ICcnLCAncG9zaXRpb24nOiAnJyB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ldyBlajJfYmFzZV81LkFuaW1hdGlvbihhbmltYXRlT2JqKS5hbmltYXRlKG9sZENudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvbGRDbnQuY2xhc3NMaXN0LnJlbW92ZShDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS50cmlnZ2VyQW5pbWF0aW9uID0gZnVuY3Rpb24gKGlkLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwcmV2SW5kZXggPSB0aGlzLnByZXZJbmRleDtcbiAgICAgICAgICAgIHZhciBpdGVtQ29sbGVjdGlvbiA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0NPTlRFTlQpLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIHZhciBvbGRDbnQ7XG4gICAgICAgICAgICBpdGVtQ29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IF90aGlzLnByZXZBY3RpdmVFbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250ID0gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBwcmV2RWxlID0gdGhpcy50Ykl0ZW1bcHJldkluZGV4XTtcbiAgICAgICAgICAgIHZhciBubyA9IHRoaXMuZXh0SW5kZXgodGhpcy50Ykl0ZW1bdGhpcy5zZWxlY3RlZEl0ZW1dLmlkKTtcbiAgICAgICAgICAgIHZhciBuZXdDbnQ7XG4gICAgICAgICAgICBuZXdDbnQgPSB0aGlzLmZpbmRFbGUodGhpcy5jbnRFbGUuY2hpbGRyZW4sIENMU19DT05URU5UICsgJ18nICsgbm8pO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQob2xkQ250KSAmJiAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChwcmV2RWxlKSkge1xuICAgICAgICAgICAgICAgIHZhciBpZE5vID0gdGhpcy5leHRJbmRleChwcmV2RWxlLmlkKTtcbiAgICAgICAgICAgICAgICBvbGRDbnQgPSB0aGlzLmZpbmRFbGUodGhpcy5jbnRFbGUuY2hpbGRyZW4sIENMU19DT05URU5UICsgJ18nICsgaWRObyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pbml0UmVuZGVyIHx8IHZhbHVlID09PSBmYWxzZSB8fCB0aGlzLmFuaW1hdGlvbiA9PT0ge30gfHwgZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmFuaW1hdGlvbikpIHtcbiAgICAgICAgICAgICAgICBpZiAob2xkQ250ICYmIG9sZENudCAhPT0gbmV3Q250KSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZENudC5jbGFzc0xpc3QucmVtb3ZlKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY250ID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgYW5pbWF0ZU9iajtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZJbmRleCA+IHRoaXMuc2VsZWN0ZWRJdGVtICYmICF0aGlzLmlzUG9wdXApIHtcbiAgICAgICAgICAgICAgICB2YXIgb3BlbkVmZiA9IHRoaXMuYW5pbWF0aW9uLnByZXZpb3VzLmVmZmVjdDtcbiAgICAgICAgICAgICAgICBhbmltYXRlT2JqID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAoKG9wZW5FZmYgPT09ICdOb25lJykgPyAnJyA6ICgob3BlbkVmZiAhPT0gJ1NsaWRlTGVmdEluJykgPyBvcGVuRWZmIDogJ1NsaWRlTGVmdEluJykpLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb24ucHJldmlvdXMuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5wcmV2aW91cy5lYXNpbmdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc1BvcHVwIHx8IHRoaXMucHJldkluZGV4IDwgdGhpcy5zZWxlY3RlZEl0ZW0gfHwgdGhpcy5wcmV2SW5kZXggPT09IHRoaXMuc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsc0VmZiA9IHRoaXMuYW5pbWF0aW9uLm5leHQuZWZmZWN0O1xuICAgICAgICAgICAgICAgIGFuaW1hdGVPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICgoY2xzRWZmID09PSAnTm9uZScpID8gJycgOiAoKGNsc0VmZiAhPT0gJ1NsaWRlUmlnaHRJbicpID8gY2xzRWZmIDogJ1NsaWRlUmlnaHRJbicpKSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLm5leHQuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5uZXh0LmVhc2luZ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmltYXRlT2JqLnByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNudC5jbGFzc0xpc3QuYWRkKENMU19QUk9HUkVTUyk7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0QWN0aXZlQm9yZGVyKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYW5pbWF0ZU9iai5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY250LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1BST0dSRVNTKTtcbiAgICAgICAgICAgICAgICBuZXdDbnQuY2xhc3NMaXN0LmFkZChDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW5pdFJlbmRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclByZXZBbmltYXRpb24ob2xkQ250LCBwcmV2SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlRWxlID0gbmV3Q250LmlkO1xuICAgICAgICAgICAgdGhpcy5pc1BvcHVwID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoYW5pbWF0ZU9iai5uYW1lID09PSAnJykge1xuICAgICAgICAgICAgICAgIG5ld0NudC5jbGFzc0xpc3QuYWRkKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzUuQW5pbWF0aW9uKGFuaW1hdGVPYmopLmFuaW1hdGUobmV3Q250KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5rZXlQcmVzc2VkID0gZnVuY3Rpb24gKHRyZykge1xuICAgICAgICAgICAgdmFyIHRyZ1BhcmVudCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0cmcsICcuJyArIENMU19IRUFERVIgKyAnIC4nICsgQ0xTX1RCX0lURU0pO1xuICAgICAgICAgICAgdmFyIHRyZ0luZGV4ID0gdGhpcy5nZXRFbGVJbmRleCh0cmdQYXJlbnQpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucG9wRWxlKSAmJiB0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhvci1uYXYnKSkge1xuICAgICAgICAgICAgICAgICh0aGlzLnBvcEVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1BPUFVQX09QRU4pKSA/IHRoaXMucG9wT2JqLmhpZGUodGhpcy5oaWRlKSA6IHRoaXMucG9wT2JqLnNob3codGhpcy5zaG93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRyZy5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc2Nyb2xsLW5hdicpKSB7XG4gICAgICAgICAgICAgICAgdHJnLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodHJnUGFyZW50KSAmJiB0cmdQYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0cmdJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBvcEVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmhpZGUodGhpcy5oaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5nZXRFbGVJbmRleCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfSEVBREVSICsgJyAuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpLCBpdGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5leHRJbmRleCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkLnJlcGxhY2UoQ0xTX0lURU0gKyAnXycsICcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKGVsZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICAgICAgICB2YXIgdGVtcEVsZSA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB2YXIgY250ID0gdGhpcy5pdGVtc1tOdW1iZXIoaW5kZXgpXS5jb250ZW50O1xuICAgICAgICAgICAgdmFyIGNudEhUTUwgPSAodHlwZW9mIGNudCAhPT0gJ29iamVjdCcpID8gY250IDogY250Lm91dGVySFRNTDtcbiAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV81LmNvbXBpbGUoY250SFRNTCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGVtcGxhdGVGbikgJiYgdGVtcGxhdGVGbigpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRlbXBsYXRlRm4oKSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcEVsZS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKHRlbXBFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlLmlubmVySFRNTCA9IGNudEhUTUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZmluZEVsZSA9IGZ1bmN0aW9uIChpdGVtcywga2V5KSB7XG4gICAgICAgICAgICB2YXIgZWxlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXS5pZCA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZSA9IGl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldE9yaWVudGF0aW9uID0gZnVuY3Rpb24gKHBsYWNlLCBlbGUpIHtcbiAgICAgICAgICAgIChwbGFjZSA9PT0gJ0JvdHRvbScpID8gdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVsZSkgOiB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsZSwgZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIHRoaXMuZWxlbWVudCkpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldENzc0NsYXNzID0gZnVuY3Rpb24gKGVsZSwgY2xzLCB2YWwpIHtcbiAgICAgICAgICAgIGlmIChjbHMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxpc3QgPSBjbHMuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQobGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZShsaXN0W2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc2V0Q29udGVudEhlaWdodCA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY250RWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWlnaHQ7XG4gICAgICAgICAgICB2YXIgaGRyRWxlID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodEFkanVzdE1vZGUgPT09ICdOb25lJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5jbnRFbGUsIHsgJ2hlaWdodCc6ICh0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gaGRyRWxlLm9mZnNldEhlaWdodCkgKyAncHgnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaGVpZ2h0QWRqdXN0TW9kZSA9PT0gJ0ZpbGwnKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6ICcxMDAlJyB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuY250RWxlLCB7ICdoZWlnaHQnOiAnYXV0bycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhlaWdodEFkanVzdE1vZGUgPT09ICdBdXRvJykge1xuICAgICAgICAgICAgICAgIHZhciBjbnQgPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfQ09OVEVOVCArICcgPiAuJyArIENMU19JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVGVtcGxhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNudFtpXS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6YmxvY2s7IHZpc2liaWxpdHk6IHZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5tYXhIZWlnaHQsIHRoaXMuZ2V0SGVpZ2h0KGNudFtpXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY250W2ldLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbnRbaV0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3Zpc2liaWxpdHknKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbnRFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbnRFbGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IChDTFNfQ09OVEVOVCArICdfJyArIDApLCBjbGFzc05hbWU6IENMU19JVEVNICsgJyAnICsgQ0xTX0FDVElWRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyAncm9sZSc6ICd0YWJwYW5lbCcsICdhcmlhLWxhYmVsbGVkYnknOiBDTFNfSVRFTSArICdfJyArIDAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmNudEVsZS5jaGlsZHJlbi5pdGVtKDApO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudChlbGUsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSBNYXRoLm1heCh0aGlzLm1heEhlaWdodCwgdGhpcy5nZXRIZWlnaHQoZWxlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KGVsZSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuY250RWxlLCB7ICdoZWlnaHQnOiB0aGlzLm1heEhlaWdodCArICdweCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuY250RWxlLCB7ICdoZWlnaHQnOiAnYXV0bycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIGNzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlKTtcbiAgICAgICAgICAgIHJldHVybiBlbGUub2Zmc2V0SGVpZ2h0ICsgcGFyc2VGbG9hdChjcy5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXRvcCcpKSArIHBhcnNlRmxvYXQoY3MuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1ib3R0b20nKSkgK1xuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY3MuZ2V0UHJvcGVydHlWYWx1ZSgnbWFyZ2luLXRvcCcpKSArIHBhcnNlRmxvYXQoY3MuZ2V0UHJvcGVydHlWYWx1ZSgnbWFyZ2luLWJvdHRvbScpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZXRBY3RpdmVCb3JkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdHJnID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU0gKyAnLicgKyBDTFNfQUNUSVZFLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyUGxhY2VtZW50ID09PSAnQm90dG9tJykge1xuICAgICAgICAgICAgICAgIHRyZyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNICsgJy4nICsgQ0xTX0FDVElWRSwgdGhpcy5lbGVtZW50LmNoaWxkcmVuWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmcgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcm9vdCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0cmcsICcuJyArIENMU19UQUIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAhPT0gcm9vdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoc0NudCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19IRUFERVIgKyAnIC4nICsgQ0xTX1RCX0lURU1TICsgJyAuZS1oc2Nyb2xsLWNvbnRlbnQnLCB0aGlzLmVsZW1lbnQuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgdGhpcy50Ykl0ZW1zID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVEJfSVRFTVMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgYmFyID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfSU5ESUNBVE9SLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyUGxhY2VtZW50ID09PSAnQm90dG9tJykge1xuICAgICAgICAgICAgICAgIGhzQ250ID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVEJfSVRFTVMgKyAnIC5lLWhzY3JvbGwtY29udGVudCcsIHRoaXMuZWxlbWVudC5jaGlsZHJlblsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGJXaWR0aCA9IChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGhzQ250KSkgPyB0aGlzLnRiSXRlbXMub2Zmc2V0V2lkdGggOiBoc0NudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIGlmICh0YldpZHRoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZShiYXIsIHsgJ2xlZnQnOiB0cmcub2Zmc2V0TGVmdCArICdweCcsICdyaWdodCc6IHRiV2lkdGggLSAodHJnLm9mZnNldExlZnQgKyB0cmcub2Zmc2V0V2lkdGgpICsgJ3B4JyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUoYmFyLCB7ICdsZWZ0JzogJ2F1dG8nLCAncmlnaHQnOiAnYXV0bycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5iZHJMaW5lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmRyTGluZS5jbGFzc0xpc3QucmVtb3ZlKENMU19ISURERU4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldEFjdGl2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy50Ykl0ZW0gPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfSEVBREVSICsgJyAuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHRyZyA9IHRoaXMudGJJdGVtW3ZhbHVlXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgc2VsZWN0ZWRJdGVtOiB2YWx1ZSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDAgfHwgaXNOYU4odmFsdWUpIHx8IHRoaXMudGJJdGVtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2ID0gdGhpcy50Ykl0ZW1bdGhpcy5wcmV2SW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChwcmV2KSkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModHJnLCB7ICdhcmlhLWNvbnRyb2xzJzogQ0xTX0NPTlRFTlQgKyAnXycgKyB2YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpZCA9IHRyZy5pZDtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlQ2xhc3MoaWQpO1xuICAgICAgICAgICAgdHJnLmNsYXNzTGlzdC5hZGQoQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICB0cmcuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIHZhciBubyA9IE51bWJlcih0aGlzLmV4dEluZGV4KGlkKSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnOiBpZCB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIHRoaXMuZWxlbWVudCkuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJnXzEgPSB0aGlzLmZpbmRFbGUoZWoyX2Jhc2VfMi5zZWxlY3QoJy5lLWNvbnRlbnQnLCB0aGlzLmVsZW1lbnQpLmNoaWxkcmVuLCBDTFNfQ09OVEVOVCArICdfJyArIG5vKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRyZ18xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJnXzEuY2xhc3NMaXN0LmFkZChDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJBbmltYXRpb24oaWQsIHRoaXMuZW5hYmxlQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19DT05URU5UICsgJyA+ICMnICsgQ0xTX0NPTlRFTlQgKyAnXycgKyB0aGlzLmV4dEluZGV4KGlkKSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNudEVsZS5hcHBlbmRDaGlsZChlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBDTFNfQ09OVEVOVCArICdfJyArIHRoaXMuZXh0SW5kZXgoaWQpLCBjbGFzc05hbWU6IENMU19JVEVNICsgJyAnICsgQ0xTX0FDVElWRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJvbGU6ICd0YWJwYW5lbCcsICdhcmlhLWxhYmVsbGVkYnknOiBDTFNfSVRFTSArICdfJyArIHRoaXMuZXh0SW5kZXgoaWQpIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlVHJnID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQgKyAnID4gIycgKyBDTFNfQ09OVEVOVCArICdfJyArIHRoaXMuZXh0SW5kZXgoaWQpLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldENvbnRlbnQoZWxlVHJnLCBOdW1iZXIodGhpcy5leHRJbmRleChpZCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyQW5pbWF0aW9uKGlkLCB0aGlzLmVuYWJsZUFuaW1hdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICAgICAgdmFyIGN1ckFjdEl0ZW0gPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSICsgJyAjJyArIGlkLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoSXRlbVZpc2liaWxpdHkoY3VyQWN0SXRlbSk7XG4gICAgICAgICAgICBjdXJBY3RJdGVtLmZpcnN0Q2hpbGQuZm9jdXMoKTtcbiAgICAgICAgICAgIHZhciBldmVudEFyZyA9IHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW06IHRoaXMucHJldkl0ZW0sXG4gICAgICAgICAgICAgICAgcHJldmlvdXNJbmRleDogdGhpcy5wcmV2SW5kZXgsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtOiB0cmcsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleDogdmFsdWUsXG4gICAgICAgICAgICAgICAgaXNTd2lwZWQ6IHRoaXMuaXNTd2lwZWVkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdzZWxlY3RlZCcsIGV2ZW50QXJnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZXRJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdGhpcy5pc1JlcGxhY2UgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50Ykl0ZW1zID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVEJfSVRFTVMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnRiT2JqLml0ZW1zID0gdGhpcy5wYXJzZU9iamVjdChpdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnRiT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLmlzUmVwbGFjZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldFJUTCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy50Yk9iai5lbmFibGVSdGwgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudGJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3ModGhpcy5lbGVtZW50LCBDTFNfUlRMLCB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZWZyZXNoQWN0aXZlQm9yZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYmRyTGluZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJkckxpbmUuY2xhc3NMaXN0LmFkZChDTFNfSElEREVOKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQm9yZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlZnJlc2hBY3RFbGVQb3NpdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLmhvdmVySGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAna2V5ZG93bicsIHRoaXMuc3BhY2VLZXlEb3duLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNudEVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlID0gbmV3IGVqMl9iYXNlXzUuVG91Y2godGhpcy5jbnRFbGUsIHsgc3dpcGU6IHRoaXMuc3dpcGVIYW5kbGVyLmJpbmQodGhpcykgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmtleU1vZHVsZSA9IG5ldyBlajJfYmFzZV8zLktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwgeyBrZXlBY3Rpb246IHRoaXMua2V5SGFuZGxlci5iaW5kKHRoaXMpLCBrZXlDb25maWdzOiB0aGlzLmtleUNvbmZpZ3MgfSk7XG4gICAgICAgICAgICB0aGlzLnRhYktleU1vZHVsZSA9IG5ldyBlajJfYmFzZV8zLktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczogeyBvcGVuUG9wdXA6ICdzaGlmdCtmMTAnLCB0YWI6ICd0YWInLCBzaGlmdFRhYjogJ3NoaWZ0K3RhYicgfSxcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdrZXlkb3duJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5rZXlNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy50YWJLZXlNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY250RWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVmcmVzaEFjdEVsZVBvc2l0aW9uLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuaG92ZXJIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTFNfRk9DVVMpO1xuICAgICAgICAgICAgdmFyIHRyZyA9IGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgdHJnUGFyZW50ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRyZywgJy4nICsgQ0xTX1RCX0lURU0pO1xuICAgICAgICAgICAgdmFyIHRyZ0luZGV4ID0gdGhpcy5nZXRFbGVJbmRleCh0cmdQYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHRyZy5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0lDT05fQ0xPU0UpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUYWIodHJnSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1BvcHVwID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRyZ1BhcmVudCkgJiYgdHJnSW5kZXggIT09IHRoaXMuc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRyZ0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc3dpcGVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnZlbG9jaXR5IDwgMyAmJiBlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzU3dpcGVlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZS5zd2lwZURpcmVjdGlvbiA9PT0gJ1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJdGVtIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5zd2lwZURpcmVjdGlvbiA9PT0gJ0xlZnQnICYmICh0aGlzLnNlbGVjdGVkSXRlbSAhPT0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudCkubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEl0ZW0gKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzU3dpcGVlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNwYWNlS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoKGUua2V5Q29kZSA9PT0gMzIgJiYgZS53aGljaCA9PT0gMzIpIHx8IChlLmtleUNvZGUgPT09IDM1ICYmIGUud2hpY2ggPT09IDM1KSkge1xuICAgICAgICAgICAgICAgIHZhciBjbHN0SGVhZCA9IGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJy4nICsgQ0xTX0hFQURFUik7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGNsc3RIZWFkKSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmtleUhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xTX0ZPQ1VTKTtcbiAgICAgICAgICAgIHZhciB0cmcgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBhY3RFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSICsgJyAuJyArIENMU19BQ1RJVkUsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgdGFiSXRlbSA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNICsgJzpub3QoLicgKyBDTFNfVEJfUE9QVVAgKyAnKScsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBvcEVsZSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9QT1AsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wb3BFbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmogPSB0aGlzLnBvcEVsZS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2VudGVyJyAmJiB0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhvci1uYXYnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlQcmVzc2VkKHRyZyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRUYWInOlxuICAgICAgICAgICAgICAgICAgICBpZiAodHJnLmNsYXNzTGlzdC5jb250YWlucyhDTFNfV1JBUClcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGVqMl9iYXNlXzEuY2xvc2VzdCh0cmcsICcuJyArIENMU19UQl9JVEVNKS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmcuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaiAmJiBlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouaGlkZSh0aGlzLmhpZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFjdEVsZS5jaGlsZHJlbi5pdGVtKDApLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlTGVmdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBlajJfYmFzZV8xLmNsb3Nlc3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJy4nICsgQ0xTX1RCX0lURU0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEl0ZW1WaXNpYmlsaXR5KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ29wZW5Qb3B1cCc6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucG9wRWxlKSAmJiB0aGlzLnBvcEVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1BPUFVQX0NMT1NFKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouc2hvdyh0aGlzLnNob3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmdQYXJlbnQgPSBlajJfYmFzZV8xLmNsb3Nlc3QodHJnLCAnLicgKyBDTFNfVEJfSVRFTSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDbG9zZUJ1dHRvbiA9PT0gdHJ1ZSAmJiAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0cmdQYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnh0U2liID0gdHJnUGFyZW50Lm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKG54dFNpYikgJiYgbnh0U2liLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJfSVRFTSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBueHRTaWIuZmlyc3RDaGlsZC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUYWIodGhpcy5nZXRFbGVJbmRleCh0cmdQYXJlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZWZyZXNoQWN0RWxlUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYWN0aXZlRWxlID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU0gKyAnLicgKyBDTFNfVEJfUE9QVVAgKyAnLicgKyBDTFNfQUNUSVZFLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGFjdGl2ZUVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmdldEVsZUluZGV4KGFjdGl2ZUVsZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWN0aXZlQm9yZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucmVmcmVzaEl0ZW1WaXNpYmlsaXR5ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIHNjckNudCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1oc2Nyb2xsLWNvbnRlbnQnLCB0aGlzLnRiSXRlbXMpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHNjckNudCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NyQmFyID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy5lLWhzY3JvbGwtYmFyJywgdGhpcy50Ykl0ZW1zKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NyU3RhcnQgPSBzY3JCYXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgc2NyRW5kID0gc2NyU3RhcnQgKyBzY3JCYXIub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGVsZVN0YXJ0ID0gdGFyZ2V0Lm9mZnNldExlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIGVsZVdpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBlbGVFbmQgPSB0YXJnZXQub2Zmc2V0TGVmdCArIHRhcmdldC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICBpZiAoKHNjclN0YXJ0IDwgZWxlU3RhcnQpICYmIChzY3JFbmQgPCBlbGVFbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVWaWV3UmFuZ2UgPSBzY3JFbmQgLSBlbGVTdGFydDtcbiAgICAgICAgICAgICAgICAgICAgc2NyQmFyLnNjcm9sbExlZnQgPSBzY3JTdGFydCArIChlbGVXaWR0aCAtIGVsZVZpZXdSYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHNjclN0YXJ0ID4gZWxlU3RhcnQpICYmIChzY3JFbmQgPiBlbGVFbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlVmlld1JhbmdlID0gZWxlRW5kIC0gc2NyU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JCYXIuc2Nyb2xsTGVmdCA9IHNjclN0YXJ0IC0gKGVsZVdpZHRoIC0gZWxlVmlld1JhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5ob3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRyZyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRyZy5jbGFzc0xpc3QpICYmIHRyZy5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0lDT05fQ0xPU0UpKSB7XG4gICAgICAgICAgICAgICAgdHJnLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBuZXcgZWoyX2Jhc2VfMy5MMTBuKCd0YWInLCB7IHRpdGxlOiB0aGlzLnRpdGxlIH0sIHRoaXMubG9jYWxlKS5nZXRDb25zdGFudCgndGl0bGUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZW5hYmxlVGFiID0gZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHRiSXRlbXMgPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KVtpbmRleF07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0Ykl0ZW1zKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRiSXRlbXMuY2xhc3NMaXN0LnJlbW92ZShDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0Ykl0ZW1zLmNsYXNzTGlzdC5hZGQoQ0xTX0RJU0FCTEUpO1xuICAgICAgICAgICAgICAgIGlmICh0Ykl0ZW1zLmNsYXNzTGlzdC5jb250YWlucyhDTFNfQUNUSVZFKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChpbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRiSXRlbXMuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgKHZhbHVlID09PSB0cnVlKSA/ICdmYWxzZScgOiAndHJ1ZScpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmFkZFRhYiA9IGZ1bmN0aW9uIChpdGVtcywgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2FkZGluZycsIHsgYWRkZWRJdGVtczogaXRlbXMgfSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpbmRleCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNKS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUZW1wbGF0ZSA9PT0gdHJ1ZSB8fCBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSkubGVuZ3RoIC0gMSA8IGluZGV4IHx8IGluZGV4IDwgMCB8fCBpc05hTihpbmRleCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJkckxpbmUuY2xhc3NMaXN0LmFkZChDTFNfSElEREVOKTtcbiAgICAgICAgICAgIHRoaXMudGJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19IRUFERVIgKyAnIC4nICsgQ0xTX1RCX0lURU1TLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHRhYkl0ZW1zID0gdGhpcy5wYXJzZU9iamVjdChpdGVtcyk7XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50Yk9iai5hZGRJdGVtcyh0YWJJdGVtcywgaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdhZGRlZCcsIHsgYWRkZWRJdGVtczogaXRlbXMgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0gPT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZW1vdmVUYWIgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciB0cmcgPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KVtpbmRleF07XG4gICAgICAgICAgICB2YXIgcmVtb3ZpbmdBcmdzID0geyByZW1vdmVkSXRlbTogdHJnLCByZW1vdmVkSW5kZXg6IGluZGV4IH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3JlbW92aW5nJywgcmVtb3ZpbmdBcmdzKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRyZykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRiT2JqLnJlbW92ZUl0ZW1zKGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICAgICAgdmFyIG5vID0gdGhpcy5leHRJbmRleCh0cmcuaWQpO1xuICAgICAgICAgICAgdmFyIGNudFRyZyA9IHRoaXMuZmluZEVsZShlajJfYmFzZV8yLnNlbGVjdCgnLmUtY29udGVudCcsIHRoaXMuZWxlbWVudCkuY2hpbGRyZW4sIENMU19DT05URU5UICsgJ18nICsgbm8pO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGNudFRyZykpIHtcbiAgICAgICAgICAgICAgICBjbnRUcmcub3V0ZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVtb3ZlZEFyZ3MgPSB7IHJlbW92ZWRJdGVtOiB0cmcsIHJlbW92ZWRJbmRleDogaW5kZXggfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigncmVtb3ZlZCcsIHJlbW92ZWRBcmdzKTtcbiAgICAgICAgICAgIGlmICh0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSAoaW5kZXggPiBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSArICc6bm90KC4nICsgQ0xTX1RCX1BPUFVQICsgJyknLCB0aGlzLmVsZW1lbnQpLmxlbmd0aCAtIDEpID8gaW5kZXggLSAxIDogaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVBbmltYXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZHJFbGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW5hYmxlQW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5oaWRlVGFiID0gZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KVtpbmRleF07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmRyTGluZS5jbGFzc0xpc3QuYWRkKENMU19ISURERU4pO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKENMU19ISURERU4pO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyhDTFNfQUNUSVZFKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCgoaW5kZXggIT09IDApID8gaW5kZXggLSAxIDogaW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0hJRERFTik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJycgKyB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMudGJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19IRUFERVIgKyAnIC4nICsgQ0xTX1RCX0lURU1TLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy50Ykl0ZW0gPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfSEVBREVSICsgJyAuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wcmV2SXRlbSA9IHRoaXMudGJJdGVtW3RoaXMucHJldkluZGV4XTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnByZXZJdGVtKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkl0ZW0uY2hpbGRyZW4uaXRlbSgwKS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmcgPSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtOiB0aGlzLnByZXZJdGVtLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSW5kZXg6IHRoaXMucHJldkluZGV4LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbTogdGhpcy50Ykl0ZW1bdGhpcy5zZWxlY3RlZEl0ZW1dLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IHRoaXMuc2VsZWN0ZWRJdGVtLFxuICAgICAgICAgICAgICAgIGlzU3dpcGVkOiB0aGlzLmlzU3dpcGVlZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignc2VsZWN0aW5nJywgZXZlbnRBcmcpO1xuICAgICAgICAgICAgaWYgKGV2ZW50QXJnLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJncyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50Ykl0ZW0ubGVuZ3RoID4gYXJncyAmJiBhcmdzID49IDAgJiYgIWlzTmFOKGFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkluZGV4ID0gdGhpcy5zZWxlY3RlZEl0ZW07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiSXRlbVthcmdzXS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCX1BPUFVQKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmUodGhpcy5wb3B1cEhhbmRsZXIodGhpcy50Ykl0ZW1bYXJnc10pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlKGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZSgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhcmdzIGluc3RhbmNlb2YgKEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlKHRoaXMuZ2V0RWxlSW5kZXgoYXJncykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3ModGhpcy5lbGVtZW50LCBDTFNfRElTQUJMRSwgdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICcnICsgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KFsnc2VsZWN0ZWRJdGVtJywgJ2FjdEVsZUlkJ10pO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RhYic7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyB3aWR0aDogZWoyX2Jhc2VfMy5mb3JtYXRVbml0KG5ld1Byb3Aud2lkdGgpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyBoZWlnaHQ6IGVqMl9iYXNlXzMuZm9ybWF0VW5pdChuZXdQcm9wLmhlaWdodCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRlbnRIZWlnaHQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzc0NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3ModGhpcy5lbGVtZW50LCBuZXdQcm9wLmNzc0NsYXNzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpdGVtcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRiT2JqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udGFpbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY250RWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlID0gbmV3IGVqMl9iYXNlXzUuVG91Y2godGhpcy5jbnRFbGUsIHsgc3dpcGU6IHRoaXMuc3dpcGVIYW5kbGVyLmJpbmQodGhpcykgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRJdGVtcyhuZXdQcm9wLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0Nsb3NlQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2xvc2VCdXR0b24obmV3UHJvcC5zaG93Q2xvc2VCdXR0b24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdGVkSXRlbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IG9sZFByb3Auc2VsZWN0ZWRJdGVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QobmV3UHJvcC5zZWxlY3RlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlYWRlclBsYWNlbWVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcEhkckVsZSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19IRUFERVIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE9yaWVudGF0aW9uKG5ld1Byb3AuaGVhZGVyUGxhY2VtZW50LCB0ZW1wSGRyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRSVEwobmV3UHJvcC5lbmFibGVSdGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ292ZXJmbG93TW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRiT2JqLm92ZXJmbG93TW9kZSA9IG5ld1Byb3Aub3ZlcmZsb3dNb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50Yk9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWN0RWxlUG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHRBZGp1c3RNb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudEhlaWdodChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUYWI7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbGxlY3Rpb24oW10sIFRhYkl0ZW0pXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcxMDAlJylcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJzZWxlY3RlZEl0ZW1cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnVG9wJylcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImhlYWRlclBsYWNlbWVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdDb250ZW50JylcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImhlaWdodEFkanVzdE1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnU2Nyb2xsYWJsZScpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJvdmVyZmxvd01vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImVuYWJsZVJ0bFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwic2hvd0Nsb3NlQnV0dG9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7fSwgVGFiQW5pbWF0aW9uU2V0dGluZ3MpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJhbmltYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiYWRkaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiYWRkZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcInJlbW92aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwicmVtb3ZlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImRlc3Ryb3llZFwiLCB2b2lkIDApO1xuICAgIFRhYiA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIFRhYik7XG4gICAgZXhwb3J0cy5UYWIgPSBUYWI7XG4gICAgZXhwb3J0cy50YWJCdWlsZGVyID0gZWoyX2Jhc2VfMS5DcmVhdGVCdWlsZGVyKFRhYik7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3RhYi90YWIuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdHJlZXZpZXdcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB0cmVldmlld18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydCh0cmVldmlld18xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdHJlZXZpZXcvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1saXN0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCBlajJfYmFzZV82LCBlajJfZGF0YV8xLCBlajJfYmFzZV83LCBlajJfbGlzdHNfMSwgZWoyX2J1dHRvbnNfMSwgZWoyX2lucHV0c18xLCBlajJfcG9wdXBzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJPT1QgPSAnZS10cmVldmlldyc7XG4gICAgdmFyIENPTExBUFNJQkxFID0gJ2UtaWNvbi1jb2xsYXBzaWJsZSc7XG4gICAgdmFyIEVYUEFOREFCTEUgPSAnZS1pY29uLWV4cGFuZGFibGUnO1xuICAgIHZhciBMSVNUSVRFTSA9ICdlLWxpc3QtaXRlbSc7XG4gICAgdmFyIExJU1RURVhUID0gJ2UtbGlzdC10ZXh0JztcbiAgICB2YXIgUEFSRU5USVRFTSA9ICdlLWxpc3QtcGFyZW50JztcbiAgICB2YXIgSE9WRVIgPSAnZS1ob3Zlcic7XG4gICAgdmFyIEFDVElWRSA9ICdlLWFjdGl2ZSc7XG4gICAgdmFyIExPQUQgPSAnZS1pY29ucy1zcGlubmVyJztcbiAgICB2YXIgUFJPQ0VTUyA9ICdlLXByb2Nlc3MnO1xuICAgIHZhciBJQ09OID0gJ2UtaWNvbnMnO1xuICAgIHZhciBURVhUV1JBUCA9ICdlLXRleHQtY29udGVudCc7XG4gICAgdmFyIElOUFVUID0gJ2UtaW5wdXQnO1xuICAgIHZhciBJTlBVVEdST1VQID0gJ2UtaW5wdXQtZ3JvdXAnO1xuICAgIHZhciBFRElUSU5HID0gJ2UtZWRpdGluZyc7XG4gICAgdmFyIFJUTCA9ICdlLXJ0bCc7XG4gICAgdmFyIERSQUdJVEVNID0gJ2UtZHJhZy1pdGVtJztcbiAgICB2YXIgRFJPUFBBQkxFID0gJ2UtZHJvcHBhYmxlJztcbiAgICB2YXIgRFJBR0dJTkcgPSAnZS1kcmFnZ2luZyc7XG4gICAgdmFyIFNJQkxJTkcgPSAnZS1zaWJsaW5nJztcbiAgICB2YXIgRFJPUElOID0gJ2UtZHJvcC1pbic7XG4gICAgdmFyIERST1BORVhUID0gJ2UtZHJvcC1uZXh0JztcbiAgICB2YXIgRFJPUE9VVCA9ICdlLWRyb3Atb3V0JztcbiAgICB2YXIgTk9EUk9QID0gJ2Utbm8tZHJvcCc7XG4gICAgdmFyIEZVTExST1dXUkFQID0gJ2UtZnVsbHJvdy13cmFwJztcbiAgICB2YXIgRlVMTFJPVyA9ICdlLWZ1bGxyb3cnO1xuICAgIHZhciBQT1BVUCA9ICdlLXBvcHVwJztcbiAgICB2YXIgU0VMRUNURUQgPSAnZS1zZWxlY3RlZCc7XG4gICAgdmFyIEVYUEFOREVEID0gJ2UtZXhwYW5kZWQnO1xuICAgIHZhciBOT0RFQ09MTEFQU0VEID0gJ2Utbm9kZS1jb2xsYXBzZWQnO1xuICAgIHZhciBESVNBQkxFID0gJ2UtZGlzYWJsZSc7XG4gICAgdmFyIFBPUFVQU0VMRUNUID0gJ2Utc2VsZWN0JztcbiAgICB2YXIgQ09OVEVOVCA9ICdlLWNvbnRlbnQnO1xuICAgIHZhciBET1dOVEFJTCA9ICdlLWRvd250YWlsJztcbiAgICB2YXIgRFJPUENPVU5UID0gJ2UtZHJvcC1jb3VudCc7XG4gICAgdmFyIENIRUNLID0gJ2UtY2hlY2snO1xuICAgIHZhciBJTkRFVEVSTUlOQVRFID0gJ2Utc3RvcCc7XG4gICAgdmFyIENIRUNLQk9YV1JBUCA9ICdlLWNoZWNrYm94LXdyYXBwZXInO1xuICAgIHZhciBDSEVDS0JPWEZSQU1FID0gJ2UtZnJhbWUnO1xuICAgIHZhciBDSEVDS0JPWFJJUFBMRSA9ICdlLXJpcHBsZS1jb250YWluZXInO1xuICAgIHZhciBGT0NVUyA9ICdlLW5vZGUtZm9jdXMnO1xuICAgIHZhciBTUElOTkVSX1NJWkUgPSBlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgPyAxNiA6IDE0O1xuICAgIHZhciBJTUFHRSA9ICdlLWxpc3QtaW1nJztcbiAgICB2YXIgdHJlZUFyaWFBdHRyID0ge1xuICAgICAgICB0cmVlUm9sZTogJ3RyZWUnLFxuICAgICAgICBpdGVtUm9sZTogJ3RyZWVpdGVtJyxcbiAgICAgICAgbGlzdFJvbGU6ICdncm91cCcsXG4gICAgICAgIGl0ZW1UZXh0OiAnJyxcbiAgICB9O1xuICAgIHZhciBGaWVsZHNTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGaWVsZHNTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmllbGRzU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEZpZWxkc1NldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2NoaWxkJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiY2hpbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eShbXSlcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiZGF0YVNvdXJjZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdleHBhbmRlZCcpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2hhc0NoaWxkcmVuJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaGFzQ2hpbGRyZW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnaHRtbEF0dHJpYnV0ZXMnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJodG1sQXR0cmlidXRlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdpY29uQ3NzJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaWNvbkNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdpZCcpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2ltYWdlVXJsJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaW1hZ2VVcmxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnaXNDaGVja2VkJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaXNDaGVja2VkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ3BhcmVudElEJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwicGFyZW50SURcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJxdWVyeVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdzZWxlY3RlZCcpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkobnVsbClcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwidGFibGVOYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ3RleHQnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJ0ZXh0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ3Rvb2x0aXAnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJ0b29sdGlwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ25hdmlnYXRlVXJsJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwibmF2aWdhdGVVcmxcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkZpZWxkc1NldHRpbmdzID0gRmllbGRzU2V0dGluZ3M7XG4gICAgdmFyIEFjdGlvblNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjdGlvblNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY3Rpb25TZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQWN0aW9uU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnU2xpZGVEb3duJylcbiAgICBdLCBBY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZWZmZWN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoNDAwKVxuICAgIF0sIEFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdsaW5lYXInKVxuICAgIF0sIEFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJlYXNpbmdcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFjdGlvblNldHRpbmdzID0gQWN0aW9uU2V0dGluZ3M7XG4gICAgdmFyIE5vZGVBbmltYXRpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhOb2RlQW5pbWF0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIE5vZGVBbmltYXRpb25TZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTm9kZUFuaW1hdGlvblNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuQ29tcGxleCh7IGVmZmVjdDogJ1NsaWRlVXAnLCBkdXJhdGlvbjogNDAwLCBlYXNpbmc6ICdsaW5lYXInIH0sIEFjdGlvblNldHRpbmdzKVxuICAgIF0sIE5vZGVBbmltYXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sbGFwc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Db21wbGV4KHsgZWZmZWN0OiAnU2xpZGVEb3duJywgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnbGluZWFyJyB9LCBBY3Rpb25TZXR0aW5ncylcbiAgICBdLCBOb2RlQW5pbWF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImV4cGFuZFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuTm9kZUFuaW1hdGlvblNldHRpbmdzID0gTm9kZUFuaW1hdGlvblNldHRpbmdzO1xuICAgIHZhciBUcmVlVmlldyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUcmVlVmlldywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVHJlZVZpZXcob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmNoZWNrQWN0aW9uTm9kZXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmRyYWdTdGFydEFjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuaXNBbmltYXRlID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5rZXlDb25maWdzID0ge1xuICAgICAgICAgICAgICAgIGVzY2FwZTogJ2VzY2FwZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgICAgICBlbnRlcjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBmMjogJ2YyJyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgbW92ZURvd246ICdkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVMZWZ0OiAnbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlUmlnaHQ6ICdyaWdodGFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlVXA6ICd1cGFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsRG93bjogJ2N0cmwrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsVXA6ICdjdHJsK3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxFbnRlcjogJ2N0cmwrZW50ZXInLFxuICAgICAgICAgICAgICAgIGN0cmxIb21lOiAnY3RybCtob21lJyxcbiAgICAgICAgICAgICAgICBjdHJsRW5kOiAnY3RybCtlbmQnLFxuICAgICAgICAgICAgICAgIGN0cmxBOiAnY3RybCtBJyxcbiAgICAgICAgICAgICAgICBzaGlmdERvd246ICdzaGlmdCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0VXA6ICdzaGlmdCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdEVudGVyOiAnc2hpZnQrZW50ZXInLFxuICAgICAgICAgICAgICAgIHNoaWZ0SG9tZTogJ3NoaWZ0K2hvbWUnLFxuICAgICAgICAgICAgICAgIHNoaWZ0RW5kOiAnc2hpZnQrZW5kJyxcbiAgICAgICAgICAgICAgICBjc0Rvd246ICdjdHJsK3NoaWZ0K2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgY3NVcDogJ2N0cmwrc2hpZnQrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgY3NFbnRlcjogJ2N0cmwrc2hpZnQrZW50ZXInLFxuICAgICAgICAgICAgICAgIGNzSG9tZTogJ2N0cmwrc2hpZnQraG9tZScsXG4gICAgICAgICAgICAgICAgY3NFbmQ6ICdjdHJsK3NoaWZ0K2VuZCcsXG4gICAgICAgICAgICAgICAgc3BhY2U6ICdzcGFjZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMubW91c2VEb3duU3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RyZWV2aWV3JztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmxpc3RCYXNlT3B0aW9uID0ge1xuICAgICAgICAgICAgICAgIGV4cGFuZENvbGxhcHNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpZWxkczogdGhpcy5maWVsZHMucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBzaG93SWNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleHBhbmRJY29uQ2xhc3M6IEVYUEFOREFCTEUsXG4gICAgICAgICAgICAgICAgYXJpYUF0dHJpYnV0ZXM6IHRyZWVBcmlhQXR0cixcbiAgICAgICAgICAgICAgICBleHBhbmRJY29uUG9zaXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgICAgICBpdGVtQ3JlYXRlZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYmVmb3JlTm9kZUNyZWF0ZShlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzLnVybCA9IHRoaXMuZmllbGRzLm5hdmlnYXRlVXJsO1xuICAgICAgICAgICAgdGhpcy5hbmlPYmogPSBuZXcgZWoyX2Jhc2VfNC5BbmltYXRpb24oe30pO1xuICAgICAgICAgICAgdGhpcy50cmVlTGlzdCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZWxlY3RlZE5vZGVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHNlbGVjdGVkTm9kZXM6IFtdIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jaGVja2VkTm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgY2hlY2tlZE5vZGVzOiBbXSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsnc2VsZWN0ZWROb2RlcycsICdjaGVja2VkTm9kZXMnXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChrZXlFbnRpdHkpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB0aGlzLnNldERhdGFCaW5kaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnNldEV4cGFuZE9uVHlwZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRSaXBwbGUoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUVkaXRpbmdFdmVudHModGhpcy5hbGxvd0VkaXRpbmcpO1xuICAgICAgICAgICAgdGhpcy5zZXREcmFnQW5kRHJvcCh0aGlzLmFsbG93RHJhZ0FuZERyb3ApO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICd0cmVlJyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLCAnbm9kZV9hY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3MobnVsbCwgdGhpcy5jc3NDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLnNldEVuYWJsZVJ0bCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRGdWxsUm93KHRoaXMuZnVsbFJvd1NlbGVjdCk7XG4gICAgICAgICAgICB0aGlzLnNldFRvdWNoUG9wdXAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMubm9kZVRlbXBsYXRlRm4gPSB0aGlzLnRlbXBsYXRlQ29tcGxpZXIodGhpcy5ub2RlVGVtcGxhdGUpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0RW5hYmxlUnRsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGVSdGwgPyBlajJfYmFzZV82LmFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBSVEwpIDogZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgUlRMKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldFJpcHBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wU3RyID0gJy4nICsgRlVMTFJPVyArICcsLicgKyBURVhUV1JBUDtcbiAgICAgICAgICAgIHZhciByaXBwbGVNb2RlbCA9IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogdGVtcFN0cixcbiAgICAgICAgICAgICAgICBpZ25vcmU6ICcuJyArIFRFWFRXUkFQICsgJyA+IC4nICsgSUNPTiArICcsLicgKyBJTlBVVEdST1VQICsgJywuJyArIElOUFVUICsgJywgLicgKyBDSEVDS0JPWFdSQVBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnJpcHBsZUZuID0gZWoyX2Jhc2VfNC5yaXBwbGVFZmZlY3QodGhpcy5lbGVtZW50LCByaXBwbGVNb2RlbCk7XG4gICAgICAgICAgICB2YXIgaWNvbk1vZGVsID0ge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnLicgKyBURVhUV1JBUCArICcgPiAuJyArIElDT04sXG4gICAgICAgICAgICAgICAgaXNDZW50ZXJSaXBwbGU6IHRydWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yaXBwbGVJY29uRm4gPSBlajJfYmFzZV80LnJpcHBsZUVmZmVjdCh0aGlzLmVsZW1lbnQsIGljb25Nb2RlbCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRGdWxsUm93ID0gZnVuY3Rpb24gKGlzRW5hYmxlZCkge1xuICAgICAgICAgICAgaXNFbmFibGVkID8gZWoyX2Jhc2VfNi5hZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgRlVMTFJPV1dSQVApIDogZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgRlVMTFJPV1dSQVApO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0VG91Y2hQb3B1cCA9IGZ1bmN0aW9uIChpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9wdXAgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBQT1BVUCwgc3R5bGVzOiAnZGlzcGxheTpub25lOycgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDT05URU5ULCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IElDT04gfSk7XG4gICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFwcGVuZChbY29udGVudCwgZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogRE9XTlRBSUwgfSldLCBwb3B1cCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHBvcHVwKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQoY29udGVudCwgJ2NsaWNrJywgdGhpcy5wb3B1cENsaWNrLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBPUFVQLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChwb3B1cCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChwb3B1cCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0TXVsdGlTZWxlY3QgPSBmdW5jdGlvbiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RVbCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgZmlyc3RVbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpcnN0VWwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLW11bHRpc2VsZWN0YWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucG9wdXBDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcbiAgICAgICAgICAgIHRhcmdldCA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIFBPUFVQKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFBPUFVQU0VMRUNUKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW3RhcmdldF0sIFBPUFVQU0VMRUNUKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQT1BVUCwgdGhpcy5lbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbdGFyZ2V0XSwgUE9QVVBTRUxFQ1QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudGVtcGxhdGVDb21wbGllciA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGVtcGxhdGUpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY29tcGlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMS5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0RGF0YUJpbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy50cmVlTGlzdC5wdXNoKCdmYWxzZScpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGRzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZHMuZGF0YVNvdXJjZS5leGVjdXRlUXVlcnkodGhpcy5nZXRRdWVyeSh0aGlzLmZpZWxkcykpLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJlZUxpc3QucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyZWVEYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlzTnVtYmVyVHlwZUlkID0gX3RoaXMudHJlZURhdGFbMF0gPyAoKHR5cGVvZiBfdGhpcy50cmVlRGF0YVswXVtfdGhpcy5maWVsZHMuaWRdID09PSAnbnVtYmVyJykgPyB0cnVlIDogZmFsc2UpIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFJvb3REYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlckl0ZW1zKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMudHJlZUxpc3QubGVuZ3RoID09PSAwICYmICFfdGhpcy5pc0xvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmluYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmVlTGlzdC5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZpZWxkcy5kYXRhU291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3REYXRhID0gdGhpcy50cmVlRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YSA9IHRoaXMuZmllbGRzLmRhdGFTb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Um9vdERhdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJJdGVtcyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50cmVlTGlzdC5sZW5ndGggPT09IDAgJiYgIXRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRRdWVyeSA9IGZ1bmN0aW9uIChtYXBwZXIsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9IG51bGw7IH1cbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gW107XG4gICAgICAgICAgICB2YXIgcXVlcnk7XG4gICAgICAgICAgICBpZiAoIW1hcHBlci5xdWVyeSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZ2V0QWN0dWFsUHJvcGVydGllcyhtYXBwZXIpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhwcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbCAhPT0gJ2RhdGFTb3VyY2UnICYmIGNvbCAhPT0gJ3RhYmxlTmFtZScgJiYgY29sICE9PSAnY2hpbGQnICYmICEhbWFwcGVyW2NvbF1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGNvbHVtbnMuaW5kZXhPZihtYXBwZXJbY29sXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2gobWFwcGVyW2NvbF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXJ5LnNlbGVjdChjb2x1bW5zKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcC5oYXNPd25Qcm9wZXJ0eSgndGFibGVOYW1lJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuZnJvbShtYXBwZXIudGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IG1hcHBlci5xdWVyeS5jbG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2xpc3RzXzEuTGlzdEJhc2UuYWRkU29ydGluZyh0aGlzLnNvcnRPcmRlciwgbWFwcGVyLnRleHQsIHF1ZXJ5KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobWFwcGVyLnBhcmVudElEKSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKG1hcHBlci5wYXJlbnRJRCwgJ2VxdWFsJywgKHRoaXMuaXNOdW1iZXJUeXBlSWQgPyBwYXJzZUZsb2F0KHZhbHVlKSA6IHZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRSb290RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVR5cGUgPSB0aGlzLmdldERhdGFUeXBlKHRoaXMudHJlZURhdGEsIHRoaXMuZmllbGRzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cGVkRGF0YSA9IHRoaXMuZ2V0R3JvdXBlZERhdGEodGhpcy50cmVlRGF0YSwgdGhpcy5maWVsZHMucGFyZW50SUQpO1xuICAgICAgICAgICAgICAgIHZhciByb290SXRlbXMgPSB0aGlzLmdldENoaWxkTm9kZXModGhpcy50cmVlRGF0YSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChyb290SXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdERhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdERhdGEgPSByb290SXRlbXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb290RGF0YSA9IHRoaXMudHJlZURhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW5kZXJJdGVtcyA9IGZ1bmN0aW9uIChpc1NvcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5hcmlhQXR0cmlidXRlcy5sZXZlbCA9IDE7XG4gICAgICAgICAgICB0aGlzLnVsRWxlbWVudCA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3QoaXNTb3J0ZWQgPyB0aGlzLnJvb3REYXRhIDogdGhpcy5nZXRTb3J0ZWREYXRhKHRoaXMucm9vdERhdGEpLCB0aGlzLmxpc3RCYXNlT3B0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnVsRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmZpbmFsaXplTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYmVmb3JlTm9kZUNyZWF0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3hFbGUgPSBlajJfYnV0dG9uc18xLmNyZWF0ZUNoZWNrQm94KHRydWUpO1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgZS5pdGVtKTtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBlLml0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgICAgIGUuaXRlbS5jaGlsZE5vZGVzWzBdLmluc2VydEJlZm9yZShjaGVja2JveEVsZSwgZS5pdGVtLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1tlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGljb24pID8gMCA6IDFdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkTm9kZXMuaW5kZXhPZihpZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBDSEVDS0JPWEZSQU1FLCBjaGVja2JveEVsZSkuY2xhc3NMaXN0LmFkZChDSEVDSyk7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94RWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDaGVjayhlLml0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlLmN1ckRhdGFbZS5maWVsZHMuaXNDaGVja2VkXSkgJiYgZS5jdXJEYXRhW2UuZmllbGRzLmlzQ2hlY2tlZF0udG9TdHJpbmcoKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIENIRUNLQk9YRlJBTUUsIGNoZWNrYm94RWxlKS5jbGFzc0xpc3QuYWRkKENIRUNLKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3hFbGUuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENoZWNrKGUuaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2JveEVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBDSEVDS0JPWEZSQU1FLCBjaGVja2JveEVsZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIuYWRkKGZyYW1lLCAnbW91c2Vkb3duJywgdGhpcy5mcmFtZU1vdXNlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIuYWRkKGZyYW1lLCAnbW91c2V1cCcsIHRoaXMuZnJhbWVNb3VzZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZnVsbFJvd1NlbGVjdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnVsbFJvdyhlLml0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbiAmJiAhZS5pdGVtLmNsYXNzTGlzdC5jb250YWlucyhTRUxFQ1RFRCkpIHtcbiAgICAgICAgICAgICAgICBlLml0ZW0uc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmllbGRzID0gZS5maWVsZHM7XG4gICAgICAgICAgICB0aGlzLmFkZEFjdGlvbkNsYXNzKGUsIGZpZWxkcy5zZWxlY3RlZCwgU0VMRUNURUQpO1xuICAgICAgICAgICAgdGhpcy5hZGRBY3Rpb25DbGFzcyhlLCBmaWVsZHMuZXhwYW5kZWQsIEVYUEFOREVEKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh0aGlzLm5vZGVUZW1wbGF0ZUZuKSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0RWxlID0gZS5pdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgTElTVFRFWFQpO1xuICAgICAgICAgICAgICAgIHRleHRFbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hcHBlbmQodGhpcy5ub2RlVGVtcGxhdGVGbihlLmN1ckRhdGEpLCB0ZXh0RWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgbm9kZTogZS5pdGVtLFxuICAgICAgICAgICAgICAgIG5vZGVEYXRhOiBlLmN1ckRhdGEsXG4gICAgICAgICAgICAgICAgdGV4dDogZS50ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZHJhd05vZGUnLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZnJhbWVNb3VzZUhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHJpcHBsZVNwYW4gPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBDSEVDS0JPWFJJUFBMRSwgZS50YXJnZXQucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICBpZiAocmlwcGxlU3Bhbikge1xuICAgICAgICAgICAgICAgIHZhciBldmVudF8xID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gICAgICAgICAgICAgICAgZXZlbnRfMS5pbml0RXZlbnQoZS50eXBlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmlwcGxlU3Bhbi5kaXNwYXRjaEV2ZW50KGV2ZW50XzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkQWN0aW9uQ2xhc3MgPSBmdW5jdGlvbiAoZSwgYWN0aW9uLCBjc3NDbGFzcykge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBlLmN1ckRhdGE7XG4gICAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShhY3Rpb24pICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGRhdGFbYWN0aW9uXSkgJiYgZGF0YVthY3Rpb25dLnRvU3RyaW5nKCkgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgICBlLml0ZW0uY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXREYXRhVHlwZSA9IGZ1bmN0aW9uIChkcywgbWFwcGVyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiBtYXBwZXIuY2hpbGQgPT09ICdzdHJpbmcnKSAmJiBkc1tpXS5oYXNPd25Qcm9wZXJ0eShtYXBwZXIuY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZHNbaV0uaGFzT3duUHJvcGVydHkobWFwcGVyLnBhcmVudElEKSB8fCBkc1tpXS5oYXNPd25Qcm9wZXJ0eShtYXBwZXIuaGFzQ2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0R3JvdXBlZERhdGEgPSBmdW5jdGlvbiAoZGF0YVNvdXJjZSwgZ3JvdXBCeSkge1xuICAgICAgICAgICAgdmFyIGN1c1F1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKS5ncm91cChncm91cEJ5KTtcbiAgICAgICAgICAgIHZhciBkcyA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmdldERhdGFTb3VyY2UoZGF0YVNvdXJjZSwgY3VzUXVlcnkpO1xuICAgICAgICAgICAgdmFyIGdycEl0ZW0gPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbU9iaiA9IGRzW2pdLml0ZW1zO1xuICAgICAgICAgICAgICAgIGdycEl0ZW0ucHVzaChpdGVtT2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncnBJdGVtO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0U29ydGVkRGF0YSA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgICAgICBpZiAobGlzdCAmJiB0aGlzLnNvcnRPcmRlciAhPT0gJ05vbmUnKSB7XG4gICAgICAgICAgICAgICAgbGlzdCA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmdldERhdGFTb3VyY2UobGlzdCwgZWoyX2xpc3RzXzEuTGlzdEJhc2UuYWRkU29ydGluZyh0aGlzLnNvcnRPcmRlciwgdGhpcy5maWVsZHMudGV4dCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5maW5hbGl6ZU5vZGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpTm9kZXMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBJTUFHRSwgZWxlbWVudCk7XG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGlOb2Rlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgIGlOb2Rlc1trXS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIElNQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNOb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIFNFTEVDVEVELCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoc05vZGVzW2ldLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3Moc05vZGVzLCBTRUxFQ1RFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY05vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgTElTVElURU0gKyAnOm5vdCguJyArIEVYUEFOREVEICsgJyknLCBlbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY05vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBjTm9kZXNbal0pO1xuICAgICAgICAgICAgICAgIGlmIChpY29uICYmIGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKEVYUEFOREFCTEUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNOb2Rlc1tqXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbY05vZGVzW2pdXSwgTk9ERUNPTExBUFNFRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVOb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIEVYUEFOREVELCBlbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZU5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGlsZE5vZGVzKGVOb2Rlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKGVOb2RlcywgRVhQQU5ERUQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZXNfMSA9IFtdLmNvbmNhdChbXSwgdGhpcy5jaGVja2VkTm9kZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5vZGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tCb3ggPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD1cIicgKyB2YWx1ZSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY2hlY2tCb3gpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc18xID0gbm9kZXNfMS5maWx0ZXIoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUgIT09IHZhbHVlOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IGNoZWNrZWROb2Rlczogbm9kZXNfMSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmVuc3VyZVBhcmVudENoZWNrU3RhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFJPT1QpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHVsRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKExJU1RJVEVNKSkge1xuICAgICAgICAgICAgICAgICAgICB1bEVsZW1lbnQgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWROb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIENIRUNLLCB1bEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIExJU1RJVEVNLCB1bEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHZhciBjaGVja0JveEVsZSA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDSEVDS0JPWFdSQVApWzBdO1xuICAgICAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IGNoZWNrZWROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShjaGVja0JveEVsZSwgJ2NoZWNrJywgbnVsbCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrZWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoY2hlY2tCb3hFbGUsICdpbmRldGVybWluYXRlJywgbnVsbCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrZWROb2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShjaGVja0JveEVsZSwgJ3VuY2hlY2snLCBudWxsLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFVMID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGVsZW1lbnQsICcuJyArIFBBUkVOVElURU0pO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChwYXJlbnRVTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQYXJlbnQgPSBlajJfYmFzZV82LmNsb3Nlc3QocGFyZW50VUwsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVQYXJlbnRDaGVja1N0YXRlKGN1cnJlbnRQYXJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmVuc3VyZUNoaWxkQ2hlY2tTdGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRFbGVtZW50ID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrQm94ZXMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGNoaWxkRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIENIRUNLQk9YV1JBUCwgY2hpbGRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQ2hlY2tlZCA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDSEVDS0JPWEZSQU1FKVswXS5jbGFzc0xpc3QuY29udGFpbnMoQ0hFQ0spO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZFN0YXRlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY2hlY2tCb3hlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh0aGlzLmN1cnJlbnRMb2FkRGF0YSkgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jdXJyZW50TG9hZERhdGFbaW5kZXhdW3RoaXMuZmllbGRzLmlzQ2hlY2tlZF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZFN0YXRlID0gdGhpcy5jdXJyZW50TG9hZERhdGFbaW5kZXhdW3RoaXMuZmllbGRzLmlzQ2hlY2tlZF0gPyAnY2hlY2snIDogJ3VuY2hlY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZFN0YXRlID0gaXNDaGVja2VkID8gJ2NoZWNrJyA6ICd1bmNoZWNrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoY2hlY2tCb3hlc1tpbmRleF0sIGNoZWNrZWRTdGF0ZSwgZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kb0NoZWNrQm94QWN0aW9uID0gZnVuY3Rpb24gKG5vZGVzLCBkb0NoZWNrKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IHRoaXMuZ2V0RWxlbWVudChub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrQm94ID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSArICcgLicgKyBDSEVDS0JPWFdSQVAsIGxpRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUNoZWNrTm9kZShjaGVja0JveCwgIWRvQ2hlY2ssIGxpRWxlLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tCb3hlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIENIRUNLQk9YV1JBUCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY2hlY2tCb3hlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShjaGVja0JveGVzW2luZGV4XSwgZG9DaGVjayA/ICdjaGVjaycgOiAndW5jaGVjaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNoYW5nZVN0YXRlID0gZnVuY3Rpb24gKHdyYXBwZXIsIHN0YXRlLCBlLCBpc1ByZXZlbnQsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgYXJpYVN0YXRlO1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncztcbiAgICAgICAgICAgIHZhciBjdXJyTGkgPSBlajJfYmFzZV82LmNsb3Nlc3Qod3JhcHBlciwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgaWYgKCFpc1ByZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQWN0aW9uTm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBldmVudEFyZ3MgPSB0aGlzLmdldENoZWNrRXZlbnQoY3VyckxpLCBzdGF0ZSwgZSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlQ2hlY2tpbmcnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJhbWVTcGFuID0gd3JhcHBlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENIRUNLQk9YRlJBTUUpWzBdO1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSAnY2hlY2snICYmICFmcmFtZVNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKENIRUNLKSkge1xuICAgICAgICAgICAgICAgIGZyYW1lU3Bhbi5jbGFzc0xpc3QucmVtb3ZlKElOREVURVJNSU5BVEUpO1xuICAgICAgICAgICAgICAgIGZyYW1lU3Bhbi5jbGFzc0xpc3QuYWRkKENIRUNLKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENoZWNrKGN1cnJMaSk7XG4gICAgICAgICAgICAgICAgYXJpYVN0YXRlID0gJ3RydWUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICd1bmNoZWNrJyAmJiAoZnJhbWVTcGFuLmNsYXNzTGlzdC5jb250YWlucyhDSEVDSykgfHwgZnJhbWVTcGFuLmNsYXNzTGlzdC5jb250YWlucyhJTkRFVEVSTUlOQVRFKSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtmcmFtZVNwYW5dLCBbQ0hFQ0ssIElOREVURVJNSU5BVEVdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNoZWNrKGN1cnJMaSk7XG4gICAgICAgICAgICAgICAgYXJpYVN0YXRlID0gJ2ZhbHNlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAnaW5kZXRlcm1pbmF0ZScgJiYgIWZyYW1lU3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoSU5ERVRFUk1JTkFURSkpIHtcbiAgICAgICAgICAgICAgICBmcmFtZVNwYW4uY2xhc3NMaXN0LnJlbW92ZShDSEVDSyk7XG4gICAgICAgICAgICAgICAgZnJhbWVTcGFuLmNsYXNzTGlzdC5hZGQoSU5ERVRFUk1JTkFURSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGVjayhjdXJyTGkpO1xuICAgICAgICAgICAgICAgIGFyaWFTdGF0ZSA9ICdtaXhlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmlhU3RhdGUgPSBzdGF0ZSA9PT0gJ2NoZWNrJyA/ICd0cnVlJyA6IHN0YXRlID09PSAndW5jaGVjaycgPyAnZmFsc2UnIDogYXJpYVN0YXRlO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGFyaWFTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgYXJpYVN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0FkZCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW10uY29uY2F0KFtdLCB0aGlzLmNoZWNrQWN0aW9uTm9kZXMpO1xuICAgICAgICAgICAgICAgIGV2ZW50QXJncyA9IHRoaXMuZ2V0Q2hlY2tFdmVudChjdXJyTGksIHN0YXRlLCBlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc1VuZGVmaW5lZChpc1ByZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50QXJncy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUHJldmVudCkge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChhcmlhU3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCBhcmlhU3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBldmVudEFyZ3MuZGF0YVswXS5jaGVja2VkID0gYXJpYVN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDaGVja2VkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja0FjdGlvbk5vZGVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkQ2hlY2sgPSBmdW5jdGlvbiAobGlFbGUpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGxpRWxlLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChpZCkgJiYgdGhpcy5jaGVja2VkTm9kZXMuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTm9kZXMucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVDaGVjayA9IGZ1bmN0aW9uIChsaUVsZSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jaGVja2VkTm9kZXMuaW5kZXhPZihsaUVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWROb2Rlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Q2hlY2tFdmVudCA9IGZ1bmN0aW9uIChjdXJyTGksIGFjdGlvbiwgZSkge1xuICAgICAgICAgICAgdGhpcy5jaGVja0FjdGlvbk5vZGVzLnB1c2godGhpcy5nZXROb2RlRGF0YShjdXJyTGkpKTtcbiAgICAgICAgICAgIHZhciBub2RlRGF0YSA9IHRoaXMuY2hlY2tBY3Rpb25Ob2RlcztcbiAgICAgICAgICAgIHJldHVybiB7IGFjdGlvbjogYWN0aW9uLCBjYW5jZWw6IGZhbHNlLCBpc0ludGVyYWN0ZWQ6IGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZSkgPyBmYWxzZSA6IHRydWUsIG5vZGU6IGN1cnJMaSwgZGF0YTogbm9kZURhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZpbmFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpcnN0VWwgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgZmlyc3RVbC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCB0cmVlQXJpYUF0dHIudHJlZVJvbGUpO1xuICAgICAgICAgICAgdGhpcy5zZXRNdWx0aVNlbGVjdCh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGZpcnN0Tm9kZSA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIExJU1RJVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKGZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ZpcnN0Tm9kZV0sIEZPQ1VTKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUlkQXR0cihudWxsLCBmaXJzdE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kb1NlbGVjdGlvbkFjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHsgZGF0YTogdGhpcy50cmVlRGF0YSB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhQm91bmQnLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZG9TZWxlY3Rpb25BY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc05vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgU0VMRUNURUQsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgc1VpZHMgPSB0aGlzLnNlbGVjdGVkTm9kZXM7XG4gICAgICAgICAgICBpZiAoc1VpZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHNlbGVjdGVkTm9kZXM6IFtdIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc1VpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNOb2RlID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ1tkYXRhLXVpZD1cIicgKyBzVWlkc1tpXSArICdcIl0nLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoc05vZGUsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEdpdmVuTm9kZXMoc05vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3Moc05vZGVzLCBTRUxFQ1RFRCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZWxlY3RHaXZlbk5vZGVzID0gZnVuY3Rpb24gKHNOb2Rlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoc05vZGVzW2ldLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NvbnRleHRtZW51ICcsIHRoaXMucHJldmVudENvbnRleHRNZW51KTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8IHRoaXMuZHJhZ1N0YXJ0QWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICAgICAgdmFyIGxpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgIGlmICghbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVIb3ZlcigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzRWxlbWVudChsaSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrV3JhcHBlciA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIENIRUNLQk9YV1JBUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY2hlY2tXcmFwcGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja0VsZW1lbnQgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBDSEVDS0JPWEZSQU1FLCBjaGVja1dyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVDaGVja05vZGUoY2hlY2tXcmFwcGVyLCBjaGVja0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENIRUNLKSwgbGksIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlckNsaWNrRXZlbnQoZSwgbGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKEVYUEFOREFCTEUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFjdGlvbihsaSwgdGFyZ2V0LCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjbGFzc0xpc3QuY29udGFpbnMoQ09MTEFQU0lCTEUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlTm9kZShsaSwgdGFyZ2V0LCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2xhc3NMaXN0LmNvbnRhaW5zKFBBUkVOVElURU0pICYmICFjbGFzc0xpc3QuY29udGFpbnMoTElTVElURU0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG11bHRpU2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSAmJiB0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUE9QVVAsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc1Zpc2libGUocG9wdXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dFdyYXAgPSBlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBURVhUV1JBUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4dFdyYXAgPSAhdHh0V3JhcCA/IGUudGFyZ2V0IDogdHh0V3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IHR4dFdyYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3NMZWZ0ID0gKGUuY2xpZW50WCAtIHBvcy5sZWZ0KSArIHR4dFdyYXAub2Zmc2V0TGVmdCAtIChwb3B1cC5vZmZzZXRXaWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zVG9wID0gdHh0V3JhcC5vZmZzZXRUb3AgLSBwb3B1cC5vZmZzZXRIZWlnaHQgLSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuc3R5bGUubGVmdCA9IChwb3NMZWZ0IDwgMCA/IDAgOiBwb3NMZWZ0KSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLnRvcCA9IChwb3NUb3AgPCAwID8gMCA6IHBvc1RvcCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKFBPUFVQU0VMRUNUKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlTZWxlY3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0KGxpLCBlLCBtdWx0aVNlbGVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ2xpY2tFdmVudChlLCBsaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUubm9kZUNoZWNraW5nRXZlbnQgPSBmdW5jdGlvbiAod3JhcHBlciwgaXNDaGVjaywgZSkge1xuICAgICAgICAgICAgdmFyIGN1cnJMaSA9IGVqMl9iYXNlXzYuY2xvc2VzdCh3cmFwcGVyLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQWN0aW9uTm9kZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBhcmlhU3RhdGUgPSAhaXNDaGVjayA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoYXJpYVN0YXRlKSkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCBhcmlhU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHRoaXMuZ2V0Q2hlY2tFdmVudChjdXJyTGksICFpc0NoZWNrID8gJ3VuY2hlY2snIDogJ2NoZWNrJywgZSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDaGVja2luZycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICByZXR1cm4gZXZlbnRBcmdzO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUubm9kZUNoZWNrZWRFdmVudCA9IGZ1bmN0aW9uICh3cmFwcGVyLCBpc0NoZWNrLCBlKSB7XG4gICAgICAgICAgICB2YXIgY3VyckxpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHdyYXBwZXIsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB0aGlzLmdldENoZWNrRXZlbnQod3JhcHBlciwgaXNDaGVjayA/ICd1bmNoZWNrJyA6ICdjaGVjaycsIGUpO1xuICAgICAgICAgICAgZXZlbnRBcmdzLmRhdGEgPSBldmVudEFyZ3MuZGF0YS5zcGxpY2UoMCwgZXZlbnRBcmdzLmRhdGEubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDaGVja2VkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnRyaWdnZXJDbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUsIGxpKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0ge1xuICAgICAgICAgICAgICAgIGV2ZW50OiBlLFxuICAgICAgICAgICAgICAgIG5vZGU6IGxpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUNsaWNrZWQnLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kTm9kZSA9IGZ1bmN0aW9uIChjdXJyTGksIGljb24pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoTE9BRCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVTcGlubmVyKGljb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbaWNvbl0sIEVYUEFOREFCTEUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIENPTExBUFNJQkxFKTtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IDA7XG4gICAgICAgICAgICB2YXIgZW5kID0gMDtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdWwgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCBjdXJyTGkpO1xuICAgICAgICAgICAgdmFyIGxpRWxlID0gY3VyckxpO1xuICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQobGlFbGUsIHVsKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaU9iai5hbmltYXRlKHVsLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuYW5pbWF0aW9uLmV4cGFuZC5lZmZlY3QsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvbi5leHBhbmQuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5leHBhbmQuZWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpRWxlLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGxpRWxlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFRFWFRXUkFQLCBjdXJyTGkpLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eS5hbmltYXRlSGVpZ2h0KGFyZ3MsIHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmRlZE5vZGUobGlFbGUsIHVsLCBpY29uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZE5vZGUobGlFbGUsIHVsLCBpY29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmV4cGFuZGVkTm9kZSA9IGZ1bmN0aW9uIChjdXJyTGksIHVsLCBpY29uKSB7XG4gICAgICAgICAgICB1bC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGN1cnJMaS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGN1cnJMaS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgICAgICAgY3VyckxpLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbaWNvbl0sIFBST0NFU1MpO1xuICAgICAgICAgICAgY3VyckxpLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtjdXJyTGldLCBOT0RFQ09MTEFQU0VEKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkICYmIHRoaXMuZXhwYW5kQXJncykge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUV4cGFuZGVkJywgdGhpcy5leHBhbmRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNvbGxhcHNlTm9kZSA9IGZ1bmN0aW9uIChjdXJyTGksIGljb24sIGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoUFJPQ0VTUykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgUFJPQ0VTUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sQXJncztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgY29sQXJncyA9IHRoaXMuZ2V0RXhwYW5kRXZlbnQoY3VyckxpLCBlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDb2xsYXBzaW5nJywgY29sQXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtpY29uXSwgQ09MTEFQU0lCTEUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIEVYUEFOREFCTEUpO1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgIHZhciBlbmQgPSAwO1xuICAgICAgICAgICAgdmFyIHByb3h5ID0gdGhpcztcbiAgICAgICAgICAgIHZhciB1bCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGN1cnJMaSk7XG4gICAgICAgICAgICB2YXIgbGlFbGUgPSBjdXJyTGk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtjdXJyTGldLCBOT0RFQ09MTEFQU0VEKTtcbiAgICAgICAgICAgIHRoaXMuYW5pT2JqLmFuaW1hdGUodWwsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5lZmZlY3QsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLmNvbGxhcHNlLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5lYXNpbmcsXG4gICAgICAgICAgICAgICAgYmVnaW46IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpRWxlLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgVEVYVFdSQVAsIGN1cnJMaSkub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBlbmQgPSBsaUVsZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJveHkuYW5pbWF0ZUhlaWdodChhcmdzLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuZDogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlFbGUuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGxpRWxlLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtpY29uXSwgUFJPQ0VTUyk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJMaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdub2RlQ29sbGFwc2VkJywgY29sQXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldEhlaWdodCA9IGZ1bmN0aW9uIChjdXJyTGksIHVsKSB7XG4gICAgICAgICAgICB1bC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHVsLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIGN1cnJMaS5zdHlsZS5oZWlnaHQgPSBjdXJyTGkub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB1bC5zdHlsZS52aXNpYmlsaXR5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hbmltYXRlSGVpZ2h0ID0gZnVuY3Rpb24gKGFyZ3MsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSAoYXJncy5kdXJhdGlvbiAtIGFyZ3MudGltZVN0YW1wKSAvIGFyZ3MuZHVyYXRpb247XG4gICAgICAgICAgICB2YXIgY3VycmVudEhlaWdodCA9IChlbmQgLSBzdGFydCkgKiByZW1haW5pbmcgKyBzdGFydDtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9IGN1cnJlbnRIZWlnaHQgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVuZGVyQ2hpbGROb2RlcyA9IGZ1bmN0aW9uIChwYXJlbnRMaSwgZXhwYW5kQ2hpbGQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBwYXJlbnRMaSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlaWNvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNob3dTcGlubmVyKGVpY29uKTtcbiAgICAgICAgICAgIHZhciBjaGlsZEl0ZW1zO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGRzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxldmVsID0gdGhpcy5wYXJlbnRzKHBhcmVudExpLCAnLicgKyBQQVJFTlRJVEVNKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIG1hcHBlcl8xID0gdGhpcy5nZXRDaGlsZEZpZWxkcyh0aGlzLmZpZWxkcywgbGV2ZWwsIDEpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKG1hcHBlcl8xKSB8fCBlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKG1hcHBlcl8xLmRhdGFTb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKGVpY29uKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50cmVlTGlzdC5wdXNoKCdmYWxzZScpO1xuICAgICAgICAgICAgICAgIG1hcHBlcl8xLmRhdGFTb3VyY2UuZXhlY3V0ZVF1ZXJ5KHRoaXMuZ2V0UXVlcnkobWFwcGVyXzEsIHBhcmVudExpLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSkpLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJlZUxpc3QucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkSXRlbXMgPSBlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3VycmVudExvYWREYXRhID0gY2hpbGRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY2hpbGRJdGVtcykgfHwgY2hpbGRJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKGVpY29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudExpLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfdGhpcy5nZXRBY3R1YWxQcm9wZXJ0aWVzKG1hcHBlcl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxpc3RCYXNlT3B0aW9uLmZpZWxkcyA9IHByb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMudXJsID0gcHJvcC5uYXZpZ2F0ZVVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxpc3RCYXNlT3B0aW9uLmFyaWFBdHRyaWJ1dGVzLmxldmVsID0gcGFyc2VGbG9hdChwYXJlbnRMaS5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGV2ZWwnKSkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkuYXBwZW5kQ2hpbGQoZWoyX2xpc3RzXzEuTGlzdEJhc2UuY3JlYXRlTGlzdChjaGlsZEl0ZW1zLCBfdGhpcy5saXN0QmFzZU9wdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kTm9kZShwYXJlbnRMaSwgZWljb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW5zdXJlQ2hlY2tOb2RlKHBhcmVudExpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZpbmFsaXplTm9kZShwYXJlbnRMaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJTdWJDaGlsZChwYXJlbnRMaSwgZXhwYW5kQ2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy50cmVlTGlzdC5sZW5ndGggPT09IDAgJiYgIV90aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5maW5hbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaGlsZEl0ZW1zID0gdGhpcy5nZXRDaGlsZE5vZGVzKHRoaXMudHJlZURhdGEsIHBhcmVudExpLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TG9hZERhdGEgPSBjaGlsZEl0ZW1zO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGNoaWxkSXRlbXMpIHx8IGNoaWxkSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKGVpY29uKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uYXJpYUF0dHJpYnV0ZXMubGV2ZWwgPSBwYXJzZUZsb2F0KHBhcmVudExpLmdldEF0dHJpYnV0ZSgnYXJpYS1sZXZlbCcpKSArIDE7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudExpLmFwcGVuZENoaWxkKGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3QodGhpcy5nZXRTb3J0ZWREYXRhKGNoaWxkSXRlbXMpLCB0aGlzLmxpc3RCYXNlT3B0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kTm9kZShwYXJlbnRMaSwgZWljb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUNoZWNrTm9kZShwYXJlbnRMaSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmluYWxpemVOb2RlKHBhcmVudExpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTdWJDaGlsZChwYXJlbnRMaSwgZXhwYW5kQ2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmVuc3VyZUNoZWNrTm9kZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUNoaWxkQ2hlY2tTdGF0ZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZVBhcmVudENoZWNrU3RhdGUoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2FkRGF0YSA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRDaGlsZEZpZWxkcyA9IGZ1bmN0aW9uIChtYXBwZXIsIG5vZGVMZXZlbCwgZGF0YUxldmVsKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGREYXRhO1xuICAgICAgICAgICAgaWYgKG5vZGVMZXZlbCA9PT0gZGF0YUxldmVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGRNYXBwZXIobWFwcGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENoaWxkRmllbGRzKHRoaXMuZ2V0Q2hpbGRNYXBwZXIobWFwcGVyKSwgbm9kZUxldmVsLCBkYXRhTGV2ZWwgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldENoaWxkTWFwcGVyID0gZnVuY3Rpb24gKG1hcHBlcikge1xuICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YgbWFwcGVyLmNoaWxkID09PSAnc3RyaW5nJyB8fCBlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKG1hcHBlci5jaGlsZCkpID8gbWFwcGVyIDogbWFwcGVyLmNoaWxkO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Q2hpbGROb2RlcyA9IGZ1bmN0aW9uIChvYmosIHBhcmVudElkLCBpc1Jvb3QpIHtcbiAgICAgICAgICAgIGlmIChpc1Jvb3QgPT09IHZvaWQgMCkgeyBpc1Jvb3QgPSBmYWxzZTsgfVxuICAgICAgICAgICAgdmFyIGNoaWxkTm9kZXM7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkTm9kZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmRhdGFUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGRHcm91cCh0aGlzLmdyb3VwZWREYXRhLCBwYXJlbnRJZCwgaXNSb290KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5maWVsZHMuY2hpbGQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvYmpsZW4gPSBvYmoubGVuZ3RoOyBpIDwgb2JqbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmpbaV1bdGhpcy5maWVsZHMuaWRdICYmIG9ialtpXVt0aGlzLmZpZWxkcy5pZF0udG9TdHJpbmcoKSA9PT0gcGFyZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqW2ldW3RoaXMuZmllbGRzLmNoaWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9ialtpXS5oYXNPd25Qcm9wZXJ0eSh0aGlzLmZpZWxkcy5jaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGVzID0gdGhpcy5nZXRDaGlsZE5vZGVzKG9ialtpXVt0aGlzLmZpZWxkcy5jaGlsZF0sIHBhcmVudElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGROb2RlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaGlsZE5vZGVzO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Q2hpbGRHcm91cCA9IGZ1bmN0aW9uIChkYXRhLCBwYXJlbnRJZCwgaXNSb290KSB7XG4gICAgICAgICAgICB2YXIgY2hpbGROb2RlcztcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkTm9kZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgb2JqbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBvYmpsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChkYXRhW2ldWzBdKSAmJiAhZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChkYXRhW2ldWzBdW3RoaXMuZmllbGRzLnBhcmVudElEXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV1bMF1bdGhpcy5maWVsZHMucGFyZW50SURdLnRvU3RyaW5nKCkgPT09IHBhcmVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1Jvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkTm9kZXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW5kZXJTdWJDaGlsZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBleHBhbmRDaGlsZCkge1xuICAgICAgICAgICAgaWYgKGV4cGFuZENoaWxkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNJY29ucyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIEVYUEFOREFCTEUsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjSWNvbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSBjSWNvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJMaSA9IGVqMl9iYXNlXzYuY2xvc2VzdChpY29uLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2hpbGROb2RlcyhjdXJMaSwgZXhwYW5kQ2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnRvZ2dsZVNlbGVjdCA9IGZ1bmN0aW9uIChsaSwgZSwgbXVsdGlTZWxlY3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24gJiYgKChlICYmIGUuY3RybEtleSkgfHwgbXVsdGlTZWxlY3QpICYmIHRoaXMuaXNBY3RpdmUobGkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnNlbGVjdE5vZGUobGksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlKGxpLCBlLCBtdWx0aVNlbGVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uIChsaSkge1xuICAgICAgICAgICAgcmV0dXJuIGxpLmNsYXNzTGlzdC5jb250YWlucyhBQ1RJVkUpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChsaSwgZSwgbXVsdGlTZWxlY3QpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpKSB8fCAoIXRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbiAmJiB0aGlzLmlzQWN0aXZlKGxpKSAmJiAhZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzRWxlbWVudChsaSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV2ZW50QXJncztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRBcmdzID0gdGhpcy5nZXRTZWxlY3RFdmVudChsaSwgJ3NlbGVjdCcsIGUpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZVNlbGVjdGluZycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd011bHRpU2VsZWN0aW9uIHx8ICghbXVsdGlTZWxlY3QgJiYgKCFlIHx8IChlICYmICFlLmN0cmxLZXkpKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdEFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbiAmJiBlICYmIGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RhcnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnROb2RlID0gbGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gdGhpcy5saUxpc3QuaW5kZXhPZih0aGlzLnN0YXJ0Tm9kZSk7XG4gICAgICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gdGhpcy5saUxpc3QuaW5kZXhPZihsaSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPiBlbmRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBlbmRJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXggPSB0ZW1wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8PSBlbmRJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyTm9kZSA9IHRoaXMubGlMaXN0W2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc1Zpc2libGUoY3Vyck5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFNlbGVjdChjdXJyTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Tm9kZSA9IGxpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0KGxpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNFbGVtZW50KGxpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlU2VsZWN0ZWQnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudW5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKGxpLCBlKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICBldmVudEFyZ3MgPSB0aGlzLmdldFNlbGVjdEV2ZW50KGxpLCAndW4tc2VsZWN0JywgZSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlU2VsZWN0aW5nJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3QobGkpO1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c0VsZW1lbnQobGkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVTZWxlY3RlZCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRGb2N1c0VsZW1lbnQgPSBmdW5jdGlvbiAobGkpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZvY3VzZWROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2ZvY3VzZWROb2RlXSwgRk9DVVMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtsaV0sIEZPQ1VTKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUlkQXR0cihmb2N1c2VkTm9kZSwgbGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkU2VsZWN0ID0gZnVuY3Rpb24gKGxpRWxlKSB7XG4gICAgICAgICAgICBsaUVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbbGlFbGVdLCBBQ1RJVkUpO1xuICAgICAgICAgICAgdmFyIGlkID0gbGlFbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGlkKSAmJiB0aGlzLnNlbGVjdGVkTm9kZXMuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE5vZGVzLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVtb3ZlU2VsZWN0ID0gZnVuY3Rpb24gKGxpRWxlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGlFbGUuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaUVsZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2xpRWxlXSwgQUNUSVZFKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuc2VsZWN0ZWROb2Rlcy5pbmRleE9mKGxpRWxlLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2Rlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVtb3ZlU2VsZWN0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkTEkgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBBQ1RJVkUpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzZWxlY3RlZExJXzEgPSBzZWxlY3RlZExJOyBfaSA8IHNlbGVjdGVkTElfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gc2VsZWN0ZWRMSV8xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKHNlbGVjdGVkTEksIEFDVElWRSk7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBzZWxlY3RlZE5vZGVzOiBbXSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldFNlbGVjdEV2ZW50ID0gZnVuY3Rpb24gKGN1cnJMaSwgYWN0aW9uLCBlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZURhdGEgPSB0aGlzLmdldE5vZGVEYXRhKGN1cnJMaSk7XG4gICAgICAgICAgICByZXR1cm4geyBhY3Rpb246IGFjdGlvbiwgY2FuY2VsOiBmYWxzZSwgaXNJbnRlcmFjdGVkOiBlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGUpID8gZmFsc2UgOiB0cnVlLCBub2RlOiBjdXJyTGksIG5vZGVEYXRhOiBub2RlRGF0YSB9O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0RXhwYW5kT25UeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRPblR5cGUgPSAodGhpcy5leHBhbmRPbiA9PT0gJ2F1dG8nKSA/IChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgPyAnY2xpY2snIDogJ2RibGNsaWNrJykgOiB0aGlzLmV4cGFuZE9uO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCB8fCAodGhpcy5hbGxvd0VkaXRpbmcgJiYgZS50eXBlID09PSAnZGJsY2xpY2snKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFJPT1QpIHx8XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhQQVJFTlRJVEVNKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKExJU1RJVEVNKSB8fFxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoSUNPTikgfHwgdGhpcy5zaG93Q2hlY2tCb3ggJiYgZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgQ0hFQ0tCT1hXUkFQKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VBY3Rpb24oZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgTElTVElURU0pLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlQWN0aW9uID0gZnVuY3Rpb24gKGN1cnJMaSwgZSkge1xuICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBjdXJyTGkpO1xuICAgICAgICAgICAgaWYgKCFpY29uIHx8IGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKFBST0NFU1MpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IGljb24uY2xhc3NMaXN0O1xuICAgICAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoRVhQQU5EQUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBY3Rpb24oY3VyckxpLCBpY29uLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VOb2RlKGN1cnJMaSwgaWNvbiwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kQWN0aW9uID0gZnVuY3Rpb24gKGN1cnJMaSwgaWNvbiwgZSwgZXhwYW5kQ2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChpY29uLmNsYXNzTGlzdC5jb250YWlucyhQUk9DRVNTKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBQUk9DRVNTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBcmdzID0gdGhpcy5nZXRFeHBhbmRFdmVudChjdXJyTGksIGUpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUV4cGFuZGluZycsIHRoaXMuZXhwYW5kQXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kQXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1bCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGN1cnJMaSk7XG4gICAgICAgICAgICBpZiAodWwgJiYgdWwubm9kZU5hbWUgPT09ICdVTCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZE5vZGUoY3VyckxpLCBpY29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2hpbGROb2RlcyhjdXJyTGksIGV4cGFuZENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmtleUFjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGZvY3VzZWROb2RlID0gdGhpcy5nZXRGb2N1c2VkTm9kZSgpO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKElOUFVUKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnBFbGUgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSAnZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucEVsZS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtmb2N1c2VkTm9kZV0sIEhPVkVSKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdlc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucEVsZS52YWx1ZSA9IHRoaXMub2xkVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ZvY3VzZWROb2RlXSwgSE9WRVIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0ge1xuICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGUsXG4gICAgICAgICAgICAgICAgbm9kZTogZm9jdXNlZE5vZGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdrZXlQcmVzcycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzcGFjZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja05vZGUoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuTm9kZSh0aGlzLmVuYWJsZVJ0bCA/IGZhbHNlIDogdHJ1ZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuTm9kZSh0aGlzLmVuYWJsZVJ0bCA/IHRydWUgOiBmYWxzZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0RG93bic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRLZXlTZWxlY3QodHJ1ZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVEb3duJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRG93bic6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3NEb3duJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0VXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0S2V5U2VsZWN0KGZhbHNlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVVwJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsVXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2NzVXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlTm9kZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvbWUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0SG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEhvbWUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2NzSG9tZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVSb290Tm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdEVuZCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEVuZCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3NFbmQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlUm9vdE5vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEVudGVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdEVudGVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjc0VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3QoZm9jdXNlZE5vZGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmMic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUZXh0Ym94KGZvY3VzZWROb2RlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsQSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzTm9kZXMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBMSVNUSVRFTSArICc6bm90KC4nICsgQUNUSVZFICsgJyknLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RHaXZlbk5vZGVzKHNOb2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5uYXZpZ2F0ZVRvRm9jdXMgPSBmdW5jdGlvbiAoaXNVcCkge1xuICAgICAgICAgICAgdmFyIGZvY3VzTm9kZSA9IHRoaXMuZ2V0Rm9jdXNlZE5vZGUoKS5xdWVyeVNlbGVjdG9yKCcuJyArIFRFWFRXUkFQKTtcbiAgICAgICAgICAgIHZhciBwb3MgPSBmb2N1c05vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRTY3JvbGxQYXJlbnQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChwYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFBvcyA9IHBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBpZiAocG9zLmJvdHRvbSA+IHBhcmVudFBvcy5ib3R0b20pIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnNjcm9sbFRvcCArPSBwb3MuYm90dG9tIC0gcGFyZW50UG9zLmJvdHRvbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocG9zLnRvcCA8IHBhcmVudFBvcy50b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnNjcm9sbFRvcCAtPSBwYXJlbnRQb3MudG9wIC0gcG9zLnRvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXNWaXNpYmxlID0gdGhpcy5pc1Zpc2libGVJblZpZXdwb3J0KGZvY3VzTm9kZSk7XG4gICAgICAgICAgICBpZiAoIWlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGZvY3VzTm9kZS5zY3JvbGxJbnRvVmlldyhpc1VwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmlzVmlzaWJsZUluVmlld3BvcnQgPSBmdW5jdGlvbiAodHh0V3JhcCkge1xuICAgICAgICAgICAgdmFyIHBvcyA9IHR4dFdyYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICByZXR1cm4gKHBvcy50b3AgPj0gMCAmJiBwb3MubGVmdCA+PSAwICYmIHBvcy5ib3R0b20gPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAmJlxuICAgICAgICAgICAgICAgIHBvcy5yaWdodCA8PSAod2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRTY3JvbGxQYXJlbnQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAobm9kZS5zY3JvbGxIZWlnaHQgPiBub2RlLmNsaWVudEhlaWdodCkgPyBub2RlIDogdGhpcy5nZXRTY3JvbGxQYXJlbnQobm9kZS5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNoaWZ0S2V5U2VsZWN0ID0gZnVuY3Rpb24gKGlzVG93YXJkcywgZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBmb2N1c2VkTm9kZSA9IHRoaXMuZ2V0Rm9jdXNlZE5vZGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dE5vZGUgPSBpc1Rvd2FyZHMgPyB0aGlzLmdldE5leHROb2RlKGZvY3VzZWROb2RlKSA6IHRoaXMuZ2V0UHJldk5vZGUoZm9jdXNlZE5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSG92ZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzRWxlbWVudChuZXh0Tm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3QobmV4dE5vZGUsIGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG9Gb2N1cyghaXNUb3dhcmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVOb2RlKGlzVG93YXJkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jaGVja05vZGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGZvY3VzZWROb2RlID0gdGhpcy5nZXRGb2N1c2VkTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGNoZWNrV3JhcCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIENIRUNLQk9YV1JBUCwgZm9jdXNlZE5vZGUpO1xuICAgICAgICAgICAgdmFyIGlzQ2hlY2tlZCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcgLicgKyBDSEVDS0JPWEZSQU1FLCBjaGVja1dyYXApLmNsYXNzTGlzdC5jb250YWlucyhDSEVDSyk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQ2hlY2tOb2RlKGNoZWNrV3JhcCwgaXNDaGVja2VkLCBmb2N1c2VkTm9kZSwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS52YWxpZGF0ZUNoZWNrTm9kZSA9IGZ1bmN0aW9uIChjaGVja1dyYXAsIGlzQ2hlY2ssIGxpLCBlKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0gdGhpcy5ub2RlQ2hlY2tpbmdFdmVudChjaGVja1dyYXAsIGlzQ2hlY2ssIGUpO1xuICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGNoZWNrV3JhcCwgaXNDaGVjayA/ICd1bmNoZWNrJyA6ICdjaGVjaycsIGUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVDaGlsZENoZWNrU3RhdGUobGkpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVQYXJlbnRDaGVja1N0YXRlKGVqMl9iYXNlXzYuY2xvc2VzdChlajJfYmFzZV82LmNsb3Nlc3QobGksICcuJyArIFBBUkVOVElURU0pLCAnLicgKyBMSVNUSVRFTSkpO1xuICAgICAgICAgICAgdGhpcy5ub2RlQ2hlY2tlZEV2ZW50KGNoZWNrV3JhcCwgaXNDaGVjaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5vcGVuTm9kZSA9IGZ1bmN0aW9uICh0b0JlT3BlbmVkLCBlKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIGZvY3VzZWROb2RlKTtcbiAgICAgICAgICAgIGlmICh0b0JlT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpY29uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoRVhQQU5EQUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBY3Rpb24oZm9jdXNlZE5vZGUsIGljb24sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c05leHROb2RlKGZvY3VzZWROb2RlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaWNvbiAmJiBpY29uLmNsYXNzTGlzdC5jb250YWlucyhDT0xMQVBTSUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZU5vZGUoZm9jdXNlZE5vZGUsIGljb24sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGVqMl9iYXNlXzYuY2xvc2VzdChmb2N1c2VkTm9kZSwgJy4nICsgUEFSRU5USVRFTSksICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRMaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1cyhmb2N1c2VkTm9kZSwgcGFyZW50TGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvRm9jdXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5uYXZpZ2F0ZU5vZGUgPSBmdW5jdGlvbiAoaXNUb3dhcmRzKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzTmV4dE5vZGUoZm9jdXNlZE5vZGUsIGlzVG93YXJkcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5uYXZpZ2F0ZVJvb3ROb2RlID0gZnVuY3Rpb24gKGlzQmFja3dhcmRzKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICB2YXIgcm9vdE5vZGUgPSBpc0JhY2t3YXJkcyA/IHRoaXMuZ2V0Um9vdE5vZGUoKSA6IHRoaXMuZ2V0RW5kTm9kZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1cyhmb2N1c2VkTm9kZSwgcm9vdE5vZGUpO1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvRm9jdXMoaXNCYWNrd2FyZHMpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Rm9jdXNlZE5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZk5vZGUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBMSVNUSVRFTSArICcuJyArIEZPQ1VTLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZk5vZGUpID8gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgTElTVElURU0sIHRoaXMuZWxlbWVudCkgOiBmTm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZvY3VzTmV4dE5vZGUgPSBmdW5jdGlvbiAobGksIGlzVG93YXJkcykge1xuICAgICAgICAgICAgdmFyIG5leHROb2RlID0gaXNUb3dhcmRzID8gdGhpcy5nZXROZXh0Tm9kZShsaSkgOiB0aGlzLmdldFByZXZOb2RlKGxpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXMobGksIG5leHROb2RlKTtcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUb0ZvY3VzKCFpc1Rvd2FyZHMpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0TmV4dE5vZGUgPSBmdW5jdGlvbiAobGkpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMubGlMaXN0LmluZGV4T2YobGkpO1xuICAgICAgICAgICAgdmFyIG5leHROb2RlO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgbmV4dE5vZGUgPSB0aGlzLmxpTGlzdFtpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobmV4dE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICghZWoyX2Jhc2VfNi5pc1Zpc2libGUobmV4dE5vZGUpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXh0Tm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldFByZXZOb2RlID0gZnVuY3Rpb24gKGxpKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmxpTGlzdC5pbmRleE9mKGxpKTtcbiAgICAgICAgICAgIHZhciBwcmV2Tm9kZTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgICAgIHByZXZOb2RlID0gdGhpcy5saUxpc3RbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKHByZXZOb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAoIWVqMl9iYXNlXzYuaXNWaXNpYmxlKHByZXZOb2RlKSk7XG4gICAgICAgICAgICByZXR1cm4gcHJldk5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRSb290Tm9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICB2YXIgcm9vdE5vZGU7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgcm9vdE5vZGUgPSB0aGlzLmxpTGlzdFtpbmRleF07XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH0gd2hpbGUgKCFlajJfYmFzZV82LmlzVmlzaWJsZShyb290Tm9kZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHJvb3ROb2RlO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0RW5kTm9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMubGlMaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB2YXIgZW5kTm9kZTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBlbmROb2RlID0gdGhpcy5saUxpc3RbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGluZGV4LS07XG4gICAgICAgICAgICB9IHdoaWxlICghZWoyX2Jhc2VfNi5pc1Zpc2libGUoZW5kTm9kZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGVuZE5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRGb2N1cyA9IGZ1bmN0aW9uIChwcmVOb2RlLCBuZXh0Tm9kZSkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbcHJlTm9kZV0sIFtIT1ZFUiwgRk9DVVNdKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW25leHROb2RlXSwgW0hPVkVSLCBGT0NVU10pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJZEF0dHIocHJlTm9kZSwgbmV4dE5vZGUpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudXBkYXRlSWRBdHRyID0gZnVuY3Rpb24gKHByZU5vZGUsIG5leHROb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnKTtcbiAgICAgICAgICAgIGlmIChwcmVOb2RlKSB7XG4gICAgICAgICAgICAgICAgcHJlTm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0Tm9kZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ25vZGVfYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLCAnbm9kZV9hY3RpdmUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZvY3VzSW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubW91c2VEb3duU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbdGhpcy5nZXRGb2N1c2VkTm9kZSgpXSwgSE9WRVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd25TdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZvY3VzT3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbdGhpcy5nZXRGb2N1c2VkTm9kZSgpXSwgSE9WRVIpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUub25Nb3VzZU92ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICB2YXIgY3VycmVudExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50TGkgfHwgY2xhc3NMaXN0LmNvbnRhaW5zKFBBUkVOVElURU0pIHx8IGNsYXNzTGlzdC5jb250YWlucyhMSVNUSVRFTSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUhvdmVyKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIb3ZlcihjdXJyZW50TGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0SG92ZXIgPSBmdW5jdGlvbiAobGkpIHtcbiAgICAgICAgICAgIGlmICghbGkuY2xhc3NMaXN0LmNvbnRhaW5zKEhPVkVSKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSG92ZXIoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtsaV0sIEhPVkVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUub25Nb3VzZUxlYXZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSG92ZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbW92ZUhvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhvdmVyZWROb2RlID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgSE9WRVIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoaG92ZXJlZE5vZGUgJiYgaG92ZXJlZE5vZGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhob3ZlcmVkTm9kZSwgSE9WRVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXROb2RlRGF0YSA9IGZ1bmN0aW9uIChjdXJyTGkpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChjdXJyTGkpICYmIGN1cnJMaS5jbGFzc0xpc3QuY29udGFpbnMoTElTVElURU0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gY3VyckxpLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIExJU1RURVhULCBjdXJyTGkpLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIHZhciBwTm9kZSA9IGVqMl9iYXNlXzYuY2xvc2VzdChjdXJyTGkucGFyZW50Tm9kZSwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgIHZhciBwaWQgPSBwTm9kZSA/IHBOb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gY3VyckxpLmNsYXNzTGlzdC5jb250YWlucyhBQ1RJVkUpO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmRlZCA9IChjdXJyTGkuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykgPT09ICd0cnVlJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2VkID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgQ0hFQ0tCT1hXUkFQLCBjdXJyTGkpLmdldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGlkOiBpZCwgdGV4dDogdGV4dCwgcGFyZW50SUQ6IHBpZCwgc2VsZWN0ZWQ6IHNlbGVjdGVkLCBleHBhbmRlZDogZXhwYW5kZWQsIGlzQ2hlY2tlZDogY2hlY2tlZCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgaWQ6ICcnLCB0ZXh0OiAnJywgcGFyZW50SUQ6ICcnLCBzZWxlY3RlZDogJycsIGV4cGFuZGVkOiAnJywgaXNDaGVja2VkOiAnJyB9O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0RXhwYW5kRXZlbnQgPSBmdW5jdGlvbiAoY3VyckxpLCBlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZURhdGEgPSB0aGlzLmdldE5vZGVEYXRhKGN1cnJMaSk7XG4gICAgICAgICAgICByZXR1cm4geyBjYW5jZWw6IGZhbHNlLCBpc0ludGVyYWN0ZWQ6IGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZSkgPyBmYWxzZSA6IHRydWUsIG5vZGU6IGN1cnJMaSwgbm9kZURhdGE6IG5vZGVEYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZVJlbmRlck5vZGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgc2VsZWN0ZWROb2RlczogW10gfSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNldERhdGFCaW5kaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRDc3NDbGFzcyA9IGZ1bmN0aW9uIChvbGRDbGFzcywgbmV3Q2xhc3MpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChvbGRDbGFzcykgJiYgb2xkQ2xhc3MgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgb2xkQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobmV3Q2xhc3MpICYmIG5ld0NsYXNzICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIG5ld0NsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZWRpdGluZ0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhST09UKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFBBUkVOVElURU0pIHx8XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhMSVNUSVRFTSkgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhJQ09OKSB8fFxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoSU5QVVQpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoSU5QVVRHUk9VUCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRleHRib3gobGlFbGUsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuY3JlYXRlVGV4dGJveCA9IGZ1bmN0aW9uIChsaUVsZSwgZSkge1xuICAgICAgICAgICAgdmFyIHRleHRFbGUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBMSVNUVEVYVCwgbGlFbGUpO1xuICAgICAgICAgICAgdGhpcy5vbGRUZXh0ID0gdGV4dEVsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB0aGlzLmdldEVkaXRFdmVudChsaUVsZSwgbnVsbCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVFZGl0aW5nJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlucFdpZHRoID0gdGV4dEVsZS5vZmZzZXRXaWR0aCArIDU7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSAnd2lkdGg6JyArIGlucFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIHZhciBpbnBFbGUgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBhdHRyczogeyB2YWx1ZTogdGhpcy5vbGRUZXh0IH0gfSk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtsaUVsZV0sIEVESVRJTkcpO1xuICAgICAgICAgICAgdGV4dEVsZS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGV4dEVsZS5hcHBlbmRDaGlsZChpbnBFbGUpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dE9iaiA9IGVqMl9pbnB1dHNfMS5JbnB1dC5jcmVhdGVJbnB1dCh7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogaW5wRWxlLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRPYmouY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZSk7XG4gICAgICAgICAgICBpbnBFbGUuZm9jdXMoKTtcbiAgICAgICAgICAgIHZhciBpbnB1dEVsZSA9IGlucEVsZTtcbiAgICAgICAgICAgIGlucHV0RWxlLnNldFNlbGVjdGlvblJhbmdlKDAsIGlucHV0RWxlLnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLndpcmVJbnB1dEV2ZW50cyhpbnBFbGUpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuaW5wdXRGb2N1c091dCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgbmV3VGV4dCA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHZhciB0eHRFbGUgPSBlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBMSVNUVEVYVCk7XG4gICAgICAgICAgICB2YXIgbGlFbGUgPSBlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICB0eHRFbGUuY2hpbGROb2Rlc1swXS5ub2RlVmFsdWUgPSBuZXdUZXh0O1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2godGhpcy5pbnB1dE9iai5jb250YWluZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbbGlFbGVdLCBFRElUSU5HKTtcbiAgICAgICAgICAgIHR4dEVsZS5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlRWRpdGVkJywgdGhpcy5nZXRFZGl0RXZlbnQobGlFbGUsIG5ld1RleHQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZWxlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPVwiJyArIGVsZSArICdcIl0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBlbGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0RWRpdEV2ZW50ID0gZnVuY3Rpb24gKGxpRWxlLCBuZXdUZXh0KSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0Tm9kZURhdGEobGlFbGUpO1xuICAgICAgICAgICAgcmV0dXJuIHsgY2FuY2VsOiBmYWxzZSwgbmV3VGV4dDogbmV3VGV4dCwgbm9kZTogbGlFbGUsIG5vZGVEYXRhOiBkYXRhLCBvbGRUZXh0OiB0aGlzLm9sZFRleHQgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldERyYWdBbmREcm9wID0gZnVuY3Rpb24gKHRvQmluZCkge1xuICAgICAgICAgICAgaWYgKHRvQmluZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZURyYWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveURyYWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmluaXRpYWxpemVEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB2aXJ0dWFsRWxlO1xuICAgICAgICAgICAgdGhpcy5kcmFnT2JqID0gbmV3IGVqMl9iYXNlXzUuRHJhZ2dhYmxlKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGVuYWJsZVRhaWxNb2RlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy4nICsgVEVYVFdSQVAsXG4gICAgICAgICAgICAgICAgaGVscGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnVGFyZ2V0ID0gZS5zZW5kZXIudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHJhZ1Jvb3QgPSBlajJfYmFzZV82LmNsb3Nlc3QoX3RoaXMuZHJhZ1RhcmdldCwgJy4nICsgUk9PVCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkcmFnV3JhcCA9IGVqMl9iYXNlXzYuY2xvc2VzdChfdGhpcy5kcmFnVGFyZ2V0LCAnLicgKyBURVhUV1JBUCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdMaSA9IGVqMl9iYXNlXzYuY2xvc2VzdChfdGhpcy5kcmFnVGFyZ2V0LCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5mdWxsUm93U2VsZWN0ICYmICFkcmFnV3JhcCAmJiBfdGhpcy5kcmFnVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhGVUxMUk9XKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ1dyYXAgPSBfdGhpcy5kcmFnVGFyZ2V0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmRyYWdUYXJnZXQgfHwgIWUuZWxlbWVudC5pc1NhbWVOb2RlKGRyYWdSb290KSB8fCAhZHJhZ1dyYXAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFJPT1QpIHx8IF90aGlzLmRyYWdUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFBBUkVOVElURU0pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhMSVNUSVRFTSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmVFbGUgPSAoZHJhZ1dyYXAuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgY2xvbmVFbGUpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBJQ09OICsgJyAnICsgRVhQQU5EQUJMRSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lRWxlLmluc2VydEJlZm9yZShpY29uLCBjbG9uZUVsZS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNzc0NsYXNzID0gRFJBR0lURU0gKyAnICcgKyBST09UICsgJyAnICsgKF90aGlzLmVuYWJsZVJ0bCA/IFJUTCA6ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgdmlydHVhbEVsZSA9IGVqMl9iYXNlXzYuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IGNzc0NsYXNzIH0pO1xuICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsRWxlLmFwcGVuZENoaWxkKGNsb25lRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5MZW4gPSBfdGhpcy5zZWxlY3RlZE5vZGVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5MZW4gPiAxICYmIF90aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24gJiYgX3RoaXMuZHJhZ0xpLmNsYXNzTGlzdC5jb250YWlucyhBQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY05vZGUgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogRFJPUENPVU5ULCBpbm5lckhUTUw6ICcnICsgbkxlbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpcnR1YWxFbGUuYXBwZW5kQ2hpbGQoY05vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodmlydHVhbEVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdEYXRhID0gX3RoaXMuZ2V0Tm9kZURhdGEoX3RoaXMuZHJhZ0xpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcnR1YWxFbGU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW190aGlzLmVsZW1lbnRdLCBEUkFHR0lORyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSBfdGhpcy5nZXREcmFnRXZlbnQoZS5ldmVudCwgX3RoaXMsIG51bGwsIGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignbm9kZURyYWdTdGFydCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaCh2aXJ0dWFsRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW190aGlzLmVsZW1lbnRdLCBEUkFHR0lORyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhZ1N0YXJ0QWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRyYWc6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdPYmouc2V0UHJvcGVydGllcyh7IGN1cnNvckF0OiB7IHRvcDogKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGUuZXZlbnQudGFyZ2V0VG91Y2hlcykgfHwgZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSA/IDYwIDogLTIwIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdBY3Rpb24oZSwgdmlydHVhbEVsZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkcmFnU3RvcDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbX3RoaXMuZWxlbWVudF0sIERSQUdHSU5HKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlVmlydHVhbEVsZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHJvcFRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHJvcFJvb3QgPSAoZWoyX2Jhc2VfNi5jbG9zZXN0KGRyb3BUYXJnZXQsICcuJyArIERST1BQQUJMRSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRyb3BUYXJnZXQgfHwgIWRyb3BSb290IHx8IGRyb3BUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFJPT1QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSBfdGhpcy5nZXREcmFnRXZlbnQoZS5ldmVudCwgX3RoaXMsIGRyb3BUYXJnZXQsIGRyb3BUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdub2RlRHJhZ1N0b3AnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnU3RhcnRBY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJvcE9iaiA9IG5ldyBlajJfYmFzZV81LkRyb3BwYWJsZSh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBvdXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlKSAmJiAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFNJQkxJTkcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG92ZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkcm9wOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcm9wQWN0aW9uKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZHJhZ0FjdGlvbiA9IGZ1bmN0aW9uIChlLCB2aXJ0dWFsRWxlKSB7XG4gICAgICAgICAgICB2YXIgZHJvcFJvb3QgPSBlajJfYmFzZV82LmNsb3Nlc3QoZS50YXJnZXQsICcuJyArIERST1BQQUJMRSk7XG4gICAgICAgICAgICB2YXIgZHJvcFdyYXAgPSBlajJfYmFzZV82LmNsb3Nlc3QoZS50YXJnZXQsICcuJyArIFRFWFRXUkFQKTtcbiAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgdmlydHVhbEVsZSk7XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtpY29uXSwgW0RST1BJTiwgRFJPUE5FWFQsIERST1BPVVQsIE5PRFJPUF0pO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVWaXJ0dWFsRWxlKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IGUudGFyZ2V0LmNsYXNzTGlzdDtcbiAgICAgICAgICAgIGlmICh0aGlzLmZ1bGxSb3dTZWxlY3QgJiYgIWRyb3BXcmFwICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGNsYXNzTGlzdCkgJiYgY2xhc3NMaXN0LmNvbnRhaW5zKEZVTExST1cpKSB7XG4gICAgICAgICAgICAgICAgZHJvcFdyYXAgPSBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHJvcFJvb3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJvcExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGUudGFyZ2V0LCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICAgICAgaWYgKCFkcm9wUm9vdC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkgfHwgKGRyb3BXcmFwICYmXG4gICAgICAgICAgICAgICAgICAgICghZHJvcExpLmlzU2FtZU5vZGUodGhpcy5kcmFnTGkpICYmICF0aGlzLmlzRGVzY2VuZGFudCh0aGlzLmRyYWdMaSwgZHJvcExpKSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlICYmIChlLmV2ZW50Lm9mZnNldFkgPCA3KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIERST1BORVhUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aXJFbGUgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBTSUJMSU5HIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5mdWxsUm93U2VsZWN0ID8gKDEpIDogKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcExpLmluc2VydEJlZm9yZSh2aXJFbGUsIGRyb3BMaS5jaGlsZHJlbltpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUgJiYgKGUudGFyZ2V0Lm9mZnNldEhlaWdodCA+IDAgJiYgZS5ldmVudC5vZmZzZXRZID4gKGUudGFyZ2V0Lm9mZnNldEhlaWdodCAtIDEwKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBEUk9QTkVYVCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlyRWxlID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogU0lCTElORyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZnVsbFJvd1NlbGVjdCA/ICgyKSA6ICgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BMaS5pbnNlcnRCZWZvcmUodmlyRWxlLCBkcm9wTGkuY2hpbGRyZW5baW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBEUk9QSU4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0Lm5vZGVOYW1lID09PSAnTEknICYmICghZHJvcExpLmlzU2FtZU5vZGUodGhpcy5kcmFnTGkpICYmICF0aGlzLmlzRGVzY2VuZGFudCh0aGlzLmRyYWdMaSwgZHJvcExpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIERST1BORVhUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWaXJ0dWFsRWxlKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoU0lCTElORykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIERST1BORVhUKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBEUk9QT1VUKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgTk9EUk9QKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVEcmFnZ2luZycsIHRoaXMuZ2V0RHJhZ0V2ZW50KGUuZXZlbnQsIHRoaXMsIGUudGFyZ2V0LCBlLnRhcmdldCkpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZHJvcEFjdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0WSA9IGUuZXZlbnQub2Zmc2V0WTtcbiAgICAgICAgICAgIHZhciBkcm9wVGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgZHJhZ09iaiA9IGUuZHJhZ0RhdGEuZHJhZ2dhYmxlLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICB2YXIgZHJhZ1RhcmdldCA9IGRyYWdPYmouZHJhZ1RhcmdldDtcbiAgICAgICAgICAgIHZhciBkcmFnTGkgPSAoZWoyX2Jhc2VfNi5jbG9zZXN0KGRyYWdUYXJnZXQsICcuJyArIExJU1RJVEVNKSk7XG4gICAgICAgICAgICB2YXIgZHJvcExpID0gKGVqMl9iYXNlXzYuY2xvc2VzdChkcm9wVGFyZ2V0LCAnLicgKyBMSVNUSVRFTSkpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgaWYgKCFkcm9wTGkgfHwgZHJvcExpLmlzU2FtZU5vZGUoZHJhZ0xpKSB8fCB0aGlzLmlzRGVzY2VuZGFudChkcmFnTGksIGRyb3BMaSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHJhZ09iai5hbGxvd011bHRpU2VsZWN0aW9uICYmIChkcmFnTGkuY2xhc3NMaXN0LmNvbnRhaW5zKEFDVElWRSkgfHwgKG9mZnNldFkgPCA3IHx8XG4gICAgICAgICAgICAgICAgKGUudGFyZ2V0Lm9mZnNldEhlaWdodCA+IDAgJiYgb2Zmc2V0WSA+IChlLnRhcmdldC5vZmZzZXRIZWlnaHQgLSAxMCkpKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc05vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgQUNUSVZFLCBkcmFnT2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc05vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkcm9wTGkuaXNTYW1lTm9kZShzTm9kZXNbaV0pIHx8IHRoaXMuaXNEZXNjZW5kYW50KHNOb2Rlc1tpXSwgZHJvcExpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmROb2RlKGRyb3BUYXJnZXQsIHNOb2Rlc1tpXSwgZHJvcExpLCBlLCBkcmFnT2JqLCBvZmZzZXRZKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZE5vZGUoZHJvcFRhcmdldCwgZHJhZ0xpLCBkcm9wTGksIGUsIGRyYWdPYmosIG9mZnNldFkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlRHJvcHBlZCcsIHRoaXMuZ2V0RHJhZ0V2ZW50KGUuZXZlbnQsIGRyYWdPYmosIGRyb3BUYXJnZXQsIGUudGFyZ2V0KSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hcHBlbmROb2RlID0gZnVuY3Rpb24gKGRyb3BUYXJnZXQsIGRyYWdMaSwgZHJvcExpLCBlLCBkcmFnT2JqLCBvZmZzZXRZKSB7XG4gICAgICAgICAgICBpZiAoZHJvcFRhcmdldC5ub2RlTmFtZSA9PT0gJ0xJJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFzU2libGluZ05vZGUoZHJhZ0xpLCBkcm9wTGksIGUsIGRyYWdPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wQXNDaGlsZE5vZGUoZHJhZ0xpLCBkcm9wTGksIGRyYWdPYmosIG51bGwsIGUsIG9mZnNldFkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZHJvcEFzU2libGluZ05vZGUgPSBmdW5jdGlvbiAoZHJhZ0xpLCBkcm9wTGksIGUsIGRyYWdPYmopIHtcbiAgICAgICAgICAgIHZhciBkcm9wVWwgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJvcExpLCAnLicgKyBQQVJFTlRJVEVNKTtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50VWwgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ0xpLCAnLicgKyBQQVJFTlRJVEVNKTtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50TGkgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ1BhcmVudFVsLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICB2YXIgcHJlO1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0Lm9mZnNldEhlaWdodCA+IDAgJiYgZS5ldmVudC5vZmZzZXRZID4gZS50YXJnZXQub2Zmc2V0SGVpZ2h0IC0gMikge1xuICAgICAgICAgICAgICAgIHByZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS5ldmVudC5vZmZzZXRZIDwgMikge1xuICAgICAgICAgICAgICAgIHByZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcm9wVWwuaW5zZXJ0QmVmb3JlKGRyYWdMaSwgcHJlID8gZS50YXJnZXQgOiBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KGRyYWdQYXJlbnRVbCwgZHJhZ1BhcmVudExpKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXJpYUxldmVsKGRyYWdMaSk7XG4gICAgICAgICAgICBpZiAoZHJhZ09iai5lbGVtZW50LmlkID09PSB0aGlzLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRyYWdPYmoudXBkYXRlSW5zdGFuY2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kcm9wQXNDaGlsZE5vZGUgPSBmdW5jdGlvbiAoZHJhZ0xpLCBkcm9wTGksIGRyYWdPYmosIGluZGV4LCBlLCBwb3MpIHtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50VWwgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ0xpLCAnLicgKyBQQVJFTlRJVEVNKTtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50TGkgPSBlajJfYmFzZV82LmNsb3Nlc3QoZHJhZ1BhcmVudFVsLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICB2YXIgZHJvcFBhcmVudFVsID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyb3BMaSwgJy4nICsgUEFSRU5USVRFTSk7XG4gICAgICAgICAgICBpZiAoZSAmJiAocG9zIDwgNykpIHtcbiAgICAgICAgICAgICAgICBkcm9wUGFyZW50VWwuaW5zZXJ0QmVmb3JlKGRyYWdMaSwgZHJvcExpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGUgJiYgKGUudGFyZ2V0Lm9mZnNldEhlaWdodCA+IDAgJiYgcG9zID4gKGUudGFyZ2V0Lm9mZnNldEhlaWdodCAtIDEwKSkpIHtcbiAgICAgICAgICAgICAgICBkcm9wUGFyZW50VWwuaW5zZXJ0QmVmb3JlKGRyYWdMaSwgZHJvcExpLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJvcFVsID0gdGhpcy5leHBhbmRQYXJlbnQoZHJvcExpKTtcbiAgICAgICAgICAgICAgICBkcm9wVWwuaW5zZXJ0QmVmb3JlKGRyYWdMaSwgZHJvcFVsLmNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudChkcmFnUGFyZW50VWwsIGRyYWdQYXJlbnRMaSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFyaWFMZXZlbChkcmFnTGkpO1xuICAgICAgICAgICAgaWYgKGRyYWdPYmouZWxlbWVudC5pZCA9PT0gdGhpcy5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkcmFnT2JqLnVwZGF0ZUluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnN0YW5jZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kUGFyZW50ID0gZnVuY3Rpb24gKGRyb3BMaSkge1xuICAgICAgICAgICAgdmFyIGRyb3BJY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgZHJvcExpKTtcbiAgICAgICAgICAgIGlmIChkcm9wSWNvbiAmJiBkcm9wSWNvbi5jbGFzc0xpc3QuY29udGFpbnMoRVhQQU5EQUJMRSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFjdGlvbihkcm9wTGksIGRyb3BJY29uLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkcm9wVWwgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCBkcm9wTGkpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZHJvcFVsKSkge1xuICAgICAgICAgICAgICAgIGVqMl9saXN0c18xLkxpc3RCYXNlLmdlbmVyYXRlSWNvbihkcm9wTGksIENPTExBUFNJQkxFLCB0aGlzLmxpc3RCYXNlT3B0aW9uKTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIGRyb3BMaSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbaWNvbl0sIEVYUEFOREFCTEUpO1xuICAgICAgICAgICAgICAgIGRyb3BVbCA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmdlbmVyYXRlVUwoW10sIG51bGwsIHRoaXMubGlzdEJhc2VPcHRpb24pO1xuICAgICAgICAgICAgICAgIGRyb3BMaS5hcHBlbmRDaGlsZChkcm9wVWwpO1xuICAgICAgICAgICAgICAgIGRyb3BMaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2Ryb3BMaV0sIE5PREVDT0xMQVBTRUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRyb3BVbDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVwZGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZHJhZ1BhcmVudFVsLCBkcmFnUGFyZW50TGkpIHtcbiAgICAgICAgICAgIGlmIChkcmFnUGFyZW50TGkgJiYgZHJhZ1BhcmVudFVsLmNoaWxkRWxlbWVudENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWdJY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgZHJhZ1BhcmVudExpKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChkcmFnUGFyZW50VWwpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKGRyYWdJY29uKTtcbiAgICAgICAgICAgICAgICBkcmFnUGFyZW50TGkucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS51cGRhdGVBcmlhTGV2ZWwgPSBmdW5jdGlvbiAoZHJhZ0xpKSB7XG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSB0aGlzLnBhcmVudHMoZHJhZ0xpLCAnLicgKyBQQVJFTlRJVEVNKS5sZW5ndGg7XG4gICAgICAgICAgICBkcmFnTGkuc2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJywgJycgKyBsZXZlbCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoaWxkQXJpYUxldmVsKGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGRyYWdMaSksIGxldmVsICsgMSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS51cGRhdGVDaGlsZEFyaWFMZXZlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBsZXZlbCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNOb2RlcyA9IGVsZW1lbnQuY2hpbGROb2RlcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY05vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IGNOb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgbGlFbGUuc2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJywgJycgKyBsZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hpbGRBcmlhTGV2ZWwoZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgbGlFbGUpLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbmRlclZpcnR1YWxFbGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHByZTtcbiAgICAgICAgICAgIGlmIChlLmV2ZW50Lm9mZnNldFkgPiBlLnRhcmdldC5vZmZzZXRIZWlnaHQgLSAyKSB7XG4gICAgICAgICAgICAgICAgcHJlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLmV2ZW50Lm9mZnNldFkgPCAyKSB7XG4gICAgICAgICAgICAgICAgcHJlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2aXJFbGUgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBTSUJMSU5HIH0pO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5mdWxsUm93U2VsZWN0ID8gKHByZSA/IDEgOiAyKSA6IChwcmUgPyAwIDogMSk7XG4gICAgICAgICAgICBlLnRhcmdldC5pbnNlcnRCZWZvcmUodmlyRWxlLCBlLnRhcmdldC5jaGlsZHJlbltpbmRleF0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVtb3ZlVmlydHVhbEVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzaWJFbGUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBTSUJMSU5HKTtcbiAgICAgICAgICAgIGlmIChzaWJFbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChzaWJFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZGVzdHJveURyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnT2JqICYmIHRoaXMuZHJvcE9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldERyYWdFdmVudCA9IGZ1bmN0aW9uIChldmVudCwgb2JqLCBkcm9wVGFyZ2V0LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBkcm9wTGkgPSBkcm9wVGFyZ2V0ID8gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyb3BUYXJnZXQsICcuJyArIExJU1RJVEVNKSA6IG51bGw7XG4gICAgICAgICAgICB2YXIgZHJvcERhdGEgPSBkcm9wTGkgPyB0aGlzLmdldE5vZGVEYXRhKGRyb3BMaSkgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICBkcmFnZ2VkTm9kZTogb2JqLmRyYWdMaSxcbiAgICAgICAgICAgICAgICBkcmFnZ2VkTm9kZURhdGE6IG9iai5kcmFnRGF0YSxcbiAgICAgICAgICAgICAgICBkcm9wcGVkTm9kZTogZHJvcExpLFxuICAgICAgICAgICAgICAgIGRyb3BwZWROb2RlRGF0YTogZHJvcERhdGEsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hZGRGdWxsUm93ID0gZnVuY3Rpb24gKHRvQWRkKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5saUxpc3QubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRvQWRkKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZ1bGxSb3codGhpcy5saUxpc3RbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd0RpdiA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIEZVTExST1csIHRoaXMubGlMaXN0W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2gocm93RGl2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jcmVhdGVGdWxsUm93ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciByb3dEaXYgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBGVUxMUk9XIH0pO1xuICAgICAgICAgICAgaXRlbS5pbnNlcnRCZWZvcmUocm93RGl2LCBpdGVtLmNoaWxkTm9kZXNbMF0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkTXVsdGlTZWxlY3QgPSBmdW5jdGlvbiAodG9BZGQpIHtcbiAgICAgICAgICAgIGlmICh0b0FkZCkge1xuICAgICAgICAgICAgICAgIHZhciBsaUVsZXMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBMSVNUSVRFTSArICc6bm90KFthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXSknLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbGlFbGVzXzEgPSBsaUVsZXM7IF9pIDwgbGlFbGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBsaUVsZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgTElTVElURU0gKyAnW2FyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiXScsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBsaUVsZXNfMiA9IGxpRWxlczsgX2EgPCBsaUVsZXNfMi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IGxpRWxlc18yW19hXTtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNvbGxhcHNlQnlMZXZlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBsZXZlbCwgZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPiAwICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNOb2RlcyA9IHRoaXMuZ2V0VmlzaWJsZU5vZGVzKGV4Y2x1ZGVIaWRkZW5Ob2RlcywgZWxlbWVudC5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY05vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IGNOb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBDT0xMQVBTSUJMRSwgZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgVEVYVFdSQVAsIGxpRWxlKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChpY29uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZU5vZGUobGlFbGUsIGljb24sIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VCeUxldmVsKGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGxpRWxlKSwgbGV2ZWwgLSAxLCBleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNvbGxhcHNlQWxsTm9kZXMgPSBmdW5jdGlvbiAoZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICB2YXIgY0ljb25zID0gdGhpcy5nZXRWaXNpYmxlTm9kZXMoZXhjbHVkZUhpZGRlbk5vZGVzLCBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBDT0xMQVBTSUJMRSwgdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY0ljb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBjSWNvbnNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGljb24sICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlTm9kZShsaUVsZSwgaWNvbiwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5leHBhbmRCeUxldmVsID0gZnVuY3Rpb24gKGVsZW1lbnQsIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChsZXZlbCA+IDAgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZU5vZGVzID0gdGhpcy5nZXRWaXNpYmxlTm9kZXMoZXhjbHVkZUhpZGRlbk5vZGVzLCBlbGVtZW50LmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlTm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gZU5vZGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIEVYUEFOREFCTEUsIGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFRFWFRXUkFQLCBsaUVsZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoaWNvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWN0aW9uKGxpRWxlLCBpY29uLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEJ5TGV2ZWwoZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgbGlFbGUpLCBsZXZlbCAtIDEsIGV4Y2x1ZGVIaWRkZW5Ob2Rlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kQWxsTm9kZXMgPSBmdW5jdGlvbiAoZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICB2YXIgZUljb25zID0gdGhpcy5nZXRWaXNpYmxlTm9kZXMoZXhjbHVkZUhpZGRlbk5vZGVzLCBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBFWFBBTkRBQkxFLCB0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlSWNvbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVJY29uc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSBlajJfYmFzZV82LmNsb3Nlc3QoaWNvbiwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWN0aW9uKGxpRWxlLCBpY29uLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldFZpc2libGVOb2RlcyA9IGZ1bmN0aW9uIChleGNsdWRlSGlkZGVuTm9kZXMsIG5vZGVzKSB7XG4gICAgICAgICAgICB2YXIgdk5vZGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobm9kZXMpO1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVIaWRkZW5Ob2Rlcykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdk5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc1Zpc2libGUodk5vZGVzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdk5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2Tm9kZXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBkcmFnUGFyZW50VWwgPSBlajJfYmFzZV82LmNsb3Nlc3Qobm9kZSwgJy4nICsgUEFSRU5USVRFTSk7XG4gICAgICAgICAgICB2YXIgZHJhZ1BhcmVudExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyYWdQYXJlbnRVbCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2gobm9kZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQoZHJhZ1BhcmVudFVsLCBkcmFnUGFyZW50TGkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnN0YW5jZSgpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudXBkYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWROb2RlcygpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudXBkYXRlTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubGlMaXN0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgTElTVElURU0sIHRoaXMuZWxlbWVudCkpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudXBkYXRlU2VsZWN0ZWROb2RlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHNlbGVjdGVkTm9kZXM6IFtdIH0sIHRydWUpO1xuICAgICAgICAgICAgdmFyIHNOb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIEFDVElWRSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0R2l2ZW5Ob2RlcyhzTm9kZXMpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZG9HaXZlbkFjdGlvbiA9IGZ1bmN0aW9uIChub2Rlcywgc2VsZWN0b3IsIHRvRXhwYW5kKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSB0aGlzLmdldEVsZW1lbnQobm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBzZWxlY3RvciwgZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgVEVYVFdSQVAsIGxpRWxlKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGljb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvRXhwYW5kID8gdGhpcy5leHBhbmRBY3Rpb24obGlFbGUsIGljb24sIG51bGwpIDogdGhpcy5jb2xsYXBzZU5vZGUobGlFbGUsIGljb24sIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmFkZEdpdmVuTm9kZXMgPSBmdW5jdGlvbiAobm9kZXMsIGRyb3BMaSwgaW5kZXgsIGlzUmVtb3RlKSB7XG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSBkcm9wTGkgPyBwYXJzZUZsb2F0KGRyb3BMaS5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGV2ZWwnKSkgKyAxIDogMTtcbiAgICAgICAgICAgIGlmIChpc1JlbW90ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWFwcGVyKGxldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3RJdGVtRnJvbUpzb24obm9kZXMsIHRoaXMubGlzdEJhc2VPcHRpb24sIGxldmVsKTtcbiAgICAgICAgICAgIHZhciBkcm9wVWwgPSBkcm9wTGkgPyB0aGlzLmV4cGFuZFBhcmVudChkcm9wTGkpIDogZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciByZWZOb2RlID0gZHJvcFVsLmNoaWxkTm9kZXNbaW5kZXhdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRyb3BVbC5pbnNlcnRCZWZvcmUobGlbaV0sIHJlZk5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maW5hbGl6ZU5vZGUoZHJvcFVsKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVwZGF0ZU1hcHBlciA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICAgICAgdmFyIG1hcHBlciA9IChsZXZlbCA9PT0gMSkgPyB0aGlzLmZpZWxkcyA6IHRoaXMuZ2V0Q2hpbGRGaWVsZHModGhpcy5maWVsZHMsIGxldmVsIC0gMSwgMSk7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZ2V0QWN0dWFsUHJvcGVydGllcyhtYXBwZXIpO1xuICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMgPSBwcm9wO1xuICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMudXJsID0gcHJvcC5uYXZpZ2F0ZVVybDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRvRGlzYWJsZUFjdGlvbiA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaUVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpRWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbbGlFbGVdLCBESVNBQkxFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRvRW5hYmxlQWN0aW9uID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSB0aGlzLmdldEVsZW1lbnQobm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGlFbGUucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbbGlFbGVdLCBESVNBQkxFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLndpcmVJbnB1dEV2ZW50cyA9IGZ1bmN0aW9uIChpbnBFbGUpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZChpbnBFbGUsICdibHVyJywgdGhpcy5pbnB1dEZvY3VzT3V0LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLndpcmVFZGl0aW5nRXZlbnRzID0gZnVuY3Rpb24gKHRvQmluZCkge1xuICAgICAgICAgICAgaWYgKHRvQmluZCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm94eV8xID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzSW9zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFZGl0T2JqID0gbmV3IGVqMl9iYXNlXzcuVG91Y2godGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVUYXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMS5lZGl0aW5nSGFuZGxlcihlLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdkYmxjbGljaycsIHRoaXMuZWRpdGluZ0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MgJiYgdGhpcy50b3VjaEVkaXRPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaEVkaXRPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2RibGNsaWNrJywgdGhpcy5lZGl0aW5nSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUud2lyZUNsaWNrRXZlbnQgPSBmdW5jdGlvbiAodG9CaW5kKSB7XG4gICAgICAgICAgICBpZiAodG9CaW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3h5XzIgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaENsaWNrT2JqID0gbmV3IGVqMl9iYXNlXzcuVG91Y2godGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMi5jbGlja0hhbmRsZXIoZS5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvcyAmJiB0aGlzLnRvdWNoQ2xpY2tPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaENsaWNrT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS53aXJlRXhwYW5kT25FdmVudCA9IGZ1bmN0aW9uICh0b0JpbmQpIHtcbiAgICAgICAgICAgIGlmICh0b0JpbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJveHlfMyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBhbmRPblR5cGUgPT09ICdjbGljaycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFeHBhbmRPYmogPSBuZXcgZWoyX2Jhc2VfNy5Ub3VjaCh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzMuZXhwYW5kSGFuZGxlcihlLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaEV4cGFuZE9iaiA9IG5ldyBlajJfYmFzZV83LlRvdWNoKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZVRhcDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMy5leHBhbmRIYW5kbGVyKGUub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsIHRoaXMuZXhwYW5kT25UeXBlLCB0aGlzLmV4cGFuZEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MgJiYgdGhpcy50b3VjaEV4cGFuZE9iaikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRXhwYW5kT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsIHRoaXMuZXhwYW5kT25UeXBlLCB0aGlzLmV4cGFuZEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5tb3VzZURvd25TdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGUuY3RybEtleSAmJiB0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnY29udGV4dG1lbnUgJywgdGhpcy5wcmV2ZW50Q29udGV4dE1lbnUsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5wcmV2ZW50Q29udGV4dE1lbnUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy53aXJlQ2xpY2tFdmVudCh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV4cGFuZE9uRXZlbnQodHJ1ZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXMnLCB0aGlzLmZvY3VzSW4sIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2JsdXInLCB0aGlzLmZvY3VzT3V0LCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLm9uTW91c2VPdmVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW91dCcsIHRoaXMub25Nb3VzZUxlYXZlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRNb2R1bGUgPSBuZXcgZWoyX2Jhc2VfMy5LZXlib2FyZEV2ZW50cyh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5QWN0aW9uSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGtleUNvbmZpZ3M6IHRoaXMua2V5Q29uZmlncyxcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdrZXlkb3duJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLndpcmVDbGlja0V2ZW50KGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV4cGFuZE9uRXZlbnQoZmFsc2UpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2ZvY3VzJywgdGhpcy5mb2N1c0luKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdibHVyJywgdGhpcy5mb2N1c091dCk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnbW91c2VvdmVyJywgdGhpcy5vbk1vdXNlT3Zlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnbW91c2VvdXQnLCB0aGlzLm9uTW91c2VMZWF2ZSk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnBhcmVudHMgPSBmdW5jdGlvbiAoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkID0gW107XG4gICAgICAgICAgICB2YXIgZWwgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICB3aGlsZSAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZWwpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYubWF0Y2hlcyhlbCwgc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWQucHVzaChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVkO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuaXNEZXNjZW5kYW50ID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gY2hpbGQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHdoaWxlICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlKSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zaG93U3Bpbm5lciA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtlbGVtZW50XSwgTE9BRCk7XG4gICAgICAgICAgICBlajJfcG9wdXBzXzEuY3JlYXRlU3Bpbm5lcih7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBlbGVtZW50LFxuICAgICAgICAgICAgICAgIHdpZHRoOiBTUElOTkVSX1NJWkVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX3BvcHVwc18xLnNob3dTcGlubmVyKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuaGlkZVNwaW5uZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgZWoyX3BvcHVwc18xLmhpZGVTcGlubmVyKGVsZW1lbnQpO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2VsZW1lbnRdLCBMT0FEKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldENoZWNrZWROb2RlcyA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgbm9kZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG5vZGVzKSk7XG4gICAgICAgICAgICB0aGlzLnVuY2hlY2tBbGwoKTtcbiAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0FsbChub2Rlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93RHJhZ0FuZERyb3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREcmFnQW5kRHJvcCh0aGlzLmFsbG93RHJhZ0FuZERyb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93RWRpdGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFZGl0aW5nRXZlbnRzKHRoaXMuYWxsb3dFZGl0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd011bHRpU2VsZWN0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkTm9kZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzTm9kZSA9IHRoaXMuZ2V0RWxlbWVudCh0aGlzLnNlbGVjdGVkTm9kZXNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdEFsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShzTm9kZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRvdWNoUG9wdXAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TXVsdGlTZWxlY3QodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTXVsdGlTZWxlY3QodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGVja2VkTm9kZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTm9kZXMgPSBvbGRQcm9wLmNoZWNrZWROb2RlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrZWROb2RlcyhuZXdQcm9wLmNoZWNrZWROb2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3NzQ2xhc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDc3NDbGFzcyhvbGRQcm9wLmNzc0NsYXNzLCBuZXdQcm9wLmNzc0NsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbmFibGVSdGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdleHBhbmRPbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFeHBhbmRPbkV2ZW50KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RXhwYW5kT25UeXBlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFeHBhbmRPbkV2ZW50KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpZWxkcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RCYXNlT3B0aW9uLmZpZWxkcyA9IHRoaXMuZmllbGRzLnByb3BlcnRpZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RCYXNlT3B0aW9uLmZpZWxkcy51cmwgPSB0aGlzLmZpZWxkcy5uYXZpZ2F0ZVVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVSZW5kZXJOb2RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bGxSb3dTZWxlY3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGdWxsUm93KHRoaXMuZnVsbFJvd1NlbGVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEZ1bGxSb3codGhpcy5mdWxsUm93U2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdub2RlVGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlVGVtcGxhdGVGbiA9IHRoaXMudGVtcGxhdGVDb21wbGllcih0aGlzLm5vZGVUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlUmVuZGVyTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzZWxlY3RlZE5vZGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0QWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBzZWxlY3RlZE5vZGVzOiBuZXdQcm9wLnNlbGVjdGVkTm9kZXMgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvU2VsZWN0aW9uQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0NoZWNrQm94JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVSZW5kZXJOb2RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnRPcmRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlUmVuZGVyTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy53aXJlRWRpdGluZ0V2ZW50cyhmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnJpcHBsZUZuKCk7XG4gICAgICAgICAgICB0aGlzLnJpcHBsZUljb25GbigpO1xuICAgICAgICAgICAgdGhpcy5zZXRDc3NDbGFzcyh0aGlzLmNzc0NsYXNzLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuc2V0RHJhZ0FuZERyb3AoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRGdWxsUm93KGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VG91Y2hQb3B1cChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmFkZE5vZGVzID0gZnVuY3Rpb24gKG5vZGVzLCB0YXJnZXQsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZHJvcExpID0gdGhpcy5nZXRFbGVtZW50KHRhcmdldCk7XG4gICAgICAgICAgICBub2RlcyA9IHRoaXMuZ2V0U29ydGVkRGF0YShub2Rlcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZHMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEdpdmVuTm9kZXMobm9kZXMsIGRyb3BMaSwgaW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kYXRhVHlwZSA9PT0gMikge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkR2l2ZW5Ob2Rlcyhub2RlcywgZHJvcExpLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZHJvcExpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkR2l2ZW5Ob2Rlcyhub2RlcywgZHJvcExpLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGlkID0gbm9kZXNbaV1bdGhpcy5maWVsZHMucGFyZW50SURdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcExpID0gcGlkID8gdGhpcy5nZXRFbGVtZW50KHBpZC50b1N0cmluZygpKSA6IHBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkR2l2ZW5Ob2Rlcyhbbm9kZXNbaV1dLCBkcm9wTGksIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNoZWNrQWxsID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvQ2hlY2tCb3hBY3Rpb24obm9kZXMsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAobm9kZXMsIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvR2l2ZW5BY3Rpb24obm9kZXMsIENPTExBUFNJQkxFLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VCeUxldmVsKGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIHRoaXMuZWxlbWVudCksIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGVzKGV4Y2x1ZGVIaWRkZW5Ob2Rlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZGlzYWJsZU5vZGVzID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0Rpc2FibGVBY3Rpb24obm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZW5hYmxlTm9kZXMgPSBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChub2RlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvRW5hYmxlQWN0aW9uKG5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmVuc3VyZVZpc2libGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobGlFbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudHMgPSB0aGlzLnBhcmVudHMobGlFbGUsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKHBhcmVudHMpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGxpRWxlLnNjcm9sbEludG9WaWV3KHRydWUpOyB9LCA0NTApO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kQWxsID0gZnVuY3Rpb24gKG5vZGVzLCBsZXZlbCwgZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0dpdmVuQWN0aW9uKG5vZGVzLCBFWFBBTkRBQkxFLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRCeUxldmVsKGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIHRoaXMuZWxlbWVudCksIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlcyhleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudChub2RlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldE5vZGVEZXRhaWxzID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmdldEVsZW1lbnQobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXROb2RlRGF0YShlbGUpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUubW92ZU5vZGVzID0gZnVuY3Rpb24gKHNvdXJjZU5vZGVzLCB0YXJnZXQsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZHJvcExpID0gdGhpcy5nZXRFbGVtZW50KHRhcmdldCk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChkcm9wTGkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkcmFnTGkgPSB0aGlzLmdldEVsZW1lbnQoc291cmNlTm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGRyYWdMaSkgfHwgZHJvcExpLmlzU2FtZU5vZGUoZHJhZ0xpKSB8fCB0aGlzLmlzRGVzY2VuZGFudChkcmFnTGksIGRyb3BMaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFzQ2hpbGROb2RlKGRyYWdMaSwgZHJvcExpLCB0aGlzLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVOb2RlcyA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaUVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTm9kZShsaUVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZXBsYWNlVGV4dCA9IGZ1bmN0aW9uICh0YXJnZXQsIG5ld1RleHQpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldCkgfHwgZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChuZXdUZXh0KSB8fCAhdGhpcy5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGlFbGUgPSB0aGlzLmdldEVsZW1lbnQodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0eHRFbGUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBMSVNUVEVYVCwgbGlFbGUpO1xuICAgICAgICAgICAgdHh0RWxlLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlID0gbmV3VGV4dDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVuY2hlY2tBbGwgPSBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9DaGVja0JveEFjdGlvbihub2RlcywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVHJlZVZpZXc7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJhbGxvd0RyYWdBbmREcm9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImFsbG93RWRpdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJhbGxvd011bHRpU2VsZWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuQ29tcGxleCh7fSwgTm9kZUFuaW1hdGlvblNldHRpbmdzKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJhbmltYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImNoZWNrZWROb2Rlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCcnKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJlbmFibGVQZXJzaXN0ZW5jZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJlbmFibGVSdGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImV4cGFuZE9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuQ29tcGxleCh7fSwgRmllbGRzU2V0dGluZ3MpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImZpZWxkc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KHRydWUpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImZ1bGxSb3dTZWxlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwic2VsZWN0ZWROb2Rlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdOb25lJylcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwic29ydE9yZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcInNob3dDaGVja0JveFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiZGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJkcmF3Tm9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiZGVzdHJveWVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJrZXlQcmVzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUNoZWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVDaGVja2luZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUNsaWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVDb2xsYXBzZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVDb2xsYXBzaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJub2RlRHJhZ2dpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVEcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVEcmFnU3RvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZURyb3BwZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVFZGl0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVFZGl0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJub2RlRXhwYW5kZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVFeHBhbmRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVTZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZVNlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgIFRyZWVWaWV3ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgVHJlZVZpZXcpO1xuICAgIGV4cG9ydHMuVHJlZVZpZXcgPSBUcmVlVmlldztcbiAgICBleHBvcnRzLnRyZWVWaWV3SGVscGVyID0gZWoyX2Jhc2VfMS5DcmVhdGVCdWlsZGVyKFRyZWVWaWV3KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdHJlZXZpZXcvdHJlZXZpZXcuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xN19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIlxuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE4X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCJcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0="]}
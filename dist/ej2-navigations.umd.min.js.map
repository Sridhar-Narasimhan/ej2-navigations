/*!
*  filename: ej2-navigations.umd.min.js.map
*  version : 1.0.22
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-navigations.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_12__","__WEBPACK_EXTERNAL_MODULE_17__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","index_3","index_4","index_5","index_6","__export","hasOwnProperty","Object","defineProperty","value","apply","h_scroll_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","HScroll","_super","options","element","preRender","browser","Browser","info","name","browserCheck","isDevice","ieCheck","initialize","getUniqueID","uniqueId","style","display","enableRtl","classList","add","render","touchModule","Touch","scroll","touchHandler","bind","createNavIcon","EventHandler","scrollEle","scrollHandler","createElement","className","scrollDiv","setAttribute","ele","innerEle","slice","children","_i","innerEle_1","ele_1","appendChild","overflowX","scrollItems","getPersistData","keyEntity","addOnPersist","getModuleName","destroy","remove","nav","selectAll","_a","elem","removeAttribute","detach","concat","clsRight","navItem","CLS_NAVRIGHTARROW","clsLeft","navEle","navLeftItem","CLS_NAVLEFTARROW","insertBefore","firstChild","eventBinding","onKeyPress","e","_this","timeoutFun_1","keyTimeout","eleScrolling","keyTimer","window","setTimeout","onKeyUp","click","clearTimeout","forEach","el","tapHold","tabHoldHandler","tapHoldThreshold","addEventListener","repeatScroll","preventDefault","clickEventHandler","clearInterval","timeout","trgt","originalEvent","contains","firstElementChild","timeoutFun","setInterval","scrollDis","rootEle","querySelector","scrlLeft","scrollLeft","scrollStep","distance","distanceX","scrollDirection","arrowDisabling","addDisable","removeDisable","width","offsetWidth","navLeftEle","navRightEle","Math","ceil","scrollWidth","disEle","onPropertyChanged","newProp","oldProp","keys","Component","Property","NotifyPropertyChanges","toolbar_1","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","ej2_popups_2","ej2_buttons_1","CLS_ITEMS","CLS_ITEM","CLS_POPUP","Item","ChildProperty","Toolbar","keyConfigs","moveLeft","moveRight","moveUp","moveDown","popupOpen","popupClose","tab","home","end","unwireEvents","removeChild","trgtEle","ctrlTem","clearProperty","popObj","attrb","trigger","scrollModule","wireEvents","clickHandler","resize","keyModule","KeyboardEvents","keyAction","keyActionHandler","docKeyDown","keyCode","isVisible","hide","duration","isNullOrUndefined","destroyHScroll","document","docEvent","tbarEle","tbarAlgEle","lefts","centers","rights","popEle","closest","tbarAlign","destroyItems","querySelectorAll","destroyMode","popupRefresh","val","elementFocus","fChild","focus","activeEleSwitch","clstElement","tbrNavChk","keyHandling","clst","navChk","scrollChk","popAnimate","action","eleFocus","nodes","popupCheck","popFrstEle","lastElementChild","activeEle","activeEleRemove","top","offsetHeight","show","tbarScrollChk","pos","sib","skipEle","parentElement","clsList","popupNav","popupClickHandler","itemObj","items","indexOf","eventArgs","item","CLS_RTL","position","X","Y","offsetX","dataBind","renderControl","formatUnit","height","setStyleAttribute","ariaAttr","role","aria-disabled","aria-haspopup","aria-orientation","attributes","renderItems","renderOverflowMode","itemPositioning","initHScroll","innerItems","checkOverflow","overflow","itemWidthCal","innerItem","itemWidth","eleWidth","popNav","scrollNav","refreshOverflow","offsetWid","overflowMode","getElementsByClassName","removePositioning","createPopupEle","innerNav","createPopupIcon","checkPriority","createPopup","pushingPoppedEle","tbarObj","popupPri","eleHeight","nodeIndex","poppedEle","nodePri","index","tbResize","push","childNodes","tbarElement","eleItem","popupInit","popupEle","maxHeight","popup","Popup","relateTo","offsetY","open","close","appendTo","toolEle","popupElePos","offsetTop","calculatePosition","popIcon","scrollVal","scrollY","innerHeight","overflowHeight","inEle","pre","len","eleWid","sepCheck","itemCount","itemPopCount","checkClass","rVal","cls","mrgn","parseFloat","getComputedStyle","marginRight","marginLeft","tbarEleMrgn","offsetLeft","sepEle","minWidth","popedEle","CLS_POPUPDOWN","tbarPriRef","indx","sepPri","des","elWid","wid","ig","ignoreCount","priEleCnt","eleSep","ignoreCheck","eleSepWidth","prevSep","previousElementSibling","popupEleRefresh","ignoreEleFetch","ignoreEle","ignoreInx","count","eleSplice","this_1","elWidth","btnText","btn","align","sepBeforePri_1","refreshPositioning","margin","tbarWid","right","tbarItemAlign","itemEle","alignDiv","alignEle","leftAlign_1","ctrlTemplate","cloneNode","tagName","itemEleDom","innerPos","renderSubComponent","toLowerCase","setAttr","attr","keyVal","enableItems","isEnable","elements","enable","removeClass","addClass","addItems","itemsDiv","itemAgn","items_1","type","algIndex","splice","parentNode","removeItems","args","parseInt","toString","removeItemByIndex","eleIdx","indexAgn","templateRender","templateProp","isComponent","itemType","eleObj","templateFn","trim","compile","outerHTML","buttonRendering","dom","iconCss","iconPos","textStr","text","btnTxt","innerHTML","prefixIcon","suffixIcon","Button","iconPosition","htmlAttributes","tooltipText","cssClass","template","itemClick","showTextOn","sTxt","currentTarget","curEle","tEle","Collection","Event","toolbarBuilder","CreateBuilder","accordion_1","ej2_base_6","CLS_HEADER","CLS_CONTENT","AccordionActionSettings","AccordionAnimationSettings","Complex","effect","easing","AccordionItem","Accordion","enter","space","isDestroy","nested","isNested","expandedItems","aria-multiselectable","initExpand","expandMode","select","initItemExpand","rippleEffect","selector","eventName","focusIn","focusOut","content","innerEles","header","tabindex","aria-level","headerEle","toggleIconGenerate","aria-labelledby","aria-hidden","tglIcon","hdrColIcon","expandItem","renderInnerItem","childElementCount","acrdnItem","acrdnHdr","acrdnCtn","acrdnCtnItem","acrdActive","getIndexByItem","contentRendering","ariaAttrUpdate","cntclkCheck","acrdAniEle","acrdAniEle_1","sameContentCheck","getAttribute","sameHeader","acrdnCtn_1","acrdnRoot","expandState","collapse","expand","eleMoveFocus","clstItem","nextElementSibling","headerEleGenerate","aria-expanded","aria-selected","ctnEle","hdrEle","fetchElement","hdr","expanded","enablePersistence","hdrIcnEle","icon","hdrIcon","isHeader","temString","eleVal","itemcnt","ctn","trgtItemEle","animation","timingFunction","isExpanded","eff","cancel","expandedItemsPush","expandProgress","expandAnimation","ef","icn","animate","trgtHgt","begin","progress","minHeight","Animation","expandedItemsPop","collapseProgress","collapseAnimation","trgtItEl","trgtHeight","itemHeight","remain","itemAttribUpdate","itemLen","addItem","innerItemEle","expandedItemRefresh","removeItem","hideItem","isHidden","enableItem","eleHeader","isExpand","itemExpand","acrdn","accordionBuilder","context_menu_1","ej2_lists_1","FOCUSED","HEADER","SELECTED","WRAPPER","HIDE","MenuItem","ContextMenu","navIdx","isTapHold","ejInst","getValue","ul","wrapper","body","setValue","initWrapper","getWrapper","zIndex","getZIndex","ListBase","createJsonFromElement","createItems","append","targetElem","isIos","cmenuHandler","getScrollableParents","parent_1","moverHandler","mouseDownHandler","keyboardModule","keyBoardHandler","downarrow","uparrow","leftarrow","rightarrow","escape","closeMenu","elemStyle","parentCollection","regex","parentEle","parentStyle","test","overflowY","upDownKeyHandler","rightEnterKeyHandler","leftEscKeyHandler","cul","defaultIdx","fliIdx","fli","getLIByClass","getIdx","cli","isValidLI","getItem","openMenu","toRawObject","sli","canOpen","changedTouches","clientY","clientX","ulIndex","isMenuVisible","cnt","toggleAnimation","getItems","valueOf","filter","split","left","li","liItem","beforeOpenEventArgs","lastChild","data","ICONS","hdata","hli","createItem","getIndex","textContent","parentItem","event","setPosition","showIcon","moduleName","listOpt","itemClass","createListItemFromJson","toggleVisiblity","collide","isCollide","offset","fit","Number","replace","x","visibility","hasField","listBaseOptions","itemCreating","curData","itemCreated","separator","span","createList","menuItems","properties","getLI","showItemOnClick","field","setLISelected","pop","showSubMenu","cliIdx","culIdx","idx","classname","skipHdr","toggle","unWireEvents","parent_2","isMenuOpen","animationSettings","getBoundingClientRect","checkIndex","k","itemss","showItems","showHideItems","hideItems","ishide","iitems","insertAfter","insertItems","isAfter","menuitem","props","defaultView","getPropertyValue","max","removeProperty","contextMenuBuilder","tab_1","CLS_TB_ITEMS","CLS_TB_ITEM","CLS_TB_POPUP","TabActionSettings","TabAnimationSettings","Header","TabItem","Tab","prevIndex","animateOptions","animObj","title","delete","tbObj","isTemplate","cntEle","isPopup","initRender","css","setCssClass","aria-activedescendant","renderContainer","setOrientation","headerPlacement","renderHeader","tbItems","renderContent","bdrLine","CLS_INDICATOR","scrCnt","setContentHeight","selectedItem","setRTL","tabItems","btnCls","CLS_ICONS","attrs","hdrItems","aria-controls","txt","cont","wrap","tabIndex","parseObject","clicked","setCloseButton","showCloseButton","setProperties","hdrItem","contents","inHTML","tbCount","tItems","isReplace","disabled","tHtml","txtEmpty","tCont","attrObj","tItem","removeActiveClass","hdrActEle","no","extIndex","findEle","checkPopupOverflow","tbPop","tbrItems","popupHandler","ripEle","tbItem","actEleId","prevEle","trg","refreshActElePosition","prevCtnAnimation","prev","current","previous","next","triggerPrevAnimation","oldCnt","animateObj","triggerAnimation","newCnt","prevActiveEle","idNo","openEff","clsEff","setActiveBorder","keyPressed","trgParent","trgIndex","getEleIndex","getContent","tempEle","cntHTML","place","list","heightAdjustMode","getHeight","cs","hsCnt","bar","tbWidth","setActive","isNaN","trg_1","enableAnimation","eleTrg","curActItem","refreshItemVisibility","eventArg","previousItem","prevItem","previousIndex","selectedIndex","setItems","refreshActiveBorder","hoverHandler","spaceKeyDown","swipe","swipeHandler","keyHandler","tabKeyModule","openPopup","shiftTab","removeEventListener","removeTab","velocity","swipeDirection","which","actEle","ej2_instances","activeElement","nxtSib","nextSibling","scrBar","scrStart","scrEnd","eleStart","eleEnd","eleViewRange","L10n","locale","getConstant","enableTab","addTab","addedItems","removingArgs","removedItem","removedIndex","cntTrg","removedArgs","hideTab","disable","tempHdrEle","tabBuilder","treeview_1","ej2_data_1","ej2_base_7","ROOT","COLLAPSIBLE","EXPANDABLE","LISTITEM","LISTTEXT","PARENTITEM","HOVER","ACTIVE","PROCESS","ICON","TEXTWRAP","INPUT","SIBLING","DROPNEXT","POPUP","CHECK","CHECKBOXWRAP","FOCUS","treeAriaAttr","treeRole","itemRole","listRole","itemText","FieldsSettings","ActionSettings","NodeAnimationSettings","TreeView","checkActionNodes","dragStartAction","f2","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","ctrlA","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","mouseDownStatus","listBaseOption","expandCollapse","fields","expandIconClass","ariaAttributes","expandIconPosition","beforeNodeCreate","url","navigateUrl","aniObj","treeList","isLoaded","selectedNodes","checkedNodes","setDataBinding","setExpandOnType","setRipple","wireEditingEvents","allowEditing","setDragAndDrop","allowDragAndDrop","setEnableRtl","setFullRow","fullRowSelect","setTouchPopup","allowMultiSelection","setMultiSelect","nodeTemplateFn","templateComplier","nodeTemplate","rippleModel","ignore","rippleFn","iconModel","isCenterRipple","rippleIconFn","isEnabled","styles","popupClick","stopImmediatePropagation","dataSource","DataManager","executeQuery","getQuery","then","treeData","result","isNumberTypeId","setRootData","finalize","rootData","mapper","query","columns","clone","Query","prop","getActualProperties","col","from","tableName","addSorting","sortOrder","parentID","where","dataType","getDataType","groupedData","getGroupedData","rootItems","getChildNodes","isSorted","level","ulElement","getSortedData","finalizeNode","showCheckBox","checkboxEle","createCheckBox","addCheck","isChecked","createFullRow","addActionClass","selected","textEle","node","nodeData","ds","child","hasChildren","groupBy","cusQuery","group","getDataSource","grpItem","j","sNodes","selectNode","cNodes","eNodes","renderChildNodes","updateList","nodes_1","checkBox","ensureParentCheckState","checkBoxEle","changeState","parentUL","currentParent","ensureChildCheckState","childElement","checkBoxes","checkedState","currentLoadData","doCheckBoxAction","doCheck","liEle","getElement","validateCheckNode","state","isPrevent","isAdd","ariaState","currLi","getCheckEvent","frameSpan","removeCheck","isUndefined","checked","getNodeData","isInteracted","firstNode","doSelectionAction","sUids","sNode","selectGivenNodes","preventContextMenu","removeHover","setFocusElement","checkWrapper","checkElement","triggerClickEvent","expandAction","collapseNode","multiSelect","txtWrap","posLeft","posTop","toggleSelect","nodeCheckingEvent","isCheck","nodeCheckedEvent","expandNode","start","proxy","setHeight","animateHeight","expandArgs","colArgs","getExpandEvent","remaining","timeStamp","currentHeight","parentLi","expandChild","eicon","childItems","parents","mapper_1","getChildFields","ensureCheckNode","renderSubChild","nodeLevel","dataLevel","getChildMapper","obj","parentId","isRoot","getChildGroup","objlen","cIcons","curLi","ctrlKey","isActive","unselectNode","getSelectEvent","removeSelectAll","shiftKey","startNode","startIndex","liList","endIndex","temp","currNode","addSelect","removeSelect","focusedNode","getFocusedNode","selectedLI","selectedLI_1","expandOnType","expandOn","expandHandler","expandCollapseAction","nodeName","inpEle","blur","oldText","checkNode","openNode","navigateNode","navigateRootNode","createTextbox","checkWrap","toBeOpened","focusNextNode","setFocus","isTowards","isBackwards","rootNode","getRootNode","getEndNode","fNode","nextNode","getNextNode","getPrevNode","prevNode","endNode","preNode","onMouseOver","currentLi","setHover","onMouseLeave","hoveredNode","pNode","pid","reRenderNodes","oldClass","newClass","editingHandler","getEditEvent","nodeValue","inputEle","setSelectionRange","wireInputEvents","inputFocusOut","newText","txtEle","toBind","initializeDrag","destroyDrag","virtualEle","dragObj","Draggable","enableTailMode","cursorAt","dragTarget","helper","sender","dragRoot","dragWrap","dragLi","isSameNode","cloneEle","DRAGITEM","nLen","cNode","cursor","dragData","dragStart","getDragEvent","drag","dragAction","dragStop","removeVirtualEle","dropTarget","dropRoot","dropObj","Droppable","out","over","drop","dropAction","dropWrap","dropLi","isDescendant","virEle","renderVirtualEle","draggable","droppedElement","appendNode","dropAsSiblingNode","dropAsChildNode","dropUl","dragParentUl","dragParentLi","updateElement","updateInstance","dropParentUl","expandParent","dropIcon","generateIcon","generateUL","dragIcon","sibEle","dropData","draggedNode","draggedNodeData","droppedNode","droppedNodeData","addFullRow","toAdd","rowDiv","addMultiSelect","liEles","liEles_1","liEles_2","collapseByLevel","excludeHiddenNodes","getVisibleNodes","collapseAllNodes","expandByLevel","expandAllNodes","eIcons","vNodes","removeNode","updateSelectedNodes","doGivenAction","toExpand","addGivenNodes","isRemote","updateMapper","refNode","doDisableAction","doEnableAction","proxy_1","touchEditObj","doubleTap","wireClickEvent","proxy_2","touchClickObj","tap","wireExpandOnEvent","proxy_3","touchExpandObj","matched","matches","parent","setCheckedNodes","JSON","parse","stringify","uncheckAll","checkAll","addNodes","collapseAll","disableNodes","enableAll","liEle_1","ensureVisible","expandAll","scrollIntoView","getNode","getNodeDetails","moveNodes","sourceNodes","removeNodes","replaceText","treeViewHelper"],"mappings":"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","file":"ej2-navigations.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-lists\"), require(\"@syncfusion/ej2-data\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-lists\", \"@syncfusion/ej2-data\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-lists\"), require(\"@syncfusion/ej2-data\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-lists\"], root[\"@syncfusion/ej2-data\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_17__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(4), __webpack_require__(8), __webpack_require__(10), __webpack_require__(13), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2, index_3, index_4, index_5, index_6) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t    __export(index_3);\n\t    __export(index_4);\n\t    __export(index_5);\n\t    __export(index_6);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, h_scroll_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(h_scroll_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ROOT = 'e-hscroll';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_HSCROLLBAR = 'e-hscroll-bar';\n\t    var CLS_HSCROLLCON = 'e-hscroll-content';\n\t    var CLS_NAVARROW = 'e-nav-arrow';\n\t    var CLS_NAVRIGHTARROW = 'e-nav-right-arrow';\n\t    var CLS_NAVLEFTARROW = 'e-nav-left-arrow';\n\t    var CLS_HSCROLLNAV = 'e-scroll-nav';\n\t    var CLS_HSCROLLNAVRIGHT = 'e-scroll-right-nav';\n\t    var CLS_HSCROLLNAVLEFT = 'e-scroll-left-nav';\n\t    var CLS_DEVICE = 'e-scroll-device';\n\t    var HScroll = (function (_super) {\n\t        __extends(HScroll, _super);\n\t        function HScroll(options, element) {\n\t            return _super.call(this, options, element) || this;\n\t        }\n\t        HScroll.prototype.preRender = function () {\n\t            this.browser = ej2_base_2.Browser.info.name;\n\t            this.browserCheck = this.browser === 'mozilla';\n\t            this.isDevice = ej2_base_2.Browser.isDevice;\n\t            var element = this.element;\n\t            this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n\t            this.initialize();\n\t            if (element.id === '') {\n\t                element.id = ej2_base_1.getUniqueID('hscroll');\n\t                this.uniqueId = true;\n\t            }\n\t            element.style.display = 'block';\n\t            if (this.enableRtl) {\n\t                element.classList.add(CLS_RTL);\n\t            }\n\t        };\n\t        HScroll.prototype.render = function () {\n\t            this.touchModule = new ej2_base_1.Touch(this.element, { scroll: this.touchHandler.bind(this) });\n\t            if (!this.isDevice) {\n\t                this.createNavIcon(this.element);\n\t                ej2_base_1.EventHandler.add(this.scrollEle, 'scroll', this.scrollHandler, this);\n\t            }\n\t            else {\n\t                this.element.classList.add(CLS_DEVICE);\n\t            }\n\t        };\n\t        HScroll.prototype.initialize = function () {\n\t            var scrollEle = ej2_base_2.createElement('div', { className: CLS_HSCROLLCON });\n\t            var scrollDiv = ej2_base_2.createElement('div', { className: CLS_HSCROLLBAR });\n\t            scrollDiv.setAttribute('tabindex', '-1');\n\t            var ele = this.element;\n\t            var innerEle = [].slice.call(ele.children);\n\t            for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {\n\t                var ele_1 = innerEle_1[_i];\n\t                scrollEle.appendChild(ele_1);\n\t            }\n\t            scrollDiv.appendChild(scrollEle);\n\t            ele.appendChild(scrollDiv);\n\t            scrollDiv.style.overflowX = 'hidden';\n\t            this.scrollEle = scrollDiv;\n\t            this.scrollItems = scrollEle;\n\t        };\n\t        HScroll.prototype.getPersistData = function () {\n\t            var keyEntity = ['scrollStep'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        HScroll.prototype.getModuleName = function () {\n\t            return 'hScroll';\n\t        };\n\t        HScroll.prototype.destroy = function () {\n\t            var ele = this.element;\n\t            ele.style.display = '';\n\t            ele.classList.remove(CLS_ROOT);\n\t            var nav = ej2_base_1.selectAll('#' + ele.id + '_nav.e-' + ele.id + '_nav');\n\t            for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {\n\t                var elem = _a[_i];\n\t                ele.appendChild(elem);\n\t            }\n\t            if (this.uniqueId) {\n\t                this.element.removeAttribute('id');\n\t            }\n\t            ej2_base_2.detach(this.scrollEle);\n\t            if (nav.length > 0) {\n\t                ej2_base_2.detach(nav[0]);\n\t                ej2_base_2.detach(nav[1]);\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.scrollEle, 'scroll', this.scrollHandler);\n\t            this.touchModule.destroy();\n\t            this.touchModule = null;\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        HScroll.prototype.createNavIcon = function (element) {\n\t            var id = element.id.concat('_nav');\n\t            var clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n\t            var nav = ej2_base_2.createElement('div', { id: id, className: clsRight });\n\t            nav.setAttribute('aria-disabled', 'false');\n\t            var navItem = ej2_base_2.createElement('div', { className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n\t            var clsLeft = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVLEFT);\n\t            var navEle = ej2_base_2.createElement('div', { id: id, className: clsLeft + ' ' + CLS_DISABLE });\n\t            navEle.setAttribute('aria-disabled', 'true');\n\t            var navLeftItem = ej2_base_2.createElement('div', { className: CLS_NAVLEFTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n\t            navEle.appendChild(navLeftItem);\n\t            nav.appendChild(navItem);\n\t            nav.setAttribute('tabindex', '0');\n\t            element.appendChild(nav);\n\t            element.insertBefore(navEle, element.firstChild);\n\t            if (this.ieCheck) {\n\t                nav.classList.add('e-ie-align');\n\t                navEle.classList.add('e-ie-align');\n\t            }\n\t            this.eventBinding([nav, navEle]);\n\t        };\n\t        HScroll.prototype.onKeyPress = function (e) {\n\t            var _this = this;\n\t            if (e.key === 'Enter') {\n\t                var timeoutFun_1 = function () {\n\t                    _this.keyTimeout = true;\n\t                    _this.eleScrolling(10, e.target);\n\t                };\n\t                this.keyTimer = window.setTimeout(function () {\n\t                    timeoutFun_1();\n\t                }, 100);\n\t            }\n\t        };\n\t        HScroll.prototype.onKeyUp = function (e) {\n\t            if (e.key !== 'Enter') {\n\t                return;\n\t            }\n\t            if (this.keyTimeout) {\n\t                this.keyTimeout = false;\n\t            }\n\t            else {\n\t                e.target.click();\n\t            }\n\t            clearTimeout(this.keyTimer);\n\t        };\n\t        HScroll.prototype.eventBinding = function (ele) {\n\t            var _this = this;\n\t            ele.forEach(function (el) {\n\t                new ej2_base_1.Touch(el, { tapHold: _this.tabHoldHandler.bind(_this), tapHoldThreshold: 500 });\n\t                el.addEventListener('keydown', _this.onKeyPress.bind(_this));\n\t                el.addEventListener('keyup', _this.onKeyUp.bind(_this));\n\t                el.addEventListener('mouseup', _this.repeatScroll.bind(_this));\n\t                el.addEventListener('touchend', _this.repeatScroll.bind(_this));\n\t                el.addEventListener('contextmenu', function (e) {\n\t                    e.preventDefault();\n\t                });\n\t                ej2_base_1.EventHandler.add(el, 'click', _this.clickEventHandler, _this);\n\t            });\n\t        };\n\t        HScroll.prototype.repeatScroll = function () {\n\t            clearInterval(this.timeout);\n\t        };\n\t        HScroll.prototype.tabHoldHandler = function (e) {\n\t            var _this = this;\n\t            var trgt = e.originalEvent.target;\n\t            trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;\n\t            var scrollDis = 10;\n\t            var timeoutFun = function () {\n\t                _this.eleScrolling(scrollDis, trgt);\n\t            };\n\t            this.timeout = window.setInterval(function () {\n\t                timeoutFun();\n\t            }, 50);\n\t        };\n\t        HScroll.prototype.contains = function (ele, className) {\n\t            return ele.classList.contains(className);\n\t        };\n\t        HScroll.prototype.eleScrolling = function (scrollDis, trgt) {\n\t            var element = this.scrollEle;\n\t            var rootEle = this.element;\n\t            var classList = trgt.classList;\n\t            if (classList.contains(CLS_HSCROLLNAV)) {\n\t                classList = trgt.querySelector('.' + CLS_NAVARROW).classList;\n\t            }\n\t            if (this.contains(rootEle, CLS_RTL) && this.browserCheck) {\n\t                scrollDis = -scrollDis;\n\t            }\n\t            var scrlLeft = element.scrollLeft;\n\t            if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                if (classList.contains(CLS_NAVRIGHTARROW)) {\n\t                    element.scrollLeft = scrlLeft + scrollDis;\n\t                }\n\t                else {\n\t                    element.scrollLeft = scrlLeft - scrollDis;\n\t                }\n\t            }\n\t            else {\n\t                if (classList.contains(CLS_NAVLEFTARROW)) {\n\t                    element.scrollLeft = scrlLeft + scrollDis;\n\t                }\n\t                else {\n\t                    element.scrollLeft = scrlLeft - scrollDis;\n\t                }\n\t            }\n\t        };\n\t        HScroll.prototype.clickEventHandler = function (e) {\n\t            this.eleScrolling(this.scrollStep, e.target);\n\t        };\n\t        HScroll.prototype.touchHandler = function (e) {\n\t            var ele = this.scrollEle;\n\t            var distance;\n\t            distance = e.distanceX;\n\t            if ((this.ieCheck) && this.contains(this.element, CLS_RTL)) {\n\t                distance = -distance;\n\t            }\n\t            if (e.scrollDirection === 'Left') {\n\t                ele.scrollLeft = ele.scrollLeft + distance;\n\t            }\n\t            else if (e.scrollDirection === 'Right') {\n\t                ele.scrollLeft = ele.scrollLeft - distance;\n\t            }\n\t        };\n\t        HScroll.prototype.arrowDisabling = function (addDisable, removeDisable) {\n\t            addDisable.classList.add(CLS_DISABLE);\n\t            addDisable.setAttribute('aria-disabled', 'true');\n\t            addDisable.removeAttribute('tabindex');\n\t            clearInterval(this.timeout);\n\t            removeDisable.classList.remove(CLS_DISABLE);\n\t            removeDisable.setAttribute('aria-disabled', 'false');\n\t            removeDisable.setAttribute('tabindex', '0');\n\t            this.repeatScroll();\n\t        };\n\t        HScroll.prototype.scrollHandler = function (e) {\n\t            var target = e.target;\n\t            var width = target.offsetWidth;\n\t            var rootEle = this.element;\n\t            var navLeftEle = this.element.querySelector('.' + CLS_HSCROLLNAVLEFT);\n\t            var navRightEle = this.element.querySelector('.' + CLS_HSCROLLNAVRIGHT);\n\t            var scrollLeft = target.scrollLeft;\n\t            if (scrollLeft <= 0) {\n\t                scrollLeft = -scrollLeft;\n\t            }\n\t            if (scrollLeft === 0) {\n\t                if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                    this.arrowDisabling(navLeftEle, navRightEle);\n\t                }\n\t                else {\n\t                    this.arrowDisabling(navRightEle, navLeftEle);\n\t                }\n\t            }\n\t            else if (Math.ceil(width + scrollLeft + .1) >= target.scrollWidth) {\n\t                if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n\t                    this.arrowDisabling(navRightEle, navLeftEle);\n\t                }\n\t                else {\n\t                    this.arrowDisabling(navLeftEle, navRightEle);\n\t                }\n\t            }\n\t            else {\n\t                var disEle = this.element.querySelector('.' + CLS_DISABLE);\n\t                if (disEle) {\n\t                    disEle.classList.remove(CLS_DISABLE);\n\t                    disEle.setAttribute('aria-disabled', 'false');\n\t                    disEle.setAttribute('tabindex', '0');\n\t                }\n\t            }\n\t        };\n\t        HScroll.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'scrollStep':\n\t                        break;\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.element.classList.add(CLS_RTL) : this.element.classList.remove(CLS_RTL);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return HScroll;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_2.Property(40)\n\t    ], HScroll.prototype, \"scrollStep\", void 0);\n\t    HScroll = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], HScroll);\n\t    exports.HScroll = HScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, toolbar_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(toolbar_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(6), __webpack_require__(6), __webpack_require__(7), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, ej2_popups_2, ej2_buttons_1, h_scroll_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ITEMS = 'e-toolbar-items';\n\t    var CLS_ITEM = 'e-toolbar-item';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_SEPARATOR = 'e-separator';\n\t    var CLS_POPUPICON = 'e-popup-up-icon';\n\t    var CLS_POPUPDOWN = 'e-popup-down-icon';\n\t    var CLS_TEMPLATE = 'e-template';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_POPUPTEXT = 'e-toolbar-text';\n\t    var CLS_TBARTEXT = 'e-popup-text';\n\t    var CLS_TBAROVERFLOW = 'e-overflow-show';\n\t    var CLS_POPOVERFLOW = 'e-overflow-hide';\n\t    var CLS_TBARBTN = 'e-tbar-btn';\n\t    var CLS_TBARNAV = 'e-hor-nav';\n\t    var CLS_TBARSCRLNAV = 'e-scroll-nav';\n\t    var CLS_TBARRIGHT = 'e-toolbar-right';\n\t    var CLS_TBARLEFT = 'e-toolbar-left';\n\t    var CLS_TBARCENTER = 'e-toolbar-center';\n\t    var CLS_TBARPOS = 'e-tbar-pos';\n\t    var CLS_TBARSCROLL = 'e-hscroll-content';\n\t    var CLS_POPUPNAV = 'e-hor-nav';\n\t    var CLS_POPUPCLASS = 'e-toolbar-pop';\n\t    var CLS_POPUP = 'e-toolbar-popup';\n\t    var CLS_TBARBTNTEXT = 'e-tbar-btn-text';\n\t    var CLS_TBARNAVACT = 'e-nav-active';\n\t    var CLS_TBARIGNORE = 'e-ignore';\n\t    var Item = (function (_super) {\n\t        __extends(Item, _super);\n\t        function Item() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Item;\n\t    }(ej2_base_5.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Item.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"prefixIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"suffixIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('None')\n\t    ], Item.prototype, \"overflow\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Button')\n\t    ], Item.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Both')\n\t    ], Item.prototype, \"showTextOn\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Item.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Item.prototype, \"tooltipText\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('left')\n\t    ], Item.prototype, \"align\", void 0);\n\t    exports.Item = Item;\n\t    var Toolbar = (function (_super) {\n\t        __extends(Toolbar, _super);\n\t        function Toolbar(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.keyConfigs = {\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow',\n\t                popupOpen: 'enter',\n\t                popupClose: 'escape',\n\t                tab: 'tab',\n\t                home: 'home',\n\t                end: 'end',\n\t            };\n\t            return _this;\n\t        }\n\t        Toolbar.prototype.destroy = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            _super.prototype.destroy.call(this);\n\t            this.unwireEvents();\n\t            while (ele.firstChild) {\n\t                ele.removeChild(ele.firstChild);\n\t            }\n\t            if (this.trgtEle) {\n\t                ele.appendChild(this.ctrlTem);\n\t            }\n\t            this.clearProperty();\n\t            this.popObj = null;\n\t            this.remove(this.element, 'e-toolpop');\n\t            ele.removeAttribute('style');\n\t            ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n\t                _this.element.removeAttribute(attrb);\n\t            });\n\t        };\n\t        Toolbar.prototype.preRender = function () {\n\t            this.trigger('beforeCreate');\n\t            this.scrollModule = null;\n\t            this.popObj = null;\n\t            if (this.enableRtl) {\n\t                this.add(this.element, CLS_RTL);\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t            window.addEventListener('resize', this.resize.bind(this));\n\t            this.keyModule = new ej2_base_2.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs\n\t            });\n\t            ej2_base_1.EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n\t            this.element.setAttribute('tabIndex', '0');\n\t        };\n\t        Toolbar.prototype.docKeyDown = function (e) {\n\t            if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && ej2_base_2.isVisible(this.popObj.element)) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t            if ((e.keyCode === 40 || e.keyCode === 38) && !ej2_base_4.isNullOrUndefined(this.popObj) && ej2_base_2.isVisible(this.popObj.element)) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Toolbar.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t            this.destroyHScroll();\n\t            this.keyModule.destroy();\n\t            ej2_base_1.EventHandler.remove(document, 'scroll', this.docEvent);\n\t            ej2_base_1.EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n\t            ej2_base_1.EventHandler.remove(document, 'click', this.docEvent);\n\t        };\n\t        Toolbar.prototype.clearProperty = function () {\n\t            this.tbarEle = [];\n\t            this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n\t        };\n\t        Toolbar.prototype.docEvent = function (e) {\n\t            var popEle = ej2_base_2.closest(e.target, '.e-popup');\n\t            if (this.popObj && ej2_base_2.isVisible(this.popObj.element) && !popEle) {\n\t                this.popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t        };\n\t        Toolbar.prototype.destroyHScroll = function () {\n\t            if (this.scrollModule) {\n\t                if (this.tbarAlign) {\n\t                    this.add(this.scrollModule.element, CLS_TBARPOS);\n\t                }\n\t                this.scrollModule.destroy();\n\t                this.scrollModule = null;\n\t            }\n\t        };\n\t        Toolbar.prototype.destroyItems = function () {\n\t            [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) {\n\t                ej2_base_2.detach(el);\n\t            });\n\t            this.clearProperty();\n\t        };\n\t        Toolbar.prototype.destroyMode = function () {\n\t            if (this.scrollModule) {\n\t                this.remove(this.scrollModule.element, CLS_RTL);\n\t                this.destroyHScroll();\n\t            }\n\t            if (this.popObj) {\n\t                this.popupRefresh(this.popObj.element, true);\n\t            }\n\t        };\n\t        Toolbar.prototype.add = function (ele, val) {\n\t            ele.classList.add(val);\n\t        };\n\t        Toolbar.prototype.remove = function (ele, val) {\n\t            ele.classList.remove(val);\n\t        };\n\t        Toolbar.prototype.elementFocus = function (ele) {\n\t            var fChild = ele.firstElementChild;\n\t            if (fChild) {\n\t                fChild.focus();\n\t                this.activeEleSwitch(ele);\n\t            }\n\t            else {\n\t                ele.focus();\n\t            }\n\t        };\n\t        Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n\t            var clst;\n\t            if (tbrNavChk && this.popObj && ej2_base_2.isVisible(this.popObj.element)) {\n\t                clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n\t            }\n\t            else if (this.element === trgt || tbrNavChk) {\n\t                clst = this.element.querySelector('.' + CLS_ITEM);\n\t            }\n\t            else {\n\t                clst = ej2_base_2.closest(trgt, '.' + CLS_ITEM);\n\t            }\n\t            return clst;\n\t        };\n\t        Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n\t            var popObj = this.popObj;\n\t            var rootEle = this.element;\n\t            var popAnimate = { name: 'SlideUp', duration: 100 };\n\t            switch (e.action) {\n\t                case 'moveRight':\n\t                    if (rootEle === trgt) {\n\t                        this.elementFocus(clst);\n\t                    }\n\t                    else if (!navChk) {\n\t                        this.eleFocus(clst, 'next');\n\t                    }\n\t                    break;\n\t                case 'moveLeft':\n\t                    if (!navChk) {\n\t                        this.eleFocus(clst, 'previous');\n\t                    }\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    var ele = void 0;\n\t                    var nodes = void 0;\n\t                    if (clst) {\n\t                        var popupCheck = ej2_base_2.closest(clst, '.e-popup');\n\t                        if (popupCheck) {\n\t                            if (ej2_base_2.isVisible(this.popObj.element)) {\n\t                                nodes = popupCheck.children;\n\t                                if (e.action === 'home') {\n\t                                    ele = nodes[0];\n\t                                }\n\t                                else {\n\t                                    ele = nodes[nodes.length - 1];\n\t                                }\n\t                            }\n\t                        }\n\t                        else {\n\t                            nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM);\n\t                            if (e.action === 'home') {\n\t                                ele = nodes[0];\n\t                            }\n\t                            else {\n\t                                ele = nodes[nodes.length - 1];\n\t                            }\n\t                        }\n\t                        if (ele) {\n\t                            this.elementFocus(ele);\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'moveUp':\n\t                case 'moveDown':\n\t                    var value = e.action === 'moveUp' ? 'previous' : 'next';\n\t                    if (popObj && ej2_base_2.closest(trgt, '.e-popup')) {\n\t                        var popEle = popObj.element;\n\t                        var popFrstEle = popEle.firstElementChild;\n\t                        if ((value === 'previous' && popFrstEle === clst) || (value === 'next' && popEle.lastElementChild === clst)) {\n\t                            return;\n\t                        }\n\t                        else {\n\t                            this.eleFocus(clst, value);\n\t                        }\n\t                    }\n\t                    else if (e.action === 'moveDown') {\n\t                        this.elementFocus(clst);\n\t                    }\n\t                    break;\n\t                case 'tab':\n\t                    if (!scrollChk && !navChk) {\n\t                        var ele_1 = clst.firstElementChild;\n\t                        if (rootEle === trgt) {\n\t                            if (this.activeEle) {\n\t                                this.activeEle.focus();\n\t                            }\n\t                            else {\n\t                                this.activeEleRemove(ele_1);\n\t                                ele_1.focus();\n\t                            }\n\t                            this.element.removeAttribute('tabindex');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'popupClose':\n\t                    if (popObj) {\n\t                        popObj.hide(popAnimate);\n\t                    }\n\t                    break;\n\t                case 'popupOpen':\n\t                    if (!navChk) {\n\t                        return;\n\t                    }\n\t                    if (popObj && !ej2_base_2.isVisible(popObj.element)) {\n\t                        popObj.element.style.top = rootEle.offsetHeight + 'px';\n\t                        popObj.show({ name: 'SlideDown', duration: 100 });\n\t                    }\n\t                    else {\n\t                        popObj.hide(popAnimate);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        Toolbar.prototype.keyActionHandler = function (e) {\n\t            e.preventDefault();\n\t            var clst;\n\t            var trgt = e.target;\n\t            var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n\t            var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n\t            clst = this.clstElement(tbrNavChk, trgt);\n\t            if (clst || tbarScrollChk) {\n\t                this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n\t            }\n\t        };\n\t        Toolbar.prototype.eleFocus = function (closest, pos) {\n\t            var sib = Object(closest)[pos + 'ElementSibling'];\n\t            var contains = function (el) {\n\t                return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE);\n\t            };\n\t            if (sib) {\n\t                var skipEle = contains(sib);\n\t                if (skipEle) {\n\t                    if (Object(sib)[pos + 'Sibling']) {\n\t                        sib = Object(sib)[pos + 'Sibling'];\n\t                        skipEle = contains(sib);\n\t                        if (skipEle) {\n\t                            this.eleFocus(sib, pos);\n\t                            return;\n\t                        }\n\t                    }\n\t                }\n\t                this.elementFocus(sib);\n\t            }\n\t            else if (this.tbarAlign) {\n\t                var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n\t                if (!ej2_base_4.isNullOrUndefined(elem) && elem.children.length > 0) {\n\t                    if (pos === 'next') {\n\t                        var el = elem.querySelector('.' + CLS_ITEM);\n\t                        if (contains(el)) {\n\t                            this.eleFocus(el, pos);\n\t                        }\n\t                        else {\n\t                            el.firstElementChild.focus();\n\t                            this.activeEleSwitch(el);\n\t                        }\n\t                    }\n\t                    else {\n\t                        var el = elem.lastElementChild;\n\t                        if (contains(el)) {\n\t                            this.eleFocus(el, pos);\n\t                        }\n\t                        else {\n\t                            this.elementFocus(el);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.clickHandler = function (e) {\n\t            var trgt = e.target;\n\t            var clsList = trgt.classList;\n\t            var ele = this.element;\n\t            var popupNav = ej2_base_2.closest(trgt, ('.' + CLS_TBARNAV));\n\t            if (!popupNav) {\n\t                popupNav = trgt;\n\t            }\n\t            if (!ele.children[0].classList.contains('e-hscroll') && (clsList.contains(CLS_TBARNAV))) {\n\t                clsList = trgt.querySelector('.e-icons').classList;\n\t            }\n\t            if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n\t                this.popupClickHandler(ele, popupNav, CLS_RTL);\n\t            }\n\t            var itemObj;\n\t            var clst = ej2_base_2.closest(e.target, '.' + CLS_ITEM);\n\t            if ((ej2_base_4.isNullOrUndefined(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n\t                return;\n\t            }\n\t            if (clst) {\n\t                itemObj = this.items[this.tbarEle.indexOf(clst)];\n\t            }\n\t            var eventArgs = { originalEvent: e, item: itemObj };\n\t            this.trigger('clicked', eventArgs);\n\t        };\n\t        ;\n\t        Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n\t            var popObj = this.popObj;\n\t            if (ej2_base_2.isVisible(popObj.element)) {\n\t                popupNav.classList.remove(CLS_TBARNAVACT);\n\t                popObj.hide({ name: 'SlideUp', duration: 100 });\n\t            }\n\t            else {\n\t                if (ele.classList.contains(CLS_RTL)) {\n\t                    popObj.enableRtl = true;\n\t                    popObj.position = { X: 'left', Y: 'top' };\n\t                }\n\t                if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n\t                    popObj.enableRtl = false;\n\t                    popObj.position = { X: 'right', Y: 'top' };\n\t                }\n\t                popObj.dataBind();\n\t                popObj.element.style.top = this.element.offsetHeight + 'px';\n\t                popupNav.classList.add(CLS_TBARNAVACT);\n\t                popObj.show({ name: 'SlideDown', duration: 100 });\n\t            }\n\t        };\n\t        Toolbar.prototype.render = function () {\n\t            this.initialize();\n\t            this.renderControl();\n\t            this.wireEvents();\n\t        };\n\t        Toolbar.prototype.initialize = function () {\n\t            var width = ej2_base_4.formatUnit(this.width);\n\t            var height = ej2_base_4.formatUnit(this.height);\n\t            if (ej2_base_5.Browser.info.name !== 'msie' || this.height !== 'auto') {\n\t                ej2_base_3.setStyleAttribute(this.element, { 'height': height });\n\t            }\n\t            ej2_base_3.setStyleAttribute(this.element, { 'width': width });\n\t            var ariaAttr = {\n\t                'role': 'toolbar', 'aria-disabled': 'false', 'aria-haspopup': 'false', 'aria-orientation': 'horizontal',\n\t            };\n\t            ej2_base_2.attributes(this.element, ariaAttr);\n\t        };\n\t        Toolbar.prototype.renderControl = function () {\n\t            this.trgtEle = (this.element.children.length > 0) ? this.element.querySelector('div') : null;\n\t            this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n\t            this.renderItems();\n\t            this.renderOverflowMode();\n\t            if (this.tbarAlign) {\n\t                this.itemPositioning();\n\t            }\n\t        };\n\t        Toolbar.prototype.initHScroll = function (element, innerItems) {\n\t            if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n\t                if (this.tbarAlign) {\n\t                    this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n\t                }\n\t                this.scrollModule = new h_scroll_1.HScroll({ scrollStep: 50, enableRtl: this.enableRtl }, innerItems[0]);\n\t                this.remove(this.scrollModule.element, CLS_TBARPOS);\n\t                ej2_base_3.setStyleAttribute(this.element, { overflow: 'hidden' });\n\t            }\n\t        };\n\t        Toolbar.prototype.itemWidthCal = function (items) {\n\t            var width = 0;\n\t            [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEM), items).forEach(function (el) {\n\t                width += el.offsetWidth;\n\t            });\n\t            return width;\n\t        };\n\t        Toolbar.prototype.checkOverflow = function (element, innerItem) {\n\t            if (ej2_base_4.isNullOrUndefined(element) || ej2_base_4.isNullOrUndefined(innerItem)) {\n\t                return false;\n\t            }\n\t            var eleWidth = element.offsetWidth;\n\t            var itemWidth;\n\t            if (this.tbarAlign || this.scrollModule) {\n\t                itemWidth = this.itemWidthCal(this.scrollModule ? innerItem.querySelector('.e-hscroll-content') : innerItem);\n\t            }\n\t            else {\n\t                itemWidth = innerItem.offsetWidth;\n\t            }\n\t            var popNav = element.querySelector('.' + CLS_TBARNAV);\n\t            var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n\t            if (itemWidth > eleWidth - (popNav ? popNav.offsetWidth : (scrollNav ? scrollNav.offsetWidth * 2 : 0))) {\n\t                return true;\n\t            }\n\t            else {\n\t                return false;\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshOverflow = function () {\n\t            this.resize();\n\t        };\n\t        Toolbar.prototype.renderOverflowMode = function () {\n\t            var ele = this.element;\n\t            var innerItems = ele.querySelector('.' + CLS_ITEMS);\n\t            if (ele && ele.children.length > 0) {\n\t                this.offsetWid = ele.offsetWidth;\n\t                switch (this.overflowMode) {\n\t                    case 'Scrollable':\n\t                        this.destroyHScroll();\n\t                        this.initHScroll(ele, ele.getElementsByClassName(CLS_ITEMS));\n\t                        break;\n\t                    case 'Popup':\n\t                        this.add(this.element, 'e-toolpop');\n\t                        if (this.tbarAlign) {\n\t                            this.removePositioning();\n\t                        }\n\t                        if (this.checkOverflow(ele, innerItems)) {\n\t                            this.createPopupEle(ele, [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n\t                            this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n\t                        }\n\t                        if (this.tbarAlign) {\n\t                            this.add(innerItems, CLS_TBARPOS);\n\t                            this.itemPositioning();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n\t            var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            if (!innerNav) {\n\t                this.createPopupIcon(ele);\n\t            }\n\t            innerNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            var eleWidth = (ele.offsetWidth - (innerNav.offsetWidth));\n\t            this.element.classList.remove('e-rtl');\n\t            this.checkPriority(ele, innerEle, eleWidth, true);\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            this.createPopup();\n\t        };\n\t        Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight) {\n\t            var element = tbarObj.element;\n\t            var nodes = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, ele);\n\t            var nodeIndex = 0;\n\t            var poppedEle = [].slice.call(ej2_base_3.selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n\t            var nodePri = 0;\n\t            poppedEle.forEach(function (el, index) {\n\t                nodes = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, ele);\n\t                if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n\t                    if (tbarObj.tbResize && nodes.length > index) {\n\t                        ele.insertBefore(el, nodes[index]);\n\t                        ++nodePri;\n\t                    }\n\t                    else {\n\t                        ele.insertBefore(el, ele.children[nodes.length]);\n\t                        ++nodePri;\n\t                    }\n\t                }\n\t                else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n\t                    ele.insertBefore(el, ele.firstChild);\n\t                    ++nodePri;\n\t                }\n\t                else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n\t                    ele.insertBefore(el, ele.firstChild);\n\t                    ++nodePri;\n\t                }\n\t                else if (el.classList.contains(CLS_POPOVERFLOW)) {\n\t                    popupPri.push(el);\n\t                }\n\t                else if (tbarObj.tbResize) {\n\t                    ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n\t                    ++nodeIndex;\n\t                }\n\t                else {\n\t                    ele.appendChild(el);\n\t                }\n\t                ej2_base_3.setStyleAttribute(el, { display: '', height: eleHeight + 'px' });\n\t            });\n\t            popupPri.forEach(function (el) {\n\t                ele.appendChild(el);\n\t            });\n\t            var tbarEle = ej2_base_3.selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n\t            for (var i = tbarEle.length - 1; i >= 0; i--) {\n\t                var tbarElement = tbarEle[i];\n\t                if (tbarElement.classList.contains(CLS_SEPARATOR)) {\n\t                    ej2_base_3.setStyleAttribute(tbarElement, { display: 'none' });\n\t                }\n\t                else {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopup = function () {\n\t            var element = this.element;\n\t            var eleHeight;\n\t            var eleItem;\n\t            eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_POPUP + ' )');\n\t            eleHeight = (element.style.height === 'auto' || element.style.height === '') ? null : eleItem.offsetHeight;\n\t            var ele;\n\t            var popupPri = [];\n\t            if (element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS)) {\n\t                ele = element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS);\n\t            }\n\t            else {\n\t                ele = ej2_base_3.createElement('div', { id: element.id + '_popup', className: CLS_POPUPCLASS });\n\t            }\n\t            this.pushingPoppedEle(this, popupPri, ele, eleHeight);\n\t            this.popupInit(element, ele);\n\t        };\n\t        Toolbar.prototype.popupInit = function (element, ele) {\n\t            if (!this.popObj) {\n\t                element.appendChild(ele);\n\t                ej2_base_3.setStyleAttribute(this.element, { overflow: '' });\n\t                var popup = new ej2_popups_1.Popup(null, {\n\t                    relateTo: this.element,\n\t                    offsetY: (element.offsetHeight),\n\t                    enableRtl: this.enableRtl,\n\t                    open: this.popupOpen.bind(this),\n\t                    close: this.popupClose,\n\t                    position: this.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }\n\t                });\n\t                popup.appendTo(ele);\n\t                ej2_base_1.EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n\t                ej2_base_1.EventHandler.add(document, 'click ', this.docEvent.bind(this));\n\t                popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n\t                popup.hide();\n\t                this.popObj = popup;\n\t                this.element.setAttribute('aria-haspopup', 'true');\n\t            }\n\t            else {\n\t                var popupEle = this.popObj.element;\n\t                ej2_base_3.setStyleAttribute(popupEle, { maxHeight: '', display: 'block' });\n\t                ej2_base_3.setStyleAttribute(popupEle, { maxHeight: popupEle.offsetHeight + 'px', display: '' });\n\t            }\n\t        };\n\t        Toolbar.prototype.popupOpen = function (e) {\n\t            var popObj = this.popObj;\n\t            var popupEle = this.popObj.element;\n\t            var toolEle = this.popObj.element.parentElement;\n\t            var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n\t            ej2_base_3.setStyleAttribute(popObj.element, { height: 'auto', maxHeight: '' });\n\t            popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n\t            var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + ej2_popups_2.calculatePosition(toolEle).top;\n\t            var popIcon = popupNav.firstElementChild;\n\t            popupNav.classList.add(CLS_TBARNAVACT);\n\t            ej2_base_2.classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n\t            var scrollVal = ej2_base_4.isNullOrUndefined(window.scrollY) ? 0 : window.scrollY;\n\t            if ((window.innerHeight + scrollVal) < popupElePos) {\n\t                var overflowHeight = (popupEle.offsetHeight - ((popupElePos - window.innerHeight - scrollVal) + 5));\n\t                popObj.height = overflowHeight + 'px';\n\t                ej2_base_3.setStyleAttribute(popObj.element, { maxHeight: overflowHeight + 'px' });\n\t            }\n\t        };\n\t        Toolbar.prototype.popupClose = function (e) {\n\t            var element = this.element.parentElement;\n\t            var popupNav = element.querySelector('.' + CLS_TBARNAV);\n\t            var popIcon = popupNav.firstElementChild;\n\t            popupNav.classList.remove(CLS_TBARNAVACT);\n\t            ej2_base_2.classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n\t        };\n\t        Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n\t            var len = inEle.length;\n\t            var eleWid = eleWidth;\n\t            var sepCheck = 0;\n\t            var itemCount = 0;\n\t            var itemPopCount = 0;\n\t            var checkClass = function (ele, val) {\n\t                var rVal = false;\n\t                val.forEach(function (cls) {\n\t                    if (ele.classList.contains(cls)) {\n\t                        rVal = true;\n\t                    }\n\t                });\n\t                return rVal;\n\t            };\n\t            for (var i = len - 1; i >= 0; i--) {\n\t                var mrgn = parseFloat((window.getComputedStyle(inEle[i])).marginRight);\n\t                mrgn += parseFloat((window.getComputedStyle(inEle[i])).marginLeft);\n\t                if (inEle[i] === this.tbarEle[0]) {\n\t                    this.tbarEleMrgn = mrgn;\n\t                }\n\t                if ((inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn) > eleWidth) {\n\t                    if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n\t                        if (sepCheck > 0 && itemCount === itemPopCount) {\n\t                            var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n\t                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n\t                                ej2_base_3.setStyleAttribute(sepEle, { display: 'none' });\n\t                            }\n\t                        }\n\t                        sepCheck++;\n\t                        itemCount = 0;\n\t                        itemPopCount = 0;\n\t                    }\n\t                    else {\n\t                        itemCount++;\n\t                    }\n\t                    if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n\t                        eleWidth -= (inEle[i].offsetWidth + (mrgn));\n\t                    }\n\t                    else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n\t                        inEle[i].classList.add(CLS_POPUP);\n\t                        ej2_base_3.setStyleAttribute(inEle[i], { display: 'none', minWidth: inEle[i].offsetWidth + 'px' });\n\t                        itemPopCount++;\n\t                    }\n\t                    else {\n\t                        eleWidth -= (inEle[i].offsetWidth + (mrgn));\n\t                    }\n\t                }\n\t            }\n\t            if (pre) {\n\t                var popedEle = ej2_base_3.selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n\t                this.checkPriority(ele, popedEle, eleWid, false);\n\t            }\n\t        };\n\t        Toolbar.prototype.createPopupIcon = function (element) {\n\t            var id = element.id.concat('_nav');\n\t            var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n\t            var nav = ej2_base_3.createElement('div', { id: id, className: className });\n\t            if (ej2_base_5.Browser.info.name === 'msie' || ej2_base_5.Browser.info.name === 'edge') {\n\t                nav.classList.add('e-ie-align');\n\t            }\n\t            var navItem = ej2_base_3.createElement('div', { className: CLS_POPUPDOWN + ' e-icons' });\n\t            nav.appendChild(navItem);\n\t            nav.setAttribute('tabindex', '0');\n\t            element.appendChild(nav);\n\t        };\n\t        Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n\t            var ignoreCount = ig;\n\t            var popEle = this.popObj.element;\n\t            var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n\t            var priEleCnt = ej2_base_3.selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n\t            var checkClass = function (ele, val) {\n\t                return ele.classList.contains(val);\n\t            };\n\t            if (ej2_base_3.selectAll(query, inEle).length === 0) {\n\t                var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n\t                var ignoreCheck = (!ej2_base_4.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_TBARIGNORE));\n\t                if ((!ej2_base_4.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !ej2_base_2.isVisible(eleSep)) || ignoreCheck) {\n\t                    var sepDisplay = 'none';\n\t                    eleSep.style.display = 'inherit';\n\t                    var eleSepWidth = eleSep.offsetWidth + (parseFloat(window.getComputedStyle(eleSep).marginRight) * 2);\n\t                    var prevSep = eleSep.previousElementSibling;\n\t                    if ((elWid + eleSepWidth) < wid || des) {\n\t                        inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n\t                        if (!ej2_base_4.isNullOrUndefined(prevSep)) {\n\t                            prevSep.style.display = '';\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (prevSep.classList.contains(CLS_SEPARATOR)) {\n\t                            prevSep.style.display = sepDisplay;\n\t                        }\n\t                    }\n\t                    eleSep.style.display = '';\n\t                }\n\t                else {\n\t                    inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n\t                }\n\t            }\n\t            else {\n\t                inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - priEleCnt]);\n\t            }\n\t        };\n\t        Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n\t            var ele = this.element;\n\t            var popNav = ele.querySelector('.' + CLS_TBARNAV);\n\t            var innerEle = ele.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(popNav)) {\n\t                return;\n\t            }\n\t            innerEle.removeAttribute('style');\n\t            popupEle.style.display = 'block';\n\t            var width = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n\t            this.popupEleRefresh(width, popupEle, destroy);\n\t            popupEle.style.display = '';\n\t            if (popupEle.children.length === 0) {\n\t                ej2_base_2.detach(popNav);\n\t                this.popObj.destroy();\n\t                ej2_base_2.detach(this.popObj.element);\n\t                this.popObj = null;\n\t                ele.setAttribute('aria-haspopup', 'false');\n\t                ele.classList.remove('e-toolpop');\n\t            }\n\t        };\n\t        Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n\t            var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n\t            var ignoreInx = [];\n\t            var count = 0;\n\t            if (ignoreEle.length > 0) {\n\t                ignoreEle.forEach(function (ele) {\n\t                    ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n\t                });\n\t            }\n\t            else {\n\t                return 0;\n\t            }\n\t            ignoreInx.forEach(function (val) {\n\t                if (val <= index) {\n\t                    count++;\n\t                }\n\t            });\n\t            return count;\n\t        };\n\t        Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n\t            var eleSplice = this.tbarEle;\n\t            var priEleCnt;\n\t            var index;\n\t            var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n\t            var ignoreCount = 0;\n\t            var _loop_1 = function (el) {\n\t                el.style.position = 'absolute';\n\t                var elWidth = el.offsetWidth;\n\t                var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n\t                if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n\t                    var btn = el.children[0];\n\t                    if (!ej2_base_4.isNullOrUndefined(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n\t                        btnText.style.display = 'none';\n\t                    }\n\t                    else if (!ej2_base_4.isNullOrUndefined(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n\t                        btnText.style.display = 'block';\n\t                    }\n\t                    btn.style.minWidth = '0%';\n\t                    elWidth = el.offsetWidth;\n\t                    btn.style.minWidth = '';\n\t                    if (!ej2_base_4.isNullOrUndefined(btnText)) {\n\t                        btnText.style.display = '';\n\t                    }\n\t                }\n\t                if (el === this_1.tbarEle[0]) {\n\t                    elWidth += this_1.tbarEleMrgn;\n\t                }\n\t                el.style.position = '';\n\t                if (elWidth < width || destroy) {\n\t                    el.style.minWidth = '';\n\t                    if (!el.classList.contains(CLS_POPOVERFLOW)) {\n\t                        el.classList.remove(CLS_POPUP);\n\t                    }\n\t                    index = this_1.tbarEle.indexOf(el);\n\t                    if (this_1.tbarAlign) {\n\t                        var pos = this_1.items[index].align;\n\t                        index = this_1.tbarAlgEle[(pos + 's')].indexOf(el);\n\t                        eleSplice = this_1.tbarAlgEle[(pos + 's')];\n\t                        innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos);\n\t                    }\n\t                    var sepBeforePri_1 = 0;\n\t                    eleSplice.slice(0, index).forEach(function (el) {\n\t                        if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n\t                            if (el.classList.contains(CLS_SEPARATOR)) {\n\t                                el.style.display = '';\n\t                                width -= el.offsetWidth;\n\t                            }\n\t                            sepBeforePri_1++;\n\t                        }\n\t                    });\n\t                    ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n\t                    if (el.classList.contains(CLS_TBAROVERFLOW)) {\n\t                        this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    else if (index === 0) {\n\t                        innerEle.insertBefore(el, innerEle.firstChild);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    else {\n\t                        priEleCnt = ej2_base_3.selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n\t                        innerEle.insertBefore(el, innerEle.children[(index + ignoreCount) - priEleCnt]);\n\t                        width -= el.offsetWidth;\n\t                    }\n\t                    el.style.height = '';\n\t                }\n\t                else {\n\t                    return \"break\";\n\t                }\n\t            };\n\t            var this_1 = this;\n\t            for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n\t                var el = _a[_i];\n\t                var state_1 = _loop_1(el);\n\t                if (state_1 === \"break\")\n\t                    break;\n\t            }\n\t        };\n\t        Toolbar.prototype.removePositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n\t                return;\n\t            }\n\t            this.remove(item, CLS_TBARPOS);\n\t            var innerItem = [].slice.call(item.childNodes);\n\t            innerItem[1].removeAttribute('style');\n\t            innerItem[2].removeAttribute('style');\n\t        };\n\t        Toolbar.prototype.refreshPositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            this.add(item, CLS_TBARPOS);\n\t            this.itemPositioning();\n\t        };\n\t        Toolbar.prototype.itemPositioning = function () {\n\t            var item = this.element.querySelector('.' + CLS_ITEMS);\n\t            if (ej2_base_4.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n\t                return;\n\t            }\n\t            var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n\t            var innerItem;\n\t            if (this.scrollModule) {\n\t                innerItem = [].slice.call(item.querySelector('.' + CLS_TBARSCROLL).children);\n\t            }\n\t            else {\n\t                innerItem = [].slice.call(item.childNodes);\n\t            }\n\t            var margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n\t            var tbarWid = this.element.offsetWidth;\n\t            if (popupNav) {\n\t                tbarWid -= popupNav.offsetWidth;\n\t                innerItem[2].style.right = popupNav.offsetWidth + 'px';\n\t            }\n\t            if (tbarWid <= margin) {\n\t                return;\n\t            }\n\t            var value = (((tbarWid - margin)) - innerItem[1].offsetWidth) / 2;\n\t            innerItem[1].removeAttribute('style');\n\t            var mrgn = (innerItem[0].offsetWidth + value) + 'px';\n\t            this.enableRtl ? innerItem[1].style.marginRight = mrgn : innerItem[1].style.marginLeft = mrgn;\n\t        };\n\t        Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n\t            var _this = this;\n\t            var alignDiv = [];\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARLEFT }));\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARCENTER }));\n\t            alignDiv.push(ej2_base_3.createElement('div', { className: CLS_TBARRIGHT }));\n\t            if (pos === 0 && item.align !== 'left') {\n\t                alignDiv.forEach(function (ele) {\n\t                    itemEle.appendChild(ele);\n\t                });\n\t                this.tbarAlign = true;\n\t                this.add(itemEle, CLS_TBARPOS);\n\t            }\n\t            else if (item.align !== 'left') {\n\t                var alignEle = itemEle.childNodes;\n\t                var leftAlign_1 = alignDiv[0];\n\t                [].slice.call(alignEle).forEach(function (el) {\n\t                    _this.tbarAlgEle.lefts.push(el);\n\t                    leftAlign_1.appendChild(el);\n\t                });\n\t                itemEle.appendChild(leftAlign_1);\n\t                itemEle.appendChild(alignDiv[1]);\n\t                itemEle.appendChild(alignDiv[2]);\n\t                this.tbarAlign = true;\n\t                this.add(itemEle, CLS_TBARPOS);\n\t            }\n\t        };\n\t        Toolbar.prototype.ctrlTemplate = function () {\n\t            var _this = this;\n\t            this.ctrlTem = this.trgtEle.cloneNode(true);\n\t            this.add(this.trgtEle, CLS_ITEMS);\n\t            this.tbarEle = [];\n\t            var innerEle = [].slice.call(this.trgtEle.children);\n\t            innerEle.forEach(function (ele) {\n\t                if (ele.tagName === 'DIV') {\n\t                    _this.tbarEle.push(ele);\n\t                    ele.setAttribute('aria-disabled', 'false');\n\t                    _this.add(ele, CLS_ITEM);\n\t                }\n\t            });\n\t        };\n\t        Toolbar.prototype.renderItems = function () {\n\t            var ele = this.element;\n\t            var itemEleDom;\n\t            var innerItem;\n\t            var innerPos;\n\t            var items = this.items;\n\t            if (ele && ele.children.length > 0) {\n\t                itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n\t            }\n\t            if (this.trgtEle != null) {\n\t                this.ctrlTemplate();\n\t            }\n\t            else if (ele && items.length > 0) {\n\t                if (!itemEleDom) {\n\t                    itemEleDom = ej2_base_3.createElement('div', { className: CLS_ITEMS });\n\t                }\n\t                for (var i = 0; i < items.length; i++) {\n\t                    innerItem = this.renderSubComponent(items[i]);\n\t                    if (this.tbarEle.indexOf(innerItem) === -1) {\n\t                        this.tbarEle.push(innerItem);\n\t                    }\n\t                    if (!this.tbarAlign) {\n\t                        this.tbarItemAlign(items[i], itemEleDom, i);\n\t                    }\n\t                    innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n\t                    if (innerPos) {\n\t                        this.tbarAlgEle[(items[i].align + 's')].push(innerItem);\n\t                        innerPos.appendChild(innerItem);\n\t                    }\n\t                    else {\n\t                        itemEleDom.appendChild(innerItem);\n\t                    }\n\t                }\n\t                ele.appendChild(itemEleDom);\n\t            }\n\t        };\n\t        Toolbar.prototype.setAttr = function (attr, element) {\n\t            var key = Object.keys(attr);\n\t            var keyVal;\n\t            for (var i = 0; i < key.length; i++) {\n\t                keyVal = key[i];\n\t                keyVal === 'class' ? this.add(element, attr[keyVal]) : element.setAttribute(keyVal, attr[keyVal]);\n\t            }\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            var elements = items;\n\t            var len = elements.length;\n\t            if (ej2_base_4.isNullOrUndefined(isEnable)) {\n\t                isEnable = true;\n\t            }\n\t            var enable = function (isEnable, ele) {\n\t                if (isEnable) {\n\t                    ele.classList.remove(CLS_DISABLE);\n\t                    ele.setAttribute('aria-disabled', 'false');\n\t                }\n\t                else {\n\t                    ele.classList.add(CLS_DISABLE);\n\t                    ele.setAttribute('aria-disabled', 'true');\n\t                }\n\t            };\n\t            if (len && len > 1) {\n\t                for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n\t                    var ele = _a[_i];\n\t                    enable(isEnable, ele);\n\t                }\n\t                isEnable ? ej2_base_2.removeClass(elements, CLS_DISABLE) : ej2_base_2.addClass(elements, CLS_DISABLE);\n\t            }\n\t            else {\n\t                var ele = void 0;\n\t                ele = (len && len === 1) ? elements[0] : items;\n\t                enable(isEnable, ele);\n\t            }\n\t        };\n\t        Toolbar.prototype.addItems = function (items, index) {\n\t            var innerItems;\n\t            var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n\t            var innerEle;\n\t            var itemAgn = 'left';\n\t            if (ej2_base_4.isNullOrUndefined(index)) {\n\t                index = 0;\n\t            }\n\t            items.forEach(function (e) {\n\t                if (!ej2_base_4.isNullOrUndefined(e.align) && e.align !== 'left' && itemAgn === 'left') {\n\t                    itemAgn = e.align;\n\t                }\n\t            });\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                if (ej2_base_4.isNullOrUndefined(item.type)) {\n\t                    item.type = 'Button';\n\t                }\n\t                innerItems = ej2_base_3.selectAll('.' + CLS_ITEM, this.element);\n\t                item.align = itemAgn;\n\t                innerEle = this.renderSubComponent(item);\n\t                if (this.tbarEle.length >= index && innerItems.length > 0) {\n\t                    this.destroyMode();\n\t                    if (this.tbarAlign) {\n\t                        var algIndex = item.align[0] === 'l' ? 0 : item.align[0] === 'c' ? 1 : 2;\n\t                        var ele = void 0;\n\t                        ele = ej2_base_2.closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n\t                        ele.insertBefore(innerEle, ele.children[index]);\n\t                        this.tbarAlgEle[(item.align + 's')].splice(index, 0, innerEle);\n\t                        this.refreshPositioning();\n\t                    }\n\t                    else {\n\t                        innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n\t                    }\n\t                    this.items.splice(index, 0, item);\n\t                    this.tbarEle.splice(index, 0, innerEle);\n\t                    index++;\n\t                    this.offsetWid = itemsDiv.offsetWidth;\n\t                }\n\t            }\n\t            itemsDiv.style.width = '';\n\t            this.renderOverflowMode();\n\t        };\n\t        Toolbar.prototype.removeItems = function (args) {\n\t            var elements = args;\n\t            var index;\n\t            var innerItems = [].slice.call(ej2_base_3.selectAll('.' + CLS_ITEM, this.element));\n\t            if (typeof (elements) === 'number') {\n\t                index = parseInt(args.toString(), 10);\n\t                this.removeItemByIndex(index, innerItems);\n\t            }\n\t            else {\n\t                if (elements && elements.length > 1) {\n\t                    for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n\t                        var ele = _a[_i];\n\t                        index = this.tbarEle.indexOf(ele);\n\t                        this.removeItemByIndex(index, innerItems);\n\t                        innerItems = ej2_base_3.selectAll('.' + CLS_ITEM, this.element);\n\t                    }\n\t                }\n\t                else {\n\t                    var ele = (elements && elements.length && elements.length === 1) ? elements[0] : args;\n\t                    index = innerItems.indexOf(ele);\n\t                    this.removeItemByIndex(index, innerItems);\n\t                }\n\t            }\n\t            this.resize();\n\t        };\n\t        Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n\t            if (this.tbarEle[index] && innerItems[index]) {\n\t                var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n\t                if (this.tbarAlign) {\n\t                    var indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's')].indexOf(this.tbarEle[eleIdx]);\n\t                    this.tbarAlgEle[(this.items[eleIdx].align + 's')].splice(indexAgn, 1);\n\t                }\n\t                ej2_base_2.detach(innerItems[index]);\n\t                this.items.splice(eleIdx, 1);\n\t                this.tbarEle.splice(eleIdx, 1);\n\t            }\n\t        };\n\t        Toolbar.prototype.templateRender = function (templateProp, innerEle, item) {\n\t            var itemType = item.type;\n\t            var eleObj = templateProp;\n\t            var isComponent;\n\t            if (typeof (templateProp) === 'object') {\n\t                isComponent = typeof (eleObj.appendTo) === 'function';\n\t            }\n\t            if (typeof (templateProp) === 'string' || !isComponent) {\n\t                var templateFn = void 0;\n\t                var val = templateProp;\n\t                val = (typeof (templateProp) === 'string') ? templateProp.trim() : templateProp;\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(val).length) {\n\t                        var ele = document.querySelector(val);\n\t                        templateFn = ej2_base_4.compile(ele.outerHTML.trim());\n\t                        ej2_base_2.detach(ele);\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    templateFn = ej2_base_4.compile(val);\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(templateFn) && templateFn().length > 0) {\n\t                    [].slice.call(templateFn()).forEach(function (ele) {\n\t                        if (!ej2_base_4.isNullOrUndefined(ele.tagName)) {\n\t                            ele.style.display = '';\n\t                        }\n\t                        innerEle.appendChild(ele);\n\t                    });\n\t                }\n\t            }\n\t            else if (itemType === 'Input') {\n\t                var ele = ej2_base_3.createElement('input');\n\t                item.id ? (ele.id = item.id) : (ele.id = ej2_base_4.getUniqueID('tbr-ipt'));\n\t                innerEle.appendChild(ele);\n\t                eleObj.appendTo(ele);\n\t            }\n\t            this.add(innerEle, CLS_TEMPLATE);\n\t            this.tbarEle.push(innerEle);\n\t        };\n\t        Toolbar.prototype.buttonRendering = function (item, innerEle) {\n\t            var dom = ej2_base_3.createElement('button', { className: CLS_TBARBTN });\n\t            dom.setAttribute('type', 'button');\n\t            var textStr = item.text;\n\t            var iconCss;\n\t            var iconPos;\n\t            item.id ? (dom.id = item.id) : dom.id = ej2_base_4.getUniqueID('e-tbr-btn');\n\t            var btnTxt = ej2_base_3.createElement('div', { className: 'e-tbar-btn-text' });\n\t            if (textStr) {\n\t                btnTxt.innerHTML = textStr;\n\t                dom.appendChild(btnTxt);\n\t                dom.classList.add('e-tbtn-txt');\n\t            }\n\t            else {\n\t                this.add(innerEle, 'e-tbtn-align');\n\t            }\n\t            if (item.prefixIcon || item.suffixIcon) {\n\t                if ((item.prefixIcon && item.suffixIcon) || item.prefixIcon) {\n\t                    iconCss = item.prefixIcon + ' e-icons';\n\t                    iconPos = 'left';\n\t                }\n\t                else {\n\t                    iconCss = item.suffixIcon + ' e-icons';\n\t                    iconPos = 'right';\n\t                }\n\t            }\n\t            new ej2_buttons_1.Button({ iconCss: iconCss, iconPosition: iconPos }, dom);\n\t            if (item.width) {\n\t                ej2_base_3.setStyleAttribute(dom, { 'width': ej2_base_4.formatUnit(item.width) });\n\t            }\n\t            return dom;\n\t        };\n\t        Toolbar.prototype.renderSubComponent = function (item) {\n\t            var innerEle;\n\t            var dom;\n\t            innerEle = ej2_base_3.createElement('div', { className: CLS_ITEM });\n\t            innerEle.setAttribute('aria-disabled', 'false');\n\t            if (!this.tbarEle) {\n\t                this.tbarEle = [];\n\t            }\n\t            if (item.htmlAttributes) {\n\t                this.setAttr(item.htmlAttributes, innerEle);\n\t            }\n\t            if (item.tooltipText) {\n\t                innerEle.setAttribute('title', item.tooltipText);\n\t            }\n\t            if (item.cssClass) {\n\t                innerEle.className = innerEle.className + ' ' + item.cssClass;\n\t            }\n\t            if (item.template) {\n\t                this.templateRender(item.template, innerEle, item);\n\t            }\n\t            else {\n\t                switch (item.type) {\n\t                    case 'Button':\n\t                        dom = this.buttonRendering(item, innerEle);\n\t                        dom.setAttribute('tabindex', '-1');\n\t                        innerEle.appendChild(dom);\n\t                        innerEle.addEventListener('click', this.itemClick.bind(this));\n\t                        break;\n\t                    case 'Separator':\n\t                        this.add(innerEle, CLS_SEPARATOR);\n\t                        break;\n\t                }\n\t            }\n\t            if (item.showTextOn) {\n\t                var sTxt = item.showTextOn;\n\t                if (sTxt === 'Toolbar') {\n\t                    this.add(innerEle, CLS_POPUPTEXT);\n\t                    this.add(innerEle, 'e-tbtn-align');\n\t                }\n\t                else if (sTxt === 'Overflow') {\n\t                    this.add(innerEle, CLS_TBARTEXT);\n\t                }\n\t            }\n\t            if (item.overflow) {\n\t                var overflow = item.overflow;\n\t                if (overflow === 'Show') {\n\t                    this.add(innerEle, CLS_TBAROVERFLOW);\n\t                }\n\t                else if (overflow === 'Hide') {\n\t                    if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n\t                        this.add(innerEle, CLS_POPOVERFLOW);\n\t                    }\n\t                }\n\t            }\n\t            return innerEle;\n\t        };\n\t        Toolbar.prototype.itemClick = function (e) {\n\t            this.activeEleSwitch(e.currentTarget);\n\t        };\n\t        Toolbar.prototype.activeEleSwitch = function (ele) {\n\t            this.activeEleRemove(ele.firstElementChild);\n\t            this.activeEle.focus();\n\t        };\n\t        Toolbar.prototype.activeEleRemove = function (curEle) {\n\t            if (!ej2_base_4.isNullOrUndefined(this.activeEle)) {\n\t                this.activeEle.setAttribute('tabindex', '-1');\n\t            }\n\t            this.activeEle = curEle;\n\t            if (ej2_base_4.isNullOrUndefined(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n\t                curEle.removeAttribute('tabindex');\n\t            }\n\t            else {\n\t                this.activeEle.setAttribute('tabindex', '0');\n\t            }\n\t        };\n\t        Toolbar.prototype.getPersistData = function () {\n\t            return this.addOnPersist([]);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        Toolbar.prototype.resize = function () {\n\t            var ele = this.element;\n\t            this.tbResize = true;\n\t            if (this.tbarAlign) {\n\t                this.itemPositioning();\n\t            }\n\t            if (this.popObj) {\n\t                this.popObj.hide();\n\t            }\n\t            var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n\t            if (!checkOverflow) {\n\t                this.destroyHScroll();\n\t            }\n\t            if (checkOverflow && this.scrollModule && (this.offsetWid === ele.offsetWidth)) {\n\t                return;\n\t            }\n\t            if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n\t                this.renderOverflowMode();\n\t            }\n\t            if (this.popObj) {\n\t                if (this.tbarAlign) {\n\t                    this.removePositioning();\n\t                }\n\t                this.popupRefresh(this.popObj.element, false);\n\t                if (this.tbarAlign) {\n\t                    this.refreshPositioning();\n\t                }\n\t            }\n\t            this.offsetWid = ele.offsetWidth;\n\t            this.tbResize = false;\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var tEle = this.element;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'items':\n\t                        this.destroyMode();\n\t                        this.destroyItems();\n\t                        this.renderItems();\n\t                        this.renderOverflowMode();\n\t                        break;\n\t                    case 'width':\n\t                        var wid = tEle.offsetWidth;\n\t                        ej2_base_3.setStyleAttribute(tEle, { 'width': ej2_base_4.formatUnit(newProp.width) });\n\t                        this.renderOverflowMode();\n\t                        if (this.popObj && wid < tEle.offsetWidth) {\n\t                            this.popupRefresh(this.popObj.element, false);\n\t                        }\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_3.setStyleAttribute(this.element, { 'height': ej2_base_4.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'overflowMode':\n\t                        this.destroyMode();\n\t                        this.renderOverflowMode();\n\t                        if (this.enableRtl) {\n\t                            this.add(tEle, CLS_RTL);\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.add(tEle, CLS_RTL) : this.remove(tEle, CLS_RTL);\n\t                        if (!ej2_base_4.isNullOrUndefined(this.scrollModule)) {\n\t                            newProp.enableRtl ? this.add(this.scrollModule.element, CLS_RTL) : this.remove(this.scrollModule.element, CLS_RTL);\n\t                        }\n\t                        if (!ej2_base_4.isNullOrUndefined(this.popObj)) {\n\t                            newProp.enableRtl ? this.add(this.popObj.element, CLS_RTL) : this.remove(this.popObj.element, CLS_RTL);\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Toolbar;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Item)\n\t    ], Toolbar.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Toolbar.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Toolbar.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Scrollable')\n\t    ], Toolbar.prototype, \"overflowMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Toolbar.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"clicked\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Toolbar.prototype, \"beforeCreate\", void 0);\n\t    Toolbar = __decorate([\n\t        ej2_base_5.NotifyPropertyChanges\n\t    ], Toolbar);\n\t    exports.Toolbar = Toolbar;\n\t    exports.toolbarBuilder = ej2_base_5.CreateBuilder(Toolbar);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, accordion_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(accordion_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_base_6) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_ACRDN_ROOT = 'e-acrdn-root';\n\t    var CLS_ROOT = 'e-accordion';\n\t    var CLS_ITEM = 'e-acrdn-item';\n\t    var CLS_ITEMFOCUS = 'e-item-focus';\n\t    var CLS_ITEMHIDE = 'e-hide';\n\t    var CLS_HEADER = 'e-acrdn-header';\n\t    var CLS_HEADERICN = 'e-acrdn-header-icon';\n\t    var CLS_HEADERCTN = 'e-acrdn-header-content';\n\t    var CLS_CONTENT = 'e-acrdn-panel';\n\t    var CLS_CTENT = 'e-content';\n\t    var CLS_TOOGLEICN = 'e-toggle-icon';\n\t    var CLS_COLLAPSEICN = 'e-tgl-collapse-icon e-icons';\n\t    var CLS_EXPANDICN = 'e-expand-icon';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_CTNHIDE = 'e-content-hide';\n\t    var CLS_SLCT = 'e-select';\n\t    var CLS_SLCTED = 'e-selected';\n\t    var CLS_ACTIVE = 'e-active';\n\t    var CLS_ANIMATE = 'e-animate';\n\t    var CLS_DISABLE = 'e-overlay';\n\t    var CLS_TOGANIMATE = 'e-toggle-animation';\n\t    var CLS_NEST = 'e-nested';\n\t    var CLS_EXPANDSTATE = 'e-expand-state';\n\t    var AccordionActionSettings = (function (_super) {\n\t        __extends(AccordionActionSettings, _super);\n\t        function AccordionActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionActionSettings;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('SlideDown')\n\t    ], AccordionActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(400)\n\t    ], AccordionActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('linear')\n\t    ], AccordionActionSettings.prototype, \"easing\", void 0);\n\t    exports.AccordionActionSettings = AccordionActionSettings;\n\t    var AccordionAnimationSettings = (function (_super) {\n\t        __extends(AccordionAnimationSettings, _super);\n\t        function AccordionAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionAnimationSettings;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_5.Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, AccordionActionSettings)\n\t    ], AccordionAnimationSettings.prototype, \"collapse\", void 0);\n\t    __decorate([\n\t        ej2_base_5.Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, AccordionActionSettings)\n\t    ], AccordionAnimationSettings.prototype, \"expand\", void 0);\n\t    exports.AccordionAnimationSettings = AccordionAnimationSettings;\n\t    var AccordionItem = (function (_super) {\n\t        __extends(AccordionItem, _super);\n\t        function AccordionItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccordionItem;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"header\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(undefined)\n\t    ], AccordionItem.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], AccordionItem.prototype, \"expanded\", void 0);\n\t    exports.AccordionItem = AccordionItem;\n\t    var Accordion = (function (_super) {\n\t        __extends(Accordion, _super);\n\t        function Accordion(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.keyConfigs = {\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow',\n\t                enter: 'enter',\n\t                space: 'space',\n\t                home: 'home',\n\t                end: 'end',\n\t            };\n\t            return _this;\n\t        }\n\t        Accordion.prototype.destroy = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            _super.prototype.destroy.call(this);\n\t            this.unwireEvents();\n\t            this.isDestroy = true;\n\t            while (ele.firstChild) {\n\t                ele.removeChild(ele.firstChild);\n\t            }\n\t            if (this.trgtEle) {\n\t                while (this.ctrlTem.firstChild) {\n\t                    ele.appendChild(this.ctrlTem.firstChild);\n\t                }\n\t            }\n\t            ele.removeAttribute('style');\n\t            ['aria-disabled', 'aria-multiselectable', 'role'].forEach(function (attrb) {\n\t                _this.element.removeAttribute(attrb);\n\t            });\n\t        };\n\t        Accordion.prototype.preRender = function () {\n\t            var nested = ej2_base_3.closest(this.element, '.' + CLS_CONTENT);\n\t            this.isNested = false;\n\t            if (!this.isDestroy) {\n\t                this.isDestroy = false;\n\t            }\n\t            if (!ej2_base_6.isNullOrUndefined(nested)) {\n\t                nested.classList.add(CLS_NEST);\n\t                this.isNested = true;\n\t            }\n\t            else {\n\t                this.element.classList.add(CLS_ACRDN_ROOT);\n\t            }\n\t            if (this.enableRtl) {\n\t                this.add(this.element, CLS_RTL);\n\t            }\n\t            this.expandedItems = [];\n\t        };\n\t        Accordion.prototype.add = function (ele, val) {\n\t            ele.classList.add(val);\n\t        };\n\t        Accordion.prototype.remove = function (ele, val) {\n\t            ele.classList.remove(val);\n\t        };\n\t        Accordion.prototype.render = function () {\n\t            this.initialize();\n\t            this.renderControl();\n\t            this.wireEvents();\n\t        };\n\t        Accordion.prototype.initialize = function () {\n\t            var width = ej2_base_6.formatUnit(this.width);\n\t            var height = ej2_base_6.formatUnit(this.height);\n\t            ej2_base_5.setStyleAttribute(this.element, { 'width': width, 'height': height });\n\t            var ariaAttr = {\n\t                'aria-disabled': 'false', 'role': 'presentation', 'aria-multiselectable': 'true'\n\t            };\n\t            if (this.expandedItems.length > 0) {\n\t                this.initExpand = this.expandedItems;\n\t            }\n\t            ej2_base_3.attributes(this.element, ariaAttr);\n\t            if (this.expandMode === 'Single') {\n\t                this.element.setAttribute('aria-multiselectable', 'false');\n\t            }\n\t        };\n\t        Accordion.prototype.renderControl = function () {\n\t            this.trgtEle = (this.element.children.length > 0) ? ej2_base_3.select('div', this.element) : null;\n\t            this.renderItems();\n\t            this.initItemExpand();\n\t        };\n\t        Accordion.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t            if (!ej2_base_6.isNullOrUndefined(this.keyModule)) {\n\t                this.keyModule.destroy();\n\t            }\n\t        };\n\t        Accordion.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t            if (!this.isNested && !this.isDestroy) {\n\t                ej2_base_1.rippleEffect(this.element, { selector: '.' + CLS_HEADER });\n\t            }\n\t            if (!this.isNested) {\n\t                this.keyModule = new ej2_base_1.KeyboardEvents(this.element, {\n\t                    keyAction: this.keyActionHandler.bind(this),\n\t                    keyConfigs: this.keyConfigs,\n\t                    eventName: 'keydown'\n\t                });\n\t            }\n\t        };\n\t        Accordion.prototype.focusIn = function (e) {\n\t            e.target.parentElement.classList.add(CLS_ITEMFOCUS);\n\t        };\n\t        Accordion.prototype.focusOut = function (e) {\n\t            e.target.parentElement.classList.remove(CLS_ITEMFOCUS);\n\t        };\n\t        Accordion.prototype.ctrlTemplate = function () {\n\t            var _this = this;\n\t            this.ctrlTem = this.element.cloneNode(true);\n\t            var innerEles = this.element.children;\n\t            var content;\n\t            ej2_base_3.addClass(innerEles, [CLS_ITEM]);\n\t            [].slice.call(innerEles).forEach(function (el) {\n\t                el.id = ej2_base_2.getUniqueID('acrdn_item');\n\t                if (el.children.length > 0) {\n\t                    _this.add(el.children[0], CLS_HEADER);\n\t                    var header = el.children[0];\n\t                    ej2_base_3.attributes(header, { 'tabindex': '0', 'role': 'heading', 'aria-level': innerEles.length.toString() });\n\t                    header.id = ej2_base_2.getUniqueID('acrdn_header');\n\t                    ej2_base_1.EventHandler.add(header, 'focus', _this.focusIn, _this);\n\t                    ej2_base_1.EventHandler.add(header, 'blur', _this.focusOut, _this);\n\t                    var headerEle = header.firstElementChild;\n\t                    if (headerEle) {\n\t                        headerEle.classList.add(CLS_HEADERCTN);\n\t                    }\n\t                    content = el.children[1];\n\t                    if (content) {\n\t                        content.id = ej2_base_2.getUniqueID('acrdn_panel');\n\t                        header.setAttribute('aria-controls', content.id);\n\t                        content.style.display = '';\n\t                        el.classList.add(CLS_SLCT);\n\t                        el.children[0].appendChild(_this.toggleIconGenerate());\n\t                        ej2_base_3.classList(content, [CLS_CONTENT, CLS_CTNHIDE], []);\n\t                        ej2_base_3.attributes(content, { 'aria-labelledby': header.id, 'aria-hidden': 'true' });\n\t                        content = content.firstElementChild;\n\t                        if (content) {\n\t                            content.classList.add(CLS_CTENT);\n\t                            content.style.display = '';\n\t                        }\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        Accordion.prototype.toggleIconGenerate = function () {\n\t            var tglIcon = ej2_base_5.createElement('div', { className: CLS_TOOGLEICN });\n\t            var hdrColIcon = ej2_base_5.createElement('span', { className: CLS_COLLAPSEICN });\n\t            tglIcon.appendChild(hdrColIcon);\n\t            return tglIcon;\n\t        };\n\t        Accordion.prototype.initItemExpand = function () {\n\t            var len = this.initExpand.length;\n\t            if (len === 0) {\n\t                return;\n\t            }\n\t            if (this.expandMode === 'Single') {\n\t                this.expandItem(true, this.initExpand[len - 1]);\n\t            }\n\t            else {\n\t                for (var i = 0; i < len; i++) {\n\t                    this.expandItem(true, this.initExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.renderItems = function () {\n\t            var _this = this;\n\t            var ele = this.element;\n\t            var innerItem;\n\t            if (ej2_base_6.isNullOrUndefined(this.initExpand)) {\n\t                this.initExpand = [];\n\t            }\n\t            var items = this.items;\n\t            if (!ej2_base_6.isNullOrUndefined(this.trgtEle)) {\n\t                this.ctrlTemplate();\n\t            }\n\t            else if (ele && items.length > 0) {\n\t                items.forEach(function (item, index) {\n\t                    innerItem = _this.renderInnerItem(item, index);\n\t                    ele.appendChild(innerItem);\n\t                    if (innerItem.childElementCount > 0) {\n\t                        ej2_base_1.EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'focus', _this.focusIn, _this);\n\t                        ej2_base_1.EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'blur', _this.focusOut, _this);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Accordion.prototype.clickHandler = function (e) {\n\t            var _this = this;\n\t            var trgt = e.target;\n\t            var eventArgs = {};\n\t            var index;\n\t            var tglIcon;\n\t            var acrdEle = ej2_base_3.closest(trgt, '.' + CLS_ROOT);\n\t            if (acrdEle !== this.element) {\n\t                return;\n\t            }\n\t            trgt.classList.add('e-target');\n\t            var acrdnItem = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            var acrdnHdr = ej2_base_3.closest(trgt, '.' + CLS_HEADER);\n\t            var acrdnCtn = ej2_base_3.closest(trgt, '.' + CLS_CONTENT);\n\t            if (acrdnItem && (ej2_base_6.isNullOrUndefined(acrdnHdr) || ej2_base_6.isNullOrUndefined(acrdnCtn))) {\n\t                acrdnHdr = acrdnItem.children[0];\n\t                acrdnCtn = acrdnItem.children[1];\n\t            }\n\t            if (acrdnHdr) {\n\t                tglIcon = ej2_base_3.select('.' + CLS_TOOGLEICN, acrdnHdr);\n\t            }\n\t            var acrdnCtnItem;\n\t            if (acrdnCtn) {\n\t                acrdnCtnItem = ej2_base_3.closest(acrdnCtn, '.' + CLS_ITEM);\n\t            }\n\t            var acrdActive = [];\n\t            index = this.getIndexByItem(acrdnItem);\n\t            if (acrdnCtnItem) {\n\t                eventArgs.item = this.items[this.getIndexByItem(acrdnCtnItem)];\n\t            }\n\t            eventArgs.originalEvent = e;\n\t            var ctnCheck = !ej2_base_6.isNullOrUndefined(tglIcon) && ej2_base_6.isNullOrUndefined(this.trgtEle) && acrdnItem.childElementCount <= 1;\n\t            if (ctnCheck && (ej2_base_6.isNullOrUndefined(acrdnCtn) || !ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_HEADER + ' .' + CLS_TOOGLEICN, acrdnCtnItem)))) {\n\t                acrdnItem.appendChild(this.contentRendering(index));\n\t                this.ariaAttrUpdate(acrdnItem);\n\t            }\n\t            this.trigger('clicked', eventArgs);\n\t            var cntclkCheck = (acrdnCtn && !ej2_base_6.isNullOrUndefined(ej2_base_3.select('.e-target', acrdnCtn)));\n\t            cntclkCheck = cntclkCheck && (ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_ROOT, acrdnCtn)) || !(ej2_base_3.closest(trgt, '.' + CLS_ROOT) === this.element));\n\t            trgt.classList.remove('e-target');\n\t            if (trgt.classList.contains(CLS_CONTENT) || trgt.classList.contains(CLS_CTENT) || cntclkCheck) {\n\t                return;\n\t            }\n\t            [].slice.call(this.element.children).forEach(function (el) {\n\t                if (el.classList.contains(CLS_ACTIVE)) {\n\t                    acrdActive.push(el);\n\t                }\n\t            });\n\t            var acrdAniEle = [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM + ' [' + CLS_ANIMATE + ']'));\n\t            if (acrdAniEle.length > 0) {\n\t                for (var _i = 0, acrdAniEle_1 = acrdAniEle; _i < acrdAniEle_1.length; _i++) {\n\t                    var el = acrdAniEle_1[_i];\n\t                    acrdActive.push(el.parentElement);\n\t                }\n\t            }\n\t            var sameContentCheck = acrdActive.indexOf(acrdnCtnItem) !== -1 && acrdnCtn.getAttribute('e-animate') === 'true';\n\t            var sameHeader = false;\n\t            if (!ej2_base_6.isNullOrUndefined(acrdnItem) && !ej2_base_6.isNullOrUndefined(acrdnHdr)) {\n\t                var acrdnCtn_1 = ej2_base_3.select('.' + CLS_CONTENT, acrdnItem);\n\t                var acrdnRoot = ej2_base_3.closest(acrdnItem, '.' + CLS_ACRDN_ROOT);\n\t                var expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n\t                if (ej2_base_6.isNullOrUndefined(acrdnCtn_1)) {\n\t                    return;\n\t                }\n\t                sameHeader = (expandState === acrdnItem);\n\t                if (ej2_base_3.isVisible(acrdnCtn_1) && (!sameContentCheck || acrdnCtnItem.classList.contains(CLS_SLCTED))) {\n\t                    this.collapse(acrdnCtn_1);\n\t                }\n\t                else {\n\t                    if ((acrdActive.length > 0) && this.expandMode === 'Single' && !sameContentCheck) {\n\t                        acrdActive.forEach(function (el) {\n\t                            _this.collapse(ej2_base_3.select('.' + CLS_CONTENT, el));\n\t                            el.classList.remove(CLS_EXPANDSTATE);\n\t                        });\n\t                    }\n\t                    this.expand(acrdnCtn_1);\n\t                }\n\t                if (!ej2_base_6.isNullOrUndefined(expandState) && !sameHeader) {\n\t                    expandState.classList.remove(CLS_EXPANDSTATE);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.eleMoveFocus = function (action, root, trgt) {\n\t            var clst;\n\t            var clstItem = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (trgt === root) {\n\t                clst = ((action === 'moveUp' ? trgt.lastElementChild : trgt).querySelector('.' + CLS_HEADER));\n\t            }\n\t            else if (trgt.classList.contains(CLS_HEADER)) {\n\t                clstItem = (action === 'moveUp' ? clstItem.previousElementSibling : clstItem.nextElementSibling);\n\t                if (clstItem) {\n\t                    clst = ej2_base_3.select('.' + CLS_HEADER, clstItem);\n\t                }\n\t            }\n\t            if (clst) {\n\t                clst.focus();\n\t            }\n\t        };\n\t        Accordion.prototype.keyActionHandler = function (e) {\n\t            e.preventDefault();\n\t            var clst;\n\t            var root = this.element;\n\t            var trgt = e.target;\n\t            var content;\n\t            switch (e.action) {\n\t                case 'moveUp':\n\t                    this.eleMoveFocus(e.action, root, trgt);\n\t                    break;\n\t                case 'moveDown':\n\t                    this.eleMoveFocus(e.action, root, trgt);\n\t                    break;\n\t                case 'space':\n\t                case 'enter':\n\t                    content = trgt.nextElementSibling;\n\t                    if (!ej2_base_6.isNullOrUndefined(content) && content.classList.contains(CLS_CONTENT)) {\n\t                        if (content.getAttribute('e-animate') !== 'true') {\n\t                            trgt.click();\n\t                        }\n\t                    }\n\t                    else {\n\t                        trgt.click();\n\t                    }\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    clst = e.action === 'home' ? root.firstElementChild.children[0] : root.lastElementChild.children[0];\n\t                    clst.focus();\n\t                    break;\n\t            }\n\t        };\n\t        Accordion.prototype.headerEleGenerate = function () {\n\t            var header = ej2_base_5.createElement('div', { className: CLS_HEADER, id: ej2_base_2.getUniqueID('acrdn_header') });\n\t            var ariaAttr = {\n\t                'tabindex': '0', 'role': 'heading', 'aria-expanded': 'false', 'aria-selected': 'false',\n\t                'aria-disabled': 'false', 'aria-level': this.items.length.toString()\n\t            };\n\t            ej2_base_3.attributes(header, ariaAttr);\n\t            return header;\n\t        };\n\t        Accordion.prototype.renderInnerItem = function (item, index) {\n\t            var innerEle;\n\t            innerEle = ej2_base_5.createElement('div', { className: CLS_ITEM });\n\t            innerEle.id = ej2_base_2.getUniqueID('acrdn_item');\n\t            if (item.header) {\n\t                var ctnEle = this.headerEleGenerate();\n\t                var hdrEle = ej2_base_5.createElement('div', { className: CLS_HEADERCTN });\n\t                ctnEle.appendChild(hdrEle);\n\t                ctnEle.appendChild(this.fetchElement(hdrEle, item.header, index, true));\n\t                innerEle.appendChild(ctnEle);\n\t            }\n\t            var hdr = ej2_base_3.select('.' + CLS_HEADER, innerEle);\n\t            if (item.expanded && !ej2_base_6.isNullOrUndefined(index) && (!this.enablePersistence)) {\n\t                if (this.initExpand.indexOf(index) === -1) {\n\t                    this.initExpand.push(index);\n\t                }\n\t            }\n\t            if (item.cssClass) {\n\t                innerEle.classList.add(item.cssClass);\n\t            }\n\t            if (item.iconCss) {\n\t                var hdrIcnEle = ej2_base_5.createElement('div', { className: CLS_HEADERICN });\n\t                var icon = ej2_base_5.createElement('span', { className: item.iconCss + ' e-icons' });\n\t                hdrIcnEle.appendChild(icon);\n\t                if (ej2_base_6.isNullOrUndefined(hdr)) {\n\t                    hdr = this.headerEleGenerate();\n\t                    hdr.appendChild(hdrIcnEle);\n\t                    innerEle.appendChild(hdr);\n\t                }\n\t                else {\n\t                    hdr.insertBefore(hdrIcnEle, hdr.childNodes[0]);\n\t                }\n\t            }\n\t            if (item.content) {\n\t                var hdrIcon = this.toggleIconGenerate();\n\t                if (ej2_base_6.isNullOrUndefined(hdr)) {\n\t                    hdr = this.headerEleGenerate();\n\t                    innerEle.appendChild(hdr);\n\t                }\n\t                hdr.appendChild(hdrIcon);\n\t                this.add(innerEle, CLS_SLCT);\n\t            }\n\t            return innerEle;\n\t        };\n\t        Accordion.prototype.fetchElement = function (ele, value, index, isHeader) {\n\t            var templateFn;\n\t            var temString;\n\t            try {\n\t                if (document.querySelectorAll(value).length) {\n\t                    var eleVal = document.querySelector(value);\n\t                    temString = eleVal.outerHTML.trim();\n\t                    templateFn = ej2_base_2.compile(temString);\n\t                    ej2_base_3.detach(eleVal);\n\t                }\n\t            }\n\t            catch (e) {\n\t                templateFn = ej2_base_2.compile(value);\n\t            }\n\t            if (!ej2_base_6.isNullOrUndefined(templateFn) && templateFn().length > 0 && !(ej2_base_6.isNullOrUndefined(templateFn()[0].tagName) && templateFn().length === 1)) {\n\t                [].slice.call(templateFn()).forEach(function (el) {\n\t                    if (!ej2_base_6.isNullOrUndefined(el.tagName)) {\n\t                        el.style.display = '';\n\t                    }\n\t                    ele.appendChild(el);\n\t                });\n\t                if (!ej2_base_6.isNullOrUndefined(temString)) {\n\t                    if (isHeader) {\n\t                        this.items[index].header = temString;\n\t                    }\n\t                    else {\n\t                        this.items[index].content = temString;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                ele.innerHTML = value;\n\t            }\n\t            return ele;\n\t        };\n\t        Accordion.prototype.ariaAttrUpdate = function (itemEle) {\n\t            var header = ej2_base_3.select('.' + CLS_HEADER, itemEle);\n\t            var content = ej2_base_3.select('.' + CLS_CONTENT, itemEle);\n\t            header.setAttribute('aria-controls', content.id);\n\t            content.setAttribute('aria-labelledby', header.id);\n\t        };\n\t        Accordion.prototype.contentRendering = function (index) {\n\t            var content = this.items[index].content;\n\t            var itemcnt = ej2_base_5.createElement('div', { className: CLS_CONTENT + ' ' + CLS_CTNHIDE, id: ej2_base_2.getUniqueID('acrdn_panel') });\n\t            ej2_base_3.attributes(itemcnt, { 'aria-hidden': 'true' });\n\t            var ctn = ej2_base_5.createElement('div', { className: CLS_CTENT });\n\t            itemcnt.appendChild(this.fetchElement(ctn, content, index, false));\n\t            return itemcnt;\n\t        };\n\t        Accordion.prototype.expand = function (trgt) {\n\t            var eventArgs;\n\t            var trgtItemEle = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (ej2_base_6.isNullOrUndefined(trgt) || (ej2_base_3.isVisible(trgt) && trgt.getAttribute('e-animate') !== 'true') || trgtItemEle.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            var acrdnRoot = ej2_base_3.closest(trgtItemEle, '.' + CLS_ACRDN_ROOT);\n\t            var expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n\t            var animation = {\n\t                name: this.animation.expand.effect,\n\t                duration: this.animation.expand.duration,\n\t                timingFunction: this.animation.expand.easing\n\t            };\n\t            var icon = ej2_base_3.select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n\t            eventArgs = { element: trgtItemEle,\n\t                item: this.items[this.getIndexByItem(trgtItemEle)],\n\t                isExpanded: true };\n\t            var eff = animation.name;\n\t            this.trigger('expanding', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            icon.classList.add(CLS_TOGANIMATE);\n\t            this.expandedItemsPush(trgtItemEle);\n\t            if (!ej2_base_6.isNullOrUndefined(expandState)) {\n\t                expandState.classList.remove(CLS_EXPANDSTATE);\n\t            }\n\t            trgtItemEle.classList.add(CLS_EXPANDSTATE);\n\t            if ((animation.name === 'None')) {\n\t                this.expandProgress('begin', icon, trgt, trgtItemEle, eventArgs);\n\t                this.expandProgress('end', icon, trgt, trgtItemEle, eventArgs);\n\t                return;\n\t            }\n\t            this.expandAnimation(eff, icon, trgt, trgtItemEle, animation, eventArgs);\n\t        };\n\t        Accordion.prototype.expandAnimation = function (ef, icn, trgt, trgtItemEle, animate, args) {\n\t            var _this = this;\n\t            var height;\n\t            var trgtHgt;\n\t            if (ef === 'SlideDown') {\n\t                animate.begin = function () {\n\t                    _this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n\t                    trgt.style.position = 'absolute';\n\t                    height = trgtItemEle.offsetHeight;\n\t                    trgtHgt = trgt.offsetHeight;\n\t                    trgt.style.maxHeight = (trgt.offsetHeight) + 'px';\n\t                    trgtItemEle.style.maxHeight = '';\n\t                };\n\t                animate.progress = function () {\n\t                    trgtItemEle.style.minHeight = (height + trgt.offsetHeight) + 'px';\n\t                };\n\t                animate.end = function () {\n\t                    ej2_base_5.setStyleAttribute(trgt, { 'position': '', 'maxHeight': '' });\n\t                    trgtItemEle.style.minHeight = '';\n\t                    _this.expandProgress('end', icn, trgt, trgtItemEle, args);\n\t                };\n\t            }\n\t            else {\n\t                animate.begin = function () {\n\t                    _this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n\t                };\n\t                animate.end = function () {\n\t                    _this.expandProgress('end', icn, trgt, trgtItemEle, args);\n\t                };\n\t            }\n\t            new ej2_base_4.Animation(animate).animate(trgt);\n\t        };\n\t        Accordion.prototype.expandProgress = function (progress, icon, trgt, trgtItemEle, eventArgs) {\n\t            this.remove(trgt, CLS_CTNHIDE);\n\t            this.add(trgtItemEle, CLS_SLCTED);\n\t            this.add(icon, CLS_EXPANDICN);\n\t            if (progress === 'end') {\n\t                this.add(trgtItemEle, CLS_ACTIVE);\n\t                trgt.setAttribute('aria-hidden', 'false');\n\t                ej2_base_3.attributes(trgt.previousElementSibling, { 'aria-selected': 'true', 'aria-expanded': 'true' });\n\t                icon.classList.remove(CLS_TOGANIMATE);\n\t                this.trigger('expanded', eventArgs);\n\t            }\n\t        };\n\t        Accordion.prototype.expandedItemsPush = function (item) {\n\t            var index = this.getIndexByItem(item);\n\t            if (this.expandedItems.indexOf(index) === -1) {\n\t                this.expandedItems.push(index);\n\t            }\n\t        };\n\t        Accordion.prototype.getIndexByItem = function (item) {\n\t            return [].slice.call(this.element.children).indexOf(item);\n\t        };\n\t        Accordion.prototype.expandedItemsPop = function (item) {\n\t            var index = this.getIndexByItem(item);\n\t            this.expandedItems.splice(this.expandedItems.indexOf(index), 1);\n\t        };\n\t        Accordion.prototype.collapse = function (trgt) {\n\t            var eventArgs;\n\t            var trgtItemEle = ej2_base_3.closest(trgt, '.' + CLS_ITEM);\n\t            if (ej2_base_6.isNullOrUndefined(trgt) || !ej2_base_3.isVisible(trgt) || trgtItemEle.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            var animation = {\n\t                name: this.animation.collapse.effect,\n\t                duration: this.animation.collapse.duration,\n\t                timingFunction: this.animation.collapse.easing,\n\t            };\n\t            var icon = ej2_base_3.select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n\t            eventArgs = { element: trgtItemEle,\n\t                item: this.items[this.getIndexByItem(trgtItemEle)],\n\t                isExpanded: false };\n\t            var eff = animation.name;\n\t            this.trigger('expanding', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            this.expandedItemsPop(trgtItemEle);\n\t            trgtItemEle.classList.add(CLS_EXPANDSTATE);\n\t            icon.classList.add(CLS_TOGANIMATE);\n\t            if ((animation.name === 'None')) {\n\t                this.collapseProgress('begin', icon, trgt, trgtItemEle, eventArgs);\n\t                this.collapseProgress('end', icon, trgt, trgtItemEle, eventArgs);\n\t                return;\n\t            }\n\t            this.collapseAnimation(eff, trgt, trgtItemEle, icon, animation, eventArgs);\n\t        };\n\t        Accordion.prototype.collapseAnimation = function (ef, trgt, trgtItEl, icn, animate, args) {\n\t            var _this = this;\n\t            var height;\n\t            var trgtHeight;\n\t            var itemHeight;\n\t            var remain;\n\t            if (ef === 'SlideUp') {\n\t                animate.begin = function () {\n\t                    itemHeight = trgtItEl.offsetHeight;\n\t                    trgtItEl.style.minHeight = itemHeight + 'px';\n\t                    trgt.style.position = 'absolute';\n\t                    height = trgtItEl.offsetHeight;\n\t                    trgtHeight = trgt.offsetHeight;\n\t                    trgt.style.maxHeight = trgtHeight + 'px';\n\t                    _this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n\t                };\n\t                animate.progress = function () {\n\t                    remain = ((height - (trgtHeight - trgt.offsetHeight)));\n\t                    if (remain < itemHeight) {\n\t                        trgtItEl.style.minHeight = remain + 'px';\n\t                    }\n\t                };\n\t                animate.end = function () {\n\t                    trgt.style.display = 'none';\n\t                    _this.collapseProgress('end', icn, trgt, trgtItEl, args);\n\t                    trgtItEl.style.minHeight = '';\n\t                    ej2_base_5.setStyleAttribute(trgt, { 'position': '', 'maxHeight': '', 'display': '' });\n\t                };\n\t            }\n\t            else {\n\t                animate.begin = function () {\n\t                    _this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n\t                };\n\t                animate.end = function () {\n\t                    _this.collapseProgress('end', icn, trgt, trgtItEl, args);\n\t                };\n\t            }\n\t            new ej2_base_4.Animation(animate).animate(trgt);\n\t        };\n\t        Accordion.prototype.collapseProgress = function (progress, icon, trgt, trgtItemEle, eventArgs) {\n\t            this.remove(icon, CLS_EXPANDICN);\n\t            this.remove(trgtItemEle, CLS_SLCTED);\n\t            if (progress === 'end') {\n\t                this.add(trgt, CLS_CTNHIDE);\n\t                icon.classList.remove(CLS_TOGANIMATE);\n\t                this.remove(trgtItemEle, CLS_ACTIVE);\n\t                trgt.setAttribute('aria-hidden', 'true');\n\t                ej2_base_3.attributes(trgt.previousElementSibling, { 'aria-selected': 'false', 'aria-expanded': 'false' });\n\t                this.trigger('expanded', eventArgs);\n\t            }\n\t        };\n\t        Accordion.prototype.getModuleName = function () {\n\t            return 'accordion';\n\t        };\n\t        Accordion.prototype.itemAttribUpdate = function () {\n\t            var itemEle = [].slice.call(this.element.children);\n\t            var itemLen = this.items.length;\n\t            itemEle.forEach(function (ele) {\n\t                ej2_base_3.select('.' + CLS_HEADER, ele).setAttribute('aria-level', '' + itemLen);\n\t            });\n\t        };\n\t        Accordion.prototype.addItem = function (item, index) {\n\t            var ele = this.element;\n\t            if (ej2_base_6.isNullOrUndefined(index)) {\n\t                index = this.items.length;\n\t            }\n\t            if (ele.childElementCount >= index) {\n\t                this.items.splice(index, 0, item);\n\t                var innerItemEle = this.renderInnerItem(item, index);\n\t                if (ele.childElementCount === index) {\n\t                    ele.appendChild(innerItemEle);\n\t                }\n\t                else {\n\t                    ele.insertBefore(innerItemEle, ele.children[index]);\n\t                }\n\t                ej2_base_1.EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n\t                ej2_base_1.EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n\t                this.itemAttribUpdate();\n\t            }\n\t            this.expandedItems = [];\n\t            this.expandedItemRefresh(ele);\n\t            if (item.expanded) {\n\t                this.expandItem(true, index);\n\t            }\n\t        };\n\t        Accordion.prototype.expandedItemRefresh = function (ele) {\n\t            var _this = this;\n\t            [].slice.call(ele.children).forEach(function (el) {\n\t                if (el.classList.contains(CLS_SLCTED)) {\n\t                    _this.expandedItemsPush(el);\n\t                }\n\t            });\n\t        };\n\t        Accordion.prototype.removeItem = function (index) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            ej2_base_3.detach(ele);\n\t            this.items.splice(index, 1);\n\t            this.itemAttribUpdate();\n\t            this.expandedItems = [];\n\t            this.expandedItemRefresh(this.element);\n\t        };\n\t        Accordion.prototype.select = function (index) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele) || ej2_base_6.isNullOrUndefined(ej2_base_3.select('.' + CLS_HEADER, ele))) {\n\t                return;\n\t            }\n\t            ele.children[0].focus();\n\t        };\n\t        Accordion.prototype.hideItem = function (index, isHidden) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            if (ej2_base_6.isNullOrUndefined(isHidden)) {\n\t                isHidden = true;\n\t            }\n\t            isHidden ? this.add(ele, CLS_ITEMHIDE) : this.remove(ele, CLS_ITEMHIDE);\n\t        };\n\t        Accordion.prototype.enableItem = function (index, isEnable) {\n\t            var ele = this.element.children[index];\n\t            if (ej2_base_6.isNullOrUndefined(ele)) {\n\t                return;\n\t            }\n\t            var eleHeader = ele.firstElementChild;\n\t            if (isEnable) {\n\t                this.remove(ele, CLS_DISABLE);\n\t                ej2_base_3.attributes(eleHeader, { 'tabindex': '0', 'aria-disabled': 'false' });\n\t                eleHeader.focus();\n\t            }\n\t            else {\n\t                if (ele.classList.contains(CLS_ACTIVE)) {\n\t                    this.expandItem(false, index);\n\t                    this.eleMoveFocus('movedown', this.element, eleHeader);\n\t                }\n\t                this.add(ele, CLS_DISABLE);\n\t                eleHeader.setAttribute('aria-disabled', 'true');\n\t                eleHeader.removeAttribute('tabindex');\n\t            }\n\t        };\n\t        Accordion.prototype.expandItem = function (isExpand, index) {\n\t            var _this = this;\n\t            var root = this.element;\n\t            if (ej2_base_6.isNullOrUndefined(index)) {\n\t                if (this.expandMode === 'Single' && isExpand) {\n\t                    var ele = root.children[root.childElementCount - 1];\n\t                    this.itemExpand(isExpand, ele, this.getIndexByItem(ele));\n\t                }\n\t                else {\n\t                    [].slice.call(this.element.children).forEach(function (el) {\n\t                        _this.itemExpand(isExpand, el, _this.getIndexByItem(el));\n\t                    });\n\t                }\n\t            }\n\t            else {\n\t                var ele = this.element.children[index];\n\t                if (ej2_base_6.isNullOrUndefined(ele) || !ele.classList.contains(CLS_SLCT) || (ele.classList.contains(CLS_ACTIVE) && isExpand)) {\n\t                    return;\n\t                }\n\t                else {\n\t                    if (this.expandMode === 'Single') {\n\t                        this.expandItem(false);\n\t                    }\n\t                    this.itemExpand(isExpand, ele, index);\n\t                }\n\t            }\n\t        };\n\t        Accordion.prototype.itemExpand = function (isExpand, ele, index) {\n\t            var ctn = ele.children[1];\n\t            if (ele.classList.contains(CLS_DISABLE)) {\n\t                return;\n\t            }\n\t            if (ej2_base_6.isNullOrUndefined(ctn) && isExpand) {\n\t                ctn = this.contentRendering(index);\n\t                ele.appendChild(ctn);\n\t                this.ariaAttrUpdate(ele);\n\t            }\n\t            else if (ej2_base_6.isNullOrUndefined(ctn)) {\n\t                return;\n\t            }\n\t            isExpand ? this.expand(ctn) : this.collapse(ctn);\n\t        };\n\t        Accordion.prototype.getPersistData = function () {\n\t            var keyEntity = ['expandedItems'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Accordion.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var acrdn = this.element;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'enableRtl':\n\t                        newProp.enableRtl ? this.add(acrdn, CLS_RTL) : this.remove(acrdn, CLS_RTL);\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_5.setStyleAttribute(this.element, { 'height': ej2_base_6.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'width':\n\t                        ej2_base_5.setStyleAttribute(this.element, { 'width': ej2_base_6.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'expandMode':\n\t                        if (newProp.expandMode === 'Single') {\n\t                            this.element.setAttribute('aria-multiselectable', 'false');\n\t                            if (this.expandedItems.length > 1) {\n\t                                this.expandItem(false);\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.element.setAttribute('aria-multiselectable', 'true');\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Accordion;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Collection([], AccordionItem)\n\t    ], Accordion.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Accordion.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Accordion.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Multiple')\n\t    ], Accordion.prototype, \"expandMode\", void 0);\n\t    __decorate([\n\t        ej2_base_5.Complex({}, AccordionAnimationSettings)\n\t    ], Accordion.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"clicked\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"expanding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"expanded\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Accordion.prototype, \"destroyed\", void 0);\n\t    Accordion = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Accordion);\n\t    exports.Accordion = Accordion;\n\t    exports.accordionBuilder = ej2_base_4.CreateBuilder(Accordion);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, context_menu_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(context_menu_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(12), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_lists_1, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DOWNARROW = 'downarrow';\n\t    var ENTER = 'enter';\n\t    var ESCAPE = 'escape';\n\t    var FOCUSED = 'e-focused';\n\t    var HEADER = 'e-menuheader';\n\t    var LEFTARROW = 'leftarrow';\n\t    var RIGHTARROW = 'rightarrow';\n\t    var RTL = 'e-rtl';\n\t    var SELECTED = 'e-selected';\n\t    var SEPARATOR = 'e-separator';\n\t    var UPARROW = 'uparrow';\n\t    var WRAPPER = 'e-contextmenu-wrapper';\n\t    var CARET = 'e-caret';\n\t    var ITEM = 'e-menu-item';\n\t    var DISABLED = 'e-disabled';\n\t    var HIDE = 'e-menu-hide';\n\t    var ICONS = 'e-icons';\n\t    var MenuItem = (function (_super) {\n\t        __extends(MenuItem, _super);\n\t        function MenuItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return MenuItem;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], MenuItem.prototype, \"separator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], MenuItem)\n\t    ], MenuItem.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MenuItem.prototype, \"url\", void 0);\n\t    exports.MenuItem = MenuItem;\n\t    var ContextMenu = (function (_super) {\n\t        __extends(ContextMenu, _super);\n\t        function ContextMenu(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.animation = new ej2_base_3.Animation({});\n\t            _this.navIdx = [];\n\t            _this.isTapHold = false;\n\t            return _this;\n\t        }\n\t        ContextMenu.prototype.preRender = function () {\n\t            if (this.element.tagName === 'EJ-CONTEXTMENU') {\n\t                var ejInst = ej2_base_4.getValue('ej2_instances', this.element);\n\t                var ul = ej2_base_5.createElement('ul');\n\t                var wrapper = ej2_base_5.createElement('EJ-CONTEXTMENU', { className: WRAPPER });\n\t                this.element.parentNode.insertBefore(ul, this.element);\n\t                ej2_base_5.detach(this.element);\n\t                this.element = ul;\n\t                this.element.classList.add('e-' + this.getModuleName());\n\t                document.body.appendChild(wrapper);\n\t                wrapper.appendChild(this.element);\n\t                ej2_base_4.setValue('ej2_instances', ejInst, this.element);\n\t                if (!this.element.id) {\n\t                    this.element.id = ej2_base_4.getUniqueID(this.getModuleName());\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.render = function () {\n\t            this.initWrapper();\n\t            this.renderItems();\n\t            this.wireEvents();\n\t        };\n\t        ContextMenu.prototype.initWrapper = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (!wrapper.classList.contains(WRAPPER)) {\n\t                wrapper = ej2_base_5.createElement('div', { className: WRAPPER });\n\t                document.body.appendChild(wrapper);\n\t            }\n\t            if (this.cssClass) {\n\t                wrapper.classList.add(this.cssClass);\n\t            }\n\t            if (this.enableRtl) {\n\t                wrapper.classList.add(RTL);\n\t            }\n\t            ej2_base_3.attributes(this.element, { 'role': 'menu', 'tabindex': '0' });\n\t            wrapper.appendChild(this.element);\n\t            this.element.style.zIndex = this.getZIndex();\n\t        };\n\t        ContextMenu.prototype.renderItems = function () {\n\t            if (!this.items.length) {\n\t                this.items = ej2_lists_1.ListBase.createJsonFromElement(this.element);\n\t                this.element.innerHTML = '';\n\t            }\n\t            var ul = this.createItems(this.items);\n\t            ej2_base_5.append(Array.prototype.slice.call(ul.children), this.element);\n\t        };\n\t        ContextMenu.prototype.wireEvents = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (this.target) {\n\t                this.targetElem = ej2_base_5.select(this.target);\n\t                if (ej2_base_4.Browser.isIos) {\n\t                    this.touchModule = new ej2_base_2.Touch(this.targetElem, { tapHold: this.touchHandler.bind(this) });\n\t                }\n\t                else {\n\t                    ej2_base_2.EventHandler.add(this.targetElem, 'contextmenu', this.cmenuHandler, this);\n\t                }\n\t                for (var _i = 0, _a = this.getScrollableParents(this.targetElem); _i < _a.length; _i++) {\n\t                    var parent_1 = _a[_i];\n\t                    ej2_base_2.EventHandler.add(parent_1, 'scroll', this.scrollHandler, this);\n\t                }\n\t            }\n\t            if (!ej2_base_4.Browser.isDevice) {\n\t                ej2_base_2.EventHandler.add(wrapper, 'mouseover', this.moverHandler, this);\n\t                ej2_base_2.EventHandler.add(document, 'mousedown', this.mouseDownHandler, this);\n\t            }\n\t            ej2_base_2.EventHandler.add(document, 'click', this.clickHandler, this);\n\t            this.keyboardModule = new ej2_base_2.KeyboardEvents(wrapper, {\n\t                keyAction: this.keyBoardHandler.bind(this),\n\t                keyConfigs: {\n\t                    downarrow: DOWNARROW,\n\t                    uparrow: UPARROW,\n\t                    enter: ENTER,\n\t                    leftarrow: LEFTARROW,\n\t                    rightarrow: RIGHTARROW,\n\t                    escape: ESCAPE\n\t                }\n\t            });\n\t            ej2_base_5.rippleEffect(wrapper, { selector: '.' + ITEM });\n\t        };\n\t        ContextMenu.prototype.mouseDownHandler = function (e) {\n\t            if (ej2_base_5.closest(e.target, '.' + WRAPPER) !== this.getWrapper()) {\n\t                this.closeMenu(this.navIdx.length);\n\t            }\n\t        };\n\t        ContextMenu.prototype.getScrollableParents = function (target) {\n\t            var elemStyle = getComputedStyle(target);\n\t            var parentCollection = [];\n\t            var regex = /(auto|scroll)/;\n\t            var parentEle = target.parentElement;\n\t            while (parentEle && parentEle.tagName !== 'HTML') {\n\t                var parentStyle = getComputedStyle(parentEle);\n\t                if (!(elemStyle.position === 'absolute' && parentStyle.position === 'static')\n\t                    && regex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {\n\t                    parentCollection.push(parentEle);\n\t                }\n\t                parentEle = parentEle.parentElement;\n\t            }\n\t            parentCollection.push(document);\n\t            return parentCollection;\n\t        };\n\t        ContextMenu.prototype.keyBoardHandler = function (e) {\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case DOWNARROW:\n\t                case UPARROW:\n\t                    this.upDownKeyHandler(e);\n\t                    break;\n\t                case RIGHTARROW:\n\t                    this.rightEnterKeyHandler({ action: RIGHTARROW });\n\t                    break;\n\t                case LEFTARROW:\n\t                    this.leftEscKeyHandler({ action: LEFTARROW });\n\t                    break;\n\t                case ENTER:\n\t                    this.rightEnterKeyHandler({ action: ENTER });\n\t                    break;\n\t                case ESCAPE:\n\t                    this.leftEscKeyHandler({ action: ESCAPE });\n\t                    break;\n\t            }\n\t        };\n\t        ContextMenu.prototype.upDownKeyHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            var defaultIdx = e.action === DOWNARROW ? 0 : cul.childElementCount - 1;\n\t            var fliIdx = defaultIdx;\n\t            var fli = this.getLIByClass(cul, FOCUSED);\n\t            if (fli) {\n\t                fliIdx = this.getIdx(cul, fli);\n\t                fli.classList.remove(FOCUSED);\n\t                e.action === DOWNARROW ? fliIdx++ : fliIdx--;\n\t                if (fliIdx === (e.action === DOWNARROW ? cul.childElementCount : -1)) {\n\t                    fliIdx = defaultIdx;\n\t                }\n\t            }\n\t            var cli = cul.children[fliIdx];\n\t            fliIdx = this.isValidLI(cli, fliIdx, e.action);\n\t            cul.children[fliIdx].classList.add(FOCUSED);\n\t            cul.children[fliIdx].focus();\n\t        };\n\t        ContextMenu.prototype.isValidLI = function (cli, index, action) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED)) {\n\t                action === (DOWNARROW || RIGHTARROW) ? index++ : index--;\n\t            }\n\t            cli = cul.children[index];\n\t            if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED)) {\n\t                index = this.isValidLI(cli, index, action);\n\t            }\n\t            return index;\n\t        };\n\t        ContextMenu.prototype.rightEnterKeyHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var cul = wrapper.children[this.navIdx.length];\n\t            var fli = this.getLIByClass(cul, FOCUSED);\n\t            if (fli) {\n\t                var fliIdx = this.getIdx(cul, fli);\n\t                var navIdx = this.navIdx.concat(fliIdx);\n\t                var index = void 0;\n\t                var item = this.getItem(navIdx);\n\t                if (item.items.length) {\n\t                    this.openMenu(fli, item, null, null, e);\n\t                    fli.classList.remove(FOCUSED);\n\t                    fli.classList.add(SELECTED);\n\t                    this.trigger('select', { element: fli, item: this.toRawObject([item]) });\n\t                    fli.focus();\n\t                    this.navIdx.push(fliIdx);\n\t                    cul = wrapper.children[this.navIdx.length];\n\t                    index = this.isValidLI(cul.children[0], 0, e.action);\n\t                    cul.children[index].classList.add(FOCUSED);\n\t                    cul.children[index].focus();\n\t                }\n\t                else {\n\t                    if (e.action === ENTER) {\n\t                        this.close();\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.leftEscKeyHandler = function (e) {\n\t            if (this.navIdx.length) {\n\t                var wrapper = this.getWrapper();\n\t                this.closeMenu(this.navIdx.length);\n\t                var cul = wrapper.children[this.navIdx.length];\n\t                var sli = this.getLIByClass(cul, SELECTED);\n\t                sli.setAttribute('aria-expanded', 'false');\n\t                if (sli) {\n\t                    sli.classList.remove(SELECTED);\n\t                    sli.classList.add(FOCUSED);\n\t                    sli.focus();\n\t                }\n\t            }\n\t            else {\n\t                if (e.action === ESCAPE) {\n\t                    this.close();\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.scrollHandler = function (e) {\n\t            this.closeMenu();\n\t        };\n\t        ContextMenu.prototype.touchHandler = function (e) {\n\t            this.isTapHold = true;\n\t            this.cmenuHandler(e.originalEvent);\n\t        };\n\t        ContextMenu.prototype.cmenuHandler = function (e) {\n\t            e.preventDefault();\n\t            this.closeMenu();\n\t            if (this.canOpen(e.target)) {\n\t                if (e.changedTouches) {\n\t                    this.openMenu(null, null, e.changedTouches[0].clientY, e.changedTouches[0].clientX, e);\n\t                }\n\t                else {\n\t                    this.openMenu(null, null, e.clientY, e.clientX, e);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.close = function () {\n\t            this.closeMenu();\n\t        };\n\t        ContextMenu.prototype.closeMenu = function (ulIndex) {\n\t            if (ulIndex === void 0) { ulIndex = 0; }\n\t            if (this.isMenuVisible()) {\n\t                var wrapper = this.getWrapper();\n\t                var items = void 0;\n\t                for (var cnt = wrapper.childElementCount; cnt > ulIndex; cnt--) {\n\t                    this.toggleAnimation(wrapper.children[cnt - 1], false);\n\t                    items = this.getItems(this.navIdx);\n\t                    this.navIdx.length = ulIndex ? ulIndex - 1 : ulIndex;\n\t                    this.trigger('onClose', { items: items });\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.isMenuVisible = function () {\n\t            return (this.navIdx.length > 0 || ej2_base_5.isVisible(this.element).valueOf());\n\t        };\n\t        ContextMenu.prototype.canOpen = function (target) {\n\t            var canOpen = true;\n\t            if (this.filter) {\n\t                canOpen = false;\n\t                var filter = this.filter.split(' ');\n\t                for (var i = 0, len = target.classList.length; i < len; i++) {\n\t                    if (filter.indexOf(target.classList[i]) > -1) {\n\t                        canOpen = true;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            return canOpen;\n\t        };\n\t        ContextMenu.prototype.open = function (top, left) {\n\t            this.openMenu(null, null, top, left);\n\t        };\n\t        ContextMenu.prototype.openMenu = function (li, item, top, left, e) {\n\t            if (top === void 0) { top = 0; }\n\t            if (left === void 0) { left = 0; }\n\t            if (e === void 0) { e = null; }\n\t            var ul;\n\t            var navIdx;\n\t            var liItem;\n\t            var beforeOpenEventArgs;\n\t            var wrapper = this.getWrapper();\n\t            if (li) {\n\t                ul = this.createItems(item.items);\n\t                if (ej2_base_4.Browser.isDevice) {\n\t                    wrapper.lastChild.style.display = 'none';\n\t                    var data = { text: item.text, iconCss: ICONS + ' e-previous' };\n\t                    var hdata = new MenuItem(this.items[0], null, data, true);\n\t                    var hli = this.createItem([hdata], true, 'menu', true);\n\t                    ul.insertBefore(hli, ul.children[0]);\n\t                }\n\t                ul.style.zIndex = this.element.style.zIndex;\n\t                wrapper.appendChild(ul);\n\t            }\n\t            else {\n\t                ul = this.element;\n\t            }\n\t            navIdx = this.getIndex(li ? li.textContent : null);\n\t            liItem = li ? this.getItem(navIdx) : null;\n\t            beforeOpenEventArgs = { element: ul, items: li ? item.items : this.getItems([]), parentItem: liItem, event: e, cancel: false };\n\t            this.trigger('beforeOpen', beforeOpenEventArgs);\n\t            if (!beforeOpenEventArgs.cancel) {\n\t                this.setPosition(li, ul, top, left);\n\t                this.toggleAnimation(ul);\n\t            }\n\t        };\n\t        ContextMenu.prototype.createItem = function (item, showIcon, moduleName, isHeader) {\n\t            if (isHeader === void 0) { isHeader = true; }\n\t            var listOpt = { showIcon: showIcon, moduleName: moduleName };\n\t            if (isHeader) {\n\t                listOpt.itemClass = HEADER;\n\t            }\n\t            var li = ej2_lists_1.ListBase.createListItemFromJson(this.toRawObject(item), listOpt, 0, true);\n\t            return li[0];\n\t        };\n\t        ContextMenu.prototype.setPosition = function (li, ul, top, left) {\n\t            var px = 'px';\n\t            if (ul === this.element) {\n\t                this.toggleVisiblity(ul);\n\t                var collide = ej2_popups_1.isCollide(ul, null, left, top);\n\t                if (collide.indexOf('right') > -1) {\n\t                    left = left - ul.offsetWidth;\n\t                }\n\t                if (collide.indexOf('bottom') > -1) {\n\t                    var offset = ej2_popups_1.fit(ul, null, { X: false, Y: true }, { top: top, left: left });\n\t                    top = offset.top;\n\t                }\n\t                collide = ej2_popups_1.isCollide(ul, null, left, top);\n\t                if (collide.indexOf('left') > -1) {\n\t                    var offset = ej2_popups_1.fit(ul, null, { X: true, Y: false }, { top: top, left: left });\n\t                    left = offset.left;\n\t                }\n\t                this.toggleVisiblity(ul, false);\n\t            }\n\t            else {\n\t                if (ej2_base_4.Browser.isDevice) {\n\t                    top = Number(this.element.style.top.replace(px, ''));\n\t                    left = Number(this.element.style.left.replace(px, ''));\n\t                }\n\t                else {\n\t                    var x = this.enableRtl ? 'left' : 'right';\n\t                    var offset = ej2_popups_1.calculatePosition(li, x, 'top');\n\t                    top = offset.top;\n\t                    left = offset.left;\n\t                    this.toggleVisiblity(ul);\n\t                    var collide = ej2_popups_1.isCollide(ul, null, this.enableRtl ? left - ul.offsetWidth : left, top);\n\t                    this.toggleVisiblity(ul, false);\n\t                    if (collide.length) {\n\t                        offset = ej2_popups_1.calculatePosition(li, this.enableRtl ? 'right' : 'left', 'top');\n\t                        left = offset.left;\n\t                    }\n\t                    if (this.enableRtl || collide.length) {\n\t                        this.toggleVisiblity(ul);\n\t                        left = (this.enableRtl && collide.length) ? left : left - ul.offsetWidth;\n\t                        this.toggleVisiblity(ul, false);\n\t                    }\n\t                }\n\t            }\n\t            ul.style.top = top + px;\n\t            ul.style.left = left + px;\n\t        };\n\t        ContextMenu.prototype.toggleVisiblity = function (ul, isVisible) {\n\t            if (isVisible === void 0) { isVisible = true; }\n\t            ul.style.visibility = isVisible ? 'hidden' : '';\n\t            ul.style.display = isVisible ? 'block' : 'none';\n\t        };\n\t        ContextMenu.prototype.createItems = function (items) {\n\t            var _this = this;\n\t            var showIcon = this.hasField(items, 'iconCss');\n\t            var listBaseOptions = {\n\t                showIcon: showIcon,\n\t                moduleName: 'menu',\n\t                itemCreating: function (args) {\n\t                    args.curData.htmlAttributes = {\n\t                        role: 'menuitem',\n\t                        tabindex: '-1'\n\t                    };\n\t                    if (showIcon && !args.curData.iconCss) {\n\t                        args.curData.iconCss = ICONS + ' e-blankicon';\n\t                    }\n\t                },\n\t                itemCreated: function (args) {\n\t                    if (args.curData.separator) {\n\t                        args.item.classList.remove(ITEM);\n\t                        args.item.classList.add(SEPARATOR);\n\t                        args.item.removeAttribute('role');\n\t                    }\n\t                    if (args.curData.items && args.curData.items.length) {\n\t                        var span = ej2_base_5.createElement('span', { className: ICONS + ' ' + CARET });\n\t                        args.item.appendChild(span);\n\t                        args.item.setAttribute('aria-haspopup', 'true');\n\t                        args.item.setAttribute('aria-expanded', 'false');\n\t                        args.item.removeAttribute('role');\n\t                        args.item.classList.add('e-menu-caret-icon');\n\t                    }\n\t                    _this.trigger('beforeItemRender', { data: args.curData, item: args.item });\n\t                }\n\t            };\n\t            var ul = ej2_lists_1.ListBase.createList(this.toRawObject(items.slice()), listBaseOptions, true);\n\t            ul.setAttribute('tabindex', '0');\n\t            return ul;\n\t        };\n\t        ContextMenu.prototype.toRawObject = function (items) {\n\t            var item;\n\t            var menuItems = [];\n\t            for (var i = 0, len = items.length; i < len; i++) {\n\t                item = items[i].properties;\n\t                menuItems.push(item);\n\t            }\n\t            return menuItems;\n\t        };\n\t        ContextMenu.prototype.moverHandler = function (e) {\n\t            var wrapper = this.getWrapper();\n\t            var trgt = e.target;\n\t            var cli = this.getLI(trgt);\n\t            if (cli && ej2_base_5.closest(cli, '.' + WRAPPER)) {\n\t                var fli = ej2_base_5.select('.' + FOCUSED, wrapper);\n\t                if (fli) {\n\t                    fli.classList.remove(FOCUSED);\n\t                }\n\t                cli.classList.add(FOCUSED);\n\t                if (!this.showItemOnClick) {\n\t                    this.clickHandler(e);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.hasField = function (items, field) {\n\t            for (var i = 0, len = items.length; i < len; i++) {\n\t                if (items[i][field]) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        ContextMenu.prototype.getWrapper = function () {\n\t            return this.element.parentElement;\n\t        };\n\t        ContextMenu.prototype.clickHandler = function (e) {\n\t            if (this.isTapHold) {\n\t                this.isTapHold = false;\n\t            }\n\t            else {\n\t                var wrapper = this.getWrapper();\n\t                var trgt = e.target;\n\t                var cli = this.getLI(trgt);\n\t                if (cli && e.type === 'click' && !cli.querySelector('.' + CARET)) {\n\t                    this.setLISelected(cli);\n\t                    var navIdx = this.getIndex(cli.textContent);\n\t                    var item = this.getItem(navIdx);\n\t                    this.trigger('select', { element: cli, item: item });\n\t                }\n\t                if (cli && ej2_base_5.closest(cli, '.' + WRAPPER) && (e.type === 'mouseover' || ej2_base_4.Browser.isDevice || this.showItemOnClick)) {\n\t                    var ul = void 0;\n\t                    if (cli.classList.contains(HEADER)) {\n\t                        ul = wrapper.children[this.navIdx.length - 1];\n\t                        this.toggleAnimation(ul);\n\t                        this.trigger('onOpen', { element: ul });\n\t                        var sli = this.getLIByClass(ul, SELECTED);\n\t                        if (sli) {\n\t                            sli.classList.remove(SELECTED);\n\t                        }\n\t                        ej2_base_5.detach(cli.parentNode);\n\t                        this.navIdx.pop();\n\t                    }\n\t                    else {\n\t                        if (!cli.classList.contains(SEPARATOR)) {\n\t                            var showSubMenu = true;\n\t                            var cul = cli.parentNode;\n\t                            var cliIdx = this.getIdx(cul, cli);\n\t                            if (!ej2_base_4.Browser.isDevice) {\n\t                                var culIdx = this.getIdx(wrapper, cul);\n\t                                if (this.navIdx[culIdx] === cliIdx) {\n\t                                    showSubMenu = false;\n\t                                }\n\t                                if (culIdx !== this.navIdx.length && (e.type !== 'mouseover' || showSubMenu)) {\n\t                                    var sli = this.getLIByClass(cul, SELECTED);\n\t                                    if (sli) {\n\t                                        sli.classList.remove(SELECTED);\n\t                                    }\n\t                                    this.closeMenu(culIdx + 1);\n\t                                }\n\t                            }\n\t                            if (showSubMenu) {\n\t                                var count = 0;\n\t                                var idx = this.navIdx.concat(cliIdx);\n\t                                for (var i = 0; i < idx.length; i++) {\n\t                                    if (ej2_base_3.isNullOrUndefined(idx[i])) {\n\t                                        count = i;\n\t                                    }\n\t                                }\n\t                                if (!ej2_base_3.isNullOrUndefined(idx[count])) {\n\t                                    var item = this.getItem(idx);\n\t                                    if (item.items.length) {\n\t                                        this.setLISelected(cli);\n\t                                        var navIdx = this.getIndex(cli.textContent);\n\t                                        var liItem = this.getItem(navIdx);\n\t                                        this.trigger('select', { element: cli, item: liItem });\n\t                                        cli.setAttribute('aria-expanded', 'true');\n\t                                        this.openMenu(cli, item, null, null, e);\n\t                                        this.navIdx.push(cliIdx);\n\t                                    }\n\t                                    else {\n\t                                        if (e.type !== 'mouseover') {\n\t                                            this.closeMenu();\n\t                                        }\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (trgt.tagName !== 'UL' || trgt.parentElement !== wrapper) {\n\t                        if (!cli || !cli.querySelector('.' + CARET)) {\n\t                            this.closeMenu();\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.setLISelected = function (li) {\n\t            var sli = this.getLIByClass(li.parentElement, SELECTED);\n\t            if (sli) {\n\t                sli.classList.remove(SELECTED);\n\t            }\n\t            li.classList.remove(FOCUSED);\n\t            li.classList.add(SELECTED);\n\t        };\n\t        ContextMenu.prototype.getLIByClass = function (ul, classname) {\n\t            for (var i = 0, len = ul.children.length; i < len; i++) {\n\t                if (ul.children[i].classList.contains(classname)) {\n\t                    return ul.children[i];\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        ContextMenu.prototype.getItem = function (navIdx) {\n\t            navIdx = navIdx.slice();\n\t            var idx = navIdx.pop();\n\t            var items = this.getItems(navIdx);\n\t            return items[idx];\n\t        };\n\t        ContextMenu.prototype.getItems = function (navIdx) {\n\t            var items = this.items;\n\t            for (var i = 0; i < navIdx.length; i++) {\n\t                items = items[navIdx[i]].items;\n\t            }\n\t            return items;\n\t        };\n\t        ContextMenu.prototype.getIdx = function (ul, li, skipHdr) {\n\t            if (skipHdr === void 0) { skipHdr = true; }\n\t            var idx = Array.prototype.indexOf.call(ul.children, li);\n\t            if (skipHdr && ul.children[0].classList.contains(HEADER)) {\n\t                idx--;\n\t            }\n\t            return idx;\n\t        };\n\t        ContextMenu.prototype.getLI = function (elem) {\n\t            if (elem.tagName === 'LI') {\n\t                return elem;\n\t            }\n\t            return ej2_base_5.closest(elem, 'li');\n\t        };\n\t        ContextMenu.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var wrapper = this.getWrapper();\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'cssClass':\n\t                        if (oldProp.cssClass) {\n\t                            wrapper.classList.remove(oldProp.cssClass);\n\t                        }\n\t                        if (newProp.cssClass) {\n\t                            wrapper.classList.add(newProp.cssClass);\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        wrapper.classList.toggle(RTL);\n\t                        break;\n\t                    case 'filter':\n\t                        this.closeMenu();\n\t                        this.filter = newProp.filter;\n\t                        break;\n\t                    case 'showItemOnClick':\n\t                        this.unWireEvents();\n\t                        this.showItemOnClick = newProp.showItemOnClick;\n\t                        this.wireEvents();\n\t                        break;\n\t                    case 'target':\n\t                        this.unWireEvents();\n\t                        this.target = newProp.target;\n\t                        this.wireEvents();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.unWireEvents = function () {\n\t            var wrapper = this.getWrapper();\n\t            if (this.targetElem) {\n\t                if (ej2_base_4.Browser.isIos) {\n\t                    this.touchModule.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_2.EventHandler.remove(this.targetElem, 'contextmenu', this.cmenuHandler);\n\t                }\n\t                for (var _i = 0, _a = this.getScrollableParents(this.targetElem); _i < _a.length; _i++) {\n\t                    var parent_2 = _a[_i];\n\t                    ej2_base_2.EventHandler.remove(parent_2, 'scroll', this.scrollHandler);\n\t                }\n\t            }\n\t            if (!ej2_base_4.Browser.isDevice) {\n\t                ej2_base_2.EventHandler.remove(wrapper, 'mouseover', this.moverHandler);\n\t                ej2_base_2.EventHandler.remove(document, 'mousedown', this.mouseDownHandler);\n\t            }\n\t            ej2_base_2.EventHandler.remove(document, 'click', this.clickHandler);\n\t            this.keyboardModule.destroy();\n\t        };\n\t        ContextMenu.prototype.toggleAnimation = function (ul, isMenuOpen) {\n\t            var _this = this;\n\t            if (isMenuOpen === void 0) { isMenuOpen = true; }\n\t            if (this.animationSettings.effect === 'None' || !isMenuOpen) {\n\t                this.end(ul, isMenuOpen);\n\t            }\n\t            else {\n\t                this.animation.animate(ul, {\n\t                    name: this.animationSettings.effect,\n\t                    duration: this.animationSettings.duration,\n\t                    timingFunction: this.animationSettings.easing,\n\t                    begin: function (options) {\n\t                        if (isMenuOpen) {\n\t                            options.element.style.display = 'block';\n\t                            options.element.style.maxHeight = options.element.getBoundingClientRect().height + 'px';\n\t                        }\n\t                    },\n\t                    end: function (options) {\n\t                        _this.end(options.element, isMenuOpen);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        ContextMenu.prototype.end = function (ul, isMenuOpen) {\n\t            if (isMenuOpen) {\n\t                ul.style.display = 'block';\n\t                this.trigger('onOpen', { element: ul });\n\t                if (ul.querySelector('.' + FOCUSED)) {\n\t                    ul.querySelector('.' + FOCUSED).focus();\n\t                }\n\t                else {\n\t                    var ele = void 0;\n\t                    ele = this.getWrapper().children[this.getIdx(this.getWrapper(), ul) - 1];\n\t                    if (ele) {\n\t                        ele.querySelector('.' + SELECTED).focus();\n\t                    }\n\t                    else {\n\t                        this.element.focus();\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (ul === this.element) {\n\t                    var fli = this.getLIByClass(this.element, FOCUSED);\n\t                    if (fli) {\n\t                        fli.classList.remove(FOCUSED);\n\t                    }\n\t                    var sli = this.getLIByClass(this.element, SELECTED);\n\t                    if (sli) {\n\t                        sli.classList.remove(SELECTED);\n\t                    }\n\t                    ul.style.display = 'none';\n\t                }\n\t                else {\n\t                    ej2_base_5.detach(ul);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.getPersistData = function () {\n\t            return '';\n\t        };\n\t        ContextMenu.prototype.getModuleName = function () {\n\t            return 'contextmenu';\n\t        };\n\t        ContextMenu.prototype.checkIndex = function (data, items) {\n\t            var index = -1;\n\t            for (var i = 0; i < items.length; i++) {\n\t                if (items[i].text === data) {\n\t                    index = i;\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        ContextMenu.prototype.getIndex = function (data) {\n\t            var _this = this;\n\t            var index = [];\n\t            var count = 0;\n\t            var indexCount = 0;\n\t            var items = this.items;\n\t            index.push(this.checkIndex(data, items));\n\t            if (index.indexOf(-1) < 0) {\n\t                return index;\n\t            }\n\t            else {\n\t                index = [];\n\t                items = items.filter(function (item) { return item.items.length > 0; });\n\t                items.forEach(function (item) {\n\t                    index.push(_this.items.indexOf(item));\n\t                    index.push(_this.checkIndex(data, item.items));\n\t                });\n\t                if (index.indexOf(-1) < 0) {\n\t                    return index;\n\t                }\n\t                else {\n\t                    index.pop();\n\t                    var _loop_1 = function (k) {\n\t                        var itemss;\n\t                        itemss = items[k].items;\n\t                        itemss.forEach(function (item) {\n\t                            index.push(itemss.indexOf(item));\n\t                            index.push(_this.checkIndex(data, item.items));\n\t                            if (index.indexOf(-1) > -1) {\n\t                                index.pop();\n\t                                index.pop();\n\t                            }\n\t                        });\n\t                    };\n\t                    for (var k = 0; k < items.length; k++) {\n\t                        _loop_1(k);\n\t                    }\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        ContextMenu.prototype.enableItems = function (items, enable) {\n\t            if (enable === void 0) { enable = true; }\n\t            var ul;\n\t            var idx;\n\t            var navIdx;\n\t            var disabled = DISABLED;\n\t            var wrapper = this.getWrapper();\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                ul = wrapper.children[navIdx.length];\n\t                if (ul) {\n\t                    if (enable) {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.remove(disabled);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.remove(disabled);\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.add(disabled);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.add(disabled);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.showItems = function (items) {\n\t            this.showHideItems(items, false);\n\t        };\n\t        ContextMenu.prototype.hideItems = function (items) {\n\t            this.showHideItems(items, true);\n\t        };\n\t        ContextMenu.prototype.showHideItems = function (items, ishide) {\n\t            var ul;\n\t            var idx;\n\t            var navIdx;\n\t            var wrapper = this.getWrapper();\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                ul = wrapper.children[navIdx.length];\n\t                if (ul) {\n\t                    if (ishide) {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.add(HIDE);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.add(HIDE);\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (ej2_base_4.Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n\t                            ul.children[idx + 1].classList.remove(HIDE);\n\t                        }\n\t                        else {\n\t                            ul.children[idx].classList.remove(HIDE);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.removeItems = function (items) {\n\t            var idx;\n\t            var navIdx;\n\t            var iitems;\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(items[i]);\n\t                idx = navIdx.pop();\n\t                iitems = this.getItems(navIdx);\n\t                iitems.splice(idx, 1);\n\t                if (!navIdx.length) {\n\t                    ej2_base_5.detach(this.element.children[idx]);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.insertAfter = function (items, text) {\n\t            this.insertItems(items, text);\n\t        };\n\t        ContextMenu.prototype.insertBefore = function (items, text) {\n\t            this.insertItems(items, text, false);\n\t        };\n\t        ContextMenu.prototype.insertItems = function (items, text, isAfter) {\n\t            if (isAfter === void 0) { isAfter = true; }\n\t            var li;\n\t            var idx;\n\t            var navIdx;\n\t            var iitems;\n\t            var menuitem;\n\t            var showIcon;\n\t            for (var i = 0; i < items.length; i++) {\n\t                navIdx = this.getIndex(text);\n\t                idx = navIdx.pop();\n\t                iitems = this.getItems(navIdx);\n\t                menuitem = new MenuItem(iitems[0], null, items[i], true);\n\t                iitems.splice(isAfter ? idx + 1 : idx, 0, menuitem);\n\t                if (!navIdx.length) {\n\t                    idx = isAfter ? idx + 1 : idx;\n\t                    showIcon = this.hasField(iitems, 'iconCss');\n\t                    li = this.createItem([menuitem], showIcon, 'menu', false);\n\t                    this.element.insertBefore(li, this.element.children[idx]);\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.getZIndex = function () {\n\t            var index;\n\t            var position;\n\t            var props;\n\t            var zIndex = ['999'];\n\t            for (var i = 0, len = document.body.children.length; i < len; i++) {\n\t                props = document.defaultView.getComputedStyle(document.body.children[i]);\n\t                index = props.getPropertyValue('z-index');\n\t                position = props.getPropertyValue('position');\n\t                if (index !== 'auto' && position !== 'static') {\n\t                    zIndex.push(index);\n\t                }\n\t            }\n\t            return (Math.max.apply(Math, zIndex) + 1).toString();\n\t        };\n\t        ContextMenu.prototype.destroy = function () {\n\t            var _this = this;\n\t            var wrapper = this.getWrapper();\n\t            _super.prototype.destroy.call(this);\n\t            this.unWireEvents();\n\t            this.closeMenu();\n\t            this.element.innerHTML = '';\n\t            ['top', 'left', 'display', 'role', 'tabindex'].forEach(function (key) {\n\t                _this.element.style.removeProperty(key);\n\t            });\n\t            wrapper.parentNode.insertBefore(this.element, wrapper);\n\t            ej2_base_5.detach(wrapper);\n\t        };\n\t        return ContextMenu;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"filter\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], ContextMenu.prototype, \"showItemOnClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], MenuItem)\n\t    ], ContextMenu.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], ContextMenu.prototype, \"target\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property({ duration: 400, easing: 'ease', effect: 'SlideDown' })\n\t    ], ContextMenu.prototype, \"animationSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"beforeItemRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"beforeOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"onOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"onClose\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], ContextMenu.prototype, \"select\", void 0);\n\t    ContextMenu = __decorate([\n\t        ej2_base_1.NotifyPropertyChanges\n\t    ], ContextMenu);\n\t    exports.ContextMenu = ContextMenu;\n\t    exports.contextMenuBuilder = ej2_base_1.CreateBuilder(ContextMenu);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, tab_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(tab_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, toolbar_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLS_TAB = 'e-tab';\n\t    var CLS_HEADER = 'e-header';\n\t    var CLS_CONTENT = 'e-content';\n\t    var CLS_ITEMS = 'e-items';\n\t    var CLS_ITEM = 'e-item';\n\t    var CLS_TEMPLATE = 'e-template';\n\t    var CLS_RTL = 'e-rtl';\n\t    var CLS_ACTIVE = 'e-active';\n\t    var CLS_DISABLE = 'e-disable';\n\t    var CLS_HIDDEN = 'e-hidden';\n\t    var CLS_FOCUS = 'e-focused';\n\t    var CLS_ICONS = 'e-icons';\n\t    var CLS_ICON = 'e-icon';\n\t    var CLS_ICON_CLOSE = 'e-close-icon';\n\t    var CLS_CLOSE_SHOW = 'e-close-show';\n\t    var CLS_TEXT = 'e-tab-text';\n\t    var CLS_INDICATOR = 'e-indicator';\n\t    var CLS_WRAP = 'e-tab-wrap';\n\t    var CLS_TEXT_WRAP = 'e-text-wrap';\n\t    var CLS_TAB_ICON = 'e-tab-icon';\n\t    var CLS_TB_ITEMS = 'e-toolbar-items';\n\t    var CLS_TB_ITEM = 'e-toolbar-item';\n\t    var CLS_TB_POP = 'e-toolbar-pop';\n\t    var CLS_TB_POPUP = 'e-toolbar-popup';\n\t    var CLS_POPUP_OPEN = 'e-popup-open';\n\t    var CLS_POPUP_CLOSE = 'e-popup-close';\n\t    var CLS_PROGRESS = 'e-progress';\n\t    var CLS_IGNORE = 'e-ignore';\n\t    var TabActionSettings = (function (_super) {\n\t        __extends(TabActionSettings, _super);\n\t        function TabActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabActionSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('SlideLeftIn')\n\t    ], TabActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(600)\n\t    ], TabActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('ease')\n\t    ], TabActionSettings.prototype, \"easing\", void 0);\n\t    exports.TabActionSettings = TabActionSettings;\n\t    var TabAnimationSettings = (function (_super) {\n\t        __extends(TabAnimationSettings, _super);\n\t        function TabAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabAnimationSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Complex({ effect: 'SlideLeftIn', duration: 600, easing: 'ease' }, TabActionSettings)\n\t    ], TabAnimationSettings.prototype, \"previous\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ effect: 'SlideRightIn', duration: 600, easing: 'ease' }, TabActionSettings)\n\t    ], TabAnimationSettings.prototype, \"next\", void 0);\n\t    exports.TabAnimationSettings = TabAnimationSettings;\n\t    var Header = (function (_super) {\n\t        __extends(Header, _super);\n\t        function Header() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Header;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Header.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Header.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('left')\n\t    ], Header.prototype, \"iconPosition\", void 0);\n\t    exports.Header = Header;\n\t    var TabItem = (function (_super) {\n\t        __extends(TabItem, _super);\n\t        function TabItem() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TabItem;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Complex({}, Header)\n\t    ], TabItem.prototype, \"header\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], TabItem.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], TabItem.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], TabItem.prototype, \"disabled\", void 0);\n\t    exports.TabItem = TabItem;\n\t    var Tab = (function (_super) {\n\t        __extends(Tab, _super);\n\t        function Tab(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.prevIndex = 0;\n\t            _this.show = { name: 'SlideDown', duration: 100 };\n\t            _this.hide = { name: 'SlideUp', duration: 100 };\n\t            _this.animateOptions = {};\n\t            _this.animObj = new ej2_base_5.Animation(_this.animateOptions);\n\t            _this.maxHeight = 0;\n\t            _this.title = 'Close';\n\t            _this.keyConfigs = {\n\t                tab: 'tab',\n\t                home: 'home',\n\t                end: 'end',\n\t                enter: 'enter',\n\t                space: 'space',\n\t                delete: 'delete',\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                moveDown: 'downarrow'\n\t            };\n\t            return _this;\n\t        }\n\t        Tab.prototype.destroy = function () {\n\t            var _this = this;\n\t            if (!ej2_base_4.isNullOrUndefined(this.tbObj)) {\n\t                this.tbObj.destroy();\n\t            }\n\t            this.unWireEvents();\n\t            ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation'].forEach(function (val) {\n\t                _this.element.removeAttribute(val);\n\t            });\n\t            if (!this.isTemplate) {\n\t                this.element.innerHTML = '';\n\t            }\n\t            else {\n\t                var cntEle = ej2_base_2.select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n\t                this.element.classList.remove(CLS_TEMPLATE);\n\t                if (!ej2_base_4.isNullOrUndefined(cntEle)) {\n\t                    cntEle.innerHTML = this.cnt;\n\t                }\n\t            }\n\t            _super.prototype.destroy.call(this);\n\t            this.trigger('destroyed');\n\t        };\n\t        Tab.prototype.preRender = function () {\n\t            this.isPopup = false;\n\t            this.initRender = true;\n\t            var name = ej2_base_3.Browser.info.name;\n\t            var css = (name === 'msie') ? 'e-ie' : (name === 'edge') ? 'e-edge' : (name === 'safari') ? 'e-safari' : '';\n\t            ej2_base_4.setStyleAttribute(this.element, { 'width': ej2_base_3.formatUnit(this.width), 'height': ej2_base_3.formatUnit(this.height) });\n\t            this.setCssClass(this.element, this.cssClass, true);\n\t            ej2_base_1.attributes(this.element, { role: 'tablist', 'aria-disabled': 'false', 'aria-activedescendant': '' });\n\t            this.setCssClass(this.element, css, true);\n\t        };\n\t        Tab.prototype.render = function () {\n\t            this.renderContainer();\n\t            this.wireEvents();\n\t            this.initRender = false;\n\t        };\n\t        Tab.prototype.renderContainer = function () {\n\t            if (this.items.length > 0 && this.element.children.length === 0) {\n\t                this.element.appendChild(ej2_base_4.createElement('div', { className: CLS_CONTENT }));\n\t                this.setOrientation(this.headerPlacement, ej2_base_4.createElement('div', { className: CLS_HEADER }));\n\t                this.isTemplate = false;\n\t            }\n\t            else if (this.element.children.length > 0) {\n\t                this.isTemplate = true;\n\t                this.element.classList.add(CLS_TEMPLATE);\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(ej2_base_2.select('.' + CLS_HEADER, this.element)) && !ej2_base_4.isNullOrUndefined(ej2_base_2.select('.' + CLS_CONTENT, this.element))) {\n\t                this.renderHeader();\n\t                this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t                if (!ej2_base_4.isNullOrUndefined(this.tbItems)) {\n\t                    ej2_base_5.rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\n\t                }\n\t                this.renderContent();\n\t                if (ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n\t                    this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t                    this.bdrLine = ej2_base_4.createElement('div', { className: CLS_INDICATOR + ' ' + CLS_HIDDEN + ' ' + CLS_IGNORE });\n\t                    var scrCnt = ej2_base_2.select('.e-hscroll-content', this.tbItems);\n\t                    if (!ej2_base_4.isNullOrUndefined(scrCnt)) {\n\t                        scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n\t                    }\n\t                    else {\n\t                        this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n\t                    }\n\t                    this.setContentHeight(true);\n\t                    this.select(this.selectedItem);\n\t                }\n\t                this.setRTL(this.enableRtl);\n\t            }\n\t        };\n\t        Tab.prototype.renderHeader = function () {\n\t            var _this = this;\n\t            var tabItems = [];\n\t            this.hdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            this.btnCls = ej2_base_4.createElement('span', { className: CLS_ICONS + ' ' + CLS_ICON_CLOSE, attrs: { title: this.title } }).outerHTML;\n\t            if (!this.isTemplate) {\n\t                tabItems = this.parseObject(this.items);\n\t            }\n\t            else {\n\t                var count = this.hdrEle.children.length;\n\t                var hdrItems = [];\n\t                for (var i = 0; i < count; i++) {\n\t                    hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n\t                }\n\t                if (count > 0) {\n\t                    this.hdrEle.innerHTML = '';\n\t                    this.hdrEle.appendChild(ej2_base_4.createElement('div', { className: CLS_ITEMS }));\n\t                    hdrItems.forEach(function (item, index) {\n\t                        var attr = {\n\t                            className: CLS_ITEM, id: CLS_ITEM + '_' + index,\n\t                            attrs: { role: 'tab', 'aria-controls': CLS_CONTENT + '_' + index, 'aria-selected': 'false' }\n\t                        };\n\t                        var txt = ej2_base_4.createElement('span', { className: CLS_TEXT, innerHTML: item, attrs: { 'role': 'presentation' } }).outerHTML;\n\t                        var cont = ej2_base_4.createElement('div', { className: CLS_TEXT_WRAP, innerHTML: txt + _this.btnCls }).outerHTML;\n\t                        var wrap = ej2_base_4.createElement('div', { className: CLS_WRAP, innerHTML: cont, attrs: { tabIndex: '-1' } });\n\t                        ej2_base_2.select('.' + CLS_ITEMS, _this.element).appendChild(ej2_base_4.createElement('div', attr));\n\t                        ej2_base_4.selectAll('.' + CLS_ITEM, _this.element)[index].appendChild(wrap);\n\t                    });\n\t                }\n\t            }\n\t            this.tbObj = new toolbar_1.Toolbar({\n\t                width: '100%',\n\t                overflowMode: this.overflowMode,\n\t                items: (tabItems.length !== 0) ? tabItems : [],\n\t                clicked: this.clickHandler.bind(this)\n\t            });\n\t            this.tbObj.appendTo(this.hdrEle);\n\t            ej2_base_1.attributes(this.element, { 'aria-orientation': 'horizontal' });\n\t            this.setCloseButton(this.showCloseButton);\n\t            this.setProperties({ headerPlacement: (this.element.children.item(0).classList.contains(CLS_HEADER)) ? 'Top' : 'Bottom' }, true);\n\t        };\n\t        Tab.prototype.renderContent = function () {\n\t            this.cntEle = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t            var hdrItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element);\n\t            if (this.isTemplate) {\n\t                this.cnt = (this.cntEle.children.length > 0) ? this.cntEle.innerHTML : '';\n\t                var contents = this.cntEle.children;\n\t                for (var i = 0; i < hdrItem.length; i++) {\n\t                    if (contents.length - 1 >= i) {\n\t                        contents.item(i).className += CLS_ITEM;\n\t                        ej2_base_1.attributes(contents.item(i), { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + i });\n\t                        contents.item(i).id = CLS_CONTENT + '_' + i;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.parseObject = function (items) {\n\t            var _this = this;\n\t            var inHTML = '';\n\t            var tbCount = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length;\n\t            var tItems = [];\n\t            items.forEach(function (item, index) {\n\t                var pos = (ej2_base_4.isNullOrUndefined(item.header.iconPosition)) ? '' : item.header.iconPosition;\n\t                var css = (ej2_base_4.isNullOrUndefined(item.header.iconCss)) ? '' : item.header.iconCss;\n\t                var txt = item.header.text;\n\t                var id = ((tbCount === 0) ? index : (_this.isReplace === true) ? index : tbCount + index);\n\t                var disabled = (item.disabled) ? ' ' + CLS_DISABLE : '';\n\t                var tHtml = ((txt instanceof Object) ? txt.outerHTML : txt);\n\t                var txtEmpty = (!ej2_base_4.isNullOrUndefined(tHtml) && tHtml !== '');\n\t                var tEle = (txtEmpty) ? ej2_base_4.createElement('div', {\n\t                    className: CLS_TEXT, innerHTML: tHtml, attrs: { 'role': 'presentation' }\n\t                }).outerHTML : '';\n\t                var icon = ej2_base_4.createElement('span', {\n\t                    className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n\t                }).outerHTML;\n\t                if ((txt === '' || txt === undefined) && css === '') {\n\t                    return;\n\t                }\n\t                else {\n\t                    if ((txt !== '' && txt !== undefined) && css !== '') {\n\t                        inHTML = (pos === 'left' || pos === 'top') ? icon + '' + tEle : tEle + '' + icon;\n\t                    }\n\t                    else {\n\t                        inHTML = (css === '') ? tEle : icon;\n\t                    }\n\t                }\n\t                var tCont = ej2_base_4.createElement('div', { className: CLS_TEXT_WRAP, innerHTML: inHTML + '' + _this.btnCls }).outerHTML;\n\t                var wrap = ej2_base_4.createElement('div', { className: CLS_WRAP, innerHTML: tCont, attrs: { tabIndex: '-1' } });\n\t                var attrObj = {\n\t                    id: CLS_ITEM + '_' + id, role: 'tab', 'aria-selected': 'false'\n\t                };\n\t                var tItem = { htmlAttributes: attrObj, template: wrap.outerHTML };\n\t                tItem.cssClass = item.cssClass + '' + disabled + '' + ((css !== '') ? 'e-i' + pos : '') + ' ' + ((!txtEmpty) ? CLS_ICON : '');\n\t                if (pos === 'top' || pos === 'bottom') {\n\t                    _this.element.classList.add('e-vertical-icon');\n\t                }\n\t                tItems.push(tItem);\n\t            });\n\t            return tItems;\n\t        };\n\t        Tab.prototype.removeActiveClass = function (id) {\n\t            var hdrActEle = ej2_base_4.selectAll(':root .' + CLS_HEADER + ' .' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element)[0];\n\t            if (!ej2_base_4.isNullOrUndefined(hdrActEle)) {\n\t                hdrActEle.classList.remove(CLS_ACTIVE);\n\t                var no = this.extIndex(hdrActEle.id);\n\t                var trg = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t            }\n\t        };\n\t        Tab.prototype.checkPopupOverflow = function (ele) {\n\t            this.tbPop = ej2_base_2.select('.' + CLS_TB_POP, this.element);\n\t            var popIcon = ej2_base_2.select('.e-hor-nav', this.element);\n\t            var tbrItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            if ((this.enableRtl && ((popIcon.offsetLeft + popIcon.offsetWidth) > tbrItems.offsetLeft))\n\t                || (!this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth)) {\n\t                ele.classList.add(CLS_TB_POPUP);\n\t                this.tbPop.insertBefore(ele.cloneNode(true), ej2_base_4.selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n\t                ele.outerHTML = '';\n\t            }\n\t            return true;\n\t        };\n\t        Tab.prototype.popupHandler = function (target) {\n\t            var ripEle = target.querySelector('.e-ripple-element');\n\t            if (!ej2_base_4.isNullOrUndefined(ripEle)) {\n\t                ripEle.outerHTML = '';\n\t                target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n\t            }\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n\t            var lastChild = this.tbItem[this.tbItem.length - 1];\n\t            if (this.tbItem.length !== 0) {\n\t                target.classList.remove(CLS_TB_POPUP);\n\t                this.tbItems.appendChild(target.cloneNode(true));\n\t                this.actEleId = target.id;\n\t                target.outerHTML = '';\n\t                if (this.checkPopupOverflow(lastChild)) {\n\t                    var prevEle = this.tbItems.lastChild.previousElementSibling;\n\t                    this.checkPopupOverflow(prevEle);\n\t                }\n\t                this.isPopup = true;\n\t            }\n\t            return ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n\t        };\n\t        Tab.prototype.setCloseButton = function (val) {\n\t            var trg = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            (val === true) ? trg.classList.add(CLS_CLOSE_SHOW) : trg.classList.remove(CLS_CLOSE_SHOW);\n\t            this.tbObj.refreshOverflow();\n\t            this.refreshActElePosition();\n\t        };\n\t        Tab.prototype.prevCtnAnimation = function (prev, current) {\n\t            var animation;\n\t            var checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL);\n\t            if (this.isPopup || prev <= current) {\n\t                if (this.animation.previous.effect === 'SlideLeftIn') {\n\t                    animation = { name: 'SlideLeftOut',\n\t                        duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing };\n\t                }\n\t                else {\n\t                    animation = null;\n\t                }\n\t            }\n\t            else {\n\t                if (this.animation.next.effect === 'SlideRightIn') {\n\t                    animation = { name: 'SlideRightOut',\n\t                        duration: this.animation.next.duration, timingFunction: this.animation.next.easing };\n\t                }\n\t                else {\n\t                    animation = null;\n\t                }\n\t            }\n\t            return animation;\n\t        };\n\t        Tab.prototype.triggerPrevAnimation = function (oldCnt, prevIndex) {\n\t            var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n\t            if (!ej2_base_4.isNullOrUndefined(animateObj)) {\n\t                animateObj.begin = function () {\n\t                    ej2_base_4.setStyleAttribute(oldCnt, { 'position': 'absolute' });\n\t                    oldCnt.classList.add('e-view');\n\t                };\n\t                animateObj.end = function () {\n\t                    oldCnt.style.display = 'none';\n\t                    oldCnt.classList.remove(CLS_ACTIVE);\n\t                    oldCnt.classList.remove('e-view');\n\t                    ej2_base_4.setStyleAttribute(oldCnt, { 'display': '', 'position': '' });\n\t                };\n\t                new ej2_base_5.Animation(animateObj).animate(oldCnt);\n\t            }\n\t        };\n\t        Tab.prototype.triggerAnimation = function (id, value) {\n\t            var _this = this;\n\t            var prevIndex = this.prevIndex;\n\t            var oldCnt = ej2_base_2.select('#' + this.prevActiveEle, this.element);\n\t            var prevEle = this.tbItem[prevIndex];\n\t            var no = this.extIndex(this.tbItem[this.selectedItem].id);\n\t            var newCnt;\n\t            newCnt = this.findEle(this.cntEle.children, CLS_CONTENT + '_' + no);\n\t            if (ej2_base_4.isNullOrUndefined(oldCnt) && !ej2_base_4.isNullOrUndefined(prevEle)) {\n\t                var idNo = this.extIndex(prevEle.id);\n\t                oldCnt = this.findEle(this.cntEle.children, CLS_CONTENT + '_' + idNo);\n\t            }\n\t            if (this.initRender || value === false || this.animation === {} || ej2_base_4.isNullOrUndefined(this.animation)) {\n\t                if (oldCnt && oldCnt !== newCnt) {\n\t                    oldCnt.classList.remove(CLS_ACTIVE);\n\t                }\n\t                return;\n\t            }\n\t            var cnt = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t            var animateObj;\n\t            if (this.prevIndex > this.selectedItem && !this.isPopup) {\n\t                var openEff = this.animation.previous.effect;\n\t                animateObj = {\n\t                    name: ((openEff === 'None') ? '' : ((openEff !== 'SlideLeftIn') ? openEff : 'SlideLeftIn')),\n\t                    duration: this.animation.previous.duration,\n\t                    timingFunction: this.animation.previous.easing\n\t                };\n\t            }\n\t            else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n\t                var clsEff = this.animation.next.effect;\n\t                animateObj = {\n\t                    name: ((clsEff === 'None') ? '' : ((clsEff !== 'SlideRightIn') ? clsEff : 'SlideRightIn')),\n\t                    duration: this.animation.next.duration,\n\t                    timingFunction: this.animation.next.easing\n\t                };\n\t            }\n\t            animateObj.progress = function () {\n\t                cnt.classList.add(CLS_PROGRESS);\n\t                _this.setActiveBorder();\n\t            };\n\t            animateObj.end = function () {\n\t                cnt.classList.remove(CLS_PROGRESS);\n\t                newCnt.classList.add(CLS_ACTIVE);\n\t            };\n\t            if (!this.initRender) {\n\t                this.triggerPrevAnimation(oldCnt, prevIndex);\n\t            }\n\t            this.prevActiveEle = newCnt.id;\n\t            this.isPopup = false;\n\t            new ej2_base_5.Animation(animateObj).animate(newCnt);\n\t        };\n\t        Tab.prototype.keyPressed = function (trg) {\n\t            var trgParent = ej2_base_1.closest(trg, '.' + CLS_TB_ITEM);\n\t            var trgIndex = this.getEleIndex(trgParent);\n\t            if (!ej2_base_4.isNullOrUndefined(this.popEle) && trg.classList.contains('e-hor-nav')) {\n\t                (this.popEle.classList.contains(CLS_POPUP_OPEN)) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n\t            }\n\t            else if (trg.classList.contains('e-scroll-nav')) {\n\t                trg.click();\n\t            }\n\t            else {\n\t                if (!ej2_base_4.isNullOrUndefined(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {\n\t                    this.select(trgIndex);\n\t                    if (!ej2_base_4.isNullOrUndefined(this.popEle)) {\n\t                        this.popObj.hide(this.hide);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.getEleIndex = function (item) {\n\t            return Array.prototype.indexOf.call(ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element), item);\n\t        };\n\t        Tab.prototype.extIndex = function (id) {\n\t            return id.replace(CLS_ITEM + '_', '');\n\t        };\n\t        Tab.prototype.getContent = function (ele, index) {\n\t            var templateFn;\n\t            var content;\n\t            var tempEle = ej2_base_4.createElement('div');\n\t            var cnt = this.items[Number(index)].content;\n\t            var cntHTML = (typeof cnt !== 'object') ? cnt : cnt.outerHTML;\n\t            templateFn = ej2_base_5.compile(cntHTML);\n\t            if (!ej2_base_4.isNullOrUndefined(templateFn) && templateFn().length > 0) {\n\t                [].slice.call(templateFn()).forEach(function (el) {\n\t                    tempEle.appendChild(el);\n\t                });\n\t                ele.appendChild(tempEle);\n\t            }\n\t            else {\n\t                ele.innerHTML = cntHTML;\n\t            }\n\t        };\n\t        Tab.prototype.findEle = function (items, key) {\n\t            var ele;\n\t            for (var i = 0; i < items.length; i++) {\n\t                if (items[i].id === key) {\n\t                    ele = items[i];\n\t                    break;\n\t                }\n\t            }\n\t            return ele;\n\t        };\n\t        Tab.prototype.setOrientation = function (place, ele) {\n\t            (place === 'Bottom') ? this.element.appendChild(ele) : this.element.insertBefore(ele, ej2_base_2.select('.' + CLS_CONTENT, this.element));\n\t        };\n\t        Tab.prototype.setCssClass = function (ele, cls, val) {\n\t            if (cls === '') {\n\t                return;\n\t            }\n\t            var list = cls.split(' ');\n\t            for (var i = 0; i < list.length; i++) {\n\t                if (val) {\n\t                    ele.classList.add(list[i]);\n\t                }\n\t                else {\n\t                    ele.classList.remove(list[i]);\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.setContentHeight = function (val) {\n\t            if (ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                return;\n\t            }\n\t            var height;\n\t            var hdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t            if (this.heightAdjustMode === 'None') {\n\t                if (this.height === 'auto') {\n\t                    return;\n\t                }\n\t                else {\n\t                    ej2_base_4.setStyleAttribute(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\n\t                }\n\t            }\n\t            else if (this.heightAdjustMode === 'Fill') {\n\t                ej2_base_4.setStyleAttribute(this.element, { 'height': '100%' });\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': 'auto' });\n\t            }\n\t            else if (this.heightAdjustMode === 'Auto') {\n\t                var cnt = ej2_base_4.selectAll('.' + CLS_CONTENT + ' > .' + CLS_ITEM, this.element);\n\t                if (this.isTemplate === true) {\n\t                    for (var i = 0; i < cnt.length; i++) {\n\t                        cnt[i].setAttribute('style', 'display:block; visibility: visible');\n\t                        this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n\t                        cnt[i].style.removeProperty('display');\n\t                        cnt[i].style.removeProperty('visibility');\n\t                    }\n\t                }\n\t                else {\n\t                    this.cntEle = ej2_base_2.select('.' + CLS_CONTENT, this.element);\n\t                    if (val === true) {\n\t                        this.cntEle.appendChild(ej2_base_4.createElement('div', {\n\t                            id: (CLS_CONTENT + '_' + 0), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n\t                            attrs: { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + 0 }\n\t                        }));\n\t                    }\n\t                    var ele = this.cntEle.children.item(0);\n\t                    for (var i = 0; i < this.items.length; i++) {\n\t                        this.getContent(ele, i);\n\t                        this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n\t                        ele.innerHTML = '';\n\t                    }\n\t                    this.getContent(ele, 0);\n\t                    ele.classList.remove(CLS_ACTIVE);\n\t                }\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': this.maxHeight + 'px' });\n\t            }\n\t            else {\n\t                ej2_base_4.setStyleAttribute(this.cntEle, { 'height': 'auto' });\n\t            }\n\t        };\n\t        Tab.prototype.getHeight = function (ele) {\n\t            var cs = window.getComputedStyle(ele);\n\t            return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) +\n\t                parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n\t        };\n\t        Tab.prototype.setActiveBorder = function () {\n\t            var trg = ej2_base_2.select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, this.element);\n\t            if (trg === null) {\n\t                return;\n\t            }\n\t            var hsCnt = ej2_base_2.select('.' + CLS_TB_ITEMS + ' .e-hscroll-content', this.element);\n\t            this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            var bar = ej2_base_2.select('.' + CLS_INDICATOR, this.element);\n\t            var tbWidth = (ej2_base_4.isNullOrUndefined(hsCnt)) ? this.tbItems.offsetWidth : hsCnt.offsetWidth;\n\t            ej2_base_4.setStyleAttribute(bar, { 'left': trg.offsetLeft + 'px', 'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px' });\n\t            this.bdrLine.classList.remove(CLS_HIDDEN);\n\t        };\n\t        Tab.prototype.setActive = function (value) {\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element);\n\t            var trg = this.tbItem[value];\n\t            if (value >= 0) {\n\t                this.setProperties({ selectedItem: value }, true);\n\t            }\n\t            if (value < 0 || isNaN(value) || this.tbItem.length === 0 || trg.classList.contains(CLS_ACTIVE)) {\n\t                return;\n\t            }\n\t            if (!this.isTemplate) {\n\t                var prev = this.tbItem[this.prevIndex];\n\t                if (!ej2_base_4.isNullOrUndefined(prev)) {\n\t                    prev.removeAttribute('aria-controls');\n\t                }\n\t                ej2_base_1.attributes(trg, { 'aria-controls': CLS_CONTENT + '_' + value });\n\t            }\n\t            var id = trg.id;\n\t            this.removeActiveClass(id);\n\t            trg.classList.add(CLS_ACTIVE);\n\t            trg.setAttribute('aria-selected', 'true');\n\t            var no = Number(this.extIndex(id));\n\t            ej2_base_1.attributes(this.element, { 'aria-activedescendant': id });\n\t            if (this.isTemplate) {\n\t                if (ej2_base_2.select('.' + CLS_CONTENT, this.element).children.length > 0) {\n\t                    var trg_1 = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t                    if (!ej2_base_4.isNullOrUndefined(trg_1)) {\n\t                        trg_1.classList.add(CLS_ACTIVE);\n\t                    }\n\t                    this.triggerAnimation(id, this.enableAnimation);\n\t                }\n\t            }\n\t            else {\n\t                var item = ej2_base_2.select('.' + CLS_CONTENT + ' > #' + CLS_CONTENT + '_' + this.extIndex(id), this.element);\n\t                if (ej2_base_4.isNullOrUndefined(item)) {\n\t                    this.cntEle.appendChild(ej2_base_4.createElement('div', {\n\t                        id: CLS_CONTENT + '_' + this.extIndex(id), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n\t                        attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + this.extIndex(id) }\n\t                    }));\n\t                    var eleTrg = ej2_base_2.select('.' + CLS_CONTENT + ' > #' + CLS_CONTENT + '_' + this.extIndex(id), this.element);\n\t                    this.getContent(eleTrg, Number(this.extIndex(id)));\n\t                }\n\t                else {\n\t                    item.classList.add(CLS_ACTIVE);\n\t                }\n\t                this.triggerAnimation(id, this.enableAnimation);\n\t            }\n\t            this.setActiveBorder();\n\t            var curActItem = ej2_base_2.select('.' + CLS_HEADER + ' #' + id, this.element);\n\t            this.refreshItemVisibility(curActItem);\n\t            curActItem.firstChild.focus();\n\t            var eventArg = {\n\t                previousItem: this.prevItem,\n\t                previousIndex: this.prevIndex,\n\t                selectedItem: trg,\n\t                selectedIndex: value\n\t            };\n\t            this.trigger('selected', eventArg);\n\t        };\n\t        Tab.prototype.setItems = function (items) {\n\t            this.isReplace = true;\n\t            this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            this.tbObj.items = this.parseObject(items);\n\t            this.tbObj.dataBind();\n\t            this.isReplace = false;\n\t        };\n\t        Tab.prototype.setRTL = function (value) {\n\t            this.tbObj.enableRtl = value;\n\t            this.tbObj.dataBind();\n\t            this.setCssClass(this.element, CLS_RTL, value);\n\t            this.refreshActiveBorder();\n\t        };\n\t        Tab.prototype.refreshActiveBorder = function () {\n\t            if (!ej2_base_4.isNullOrUndefined(this.bdrLine)) {\n\t                this.bdrLine.classList.add(CLS_HIDDEN);\n\t            }\n\t            this.setActiveBorder();\n\t        };\n\t        Tab.prototype.wireEvents = function () {\n\t            window.addEventListener('resize', this.refreshActElePosition.bind(this));\n\t            ej2_base_5.EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n\t            if (!ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                this.touchModule = new ej2_base_5.Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n\t            }\n\t            this.keyModule = new ej2_base_3.KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });\n\t            this.tabKeyModule = new ej2_base_3.KeyboardEvents(this.element, {\n\t                keyAction: this.keyHandler.bind(this),\n\t                keyConfigs: { openPopup: 'shift+f10', tab: 'tab', shiftTab: 'shift+tab' },\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Tab.prototype.unWireEvents = function () {\n\t            this.keyModule.destroy();\n\t            this.tabKeyModule.destroy();\n\t            if (!ej2_base_4.isNullOrUndefined(this.cntEle)) {\n\t                this.touchModule.destroy();\n\t            }\n\t            window.removeEventListener('resize', this.refreshActElePosition.bind(this));\n\t            this.element.removeEventListener('mouseover', this.hoverHandler.bind(this));\n\t        };\n\t        Tab.prototype.clickHandler = function (args) {\n\t            this.element.classList.remove(CLS_FOCUS);\n\t            var trg = args.originalEvent.target;\n\t            var trgParent = ej2_base_1.closest(trg, '.' + CLS_TB_ITEM);\n\t            var trgIndex = this.getEleIndex(trgParent);\n\t            if (trg.classList.contains(CLS_ICON_CLOSE)) {\n\t                this.removeTab(trgIndex);\n\t            }\n\t            else {\n\t                this.isPopup = false;\n\t                if (!ej2_base_4.isNullOrUndefined(trgParent) && trgIndex !== this.selectedItem) {\n\t                    this.select(trgIndex);\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.swipeHandler = function (e) {\n\t            if (e.velocity < 3 && ej2_base_4.isNullOrUndefined(e.originalEvent.changedTouches)) {\n\t                return;\n\t            }\n\t            if (e.swipeDirection === 'Right') {\n\t                this.select(this.selectedItem - 1);\n\t            }\n\t            else {\n\t                if (e.swipeDirection === 'Left' && (this.selectedItem !== ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length - 1)) {\n\t                    this.select(this.selectedItem + 1);\n\t                }\n\t            }\n\t        };\n\t        Tab.prototype.spaceKeyDown = function (e) {\n\t            if ((e.keyCode === 32 && e.which === 32) || (e.keyCode === 35 && e.which === 35)) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Tab.prototype.keyHandler = function (e) {\n\t            this.element.classList.add(CLS_FOCUS);\n\t            var trg = e.target;\n\t            var actEle = ej2_base_2.select('.' + CLS_HEADER + ' .' + CLS_ACTIVE, this.element);\n\t            var tabItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element);\n\t            this.popEle = ej2_base_2.select('.' + CLS_TB_POP, this.element);\n\t            if (!ej2_base_4.isNullOrUndefined(this.popEle)) {\n\t                this.popObj = this.popEle.ej2_instances[0];\n\t            }\n\t            switch (e.action) {\n\t                case 'space':\n\t                case 'enter':\n\t                    if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n\t                        break;\n\t                    }\n\t                    this.keyPressed(trg);\n\t                    break;\n\t                case 'tab':\n\t                case 'shiftTab':\n\t                    if (trg.classList.contains(CLS_WRAP)\n\t                        && ej2_base_1.closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {\n\t                        trg.setAttribute('tabindex', '-1');\n\t                    }\n\t                    if (this.popObj && ej2_base_2.isVisible(this.popObj.element)) {\n\t                        this.popObj.hide(this.hide);\n\t                    }\n\t                    actEle.children.item(0).setAttribute('tabindex', '0');\n\t                    break;\n\t                case 'moveLeft':\n\t                case 'moveRight':\n\t                    var item = ej2_base_1.closest(document.activeElement, '.' + CLS_TB_ITEM);\n\t                    if (!ej2_base_4.isNullOrUndefined(item)) {\n\t                        this.refreshItemVisibility(item);\n\t                    }\n\t                    break;\n\t                case 'openPopup':\n\t                    e.preventDefault();\n\t                    if (!ej2_base_4.isNullOrUndefined(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n\t                        this.popObj.show(this.show);\n\t                    }\n\t                    break;\n\t                case 'delete':\n\t                    var trgParent = ej2_base_1.closest(trg, '.' + CLS_TB_ITEM);\n\t                    if (this.showCloseButton === true && !ej2_base_4.isNullOrUndefined(trgParent)) {\n\t                        var nxtSib = trgParent.nextSibling;\n\t                        if (!ej2_base_4.isNullOrUndefined(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n\t                            nxtSib.firstChild.focus();\n\t                        }\n\t                        this.removeTab(this.getEleIndex(trgParent));\n\t                    }\n\t                    this.setActiveBorder();\n\t                    break;\n\t            }\n\t        };\n\t        Tab.prototype.refreshActElePosition = function () {\n\t            var activeEle = ej2_base_2.select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE, this.element);\n\t            if (!ej2_base_4.isNullOrUndefined(activeEle)) {\n\t                this.select(this.getEleIndex(activeEle));\n\t            }\n\t            this.refreshActiveBorder();\n\t        };\n\t        Tab.prototype.refreshItemVisibility = function (target) {\n\t            var scrCnt = ej2_base_2.select('.e-hscroll-content', this.tbItems);\n\t            if (!ej2_base_4.isNullOrUndefined(scrCnt)) {\n\t                var scrBar = ej2_base_2.select('.e-hscroll-bar', this.tbItems);\n\t                var scrStart = scrBar.scrollLeft;\n\t                var scrEnd = scrStart + scrBar.offsetWidth;\n\t                var eleStart = target.offsetLeft;\n\t                var eleWidth = target.offsetWidth;\n\t                var eleEnd = target.offsetLeft + target.offsetWidth;\n\t                if ((scrStart < eleStart) && (scrEnd < eleEnd)) {\n\t                    var eleViewRange = scrEnd - eleStart;\n\t                    scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n\t                }\n\t                else {\n\t                    if ((scrStart > eleStart) && (scrEnd > eleEnd)) {\n\t                        var eleViewRange = eleEnd - scrStart;\n\t                        scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                return;\n\t            }\n\t        };\n\t        Tab.prototype.hoverHandler = function (e) {\n\t            var trg = e.target;\n\t            if (trg.classList.contains(CLS_ICON_CLOSE)) {\n\t                trg.setAttribute('title', new ej2_base_3.L10n('tab', { title: this.title }, this.locale).getConstant('title'));\n\t            }\n\t        };\n\t        Tab.prototype.enableTab = function (index, value) {\n\t            var tbItems = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            if (ej2_base_4.isNullOrUndefined(tbItems)) {\n\t                return;\n\t            }\n\t            if (value === true) {\n\t                tbItems.classList.remove(CLS_DISABLE);\n\t            }\n\t            else {\n\t                tbItems.classList.add(CLS_DISABLE);\n\t                if (tbItems.classList.contains(CLS_ACTIVE)) {\n\t                    this.select(index + 1);\n\t                }\n\t            }\n\t            tbItems.setAttribute('aria-disabled', (value === true) ? 'false' : 'true');\n\t        };\n\t        Tab.prototype.addTab = function (items, index) {\n\t            var _this = this;\n\t            this.trigger('adding', { addedItems: items });\n\t            if (ej2_base_4.isNullOrUndefined(index)) {\n\t                index = ej2_base_4.selectAll('.' + CLS_TB_ITEM).length - 1;\n\t            }\n\t            if (this.isTemplate === true || ej2_base_4.selectAll('.' + CLS_TB_ITEM).length - 1 < index || index < 0 || isNaN(index)) {\n\t                return;\n\t            }\n\t            this.bdrLine.classList.add(CLS_HIDDEN);\n\t            this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            var tabItems = this.parseObject(items);\n\t            items.forEach(function (item) {\n\t                _this.items.push(item);\n\t            });\n\t            this.tbObj.addItems(tabItems, index);\n\t            this.trigger('added', { addedItems: items });\n\t            if (this.selectedItem === index) {\n\t                this.select(index);\n\t            }\n\t            else {\n\t                this.setActiveBorder();\n\t            }\n\t        };\n\t        Tab.prototype.removeTab = function (index) {\n\t            var trg = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            var removingArgs = { removedItem: trg, removedIndex: index };\n\t            this.trigger('removing', removingArgs);\n\t            if (ej2_base_4.isNullOrUndefined(trg)) {\n\t                return;\n\t            }\n\t            this.tbObj.removeItems(index);\n\t            this.refreshActiveBorder();\n\t            var no = this.extIndex(trg.id);\n\t            var cntTrg = this.findEle(ej2_base_2.select('.e-content', this.element).children, CLS_CONTENT + '_' + no);\n\t            if (!ej2_base_4.isNullOrUndefined(cntTrg)) {\n\t                cntTrg.outerHTML = '';\n\t            }\n\t            var removedArgs = { removedItem: trg, removedIndex: index };\n\t            this.trigger('removed', removedArgs);\n\t            if (trg.classList.contains(CLS_ACTIVE)) {\n\t                index = (index > ej2_base_4.selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element).length - 1) ? index - 1 : index;\n\t                this.enableAnimation = false;\n\t                this.select(index);\n\t            }\n\t            if (ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element).length === 0) {\n\t                this.hdrEle.style.display = 'none';\n\t            }\n\t            this.enableAnimation = true;\n\t        };\n\t        Tab.prototype.hideTab = function (index, value) {\n\t            var item = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\t            if (ej2_base_4.isNullOrUndefined(item)) {\n\t                return;\n\t            }\n\t            if (ej2_base_4.isNullOrUndefined(value)) {\n\t                value = true;\n\t            }\n\t            this.bdrLine.classList.add(CLS_HIDDEN);\n\t            if (value === true) {\n\t                item.classList.add(CLS_HIDDEN);\n\t                if (item.classList.contains(CLS_ACTIVE)) {\n\t                    this.select((index !== 0) ? index - 1 : index + 1);\n\t                }\n\t            }\n\t            else {\n\t                item.classList.remove(CLS_HIDDEN);\n\t            }\n\t            this.setActiveBorder();\n\t            item.setAttribute('aria-hidden', '' + value);\n\t        };\n\t        Tab.prototype.select = function (args) {\n\t            this.tbItems = ej2_base_2.select('.' + CLS_TB_ITEMS, this.element);\n\t            this.tbItem = ej2_base_4.selectAll('.' + CLS_TB_ITEM, this.element);\n\t            this.prevItem = this.tbItem[this.prevIndex];\n\t            if (!ej2_base_4.isNullOrUndefined(this.prevItem)) {\n\t                this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n\t            }\n\t            var eventArg = {\n\t                previousItem: this.prevItem,\n\t                previousIndex: this.prevIndex,\n\t                selectedItem: this.tbItem[this.selectedItem],\n\t                selectedIndex: this.selectedItem\n\t            };\n\t            this.trigger('selecting', eventArg);\n\t            if (typeof args === 'number') {\n\t                if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n\t                    this.prevIndex = this.selectedItem;\n\t                    if (this.tbItem[args].classList.contains(CLS_TB_POPUP)) {\n\t                        this.setActive(this.popupHandler(this.tbItem[args]));\n\t                    }\n\t                    else {\n\t                        this.setActive(args);\n\t                    }\n\t                }\n\t                else {\n\t                    this.setActive(0);\n\t                }\n\t            }\n\t            else if (args instanceof (HTMLElement)) {\n\t                this.setActive(this.getEleIndex(args));\n\t            }\n\t        };\n\t        Tab.prototype.disable = function (value) {\n\t            this.setCssClass(this.element, CLS_DISABLE, value);\n\t            this.element.setAttribute('aria-disabled', '' + value);\n\t        };\n\t        Tab.prototype.getPersistData = function () {\n\t            return this.addOnPersist(['selectedItem', 'actEleId']);\n\t        };\n\t        Tab.prototype.getModuleName = function () {\n\t            return 'tab';\n\t        };\n\t        Tab.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'width':\n\t                        ej2_base_4.setStyleAttribute(this.element, { width: ej2_base_3.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_4.setStyleAttribute(this.element, { height: ej2_base_3.formatUnit(newProp.height) });\n\t                        this.setContentHeight(false);\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCssClass(this.element, newProp.cssClass, true);\n\t                        break;\n\t                    case 'items':\n\t                        this.setItems(newProp.items);\n\t                        this.select(this.selectedItem);\n\t                        break;\n\t                    case 'showCloseButton':\n\t                        this.setCloseButton(newProp.showCloseButton);\n\t                        break;\n\t                    case 'selectedItem':\n\t                        this.select(newProp.selectedItem);\n\t                        break;\n\t                    case 'headerPlacement':\n\t                        var tempHdrEle = ej2_base_2.select('.' + CLS_HEADER, this.element);\n\t                        this.setOrientation(newProp.headerPlacement, tempHdrEle);\n\t                        this.select(this.selectedItem);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setRTL(newProp.enableRtl);\n\t                        break;\n\t                    case 'overflowMode':\n\t                        this.tbObj.overflowMode = newProp.overflowMode;\n\t                        this.tbObj.dataBind();\n\t                        this.refreshActElePosition();\n\t                        break;\n\t                    case 'heightAdjustMode':\n\t                        this.setContentHeight(false);\n\t                        this.select(this.selectedItem);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        return Tab;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Collection([], TabItem)\n\t    ], Tab.prototype, \"items\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Tab.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Tab.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Tab.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Tab.prototype, \"selectedItem\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Top')\n\t    ], Tab.prototype, \"headerPlacement\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Content')\n\t    ], Tab.prototype, \"heightAdjustMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Scrollable')\n\t    ], Tab.prototype, \"overflowMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tab.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tab.prototype, \"showCloseButton\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, TabAnimationSettings)\n\t    ], Tab.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"adding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"added\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"selecting\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"selected\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"removing\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"removed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tab.prototype, \"destroyed\", void 0);\n\t    Tab = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], Tab);\n\t    exports.Tab = Tab;\n\t    exports.tabBuilder = ej2_base_1.CreateBuilder(Tab);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, treeview_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(treeview_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(17), __webpack_require__(3), __webpack_require__(12), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_base_6, ej2_data_1, ej2_base_7, ej2_lists_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ROOT = 'e-treeview';\n\t    var COLLAPSIBLE = 'e-icon-collapsible';\n\t    var EXPANDABLE = 'e-icon-expandable';\n\t    var LISTITEM = 'e-list-item';\n\t    var LISTTEXT = 'e-list-text';\n\t    var PARENTITEM = 'e-list-parent';\n\t    var HOVER = 'e-hover';\n\t    var ACTIVE = 'e-active';\n\t    var LOAD = 'e-load';\n\t    var PROCESS = 'e-process';\n\t    var ICON = 'e-icons';\n\t    var TEXTWRAP = 'e-text-content';\n\t    var INPUT = 'e-tree-input';\n\t    var EDITING = 'e-editing';\n\t    var RTL = 'e-rtl';\n\t    var DRAGITEM = 'e-drag-item';\n\t    var DROPPABLE = 'e-droppable';\n\t    var DRAGGING = 'e-dragging';\n\t    var SIBLING = 'e-sibling';\n\t    var DROPIN = 'e-drop-in';\n\t    var DROPNEXT = 'e-drop-next';\n\t    var DROPOUT = 'e-drop-out';\n\t    var NODROP = 'e-no-drop';\n\t    var FULLROWWRAP = 'e-fullrow-wrap';\n\t    var FULLROW = 'e-fullrow';\n\t    var POPUP = 'e-popup';\n\t    var SELECTED = 'e-selected';\n\t    var EXPANDED = 'e-expanded';\n\t    var NODECOLLAPSED = 'e-node-collapsed';\n\t    var DISABLE = 'e-disable';\n\t    var POPUPSELECT = 'e-select';\n\t    var CONTENT = 'e-content';\n\t    var DOWNTAIL = 'e-downtail';\n\t    var DROPCOUNT = 'e-drop-count';\n\t    var CHECK = 'e-check';\n\t    var INDETERMINATE = 'e-stop';\n\t    var CHECKBOXWRAP = 'e-checkbox-wrapper';\n\t    var CHECKBOXFRAME = 'e-frame';\n\t    var FOCUS = 'e-node-focus';\n\t    var treeAriaAttr = {\n\t        treeRole: 'tree',\n\t        itemRole: 'treeitem',\n\t        listRole: 'group',\n\t        itemText: '',\n\t    };\n\t    var FieldsSettings = (function (_super) {\n\t        __extends(FieldsSettings, _super);\n\t        function FieldsSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FieldsSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Property('child')\n\t    ], FieldsSettings.prototype, \"child\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property([])\n\t    ], FieldsSettings.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('expanded')\n\t    ], FieldsSettings.prototype, \"expanded\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('hasChildren')\n\t    ], FieldsSettings.prototype, \"hasChildren\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('htmlAttributes')\n\t    ], FieldsSettings.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('iconCss')\n\t    ], FieldsSettings.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('id')\n\t    ], FieldsSettings.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('imageUrl')\n\t    ], FieldsSettings.prototype, \"imageUrl\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('isChecked')\n\t    ], FieldsSettings.prototype, \"isChecked\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('parentID')\n\t    ], FieldsSettings.prototype, \"parentID\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(null)\n\t    ], FieldsSettings.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('selected')\n\t    ], FieldsSettings.prototype, \"selected\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(null)\n\t    ], FieldsSettings.prototype, \"tableName\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('text')\n\t    ], FieldsSettings.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('tooltip')\n\t    ], FieldsSettings.prototype, \"tooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('navigateUrl')\n\t    ], FieldsSettings.prototype, \"navigateUrl\", void 0);\n\t    exports.FieldsSettings = FieldsSettings;\n\t    var ActionSettings = (function (_super) {\n\t        __extends(ActionSettings, _super);\n\t        function ActionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ActionSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Property('SlideDown')\n\t    ], ActionSettings.prototype, \"effect\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(400)\n\t    ], ActionSettings.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('linear')\n\t    ], ActionSettings.prototype, \"easing\", void 0);\n\t    exports.ActionSettings = ActionSettings;\n\t    var NodeAnimationSettings = (function (_super) {\n\t        __extends(NodeAnimationSettings, _super);\n\t        function NodeAnimationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return NodeAnimationSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_2.Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, ActionSettings)\n\t    ], NodeAnimationSettings.prototype, \"collapse\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, ActionSettings)\n\t    ], NodeAnimationSettings.prototype, \"expand\", void 0);\n\t    exports.NodeAnimationSettings = NodeAnimationSettings;\n\t    var TreeView = (function (_super) {\n\t        __extends(TreeView, _super);\n\t        function TreeView(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.checkActionNodes = [];\n\t            _this.dragStartAction = false;\n\t            _this.keyConfigs = {\n\t                escape: 'escape',\n\t                end: 'end',\n\t                enter: 'enter',\n\t                f2: 'f2',\n\t                home: 'home',\n\t                moveDown: 'downarrow',\n\t                moveLeft: 'leftarrow',\n\t                moveRight: 'rightarrow',\n\t                moveUp: 'uparrow',\n\t                ctrlDown: 'ctrl+downarrow',\n\t                ctrlUp: 'ctrl+uparrow',\n\t                ctrlEnter: 'ctrl+enter',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                ctrlA: 'ctrl+A',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftEnter: 'shift+enter',\n\t                shiftHome: 'shift+home',\n\t                shiftEnd: 'shift+end',\n\t                csDown: 'ctrl+shift+downarrow',\n\t                csUp: 'ctrl+shift+uparrow',\n\t                csEnter: 'ctrl+shift+enter',\n\t                csHome: 'ctrl+shift+home',\n\t                csEnd: 'ctrl+shift+end',\n\t                space: 'space',\n\t            };\n\t            _this.mouseDownStatus = false;\n\t            return _this;\n\t        }\n\t        TreeView.prototype.getModuleName = function () {\n\t            return 'treeview';\n\t        };\n\t        TreeView.prototype.preRender = function () {\n\t            var _this = this;\n\t            this.listBaseOption = {\n\t                expandCollapse: true,\n\t                fields: this.fields.properties,\n\t                showIcon: true,\n\t                expandIconClass: EXPANDABLE,\n\t                ariaAttributes: treeAriaAttr,\n\t                expandIconPosition: 'left',\n\t                itemCreated: function (e) {\n\t                    _this.beforeNodeCreate(e);\n\t                },\n\t            };\n\t            this.listBaseOption.fields.url = this.fields.navigateUrl;\n\t            this.aniObj = new ej2_base_4.Animation({});\n\t            this.treeList = [];\n\t            this.isLoaded = false;\n\t            if (ej2_base_7.isNullOrUndefined(this.selectedNodes)) {\n\t                this.setProperties({ selectedNodes: [] }, true);\n\t            }\n\t            if (ej2_base_7.isNullOrUndefined(this.checkedNodes)) {\n\t                this.setProperties({ checkedNodes: [] }, true);\n\t            }\n\t        };\n\t        TreeView.prototype.getPersistData = function () {\n\t            var keyEntity = ['selectedNodes', 'checkedNodes'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        TreeView.prototype.render = function () {\n\t            this.initialize();\n\t            this.setDataBinding();\n\t            this.setExpandOnType();\n\t            this.setRipple();\n\t            this.wireEditingEvents(this.allowEditing);\n\t            this.setDragAndDrop(this.allowDragAndDrop);\n\t            this.wireEvents();\n\t        };\n\t        TreeView.prototype.initialize = function () {\n\t            this.element.setAttribute('tabindex', '0');\n\t            this.element.setAttribute('role', treeAriaAttr.treeRole);\n\t            this.setCssClass(null, this.cssClass);\n\t            this.setEnableRtl();\n\t            this.setFullRow(this.fullRowSelect);\n\t            this.setTouchPopup(this.allowMultiSelection);\n\t            this.setMultiSelect(this.allowMultiSelection);\n\t            this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n\t        };\n\t        TreeView.prototype.setEnableRtl = function () {\n\t            this.enableRtl ? ej2_base_6.addClass([this.element], RTL) : ej2_base_6.removeClass([this.element], RTL);\n\t        };\n\t        TreeView.prototype.setRipple = function () {\n\t            var tempStr = '.' + FULLROW + ',.' + TEXTWRAP;\n\t            var rippleModel = {\n\t                selector: tempStr,\n\t                ignore: '.' + TEXTWRAP + ' > .' + ICON + ',.' + INPUT + ', .' + CHECKBOXWRAP\n\t            };\n\t            this.rippleFn = ej2_base_4.rippleEffect(this.element, rippleModel);\n\t            var iconModel = {\n\t                selector: '.' + TEXTWRAP + ' > .' + ICON,\n\t                isCenterRipple: true,\n\t            };\n\t            this.rippleIconFn = ej2_base_4.rippleEffect(this.element, iconModel);\n\t        };\n\t        TreeView.prototype.setFullRow = function (isEnabled) {\n\t            isEnabled ? ej2_base_6.addClass([this.element], FULLROWWRAP) : ej2_base_6.removeClass([this.element], FULLROWWRAP);\n\t        };\n\t        TreeView.prototype.setTouchPopup = function (isEnabled) {\n\t            if (isEnabled) {\n\t                var popup = ej2_base_6.createElement('div', { className: POPUP, styles: 'display:none;' });\n\t                var content = ej2_base_6.createElement('div', { className: CONTENT, attrs: { tabIndex: '-1' } });\n\t                var icon = ej2_base_6.createElement('span', { className: ICON });\n\t                content.appendChild(icon);\n\t                ej2_base_6.append([content, ej2_base_6.createElement('div', { className: DOWNTAIL })], popup);\n\t                this.element.appendChild(popup);\n\t                ej2_base_3.EventHandler.add(content, 'click', this.popupClick, this);\n\t            }\n\t            else {\n\t                var popup = ej2_base_6.select('.' + POPUP, this.element);\n\t                if (popup) {\n\t                    ej2_base_6.detach(popup);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.setMultiSelect = function (isEnabled) {\n\t            if (isEnabled) {\n\t                this.element.setAttribute('aria-multiselectable', 'true');\n\t            }\n\t            else {\n\t                this.element.removeAttribute('aria-multiselectable');\n\t            }\n\t        };\n\t        TreeView.prototype.popupClick = function (e) {\n\t            e.stopImmediatePropagation();\n\t            var target = e.currentTarget;\n\t            target = ej2_base_6.closest(target, '.' + POPUP);\n\t            if (target.classList.contains(POPUPSELECT)) {\n\t                ej2_base_6.removeClass([target], POPUPSELECT);\n\t                ej2_base_6.select('.' + POPUP, this.element).style.display = 'none';\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([target], POPUPSELECT);\n\t            }\n\t        };\n\t        TreeView.prototype.templateComplier = function (template) {\n\t            if (template) {\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(template).length) {\n\t                        return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    return ej2_base_1.compile(template);\n\t                }\n\t            }\n\t            return undefined;\n\t        };\n\t        TreeView.prototype.setDataBinding = function () {\n\t            var _this = this;\n\t            this.treeList.push('false');\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function (e) {\n\t                    _this.treeList.pop();\n\t                    _this.treeData = e.result;\n\t                    _this.isNumberTypeId = _this.treeData[0] ? ((typeof _this.treeData[0][_this.fields.id] === 'number') ? true : false) : false;\n\t                    _this.setRootData();\n\t                    _this.renderItems(true);\n\t                    if (_this.treeList.length === 0 && !_this.isLoaded) {\n\t                        _this.finalize();\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                this.treeList.pop();\n\t                if (ej2_base_7.isNullOrUndefined(this.fields.dataSource)) {\n\t                    this.rootData = this.treeData = [];\n\t                }\n\t                else {\n\t                    this.treeData = this.fields.dataSource;\n\t                    this.setRootData();\n\t                }\n\t                this.renderItems(false);\n\t            }\n\t            if (this.treeList.length === 0 && !this.isLoaded) {\n\t                this.finalize();\n\t            }\n\t        };\n\t        TreeView.prototype.getQuery = function (mapper, value) {\n\t            if (value === void 0) { value = null; }\n\t            var columns = [];\n\t            var query;\n\t            if (!mapper.query) {\n\t                query = new ej2_data_1.Query();\n\t                var prop = this.getActualProperties(mapper);\n\t                for (var _i = 0, _a = Object.keys(prop); _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (col !== 'dataSource' && col !== 'tableName' && col !== 'child' && !!mapper[col]\n\t                        && columns.indexOf(mapper[col]) === -1) {\n\t                        columns.push(mapper[col]);\n\t                    }\n\t                }\n\t                query.select(columns);\n\t                if (prop.hasOwnProperty('tableName')) {\n\t                    query.from(mapper.tableName);\n\t                }\n\t            }\n\t            else {\n\t                query = mapper.query.clone();\n\t            }\n\t            ej2_lists_1.ListBase.addSorting(this.sortOrder, mapper.text, query);\n\t            if (!ej2_base_7.isNullOrUndefined(value) && !ej2_base_7.isNullOrUndefined(mapper.parentID)) {\n\t                query.where(mapper.parentID, 'equal', (this.isNumberTypeId ? parseFloat(value) : value));\n\t            }\n\t            return query;\n\t        };\n\t        TreeView.prototype.setRootData = function () {\n\t            this.dataType = this.getDataType(this.treeData, this.fields);\n\t            if (this.dataType === 1) {\n\t                this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n\t                var rootItems = this.getChildNodes(this.treeData, undefined, true);\n\t                if (ej2_base_7.isNullOrUndefined(rootItems)) {\n\t                    this.rootData = [];\n\t                }\n\t                else {\n\t                    this.rootData = rootItems;\n\t                }\n\t            }\n\t            else {\n\t                this.rootData = this.treeData;\n\t            }\n\t        };\n\t        TreeView.prototype.renderItems = function (isSorted) {\n\t            this.listBaseOption.ariaAttributes.level = 1;\n\t            this.ulElement = ej2_lists_1.ListBase.createList(isSorted ? this.rootData : this.getSortedData(this.rootData), this.listBaseOption);\n\t            this.element.appendChild(this.ulElement);\n\t            this.finalizeNode(this.element);\n\t        };\n\t        TreeView.prototype.beforeNodeCreate = function (e) {\n\t            if (this.showCheckBox) {\n\t                var checkboxEle = ej2_buttons_1.createCheckBox();\n\t                var icon = ej2_base_6.select('div.' + ICON, e.item);\n\t                var id = e.item.getAttribute('data-uid');\n\t                e.item.childNodes[0].insertBefore(checkboxEle, e.item.childNodes[0].childNodes[ej2_base_7.isNullOrUndefined(icon) ? 0 : 1]);\n\t                if (this.checkedNodes.indexOf(id) > -1) {\n\t                    ej2_base_6.select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n\t                    checkboxEle.setAttribute('aria-checked', 'true');\n\t                    this.addCheck(e.item);\n\t                }\n\t                else if (!ej2_base_7.isNullOrUndefined(e.curData[e.fields.isChecked]) && e.curData[e.fields.isChecked].toString() === 'true') {\n\t                    ej2_base_6.select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n\t                    checkboxEle.setAttribute('aria-checked', 'true');\n\t                    this.addCheck(e.item);\n\t                }\n\t                else {\n\t                    checkboxEle.setAttribute('aria-checked', 'false');\n\t                }\n\t            }\n\t            if (this.fullRowSelect) {\n\t                this.createFullRow(e.item);\n\t            }\n\t            if (this.allowMultiSelection && !e.item.classList.contains(SELECTED)) {\n\t                e.item.setAttribute('aria-selected', 'false');\n\t            }\n\t            var fields = e.fields;\n\t            this.addActionClass(e, fields.selected, SELECTED);\n\t            this.addActionClass(e, fields.expanded, EXPANDED);\n\t            if (!ej2_base_7.isNullOrUndefined(this.nodeTemplateFn)) {\n\t                var textEle = e.item.querySelector('.' + LISTTEXT);\n\t                textEle.innerHTML = '';\n\t                ej2_base_6.append(this.nodeTemplateFn(e.curData), textEle);\n\t            }\n\t            var eventArgs = {\n\t                node: e.item,\n\t                nodeData: e.curData,\n\t                text: e.text,\n\t            };\n\t            this.trigger('drawNode', eventArgs);\n\t        };\n\t        TreeView.prototype.addActionClass = function (e, action, cssClass) {\n\t            var data = e.curData;\n\t            if (data.hasOwnProperty(action) && !ej2_base_7.isNullOrUndefined(data[action]) && data[action].toString() !== 'false') {\n\t                e.item.classList.add(cssClass);\n\t            }\n\t        };\n\t        TreeView.prototype.getDataType = function (ds, mapper) {\n\t            for (var i = 0, len = ds.length; i < len; i++) {\n\t                if ((typeof mapper.child === 'string') && ds[i].hasOwnProperty(mapper.child)) {\n\t                    return 2;\n\t                }\n\t                if (ds[i].hasOwnProperty(mapper.parentID) || ds[i].hasOwnProperty(mapper.hasChildren)) {\n\t                    return 1;\n\t                }\n\t            }\n\t            return 1;\n\t        };\n\t        TreeView.prototype.getGroupedData = function (dataSource, groupBy) {\n\t            var cusQuery = new ej2_data_1.Query().group(groupBy);\n\t            var ds = ej2_lists_1.ListBase.getDataSource(dataSource, cusQuery);\n\t            var grpItem = [];\n\t            for (var j = 0; j < ds.length; j++) {\n\t                var itemObj = ds[j].items;\n\t                grpItem.push(itemObj);\n\t            }\n\t            return grpItem;\n\t        };\n\t        TreeView.prototype.getSortedData = function (list) {\n\t            if (list && this.sortOrder !== 'None') {\n\t                list = ej2_lists_1.ListBase.getDataSource(list, ej2_lists_1.ListBase.addSorting(this.sortOrder, this.fields.text));\n\t            }\n\t            return list;\n\t        };\n\t        TreeView.prototype.finalizeNode = function (element) {\n\t            var _this = this;\n\t            if (this.isLoaded) {\n\t                var sNodes = ej2_base_6.selectAll('.' + SELECTED, element);\n\t                for (var i = 0; i < sNodes.length; i++) {\n\t                    this.selectNode(sNodes[i], null);\n\t                    break;\n\t                }\n\t                ej2_base_6.removeClass(sNodes, SELECTED);\n\t            }\n\t            var cNodes = ej2_base_6.selectAll('.' + LISTITEM + ':not(.' + EXPANDED + ')', element);\n\t            for (var j = 0; j < cNodes.length; j++) {\n\t                var icon = ej2_base_6.select('div.' + ICON, cNodes[j]);\n\t                if (icon && icon.classList.contains(EXPANDABLE)) {\n\t                    cNodes[j].setAttribute('aria-expanded', 'false');\n\t                    ej2_base_6.addClass([cNodes[j]], NODECOLLAPSED);\n\t                }\n\t            }\n\t            var eNodes = ej2_base_6.selectAll('.' + EXPANDED, element);\n\t            for (var i = 0; i < eNodes.length; i++) {\n\t                this.renderChildNodes(eNodes[i]);\n\t            }\n\t            ej2_base_6.removeClass(eNodes, EXPANDED);\n\t            this.updateList();\n\t            if (this.showCheckBox) {\n\t                var nodes_1 = [].concat([], this.checkedNodes);\n\t                this.checkedNodes.forEach(function (value, index) {\n\t                    var checkBox = _this.element.querySelector('[data-uid=\"' + value + '\"]');\n\t                    if (ej2_base_7.isNullOrUndefined(checkBox)) {\n\t                        nodes_1 = nodes_1.filter(function (e) { return e !== value; });\n\t                    }\n\t                });\n\t                this.setProperties({ checkedNodes: nodes_1 }, true);\n\t            }\n\t        };\n\t        TreeView.prototype.ensureParentCheckState = function (element) {\n\t            if (!ej2_base_7.isNullOrUndefined(element)) {\n\t                if (element.classList.contains(ROOT)) {\n\t                    return;\n\t                }\n\t                var ulElement = element;\n\t                if (element.classList.contains(LISTITEM)) {\n\t                    ulElement = ej2_base_6.select('.' + PARENTITEM, element);\n\t                }\n\t                var checkedNodes = ej2_base_6.selectAll('.' + CHECK, ulElement);\n\t                var nodes = ej2_base_6.selectAll('.' + LISTITEM, ulElement);\n\t                var checkBoxEle = element.getElementsByClassName(CHECKBOXWRAP)[0];\n\t                if (nodes.length === checkedNodes.length) {\n\t                    this.changeState(checkBoxEle, 'check', null, true, true);\n\t                }\n\t                else if (checkedNodes.length > 0) {\n\t                    this.changeState(checkBoxEle, 'indeterminate', null, true, true);\n\t                }\n\t                else if (checkedNodes.length === 0) {\n\t                    this.changeState(checkBoxEle, 'uncheck', null, true, true);\n\t                }\n\t                var parentUL = ej2_base_6.closest(element, '.' + PARENTITEM);\n\t                if (!ej2_base_7.isNullOrUndefined(parentUL)) {\n\t                    var currentParent = ej2_base_6.closest(parentUL, '.' + LISTITEM);\n\t                    this.ensureParentCheckState(currentParent);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.ensureChildCheckState = function (element, e) {\n\t            if (!ej2_base_7.isNullOrUndefined(element)) {\n\t                var childElement = ej2_base_6.select('.' + PARENTITEM, element);\n\t                var checkBoxes = void 0;\n\t                if (!ej2_base_7.isNullOrUndefined(childElement)) {\n\t                    checkBoxes = ej2_base_6.selectAll('.' + CHECKBOXWRAP, childElement);\n\t                    var isChecked = element.getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n\t                    var checkedState = void 0;\n\t                    for (var index = 0; index < checkBoxes.length; index++) {\n\t                        if (!ej2_base_7.isNullOrUndefined(this.currentLoadData) && !ej2_base_7.isNullOrUndefined(this.currentLoadData[index][this.fields.isChecked])) {\n\t                            checkedState = this.currentLoadData[index][this.fields.isChecked] ? 'check' : 'uncheck';\n\t                        }\n\t                        else {\n\t                            checkedState = isChecked ? 'check' : 'uncheck';\n\t                        }\n\t                        this.changeState(checkBoxes[index], checkedState, e, true, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.doCheckBoxAction = function (nodes, doCheck) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                for (var i = 0, len = nodes.length; i < len; i++) {\n\t                    var liEle = this.getElement(nodes[i]);\n\t                    if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                        continue;\n\t                    }\n\t                    var checkBox = ej2_base_6.select('.' + PARENTITEM + ' .' + CHECKBOXWRAP, liEle);\n\t                    this.validateCheckNode(checkBox, !doCheck, liEle, null);\n\t                }\n\t            }\n\t            else {\n\t                var checkBoxes = ej2_base_6.selectAll('.' + CHECKBOXWRAP, this.element);\n\t                for (var index = 0; index < checkBoxes.length; index++) {\n\t                    this.changeState(checkBoxes[index], doCheck ? 'check' : 'uncheck');\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.changeState = function (wrapper, state, e, isPrevent, isAdd) {\n\t            var ariaState;\n\t            var eventArgs;\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            if (!isPrevent) {\n\t                this.checkActionNodes = [];\n\t                eventArgs = this.getCheckEvent(currLi, state, e);\n\t                this.trigger('nodeChecking', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n\t            if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n\t                frameSpan.classList.remove(INDETERMINATE);\n\t                frameSpan.classList.add(CHECK);\n\t                this.addCheck(currLi);\n\t                ariaState = 'true';\n\t            }\n\t            else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {\n\t                ej2_base_6.removeClass([frameSpan], [CHECK, INDETERMINATE]);\n\t                this.removeCheck(currLi);\n\t                ariaState = 'false';\n\t            }\n\t            else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n\t                frameSpan.classList.remove(CHECK);\n\t                frameSpan.classList.add(INDETERMINATE);\n\t                this.removeCheck(currLi);\n\t                ariaState = 'mixed';\n\t            }\n\t            ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n\t            if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                wrapper.setAttribute('aria-checked', ariaState);\n\t            }\n\t            if (isAdd) {\n\t                var data = [].concat([], this.checkActionNodes);\n\t                eventArgs = this.getCheckEvent(currLi, state, e);\n\t                if (ej2_base_1.isUndefined(isPrevent)) {\n\t                    eventArgs.data = data;\n\t                }\n\t            }\n\t            if (!isPrevent) {\n\t                if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                    wrapper.setAttribute('aria-checked', ariaState);\n\t                    eventArgs.data[0].checked = ariaState;\n\t                    this.trigger('nodeChecked', eventArgs);\n\t                    this.checkActionNodes = [];\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.addCheck = function (liEle) {\n\t            var id = liEle.getAttribute('data-uid');\n\t            if (!ej2_base_7.isNullOrUndefined(id) && this.checkedNodes.indexOf(id) === -1) {\n\t                this.checkedNodes.push(id);\n\t            }\n\t        };\n\t        TreeView.prototype.removeCheck = function (liEle) {\n\t            var index = this.checkedNodes.indexOf(liEle.getAttribute('data-uid'));\n\t            if (index > -1) {\n\t                this.checkedNodes.splice(index, 1);\n\t            }\n\t        };\n\t        TreeView.prototype.getCheckEvent = function (currLi, action, e) {\n\t            this.checkActionNodes.push(this.getNodeData(currLi));\n\t            var nodeData = this.checkActionNodes;\n\t            return { action: action, cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, data: nodeData };\n\t        };\n\t        TreeView.prototype.finalize = function () {\n\t            var firstNode = ej2_base_6.select('.' + LISTITEM, this.element);\n\t            if (firstNode) {\n\t                ej2_base_6.addClass([firstNode], FOCUS);\n\t            }\n\t            this.doSelectionAction();\n\t            this.isLoaded = true;\n\t            var eventArgs = { data: this.treeData };\n\t            this.trigger('dataBound', eventArgs);\n\t        };\n\t        TreeView.prototype.doSelectionAction = function () {\n\t            var sNodes = ej2_base_6.selectAll('.' + SELECTED, this.element);\n\t            var sUids = this.selectedNodes;\n\t            if (sUids.length > 0) {\n\t                this.setProperties({ selectedNodes: [] }, true);\n\t                for (var i = 0; i < sUids.length; i++) {\n\t                    var sNode = ej2_base_6.select('[data-uid=\"' + sUids[i] + '\"]', this.element);\n\t                    this.selectNode(sNode, null, true);\n\t                    if (!this.allowMultiSelection) {\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.selectGivenNodes(sNodes);\n\t            }\n\t            ej2_base_6.removeClass(sNodes, SELECTED);\n\t        };\n\t        TreeView.prototype.selectGivenNodes = function (sNodes) {\n\t            for (var i = 0; i < sNodes.length; i++) {\n\t                this.selectNode(sNodes[i], null, true);\n\t                if (!this.allowMultiSelection) {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            ej2_base_3.EventHandler.remove(this.element, 'contextmenu ', this.preventContextMenu);\n\t            if (!target || this.dragStartAction) {\n\t                return;\n\t            }\n\t            else {\n\t                var classList = target.classList;\n\t                var li = ej2_base_6.closest(target, '.' + LISTITEM);\n\t                if (!li) {\n\t                    return;\n\t                }\n\t                else {\n\t                    this.removeHover();\n\t                    this.setFocusElement(li);\n\t                    if (this.showCheckBox) {\n\t                        var checkWrapper = ej2_base_6.closest(target, '.' + CHECKBOXWRAP);\n\t                        if (!ej2_base_7.isNullOrUndefined(checkWrapper)) {\n\t                            var checkElement = ej2_base_6.select('.' + CHECKBOXFRAME, checkWrapper);\n\t                            this.validateCheckNode(checkWrapper, checkElement.classList.contains(CHECK), li, e);\n\t                            this.triggerClickEvent(e, li);\n\t                            return;\n\t                        }\n\t                    }\n\t                    if (classList.contains(EXPANDABLE)) {\n\t                        this.expandAction(li, target, e);\n\t                    }\n\t                    else if (classList.contains(COLLAPSIBLE)) {\n\t                        this.collapseNode(li, target, e);\n\t                    }\n\t                    else {\n\t                        if (!classList.contains(PARENTITEM) && !classList.contains(LISTITEM)) {\n\t                            var multiSelect = false;\n\t                            if (ej2_base_1.Browser.isDevice && this.allowMultiSelection) {\n\t                                var popup = ej2_base_6.select('.' + POPUP, this.element);\n\t                                if (!ej2_base_6.isVisible(popup)) {\n\t                                    popup.style.display = '';\n\t                                }\n\t                                var txtWrap = ej2_base_6.closest(target, '.' + TEXTWRAP);\n\t                                txtWrap = !txtWrap ? e.target : txtWrap;\n\t                                var pos = txtWrap.getBoundingClientRect();\n\t                                var posLeft = (e.clientX - pos.left) + txtWrap.offsetLeft - (popup.offsetWidth / 2);\n\t                                var posTop = txtWrap.offsetTop - popup.offsetHeight - 10;\n\t                                popup.style.left = (posLeft < 0 ? 0 : posLeft) + 'px';\n\t                                popup.style.top = (posTop < 0 ? 0 : posTop) + 'px';\n\t                                if (popup.classList.contains(POPUPSELECT)) {\n\t                                    multiSelect = true;\n\t                                }\n\t                            }\n\t                            this.toggleSelect(li, e, multiSelect);\n\t                        }\n\t                    }\n\t                    this.triggerClickEvent(e, li);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.nodeCheckingEvent = function (wrapper, isCheck, e) {\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            this.checkActionNodes = [];\n\t            var ariaState = !isCheck ? 'true' : 'false';\n\t            if (!ej2_base_7.isNullOrUndefined(ariaState)) {\n\t                wrapper.setAttribute('aria-checked', ariaState);\n\t            }\n\t            var eventArgs = this.getCheckEvent(currLi, !isCheck ? 'uncheck' : 'check', e);\n\t            this.trigger('nodeChecking', eventArgs);\n\t            return eventArgs;\n\t        };\n\t        TreeView.prototype.nodeCheckedEvent = function (wrapper, isCheck, e) {\n\t            var currLi = ej2_base_6.closest(wrapper, '.' + LISTITEM);\n\t            var eventArgs = this.getCheckEvent(wrapper, isCheck ? 'uncheck' : 'check', e);\n\t            eventArgs.data = eventArgs.data.splice(0, eventArgs.data.length - 1);\n\t            this.trigger('nodeChecked', eventArgs);\n\t        };\n\t        TreeView.prototype.triggerClickEvent = function (e, li) {\n\t            var eventArgs = {\n\t                event: e,\n\t                node: li,\n\t            };\n\t            this.trigger('nodeClicked', eventArgs);\n\t        };\n\t        TreeView.prototype.expandNode = function (currLi, icon) {\n\t            var _this = this;\n\t            ej2_base_6.removeClass([icon], LOAD);\n\t            ej2_base_6.removeClass([icon], EXPANDABLE);\n\t            ej2_base_6.addClass([icon], COLLAPSIBLE);\n\t            var start = 0;\n\t            var end = 0;\n\t            var proxy = this;\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            var liEle = currLi;\n\t            this.setHeight(liEle, ul);\n\t            this.aniObj.animate(ul, {\n\t                name: this.animation.expand.effect,\n\t                duration: this.animation.expand.duration,\n\t                timingFunction: this.animation.expand.easing,\n\t                begin: function (args) {\n\t                    liEle.style.overflow = 'hidden';\n\t                    start = liEle.offsetHeight;\n\t                    end = ej2_base_6.select('.' + TEXTWRAP, currLi).offsetHeight;\n\t                },\n\t                progress: function (args) {\n\t                    args.element.style.display = 'block';\n\t                    proxy.animateHeight(args, start, end);\n\t                },\n\t                end: function (args) {\n\t                    args.element.style.display = 'block';\n\t                    liEle.style.overflow = '';\n\t                    liEle.style.height = '';\n\t                    ej2_base_6.removeClass([icon], PROCESS);\n\t                    currLi.setAttribute('aria-expanded', 'true');\n\t                    ej2_base_6.removeClass([currLi], NODECOLLAPSED);\n\t                    if (_this.isLoaded && _this.expandArgs) {\n\t                        _this.trigger('nodeExpanded', _this.expandArgs);\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        TreeView.prototype.collapseNode = function (currLi, icon, e) {\n\t            var _this = this;\n\t            if (icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], PROCESS);\n\t            }\n\t            var colArgs;\n\t            if (this.isLoaded) {\n\t                colArgs = this.getExpandEvent(currLi, e);\n\t                this.trigger('nodeCollapsing', colArgs);\n\t                if (colArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            ej2_base_6.removeClass([icon], COLLAPSIBLE);\n\t            ej2_base_6.addClass([icon], EXPANDABLE);\n\t            var start = 0;\n\t            var end = 0;\n\t            var proxy = this;\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            var liEle = currLi;\n\t            ej2_base_6.addClass([currLi], NODECOLLAPSED);\n\t            this.aniObj.animate(ul, {\n\t                name: this.animation.collapse.effect,\n\t                duration: this.animation.collapse.duration,\n\t                timingFunction: this.animation.collapse.easing,\n\t                begin: function (args) {\n\t                    liEle.style.overflow = 'hidden';\n\t                    start = ej2_base_6.select('.' + TEXTWRAP, currLi).offsetHeight;\n\t                    end = liEle.offsetHeight;\n\t                },\n\t                progress: function (args) {\n\t                    proxy.animateHeight(args, start, end);\n\t                },\n\t                end: function (args) {\n\t                    liEle.style.overflow = '';\n\t                    args.element.style.display = 'none';\n\t                    liEle.style.height = '';\n\t                    ej2_base_6.removeClass([icon], PROCESS);\n\t                    currLi.setAttribute('aria-expanded', 'false');\n\t                    if (_this.isLoaded) {\n\t                        _this.trigger('nodeCollapsed', colArgs);\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        TreeView.prototype.setHeight = function (currLi, ul) {\n\t            ul.style.display = 'block';\n\t            ul.style.visibility = 'hidden';\n\t            currLi.style.height = currLi.offsetHeight + 'px';\n\t            ul.style.display = 'none';\n\t            ul.style.visibility = '';\n\t        };\n\t        TreeView.prototype.animateHeight = function (args, start, end) {\n\t            var remaining = (args.duration - args.timeStamp) / args.duration;\n\t            var currentHeight = (end - start) * remaining + start;\n\t            args.element.parentElement.style.height = currentHeight + 'px';\n\t        };\n\t        TreeView.prototype.renderChildNodes = function (parentLi, expandChild) {\n\t            var _this = this;\n\t            var eicon = ej2_base_6.select('div.' + ICON, parentLi);\n\t            if (ej2_base_7.isNullOrUndefined(eicon)) {\n\t                return;\n\t            }\n\t            ej2_base_6.addClass([eicon], LOAD);\n\t            var childItems;\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                var level = this.parents(parentLi, '.' + PARENTITEM).length;\n\t                var mapper_1 = this.getChildFields(this.fields, level, 1);\n\t                if (ej2_base_7.isNullOrUndefined(mapper_1) || ej2_base_7.isNullOrUndefined(mapper_1.dataSource)) {\n\t                    ej2_base_6.detach(eicon);\n\t                    parentLi.removeAttribute('aria-expanded');\n\t                    return;\n\t                }\n\t                this.treeList.push('false');\n\t                mapper_1.dataSource.executeQuery(this.getQuery(mapper_1, parentLi.getAttribute('data-uid'))).then(function (e) {\n\t                    _this.treeList.pop();\n\t                    childItems = e.result;\n\t                    _this.currentLoadData = childItems;\n\t                    if (ej2_base_7.isNullOrUndefined(childItems) || childItems.length === 0) {\n\t                        ej2_base_6.detach(eicon);\n\t                        parentLi.removeAttribute('aria-expanded');\n\t                    }\n\t                    else {\n\t                        var prop = _this.getActualProperties(mapper_1);\n\t                        _this.listBaseOption.fields = prop;\n\t                        _this.listBaseOption.fields.url = prop.navigateUrl;\n\t                        _this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n\t                        parentLi.appendChild(ej2_lists_1.ListBase.createList(childItems, _this.listBaseOption));\n\t                        _this.expandNode(parentLi, eicon);\n\t                        _this.ensureCheckNode(parentLi);\n\t                        _this.finalizeNode(parentLi);\n\t                        _this.renderSubChild(parentLi, expandChild);\n\t                    }\n\t                    if (_this.treeList.length === 0 && !_this.isLoaded) {\n\t                        _this.finalize();\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                childItems = this.getChildNodes(this.treeData, parentLi.getAttribute('data-uid'));\n\t                this.currentLoadData = childItems;\n\t                if (ej2_base_7.isNullOrUndefined(childItems) || childItems.length === 0) {\n\t                    ej2_base_6.detach(eicon);\n\t                    parentLi.removeAttribute('aria-expanded');\n\t                    return;\n\t                }\n\t                else {\n\t                    this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n\t                    parentLi.appendChild(ej2_lists_1.ListBase.createList(this.getSortedData(childItems), this.listBaseOption));\n\t                    this.expandNode(parentLi, eicon);\n\t                    this.ensureCheckNode(parentLi);\n\t                    this.finalizeNode(parentLi);\n\t                    this.renderSubChild(parentLi, expandChild);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.ensureCheckNode = function (element) {\n\t            if (this.showCheckBox) {\n\t                this.ensureChildCheckState(element);\n\t                this.ensureParentCheckState(element);\n\t            }\n\t            this.currentLoadData = null;\n\t        };\n\t        TreeView.prototype.getChildFields = function (mapper, nodeLevel, dataLevel) {\n\t            var childData;\n\t            if (nodeLevel === dataLevel) {\n\t                return this.getChildMapper(mapper);\n\t            }\n\t            else {\n\t                return this.getChildFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n\t            }\n\t        };\n\t        TreeView.prototype.getChildMapper = function (mapper) {\n\t            return (typeof mapper.child === 'string' || ej2_base_7.isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n\t        };\n\t        TreeView.prototype.getChildNodes = function (obj, parentId, isRoot) {\n\t            if (isRoot === void 0) { isRoot = false; }\n\t            var childNodes;\n\t            if (ej2_base_7.isNullOrUndefined(obj)) {\n\t                return childNodes;\n\t            }\n\t            else if (this.dataType === 1) {\n\t                return this.getChildGroup(this.groupedData, parentId, isRoot);\n\t            }\n\t            else {\n\t                if (typeof this.fields.child === 'string') {\n\t                    for (var i = 0, objlen = obj.length; i < objlen; i++) {\n\t                        if (obj[i][this.fields.id] && obj[i][this.fields.id].toString() === parentId) {\n\t                            return obj[i][this.fields.child];\n\t                        }\n\t                        else if (obj[i].hasOwnProperty(this.fields.child)) {\n\t                            childNodes = this.getChildNodes(obj[i][this.fields.child], parentId);\n\t                            if (childNodes !== undefined) {\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return childNodes;\n\t        };\n\t        TreeView.prototype.getChildGroup = function (data, parentId, isRoot) {\n\t            var childNodes;\n\t            if (ej2_base_7.isNullOrUndefined(data)) {\n\t                return childNodes;\n\t            }\n\t            for (var i = 0, objlen = data.length; i < objlen; i++) {\n\t                if (!ej2_base_7.isNullOrUndefined(data[i][0]) && !ej2_base_7.isNullOrUndefined(data[i][0][this.fields.parentID])) {\n\t                    if (data[i][0][this.fields.parentID].toString() === parentId) {\n\t                        return data[i];\n\t                    }\n\t                }\n\t                else if (isRoot) {\n\t                    return data[i];\n\t                }\n\t                else {\n\t                    return [];\n\t                }\n\t            }\n\t            return childNodes;\n\t        };\n\t        TreeView.prototype.renderSubChild = function (element, expandChild) {\n\t            if (expandChild) {\n\t                var cIcons = ej2_base_6.selectAll('.' + EXPANDABLE, element);\n\t                for (var i = 0, len = cIcons.length; i < len; i++) {\n\t                    var icon = cIcons[i];\n\t                    var curLi = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                    this.renderChildNodes(curLi, expandChild);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.toggleSelect = function (li, e, multiSelect) {\n\t            if (this.allowMultiSelection && ((e && e.ctrlKey) || multiSelect) && this.isActive(li)) {\n\t                this.unselectNode(li, e);\n\t            }\n\t            else {\n\t                this.selectNode(li, e, multiSelect);\n\t            }\n\t        };\n\t        TreeView.prototype.isActive = function (li) {\n\t            return li.classList.contains(ACTIVE) ? true : false;\n\t        };\n\t        TreeView.prototype.selectNode = function (li, e, multiSelect) {\n\t            if (ej2_base_7.isNullOrUndefined(li) || (!this.allowMultiSelection && this.isActive(li) && !ej2_base_7.isNullOrUndefined(e))) {\n\t                this.setFocusElement(li);\n\t                return;\n\t            }\n\t            var eventArgs;\n\t            if (this.isLoaded) {\n\t                eventArgs = this.getSelectEvent(li, 'select', e);\n\t                this.trigger('nodeSelecting', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            if (!this.allowMultiSelection || (!multiSelect && (!e || (e && !e.ctrlKey)))) {\n\t                this.removeSelectAll();\n\t            }\n\t            if (this.allowMultiSelection && e && e.shiftKey) {\n\t                if (!this.startNode) {\n\t                    this.startNode = li;\n\t                }\n\t                var startIndex = this.liList.indexOf(this.startNode);\n\t                var endIndex = this.liList.indexOf(li);\n\t                if (startIndex > endIndex) {\n\t                    var temp = startIndex;\n\t                    startIndex = endIndex;\n\t                    endIndex = temp;\n\t                }\n\t                for (var i = startIndex; i <= endIndex; i++) {\n\t                    var currNode = this.liList[i];\n\t                    if (ej2_base_6.isVisible(currNode)) {\n\t                        this.addSelect(currNode);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.startNode = li;\n\t                this.addSelect(li);\n\t            }\n\t            this.setFocusElement(li);\n\t            if (this.isLoaded) {\n\t                this.trigger('nodeSelected', eventArgs);\n\t            }\n\t        };\n\t        TreeView.prototype.unselectNode = function (li, e) {\n\t            var eventArgs;\n\t            if (this.isLoaded) {\n\t                eventArgs = this.getSelectEvent(li, 'un-select', e);\n\t                this.trigger('nodeSelecting', eventArgs);\n\t                if (eventArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            this.removeSelect(li);\n\t            this.setFocusElement(li);\n\t            if (this.isLoaded) {\n\t                this.trigger('nodeSelected', eventArgs);\n\t            }\n\t        };\n\t        TreeView.prototype.setFocusElement = function (li) {\n\t            if (!ej2_base_7.isNullOrUndefined(li)) {\n\t                var focusedNode = this.getFocusedNode();\n\t                if (focusedNode) {\n\t                    ej2_base_6.removeClass([focusedNode], FOCUS);\n\t                }\n\t                ej2_base_6.addClass([li], FOCUS);\n\t            }\n\t        };\n\t        TreeView.prototype.addSelect = function (liEle) {\n\t            liEle.setAttribute('aria-selected', 'true');\n\t            ej2_base_6.addClass([liEle], ACTIVE);\n\t            var id = liEle.getAttribute('data-uid');\n\t            if (!ej2_base_7.isNullOrUndefined(id) && this.selectedNodes.indexOf(id) === -1) {\n\t                this.selectedNodes.push(id);\n\t            }\n\t        };\n\t        TreeView.prototype.removeSelect = function (liEle) {\n\t            if (this.allowMultiSelection) {\n\t                liEle.setAttribute('aria-selected', 'false');\n\t            }\n\t            else {\n\t                liEle.removeAttribute('aria-selected');\n\t            }\n\t            ej2_base_6.removeClass([liEle], ACTIVE);\n\t            var index = this.selectedNodes.indexOf(liEle.getAttribute('data-uid'));\n\t            if (index > -1) {\n\t                this.selectedNodes.splice(index, 1);\n\t            }\n\t        };\n\t        TreeView.prototype.removeSelectAll = function () {\n\t            var selectedLI = this.element.querySelectorAll('.' + ACTIVE);\n\t            for (var _i = 0, selectedLI_1 = selectedLI; _i < selectedLI_1.length; _i++) {\n\t                var ele = selectedLI_1[_i];\n\t                if (this.allowMultiSelection) {\n\t                    ele.setAttribute('aria-selected', 'false');\n\t                }\n\t                else {\n\t                    ele.removeAttribute('aria-selected');\n\t                }\n\t            }\n\t            ej2_base_6.removeClass(selectedLI, ACTIVE);\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t        };\n\t        TreeView.prototype.getSelectEvent = function (currLi, action, e) {\n\t            var nodeData = this.getNodeData(currLi);\n\t            return { action: action, cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, nodeData: nodeData };\n\t        };\n\t        TreeView.prototype.setExpandOnType = function () {\n\t            this.expandOnType = (this.expandOn === 'auto') ? (ej2_base_1.Browser.isDevice ? 'click' : 'dblclick') : this.expandOn;\n\t        };\n\t        TreeView.prototype.expandHandler = function (e) {\n\t            var target = e.target;\n\t            if (!target || (this.allowEditing && e.type === 'dblclick') || target.classList.contains(ROOT) ||\n\t                target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) ||\n\t                target.classList.contains(ICON) || this.showCheckBox && ej2_base_6.closest(target, '.' + CHECKBOXWRAP)) {\n\t                return;\n\t            }\n\t            else {\n\t                this.expandCollapseAction(ej2_base_6.closest(target, '.' + LISTITEM), e);\n\t            }\n\t        };\n\t        TreeView.prototype.expandCollapseAction = function (currLi, e) {\n\t            var icon = ej2_base_6.select('div.' + ICON, currLi);\n\t            if (!icon || icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                var classList = icon.classList;\n\t                if (classList.contains(EXPANDABLE)) {\n\t                    this.expandAction(currLi, icon, e);\n\t                }\n\t                else {\n\t                    this.collapseNode(currLi, icon, e);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.expandAction = function (currLi, icon, e, expandChild) {\n\t            if (icon.classList.contains(PROCESS)) {\n\t                return;\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], PROCESS);\n\t            }\n\t            if (this.isLoaded) {\n\t                this.expandArgs = this.getExpandEvent(currLi, e);\n\t                this.trigger('nodeExpanding', this.expandArgs);\n\t                if (this.expandArgs.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            var ul = ej2_base_6.select('.' + PARENTITEM, currLi);\n\t            if (ul && ul.nodeName === 'UL') {\n\t                this.expandNode(currLi, icon);\n\t            }\n\t            else {\n\t                this.renderChildNodes(currLi, expandChild);\n\t            }\n\t        };\n\t        TreeView.prototype.keyActionHandler = function (e) {\n\t            var target = e.target;\n\t            var focusedNode = this.getFocusedNode();\n\t            if (target && target.classList.contains(INPUT)) {\n\t                var inpEle = target;\n\t                if (e.action === 'enter') {\n\t                    inpEle.blur();\n\t                    this.element.focus();\n\t                    ej2_base_6.addClass([focusedNode], HOVER);\n\t                }\n\t                else if (e.action === 'escape') {\n\t                    inpEle.value = this.oldText;\n\t                    inpEle.blur();\n\t                    this.element.focus();\n\t                    ej2_base_6.addClass([focusedNode], HOVER);\n\t                }\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            var eventArgs = {\n\t                cancel: false,\n\t                event: e,\n\t                node: focusedNode,\n\t            };\n\t            this.trigger('keyPress', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            switch (e.action) {\n\t                case 'space':\n\t                    if (this.showCheckBox) {\n\t                        this.checkNode(e);\n\t                    }\n\t                    break;\n\t                case 'moveRight':\n\t                    this.openNode(this.enableRtl ? false : true, e);\n\t                    break;\n\t                case 'moveLeft':\n\t                    this.openNode(this.enableRtl ? true : false, e);\n\t                    break;\n\t                case 'moveDown':\n\t                case 'ctrlDown':\n\t                case 'shiftDown':\n\t                case 'csDown':\n\t                    this.navigateNode(true);\n\t                    break;\n\t                case 'moveUp':\n\t                case 'ctrlUp':\n\t                case 'shiftUp':\n\t                case 'csUp':\n\t                    this.navigateNode(false);\n\t                    break;\n\t                case 'home':\n\t                case 'shiftHome':\n\t                case 'ctrlHome':\n\t                case 'csHome':\n\t                    this.navigateRootNode(true);\n\t                    break;\n\t                case 'end':\n\t                case 'shiftEnd':\n\t                case 'ctrlEnd':\n\t                case 'csEnd':\n\t                    this.navigateRootNode(false);\n\t                    break;\n\t                case 'enter':\n\t                case 'ctrlEnter':\n\t                case 'shiftEnter':\n\t                case 'csEnter':\n\t                    this.toggleSelect(focusedNode, e);\n\t                    break;\n\t                case 'f2':\n\t                    if (this.allowEditing) {\n\t                        this.createTextbox(focusedNode, e);\n\t                    }\n\t                    break;\n\t                case 'ctrlA':\n\t                    if (this.allowMultiSelection) {\n\t                        var sNodes = ej2_base_6.selectAll('.' + LISTITEM + ':not(.' + ACTIVE + ')', this.element);\n\t                        this.selectGivenNodes(sNodes);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        TreeView.prototype.checkNode = function (e) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var checkWrap = ej2_base_6.select('.' + CHECKBOXWRAP, focusedNode);\n\t            var isChecked = ej2_base_6.select(' .' + CHECKBOXFRAME, checkWrap).classList.contains(CHECK);\n\t            this.validateCheckNode(checkWrap, isChecked, focusedNode, e);\n\t        };\n\t        TreeView.prototype.validateCheckNode = function (checkWrap, isCheck, li, e) {\n\t            var eventArgs = this.nodeCheckingEvent(checkWrap, isCheck, e);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true);\n\t            this.ensureChildCheckState(li);\n\t            this.ensureParentCheckState(ej2_base_6.closest(ej2_base_6.closest(li, '.' + PARENTITEM), '.' + LISTITEM));\n\t            this.nodeCheckedEvent(checkWrap, isCheck, e);\n\t        };\n\t        TreeView.prototype.openNode = function (toBeOpened, e) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var icon = ej2_base_6.select('div.' + ICON, focusedNode);\n\t            if (toBeOpened) {\n\t                if (!icon) {\n\t                    return;\n\t                }\n\t                else if (icon.classList.contains(EXPANDABLE)) {\n\t                    this.expandAction(focusedNode, icon, e);\n\t                }\n\t                else {\n\t                    this.focusNextNode(focusedNode, true);\n\t                }\n\t            }\n\t            else {\n\t                if (icon && icon.classList.contains(COLLAPSIBLE)) {\n\t                    this.collapseNode(focusedNode, icon, e);\n\t                }\n\t                else {\n\t                    var parentLi = ej2_base_6.closest(ej2_base_6.closest(focusedNode, '.' + PARENTITEM), '.' + LISTITEM);\n\t                    if (!parentLi) {\n\t                        return;\n\t                    }\n\t                    else {\n\t                        this.setFocus(focusedNode, parentLi);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.navigateNode = function (isTowards) {\n\t            var focusedNode = this.getFocusedNode();\n\t            this.focusNextNode(focusedNode, isTowards);\n\t        };\n\t        TreeView.prototype.navigateRootNode = function (isBackwards) {\n\t            var focusedNode = this.getFocusedNode();\n\t            var rootNode = isBackwards ? this.getRootNode() : this.getEndNode();\n\t            this.setFocus(focusedNode, rootNode);\n\t        };\n\t        TreeView.prototype.getFocusedNode = function () {\n\t            var fNode = ej2_base_6.select('.' + LISTITEM + '.' + FOCUS, this.element);\n\t            return ej2_base_7.isNullOrUndefined(fNode) ? ej2_base_6.select('.' + LISTITEM, this.element) : fNode;\n\t        };\n\t        TreeView.prototype.focusNextNode = function (li, isTowards) {\n\t            var nextNode = isTowards ? this.getNextNode(li) : this.getPrevNode(li);\n\t            this.setFocus(li, nextNode);\n\t        };\n\t        TreeView.prototype.getNextNode = function (li) {\n\t            var index = this.liList.indexOf(li);\n\t            var nextNode;\n\t            do {\n\t                index++;\n\t                nextNode = this.liList[index];\n\t                if (ej2_base_7.isNullOrUndefined(nextNode)) {\n\t                    return li;\n\t                }\n\t            } while (!ej2_base_6.isVisible(nextNode));\n\t            return nextNode;\n\t        };\n\t        TreeView.prototype.getPrevNode = function (li) {\n\t            var index = this.liList.indexOf(li);\n\t            var prevNode;\n\t            do {\n\t                index--;\n\t                prevNode = this.liList[index];\n\t                if (ej2_base_7.isNullOrUndefined(prevNode)) {\n\t                    return li;\n\t                }\n\t            } while (!ej2_base_6.isVisible(prevNode));\n\t            return prevNode;\n\t        };\n\t        TreeView.prototype.getRootNode = function () {\n\t            var index = 0;\n\t            var rootNode;\n\t            do {\n\t                rootNode = this.liList[index];\n\t                index++;\n\t            } while (!ej2_base_6.isVisible(rootNode));\n\t            return rootNode;\n\t        };\n\t        TreeView.prototype.getEndNode = function () {\n\t            var index = this.liList.length - 1;\n\t            var endNode;\n\t            do {\n\t                endNode = this.liList[index];\n\t                index--;\n\t            } while (!ej2_base_6.isVisible(endNode));\n\t            return endNode;\n\t        };\n\t        TreeView.prototype.setFocus = function (preNode, nextNode) {\n\t            ej2_base_6.removeClass([preNode], [HOVER, FOCUS]);\n\t            ej2_base_6.addClass([nextNode], [HOVER, FOCUS]);\n\t        };\n\t        TreeView.prototype.focusIn = function () {\n\t            if (!this.mouseDownStatus) {\n\t                ej2_base_6.addClass([this.getFocusedNode()], HOVER);\n\t            }\n\t            this.mouseDownStatus = false;\n\t        };\n\t        TreeView.prototype.focusOut = function () {\n\t            ej2_base_6.removeClass([this.getFocusedNode()], HOVER);\n\t        };\n\t        TreeView.prototype.onMouseOver = function (e) {\n\t            var target = e.target;\n\t            var classList = target.classList;\n\t            var currentLi = ej2_base_6.closest(target, '.' + LISTITEM);\n\t            if (!currentLi || classList.contains(PARENTITEM) || classList.contains(LISTITEM)) {\n\t                this.removeHover();\n\t                return;\n\t            }\n\t            else {\n\t                this.setHover(currentLi);\n\t            }\n\t        };\n\t        TreeView.prototype.setHover = function (li) {\n\t            if (!li.classList.contains(HOVER)) {\n\t                this.removeHover();\n\t                ej2_base_6.addClass([li], HOVER);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.onMouseLeave = function (e) {\n\t            this.removeHover();\n\t        };\n\t        TreeView.prototype.removeHover = function () {\n\t            var hoveredNode = ej2_base_6.selectAll('.' + HOVER, this.element);\n\t            if (hoveredNode && hoveredNode.length) {\n\t                ej2_base_6.removeClass(hoveredNode, HOVER);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.getNodeData = function (currLi) {\n\t            if (!ej2_base_7.isNullOrUndefined(currLi) && currLi.classList.contains(LISTITEM)) {\n\t                var id = currLi.getAttribute('data-uid');\n\t                var text = ej2_base_6.select('.' + LISTTEXT, currLi).textContent;\n\t                var pNode = ej2_base_6.closest(currLi.parentNode, '.' + LISTITEM);\n\t                var pid = pNode ? pNode.getAttribute('data-uid') : null;\n\t                var selected = currLi.classList.contains(ACTIVE);\n\t                var expanded = (currLi.getAttribute('aria-expanded') === 'true') ? true : false;\n\t                var checked = null;\n\t                if (this.showCheckBox) {\n\t                    checked = ej2_base_6.select('.' + CHECKBOXWRAP, currLi).getAttribute('aria-checked');\n\t                }\n\t                return { id: id, text: text, parentID: pid, selected: selected, expanded: expanded, checked: checked };\n\t            }\n\t            return { id: '', text: '', parentID: '', selected: '', expanded: '', checked: '' };\n\t        };\n\t        TreeView.prototype.getExpandEvent = function (currLi, e) {\n\t            var nodeData = this.getNodeData(currLi);\n\t            return { cancel: false, isInteracted: ej2_base_7.isNullOrUndefined(e) ? false : true, node: currLi, nodeData: nodeData };\n\t        };\n\t        TreeView.prototype.reRenderNodes = function () {\n\t            this.element.innerHTML = '';\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t            this.isLoaded = false;\n\t            this.setDataBinding();\n\t        };\n\t        TreeView.prototype.setCssClass = function (oldClass, newClass) {\n\t            if (!ej2_base_7.isNullOrUndefined(oldClass) && oldClass !== '') {\n\t                ej2_base_6.removeClass([this.element], oldClass.split(' '));\n\t            }\n\t            if (!ej2_base_7.isNullOrUndefined(newClass) && newClass !== '') {\n\t                ej2_base_6.addClass([this.element], newClass.split(' '));\n\t            }\n\t        };\n\t        TreeView.prototype.editingHandler = function (e) {\n\t            var target = e.target;\n\t            if (!target || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) ||\n\t                target.classList.contains(LISTITEM) || target.classList.contains(ICON) ||\n\t                target.classList.contains(INPUT)) {\n\t                return;\n\t            }\n\t            else {\n\t                e.stopImmediatePropagation();\n\t                var liEle = ej2_base_6.closest(target, '.' + LISTITEM);\n\t                this.createTextbox(liEle, e);\n\t            }\n\t        };\n\t        TreeView.prototype.createTextbox = function (liEle, e) {\n\t            var textEle = ej2_base_6.select('.' + LISTTEXT, liEle);\n\t            this.oldText = textEle.textContent;\n\t            var eventArgs = this.getEditEvent(liEle, null);\n\t            this.trigger('nodeEditing', eventArgs);\n\t            if (eventArgs.cancel) {\n\t                return;\n\t            }\n\t            var style = 'width:' + textEle.offsetWidth + 'px';\n\t            var inpEle = ej2_base_6.createElement('input', { className: INPUT, styles: style, attrs: { value: this.oldText } });\n\t            ej2_base_6.addClass([liEle], EDITING);\n\t            textEle.childNodes[0].nodeValue = '';\n\t            textEle.appendChild(inpEle);\n\t            inpEle.focus();\n\t            var inputEle = inpEle;\n\t            inputEle.setSelectionRange(0, inputEle.value.length);\n\t            this.wireInputEvents(inpEle);\n\t        };\n\t        TreeView.prototype.inputFocusOut = function (e) {\n\t            var target = e.target;\n\t            var newText = target.value;\n\t            var txtEle = ej2_base_6.closest(target, '.' + LISTTEXT);\n\t            var liEle = ej2_base_6.closest(target, '.' + LISTITEM);\n\t            txtEle.childNodes[0].nodeValue = newText;\n\t            ej2_base_6.detach(target);\n\t            ej2_base_6.removeClass([liEle], EDITING);\n\t            txtEle.focus();\n\t            this.trigger('nodeEdited', this.getEditEvent(liEle, newText));\n\t        };\n\t        TreeView.prototype.getElement = function (ele) {\n\t            if (ej2_base_7.isNullOrUndefined(ele)) {\n\t                return null;\n\t            }\n\t            else if (typeof ele === 'string') {\n\t                return this.element.querySelector('[data-uid=\"' + ele + '\"]');\n\t            }\n\t            else if (typeof ele === 'object') {\n\t                return ele;\n\t            }\n\t            else {\n\t                return null;\n\t            }\n\t        };\n\t        TreeView.prototype.getEditEvent = function (liEle, newText) {\n\t            var data = this.getNodeData(liEle);\n\t            return { cancel: false, newText: newText, node: liEle, nodeData: data, oldText: this.oldText };\n\t        };\n\t        TreeView.prototype.setDragAndDrop = function (toBind) {\n\t            if (toBind) {\n\t                this.initializeDrag();\n\t            }\n\t            else {\n\t                this.destroyDrag();\n\t            }\n\t        };\n\t        TreeView.prototype.initializeDrag = function () {\n\t            var _this = this;\n\t            var virtualEle;\n\t            this.dragObj = new ej2_base_5.Draggable(this.element, {\n\t                enableTailMode: true,\n\t                preventDefault: ej2_base_1.Browser.isIos ? true : false,\n\t                cursorAt: { top: -20 },\n\t                dragTarget: '.' + TEXTWRAP,\n\t                helper: function (e) {\n\t                    _this.dragTarget = e.sender.target;\n\t                    var dragRoot = ej2_base_6.closest(_this.dragTarget, '.' + ROOT);\n\t                    var dragWrap = ej2_base_6.closest(_this.dragTarget, '.' + TEXTWRAP);\n\t                    _this.dragLi = ej2_base_6.closest(_this.dragTarget, '.' + LISTITEM);\n\t                    if (_this.fullRowSelect && !dragWrap && _this.dragTarget.classList.contains(FULLROW)) {\n\t                        dragWrap = _this.dragTarget.nextElementSibling;\n\t                    }\n\t                    if (!_this.dragTarget || !e.element.isSameNode(dragRoot) || !dragWrap ||\n\t                        _this.dragTarget.classList.contains(ROOT) || _this.dragTarget.classList.contains(PARENTITEM) ||\n\t                        _this.dragTarget.classList.contains(LISTITEM)) {\n\t                        return false;\n\t                    }\n\t                    var cloneEle = (dragWrap.cloneNode(true));\n\t                    if (ej2_base_7.isNullOrUndefined(ej2_base_6.select('div.' + ICON, cloneEle))) {\n\t                        var icon = ej2_base_6.createElement('div', { className: ICON + ' ' + EXPANDABLE });\n\t                        cloneEle.insertBefore(icon, cloneEle.children[0]);\n\t                    }\n\t                    var cssClass = DRAGITEM + ' ' + ROOT + ' ' + (_this.enableRtl ? RTL : '');\n\t                    virtualEle = ej2_base_6.createElement('div', { className: cssClass });\n\t                    virtualEle.appendChild(cloneEle);\n\t                    var nLen = _this.selectedNodes.length;\n\t                    if (nLen > 1 && _this.allowMultiSelection && _this.dragLi.classList.contains(ACTIVE)) {\n\t                        var cNode = ej2_base_6.createElement('span', { className: DROPCOUNT, innerHTML: '' + nLen });\n\t                        virtualEle.appendChild(cNode);\n\t                    }\n\t                    document.body.appendChild(virtualEle);\n\t                    document.body.style.cursor = '';\n\t                    _this.dragData = _this.getNodeData(_this.dragLi);\n\t                    return virtualEle;\n\t                },\n\t                dragStart: function (e) {\n\t                    ej2_base_6.addClass([_this.element], DRAGGING);\n\t                    var eventArgs = _this.getDragEvent(e.event, _this, null, e.target);\n\t                    _this.trigger('nodeDragStart', eventArgs);\n\t                    if (eventArgs.cancel) {\n\t                        ej2_base_6.detach(virtualEle);\n\t                        ej2_base_6.removeClass([_this.element], DRAGGING);\n\t                    }\n\t                    _this.dragStartAction = true;\n\t                },\n\t                drag: function (e) {\n\t                    _this.dragAction(e, virtualEle);\n\t                },\n\t                dragStop: function (e) {\n\t                    ej2_base_6.removeClass([_this.element], DRAGGING);\n\t                    _this.removeVirtualEle();\n\t                    var dropTarget = e.target;\n\t                    var dropRoot = (ej2_base_6.closest(dropTarget, '.' + DROPPABLE));\n\t                    if (!dropTarget || !dropRoot || dropTarget.classList.contains(ROOT)) {\n\t                        ej2_base_6.detach(e.helper);\n\t                        document.body.style.cursor = '';\n\t                    }\n\t                    var eventArgs = _this.getDragEvent(e.event, _this, dropTarget, dropTarget);\n\t                    _this.trigger('nodeDragStop', eventArgs);\n\t                    if (eventArgs.cancel) {\n\t                        ej2_base_6.detach(e.helper);\n\t                        document.body.style.cursor = '';\n\t                    }\n\t                    _this.dragStartAction = false;\n\t                }\n\t            });\n\t            this.dropObj = new ej2_base_5.Droppable(this.element, {\n\t                out: function (e) {\n\t                    if (!ej2_base_7.isNullOrUndefined(e) && !e.target.classList.contains(SIBLING)) {\n\t                        document.body.style.cursor = 'not-allowed';\n\t                    }\n\t                },\n\t                over: function (e) {\n\t                    document.body.style.cursor = '';\n\t                },\n\t                drop: function (e) {\n\t                    _this.dropAction(e);\n\t                }\n\t            });\n\t        };\n\t        TreeView.prototype.dragAction = function (e, virtualEle) {\n\t            var dropRoot = ej2_base_6.closest(e.target, '.' + DROPPABLE);\n\t            var dropWrap = ej2_base_6.closest(e.target, '.' + TEXTWRAP);\n\t            var icon = ej2_base_6.select('div.' + ICON, virtualEle);\n\t            ej2_base_6.removeClass([icon], [DROPIN, DROPNEXT, DROPOUT, NODROP]);\n\t            this.removeVirtualEle();\n\t            document.body.style.cursor = '';\n\t            var classList = e.target.classList;\n\t            if (this.fullRowSelect && !dropWrap && !ej2_base_7.isNullOrUndefined(classList) && classList.contains(FULLROW)) {\n\t                dropWrap = e.target.nextElementSibling;\n\t            }\n\t            if (dropRoot) {\n\t                var dropLi = ej2_base_6.closest(e.target, '.' + LISTITEM);\n\t                if (!dropRoot.classList.contains(ROOT) || (dropWrap &&\n\t                    (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)))) {\n\t                    if (e && (e.event.offsetY < 7)) {\n\t                        ej2_base_6.addClass([icon], DROPNEXT);\n\t                        var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t                        var index = this.fullRowSelect ? (1) : (0);\n\t                        dropLi.insertBefore(virEle, dropLi.children[index]);\n\t                    }\n\t                    else if (e && (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10))) {\n\t                        ej2_base_6.addClass([icon], DROPNEXT);\n\t                        var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t                        var index = this.fullRowSelect ? (2) : (1);\n\t                        dropLi.insertBefore(virEle, dropLi.children[index]);\n\t                    }\n\t                    else {\n\t                        ej2_base_6.addClass([icon], DROPIN);\n\t                    }\n\t                }\n\t                else if (e.target.nodeName === 'LI' && (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi))) {\n\t                    ej2_base_6.addClass([icon], DROPNEXT);\n\t                    this.renderVirtualEle(e);\n\t                }\n\t                else if (e.target.classList.contains(SIBLING)) {\n\t                    ej2_base_6.addClass([icon], DROPNEXT);\n\t                }\n\t                else {\n\t                    ej2_base_6.addClass([icon], DROPOUT);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_6.addClass([icon], NODROP);\n\t                document.body.style.cursor = 'not-allowed';\n\t            }\n\t            this.trigger('nodeDragging', this.getDragEvent(e.event, this, e.target, e.target));\n\t        };\n\t        TreeView.prototype.dropAction = function (e) {\n\t            var dropTarget = e.target;\n\t            var dragObj = e.dragData.draggable.ej2_instances[0];\n\t            var dragTarget = dragObj.dragTarget;\n\t            var dragLi = (ej2_base_6.closest(dragTarget, '.' + LISTITEM));\n\t            var dropLi = (ej2_base_6.closest(dropTarget, '.' + LISTITEM));\n\t            ej2_base_6.detach(e.droppedElement);\n\t            document.body.style.cursor = '';\n\t            if (!dropLi || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n\t                return;\n\t            }\n\t            if (dragObj.allowMultiSelection && (dragLi.classList.contains(ACTIVE) || (e.event.offsetY < 7 ||\n\t                (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10))))) {\n\t                var sNodes = ej2_base_6.selectAll('.' + ACTIVE, dragObj.element);\n\t                for (var i = 0; i < sNodes.length; i++) {\n\t                    if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {\n\t                        continue;\n\t                    }\n\t                    this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj);\n\t                }\n\t            }\n\t            else {\n\t                this.appendNode(dropTarget, dragLi, dropLi, e, dragObj);\n\t            }\n\t            this.trigger('nodeDropped', this.getDragEvent(e.event, dragObj, dropTarget, e.target));\n\t        };\n\t        TreeView.prototype.appendNode = function (dropTarget, dragLi, dropLi, e, dragObj) {\n\t            if (dropTarget.nodeName === 'LI') {\n\t                this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n\t            }\n\t            else {\n\t                this.dropAsChildNode(dragLi, dropLi, dragObj, null, e);\n\t            }\n\t        };\n\t        TreeView.prototype.dropAsSiblingNode = function (dragLi, dropLi, e, dragObj) {\n\t            var dropUl = ej2_base_6.closest(dropLi, '.' + PARENTITEM);\n\t            var dragParentUl = ej2_base_6.closest(dragLi, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            var pre;\n\t            if (e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 2) {\n\t                pre = false;\n\t            }\n\t            else if (e.event.offsetY < 2) {\n\t                pre = true;\n\t            }\n\t            dropUl.insertBefore(dragLi, pre ? e.target : e.target.nextElementSibling);\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            if (dragObj.element.id === this.element.id) {\n\t                this.updateList();\n\t            }\n\t            else {\n\t                dragObj.updateInstance();\n\t                this.updateInstance();\n\t            }\n\t        };\n\t        TreeView.prototype.dropAsChildNode = function (dragLi, dropLi, dragObj, index, e) {\n\t            var dragParentUl = ej2_base_6.closest(dragLi, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            var dropParentUl = ej2_base_6.closest(dropLi, '.' + PARENTITEM);\n\t            if (e && (e.event.offsetY < 7)) {\n\t                dropParentUl.insertBefore(dragLi, dropLi);\n\t            }\n\t            else if (e && (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10))) {\n\t                dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);\n\t            }\n\t            else {\n\t                var dropUl = this.expandParent(dropLi);\n\t                dropUl.insertBefore(dragLi, dropUl.childNodes[index]);\n\t            }\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            if (dragObj.element.id === this.element.id) {\n\t                this.updateList();\n\t            }\n\t            else {\n\t                dragObj.updateInstance();\n\t                this.updateInstance();\n\t            }\n\t        };\n\t        TreeView.prototype.expandParent = function (dropLi) {\n\t            var dropIcon = ej2_base_6.select('div.' + ICON, dropLi);\n\t            if (dropIcon && dropIcon.classList.contains(EXPANDABLE)) {\n\t                this.expandAction(dropLi, dropIcon, null);\n\t            }\n\t            var dropUl = ej2_base_6.select('.' + PARENTITEM, dropLi);\n\t            if (ej2_base_7.isNullOrUndefined(dropUl)) {\n\t                ej2_lists_1.ListBase.generateIcon(dropLi, COLLAPSIBLE, this.listBaseOption);\n\t                var icon = ej2_base_6.select('div.' + ICON, dropLi);\n\t                ej2_base_6.removeClass([icon], EXPANDABLE);\n\t                dropUl = ej2_lists_1.ListBase.generateUL([], null, this.listBaseOption);\n\t                dropLi.appendChild(dropUl);\n\t                dropLi.setAttribute('aria-expanded', 'true');\n\t                ej2_base_6.removeClass([dropLi], NODECOLLAPSED);\n\t            }\n\t            return dropUl;\n\t        };\n\t        TreeView.prototype.updateElement = function (dragParentUl, dragParentLi) {\n\t            if (dragParentLi && dragParentUl.childElementCount === 0) {\n\t                var dragIcon = ej2_base_6.select('div.' + ICON, dragParentLi);\n\t                ej2_base_6.detach(dragParentUl);\n\t                ej2_base_6.detach(dragIcon);\n\t                dragParentLi.removeAttribute('aria-expanded');\n\t            }\n\t        };\n\t        TreeView.prototype.renderVirtualEle = function (e) {\n\t            var pre;\n\t            if (e.event.offsetY > e.target.offsetHeight - 2) {\n\t                pre = false;\n\t            }\n\t            else if (e.event.offsetY < 2) {\n\t                pre = true;\n\t            }\n\t            var virEle = ej2_base_6.createElement('div', { className: SIBLING });\n\t            var index = this.fullRowSelect ? (pre ? 1 : 2) : (pre ? 0 : 1);\n\t            e.target.insertBefore(virEle, e.target.children[index]);\n\t        };\n\t        TreeView.prototype.removeVirtualEle = function () {\n\t            var sibEle = ej2_base_6.select('.' + SIBLING);\n\t            if (sibEle) {\n\t                ej2_base_6.detach(sibEle);\n\t            }\n\t        };\n\t        TreeView.prototype.destroyDrag = function () {\n\t            if (this.dragObj && this.dropObj) {\n\t                this.dragObj.destroy();\n\t                this.dropObj.destroy();\n\t            }\n\t        };\n\t        TreeView.prototype.getDragEvent = function (event, obj, dropTarget, target) {\n\t            var dropLi = dropTarget ? ej2_base_6.closest(dropTarget, '.' + LISTITEM) : null;\n\t            var dropData = dropLi ? this.getNodeData(dropLi) : null;\n\t            return {\n\t                cancel: false,\n\t                event: event,\n\t                draggedNode: obj.dragLi,\n\t                draggedNodeData: obj.dragData,\n\t                droppedNode: dropLi,\n\t                droppedNodeData: dropData,\n\t                target: target\n\t            };\n\t        };\n\t        TreeView.prototype.addFullRow = function (toAdd) {\n\t            var len = this.liList.length;\n\t            if (toAdd) {\n\t                for (var i = 0; i < len; i++) {\n\t                    this.createFullRow(this.liList[i]);\n\t                }\n\t            }\n\t            else {\n\t                for (var i = 0; i < len; i++) {\n\t                    var rowDiv = ej2_base_6.select('.' + FULLROW, this.liList[i]);\n\t                    ej2_base_6.detach(rowDiv);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.createFullRow = function (item) {\n\t            var rowDiv = ej2_base_6.createElement('div', { className: FULLROW });\n\t            item.insertBefore(rowDiv, item.childNodes[0]);\n\t        };\n\t        TreeView.prototype.addMultiSelect = function (toAdd) {\n\t            if (toAdd) {\n\t                var liEles = ej2_base_6.selectAll('.' + LISTITEM + ':not([aria-selected=\"true\"])', this.element);\n\t                for (var _i = 0, liEles_1 = liEles; _i < liEles_1.length; _i++) {\n\t                    var ele = liEles_1[_i];\n\t                    ele.setAttribute('aria-selected', 'false');\n\t                }\n\t            }\n\t            else {\n\t                var liEles = ej2_base_6.selectAll('.' + LISTITEM + '[aria-selected=\"false\"]', this.element);\n\t                for (var _a = 0, liEles_2 = liEles; _a < liEles_2.length; _a++) {\n\t                    var ele = liEles_2[_a];\n\t                    ele.removeAttribute('aria-selected');\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.collapseByLevel = function (element, level, excludeHiddenNodes) {\n\t            if (level > 0 && !ej2_base_7.isNullOrUndefined(element)) {\n\t                var cNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n\t                for (var i = 0, len = cNodes.length; i < len; i++) {\n\t                    var liEle = cNodes[i];\n\t                    var icon = ej2_base_6.select('.' + COLLAPSIBLE, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                    if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                        this.collapseNode(liEle, icon, null);\n\t                    }\n\t                    this.collapseByLevel(ej2_base_6.select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.collapseAllNodes = function (excludeHiddenNodes) {\n\t            var cIcons = this.getVisibleNodes(excludeHiddenNodes, ej2_base_6.selectAll('.' + COLLAPSIBLE, this.element));\n\t            for (var i = 0, len = cIcons.length; i < len; i++) {\n\t                var icon = cIcons[i];\n\t                var liEle = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                this.collapseNode(liEle, icon, null);\n\t            }\n\t        };\n\t        TreeView.prototype.expandByLevel = function (element, level, excludeHiddenNodes) {\n\t            if (level > 0 && !ej2_base_7.isNullOrUndefined(element)) {\n\t                var eNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n\t                for (var i = 0, len = eNodes.length; i < len; i++) {\n\t                    var liEle = eNodes[i];\n\t                    var icon = ej2_base_6.select('.' + EXPANDABLE, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                    if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                        this.expandAction(liEle, icon, null);\n\t                    }\n\t                    this.expandByLevel(ej2_base_6.select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.expandAllNodes = function (excludeHiddenNodes) {\n\t            var eIcons = this.getVisibleNodes(excludeHiddenNodes, ej2_base_6.selectAll('.' + EXPANDABLE, this.element));\n\t            for (var i = 0, len = eIcons.length; i < len; i++) {\n\t                var icon = eIcons[i];\n\t                var liEle = ej2_base_6.closest(icon, '.' + LISTITEM);\n\t                this.expandAction(liEle, icon, null, true);\n\t            }\n\t        };\n\t        TreeView.prototype.getVisibleNodes = function (excludeHiddenNodes, nodes) {\n\t            var vNodes = Array.prototype.slice.call(nodes);\n\t            if (excludeHiddenNodes) {\n\t                for (var i = 0; i < vNodes.length; i++) {\n\t                    if (!ej2_base_6.isVisible(vNodes[i])) {\n\t                        vNodes.splice(i, 1);\n\t                        i--;\n\t                    }\n\t                }\n\t            }\n\t            return vNodes;\n\t        };\n\t        TreeView.prototype.removeNode = function (node) {\n\t            var dragParentUl = ej2_base_6.closest(node, '.' + PARENTITEM);\n\t            var dragParentLi = ej2_base_6.closest(dragParentUl, '.' + LISTITEM);\n\t            ej2_base_6.detach(node);\n\t            this.updateElement(dragParentUl, dragParentLi);\n\t            this.updateInstance();\n\t        };\n\t        TreeView.prototype.updateInstance = function () {\n\t            this.updateList();\n\t            this.updateSelectedNodes();\n\t        };\n\t        TreeView.prototype.updateList = function () {\n\t            this.liList = Array.prototype.slice.call(ej2_base_6.selectAll('.' + LISTITEM, this.element));\n\t        };\n\t        TreeView.prototype.updateSelectedNodes = function () {\n\t            this.setProperties({ selectedNodes: [] }, true);\n\t            var sNodes = ej2_base_6.selectAll('.' + ACTIVE, this.element);\n\t            this.selectGivenNodes(sNodes);\n\t        };\n\t        TreeView.prototype.doGivenAction = function (nodes, selector, toExpand) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                var icon = ej2_base_6.select('.' + selector, ej2_base_6.select('.' + TEXTWRAP, liEle));\n\t                if (!ej2_base_7.isNullOrUndefined(icon)) {\n\t                    toExpand ? this.expandAction(liEle, icon, null) : this.collapseNode(liEle, icon, null);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.addGivenNodes = function (nodes, dropLi, index, isRemote) {\n\t            var level = dropLi ? parseFloat(dropLi.getAttribute('aria-level')) + 1 : 1;\n\t            if (isRemote) {\n\t                this.updateMapper(level);\n\t            }\n\t            var li = ej2_lists_1.ListBase.createListItemFromJson(nodes, this.listBaseOption, level);\n\t            var dropUl = dropLi ? this.expandParent(dropLi) : ej2_base_6.select('.' + PARENTITEM, this.element);\n\t            var refNode = dropUl.childNodes[index];\n\t            for (var i = 0; i < li.length; i++) {\n\t                dropUl.insertBefore(li[i], refNode);\n\t            }\n\t            this.finalizeNode(dropUl);\n\t        };\n\t        TreeView.prototype.updateMapper = function (level) {\n\t            var mapper = (level === 1) ? this.fields : this.getChildFields(this.fields, level - 1, 1);\n\t            var prop = this.getActualProperties(mapper);\n\t            this.listBaseOption.fields = prop;\n\t            this.listBaseOption.fields.url = prop.navigateUrl;\n\t        };\n\t        TreeView.prototype.doDisableAction = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                liEle.setAttribute('aria-disabled', 'true');\n\t                ej2_base_6.addClass([liEle], DISABLE);\n\t            }\n\t        };\n\t        TreeView.prototype.doEnableAction = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                liEle.removeAttribute('aria-disabled');\n\t                ej2_base_6.removeClass([liEle], DISABLE);\n\t            }\n\t        };\n\t        TreeView.prototype.wireInputEvents = function (inpEle) {\n\t            ej2_base_3.EventHandler.add(inpEle, 'blur', this.inputFocusOut, this);\n\t        };\n\t        TreeView.prototype.wireEditingEvents = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_1 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    this.touchEditObj = new ej2_base_7.Touch(this.element, {\n\t                        doubleTap: function (e) {\n\t                            e.originalEvent.preventDefault();\n\t                            proxy_1.editingHandler(e.originalEvent);\n\t                        }\n\t                    });\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, 'dblclick', this.editingHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchEditObj) {\n\t                    this.touchEditObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, 'dblclick', this.editingHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.wireClickEvent = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_2 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    this.touchClickObj = new ej2_base_7.Touch(this.element, {\n\t                        tap: function (e) {\n\t                            proxy_2.clickHandler(e.originalEvent);\n\t                        }\n\t                    });\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchClickObj) {\n\t                    this.touchClickObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.wireExpandOnEvent = function (toBind) {\n\t            if (toBind) {\n\t                var proxy_3 = this;\n\t                if (ej2_base_1.Browser.isIos) {\n\t                    if (this.expandOnType === 'click') {\n\t                        this.touchExpandObj = new ej2_base_7.Touch(this.element, {\n\t                            tap: function (e) {\n\t                                proxy_3.expandHandler(e.originalEvent);\n\t                            }\n\t                        });\n\t                    }\n\t                    else {\n\t                        this.touchExpandObj = new ej2_base_7.Touch(this.element, {\n\t                            doubleTap: function (e) {\n\t                                proxy_3.expandHandler(e.originalEvent);\n\t                            }\n\t                        });\n\t                    }\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.add(this.element, this.expandOnType, this.expandHandler, this);\n\t                }\n\t            }\n\t            else {\n\t                if (ej2_base_1.Browser.isIos && this.touchExpandObj) {\n\t                    this.touchExpandObj.destroy();\n\t                }\n\t                else {\n\t                    ej2_base_3.EventHandler.remove(this.element, this.expandOnType, this.expandHandler);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.mouseDownHandler = function (e) {\n\t            this.mouseDownStatus = true;\n\t            if (e.ctrlKey && this.allowMultiSelection) {\n\t                ej2_base_3.EventHandler.add(this.element, 'contextmenu ', this.preventContextMenu, this);\n\t            }\n\t        };\n\t        ;\n\t        TreeView.prototype.preventContextMenu = function (e) {\n\t            e.preventDefault();\n\t        };\n\t        TreeView.prototype.wireEvents = function () {\n\t            ej2_base_3.EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);\n\t            this.wireClickEvent(true);\n\t            this.wireExpandOnEvent(true);\n\t            ej2_base_3.EventHandler.add(this.element, 'focus', this.focusIn, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'blur', this.focusOut, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'mouseover', this.onMouseOver, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'mouseout', this.onMouseLeave, this);\n\t            this.keyboardModule = new ej2_base_3.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown',\n\t            });\n\t        };\n\t        TreeView.prototype.unWireEvents = function () {\n\t            ej2_base_3.EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);\n\t            this.wireClickEvent(false);\n\t            this.wireExpandOnEvent(false);\n\t            ej2_base_3.EventHandler.remove(this.element, 'focus', this.focusIn);\n\t            ej2_base_3.EventHandler.remove(this.element, 'blur', this.focusOut);\n\t            ej2_base_3.EventHandler.remove(this.element, 'mouseover', this.onMouseOver);\n\t            ej2_base_3.EventHandler.remove(this.element, 'mouseout', this.onMouseLeave);\n\t            this.keyboardModule.destroy();\n\t        };\n\t        TreeView.prototype.parents = function (element, selector) {\n\t            var matched = [];\n\t            var el = element.parentNode;\n\t            while (!ej2_base_7.isNullOrUndefined(el)) {\n\t                if (ej2_base_6.matches(el, selector)) {\n\t                    matched.push(el);\n\t                }\n\t                el = el.parentNode;\n\t            }\n\t            return matched;\n\t        };\n\t        TreeView.prototype.isDescendant = function (parent, child) {\n\t            var node = child.parentNode;\n\t            while (!ej2_base_7.isNullOrUndefined(node)) {\n\t                if (node === parent) {\n\t                    return true;\n\t                }\n\t                node = node.parentNode;\n\t            }\n\t            return false;\n\t        };\n\t        TreeView.prototype.setCheckedNodes = function (nodes) {\n\t            nodes = JSON.parse(JSON.stringify(nodes));\n\t            this.uncheckAll();\n\t            if (nodes.length > 0) {\n\t                this.checkAll(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowDragAndDrop':\n\t                        this.setDragAndDrop(this.allowDragAndDrop);\n\t                        break;\n\t                    case 'allowEditing':\n\t                        this.wireEditingEvents(this.allowEditing);\n\t                        break;\n\t                    case 'allowMultiSelection':\n\t                        if (this.selectedNodes.length > 1) {\n\t                            var sNode = this.getElement(this.selectedNodes[0]);\n\t                            this.isLoaded = false;\n\t                            this.removeSelectAll();\n\t                            this.selectNode(sNode, null);\n\t                            this.isLoaded = true;\n\t                        }\n\t                        this.setTouchPopup(this.allowMultiSelection);\n\t                        this.setMultiSelect(this.allowMultiSelection);\n\t                        this.addMultiSelect(this.allowMultiSelection);\n\t                        break;\n\t                    case 'checkedNodes':\n\t                        if (this.showCheckBox) {\n\t                            this.checkedNodes = oldProp.checkedNodes;\n\t                            this.setCheckedNodes(newProp.checkedNodes);\n\t                        }\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCssClass(oldProp.cssClass, newProp.cssClass);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setEnableRtl();\n\t                        break;\n\t                    case 'expandOn':\n\t                        this.wireExpandOnEvent(false);\n\t                        this.setExpandOnType();\n\t                        this.wireExpandOnEvent(true);\n\t                        break;\n\t                    case 'fields':\n\t                        this.listBaseOption.fields = this.fields.properties;\n\t                        this.listBaseOption.fields.url = this.fields.navigateUrl;\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'fullRowSelect':\n\t                        this.setFullRow(this.fullRowSelect);\n\t                        this.addFullRow(this.fullRowSelect);\n\t                        break;\n\t                    case 'nodeTemplate':\n\t                        this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'selectedNodes':\n\t                        this.removeSelectAll();\n\t                        this.setProperties({ selectedNodes: newProp.selectedNodes }, true);\n\t                        this.doSelectionAction();\n\t                        break;\n\t                    case 'showCheckBox':\n\t                        this.reRenderNodes();\n\t                        break;\n\t                    case 'sortOrder':\n\t                        this.reRenderNodes();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.destroy = function () {\n\t            this.element.removeAttribute('role');\n\t            this.unWireEvents();\n\t            this.wireEditingEvents(false);\n\t            this.rippleFn();\n\t            this.rippleIconFn();\n\t            this.setCssClass(this.cssClass, null);\n\t            this.setDragAndDrop(false);\n\t            this.setFullRow(false);\n\t            this.setTouchPopup(false);\n\t            this.setMultiSelect(false);\n\t            this.element.innerHTML = '';\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        TreeView.prototype.addNodes = function (nodes, target, index) {\n\t            if (ej2_base_7.isNullOrUndefined(nodes)) {\n\t                return;\n\t            }\n\t            var dropLi = this.getElement(target);\n\t            nodes = this.getSortedData(nodes);\n\t            if (this.fields.dataSource instanceof ej2_data_1.DataManager) {\n\t                this.addGivenNodes(nodes, dropLi, index, true);\n\t            }\n\t            else if (this.dataType === 2) {\n\t                this.addGivenNodes(nodes, dropLi, index);\n\t            }\n\t            else {\n\t                if (dropLi) {\n\t                    this.addGivenNodes(nodes, dropLi, index);\n\t                }\n\t                else {\n\t                    for (var i = 0; i < nodes.length; i++) {\n\t                        var pid = nodes[i][this.fields.parentID];\n\t                        dropLi = pid ? this.getElement(pid.toString()) : pid;\n\t                        this.addGivenNodes([nodes[i]], dropLi, index);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.checkAll = function (nodes) {\n\t            if (this.showCheckBox) {\n\t                this.doCheckBoxAction(nodes, true);\n\t            }\n\t        };\n\t        TreeView.prototype.collapseAll = function (nodes, level, excludeHiddenNodes) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doGivenAction(nodes, COLLAPSIBLE, false);\n\t            }\n\t            else {\n\t                if (level > 0) {\n\t                    this.collapseByLevel(ej2_base_6.select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n\t                }\n\t                else {\n\t                    this.collapseAllNodes(excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.disableNodes = function (nodes) {\n\t            if (ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doDisableAction(this.selectedNodes);\n\t            }\n\t            else {\n\t                this.doDisableAction(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.enableAll = function (nodes) {\n\t            if (ej2_base_7.isNullOrUndefined(nodes)) {\n\t                var liEle = ej2_base_6.selectAll('.' + DISABLE, this.element);\n\t                for (var _i = 0, liEle_1 = liEle; _i < liEle_1.length; _i++) {\n\t                    var ele = liEle_1[_i];\n\t                    ele.removeAttribute('aria-disabled');\n\t                }\n\t                ej2_base_6.removeClass(liEle, DISABLE);\n\t            }\n\t            else {\n\t                this.doEnableAction(nodes);\n\t            }\n\t        };\n\t        TreeView.prototype.ensureVisible = function (node) {\n\t            var liEle = this.getElement(node);\n\t            if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                return;\n\t            }\n\t            var parents = this.parents(liEle, '.' + LISTITEM);\n\t            this.expandAll(parents);\n\t            setTimeout(function () { liEle.scrollIntoView(true); }, 450);\n\t        };\n\t        TreeView.prototype.expandAll = function (nodes, level, excludeHiddenNodes) {\n\t            if (!ej2_base_7.isNullOrUndefined(nodes)) {\n\t                this.doGivenAction(nodes, EXPANDABLE, true);\n\t            }\n\t            else {\n\t                if (level > 0) {\n\t                    this.expandByLevel(ej2_base_6.select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n\t                }\n\t                else {\n\t                    this.expandAllNodes(excludeHiddenNodes);\n\t                }\n\t            }\n\t        };\n\t        TreeView.prototype.getNode = function (node) {\n\t            return this.getElement(node);\n\t        };\n\t        TreeView.prototype.getNodeDetails = function (node) {\n\t            var ele = this.getElement(node);\n\t            return this.getNodeData(ele);\n\t        };\n\t        TreeView.prototype.moveNodes = function (sourceNodes, target, index) {\n\t            var dropLi = this.getElement(target);\n\t            if (ej2_base_7.isNullOrUndefined(dropLi)) {\n\t                return;\n\t            }\n\t            for (var i = 0; i < sourceNodes.length; i++) {\n\t                var dragLi = this.getElement(sourceNodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(dragLi) || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n\t                    continue;\n\t                }\n\t                this.dropAsChildNode(dragLi, dropLi, this, index);\n\t            }\n\t        };\n\t        TreeView.prototype.removeNodes = function (nodes) {\n\t            for (var i = 0, len = nodes.length; i < len; i++) {\n\t                var liEle = this.getElement(nodes[i]);\n\t                if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                    continue;\n\t                }\n\t                this.removeNode(liEle);\n\t            }\n\t        };\n\t        TreeView.prototype.replaceText = function (target, newText) {\n\t            if (ej2_base_7.isNullOrUndefined(target) || ej2_base_7.isNullOrUndefined(newText) || !this.allowEditing) {\n\t                return;\n\t            }\n\t            var liEle = this.getElement(target);\n\t            if (ej2_base_7.isNullOrUndefined(liEle)) {\n\t                return;\n\t            }\n\t            var txtEle = ej2_base_6.select('.' + LISTTEXT, liEle);\n\t            txtEle.childNodes[0].nodeValue = newText;\n\t        };\n\t        TreeView.prototype.uncheckAll = function (nodes) {\n\t            if (this.showCheckBox) {\n\t                this.doCheckBoxAction(nodes, false);\n\t            }\n\t        };\n\t        return TreeView;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"allowMultiSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({}, NodeAnimationSettings)\n\t    ], TreeView.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"checkedNodes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('')\n\t    ], TreeView.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('auto')\n\t    ], TreeView.prototype, \"expandOn\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Complex({}, FieldsSettings)\n\t    ], TreeView.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(true)\n\t    ], TreeView.prototype, \"fullRowSelect\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"nodeTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property()\n\t    ], TreeView.prototype, \"selectedNodes\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property('None')\n\t    ], TreeView.prototype, \"sortOrder\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Property(false)\n\t    ], TreeView.prototype, \"showCheckBox\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"drawNode\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"keyPress\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeChecked\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeChecking\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeClicked\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeCollapsed\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeCollapsing\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragging\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDragStop\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeDropped\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeEdited\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeExpanded\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeExpanding\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], TreeView.prototype, \"nodeSelecting\", void 0);\n\t    TreeView = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], TreeView);\n\t    exports.TreeView = TreeView;\n\t    exports.treeViewHelper = ej2_base_1.CreateBuilder(TreeView);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_17__;\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAyOWUzYmI5YzkwM2Y5MTdkZTg2ZiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2gtc2Nyb2xsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xiYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xiYXIvdG9vbGJhci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3JkaW9uL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9hY2NvcmRpb24vYWNjb3JkaW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb250ZXh0LW1lbnUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRleHQtbWVudS9jb250ZXh0LW1lbnUuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWxpc3RzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RhYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGFiL3RhYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdHJlZXZpZXcvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyZWV2aWV3L3RyZWV2aWV3LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDLG1DQUFtQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkIsaUNBQWlDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDO0FBQ3ZD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsZ0JBQWdCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELGdEQUFnRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0Usa0RBQWtEO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELGlEQUFpRDtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQW9FLHFEQUFxRDtBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQStDLFNBQVM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLDJCQUEyQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsY0FBYztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUErQyxnQkFBZ0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZ0UsNkJBQTZCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBcUQsU0FBUztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLG1CQUFtQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDLGdCQUFnQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBLDhCQUE2Qiw0REFBNEQ7QUFDekY7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUFzRSxvQkFBb0I7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxvQkFBb0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBLG9DQUFtQyxvQkFBb0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELGdCQUFnQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0UsOENBQThDO0FBQ2xIO0FBQ0E7QUFDQSxxRUFBb0UsZ0RBQWdEO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxvQkFBb0I7QUFDeEQsZ0NBQStCLGtCQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxnQkFBZ0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELFlBQVk7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQsWUFBWTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQW9ELFNBQVM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF3QyxlQUFlO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsMEJBQTBCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQyxvQkFBb0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QjtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxxQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDLG9CQUFvQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNEQsMENBQTBDLHNCQUFzQixFQUFFO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLFdBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0UscUNBQXFDO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLG1FQUFrRSxzQkFBc0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0EsdUVBQXNFLDZDQUE2QztBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUFzRSxxQkFBcUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUFzRSxxQkFBcUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQixtQkFBbUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTBELHFCQUFxQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQixTQUFTO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLFNBQVM7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTBELHFCQUFxQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW1ELHNCQUFzQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBbUQsc0JBQXNCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBb0QsU0FBUztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRCxTQUFTO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsU0FBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLG1CQUFtQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDLG9CQUFvQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUErQyxTQUFTO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixlQUFlO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0MsU0FBUztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0MsU0FBUztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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dW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbGlzdHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1saXN0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1saXN0c1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWxpc3RzXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWRhdGFcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE3X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMjllM2JiOWM5MDNmOTE3ZGU4NmYiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbW1vbi9pbmRleFwiLCBcIi4vdG9vbGJhci9pbmRleFwiLCBcIi4vYWNjb3JkaW9uL2luZGV4XCIsIFwiLi9jb250ZXh0LW1lbnUvaW5kZXhcIiwgXCIuL3RhYi9pbmRleFwiLCBcIi4vdHJlZXZpZXcvaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yLCBpbmRleF8zLCBpbmRleF80LCBpbmRleF81LCBpbmRleF82KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbiAgICBfX2V4cG9ydChpbmRleF8zKTtcbiAgICBfX2V4cG9ydChpbmRleF80KTtcbiAgICBfX2V4cG9ydChpbmRleF81KTtcbiAgICBfX2V4cG9ydChpbmRleF82KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9oLXNjcm9sbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhfc2Nyb2xsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGhfc2Nyb2xsXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ0xTX1JPT1QgPSAnZS1oc2Nyb2xsJztcbiAgICB2YXIgQ0xTX1JUTCA9ICdlLXJ0bCc7XG4gICAgdmFyIENMU19ESVNBQkxFID0gJ2Utb3ZlcmxheSc7XG4gICAgdmFyIENMU19IU0NST0xMQkFSID0gJ2UtaHNjcm9sbC1iYXInO1xuICAgIHZhciBDTFNfSFNDUk9MTENPTiA9ICdlLWhzY3JvbGwtY29udGVudCc7XG4gICAgdmFyIENMU19OQVZBUlJPVyA9ICdlLW5hdi1hcnJvdyc7XG4gICAgdmFyIENMU19OQVZSSUdIVEFSUk9XID0gJ2UtbmF2LXJpZ2h0LWFycm93JztcbiAgICB2YXIgQ0xTX05BVkxFRlRBUlJPVyA9ICdlLW5hdi1sZWZ0LWFycm93JztcbiAgICB2YXIgQ0xTX0hTQ1JPTExOQVYgPSAnZS1zY3JvbGwtbmF2JztcbiAgICB2YXIgQ0xTX0hTQ1JPTExOQVZSSUdIVCA9ICdlLXNjcm9sbC1yaWdodC1uYXYnO1xuICAgIHZhciBDTFNfSFNDUk9MTE5BVkxFRlQgPSAnZS1zY3JvbGwtbGVmdC1uYXYnO1xuICAgIHZhciBDTFNfREVWSUNFID0gJ2Utc2Nyb2xsLWRldmljZSc7XG4gICAgdmFyIEhTY3JvbGwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSFNjcm9sbCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSFNjcm9sbChvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmJyb3dzZXIgPSBlajJfYmFzZV8yLkJyb3dzZXIuaW5mby5uYW1lO1xuICAgICAgICAgICAgdGhpcy5icm93c2VyQ2hlY2sgPSB0aGlzLmJyb3dzZXIgPT09ICdtb3ppbGxhJztcbiAgICAgICAgICAgIHRoaXMuaXNEZXZpY2UgPSBlajJfYmFzZV8yLkJyb3dzZXIuaXNEZXZpY2U7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMuaWVDaGVjayA9IHRoaXMuYnJvd3NlciA9PT0gJ2VkZ2UnIHx8IHRoaXMuYnJvd3NlciA9PT0gJ21zaWUnO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5pZCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlkID0gZWoyX2Jhc2VfMS5nZXRVbmlxdWVJRCgnaHNjcm9sbCcpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5pcXVlSWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG5ldyBlajJfYmFzZV8xLlRvdWNoKHRoaXMuZWxlbWVudCwgeyBzY3JvbGw6IHRoaXMudG91Y2hIYW5kbGVyLmJpbmQodGhpcykgfSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU5hdkljb24odGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zY3JvbGxFbGUsICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xTX0RFVklDRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0hTQ1JPTExDT04gfSk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0hTQ1JPTExCQVIgfSk7XG4gICAgICAgICAgICBzY3JvbGxEaXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZSA9IFtdLnNsaWNlLmNhbGwoZWxlLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaW5uZXJFbGVfMSA9IGlubmVyRWxlOyBfaSA8IGlubmVyRWxlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZV8xID0gaW5uZXJFbGVfMVtfaV07XG4gICAgICAgICAgICAgICAgc2Nyb2xsRWxlLmFwcGVuZENoaWxkKGVsZV8xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjcm9sbERpdi5hcHBlbmRDaGlsZChzY3JvbGxFbGUpO1xuICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKHNjcm9sbERpdik7XG4gICAgICAgICAgICBzY3JvbGxEaXYuc3R5bGUub3ZlcmZsb3dYID0gJ2hpZGRlbic7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEVsZSA9IHNjcm9sbERpdjtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSXRlbXMgPSBzY3JvbGxFbGU7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsnc2Nyb2xsU3RlcCddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2hTY3JvbGwnO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIGVsZS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfUk9PVCk7XG4gICAgICAgICAgICB2YXIgbmF2ID0gZWoyX2Jhc2VfMS5zZWxlY3RBbGwoJyMnICsgZWxlLmlkICsgJ19uYXYuZS0nICsgZWxlLmlkICsgJ19uYXYnKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBbXS5zbGljZS5jYWxsKHRoaXMuc2Nyb2xsSXRlbXMuY2hpbGRyZW4pOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnVuaXF1ZUlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHRoaXMuc2Nyb2xsRWxlKTtcbiAgICAgICAgICAgIGlmIChuYXYubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKG5hdlswXSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2gobmF2WzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNjcm9sbEVsZSwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUgPSBudWxsO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmNyZWF0ZU5hdkljb24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGlkID0gZWxlbWVudC5pZC5jb25jYXQoJ19uYXYnKTtcbiAgICAgICAgICAgIHZhciBjbHNSaWdodCA9ICdlLScgKyBlbGVtZW50LmlkLmNvbmNhdCgnX25hdiAnICsgQ0xTX0hTQ1JPTExOQVYgKyAnICcgKyBDTFNfSFNDUk9MTE5BVlJJR0hUKTtcbiAgICAgICAgICAgIHZhciBuYXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IGlkLCBjbGFzc05hbWU6IGNsc1JpZ2h0IH0pO1xuICAgICAgICAgICAgbmF2LnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgdmFyIG5hdkl0ZW0gPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfTkFWUklHSFRBUlJPVyArICcgJyArIENMU19OQVZBUlJPVyArICcgZS1pY29ucycgfSk7XG4gICAgICAgICAgICB2YXIgY2xzTGVmdCA9ICdlLScgKyBlbGVtZW50LmlkLmNvbmNhdCgnX25hdiAnICsgQ0xTX0hTQ1JPTExOQVYgKyAnICcgKyBDTFNfSFNDUk9MTE5BVkxFRlQpO1xuICAgICAgICAgICAgdmFyIG5hdkVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogaWQsIGNsYXNzTmFtZTogY2xzTGVmdCArICcgJyArIENMU19ESVNBQkxFIH0pO1xuICAgICAgICAgICAgbmF2RWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB2YXIgbmF2TGVmdEl0ZW0gPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfTkFWTEVGVEFSUk9XICsgJyAnICsgQ0xTX05BVkFSUk9XICsgJyBlLWljb25zJyB9KTtcbiAgICAgICAgICAgIG5hdkVsZS5hcHBlbmRDaGlsZChuYXZMZWZ0SXRlbSk7XG4gICAgICAgICAgICBuYXYuYXBwZW5kQ2hpbGQobmF2SXRlbSk7XG4gICAgICAgICAgICBuYXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG5hdik7XG4gICAgICAgICAgICBlbGVtZW50Lmluc2VydEJlZm9yZShuYXZFbGUsIGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pZUNoZWNrKSB7XG4gICAgICAgICAgICAgICAgbmF2LmNsYXNzTGlzdC5hZGQoJ2UtaWUtYWxpZ24nKTtcbiAgICAgICAgICAgICAgICBuYXZFbGUuY2xhc3NMaXN0LmFkZCgnZS1pZS1hbGlnbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ldmVudEJpbmRpbmcoW25hdiwgbmF2RWxlXSk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0RnVuXzEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmtleVRpbWVvdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbGVTY3JvbGxpbmcoMTAsIGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMua2V5VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRGdW5fMSgpO1xuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLm9uS2V5VXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5ICE9PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMua2V5VGltZW91dCkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5VGltZW91dCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmtleVRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuZXZlbnRCaW5kaW5nID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGVsZS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIG5ldyBlajJfYmFzZV8xLlRvdWNoKGVsLCB7IHRhcEhvbGQ6IF90aGlzLnRhYkhvbGRIYW5kbGVyLmJpbmQoX3RoaXMpLCB0YXBIb2xkVGhyZXNob2xkOiA1MDAgfSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIF90aGlzLm9uS2V5UHJlc3MuYmluZChfdGhpcykpO1xuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgX3RoaXMub25LZXlVcC5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIF90aGlzLnJlcGVhdFNjcm9sbC5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBfdGhpcy5yZXBlYXRTY3JvbGwuYmluZChfdGhpcykpO1xuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbCwgJ2NsaWNrJywgX3RoaXMuY2xpY2tFdmVudEhhbmRsZXIsIF90aGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5yZXBlYXRTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZW91dCk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnRhYkhvbGRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdHJndCA9IGUub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gICAgICAgICAgICB0cmd0ID0gdGhpcy5jb250YWlucyh0cmd0LCBDTFNfSFNDUk9MTE5BVikgPyB0cmd0LmZpcnN0RWxlbWVudENoaWxkIDogdHJndDtcbiAgICAgICAgICAgIHZhciBzY3JvbGxEaXMgPSAxMDtcbiAgICAgICAgICAgIHZhciB0aW1lb3V0RnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZVNjcm9sbGluZyhzY3JvbGxEaXMsIHRyZ3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudGltZW91dCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGltZW91dEZ1bigpO1xuICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChlbGUsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUuZWxlU2Nyb2xsaW5nID0gZnVuY3Rpb24gKHNjcm9sbERpcywgdHJndCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnNjcm9sbEVsZTtcbiAgICAgICAgICAgIHZhciByb290RWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHRyZ3QuY2xhc3NMaXN0O1xuICAgICAgICAgICAgaWYgKGNsYXNzTGlzdC5jb250YWlucyhDTFNfSFNDUk9MTE5BVikpIHtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QgPSB0cmd0LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX05BVkFSUk9XKS5jbGFzc0xpc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb250YWlucyhyb290RWxlLCBDTFNfUlRMKSAmJiB0aGlzLmJyb3dzZXJDaGVjaykge1xuICAgICAgICAgICAgICAgIHNjcm9sbERpcyA9IC1zY3JvbGxEaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2NybExlZnQgPSBlbGVtZW50LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBpZiAoKCF0aGlzLmNvbnRhaW5zKHJvb3RFbGUsIENMU19SVEwpIHx8IHRoaXMuYnJvd3NlckNoZWNrKSB8fCB0aGlzLmllQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKENMU19OQVZSSUdIVEFSUk9XKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBzY3JsTGVmdCArIHNjcm9sbERpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNjcmxMZWZ0IC0gc2Nyb2xsRGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoQ0xTX05BVkxFRlRBUlJPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gc2NybExlZnQgKyBzY3JvbGxEaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBzY3JsTGVmdCAtIHNjcm9sbERpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmNsaWNrRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlU2Nyb2xsaW5nKHRoaXMuc2Nyb2xsU3RlcCwgZS50YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBIU2Nyb2xsLnByb3RvdHlwZS50b3VjaEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuc2Nyb2xsRWxlO1xuICAgICAgICAgICAgdmFyIGRpc3RhbmNlO1xuICAgICAgICAgICAgZGlzdGFuY2UgPSBlLmRpc3RhbmNlWDtcbiAgICAgICAgICAgIGlmICgodGhpcy5pZUNoZWNrKSAmJiB0aGlzLmNvbnRhaW5zKHRoaXMuZWxlbWVudCwgQ0xTX1JUTCkpIHtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IC1kaXN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnNjcm9sbERpcmVjdGlvbiA9PT0gJ0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgZWxlLnNjcm9sbExlZnQgPSBlbGUuc2Nyb2xsTGVmdCArIGRpc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS5zY3JvbGxEaXJlY3Rpb24gPT09ICdSaWdodCcpIHtcbiAgICAgICAgICAgICAgICBlbGUuc2Nyb2xsTGVmdCA9IGVsZS5zY3JvbGxMZWZ0IC0gZGlzdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLmFycm93RGlzYWJsaW5nID0gZnVuY3Rpb24gKGFkZERpc2FibGUsIHJlbW92ZURpc2FibGUpIHtcbiAgICAgICAgICAgIGFkZERpc2FibGUuY2xhc3NMaXN0LmFkZChDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICBhZGREaXNhYmxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBhZGREaXNhYmxlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lb3V0KTtcbiAgICAgICAgICAgIHJlbW92ZURpc2FibGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICByZW1vdmVEaXNhYmxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgcmVtb3ZlRGlzYWJsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIHRoaXMucmVwZWF0U2Nyb2xsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEhTY3JvbGwucHJvdG90eXBlLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIHJvb3RFbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgbmF2TGVmdEVsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IU0NST0xMTkFWTEVGVCk7XG4gICAgICAgICAgICB2YXIgbmF2UmlnaHRFbGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSFNDUk9MTE5BVlJJR0hUKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsTGVmdCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IC1zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNjcm9sbExlZnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoKCF0aGlzLmNvbnRhaW5zKHJvb3RFbGUsIENMU19SVEwpIHx8IHRoaXMuYnJvd3NlckNoZWNrKSB8fCB0aGlzLmllQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJvd0Rpc2FibGluZyhuYXZMZWZ0RWxlLCBuYXZSaWdodEVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93RGlzYWJsaW5nKG5hdlJpZ2h0RWxlLCBuYXZMZWZ0RWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChNYXRoLmNlaWwod2lkdGggKyBzY3JvbGxMZWZ0ICsgLjEpID49IHRhcmdldC5zY3JvbGxXaWR0aCkge1xuICAgICAgICAgICAgICAgIGlmICgoIXRoaXMuY29udGFpbnMocm9vdEVsZSwgQ0xTX1JUTCkgfHwgdGhpcy5icm93c2VyQ2hlY2spIHx8IHRoaXMuaWVDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93RGlzYWJsaW5nKG5hdlJpZ2h0RWxlLCBuYXZMZWZ0RWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dEaXNhYmxpbmcobmF2TGVmdEVsZSwgbmF2UmlnaHRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBkaXNFbGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgaWYgKGRpc0VsZSkge1xuICAgICAgICAgICAgICAgICAgICBkaXNFbGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc0VsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzRWxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSFNjcm9sbC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzY3JvbGxTdGVwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcC5lbmFibGVSdGwgPyB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfUlRMKSA6IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMU19SVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSFNjcm9sbDtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoNDApXG4gICAgXSwgSFNjcm9sbC5wcm90b3R5cGUsIFwic2Nyb2xsU3RlcFwiLCB2b2lkIDApO1xuICAgIEhTY3JvbGwgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBIU2Nyb2xsKTtcbiAgICBleHBvcnRzLkhTY3JvbGwgPSBIU2Nyb2xsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vaC1zY3JvbGwuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi90b29sYmFyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdG9vbGJhcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydCh0b29sYmFyXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90b29sYmFyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCIuLi9jb21tb24vaC1zY3JvbGxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCBlajJfcG9wdXBzXzEsIGVqMl9wb3B1cHNfMiwgZWoyX2J1dHRvbnNfMSwgaF9zY3JvbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ0xTX0lURU1TID0gJ2UtdG9vbGJhci1pdGVtcyc7XG4gICAgdmFyIENMU19JVEVNID0gJ2UtdG9vbGJhci1pdGVtJztcbiAgICB2YXIgQ0xTX1JUTCA9ICdlLXJ0bCc7XG4gICAgdmFyIENMU19TRVBBUkFUT1IgPSAnZS1zZXBhcmF0b3InO1xuICAgIHZhciBDTFNfUE9QVVBJQ09OID0gJ2UtcG9wdXAtdXAtaWNvbic7XG4gICAgdmFyIENMU19QT1BVUERPV04gPSAnZS1wb3B1cC1kb3duLWljb24nO1xuICAgIHZhciBDTFNfVEVNUExBVEUgPSAnZS10ZW1wbGF0ZSc7XG4gICAgdmFyIENMU19ESVNBQkxFID0gJ2Utb3ZlcmxheSc7XG4gICAgdmFyIENMU19QT1BVUFRFWFQgPSAnZS10b29sYmFyLXRleHQnO1xuICAgIHZhciBDTFNfVEJBUlRFWFQgPSAnZS1wb3B1cC10ZXh0JztcbiAgICB2YXIgQ0xTX1RCQVJPVkVSRkxPVyA9ICdlLW92ZXJmbG93LXNob3cnO1xuICAgIHZhciBDTFNfUE9QT1ZFUkZMT1cgPSAnZS1vdmVyZmxvdy1oaWRlJztcbiAgICB2YXIgQ0xTX1RCQVJCVE4gPSAnZS10YmFyLWJ0bic7XG4gICAgdmFyIENMU19UQkFSTkFWID0gJ2UtaG9yLW5hdic7XG4gICAgdmFyIENMU19UQkFSU0NSTE5BViA9ICdlLXNjcm9sbC1uYXYnO1xuICAgIHZhciBDTFNfVEJBUlJJR0hUID0gJ2UtdG9vbGJhci1yaWdodCc7XG4gICAgdmFyIENMU19UQkFSTEVGVCA9ICdlLXRvb2xiYXItbGVmdCc7XG4gICAgdmFyIENMU19UQkFSQ0VOVEVSID0gJ2UtdG9vbGJhci1jZW50ZXInO1xuICAgIHZhciBDTFNfVEJBUlBPUyA9ICdlLXRiYXItcG9zJztcbiAgICB2YXIgQ0xTX1RCQVJTQ1JPTEwgPSAnZS1oc2Nyb2xsLWNvbnRlbnQnO1xuICAgIHZhciBDTFNfUE9QVVBOQVYgPSAnZS1ob3ItbmF2JztcbiAgICB2YXIgQ0xTX1BPUFVQQ0xBU1MgPSAnZS10b29sYmFyLXBvcCc7XG4gICAgdmFyIENMU19QT1BVUCA9ICdlLXRvb2xiYXItcG9wdXAnO1xuICAgIHZhciBDTFNfVEJBUkJUTlRFWFQgPSAnZS10YmFyLWJ0bi10ZXh0JztcbiAgICB2YXIgQ0xTX1RCQVJOQVZBQ1QgPSAnZS1uYXYtYWN0aXZlJztcbiAgICB2YXIgQ0xTX1RCQVJJR05PUkUgPSAnZS1pZ25vcmUnO1xuICAgIHZhciBJdGVtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEl0ZW0sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEl0ZW0oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEl0ZW07XG4gICAgfShlajJfYmFzZV81LkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInByZWZpeEljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJzdWZmaXhJY29uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ05vbmUnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcIm92ZXJmbG93XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQnV0dG9uJylcbiAgICBdLCBJdGVtLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0JvdGgnKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcInNob3dUZXh0T25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEl0ZW0ucHJvdG90eXBlLCBcImh0bWxBdHRyaWJ1dGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwidG9vbHRpcFRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnbGVmdCcpXG4gICAgXSwgSXRlbS5wcm90b3R5cGUsIFwiYWxpZ25cIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkl0ZW0gPSBJdGVtO1xuICAgIHZhciBUb29sYmFyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRvb2xiYXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRvb2xiYXIob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmtleUNvbmZpZ3MgPSB7XG4gICAgICAgICAgICAgICAgbW92ZUxlZnQ6ICdsZWZ0YXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVSaWdodDogJ3JpZ2h0YXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVVcDogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVEb3duOiAnZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBwb3B1cE9wZW46ICdlbnRlcicsXG4gICAgICAgICAgICAgICAgcG9wdXBDbG9zZTogJ2VzY2FwZScsXG4gICAgICAgICAgICAgICAgdGFiOiAndGFiJyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgd2hpbGUgKGVsZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgZWxlLnJlbW92ZUNoaWxkKGVsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRyZ3RFbGUpIHtcbiAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQodGhpcy5jdHJsVGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJQcm9wZXJ0eSgpO1xuICAgICAgICAgICAgdGhpcy5wb3BPYmogPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhpcy5lbGVtZW50LCAnZS10b29scG9wJyk7XG4gICAgICAgICAgICBlbGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgWydhcmlhLWRpc2FibGVkJywgJ2FyaWEtb3JpZW50YXRpb24nLCAnYXJpYS1oYXNwb3B1cCcsICdyb2xlJ10uZm9yRWFjaChmdW5jdGlvbiAoYXR0cmIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyYik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVDcmVhdGUnKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucG9wT2JqID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuZWxlbWVudCwgQ0xTX1JUTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmtleU1vZHVsZSA9IG5ldyBlajJfYmFzZV8yLktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlBY3Rpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczogdGhpcy5rZXlDb25maWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgdGhpcy5kb2NLZXlEb3duLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgJzAnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZG9jS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA5ICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ob3ItbmF2JykgPT09IHRydWUgJiYgZWoyX2Jhc2VfMi5pc1Zpc2libGUodGhpcy5wb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcE9iai5oaWRlKHsgbmFtZTogJ1NsaWRlVXAnLCBkdXJhdGlvbjogMTAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChlLmtleUNvZGUgPT09IDQwIHx8IGUua2V5Q29kZSA9PT0gMzgpICYmICFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucG9wT2JqKSAmJiBlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95SFNjcm9sbCgpO1xuICAgICAgICAgICAgdGhpcy5rZXlNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCAnc2Nyb2xsJywgdGhpcy5kb2NFdmVudCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAna2V5ZG93bicsIHRoaXMuZG9jS2V5RG93bik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsICdjbGljaycsIHRoaXMuZG9jRXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jbGVhclByb3BlcnR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50YmFyRWxlID0gW107XG4gICAgICAgICAgICB0aGlzLnRiYXJBbGdFbGUgPSB7IGxlZnRzOiBbXSwgY2VudGVyczogW10sIHJpZ2h0czogW10gfTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZG9jRXZlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBvcEVsZSA9IGVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJy5lLXBvcHVwJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3BPYmogJiYgZWoyX2Jhc2VfMi5pc1Zpc2libGUodGhpcy5wb3BPYmouZWxlbWVudCkgJiYgIXBvcEVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqLmhpZGUoeyBuYW1lOiAnU2xpZGVVcCcsIGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmRlc3Ryb3lIU2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuc2Nyb2xsTW9kdWxlLmVsZW1lbnQsIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZGVzdHJveUl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBDTFNfSVRFTSkpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2goZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyUHJvcGVydHkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZGVzdHJveU1vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLnNjcm9sbE1vZHVsZS5lbGVtZW50LCBDTFNfUlRMKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lIU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wb3BPYmopIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwUmVmcmVzaCh0aGlzLnBvcE9iai5lbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGVsZSwgdmFsKSB7XG4gICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZCh2YWwpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoZWxlLCB2YWwpIHtcbiAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKHZhbCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmVsZW1lbnRGb2N1cyA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHZhciBmQ2hpbGQgPSBlbGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoZkNoaWxkKSB7XG4gICAgICAgICAgICAgICAgZkNoaWxkLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVTd2l0Y2goZWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZS5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jbHN0RWxlbWVudCA9IGZ1bmN0aW9uICh0YnJOYXZDaGssIHRyZ3QpIHtcbiAgICAgICAgICAgIHZhciBjbHN0O1xuICAgICAgICAgICAgaWYgKHRick5hdkNoayAmJiB0aGlzLnBvcE9iaiAmJiBlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGNsc3QgPSB0aGlzLnBvcE9iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5lbGVtZW50ID09PSB0cmd0IHx8IHRick5hdkNoaykge1xuICAgICAgICAgICAgICAgIGNsc3QgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbHN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbHN0O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5rZXlIYW5kbGluZyA9IGZ1bmN0aW9uIChjbHN0LCBlLCB0cmd0LCBuYXZDaGssIHNjcm9sbENoaykge1xuICAgICAgICAgICAgdmFyIHBvcE9iaiA9IHRoaXMucG9wT2JqO1xuICAgICAgICAgICAgdmFyIHJvb3RFbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcG9wQW5pbWF0ZSA9IHsgbmFtZTogJ1NsaWRlVXAnLCBkdXJhdGlvbjogMTAwIH07XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RFbGUgPT09IHRyZ3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudEZvY3VzKGNsc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFuYXZDaGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoY2xzdCwgJ25leHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlTGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmF2Q2hrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZUZvY3VzKGNsc3QsICdwcmV2aW91cycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvbWUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3B1cENoZWNrID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGNsc3QsICcuZS1wb3B1cCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvcHVwQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc1Zpc2libGUodGhpcy5wb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMgPSBwb3B1cENoZWNrLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdob21lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlID0gbm9kZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQ0xTX0lURU1TICsgJyAuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdob21lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUgPSBub2Rlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZSA9IG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRGb2N1cyhlbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVVcCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZURvd24nOlxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBlLmFjdGlvbiA9PT0gJ21vdmVVcCcgPyAncHJldmlvdXMnIDogJ25leHQnO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9wT2JqICYmIGVqMl9iYXNlXzIuY2xvc2VzdCh0cmd0LCAnLmUtcG9wdXAnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcEVsZSA9IHBvcE9iai5lbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcEZyc3RFbGUgPSBwb3BFbGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlID09PSAncHJldmlvdXMnICYmIHBvcEZyc3RFbGUgPT09IGNsc3QpIHx8ICh2YWx1ZSA9PT0gJ25leHQnICYmIHBvcEVsZS5sYXN0RWxlbWVudENoaWxkID09PSBjbHN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoY2xzdCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUuYWN0aW9uID09PSAnbW92ZURvd24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRGb2N1cyhjbHN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0YWInOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbENoayAmJiAhbmF2Q2hrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlXzEgPSBjbHN0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RFbGUgPT09IHRyZ3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVFbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGUuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlUmVtb3ZlKGVsZV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlXzEuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwb3B1cENsb3NlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcE9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wT2JqLmhpZGUocG9wQW5pbWF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncG9wdXBPcGVuJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYXZDaGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9wT2JqICYmICFlajJfYmFzZV8yLmlzVmlzaWJsZShwb3BPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcE9iai5lbGVtZW50LnN0eWxlLnRvcCA9IHJvb3RFbGUub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcE9iai5zaG93KHsgbmFtZTogJ1NsaWRlRG93bicsIGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3BPYmouaGlkZShwb3BBbmltYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgY2xzdDtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgdGJyTmF2Q2hrID0gdHJndC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIHRiYXJTY3JvbGxDaGsgPSB0cmd0LmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUlNDUkxOQVYpO1xuICAgICAgICAgICAgY2xzdCA9IHRoaXMuY2xzdEVsZW1lbnQodGJyTmF2Q2hrLCB0cmd0KTtcbiAgICAgICAgICAgIGlmIChjbHN0IHx8IHRiYXJTY3JvbGxDaGspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleUhhbmRsaW5nKGNsc3QsIGUsIHRyZ3QsIHRick5hdkNoaywgdGJhclNjcm9sbENoayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmVsZUZvY3VzID0gZnVuY3Rpb24gKGNsb3Nlc3QsIHBvcykge1xuICAgICAgICAgICAgdmFyIHNpYiA9IE9iamVjdChjbG9zZXN0KVtwb3MgKyAnRWxlbWVudFNpYmxpbmcnXTtcbiAgICAgICAgICAgIHZhciBjb250YWlucyA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoc2liKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNraXBFbGUgPSBjb250YWlucyhzaWIpO1xuICAgICAgICAgICAgICAgIGlmIChza2lwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qoc2liKVtwb3MgKyAnU2libGluZyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWIgPSBPYmplY3Qoc2liKVtwb3MgKyAnU2libGluZyddO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEVsZSA9IGNvbnRhaW5zKHNpYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoc2liLCBwb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRGb2N1cyhzaWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IE9iamVjdChjbG9zZXN0LnBhcmVudEVsZW1lbnQpW3BvcyArICdFbGVtZW50U2libGluZyddO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlbGVtKSAmJiBlbGVtLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5zKGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlRm9jdXMoZWwsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5maXJzdEVsZW1lbnRDaGlsZC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlU3dpdGNoKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW0ubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWlucyhlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZUZvY3VzKGVsLCBwb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Rm9jdXMoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRyZ3QgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBjbHNMaXN0ID0gdHJndC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIHBvcHVwTmF2ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRyZ3QsICgnLicgKyBDTFNfVEJBUk5BVikpO1xuICAgICAgICAgICAgaWYgKCFwb3B1cE5hdikge1xuICAgICAgICAgICAgICAgIHBvcHVwTmF2ID0gdHJndDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWxlLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucygnZS1oc2Nyb2xsJykgJiYgKGNsc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJOQVYpKSkge1xuICAgICAgICAgICAgICAgIGNsc0xpc3QgPSB0cmd0LnF1ZXJ5U2VsZWN0b3IoJy5lLWljb25zJykuY2xhc3NMaXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNsc0xpc3QuY29udGFpbnMoQ0xTX1BPUFVQSUNPTikgfHwgY2xzTGlzdC5jb250YWlucyhDTFNfUE9QVVBET1dOKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBDbGlja0hhbmRsZXIoZWxlLCBwb3B1cE5hdiwgQ0xTX1JUTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXRlbU9iajtcbiAgICAgICAgICAgIHZhciBjbHN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAnLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICBpZiAoKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoY2xzdCkgfHwgY2xzdC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0RJU0FCTEUpKSAmJiAhcG9wdXBOYXYuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFSTkFWKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbHN0KSB7XG4gICAgICAgICAgICAgICAgaXRlbU9iaiA9IHRoaXMuaXRlbXNbdGhpcy50YmFyRWxlLmluZGV4T2YoY2xzdCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHsgb3JpZ2luYWxFdmVudDogZSwgaXRlbTogaXRlbU9iaiB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbGlja2VkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wb3B1cENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlbGUsIHBvcHVwTmF2LCBDTFNfUlRMKSB7XG4gICAgICAgICAgICB2YXIgcG9wT2JqID0gdGhpcy5wb3BPYmo7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc1Zpc2libGUocG9wT2JqLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcG9wdXBOYXYuY2xhc3NMaXN0LnJlbW92ZShDTFNfVEJBUk5BVkFDVCk7XG4gICAgICAgICAgICAgICAgcG9wT2JqLmhpZGUoeyBuYW1lOiAnU2xpZGVVcCcsIGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUlRMKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BPYmouZW5hYmxlUnRsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcG9wT2JqLnBvc2l0aW9uID0geyBYOiAnbGVmdCcsIFk6ICd0b3AnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3BPYmoub2Zmc2V0WCA9PT0gMCAmJiAhZWxlLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUlRMKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BPYmouZW5hYmxlUnRsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHBvcE9iai5wb3NpdGlvbiA9IHsgWDogJ3JpZ2h0JywgWTogJ3RvcCcgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9wT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgcG9wT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgcG9wdXBOYXYuY2xhc3NMaXN0LmFkZChDTFNfVEJBUk5BVkFDVCk7XG4gICAgICAgICAgICAgICAgcG9wT2JqLnNob3coeyBuYW1lOiAnU2xpZGVEb3duJywgZHVyYXRpb246IDEwMCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRyb2woKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gZWoyX2Jhc2VfNC5mb3JtYXRVbml0KHRoaXMud2lkdGgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IGVqMl9iYXNlXzQuZm9ybWF0VW5pdCh0aGlzLmhlaWdodCk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNS5Ccm93c2VyLmluZm8ubmFtZSAhPT0gJ21zaWUnIHx8IHRoaXMuaGVpZ2h0ICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyAnaGVpZ2h0JzogaGVpZ2h0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ3dpZHRoJzogd2lkdGggfSk7XG4gICAgICAgICAgICB2YXIgYXJpYUF0dHIgPSB7XG4gICAgICAgICAgICAgICAgJ3JvbGUnOiAndG9vbGJhcicsICdhcmlhLWRpc2FibGVkJzogJ2ZhbHNlJywgJ2FyaWEtaGFzcG9wdXAnOiAnZmFsc2UnLCAnYXJpYS1vcmllbnRhdGlvbic6ICdob3Jpem9udGFsJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCBhcmlhQXR0cik7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlckNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRyZ3RFbGUgPSAodGhpcy5lbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApID8gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpIDogbnVsbDtcbiAgICAgICAgICAgIHRoaXMudGJhckFsZ0VsZSA9IHsgbGVmdHM6IFtdLCBjZW50ZXJzOiBbXSwgcmlnaHRzOiBbXSB9O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJJdGVtcygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJPdmVyZmxvd01vZGUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbVBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmluaXRIU2Nyb2xsID0gZnVuY3Rpb24gKGVsZW1lbnQsIGlubmVySXRlbXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zY3JvbGxNb2R1bGUgJiYgdGhpcy5jaGVja092ZXJmbG93KGVsZW1lbnQsIGlubmVySXRlbXNbMF0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyArICcgLicgKyBDTFNfVEJBUkNFTlRFUikucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZSA9IG5ldyBoX3Njcm9sbF8xLkhTY3JvbGwoeyBzY3JvbGxTdGVwOiA1MCwgZW5hYmxlUnRsOiB0aGlzLmVuYWJsZVJ0bCB9LCBpbm5lckl0ZW1zWzBdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLnNjcm9sbE1vZHVsZS5lbGVtZW50LCBDTFNfVEJBUlBPUyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgb3ZlcmZsb3c6ICdoaWRkZW4nIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5pdGVtV2lkdGhDYWwgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IDA7XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNKSwgaXRlbXMpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggKz0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY2hlY2tPdmVyZmxvdyA9IGZ1bmN0aW9uIChlbGVtZW50LCBpbm5lckl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpIHx8IGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaW5uZXJJdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbGVXaWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgaXRlbVdpZHRoO1xuICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduIHx8IHRoaXMuc2Nyb2xsTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgaXRlbVdpZHRoID0gdGhpcy5pdGVtV2lkdGhDYWwodGhpcy5zY3JvbGxNb2R1bGUgPyBpbm5lckl0ZW0ucXVlcnlTZWxlY3RvcignLmUtaHNjcm9sbC1jb250ZW50JykgOiBpbm5lckl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbVdpZHRoID0gaW5uZXJJdGVtLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcE5hdiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsTmF2ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSU0NSTE5BVik7XG4gICAgICAgICAgICBpZiAoaXRlbVdpZHRoID4gZWxlV2lkdGggLSAocG9wTmF2ID8gcG9wTmF2Lm9mZnNldFdpZHRoIDogKHNjcm9sbE5hdiA/IHNjcm9sbE5hdi5vZmZzZXRXaWR0aCAqIDIgOiAwKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVmcmVzaE92ZXJmbG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyT3ZlcmZsb3dNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW1zID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIGlmIChlbGUgJiYgZWxlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldFdpZCA9IGVsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMub3ZlcmZsb3dNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1Njcm9sbGFibGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95SFNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0SFNjcm9sbChlbGUsIGVsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMU19JVEVNUykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1BvcHVwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuZWxlbWVudCwgJ2UtdG9vbHBvcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tPdmVyZmxvdyhlbGUsIGlubmVySXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cEVsZShlbGUsIFtdLnNsaWNlLmNhbGwoZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU1TICsgJyAuJyArIENMU19JVEVNLCBlbGUpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpLnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJJdGVtcywgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbVBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNyZWF0ZVBvcHVwRWxlID0gZnVuY3Rpb24gKGVsZSwgaW5uZXJFbGUpIHtcbiAgICAgICAgICAgIHZhciBpbm5lck5hdiA9IGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSTkFWKTtcbiAgICAgICAgICAgIGlmICghaW5uZXJOYXYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBvcHVwSWNvbihlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5uZXJOYXYgPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUk5BVik7XG4gICAgICAgICAgICB2YXIgZWxlV2lkdGggPSAoZWxlLm9mZnNldFdpZHRoIC0gKGlubmVyTmF2Lm9mZnNldFdpZHRoKSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ydGwnKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tQcmlvcml0eShlbGUsIGlubmVyRWxlLCBlbGVXaWR0aCwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXAoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucHVzaGluZ1BvcHBlZEVsZSA9IGZ1bmN0aW9uICh0YmFyT2JqLCBwb3B1cFByaSwgZWxlLCBlbGVIZWlnaHQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGJhck9iai5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIG5vZGVzID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCQVJPVkVSRkxPVywgZWxlKTtcbiAgICAgICAgICAgIHZhciBub2RlSW5kZXggPSAwO1xuICAgICAgICAgICAgdmFyIHBvcHBlZEVsZSA9IFtdLnNsaWNlLmNhbGwoZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX1BPUFVQLCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKSkpO1xuICAgICAgICAgICAgdmFyIG5vZGVQcmkgPSAwO1xuICAgICAgICAgICAgcG9wcGVkRWxlLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIG5vZGVzID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCQVJPVkVSRkxPVywgZWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFST1ZFUkZMT1cpICYmIG5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRiYXJPYmoudGJSZXNpemUgJiYgbm9kZXMubGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoZWwsIG5vZGVzW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICArK25vZGVQcmk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuaW5zZXJ0QmVmb3JlKGVsLCBlbGUuY2hpbGRyZW5bbm9kZXMubGVuZ3RoXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICArK25vZGVQcmk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQkFST1ZFUkZMT1cpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5pbnNlcnRCZWZvcmUoZWwsIGVsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgKytub2RlUHJpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0YmFyT2JqLnRiUmVzaXplICYmIGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfUE9QT1ZFUkZMT1cpICYmIGVsZS5jaGlsZHJlbi5sZW5ndGggPiAwICYmIG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuaW5zZXJ0QmVmb3JlKGVsLCBlbGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICsrbm9kZVByaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19QT1BPVkVSRkxPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBQcmkucHVzaChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRiYXJPYmoudGJSZXNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShlbCwgZWxlLmNoaWxkTm9kZXNbbm9kZUluZGV4ICsgbm9kZVByaV0pO1xuICAgICAgICAgICAgICAgICAgICArK25vZGVJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUoZWwsIHsgZGlzcGxheTogJycsIGhlaWdodDogZWxlSGVpZ2h0ICsgJ3B4JyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcG9wdXBQcmkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgdGJhckVsZSA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNLCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGJhckVsZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHZhciB0YmFyRWxlbWVudCA9IHRiYXJFbGVbaV07XG4gICAgICAgICAgICAgICAgaWYgKHRiYXJFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTFNfU0VQQVJBVE9SKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRiYXJFbGVtZW50LCB7IGRpc3BsYXk6ICdub25lJyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY3JlYXRlUG9wdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBlbGVIZWlnaHQ7XG4gICAgICAgICAgICB2YXIgZWxlSXRlbTtcbiAgICAgICAgICAgIGVsZUl0ZW0gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU0gKyAnOm5vdCguJyArIENMU19TRVBBUkFUT1IgKyAnICk6bm90KC4nICsgQ0xTX1BPUFVQICsgJyApJyk7XG4gICAgICAgICAgICBlbGVIZWlnaHQgPSAoZWxlbWVudC5zdHlsZS5oZWlnaHQgPT09ICdhdXRvJyB8fCBlbGVtZW50LnN0eWxlLmhlaWdodCA9PT0gJycpID8gbnVsbCA6IGVsZUl0ZW0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGVsZTtcbiAgICAgICAgICAgIHZhciBwb3B1cFByaSA9IFtdO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBlbGVtZW50LmlkICsgJ19wb3B1cC4nICsgQ0xTX1BPUFVQQ0xBU1MpKSB7XG4gICAgICAgICAgICAgICAgZWxlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGVsZW1lbnQuaWQgKyAnX3BvcHVwLicgKyBDTFNfUE9QVVBDTEFTUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IGVsZW1lbnQuaWQgKyAnX3BvcHVwJywgY2xhc3NOYW1lOiBDTFNfUE9QVVBDTEFTUyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHVzaGluZ1BvcHBlZEVsZSh0aGlzLCBwb3B1cFByaSwgZWxlLCBlbGVIZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEluaXQoZWxlbWVudCwgZWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucG9wdXBJbml0ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGVsZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBvcE9iaikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyBvdmVyZmxvdzogJycgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gbmV3IGVqMl9wb3B1cHNfMS5Qb3B1cChudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0ZVRvOiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFk6IChlbGVtZW50Lm9mZnNldEhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgICAgIG9wZW46IHRoaXMucG9wdXBPcGVuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlOiB0aGlzLnBvcHVwQ2xvc2UsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLmVuYWJsZVJ0bCA/IHsgWDogJ2xlZnQnLCBZOiAndG9wJyB9IDogeyBYOiAncmlnaHQnLCBZOiAndG9wJyB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcG9wdXAuYXBwZW5kVG8oZWxlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLmRvY0V2ZW50LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgJ2NsaWNrICcsIHRoaXMuZG9jRXZlbnQuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgcG9wdXAuZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSBwb3B1cC5lbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgcG9wdXAuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqID0gcG9wdXA7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oYXNwb3B1cCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9wdXBFbGUgPSB0aGlzLnBvcE9iai5lbGVtZW50O1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUocG9wdXBFbGUsIHsgbWF4SGVpZ2h0OiAnJywgZGlzcGxheTogJ2Jsb2NrJyB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHBvcHVwRWxlLCB7IG1heEhlaWdodDogcG9wdXBFbGUub2Zmc2V0SGVpZ2h0ICsgJ3B4JywgZGlzcGxheTogJycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwT3BlbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcG9wT2JqID0gdGhpcy5wb3BPYmo7XG4gICAgICAgICAgICB2YXIgcG9wdXBFbGUgPSB0aGlzLnBvcE9iai5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIHRvb2xFbGUgPSB0aGlzLnBvcE9iai5lbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcG9wdXBOYXYgPSB0b29sRWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShwb3BPYmouZWxlbWVudCwgeyBoZWlnaHQ6ICdhdXRvJywgbWF4SGVpZ2h0OiAnJyB9KTtcbiAgICAgICAgICAgIHBvcE9iai5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IHBvcE9iai5lbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICB2YXIgcG9wdXBFbGVQb3MgPSBwb3B1cEVsZS5vZmZzZXRUb3AgKyBwb3B1cEVsZS5vZmZzZXRIZWlnaHQgKyBlajJfcG9wdXBzXzIuY2FsY3VsYXRlUG9zaXRpb24odG9vbEVsZSkudG9wO1xuICAgICAgICAgICAgdmFyIHBvcEljb24gPSBwb3B1cE5hdi5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIHBvcHVwTmF2LmNsYXNzTGlzdC5hZGQoQ0xTX1RCQVJOQVZBQ1QpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QocG9wSWNvbiwgW0NMU19QT1BVUElDT05dLCBbQ0xTX1BPUFVQRE9XTl0pO1xuICAgICAgICAgICAgdmFyIHNjcm9sbFZhbCA9IGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQod2luZG93LnNjcm9sbFkpID8gMCA6IHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICAgICAgaWYgKCh3aW5kb3cuaW5uZXJIZWlnaHQgKyBzY3JvbGxWYWwpIDwgcG9wdXBFbGVQb3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3ZlcmZsb3dIZWlnaHQgPSAocG9wdXBFbGUub2Zmc2V0SGVpZ2h0IC0gKChwb3B1cEVsZVBvcyAtIHdpbmRvdy5pbm5lckhlaWdodCAtIHNjcm9sbFZhbCkgKyA1KSk7XG4gICAgICAgICAgICAgICAgcG9wT2JqLmhlaWdodCA9IG92ZXJmbG93SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHBvcE9iai5lbGVtZW50LCB7IG1heEhlaWdodDogb3ZlcmZsb3dIZWlnaHQgKyAncHgnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wb3B1cENsb3NlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcG9wdXBOYXYgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIHBvcEljb24gPSBwb3B1cE5hdi5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIHBvcHVwTmF2LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1RCQVJOQVZBQ1QpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QocG9wSWNvbiwgW0NMU19QT1BVUERPV05dLCBbQ0xTX1BPUFVQSUNPTl0pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jaGVja1ByaW9yaXR5ID0gZnVuY3Rpb24gKGVsZSwgaW5FbGUsIGVsZVdpZHRoLCBwcmUpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBpbkVsZS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgZWxlV2lkID0gZWxlV2lkdGg7XG4gICAgICAgICAgICB2YXIgc2VwQ2hlY2sgPSAwO1xuICAgICAgICAgICAgdmFyIGl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgaXRlbVBvcENvdW50ID0gMDtcbiAgICAgICAgICAgIHZhciBjaGVja0NsYXNzID0gZnVuY3Rpb24gKGVsZSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJWYWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YWwuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNscykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJWYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJWYWw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1yZ24gPSBwYXJzZUZsb2F0KCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpbkVsZVtpXSkpLm1hcmdpblJpZ2h0KTtcbiAgICAgICAgICAgICAgICBtcmduICs9IHBhcnNlRmxvYXQoKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGluRWxlW2ldKSkubWFyZ2luTGVmdCk7XG4gICAgICAgICAgICAgICAgaWYgKGluRWxlW2ldID09PSB0aGlzLnRiYXJFbGVbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFyRWxlTXJnbiA9IG1yZ247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoaW5FbGVbaV0ub2Zmc2V0TGVmdCArIGluRWxlW2ldLm9mZnNldFdpZHRoICsgbXJnbikgPiBlbGVXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5FbGVbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VwQ2hlY2sgPiAwICYmIGl0ZW1Db3VudCA9PT0gaXRlbVBvcENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcEVsZSA9IGluRWxlW2kgKyBpdGVtQ291bnQgKyAoc2VwQ2hlY2sgLSAxKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQ2xhc3Moc2VwRWxlLCBbQ0xTX1NFUEFSQVRPUiwgQ0xTX1RCQVJJR05PUkVdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHNlcEVsZSwgeyBkaXNwbGF5OiAnbm9uZScgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VwQ2hlY2srKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtUG9wQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluRWxlW2ldLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk9WRVJGTE9XKSAmJiBwcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZVdpZHRoIC09IChpbkVsZVtpXS5vZmZzZXRXaWR0aCArIChtcmduKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNoZWNrQ2xhc3MoaW5FbGVbaV0sIFtDTFNfU0VQQVJBVE9SLCBDTFNfVEJBUklHTk9SRV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkVsZVtpXS5jbGFzc0xpc3QuYWRkKENMU19QT1BVUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKGluRWxlW2ldLCB7IGRpc3BsYXk6ICdub25lJywgbWluV2lkdGg6IGluRWxlW2ldLm9mZnNldFdpZHRoICsgJ3B4JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Qb3BDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlV2lkdGggLT0gKGluRWxlW2ldLm9mZnNldFdpZHRoICsgKG1yZ24pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9wZWRFbGUgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfSVRFTSArICc6bm90KC4nICsgQ0xTX1BPUFVQICsgJyknLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQcmlvcml0eShlbGUsIHBvcGVkRWxlLCBlbGVXaWQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY3JlYXRlUG9wdXBJY29uID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGVsZW1lbnQuaWQuY29uY2F0KCdfbmF2Jyk7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gJ2UtJyArIGVsZW1lbnQuaWQuY29uY2F0KCdfbmF2ICcgKyBDTFNfUE9QVVBOQVYpO1xuICAgICAgICAgICAgdmFyIG5hdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogaWQsIGNsYXNzTmFtZTogY2xhc3NOYW1lIH0pO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzUuQnJvd3Nlci5pbmZvLm5hbWUgPT09ICdtc2llJyB8fCBlajJfYmFzZV81LkJyb3dzZXIuaW5mby5uYW1lID09PSAnZWRnZScpIHtcbiAgICAgICAgICAgICAgICBuYXYuY2xhc3NMaXN0LmFkZCgnZS1pZS1hbGlnbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5hdkl0ZW0gPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfUE9QVVBET1dOICsgJyBlLWljb25zJyB9KTtcbiAgICAgICAgICAgIG5hdi5hcHBlbmRDaGlsZChuYXZJdGVtKTtcbiAgICAgICAgICAgIG5hdi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobmF2KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudGJhclByaVJlZiA9IGZ1bmN0aW9uIChpbkVsZSwgaW5keCwgc2VwUHJpLCBlbCwgZGVzLCBlbFdpZCwgd2lkLCBpZykge1xuICAgICAgICAgICAgdmFyIGlnbm9yZUNvdW50ID0gaWc7XG4gICAgICAgICAgICB2YXIgcG9wRWxlID0gdGhpcy5wb3BPYmouZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9ICcuJyArIENMU19JVEVNICsgJzpub3QoLicgKyBDTFNfU0VQQVJBVE9SICsgJyk6bm90KC4nICsgQ0xTX1RCQVJPVkVSRkxPVyArICcpJztcbiAgICAgICAgICAgIHZhciBwcmlFbGVDbnQgPSBlajJfYmFzZV8zLnNlbGVjdEFsbCgnLicgKyBDTFNfUE9QVVAgKyAnOm5vdCguJyArIENMU19UQkFST1ZFUkZMT1cgKyAnKScsIHBvcEVsZSkubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNoZWNrQ2xhc3MgPSBmdW5jdGlvbiAoZWxlLCB2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlLmNsYXNzTGlzdC5jb250YWlucyh2YWwpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLnNlbGVjdEFsbChxdWVyeSwgaW5FbGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVTZXAgPSBpbkVsZS5jaGlsZHJlbltpbmR4IC0gKGluZHggLSBzZXBQcmkpIC0gMV07XG4gICAgICAgICAgICAgICAgdmFyIGlnbm9yZUNoZWNrID0gKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGVsZVNlcCkgJiYgY2hlY2tDbGFzcyhlbGVTZXAsIENMU19UQkFSSUdOT1JFKSk7XG4gICAgICAgICAgICAgICAgaWYgKCghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlbGVTZXApICYmIGNoZWNrQ2xhc3MoZWxlU2VwLCBDTFNfU0VQQVJBVE9SKSAmJiAhZWoyX2Jhc2VfMi5pc1Zpc2libGUoZWxlU2VwKSkgfHwgaWdub3JlQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcERpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGVsZVNlcC5zdHlsZS5kaXNwbGF5ID0gJ2luaGVyaXQnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlU2VwV2lkdGggPSBlbGVTZXAub2Zmc2V0V2lkdGggKyAocGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVTZXApLm1hcmdpblJpZ2h0KSAqIDIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldlNlcCA9IGVsZVNlcC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGVsV2lkICsgZWxlU2VwV2lkdGgpIDwgd2lkIHx8IGRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5FbGUuaW5zZXJ0QmVmb3JlKGVsLCBpbkVsZS5jaGlsZHJlblsoaW5keCArIGlnbm9yZUNvdW50KSAtIChpbmR4IC0gc2VwUHJpKV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHByZXZTZXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNlcC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldlNlcC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2VwLnN0eWxlLmRpc3BsYXkgPSBzZXBEaXNwbGF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZVNlcC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbkVsZS5pbnNlcnRCZWZvcmUoZWwsIGluRWxlLmNoaWxkcmVuWyhpbmR4ICsgaWdub3JlQ291bnQpIC0gKGluZHggLSBzZXBQcmkpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5FbGUuaW5zZXJ0QmVmb3JlKGVsLCBpbkVsZS5jaGlsZHJlblsoaW5keCArIGlnbm9yZUNvdW50KSAtIHByaUVsZUNudF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5wb3B1cFJlZnJlc2ggPSBmdW5jdGlvbiAocG9wdXBFbGUsIGRlc3Ryb3kpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgcG9wTmF2ID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHBvcE5hdikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbm5lckVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICBwb3B1cEVsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGVsZS5vZmZzZXRXaWR0aCAtIChwb3BOYXYub2Zmc2V0V2lkdGggKyBpbm5lckVsZS5vZmZzZXRXaWR0aCk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWxlUmVmcmVzaCh3aWR0aCwgcG9wdXBFbGUsIGRlc3Ryb3kpO1xuICAgICAgICAgICAgcG9wdXBFbGUuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgaWYgKHBvcHVwRWxlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHBvcE5hdik7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHRoaXMucG9wT2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wT2JqID0gbnVsbDtcbiAgICAgICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdhcmlhLWhhc3BvcHVwJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdG9vbHBvcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5pZ25vcmVFbGVGZXRjaCA9IGZ1bmN0aW9uIChpbmRleCwgaW5uZXJFbGUpIHtcbiAgICAgICAgICAgIHZhciBpZ25vcmVFbGUgPSBbXS5zbGljZS5jYWxsKGlubmVyRWxlLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQ0xTX1RCQVJJR05PUkUpKTtcbiAgICAgICAgICAgIHZhciBpZ25vcmVJbnggPSBbXTtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICBpZiAoaWdub3JlRWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZ25vcmVFbGUuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZUlueC5wdXNoKFtdLnNsaWNlLmNhbGwoaW5uZXJFbGUuY2hpbGRyZW4pLmluZGV4T2YoZWxlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlnbm9yZUlueC5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsIDw9IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnBvcHVwRWxlUmVmcmVzaCA9IGZ1bmN0aW9uICh3aWR0aCwgcG9wdXBFbGUsIGRlc3Ryb3kpIHtcbiAgICAgICAgICAgIHZhciBlbGVTcGxpY2UgPSB0aGlzLnRiYXJFbGU7XG4gICAgICAgICAgICB2YXIgcHJpRWxlQ250O1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0lURU1TKTtcbiAgICAgICAgICAgIHZhciBpZ25vcmVDb3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICB2YXIgZWxXaWR0aCA9IGVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBidG5UZXh0ID0gZWwucXVlcnlTZWxlY3RvcignLicgKyBDTFNfVEJBUkJUTlRFWFQpO1xuICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdGJ0bi1hbGlnbicpIHx8IGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUlRFWFQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidG4gPSBlbC5jaGlsZHJlblswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGJ0blRleHQpICYmIGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUlRFWFQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG5UZXh0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoYnRuVGV4dCkgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19QT1BVUFRFWFQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG5UZXh0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5taW5XaWR0aCA9ICcwJSc7XG4gICAgICAgICAgICAgICAgICAgIGVsV2lkdGggPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLm1pbldpZHRoID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChidG5UZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuVGV4dC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVsID09PSB0aGlzXzEudGJhckVsZVswXSkge1xuICAgICAgICAgICAgICAgICAgICBlbFdpZHRoICs9IHRoaXNfMS50YmFyRWxlTXJnbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWwuc3R5bGUucG9zaXRpb24gPSAnJztcbiAgICAgICAgICAgICAgICBpZiAoZWxXaWR0aCA8IHdpZHRoIHx8IGRlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUubWluV2lkdGggPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1BPUE9WRVJGTE9XKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShDTFNfUE9QVVApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpc18xLnRiYXJFbGUuaW5kZXhPZihlbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzXzEudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gdGhpc18xLml0ZW1zW2luZGV4XS5hbGlnbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpc18xLnRiYXJBbGdFbGVbKHBvcyArICdzJyldLmluZGV4T2YoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlU3BsaWNlID0gdGhpc18xLnRiYXJBbGdFbGVbKHBvcyArICdzJyldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUgPSB0aGlzXzEuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyArICcgLicgKyAnZS10b29sYmFyLScgKyBwb3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXBCZWZvcmVQcmlfMSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGVsZVNwbGljZS5zbGljZSgwLCBpbmRleCkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJPVkVSRkxPVykgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfU0VQQVJBVE9SKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoIC09IGVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXBCZWZvcmVQcmlfMSsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlQ291bnQgPSB0aGlzXzEuaWdub3JlRWxlRmV0Y2goaW5kZXgsIGlubmVyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJBUk9WRVJGTE9XKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLnRiYXJQcmlSZWYoaW5uZXJFbGUsIGluZGV4LCBzZXBCZWZvcmVQcmlfMSwgZWwsIGRlc3Ryb3ksIGVsV2lkdGgsIHdpZHRoLCBpZ25vcmVDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAtPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuaW5zZXJ0QmVmb3JlKGVsLCBpbm5lckVsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoIC09IGVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJpRWxlQ250ID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCQVJPVkVSRkxPVywgdGhpc18xLnBvcE9iai5lbGVtZW50KS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckVsZS5pbnNlcnRCZWZvcmUoZWwsIGlubmVyRWxlLmNoaWxkcmVuWyhpbmRleCArIGlnbm9yZUNvdW50KSAtIHByaUVsZUNudF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggLT0gZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJicmVha1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBbXS5zbGljZS5jYWxsKHBvcHVwRWxlLmNoaWxkcmVuKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlXzEgPSBfbG9vcF8xKGVsKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGVfMSA9PT0gXCJicmVha1wiKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVtb3ZlUG9zaXRpb25pbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtKSB8fCAhaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJQT1MpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW1vdmUoaXRlbSwgQ0xTX1RCQVJQT1MpO1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbSA9IFtdLnNsaWNlLmNhbGwoaXRlbS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIGlubmVySXRlbVsxXS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICBpbm5lckl0ZW1bMl0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZWZyZXNoUG9zaXRpb25pbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyk7XG4gICAgICAgICAgICB0aGlzLmFkZChpdGVtLCBDTFNfVEJBUlBPUyk7XG4gICAgICAgICAgICB0aGlzLml0ZW1Qb3NpdGlvbmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5pdGVtUG9zaXRpb25pbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19JVEVNUyk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtKSB8fCAhaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1RCQVJQT1MpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcHVwTmF2ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1RCQVJOQVYpO1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIGlubmVySXRlbSA9IFtdLnNsaWNlLmNhbGwoaXRlbS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19UQkFSU0NST0xMKS5jaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbm5lckl0ZW0gPSBbXS5zbGljZS5jYWxsKGl0ZW0uY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWFyZ2luID0gaW5uZXJJdGVtWzBdLm9mZnNldFdpZHRoICsgaW5uZXJJdGVtWzJdLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIHRiYXJXaWQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICBpZiAocG9wdXBOYXYpIHtcbiAgICAgICAgICAgICAgICB0YmFyV2lkIC09IHBvcHVwTmF2Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIGlubmVySXRlbVsyXS5zdHlsZS5yaWdodCA9IHBvcHVwTmF2Lm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YmFyV2lkIDw9IG1hcmdpbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICgoKHRiYXJXaWQgLSBtYXJnaW4pKSAtIGlubmVySXRlbVsxXS5vZmZzZXRXaWR0aCkgLyAyO1xuICAgICAgICAgICAgaW5uZXJJdGVtWzFdLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIHZhciBtcmduID0gKGlubmVySXRlbVswXS5vZmZzZXRXaWR0aCArIHZhbHVlKSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZVJ0bCA/IGlubmVySXRlbVsxXS5zdHlsZS5tYXJnaW5SaWdodCA9IG1yZ24gOiBpbm5lckl0ZW1bMV0uc3R5bGUubWFyZ2luTGVmdCA9IG1yZ247XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnRiYXJJdGVtQWxpZ24gPSBmdW5jdGlvbiAoaXRlbSwgaXRlbUVsZSwgcG9zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGFsaWduRGl2ID0gW107XG4gICAgICAgICAgICBhbGlnbkRpdi5wdXNoKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19UQkFSTEVGVCB9KSk7XG4gICAgICAgICAgICBhbGlnbkRpdi5wdXNoKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19UQkFSQ0VOVEVSIH0pKTtcbiAgICAgICAgICAgIGFsaWduRGl2LnB1c2goZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RCQVJSSUdIVCB9KSk7XG4gICAgICAgICAgICBpZiAocG9zID09PSAwICYmIGl0ZW0uYWxpZ24gIT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIGFsaWduRGl2LmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtRWxlLmFwcGVuZENoaWxkKGVsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy50YmFyQWxpZ24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGl0ZW1FbGUsIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0uYWxpZ24gIT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIHZhciBhbGlnbkVsZSA9IGl0ZW1FbGUuY2hpbGROb2RlcztcbiAgICAgICAgICAgICAgICB2YXIgbGVmdEFsaWduXzEgPSBhbGlnbkRpdlswXTtcbiAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKGFsaWduRWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50YmFyQWxnRWxlLmxlZnRzLnB1c2goZWwpO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0QWxpZ25fMS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaXRlbUVsZS5hcHBlbmRDaGlsZChsZWZ0QWxpZ25fMSk7XG4gICAgICAgICAgICAgICAgaXRlbUVsZS5hcHBlbmRDaGlsZChhbGlnbkRpdlsxXSk7XG4gICAgICAgICAgICAgICAgaXRlbUVsZS5hcHBlbmRDaGlsZChhbGlnbkRpdlsyXSk7XG4gICAgICAgICAgICAgICAgdGhpcy50YmFyQWxpZ24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGl0ZW1FbGUsIENMU19UQkFSUE9TKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY3RybFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY3RybFRlbSA9IHRoaXMudHJndEVsZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRyZ3RFbGUsIENMU19JVEVNUyk7XG4gICAgICAgICAgICB0aGlzLnRiYXJFbGUgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZSA9IFtdLnNsaWNlLmNhbGwodGhpcy50cmd0RWxlLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIGlubmVyRWxlLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGlmIChlbGUudGFnTmFtZSA9PT0gJ0RJVicpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGJhckVsZS5wdXNoKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkKGVsZSwgQ0xTX0lURU0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW5kZXJJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaXRlbUVsZURvbTtcbiAgICAgICAgICAgIHZhciBpbm5lckl0ZW07XG4gICAgICAgICAgICB2YXIgaW5uZXJQb3M7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLml0ZW1zO1xuICAgICAgICAgICAgaWYgKGVsZSAmJiBlbGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGl0ZW1FbGVEb20gPSBlbGUucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHJndEVsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHJsVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVsZSAmJiBpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtRWxlRG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1FbGVEb20gPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSVRFTVMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJJdGVtID0gdGhpcy5yZW5kZXJTdWJDb21wb25lbnQoaXRlbXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyRWxlLmluZGV4T2YoaW5uZXJJdGVtKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckVsZS5wdXNoKGlubmVySXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFySXRlbUFsaWduKGl0ZW1zW2ldLCBpdGVtRWxlRG9tLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbm5lclBvcyA9IGl0ZW1FbGVEb20ucXVlcnlTZWxlY3RvcignLmUtdG9vbGJhci0nICsgaXRlbXNbaV0uYWxpZ24udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbm5lclBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YmFyQWxnRWxlWyhpdGVtc1tpXS5hbGlnbiArICdzJyldLnB1c2goaW5uZXJJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyUG9zLmFwcGVuZENoaWxkKGlubmVySXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtRWxlRG9tLmFwcGVuZENoaWxkKGlubmVySXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGl0ZW1FbGVEb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5zZXRBdHRyID0gZnVuY3Rpb24gKGF0dHIsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhhdHRyKTtcbiAgICAgICAgICAgIHZhciBrZXlWYWw7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGtleVZhbCA9IGtleVtpXTtcbiAgICAgICAgICAgICAgICBrZXlWYWwgPT09ICdjbGFzcycgPyB0aGlzLmFkZChlbGVtZW50LCBhdHRyW2tleVZhbF0pIDogZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5VmFsLCBhdHRyW2tleVZhbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5lbmFibGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgaXNFbmFibGUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGl0ZW1zO1xuICAgICAgICAgICAgdmFyIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGlzRW5hYmxlKSkge1xuICAgICAgICAgICAgICAgIGlzRW5hYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbmFibGUgPSBmdW5jdGlvbiAoaXNFbmFibGUsIGVsZSkge1xuICAgICAgICAgICAgICAgIGlmIChpc0VuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChsZW4gJiYgbGVuID4gMSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBbXS5zbGljZS5jYWxsKGVsZW1lbnRzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlKGlzRW5hYmxlLCBlbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpc0VuYWJsZSA/IGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoZWxlbWVudHMsIENMU19ESVNBQkxFKSA6IGVqMl9iYXNlXzIuYWRkQ2xhc3MoZWxlbWVudHMsIENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgZWxlID0gKGxlbiAmJiBsZW4gPT09IDEpID8gZWxlbWVudHNbMF0gOiBpdGVtcztcbiAgICAgICAgICAgICAgICBlbmFibGUoaXNFbmFibGUsIGVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmFkZEl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbXM7XG4gICAgICAgICAgICB2YXIgaXRlbXNEaXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSVRFTVMpO1xuICAgICAgICAgICAgdmFyIGlubmVyRWxlO1xuICAgICAgICAgICAgdmFyIGl0ZW1BZ24gPSAnbGVmdCc7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpbmRleCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGUuYWxpZ24pICYmIGUuYWxpZ24gIT09ICdsZWZ0JyAmJiBpdGVtQWduID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUFnbiA9IGUuYWxpZ247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGl0ZW1zXzEgPSBpdGVtczsgX2kgPCBpdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXRlbS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPSAnQnV0dG9uJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5uZXJJdGVtcyA9IGVqMl9iYXNlXzMuc2VsZWN0QWxsKCcuJyArIENMU19JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGl0ZW0uYWxpZ24gPSBpdGVtQWduO1xuICAgICAgICAgICAgICAgIGlubmVyRWxlID0gdGhpcy5yZW5kZXJTdWJDb21wb25lbnQoaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckVsZS5sZW5ndGggPj0gaW5kZXggJiYgaW5uZXJJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveU1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxnSW5kZXggPSBpdGVtLmFsaWduWzBdID09PSAnbCcgPyAwIDogaXRlbS5hbGlnblswXSA9PT0gJ2MnID8gMSA6IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGlubmVySXRlbXNbMF0sICcuJyArIENMU19JVEVNUykuY2hpbGRyZW5bYWxnSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShpbm5lckVsZSwgZWxlLmNoaWxkcmVuW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJBbGdFbGVbKGl0ZW0uYWxpZ24gKyAncycpXS5zcGxpY2UoaW5kZXgsIDAsIGlubmVyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckl0ZW1zWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGlubmVyRWxlLCBpbm5lckl0ZW1zW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRiYXJFbGUuc3BsaWNlKGluZGV4LCAwLCBpbm5lckVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0V2lkID0gaXRlbXNEaXYub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXNEaXYuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZUl0ZW1zID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGFyZ3M7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB2YXIgaW5uZXJJdGVtcyA9IFtdLnNsaWNlLmNhbGwoZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0sIHRoaXMuZWxlbWVudCkpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudHMpID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gcGFyc2VJbnQoYXJncy50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtQnlJbmRleChpbmRleCwgaW5uZXJJdGVtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMgJiYgZWxlbWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gW10uc2xpY2UuY2FsbChlbGVtZW50cyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnRiYXJFbGUuaW5kZXhPZihlbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtQnlJbmRleChpbmRleCwgaW5uZXJJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckl0ZW1zID0gZWoyX2Jhc2VfMy5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSAoZWxlbWVudHMgJiYgZWxlbWVudHMubGVuZ3RoICYmIGVsZW1lbnRzLmxlbmd0aCA9PT0gMSkgPyBlbGVtZW50c1swXSA6IGFyZ3M7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaW5uZXJJdGVtcy5pbmRleE9mKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbUJ5SW5kZXgoaW5kZXgsIGlubmVySXRlbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZUl0ZW1CeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBpbm5lckl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YmFyRWxlW2luZGV4XSAmJiBpbm5lckl0ZW1zW2luZGV4XSkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVJZHggPSB0aGlzLnRiYXJFbGUuaW5kZXhPZihpbm5lckl0ZW1zW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJhckFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleEFnbiA9IHRoaXMudGJhckFsZ0VsZVsodGhpcy5pdGVtc1tlbGVJZHhdLmFsaWduICsgJ3MnKV0uaW5kZXhPZih0aGlzLnRiYXJFbGVbZWxlSWR4XSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGJhckFsZ0VsZVsodGhpcy5pdGVtc1tlbGVJZHhdLmFsaWduICsgJ3MnKV0uc3BsaWNlKGluZGV4QWduLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2goaW5uZXJJdGVtc1tpbmRleF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGVsZUlkeCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy50YmFyRWxlLnNwbGljZShlbGVJZHgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS50ZW1wbGF0ZVJlbmRlciA9IGZ1bmN0aW9uICh0ZW1wbGF0ZVByb3AsIGlubmVyRWxlLCBpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaXRlbVR5cGUgPSBpdGVtLnR5cGU7XG4gICAgICAgICAgICB2YXIgZWxlT2JqID0gdGVtcGxhdGVQcm9wO1xuICAgICAgICAgICAgdmFyIGlzQ29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAodGVtcGxhdGVQcm9wKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBpc0NvbXBvbmVudCA9IHR5cGVvZiAoZWxlT2JqLmFwcGVuZFRvKSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRlbXBsYXRlUHJvcCkgPT09ICdzdHJpbmcnIHx8ICFpc0NvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0ZW1wbGF0ZVByb3A7XG4gICAgICAgICAgICAgICAgdmFsID0gKHR5cGVvZiAodGVtcGxhdGVQcm9wKSA9PT0gJ3N0cmluZycpID8gdGVtcGxhdGVQcm9wLnRyaW0oKSA6IHRlbXBsYXRlUHJvcDtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWwpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV80LmNvbXBpbGUoZWxlLm91dGVySFRNTC50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2goZWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfNC5jb21waWxlKHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZUZuKSAmJiB0ZW1wbGF0ZUZuKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRlbXBsYXRlRm4oKSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZWxlLnRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLmFwcGVuZENoaWxkKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW1UeXBlID09PSAnSW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICBpdGVtLmlkID8gKGVsZS5pZCA9IGl0ZW0uaWQpIDogKGVsZS5pZCA9IGVqMl9iYXNlXzQuZ2V0VW5pcXVlSUQoJ3Rici1pcHQnKSk7XG4gICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoZWxlKTtcbiAgICAgICAgICAgICAgICBlbGVPYmouYXBwZW5kVG8oZWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfVEVNUExBVEUpO1xuICAgICAgICAgICAgdGhpcy50YmFyRWxlLnB1c2goaW5uZXJFbGUpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5idXR0b25SZW5kZXJpbmcgPSBmdW5jdGlvbiAoaXRlbSwgaW5uZXJFbGUpIHtcbiAgICAgICAgICAgIHZhciBkb20gPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHsgY2xhc3NOYW1lOiBDTFNfVEJBUkJUTiB9KTtcbiAgICAgICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgICAgICB2YXIgdGV4dFN0ciA9IGl0ZW0udGV4dDtcbiAgICAgICAgICAgIHZhciBpY29uQ3NzO1xuICAgICAgICAgICAgdmFyIGljb25Qb3M7XG4gICAgICAgICAgICBpdGVtLmlkID8gKGRvbS5pZCA9IGl0ZW0uaWQpIDogZG9tLmlkID0gZWoyX2Jhc2VfNC5nZXRVbmlxdWVJRCgnZS10YnItYnRuJyk7XG4gICAgICAgICAgICB2YXIgYnRuVHh0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdGJhci1idG4tdGV4dCcgfSk7XG4gICAgICAgICAgICBpZiAodGV4dFN0cikge1xuICAgICAgICAgICAgICAgIGJ0blR4dC5pbm5lckhUTUwgPSB0ZXh0U3RyO1xuICAgICAgICAgICAgICAgIGRvbS5hcHBlbmRDaGlsZChidG5UeHQpO1xuICAgICAgICAgICAgICAgIGRvbS5jbGFzc0xpc3QuYWRkKCdlLXRidG4tdHh0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgJ2UtdGJ0bi1hbGlnbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0ucHJlZml4SWNvbiB8fCBpdGVtLnN1ZmZpeEljb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoKGl0ZW0ucHJlZml4SWNvbiAmJiBpdGVtLnN1ZmZpeEljb24pIHx8IGl0ZW0ucHJlZml4SWNvbikge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ3NzID0gaXRlbS5wcmVmaXhJY29uICsgJyBlLWljb25zJztcbiAgICAgICAgICAgICAgICAgICAgaWNvblBvcyA9ICdsZWZ0JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGljb25Dc3MgPSBpdGVtLnN1ZmZpeEljb24gKyAnIGUtaWNvbnMnO1xuICAgICAgICAgICAgICAgICAgICBpY29uUG9zID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXcgZWoyX2J1dHRvbnNfMS5CdXR0b24oeyBpY29uQ3NzOiBpY29uQ3NzLCBpY29uUG9zaXRpb246IGljb25Qb3MgfSwgZG9tKTtcbiAgICAgICAgICAgIGlmIChpdGVtLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShkb20sIHsgJ3dpZHRoJzogZWoyX2Jhc2VfNC5mb3JtYXRVbml0KGl0ZW0ud2lkdGgpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvbTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyU3ViQ29tcG9uZW50ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpbm5lckVsZTtcbiAgICAgICAgICAgIHZhciBkb207XG4gICAgICAgICAgICBpbm5lckVsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JVEVNIH0pO1xuICAgICAgICAgICAgaW5uZXJFbGUuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGJhckVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGJhckVsZSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uaHRtbEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHIoaXRlbS5odG1sQXR0cmlidXRlcywgaW5uZXJFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udG9vbHRpcFRleHQpIHtcbiAgICAgICAgICAgICAgICBpbm5lckVsZS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgaXRlbS50b29sdGlwVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgIGlubmVyRWxlLmNsYXNzTmFtZSA9IGlubmVyRWxlLmNsYXNzTmFtZSArICcgJyArIGl0ZW0uY3NzQ2xhc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVSZW5kZXIoaXRlbS50ZW1wbGF0ZSwgaW5uZXJFbGUsIGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChpdGVtLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbSA9IHRoaXMuYnV0dG9uUmVuZGVyaW5nKGl0ZW0sIGlubmVyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckVsZS5hcHBlbmRDaGlsZChkb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLml0ZW1DbGljay5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdTZXBhcmF0b3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsIENMU19TRVBBUkFUT1IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uc2hvd1RleHRPbikge1xuICAgICAgICAgICAgICAgIHZhciBzVHh0ID0gaXRlbS5zaG93VGV4dE9uO1xuICAgICAgICAgICAgICAgIGlmIChzVHh0ID09PSAnVG9vbGJhcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJFbGUsIENMU19QT1BVUFRFWFQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgJ2UtdGJ0bi1hbGlnbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzVHh0ID09PSAnT3ZlcmZsb3cnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfVEJBUlRFWFQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLm92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgdmFyIG92ZXJmbG93ID0gaXRlbS5vdmVyZmxvdztcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmZsb3cgPT09ICdTaG93Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lckVsZSwgQ0xTX1RCQVJPVkVSRkxPVyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG92ZXJmbG93ID09PSAnSGlkZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbm5lckVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NFUEFSQVRPUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfUE9QT1ZFUkZMT1cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlubmVyRWxlO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5pdGVtQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVTd2l0Y2goZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuYWN0aXZlRWxlU3dpdGNoID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVSZW1vdmUoZWxlLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmFjdGl2ZUVsZVJlbW92ZSA9IGZ1bmN0aW9uIChjdXJFbGUpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmFjdGl2ZUVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUVsZSA9IGN1ckVsZTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudHJndEVsZSkgJiYgIWN1ckVsZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEVNUExBVEUpKSB7XG4gICAgICAgICAgICAgICAgY3VyRWxlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChbXSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Rvb2xiYXInO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdGhpcy50YlJlc2l6ZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1Qb3NpdGlvbmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucG9wT2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNoZWNrT3ZlcmZsb3cgPSB0aGlzLmNoZWNrT3ZlcmZsb3coZWxlLCBlbGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDTFNfSVRFTVMpWzBdKTtcbiAgICAgICAgICAgIGlmICghY2hlY2tPdmVyZmxvdykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUhTY3JvbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGVja092ZXJmbG93ICYmIHRoaXMuc2Nyb2xsTW9kdWxlICYmICh0aGlzLm9mZnNldFdpZCA9PT0gZWxlLm9mZnNldFdpZHRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9mZnNldFdpZCA+IGVsZS5vZmZzZXRXaWR0aCB8fCBjaGVja092ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPdmVyZmxvd01vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRiYXJBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBSZWZyZXNoKHRoaXMucG9wT2JqLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YmFyQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9mZnNldFdpZCA9IGVsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHRoaXMudGJSZXNpemUgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgdmFyIHRFbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2l0ZW1zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveU1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck92ZXJmbG93TW9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aWQgPSB0RWxlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0RWxlLCB7ICd3aWR0aCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdChuZXdQcm9wLndpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3BPYmogJiYgd2lkIDwgdEVsZS5vZmZzZXRXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXBSZWZyZXNoKHRoaXMucG9wT2JqLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdChuZXdQcm9wLmhlaWdodCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3ZlcmZsb3dNb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveU1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcmZsb3dNb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZCh0RWxlLCBDTFNfUlRMKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcC5lbmFibGVSdGwgPyB0aGlzLmFkZCh0RWxlLCBDTFNfUlRMKSA6IHRoaXMucmVtb3ZlKHRFbGUsIENMU19SVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc2Nyb2xsTW9kdWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3AuZW5hYmxlUnRsID8gdGhpcy5hZGQodGhpcy5zY3JvbGxNb2R1bGUuZWxlbWVudCwgQ0xTX1JUTCkgOiB0aGlzLnJlbW92ZSh0aGlzLnNjcm9sbE1vZHVsZS5lbGVtZW50LCBDTFNfUlRMKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBvcE9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wLmVuYWJsZVJ0bCA/IHRoaXMuYWRkKHRoaXMucG9wT2JqLmVsZW1lbnQsIENMU19SVEwpIDogdGhpcy5yZW1vdmUodGhpcy5wb3BPYmouZWxlbWVudCwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUb29sYmFyO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBJdGVtKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcIml0ZW1zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTY3JvbGxhYmxlJylcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJvdmVyZmxvd01vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJlbmFibGVSdGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVG9vbGJhci5wcm90b3R5cGUsIFwiY2xpY2tlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRvb2xiYXIucHJvdG90eXBlLCBcImRlc3Ryb3llZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sYmFyLnByb3RvdHlwZSwgXCJiZWZvcmVDcmVhdGVcIiwgdm9pZCAwKTtcbiAgICBUb29sYmFyID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzUuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgVG9vbGJhcik7XG4gICAgZXhwb3J0cy5Ub29sYmFyID0gVG9vbGJhcjtcbiAgICBleHBvcnRzLnRvb2xiYXJCdWlsZGVyID0gZWoyX2Jhc2VfNS5DcmVhdGVCdWlsZGVyKFRvb2xiYXIpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90b29sYmFyL3Rvb2xiYXIuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIlxuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfN19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIlxuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2FjY29yZGlvblwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGFjY29yZGlvbl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChhY2NvcmRpb25fMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FjY29yZGlvbi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9iYXNlXzYpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENMU19BQ1JETl9ST09UID0gJ2UtYWNyZG4tcm9vdCc7XG4gICAgdmFyIENMU19ST09UID0gJ2UtYWNjb3JkaW9uJztcbiAgICB2YXIgQ0xTX0lURU0gPSAnZS1hY3Jkbi1pdGVtJztcbiAgICB2YXIgQ0xTX0lURU1GT0NVUyA9ICdlLWl0ZW0tZm9jdXMnO1xuICAgIHZhciBDTFNfSVRFTUhJREUgPSAnZS1oaWRlJztcbiAgICB2YXIgQ0xTX0hFQURFUiA9ICdlLWFjcmRuLWhlYWRlcic7XG4gICAgdmFyIENMU19IRUFERVJJQ04gPSAnZS1hY3Jkbi1oZWFkZXItaWNvbic7XG4gICAgdmFyIENMU19IRUFERVJDVE4gPSAnZS1hY3Jkbi1oZWFkZXItY29udGVudCc7XG4gICAgdmFyIENMU19DT05URU5UID0gJ2UtYWNyZG4tcGFuZWwnO1xuICAgIHZhciBDTFNfQ1RFTlQgPSAnZS1jb250ZW50JztcbiAgICB2YXIgQ0xTX1RPT0dMRUlDTiA9ICdlLXRvZ2dsZS1pY29uJztcbiAgICB2YXIgQ0xTX0NPTExBUFNFSUNOID0gJ2UtdGdsLWNvbGxhcHNlLWljb24gZS1pY29ucyc7XG4gICAgdmFyIENMU19FWFBBTkRJQ04gPSAnZS1leHBhbmQtaWNvbic7XG4gICAgdmFyIENMU19SVEwgPSAnZS1ydGwnO1xuICAgIHZhciBDTFNfQ1ROSElERSA9ICdlLWNvbnRlbnQtaGlkZSc7XG4gICAgdmFyIENMU19TTENUID0gJ2Utc2VsZWN0JztcbiAgICB2YXIgQ0xTX1NMQ1RFRCA9ICdlLXNlbGVjdGVkJztcbiAgICB2YXIgQ0xTX0FDVElWRSA9ICdlLWFjdGl2ZSc7XG4gICAgdmFyIENMU19BTklNQVRFID0gJ2UtYW5pbWF0ZSc7XG4gICAgdmFyIENMU19ESVNBQkxFID0gJ2Utb3ZlcmxheSc7XG4gICAgdmFyIENMU19UT0dBTklNQVRFID0gJ2UtdG9nZ2xlLWFuaW1hdGlvbic7XG4gICAgdmFyIENMU19ORVNUID0gJ2UtbmVzdGVkJztcbiAgICB2YXIgQ0xTX0VYUEFORFNUQVRFID0gJ2UtZXhwYW5kLXN0YXRlJztcbiAgICB2YXIgQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY29yZGlvbkFjdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzQuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTbGlkZURvd24nKVxuICAgIF0sIEFjY29yZGlvbkFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJlZmZlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSg0MDApXG4gICAgXSwgQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImR1cmF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2xpbmVhcicpXG4gICAgXSwgQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImVhc2luZ1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWNjb3JkaW9uQWN0aW9uU2V0dGluZ3MgPSBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncztcbiAgICB2YXIgQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWNjb3JkaW9uQW5pbWF0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY29yZGlvbkFuaW1hdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzQuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV81LkNvbXBsZXgoeyBlZmZlY3Q6ICdTbGlkZVVwJywgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnbGluZWFyJyB9LCBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncylcbiAgICBdLCBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sbGFwc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNS5Db21wbGV4KHsgZWZmZWN0OiAnU2xpZGVEb3duJywgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnbGluZWFyJyB9LCBBY2NvcmRpb25BY3Rpb25TZXR0aW5ncylcbiAgICBdLCBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZXhwYW5kXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5BY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncyA9IEFjY29yZGlvbkFuaW1hdGlvblNldHRpbmdzO1xuICAgIHZhciBBY2NvcmRpb25JdGVtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjY29yZGlvbkl0ZW0sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY29yZGlvbkl0ZW0oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFjY29yZGlvbkl0ZW07XG4gICAgfShlajJfYmFzZV80LkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh1bmRlZmluZWQpXG4gICAgXSwgQWNjb3JkaW9uSXRlbS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHVuZGVmaW5lZClcbiAgICBdLCBBY2NvcmRpb25JdGVtLnByb3RvdHlwZSwgXCJoZWFkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh1bmRlZmluZWQpXG4gICAgXSwgQWNjb3JkaW9uSXRlbS5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh1bmRlZmluZWQpXG4gICAgXSwgQWNjb3JkaW9uSXRlbS5wcm90b3R5cGUsIFwiaWNvbkNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEFjY29yZGlvbkl0ZW0ucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5BY2NvcmRpb25JdGVtID0gQWNjb3JkaW9uSXRlbTtcbiAgICB2YXIgQWNjb3JkaW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjY29yZGlvbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQWNjb3JkaW9uKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5rZXlDb25maWdzID0ge1xuICAgICAgICAgICAgICAgIG1vdmVVcDogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVEb3duOiAnZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBlbnRlcjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBzcGFjZTogJ3NwYWNlJyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmlzRGVzdHJveSA9IHRydWU7XG4gICAgICAgICAgICB3aGlsZSAoZWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQ2hpbGQoZWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHJndEVsZSkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLmN0cmxUZW0uZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQodGhpcy5jdHJsVGVtLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICBbJ2FyaWEtZGlzYWJsZWQnLCAnYXJpYS1tdWx0aXNlbGVjdGFibGUnLCAncm9sZSddLmZvckVhY2goZnVuY3Rpb24gKGF0dHJiKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG5lc3RlZCA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0aGlzLmVsZW1lbnQsICcuJyArIENMU19DT05URU5UKTtcbiAgICAgICAgICAgIHRoaXMuaXNOZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRGVzdHJveSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKG5lc3RlZCkpIHtcbiAgICAgICAgICAgICAgICBuZXN0ZWQuY2xhc3NMaXN0LmFkZChDTFNfTkVTVCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc05lc3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfQUNSRE5fUk9PVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmVsZW1lbnQsIENMU19SVEwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1zID0gW107XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGVsZSwgdmFsKSB7XG4gICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZCh2YWwpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlbGUsIHZhbCkge1xuICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUodmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udHJvbCgpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGVqMl9iYXNlXzYuZm9ybWF0VW5pdCh0aGlzLndpZHRoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlajJfYmFzZV82LmZvcm1hdFVuaXQodGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ3dpZHRoJzogd2lkdGgsICdoZWlnaHQnOiBoZWlnaHQgfSk7XG4gICAgICAgICAgICB2YXIgYXJpYUF0dHIgPSB7XG4gICAgICAgICAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnLCAncm9sZSc6ICdwcmVzZW50YXRpb24nLCAnYXJpYS1tdWx0aXNlbGVjdGFibGUnOiAndHJ1ZSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5leHBhbmRlZEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRFeHBhbmQgPSB0aGlzLmV4cGFuZGVkSXRlbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCBhcmlhQXR0cik7XG4gICAgICAgICAgICBpZiAodGhpcy5leHBhbmRNb2RlID09PSAnU2luZ2xlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUucmVuZGVyQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudHJndEVsZSA9ICh0aGlzLmVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkgPyBlajJfYmFzZV8zLnNlbGVjdCgnZGl2JywgdGhpcy5lbGVtZW50KSA6IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRJdGVtRXhwYW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMua2V5TW9kdWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5TW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmVzdGVkICYmICF0aGlzLmlzRGVzdHJveSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmlwcGxlRWZmZWN0KHRoaXMuZWxlbWVudCwgeyBzZWxlY3RvcjogJy4nICsgQ0xTX0hFQURFUiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc05lc3RlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5TW9kdWxlID0gbmV3IGVqMl9iYXNlXzEuS2V5Ym9hcmRFdmVudHModGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlBY3Rpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGtleUNvbmZpZ3M6IHRoaXMua2V5Q29uZmlncyxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAna2V5ZG93bidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5mb2N1c0luID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTFNfSVRFTUZPQ1VTKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5mb2N1c091dCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0lURU1GT0NVUyk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuY3RybFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY3RybFRlbSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGVzID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFkZENsYXNzKGlubmVyRWxlcywgW0NMU19JVEVNXSk7XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKGlubmVyRWxlcykuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBlbC5pZCA9IGVqMl9iYXNlXzIuZ2V0VW5pcXVlSUQoJ2FjcmRuX2l0ZW0nKTtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGQoZWwuY2hpbGRyZW5bMF0sIENMU19IRUFERVIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gZWwuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhoZWFkZXIsIHsgJ3RhYmluZGV4JzogJzAnLCAncm9sZSc6ICdoZWFkaW5nJywgJ2FyaWEtbGV2ZWwnOiBpbm5lckVsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5pZCA9IGVqMl9iYXNlXzIuZ2V0VW5pcXVlSUQoJ2FjcmRuX2hlYWRlcicpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoaGVhZGVyLCAnZm9jdXMnLCBfdGhpcy5mb2N1c0luLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChoZWFkZXIsICdibHVyJywgX3RoaXMuZm9jdXNPdXQsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlckVsZSA9IGhlYWRlci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlckVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyRWxlLmNsYXNzTGlzdC5hZGQoQ0xTX0hFQURFUkNUTik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGVsLmNoaWxkcmVuWzFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5pZCA9IGVqMl9iYXNlXzIuZ2V0VW5pcXVlSUQoJ2FjcmRuX3BhbmVsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgY29udGVudC5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoQ0xTX1NMQ1QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5bMF0uYXBwZW5kQ2hpbGQoX3RoaXMudG9nZ2xlSWNvbkdlbmVyYXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY29udGVudCwgW0NMU19DT05URU5ULCBDTFNfQ1ROSElERV0sIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhjb250ZW50LCB7ICdhcmlhLWxhYmVsbGVkYnknOiBoZWFkZXIuaWQsICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoQ0xTX0NURU5UKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnRvZ2dsZUljb25HZW5lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0Z2xJY29uID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX1RPT0dMRUlDTiB9KTtcbiAgICAgICAgICAgIHZhciBoZHJDb2xJY29uID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IENMU19DT0xMQVBTRUlDTiB9KTtcbiAgICAgICAgICAgIHRnbEljb24uYXBwZW5kQ2hpbGQoaGRyQ29sSWNvbik7XG4gICAgICAgICAgICByZXR1cm4gdGdsSWNvbjtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5pbml0SXRlbUV4cGFuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSB0aGlzLmluaXRFeHBhbmQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmV4cGFuZE1vZGUgPT09ICdTaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKHRydWUsIHRoaXMuaW5pdEV4cGFuZFtsZW4gLSAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kSXRlbSh0cnVlLCB0aGlzLmluaXRFeHBhbmRbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5yZW5kZXJJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgdmFyIGlubmVySXRlbTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuaW5pdEV4cGFuZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRFeHBhbmQgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuaXRlbXM7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQodGhpcy50cmd0RWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3RybFRlbXBsYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGUgJiYgaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVySXRlbSA9IF90aGlzLnJlbmRlcklubmVySXRlbShpdGVtLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChpbm5lckl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJJdGVtLmNoaWxkRWxlbWVudENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGlubmVySXRlbS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IRUFERVIpLCAnZm9jdXMnLCBfdGhpcy5mb2N1c0luLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoaW5uZXJJdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0hFQURFUiksICdibHVyJywgX3RoaXMuZm9jdXNPdXQsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRyZ3QgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7fTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciB0Z2xJY29uO1xuICAgICAgICAgICAgdmFyIGFjcmRFbGUgPSBlajJfYmFzZV8zLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX1JPT1QpO1xuICAgICAgICAgICAgaWYgKGFjcmRFbGUgIT09IHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyZ3QuY2xhc3NMaXN0LmFkZCgnZS10YXJnZXQnKTtcbiAgICAgICAgICAgIHZhciBhY3Jkbkl0ZW0gPSBlajJfYmFzZV8zLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgdmFyIGFjcmRuSGRyID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19IRUFERVIpO1xuICAgICAgICAgICAgdmFyIGFjcmRuQ3RuID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19DT05URU5UKTtcbiAgICAgICAgICAgIGlmIChhY3Jkbkl0ZW0gJiYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoYWNyZG5IZHIpIHx8IGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoYWNyZG5DdG4pKSkge1xuICAgICAgICAgICAgICAgIGFjcmRuSGRyID0gYWNyZG5JdGVtLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgIGFjcmRuQ3RuID0gYWNyZG5JdGVtLmNoaWxkcmVuWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFjcmRuSGRyKSB7XG4gICAgICAgICAgICAgICAgdGdsSWNvbiA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19UT09HTEVJQ04sIGFjcmRuSGRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhY3JkbkN0bkl0ZW07XG4gICAgICAgICAgICBpZiAoYWNyZG5DdG4pIHtcbiAgICAgICAgICAgICAgICBhY3JkbkN0bkl0ZW0gPSBlajJfYmFzZV8zLmNsb3Nlc3QoYWNyZG5DdG4sICcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhY3JkQWN0aXZlID0gW107XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0SW5kZXhCeUl0ZW0oYWNyZG5JdGVtKTtcbiAgICAgICAgICAgIGlmIChhY3JkbkN0bkl0ZW0pIHtcbiAgICAgICAgICAgICAgICBldmVudEFyZ3MuaXRlbSA9IHRoaXMuaXRlbXNbdGhpcy5nZXRJbmRleEJ5SXRlbShhY3JkbkN0bkl0ZW0pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50QXJncy5vcmlnaW5hbEV2ZW50ID0gZTtcbiAgICAgICAgICAgIHZhciBjdG5DaGVjayA9ICFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRnbEljb24pICYmIGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQodGhpcy50cmd0RWxlKSAmJiBhY3Jkbkl0ZW0uY2hpbGRFbGVtZW50Q291bnQgPD0gMTtcbiAgICAgICAgICAgIGlmIChjdG5DaGVjayAmJiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChhY3JkbkN0bikgfHwgIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiArICcgLicgKyBDTFNfVE9PR0xFSUNOLCBhY3JkbkN0bkl0ZW0pKSkpIHtcbiAgICAgICAgICAgICAgICBhY3Jkbkl0ZW0uYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50UmVuZGVyaW5nKGluZGV4KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhQXR0clVwZGF0ZShhY3Jkbkl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbGlja2VkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIHZhciBjbnRjbGtDaGVjayA9IChhY3JkbkN0biAmJiAhZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8zLnNlbGVjdCgnLmUtdGFyZ2V0JywgYWNyZG5DdG4pKSk7XG4gICAgICAgICAgICBjbnRjbGtDaGVjayA9IGNudGNsa0NoZWNrICYmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19ST09ULCBhY3JkbkN0bikpIHx8ICEoZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19ST09UKSA9PT0gdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICB0cmd0LmNsYXNzTGlzdC5yZW1vdmUoJ2UtdGFyZ2V0Jyk7XG4gICAgICAgICAgICBpZiAodHJndC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0NPTlRFTlQpIHx8IHRyZ3QuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19DVEVOVCkgfHwgY250Y2xrQ2hlY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjcmRBY3RpdmUucHVzaChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgYWNyZEFuaUVsZSA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQ0xTX0lURU0gKyAnIFsnICsgQ0xTX0FOSU1BVEUgKyAnXScpKTtcbiAgICAgICAgICAgIGlmIChhY3JkQW5pRWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFjcmRBbmlFbGVfMSA9IGFjcmRBbmlFbGU7IF9pIDwgYWNyZEFuaUVsZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBhY3JkQW5pRWxlXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICBhY3JkQWN0aXZlLnB1c2goZWwucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNhbWVDb250ZW50Q2hlY2sgPSBhY3JkQWN0aXZlLmluZGV4T2YoYWNyZG5DdG5JdGVtKSAhPT0gLTEgJiYgYWNyZG5DdG4uZ2V0QXR0cmlidXRlKCdlLWFuaW1hdGUnKSA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgdmFyIHNhbWVIZWFkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChhY3Jkbkl0ZW0pICYmICFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGFjcmRuSGRyKSkge1xuICAgICAgICAgICAgICAgIHZhciBhY3JkbkN0bl8xID0gZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIGFjcmRuSXRlbSk7XG4gICAgICAgICAgICAgICAgdmFyIGFjcmRuUm9vdCA9IGVqMl9iYXNlXzMuY2xvc2VzdChhY3Jkbkl0ZW0sICcuJyArIENMU19BQ1JETl9ST09UKTtcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kU3RhdGUgPSBhY3JkblJvb3QucXVlcnlTZWxlY3RvcignLicgKyBDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGFjcmRuQ3RuXzEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2FtZUhlYWRlciA9IChleHBhbmRTdGF0ZSA9PT0gYWNyZG5JdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc1Zpc2libGUoYWNyZG5DdG5fMSkgJiYgKCFzYW1lQ29udGVudENoZWNrIHx8IGFjcmRuQ3RuSXRlbS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NMQ1RFRCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UoYWNyZG5DdG5fMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGFjcmRBY3RpdmUubGVuZ3RoID4gMCkgJiYgdGhpcy5leHBhbmRNb2RlID09PSAnU2luZ2xlJyAmJiAhc2FtZUNvbnRlbnRDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNyZEFjdGl2ZS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlKGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19DT05URU5ULCBlbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0VYUEFORFNUQVRFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kKGFjcmRuQ3RuXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZXhwYW5kU3RhdGUpICYmICFzYW1lSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZFN0YXRlLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0VYUEFORFNUQVRFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZWxlTW92ZUZvY3VzID0gZnVuY3Rpb24gKGFjdGlvbiwgcm9vdCwgdHJndCkge1xuICAgICAgICAgICAgdmFyIGNsc3Q7XG4gICAgICAgICAgICB2YXIgY2xzdEl0ZW0gPSBlajJfYmFzZV8zLmNsb3Nlc3QodHJndCwgJy4nICsgQ0xTX0lURU0pO1xuICAgICAgICAgICAgaWYgKHRyZ3QgPT09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICBjbHN0ID0gKChhY3Rpb24gPT09ICdtb3ZlVXAnID8gdHJndC5sYXN0RWxlbWVudENoaWxkIDogdHJndCkucXVlcnlTZWxlY3RvcignLicgKyBDTFNfSEVBREVSKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0cmd0LmNsYXNzTGlzdC5jb250YWlucyhDTFNfSEVBREVSKSkge1xuICAgICAgICAgICAgICAgIGNsc3RJdGVtID0gKGFjdGlvbiA9PT0gJ21vdmVVcCcgPyBjbHN0SXRlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIDogY2xzdEl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoY2xzdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2xzdCA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19IRUFERVIsIGNsc3RJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2xzdCkge1xuICAgICAgICAgICAgICAgIGNsc3QuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5rZXlBY3Rpb25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBjbHN0O1xuICAgICAgICAgICAgdmFyIHJvb3QgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgdHJndCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVVwJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVNb3ZlRm9jdXMoZS5hY3Rpb24sIHJvb3QsIHRyZ3QpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlRG93bic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlTW92ZUZvY3VzKGUuYWN0aW9uLCByb290LCB0cmd0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3BhY2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHRyZ3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoY29udGVudCkgJiYgY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0NPTlRFTlQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5nZXRBdHRyaWJ1dGUoJ2UtYW5pbWF0ZScpICE9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmd0LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmd0LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgY2xzdCA9IGUuYWN0aW9uID09PSAnaG9tZScgPyByb290LmZpcnN0RWxlbWVudENoaWxkLmNoaWxkcmVuWzBdIDogcm9vdC5sYXN0RWxlbWVudENoaWxkLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgICAgICBjbHN0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmhlYWRlckVsZUdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19IRUFERVIsIGlkOiBlajJfYmFzZV8yLmdldFVuaXF1ZUlEKCdhY3Jkbl9oZWFkZXInKSB9KTtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0ciA9IHtcbiAgICAgICAgICAgICAgICAndGFiaW5kZXgnOiAnMCcsICdyb2xlJzogJ2hlYWRpbmcnLCAnYXJpYS1leHBhbmRlZCc6ICdmYWxzZScsICdhcmlhLXNlbGVjdGVkJzogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICAnYXJpYS1kaXNhYmxlZCc6ICdmYWxzZScsICdhcmlhLWxldmVsJzogdGhpcy5pdGVtcy5sZW5ndGgudG9TdHJpbmcoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhoZWFkZXIsIGFyaWFBdHRyKTtcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXI7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUucmVuZGVySW5uZXJJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJFbGU7XG4gICAgICAgICAgICBpbm5lckVsZSA9IGVqMl9iYXNlXzUuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19JVEVNIH0pO1xuICAgICAgICAgICAgaW5uZXJFbGUuaWQgPSBlajJfYmFzZV8yLmdldFVuaXF1ZUlEKCdhY3Jkbl9pdGVtJyk7XG4gICAgICAgICAgICBpZiAoaXRlbS5oZWFkZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3RuRWxlID0gdGhpcy5oZWFkZXJFbGVHZW5lcmF0ZSgpO1xuICAgICAgICAgICAgICAgIHZhciBoZHJFbGUgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSEVBREVSQ1ROIH0pO1xuICAgICAgICAgICAgICAgIGN0bkVsZS5hcHBlbmRDaGlsZChoZHJFbGUpO1xuICAgICAgICAgICAgICAgIGN0bkVsZS5hcHBlbmRDaGlsZCh0aGlzLmZldGNoRWxlbWVudChoZHJFbGUsIGl0ZW0uaGVhZGVyLCBpbmRleCwgdHJ1ZSkpO1xuICAgICAgICAgICAgICAgIGlubmVyRWxlLmFwcGVuZENoaWxkKGN0bkVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaGRyID0gZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgaW5uZXJFbGUpO1xuICAgICAgICAgICAgaWYgKGl0ZW0uZXhwYW5kZWQgJiYgIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpICYmICghdGhpcy5lbmFibGVQZXJzaXN0ZW5jZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0RXhwYW5kLmluZGV4T2YoaW5kZXgpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRFeHBhbmQucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICBpbm5lckVsZS5jbGFzc0xpc3QuYWRkKGl0ZW0uY3NzQ2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uaWNvbkNzcykge1xuICAgICAgICAgICAgICAgIHZhciBoZHJJY25FbGUgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfSEVBREVSSUNOIH0pO1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IGl0ZW0uaWNvbkNzcyArICcgZS1pY29ucycgfSk7XG4gICAgICAgICAgICAgICAgaGRySWNuRWxlLmFwcGVuZENoaWxkKGljb24pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGhkcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaGRyID0gdGhpcy5oZWFkZXJFbGVHZW5lcmF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBoZHIuYXBwZW5kQ2hpbGQoaGRySWNuRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoaGRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhkci5pbnNlcnRCZWZvcmUoaGRySWNuRWxlLCBoZHIuY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uY29udGVudCkge1xuICAgICAgICAgICAgICAgIHZhciBoZHJJY29uID0gdGhpcy50b2dnbGVJY29uR2VuZXJhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChoZHIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkciA9IHRoaXMuaGVhZGVyRWxlR2VuZXJhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJFbGUuYXBwZW5kQ2hpbGQoaGRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGRyLmFwcGVuZENoaWxkKGhkckljb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyRWxlLCBDTFNfU0xDVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJFbGU7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZmV0Y2hFbGVtZW50ID0gZnVuY3Rpb24gKGVsZSwgdmFsdWUsIGluZGV4LCBpc0hlYWRlcikge1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm47XG4gICAgICAgICAgICB2YXIgdGVtU3RyaW5nO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWx1ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVWYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtU3RyaW5nID0gZWxlVmFsLm91dGVySFRNTC50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUodGVtU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5kZXRhY2goZWxlVmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRlbXBsYXRlRm4pICYmIHRlbXBsYXRlRm4oKS5sZW5ndGggPiAwICYmICEoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZUZuKClbMF0udGFnTmFtZSkgJiYgdGVtcGxhdGVGbigpLmxlbmd0aCA9PT0gMSkpIHtcbiAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRlbXBsYXRlRm4oKSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVsLnRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQodGVtU3RyaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLmhlYWRlciA9IHRlbVN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLmNvbnRlbnQgPSB0ZW1TdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGUuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmFyaWFBdHRyVXBkYXRlID0gZnVuY3Rpb24gKGl0ZW1FbGUpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSBlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCBpdGVtRWxlKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gZWoyX2Jhc2VfMy5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIGl0ZW1FbGUpO1xuICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGNvbnRlbnQuaWQpO1xuICAgICAgICAgICAgY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWxsZWRieScsIGhlYWRlci5pZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuY29udGVudFJlbmRlcmluZyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLml0ZW1zW2luZGV4XS5jb250ZW50O1xuICAgICAgICAgICAgdmFyIGl0ZW1jbnQgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfQ09OVEVOVCArICcgJyArIENMU19DVE5ISURFLCBpZDogZWoyX2Jhc2VfMi5nZXRVbmlxdWVJRCgnYWNyZG5fcGFuZWwnKSB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhpdGVtY250LCB7ICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9KTtcbiAgICAgICAgICAgIHZhciBjdG4gPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfQ1RFTlQgfSk7XG4gICAgICAgICAgICBpdGVtY250LmFwcGVuZENoaWxkKHRoaXMuZmV0Y2hFbGVtZW50KGN0biwgY29udGVudCwgaW5kZXgsIGZhbHNlKSk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbWNudDtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmQgPSBmdW5jdGlvbiAodHJndCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncztcbiAgICAgICAgICAgIHZhciB0cmd0SXRlbUVsZSA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0cmd0LCAnLicgKyBDTFNfSVRFTSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZCh0cmd0KSB8fCAoZWoyX2Jhc2VfMy5pc1Zpc2libGUodHJndCkgJiYgdHJndC5nZXRBdHRyaWJ1dGUoJ2UtYW5pbWF0ZScpICE9PSAndHJ1ZScpIHx8IHRyZ3RJdGVtRWxlLmNsYXNzTGlzdC5jb250YWlucyhDTFNfRElTQUJMRSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWNyZG5Sb290ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3RJdGVtRWxlLCAnLicgKyBDTFNfQUNSRE5fUk9PVCk7XG4gICAgICAgICAgICB2YXIgZXhwYW5kU3RhdGUgPSBhY3JkblJvb3QucXVlcnlTZWxlY3RvcignLicgKyBDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFuaW1hdGlvbi5leHBhbmQuZWZmZWN0LFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvbi5leHBhbmQuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgdGltaW5nRnVuY3Rpb246IHRoaXMuYW5pbWF0aW9uLmV4cGFuZC5lYXNpbmdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19UT09HTEVJQ04sIHRyZ3RJdGVtRWxlKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGV2ZW50QXJncyA9IHsgZWxlbWVudDogdHJndEl0ZW1FbGUsXG4gICAgICAgICAgICAgICAgaXRlbTogdGhpcy5pdGVtc1t0aGlzLmdldEluZGV4QnlJdGVtKHRyZ3RJdGVtRWxlKV0sXG4gICAgICAgICAgICAgICAgaXNFeHBhbmRlZDogdHJ1ZSB9O1xuICAgICAgICAgICAgdmFyIGVmZiA9IGFuaW1hdGlvbi5uYW1lO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdleHBhbmRpbmcnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoQ0xTX1RPR0FOSU1BVEUpO1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1zUHVzaCh0cmd0SXRlbUVsZSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZXhwYW5kU3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgZXhwYW5kU3RhdGUuY2xhc3NMaXN0LnJlbW92ZShDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJndEl0ZW1FbGUuY2xhc3NMaXN0LmFkZChDTFNfRVhQQU5EU1RBVEUpO1xuICAgICAgICAgICAgaWYgKChhbmltYXRpb24ubmFtZSA9PT0gJ05vbmUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kUHJvZ3Jlc3MoJ2JlZ2luJywgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRQcm9ncmVzcygnZW5kJywgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBhbmRBbmltYXRpb24oZWZmLCBpY29uLCB0cmd0LCB0cmd0SXRlbUVsZSwgYW5pbWF0aW9uLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmV4cGFuZEFuaW1hdGlvbiA9IGZ1bmN0aW9uIChlZiwgaWNuLCB0cmd0LCB0cmd0SXRlbUVsZSwgYW5pbWF0ZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBoZWlnaHQ7XG4gICAgICAgICAgICB2YXIgdHJndEhndDtcbiAgICAgICAgICAgIGlmIChlZiA9PT0gJ1NsaWRlRG93bicpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmRQcm9ncmVzcygnYmVnaW4nLCBpY24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IHRyZ3RJdGVtRWxlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdHJndEhndCA9IHRyZ3Qub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0cmd0LnN0eWxlLm1heEhlaWdodCA9ICh0cmd0Lm9mZnNldEhlaWdodCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB0cmd0SXRlbUVsZS5zdHlsZS5tYXhIZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3RJdGVtRWxlLnN0eWxlLm1pbkhlaWdodCA9IChoZWlnaHQgKyB0cmd0Lm9mZnNldEhlaWdodCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuc2V0U3R5bGVBdHRyaWJ1dGUodHJndCwgeyAncG9zaXRpb24nOiAnJywgJ21heEhlaWdodCc6ICcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0cmd0SXRlbUVsZS5zdHlsZS5taW5IZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kUHJvZ3Jlc3MoJ2VuZCcsIGljbiwgdHJndCwgdHJndEl0ZW1FbGUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmRQcm9ncmVzcygnYmVnaW4nLCBpY24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmRQcm9ncmVzcygnZW5kJywgaWNuLCB0cmd0LCB0cmd0SXRlbUVsZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV80LkFuaW1hdGlvbihhbmltYXRlKS5hbmltYXRlKHRyZ3QpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmV4cGFuZFByb2dyZXNzID0gZnVuY3Rpb24gKHByb2dyZXNzLCBpY29uLCB0cmd0LCB0cmd0SXRlbUVsZSwgZXZlbnRBcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0cmd0LCBDTFNfQ1ROSElERSk7XG4gICAgICAgICAgICB0aGlzLmFkZCh0cmd0SXRlbUVsZSwgQ0xTX1NMQ1RFRCk7XG4gICAgICAgICAgICB0aGlzLmFkZChpY29uLCBDTFNfRVhQQU5ESUNOKTtcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcyA9PT0gJ2VuZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0cmd0SXRlbUVsZSwgQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICAgICAgdHJndC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRyZ3QucHJldmlvdXNFbGVtZW50U2libGluZywgeyAnYXJpYS1zZWxlY3RlZCc6ICd0cnVlJywgJ2FyaWEtZXhwYW5kZWQnOiAndHJ1ZScgfSk7XG4gICAgICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKENMU19UT0dBTklNQVRFKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2V4cGFuZGVkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRlZEl0ZW1zUHVzaCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEluZGV4QnlJdGVtKGl0ZW0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRJdGVtcy5pbmRleE9mKGluZGV4KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZ2V0SW5kZXhCeUl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LmNoaWxkcmVuKS5pbmRleE9mKGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmV4cGFuZGVkSXRlbXNQb3AgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleEJ5SXRlbShpdGVtKTtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtcy5zcGxpY2UodGhpcy5leHBhbmRlZEl0ZW1zLmluZGV4T2YoaW5kZXgpLCAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5jb2xsYXBzZSA9IGZ1bmN0aW9uICh0cmd0KSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzO1xuICAgICAgICAgICAgdmFyIHRyZ3RJdGVtRWxlID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRyZ3QsICcuJyArIENMU19JVEVNKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKHRyZ3QpIHx8ICFlajJfYmFzZV8zLmlzVmlzaWJsZSh0cmd0KSB8fCB0cmd0SXRlbUVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0RJU0FCTEUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5lZmZlY3QsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLmNvbGxhcHNlLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5lYXNpbmcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfVE9PR0xFSUNOLCB0cmd0SXRlbUVsZSkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBldmVudEFyZ3MgPSB7IGVsZW1lbnQ6IHRyZ3RJdGVtRWxlLFxuICAgICAgICAgICAgICAgIGl0ZW06IHRoaXMuaXRlbXNbdGhpcy5nZXRJbmRleEJ5SXRlbSh0cmd0SXRlbUVsZSldLFxuICAgICAgICAgICAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB2YXIgZWZmID0gYW5pbWF0aW9uLm5hbWU7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2V4cGFuZGluZycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtc1BvcCh0cmd0SXRlbUVsZSk7XG4gICAgICAgICAgICB0cmd0SXRlbUVsZS5jbGFzc0xpc3QuYWRkKENMU19FWFBBTkRTVEFURSk7XG4gICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoQ0xTX1RPR0FOSU1BVEUpO1xuICAgICAgICAgICAgaWYgKChhbmltYXRpb24ubmFtZSA9PT0gJ05vbmUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VQcm9ncmVzcygnYmVnaW4nLCBpY29uLCB0cmd0LCB0cmd0SXRlbUVsZSwgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlUHJvZ3Jlc3MoJ2VuZCcsIGljb24sIHRyZ3QsIHRyZ3RJdGVtRWxlLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbmltYXRpb24oZWZmLCB0cmd0LCB0cmd0SXRlbUVsZSwgaWNvbiwgYW5pbWF0aW9uLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmNvbGxhcHNlQW5pbWF0aW9uID0gZnVuY3Rpb24gKGVmLCB0cmd0LCB0cmd0SXRFbCwgaWNuLCBhbmltYXRlLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGhlaWdodDtcbiAgICAgICAgICAgIHZhciB0cmd0SGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGl0ZW1IZWlnaHQ7XG4gICAgICAgICAgICB2YXIgcmVtYWluO1xuICAgICAgICAgICAgaWYgKGVmID09PSAnU2xpZGVVcCcpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtSGVpZ2h0ID0gdHJndEl0RWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0cmd0SXRFbC5zdHlsZS5taW5IZWlnaHQgPSBpdGVtSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgdHJndC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IHRyZ3RJdEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdHJndEhlaWdodCA9IHRyZ3Qub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0cmd0LnN0eWxlLm1heEhlaWdodCA9IHRyZ3RIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2xsYXBzZVByb2dyZXNzKCdiZWdpbicsIGljbiwgdHJndCwgdHJndEl0RWwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluID0gKChoZWlnaHQgLSAodHJndEhlaWdodCAtIHRyZ3Qub2Zmc2V0SGVpZ2h0KSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluIDwgaXRlbUhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJndEl0RWwuc3R5bGUubWluSGVpZ2h0ID0gcmVtYWluICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3Quc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VQcm9ncmVzcygnZW5kJywgaWNuLCB0cmd0LCB0cmd0SXRFbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3RJdEVsLnN0eWxlLm1pbkhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LnNldFN0eWxlQXR0cmlidXRlKHRyZ3QsIHsgJ3Bvc2l0aW9uJzogJycsICdtYXhIZWlnaHQnOiAnJywgJ2Rpc3BsYXknOiAnJyB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VQcm9ncmVzcygnYmVnaW4nLCBpY24sIHRyZ3QsIHRyZ3RJdEVsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFuaW1hdGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2xsYXBzZVByb2dyZXNzKCdlbmQnLCBpY24sIHRyZ3QsIHRyZ3RJdEVsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzQuQW5pbWF0aW9uKGFuaW1hdGUpLmFuaW1hdGUodHJndCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuY29sbGFwc2VQcm9ncmVzcyA9IGZ1bmN0aW9uIChwcm9ncmVzcywgaWNvbiwgdHJndCwgdHJndEl0ZW1FbGUsIGV2ZW50QXJncykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoaWNvbiwgQ0xTX0VYUEFORElDTik7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0cmd0SXRlbUVsZSwgQ0xTX1NMQ1RFRCk7XG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPT09ICdlbmQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQodHJndCwgQ0xTX0NUTkhJREUpO1xuICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZShDTFNfVE9HQU5JTUFURSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUodHJndEl0ZW1FbGUsIENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgIHRyZ3Quc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRyZ3QucHJldmlvdXNFbGVtZW50U2libGluZywgeyAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZScsICdhcmlhLWV4cGFuZGVkJzogJ2ZhbHNlJyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2V4cGFuZGVkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdhY2NvcmRpb24nO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLml0ZW1BdHRyaWJVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbUVsZSA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LmNoaWxkcmVuKTtcbiAgICAgICAgICAgIHZhciBpdGVtTGVuID0gdGhpcy5pdGVtcy5sZW5ndGg7XG4gICAgICAgICAgICBpdGVtRWxlLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2VsZWN0KCcuJyArIENMU19IRUFERVIsIGVsZSkuc2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJywgJycgKyBpdGVtTGVuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmFkZEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChpbmRleCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsZS5jaGlsZEVsZW1lbnRDb3VudCA+PSBpbmRleCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAwLCBpdGVtKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJJdGVtRWxlID0gdGhpcy5yZW5kZXJJbm5lckl0ZW0oaXRlbSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmIChlbGUuY2hpbGRFbGVtZW50Q291bnQgPT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChpbm5lckl0ZW1FbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmluc2VydEJlZm9yZShpbm5lckl0ZW1FbGUsIGVsZS5jaGlsZHJlbltpbmRleF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoaW5uZXJJdGVtRWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX0hFQURFUiksICdmb2N1cycsIHRoaXMuZm9jdXNJbiwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGlubmVySXRlbUVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19IRUFERVIpLCAnYmx1cicsIHRoaXMuZm9jdXNPdXQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbUF0dHJpYlVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbVJlZnJlc2goZWxlKTtcbiAgICAgICAgICAgIGlmIChpdGVtLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKHRydWUsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRlZEl0ZW1SZWZyZXNoID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwoZWxlLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NMQ1RFRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kZWRJdGVtc1B1c2goZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzMuZGV0YWNoKGVsZSk7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLml0ZW1BdHRyaWJVcGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW1SZWZyZXNoKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVsZSkgfHwgZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8zLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCBlbGUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZS5jaGlsZHJlblswXS5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmhpZGVJdGVtID0gZnVuY3Rpb24gKGluZGV4LCBpc0hpZGRlbikge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChlbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoaXNIaWRkZW4pKSB7XG4gICAgICAgICAgICAgICAgaXNIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNIaWRkZW4gPyB0aGlzLmFkZChlbGUsIENMU19JVEVNSElERSkgOiB0aGlzLnJlbW92ZShlbGUsIENMU19JVEVNSElERSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZW5hYmxlSXRlbSA9IGZ1bmN0aW9uIChpbmRleCwgaXNFbmFibGUpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoZWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbGVIZWFkZXIgPSBlbGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoaXNFbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShlbGUsIENMU19ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoZWxlSGVhZGVyLCB7ICd0YWJpbmRleCc6ICcwJywgJ2FyaWEtZGlzYWJsZWQnOiAnZmFsc2UnIH0pO1xuICAgICAgICAgICAgICAgIGVsZUhlYWRlci5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKGZhbHNlLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlTW92ZUZvY3VzKCdtb3ZlZG93bicsIHRoaXMuZWxlbWVudCwgZWxlSGVhZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoZWxlLCBDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgZWxlSGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgZWxlSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5leHBhbmRJdGVtID0gZnVuY3Rpb24gKGlzRXhwYW5kLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kTW9kZSA9PT0gJ1NpbmdsZScgJiYgaXNFeHBhbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IHJvb3QuY2hpbGRyZW5bcm9vdC5jaGlsZEVsZW1lbnRDb3VudCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1FeHBhbmQoaXNFeHBhbmQsIGVsZSwgdGhpcy5nZXRJbmRleEJ5SXRlbShlbGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXRlbUV4cGFuZChpc0V4cGFuZCwgZWwsIF90aGlzLmdldEluZGV4QnlJdGVtKGVsKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzTnVsbE9yVW5kZWZpbmVkKGVsZSkgfHwgIWVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NMQ1QpIHx8IChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19BQ1RJVkUpICYmIGlzRXhwYW5kKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBhbmRNb2RlID09PSAnU2luZ2xlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1FeHBhbmQoaXNFeHBhbmQsIGVsZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjb3JkaW9uLnByb3RvdHlwZS5pdGVtRXhwYW5kID0gZnVuY3Rpb24gKGlzRXhwYW5kLCBlbGUsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY3RuID0gZWxlLmNoaWxkcmVuWzFdO1xuICAgICAgICAgICAgaWYgKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0RJU0FCTEUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzYuaXNOdWxsT3JVbmRlZmluZWQoY3RuKSAmJiBpc0V4cGFuZCkge1xuICAgICAgICAgICAgICAgIGN0biA9IHRoaXMuY29udGVudFJlbmRlcmluZyhpbmRleCk7XG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGN0bik7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhQXR0clVwZGF0ZShlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWoyX2Jhc2VfNi5pc051bGxPclVuZGVmaW5lZChjdG4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNFeHBhbmQgPyB0aGlzLmV4cGFuZChjdG4pIDogdGhpcy5jb2xsYXBzZShjdG4pO1xuICAgICAgICB9O1xuICAgICAgICBBY2NvcmRpb24ucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsnZXhwYW5kZWRJdGVtcyddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgdmFyIGFjcmRuID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcC5lbmFibGVSdGwgPyB0aGlzLmFkZChhY3JkbiwgQ0xTX1JUTCkgOiB0aGlzLnJlbW92ZShhY3JkbiwgQ0xTX1JUTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICdoZWlnaHQnOiBlajJfYmFzZV82LmZvcm1hdFVuaXQobmV3UHJvcC5oZWlnaHQpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd3aWR0aCc6IGVqMl9iYXNlXzYuZm9ybWF0VW5pdChuZXdQcm9wLndpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdleHBhbmRNb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wLmV4cGFuZE1vZGUgPT09ICdTaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tdWx0aXNlbGVjdGFibGUnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBhbmRlZEl0ZW1zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRJdGVtKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW11bHRpc2VsZWN0YWJsZScsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBY2NvcmRpb247XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIEFjY29yZGlvbkl0ZW0pXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcxMDAlJylcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIEFjY29yZGlvbi5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ011bHRpcGxlJylcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImV4cGFuZE1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNS5Db21wbGV4KHt9LCBBY2NvcmRpb25BbmltYXRpb25TZXR0aW5ncylcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImFuaW1hdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImNsaWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJleHBhbmRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJleHBhbmRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImNyZWF0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBBY2NvcmRpb24gPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBBY2NvcmRpb24pO1xuICAgIGV4cG9ydHMuQWNjb3JkaW9uID0gQWNjb3JkaW9uO1xuICAgIGV4cG9ydHMuYWNjb3JkaW9uQnVpbGRlciA9IGVqMl9iYXNlXzQuQ3JlYXRlQnVpbGRlcihBY2NvcmRpb24pO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2NvcmRpb24vYWNjb3JkaW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vY29udGV4dC1tZW51XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29udGV4dF9tZW51XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbnRleHRfbWVudV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29udGV4dC1tZW51L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbGlzdHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgZWoyX2Jhc2VfNSwgZWoyX2xpc3RzXzEsIGVqMl9wb3B1cHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRE9XTkFSUk9XID0gJ2Rvd25hcnJvdyc7XG4gICAgdmFyIEVOVEVSID0gJ2VudGVyJztcbiAgICB2YXIgRVNDQVBFID0gJ2VzY2FwZSc7XG4gICAgdmFyIEZPQ1VTRUQgPSAnZS1mb2N1c2VkJztcbiAgICB2YXIgSEVBREVSID0gJ2UtbWVudWhlYWRlcic7XG4gICAgdmFyIExFRlRBUlJPVyA9ICdsZWZ0YXJyb3cnO1xuICAgIHZhciBSSUdIVEFSUk9XID0gJ3JpZ2h0YXJyb3cnO1xuICAgIHZhciBSVEwgPSAnZS1ydGwnO1xuICAgIHZhciBTRUxFQ1RFRCA9ICdlLXNlbGVjdGVkJztcbiAgICB2YXIgU0VQQVJBVE9SID0gJ2Utc2VwYXJhdG9yJztcbiAgICB2YXIgVVBBUlJPVyA9ICd1cGFycm93JztcbiAgICB2YXIgV1JBUFBFUiA9ICdlLWNvbnRleHRtZW51LXdyYXBwZXInO1xuICAgIHZhciBDQVJFVCA9ICdlLWNhcmV0JztcbiAgICB2YXIgSVRFTSA9ICdlLW1lbnUtaXRlbSc7XG4gICAgdmFyIERJU0FCTEVEID0gJ2UtZGlzYWJsZWQnO1xuICAgIHZhciBISURFID0gJ2UtbWVudS1oaWRlJztcbiAgICB2YXIgSUNPTlMgPSAnZS1pY29ucyc7XG4gICAgdmFyIE1lbnVJdGVtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKE1lbnVJdGVtLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBNZW51SXRlbSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWVudUl0ZW07XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwiaWNvbkNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJzZXBhcmF0b3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBNZW51SXRlbSlcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwiaXRlbXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBNZW51SXRlbS5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJ1cmxcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLk1lbnVJdGVtID0gTWVudUl0ZW07XG4gICAgdmFyIENvbnRleHRNZW51ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENvbnRleHRNZW51LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDb250ZXh0TWVudShvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuYW5pbWF0aW9uID0gbmV3IGVqMl9iYXNlXzMuQW5pbWF0aW9uKHt9KTtcbiAgICAgICAgICAgIF90aGlzLm5hdklkeCA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaXNUYXBIb2xkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudGFnTmFtZSA9PT0gJ0VKLUNPTlRFWFRNRU5VJykge1xuICAgICAgICAgICAgICAgIHZhciBlakluc3QgPSBlajJfYmFzZV80LmdldFZhbHVlKCdlajJfaW5zdGFuY2VzJywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgdWwgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ0VKLUNPTlRFWFRNRU5VJywgeyBjbGFzc05hbWU6IFdSQVBQRVIgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHVsLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdWw7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtJyArIHRoaXMuZ2V0TW9kdWxlTmFtZSgpKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFZhbHVlKCdlajJfaW5zdGFuY2VzJywgZWpJbnN0LCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IGVqMl9iYXNlXzQuZ2V0VW5pcXVlSUQodGhpcy5nZXRNb2R1bGVOYW1lKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdFdyYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVySXRlbXMoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaW5pdFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgaWYgKCF3cmFwcGVyLmNsYXNzTGlzdC5jb250YWlucyhXUkFQUEVSKSkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIgPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBXUkFQUEVSIH0pO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCh0aGlzLmNzc0NsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZChSVEwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyAncm9sZSc6ICdtZW51JywgJ3RhYmluZGV4JzogJzAnIH0pO1xuICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnpJbmRleCA9IHRoaXMuZ2V0WkluZGV4KCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5yZW5kZXJJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gZWoyX2xpc3RzXzEuTGlzdEJhc2UuY3JlYXRlSnNvbkZyb21FbGVtZW50KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVsID0gdGhpcy5jcmVhdGVJdGVtcyh0aGlzLml0ZW1zKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuYXBwZW5kKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHVsLmNoaWxkcmVuKSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRFbGVtID0gZWoyX2Jhc2VfNS5zZWxlY3QodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNJb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG5ldyBlajJfYmFzZV8yLlRvdWNoKHRoaXMudGFyZ2V0RWxlbSwgeyB0YXBIb2xkOiB0aGlzLnRvdWNoSGFuZGxlci5iaW5kKHRoaXMpIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRoaXMudGFyZ2V0RWxlbSwgJ2NvbnRleHRtZW51JywgdGhpcy5jbWVudUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5nZXRTY3JvbGxhYmxlUGFyZW50cyh0aGlzLnRhcmdldEVsZW0pOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChwYXJlbnRfMSwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQod3JhcHBlciwgJ21vdXNlb3ZlcicsIHRoaXMubW92ZXJIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsICdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlID0gbmV3IGVqMl9iYXNlXzIuS2V5Ym9hcmRFdmVudHMod3JhcHBlciwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlCb2FyZEhhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBrZXlDb25maWdzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRvd25hcnJvdzogRE9XTkFSUk9XLFxuICAgICAgICAgICAgICAgICAgICB1cGFycm93OiBVUEFSUk9XLFxuICAgICAgICAgICAgICAgICAgICBlbnRlcjogRU5URVIsXG4gICAgICAgICAgICAgICAgICAgIGxlZnRhcnJvdzogTEVGVEFSUk9XLFxuICAgICAgICAgICAgICAgICAgICByaWdodGFycm93OiBSSUdIVEFSUk9XLFxuICAgICAgICAgICAgICAgICAgICBlc2NhcGU6IEVTQ0FQRVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5yaXBwbGVFZmZlY3Qod3JhcHBlciwgeyBzZWxlY3RvcjogJy4nICsgSVRFTSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzUuY2xvc2VzdChlLnRhcmdldCwgJy4nICsgV1JBUFBFUikgIT09IHRoaXMuZ2V0V3JhcHBlcigpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUodGhpcy5uYXZJZHgubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldFNjcm9sbGFibGVQYXJlbnRzID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGVsZW1TdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBwYXJlbnRDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgcmVnZXggPSAvKGF1dG98c2Nyb2xsKS87XG4gICAgICAgICAgICB2YXIgcGFyZW50RWxlID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB3aGlsZSAocGFyZW50RWxlICYmIHBhcmVudEVsZS50YWdOYW1lICE9PSAnSFRNTCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50U3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHBhcmVudEVsZSk7XG4gICAgICAgICAgICAgICAgaWYgKCEoZWxlbVN0eWxlLnBvc2l0aW9uID09PSAnYWJzb2x1dGUnICYmIHBhcmVudFN0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJylcbiAgICAgICAgICAgICAgICAgICAgJiYgcmVnZXgudGVzdChwYXJlbnRTdHlsZS5vdmVyZmxvdyArIHBhcmVudFN0eWxlLm92ZXJmbG93WSArIHBhcmVudFN0eWxlLm92ZXJmbG93WCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Q29sbGVjdGlvbi5wdXNoKHBhcmVudEVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcmVudEVsZSA9IHBhcmVudEVsZS5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50Q29sbGVjdGlvbi5wdXNoKGRvY3VtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnRDb2xsZWN0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUua2V5Qm9hcmRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIERPV05BUlJPVzpcbiAgICAgICAgICAgICAgICBjYXNlIFVQQVJST1c6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBEb3duS2V5SGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBSSUdIVEFSUk9XOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0RW50ZXJLZXlIYW5kbGVyKHsgYWN0aW9uOiBSSUdIVEFSUk9XIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIExFRlRBUlJPVzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0RXNjS2V5SGFuZGxlcih7IGFjdGlvbjogTEVGVEFSUk9XIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVOVEVSOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0RW50ZXJLZXlIYW5kbGVyKHsgYWN0aW9uOiBFTlRFUiB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFU0NBUEU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdEVzY0tleUhhbmRsZXIoeyBhY3Rpb246IEVTQ0FQRSB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS51cERvd25LZXlIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICB2YXIgY3VsID0gd3JhcHBlci5jaGlsZHJlblt0aGlzLm5hdklkeC5sZW5ndGhdO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRJZHggPSBlLmFjdGlvbiA9PT0gRE9XTkFSUk9XID8gMCA6IGN1bC5jaGlsZEVsZW1lbnRDb3VudCAtIDE7XG4gICAgICAgICAgICB2YXIgZmxpSWR4ID0gZGVmYXVsdElkeDtcbiAgICAgICAgICAgIHZhciBmbGkgPSB0aGlzLmdldExJQnlDbGFzcyhjdWwsIEZPQ1VTRUQpO1xuICAgICAgICAgICAgaWYgKGZsaSkge1xuICAgICAgICAgICAgICAgIGZsaUlkeCA9IHRoaXMuZ2V0SWR4KGN1bCwgZmxpKTtcbiAgICAgICAgICAgICAgICBmbGkuY2xhc3NMaXN0LnJlbW92ZShGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICBlLmFjdGlvbiA9PT0gRE9XTkFSUk9XID8gZmxpSWR4KysgOiBmbGlJZHgtLTtcbiAgICAgICAgICAgICAgICBpZiAoZmxpSWR4ID09PSAoZS5hY3Rpb24gPT09IERPV05BUlJPVyA/IGN1bC5jaGlsZEVsZW1lbnRDb3VudCA6IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICBmbGlJZHggPSBkZWZhdWx0SWR4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbGkgPSBjdWwuY2hpbGRyZW5bZmxpSWR4XTtcbiAgICAgICAgICAgIGZsaUlkeCA9IHRoaXMuaXNWYWxpZExJKGNsaSwgZmxpSWR4LCBlLmFjdGlvbik7XG4gICAgICAgICAgICBjdWwuY2hpbGRyZW5bZmxpSWR4XS5jbGFzc0xpc3QuYWRkKEZPQ1VTRUQpO1xuICAgICAgICAgICAgY3VsLmNoaWxkcmVuW2ZsaUlkeF0uZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmlzVmFsaWRMSSA9IGZ1bmN0aW9uIChjbGksIGluZGV4LCBhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICB2YXIgY3VsID0gd3JhcHBlci5jaGlsZHJlblt0aGlzLm5hdklkeC5sZW5ndGhdO1xuICAgICAgICAgICAgaWYgKGNsaS5jbGFzc0xpc3QuY29udGFpbnMoU0VQQVJBVE9SKSB8fCBjbGkuY2xhc3NMaXN0LmNvbnRhaW5zKERJU0FCTEVEKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9PT0gKERPV05BUlJPVyB8fCBSSUdIVEFSUk9XKSA/IGluZGV4KysgOiBpbmRleC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xpID0gY3VsLmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChjbGkuY2xhc3NMaXN0LmNvbnRhaW5zKFNFUEFSQVRPUikgfHwgY2xpLmNsYXNzTGlzdC5jb250YWlucyhESVNBQkxFRCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuaXNWYWxpZExJKGNsaSwgaW5kZXgsIGFjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5yaWdodEVudGVyS2V5SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgdmFyIGN1bCA9IHdyYXBwZXIuY2hpbGRyZW5bdGhpcy5uYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgIHZhciBmbGkgPSB0aGlzLmdldExJQnlDbGFzcyhjdWwsIEZPQ1VTRUQpO1xuICAgICAgICAgICAgaWYgKGZsaSkge1xuICAgICAgICAgICAgICAgIHZhciBmbGlJZHggPSB0aGlzLmdldElkeChjdWwsIGZsaSk7XG4gICAgICAgICAgICAgICAgdmFyIG5hdklkeCA9IHRoaXMubmF2SWR4LmNvbmNhdChmbGlJZHgpO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShuYXZJZHgpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5NZW51KGZsaSwgaXRlbSwgbnVsbCwgbnVsbCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGZsaS5jbGFzc0xpc3QucmVtb3ZlKEZPQ1VTRUQpO1xuICAgICAgICAgICAgICAgICAgICBmbGkuY2xhc3NMaXN0LmFkZChTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignc2VsZWN0JywgeyBlbGVtZW50OiBmbGksIGl0ZW06IHRoaXMudG9SYXdPYmplY3QoW2l0ZW1dKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgZmxpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2SWR4LnB1c2goZmxpSWR4KTtcbiAgICAgICAgICAgICAgICAgICAgY3VsID0gd3JhcHBlci5jaGlsZHJlblt0aGlzLm5hdklkeC5sZW5ndGhdO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuaXNWYWxpZExJKGN1bC5jaGlsZHJlblswXSwgMCwgZS5hY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBjdWwuY2hpbGRyZW5baW5kZXhdLmNsYXNzTGlzdC5hZGQoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgICAgIGN1bC5jaGlsZHJlbltpbmRleF0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gRU5URVIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmxlZnRFc2NLZXlIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hdklkeC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KHRoaXMubmF2SWR4Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdmFyIGN1bCA9IHdyYXBwZXIuY2hpbGRyZW5bdGhpcy5uYXZJZHgubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICB2YXIgc2xpID0gdGhpcy5nZXRMSUJ5Q2xhc3MoY3VsLCBTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgc2xpLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIGlmIChzbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpLmNsYXNzTGlzdC5yZW1vdmUoU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LmFkZChGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICAgICAgc2xpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSBFU0NBUEUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnRvdWNoSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmlzVGFwSG9sZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNtZW51SGFuZGxlcihlLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY21lbnVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jYW5PcGVuKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3Blbk1lbnUobnVsbCwgbnVsbCwgZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZLCBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuTWVudShudWxsLCBudWxsLCBlLmNsaWVudFksIGUuY2xpZW50WCwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY2xvc2VNZW51ID0gZnVuY3Rpb24gKHVsSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh1bEluZGV4ID09PSB2b2lkIDApIHsgdWxJbmRleCA9IDA7IH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTWVudVZpc2libGUoKSkge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNudCA9IHdyYXBwZXIuY2hpbGRFbGVtZW50Q291bnQ7IGNudCA+IHVsSW5kZXg7IGNudC0tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQW5pbWF0aW9uKHdyYXBwZXIuY2hpbGRyZW5bY250IC0gMV0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKHRoaXMubmF2SWR4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZJZHgubGVuZ3RoID0gdWxJbmRleCA/IHVsSW5kZXggLSAxIDogdWxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdvbkNsb3NlJywgeyBpdGVtczogaXRlbXMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaXNNZW51VmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5uYXZJZHgubGVuZ3RoID4gMCB8fCBlajJfYmFzZV81LmlzVmlzaWJsZSh0aGlzLmVsZW1lbnQpLnZhbHVlT2YoKSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jYW5PcGVuID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGNhbk9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgY2FuT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSB0aGlzLmZpbHRlci5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0YXJnZXQuY2xhc3NMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIuaW5kZXhPZih0YXJnZXQuY2xhc3NMaXN0W2ldKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5PcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhbk9wZW47XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKHRvcCwgbGVmdCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuTWVudShudWxsLCBudWxsLCB0b3AsIGxlZnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUub3Blbk1lbnUgPSBmdW5jdGlvbiAobGksIGl0ZW0sIHRvcCwgbGVmdCwgZSkge1xuICAgICAgICAgICAgaWYgKHRvcCA9PT0gdm9pZCAwKSB7IHRvcCA9IDA7IH1cbiAgICAgICAgICAgIGlmIChsZWZ0ID09PSB2b2lkIDApIHsgbGVmdCA9IDA7IH1cbiAgICAgICAgICAgIGlmIChlID09PSB2b2lkIDApIHsgZSA9IG51bGw7IH1cbiAgICAgICAgICAgIHZhciB1bDtcbiAgICAgICAgICAgIHZhciBuYXZJZHg7XG4gICAgICAgICAgICB2YXIgbGlJdGVtO1xuICAgICAgICAgICAgdmFyIGJlZm9yZU9wZW5FdmVudEFyZ3M7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgaWYgKGxpKSB7XG4gICAgICAgICAgICAgICAgdWwgPSB0aGlzLmNyZWF0ZUl0ZW1zKGl0ZW0uaXRlbXMpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5sYXN0Q2hpbGQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7IHRleHQ6IGl0ZW0udGV4dCwgaWNvbkNzczogSUNPTlMgKyAnIGUtcHJldmlvdXMnIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZGF0YSA9IG5ldyBNZW51SXRlbSh0aGlzLml0ZW1zWzBdLCBudWxsLCBkYXRhLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhsaSA9IHRoaXMuY3JlYXRlSXRlbShbaGRhdGFdLCB0cnVlLCAnbWVudScsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB1bC5pbnNlcnRCZWZvcmUoaGxpLCB1bC5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVsLnN0eWxlLnpJbmRleCA9IHRoaXMuZWxlbWVudC5zdHlsZS56SW5kZXg7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh1bCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5hdklkeCA9IHRoaXMuZ2V0SW5kZXgobGkgPyBsaS50ZXh0Q29udGVudCA6IG51bGwpO1xuICAgICAgICAgICAgbGlJdGVtID0gbGkgPyB0aGlzLmdldEl0ZW0obmF2SWR4KSA6IG51bGw7XG4gICAgICAgICAgICBiZWZvcmVPcGVuRXZlbnRBcmdzID0geyBlbGVtZW50OiB1bCwgaXRlbXM6IGxpID8gaXRlbS5pdGVtcyA6IHRoaXMuZ2V0SXRlbXMoW10pLCBwYXJlbnRJdGVtOiBsaUl0ZW0sIGV2ZW50OiBlLCBjYW5jZWw6IGZhbHNlIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZU9wZW4nLCBiZWZvcmVPcGVuRXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmICghYmVmb3JlT3BlbkV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKGxpLCB1bCwgdG9wLCBsZWZ0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUFuaW1hdGlvbih1bCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jcmVhdGVJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIHNob3dJY29uLCBtb2R1bGVOYW1lLCBpc0hlYWRlcikge1xuICAgICAgICAgICAgaWYgKGlzSGVhZGVyID09PSB2b2lkIDApIHsgaXNIZWFkZXIgPSB0cnVlOyB9XG4gICAgICAgICAgICB2YXIgbGlzdE9wdCA9IHsgc2hvd0ljb246IHNob3dJY29uLCBtb2R1bGVOYW1lOiBtb2R1bGVOYW1lIH07XG4gICAgICAgICAgICBpZiAoaXNIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBsaXN0T3B0Lml0ZW1DbGFzcyA9IEhFQURFUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3RJdGVtRnJvbUpzb24odGhpcy50b1Jhd09iamVjdChpdGVtKSwgbGlzdE9wdCwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbGlbMF07XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChsaSwgdWwsIHRvcCwgbGVmdCkge1xuICAgICAgICAgICAgdmFyIHB4ID0gJ3B4JztcbiAgICAgICAgICAgIGlmICh1bCA9PT0gdGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxpdHkodWwpO1xuICAgICAgICAgICAgICAgIHZhciBjb2xsaWRlID0gZWoyX3BvcHVwc18xLmlzQ29sbGlkZSh1bCwgbnVsbCwgbGVmdCwgdG9wKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sbGlkZS5pbmRleE9mKCdyaWdodCcpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGxlZnQgLSB1bC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbGxpZGUuaW5kZXhPZignYm90dG9tJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZWoyX3BvcHVwc18xLmZpdCh1bCwgbnVsbCwgeyBYOiBmYWxzZSwgWTogdHJ1ZSB9LCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgICAgICAgICB0b3AgPSBvZmZzZXQudG9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2xsaWRlID0gZWoyX3BvcHVwc18xLmlzQ29sbGlkZSh1bCwgbnVsbCwgbGVmdCwgdG9wKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sbGlkZS5pbmRleE9mKCdsZWZ0JykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZWoyX3BvcHVwc18xLmZpdCh1bCwgbnVsbCwgeyBYOiB0cnVlLCBZOiBmYWxzZSB9LCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gb2Zmc2V0LmxlZnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsaXR5KHVsLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IE51bWJlcih0aGlzLmVsZW1lbnQuc3R5bGUudG9wLnJlcGxhY2UocHgsICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBOdW1iZXIodGhpcy5lbGVtZW50LnN0eWxlLmxlZnQucmVwbGFjZShweCwgJycpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGhpcy5lbmFibGVSdGwgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVBvc2l0aW9uKGxpLCB4LCAndG9wJyk7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IG9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBvZmZzZXQubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxpdHkodWwpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sbGlkZSA9IGVqMl9wb3B1cHNfMS5pc0NvbGxpZGUodWwsIG51bGwsIHRoaXMuZW5hYmxlUnRsID8gbGVmdCAtIHVsLm9mZnNldFdpZHRoIDogbGVmdCwgdG9wKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxpdHkodWwsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbGxpZGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBlajJfcG9wdXBzXzEuY2FsY3VsYXRlUG9zaXRpb24obGksIHRoaXMuZW5hYmxlUnRsID8gJ3JpZ2h0JyA6ICdsZWZ0JywgJ3RvcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IG9mZnNldC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCB8fCBjb2xsaWRlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxpdHkodWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9ICh0aGlzLmVuYWJsZVJ0bCAmJiBjb2xsaWRlLmxlbmd0aCkgPyBsZWZ0IDogbGVmdCAtIHVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxpdHkodWwsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVsLnN0eWxlLnRvcCA9IHRvcCArIHB4O1xuICAgICAgICAgICAgdWwuc3R5bGUubGVmdCA9IGxlZnQgKyBweDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnRvZ2dsZVZpc2libGl0eSA9IGZ1bmN0aW9uICh1bCwgaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICBpZiAoaXNWaXNpYmxlID09PSB2b2lkIDApIHsgaXNWaXNpYmxlID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdWwuc3R5bGUudmlzaWJpbGl0eSA9IGlzVmlzaWJsZSA/ICdoaWRkZW4nIDogJyc7XG4gICAgICAgICAgICB1bC5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmNyZWF0ZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHNob3dJY29uID0gdGhpcy5oYXNGaWVsZChpdGVtcywgJ2ljb25Dc3MnKTtcbiAgICAgICAgICAgIHZhciBsaXN0QmFzZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgc2hvd0ljb246IHNob3dJY29uLFxuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6ICdtZW51JyxcbiAgICAgICAgICAgICAgICBpdGVtQ3JlYXRpbmc6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuY3VyRGF0YS5odG1sQXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICdtZW51aXRlbScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd0ljb24gJiYgIWFyZ3MuY3VyRGF0YS5pY29uQ3NzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmN1ckRhdGEuaWNvbkNzcyA9IElDT05TICsgJyBlLWJsYW5raWNvbic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGl0ZW1DcmVhdGVkOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jdXJEYXRhLnNlcGFyYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLmNsYXNzTGlzdC5yZW1vdmUoSVRFTSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLml0ZW0uY2xhc3NMaXN0LmFkZChTRVBBUkFUT1IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmN1ckRhdGEuaXRlbXMgJiYgYXJncy5jdXJEYXRhLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSBlajJfYmFzZV81LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogSUNPTlMgKyAnICcgKyBDQVJFVCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuaXRlbS5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuaXRlbS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGFzcG9wdXAnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5pdGVtLmNsYXNzTGlzdC5hZGQoJ2UtbWVudS1jYXJldC1pY29uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignYmVmb3JlSXRlbVJlbmRlcicsIHsgZGF0YTogYXJncy5jdXJEYXRhLCBpdGVtOiBhcmdzLml0ZW0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB1bCA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3QodGhpcy50b1Jhd09iamVjdChpdGVtcy5zbGljZSgpKSwgbGlzdEJhc2VPcHRpb25zLCB0cnVlKTtcbiAgICAgICAgICAgIHVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgcmV0dXJuIHVsO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUudG9SYXdPYmplY3QgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHZhciBpdGVtO1xuICAgICAgICAgICAgdmFyIG1lbnVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1zW2ldLnByb3BlcnRpZXM7XG4gICAgICAgICAgICAgICAgbWVudUl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVudUl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUubW92ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICB2YXIgdHJndCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNsaSA9IHRoaXMuZ2V0TEkodHJndCk7XG4gICAgICAgICAgICBpZiAoY2xpICYmIGVqMl9iYXNlXzUuY2xvc2VzdChjbGksICcuJyArIFdSQVBQRVIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZsaSA9IGVqMl9iYXNlXzUuc2VsZWN0KCcuJyArIEZPQ1VTRUQsIHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIGlmIChmbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxpLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNsaS5jbGFzc0xpc3QuYWRkKEZPQ1VTRUQpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zaG93SXRlbU9uQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuaGFzRmllbGQgPSBmdW5jdGlvbiAoaXRlbXMsIGZpZWxkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXNbaV1bZmllbGRdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNUYXBIb2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1RhcEhvbGQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRyZ3QgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgY2xpID0gdGhpcy5nZXRMSSh0cmd0KTtcbiAgICAgICAgICAgICAgICBpZiAoY2xpICYmIGUudHlwZSA9PT0gJ2NsaWNrJyAmJiAhY2xpLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0FSRVQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TElTZWxlY3RlZChjbGkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmF2SWR4ID0gdGhpcy5nZXRJbmRleChjbGkudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShuYXZJZHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3NlbGVjdCcsIHsgZWxlbWVudDogY2xpLCBpdGVtOiBpdGVtIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2xpICYmIGVqMl9iYXNlXzUuY2xvc2VzdChjbGksICcuJyArIFdSQVBQRVIpICYmIChlLnR5cGUgPT09ICdtb3VzZW92ZXInIHx8IGVqMl9iYXNlXzQuQnJvd3Nlci5pc0RldmljZSB8fCB0aGlzLnNob3dJdGVtT25DbGljaykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xpLmNsYXNzTGlzdC5jb250YWlucyhIRUFERVIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bCA9IHdyYXBwZXIuY2hpbGRyZW5bdGhpcy5uYXZJZHgubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUFuaW1hdGlvbih1bCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ29uT3BlbicsIHsgZWxlbWVudDogdWwgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2xpID0gdGhpcy5nZXRMSUJ5Q2xhc3ModWwsIFNFTEVDVEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LnJlbW92ZShTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LmRldGFjaChjbGkucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdklkeC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2xpLmNsYXNzTGlzdC5jb250YWlucyhTRVBBUkFUT1IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNob3dTdWJNZW51ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VsID0gY2xpLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaUlkeCA9IHRoaXMuZ2V0SWR4KGN1bCwgY2xpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VsSWR4ID0gdGhpcy5nZXRJZHgod3JhcHBlciwgY3VsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubmF2SWR4W2N1bElkeF0gPT09IGNsaUlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1N1Yk1lbnUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VsSWR4ICE9PSB0aGlzLm5hdklkeC5sZW5ndGggJiYgKGUudHlwZSAhPT0gJ21vdXNlb3ZlcicgfHwgc2hvd1N1Yk1lbnUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2xpID0gdGhpcy5nZXRMSUJ5Q2xhc3MoY3VsLCBTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2xpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpLmNsYXNzTGlzdC5yZW1vdmUoU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUoY3VsSWR4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3dTdWJNZW51KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLm5hdklkeC5jb25jYXQoY2xpSWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGlkeFtpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGlkeFtjb3VudF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMSVNlbGVjdGVkKGNsaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdklkeCA9IHRoaXMuZ2V0SW5kZXgoY2xpLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlJdGVtID0gdGhpcy5nZXRJdGVtKG5hdklkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdzZWxlY3QnLCB7IGVsZW1lbnQ6IGNsaSwgaXRlbTogbGlJdGVtIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3Blbk1lbnUoY2xpLCBpdGVtLCBudWxsLCBudWxsLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdklkeC5wdXNoKGNsaUlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50eXBlICE9PSAnbW91c2VvdmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyZ3QudGFnTmFtZSAhPT0gJ1VMJyB8fCB0cmd0LnBhcmVudEVsZW1lbnQgIT09IHdyYXBwZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2xpIHx8ICFjbGkucXVlcnlTZWxlY3RvcignLicgKyBDQVJFVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuc2V0TElTZWxlY3RlZCA9IGZ1bmN0aW9uIChsaSkge1xuICAgICAgICAgICAgdmFyIHNsaSA9IHRoaXMuZ2V0TElCeUNsYXNzKGxpLnBhcmVudEVsZW1lbnQsIFNFTEVDVEVEKTtcbiAgICAgICAgICAgIGlmIChzbGkpIHtcbiAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LnJlbW92ZShTRUxFQ1RFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaS5jbGFzc0xpc3QucmVtb3ZlKEZPQ1VTRUQpO1xuICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZChTRUxFQ1RFRCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRMSUJ5Q2xhc3MgPSBmdW5jdGlvbiAodWwsIGNsYXNzbmFtZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHVsLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVsLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc25hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiAobmF2SWR4KSB7XG4gICAgICAgICAgICBuYXZJZHggPSBuYXZJZHguc2xpY2UoKTtcbiAgICAgICAgICAgIHZhciBpZHggPSBuYXZJZHgucG9wKCk7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKG5hdklkeCk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbXNbaWR4XTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKG5hdklkeCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmF2SWR4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMgPSBpdGVtc1tuYXZJZHhbaV1dLml0ZW1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0SWR4ID0gZnVuY3Rpb24gKHVsLCBsaSwgc2tpcEhkcikge1xuICAgICAgICAgICAgaWYgKHNraXBIZHIgPT09IHZvaWQgMCkgeyBza2lwSGRyID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdmFyIGlkeCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodWwuY2hpbGRyZW4sIGxpKTtcbiAgICAgICAgICAgIGlmIChza2lwSGRyICYmIHVsLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucyhIRUFERVIpKSB7XG4gICAgICAgICAgICAgICAgaWR4LS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0TEkgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgaWYgKGVsZW0udGFnTmFtZSA9PT0gJ0xJJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzUuY2xvc2VzdChlbGVtLCAnbGknKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzc0NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRQcm9wLmNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKG9sZFByb3AuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Byb3AuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQobmV3UHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZShSVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXIgPSBuZXdQcm9wLmZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93SXRlbU9uQ2xpY2snOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0l0ZW1PbkNsaWNrID0gbmV3UHJvcC5zaG93SXRlbU9uQ2xpY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0YXJnZXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gbmV3UHJvcC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXRFbGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuQnJvd3Nlci5pc0lvcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnRhcmdldEVsZW0sICdjb250ZXh0bWVudScsIHRoaXMuY21lbnVIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0U2Nyb2xsYWJsZVBhcmVudHModGhpcy50YXJnZXRFbGVtKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudF8yID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUocGFyZW50XzIsICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHdyYXBwZXIsICdtb3VzZW92ZXInLCB0aGlzLm1vdmVySGFuZGxlcik7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCAnbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAodWwsIGlzTWVudU9wZW4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoaXNNZW51T3BlbiA9PT0gdm9pZCAwKSB7IGlzTWVudU9wZW4gPSB0cnVlOyB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QgPT09ICdOb25lJyB8fCAhaXNNZW51T3Blbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kKHVsLCBpc01lbnVPcGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLmFuaW1hdGUodWwsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvblNldHRpbmdzLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lYXNpbmcsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWVudU9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IG9wdGlvbnMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbmQob3B0aW9ucy5lbGVtZW50LCBpc01lbnVPcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKHVsLCBpc01lbnVPcGVuKSB7XG4gICAgICAgICAgICBpZiAoaXNNZW51T3Blbikge1xuICAgICAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignb25PcGVuJywgeyBlbGVtZW50OiB1bCB9KTtcbiAgICAgICAgICAgICAgICBpZiAodWwucXVlcnlTZWxlY3RvcignLicgKyBGT0NVU0VEKSkge1xuICAgICAgICAgICAgICAgICAgICB1bC5xdWVyeVNlbGVjdG9yKCcuJyArIEZPQ1VTRUQpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBlbGUgPSB0aGlzLmdldFdyYXBwZXIoKS5jaGlsZHJlblt0aGlzLmdldElkeCh0aGlzLmdldFdyYXBwZXIoKSwgdWwpIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIFNFTEVDVEVEKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodWwgPT09IHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmxpID0gdGhpcy5nZXRMSUJ5Q2xhc3ModGhpcy5lbGVtZW50LCBGT0NVU0VEKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZsaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxpLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNFRCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaSA9IHRoaXMuZ2V0TElCeUNsYXNzKHRoaXMuZWxlbWVudCwgU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGkuY2xhc3NMaXN0LnJlbW92ZShTRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKHVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NvbnRleHRtZW51JztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmNoZWNrSW5kZXggPSBmdW5jdGlvbiAoZGF0YSwgaXRlbXMpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXS50ZXh0ID09PSBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRJbmRleCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gW107XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIGluZGV4Q291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICAgICAgICAgIGluZGV4LnB1c2godGhpcy5jaGVja0luZGV4KGRhdGEsIGl0ZW1zKSk7XG4gICAgICAgICAgICBpZiAoaW5kZXguaW5kZXhPZigtMSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBbXTtcbiAgICAgICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbS5pdGVtcy5sZW5ndGggPiAwOyB9KTtcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4LnB1c2goX3RoaXMuaXRlbXMuaW5kZXhPZihpdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4LnB1c2goX3RoaXMuY2hlY2tJbmRleChkYXRhLCBpdGVtLml0ZW1zKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4LmluZGV4T2YoLTEpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmRleC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zcyA9IGl0ZW1zW2tdLml0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleC5wdXNoKGl0ZW1zcy5pbmRleE9mKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleC5wdXNoKF90aGlzLmNoZWNrSW5kZXgoZGF0YSwgaXRlbS5pdGVtcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleC5pbmRleE9mKC0xKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBpdGVtcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmVuYWJsZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBlbmFibGUpIHtcbiAgICAgICAgICAgIGlmIChlbmFibGUgPT09IHZvaWQgMCkgeyBlbmFibGUgPSB0cnVlOyB9XG4gICAgICAgICAgICB2YXIgdWw7XG4gICAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgICAgdmFyIG5hdklkeDtcbiAgICAgICAgICAgIHZhciBkaXNhYmxlZCA9IERJU0FCTEVEO1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuYXZJZHggPSB0aGlzLmdldEluZGV4KGl0ZW1zW2ldKTtcbiAgICAgICAgICAgICAgICBpZHggPSBuYXZJZHgucG9wKCk7XG4gICAgICAgICAgICAgICAgdWwgPSB3cmFwcGVyLmNoaWxkcmVuW25hdklkeC5sZW5ndGhdO1xuICAgICAgICAgICAgICAgIGlmICh1bCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5Ccm93c2VyLmlzRGV2aWNlICYmICF1bC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY29udGV4dG1lbnUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLmNoaWxkcmVuW2lkeCArIDFdLmNsYXNzTGlzdC5yZW1vdmUoZGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuY2hpbGRyZW5baWR4XS5jbGFzc0xpc3QucmVtb3ZlKGRpc2FibGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNEZXZpY2UgJiYgIXVsLmNsYXNzTGlzdC5jb250YWlucygnZS1jb250ZXh0bWVudScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuY2hpbGRyZW5baWR4ICsgMV0uY2xhc3NMaXN0LmFkZChkaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5jaGlsZHJlbltpZHhdLmNsYXNzTGlzdC5hZGQoZGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuc2hvd0l0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dIaWRlSXRlbXMoaXRlbXMsIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmhpZGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZUl0ZW1zKGl0ZW1zLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnNob3dIaWRlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIGlzaGlkZSkge1xuICAgICAgICAgICAgdmFyIHVsO1xuICAgICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICAgIHZhciBuYXZJZHg7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuZ2V0V3JhcHBlcigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG5hdklkeCA9IHRoaXMuZ2V0SW5kZXgoaXRlbXNbaV0pO1xuICAgICAgICAgICAgICAgIGlkeCA9IG5hdklkeC5wb3AoKTtcbiAgICAgICAgICAgICAgICB1bCA9IHdyYXBwZXIuY2hpbGRyZW5bbmF2SWR4Lmxlbmd0aF07XG4gICAgICAgICAgICAgICAgaWYgKHVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc2hpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNEZXZpY2UgJiYgIXVsLmNsYXNzTGlzdC5jb250YWlucygnZS1jb250ZXh0bWVudScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuY2hpbGRyZW5baWR4ICsgMV0uY2xhc3NMaXN0LmFkZChISURFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLmNoaWxkcmVuW2lkeF0uY2xhc3NMaXN0LmFkZChISURFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LkJyb3dzZXIuaXNEZXZpY2UgJiYgIXVsLmNsYXNzTGlzdC5jb250YWlucygnZS1jb250ZXh0bWVudScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuY2hpbGRyZW5baWR4ICsgMV0uY2xhc3NMaXN0LnJlbW92ZShISURFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLmNoaWxkcmVuW2lkeF0uY2xhc3NMaXN0LnJlbW92ZShISURFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnJlbW92ZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgICAgdmFyIG5hdklkeDtcbiAgICAgICAgICAgIHZhciBpaXRlbXM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmF2SWR4ID0gdGhpcy5nZXRJbmRleChpdGVtc1tpXSk7XG4gICAgICAgICAgICAgICAgaWR4ID0gbmF2SWR4LnBvcCgpO1xuICAgICAgICAgICAgICAgIGlpdGVtcyA9IHRoaXMuZ2V0SXRlbXMobmF2SWR4KTtcbiAgICAgICAgICAgICAgICBpaXRlbXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKCFuYXZJZHgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuZGV0YWNoKHRoaXMuZWxlbWVudC5jaGlsZHJlbltpZHhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5pbnNlcnRBZnRlciA9IGZ1bmN0aW9uIChpdGVtcywgdGV4dCkge1xuICAgICAgICAgICAgdGhpcy5pbnNlcnRJdGVtcyhpdGVtcywgdGV4dCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5pbnNlcnRCZWZvcmUgPSBmdW5jdGlvbiAoaXRlbXMsIHRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0SXRlbXMoaXRlbXMsIHRleHQsIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmluc2VydEl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCB0ZXh0LCBpc0FmdGVyKSB7XG4gICAgICAgICAgICBpZiAoaXNBZnRlciA9PT0gdm9pZCAwKSB7IGlzQWZ0ZXIgPSB0cnVlOyB9XG4gICAgICAgICAgICB2YXIgbGk7XG4gICAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgICAgdmFyIG5hdklkeDtcbiAgICAgICAgICAgIHZhciBpaXRlbXM7XG4gICAgICAgICAgICB2YXIgbWVudWl0ZW07XG4gICAgICAgICAgICB2YXIgc2hvd0ljb247XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmF2SWR4ID0gdGhpcy5nZXRJbmRleCh0ZXh0KTtcbiAgICAgICAgICAgICAgICBpZHggPSBuYXZJZHgucG9wKCk7XG4gICAgICAgICAgICAgICAgaWl0ZW1zID0gdGhpcy5nZXRJdGVtcyhuYXZJZHgpO1xuICAgICAgICAgICAgICAgIG1lbnVpdGVtID0gbmV3IE1lbnVJdGVtKGlpdGVtc1swXSwgbnVsbCwgaXRlbXNbaV0sIHRydWUpO1xuICAgICAgICAgICAgICAgIGlpdGVtcy5zcGxpY2UoaXNBZnRlciA/IGlkeCArIDEgOiBpZHgsIDAsIG1lbnVpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5hdklkeC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWR4ID0gaXNBZnRlciA/IGlkeCArIDEgOiBpZHg7XG4gICAgICAgICAgICAgICAgICAgIHNob3dJY29uID0gdGhpcy5oYXNGaWVsZChpaXRlbXMsICdpY29uQ3NzJyk7XG4gICAgICAgICAgICAgICAgICAgIGxpID0gdGhpcy5jcmVhdGVJdGVtKFttZW51aXRlbV0sIHNob3dJY29uLCAnbWVudScsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZShsaSwgdGhpcy5lbGVtZW50LmNoaWxkcmVuW2lkeF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldFpJbmRleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbjtcbiAgICAgICAgICAgIHZhciBwcm9wcztcbiAgICAgICAgICAgIHZhciB6SW5kZXggPSBbJzk5OSddO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRvY3VtZW50LmJvZHkuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwcm9wcyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keS5jaGlsZHJlbltpXSk7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBwcm9wcy5nZXRQcm9wZXJ0eVZhbHVlKCd6LWluZGV4Jyk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSBwcm9wcy5nZXRQcm9wZXJ0eVZhbHVlKCdwb3NpdGlvbicpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gJ2F1dG8nICYmIHBvc2l0aW9uICE9PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICAgICAgICB6SW5kZXgucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLm1heC5hcHBseShNYXRoLCB6SW5kZXgpICsgMSkudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLmdldFdyYXBwZXIoKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBbJ3RvcCcsICdsZWZ0JywgJ2Rpc3BsYXknLCAncm9sZScsICd0YWJpbmRleCddLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd3JhcHBlci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsIHdyYXBwZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5kZXRhY2god3JhcHBlcik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb250ZXh0TWVudTtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCBcImZpbHRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgXCJzaG93SXRlbU9uQ2xpY2tcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBNZW51SXRlbSlcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwiaXRlbXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwidGFyZ2V0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoeyBkdXJhdGlvbjogNDAwLCBlYXNpbmc6ICdlYXNlJywgZWZmZWN0OiAnU2xpZGVEb3duJyB9KVxuICAgIF0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgXCJhbmltYXRpb25TZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwiYmVmb3JlSXRlbVJlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwiYmVmb3JlT3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBDb250ZXh0TWVudS5wcm90b3R5cGUsIFwib25PcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuRXZlbnQoKVxuICAgIF0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgXCJvbkNsb3NlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuRXZlbnQoKVxuICAgIF0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgXCJzZWxlY3RcIiwgdm9pZCAwKTtcbiAgICBDb250ZXh0TWVudSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIENvbnRleHRNZW51KTtcbiAgICBleHBvcnRzLkNvbnRleHRNZW51ID0gQ29udGV4dE1lbnU7XG4gICAgZXhwb3J0cy5jb250ZXh0TWVudUJ1aWxkZXIgPSBlajJfYmFzZV8xLkNyZWF0ZUJ1aWxkZXIoQ29udGV4dE1lbnUpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb250ZXh0LW1lbnUvY29udGV4dC1tZW51LmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTJfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1saXN0c1wiXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3RhYlwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHRhYl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydCh0YWJfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3RhYi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vdG9vbGJhci90b29sYmFyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgZWoyX2Jhc2VfNSwgdG9vbGJhcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDTFNfVEFCID0gJ2UtdGFiJztcbiAgICB2YXIgQ0xTX0hFQURFUiA9ICdlLWhlYWRlcic7XG4gICAgdmFyIENMU19DT05URU5UID0gJ2UtY29udGVudCc7XG4gICAgdmFyIENMU19JVEVNUyA9ICdlLWl0ZW1zJztcbiAgICB2YXIgQ0xTX0lURU0gPSAnZS1pdGVtJztcbiAgICB2YXIgQ0xTX1RFTVBMQVRFID0gJ2UtdGVtcGxhdGUnO1xuICAgIHZhciBDTFNfUlRMID0gJ2UtcnRsJztcbiAgICB2YXIgQ0xTX0FDVElWRSA9ICdlLWFjdGl2ZSc7XG4gICAgdmFyIENMU19ESVNBQkxFID0gJ2UtZGlzYWJsZSc7XG4gICAgdmFyIENMU19ISURERU4gPSAnZS1oaWRkZW4nO1xuICAgIHZhciBDTFNfRk9DVVMgPSAnZS1mb2N1c2VkJztcbiAgICB2YXIgQ0xTX0lDT05TID0gJ2UtaWNvbnMnO1xuICAgIHZhciBDTFNfSUNPTiA9ICdlLWljb24nO1xuICAgIHZhciBDTFNfSUNPTl9DTE9TRSA9ICdlLWNsb3NlLWljb24nO1xuICAgIHZhciBDTFNfQ0xPU0VfU0hPVyA9ICdlLWNsb3NlLXNob3cnO1xuICAgIHZhciBDTFNfVEVYVCA9ICdlLXRhYi10ZXh0JztcbiAgICB2YXIgQ0xTX0lORElDQVRPUiA9ICdlLWluZGljYXRvcic7XG4gICAgdmFyIENMU19XUkFQID0gJ2UtdGFiLXdyYXAnO1xuICAgIHZhciBDTFNfVEVYVF9XUkFQID0gJ2UtdGV4dC13cmFwJztcbiAgICB2YXIgQ0xTX1RBQl9JQ09OID0gJ2UtdGFiLWljb24nO1xuICAgIHZhciBDTFNfVEJfSVRFTVMgPSAnZS10b29sYmFyLWl0ZW1zJztcbiAgICB2YXIgQ0xTX1RCX0lURU0gPSAnZS10b29sYmFyLWl0ZW0nO1xuICAgIHZhciBDTFNfVEJfUE9QID0gJ2UtdG9vbGJhci1wb3AnO1xuICAgIHZhciBDTFNfVEJfUE9QVVAgPSAnZS10b29sYmFyLXBvcHVwJztcbiAgICB2YXIgQ0xTX1BPUFVQX09QRU4gPSAnZS1wb3B1cC1vcGVuJztcbiAgICB2YXIgQ0xTX1BPUFVQX0NMT1NFID0gJ2UtcG9wdXAtY2xvc2UnO1xuICAgIHZhciBDTFNfUFJPR1JFU1MgPSAnZS1wcm9ncmVzcyc7XG4gICAgdmFyIENMU19JR05PUkUgPSAnZS1pZ25vcmUnO1xuICAgIHZhciBUYWJBY3Rpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUYWJBY3Rpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGFiQWN0aW9uU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRhYkFjdGlvblNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ1NsaWRlTGVmdEluJylcbiAgICBdLCBUYWJBY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZWZmZWN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoNjAwKVxuICAgIF0sIFRhYkFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdlYXNlJylcbiAgICBdLCBUYWJBY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZWFzaW5nXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UYWJBY3Rpb25TZXR0aW5ncyA9IFRhYkFjdGlvblNldHRpbmdzO1xuICAgIHZhciBUYWJBbmltYXRpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUYWJBbmltYXRpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGFiQW5pbWF0aW9uU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRhYkFuaW1hdGlvblNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7IGVmZmVjdDogJ1NsaWRlTGVmdEluJywgZHVyYXRpb246IDYwMCwgZWFzaW5nOiAnZWFzZScgfSwgVGFiQWN0aW9uU2V0dGluZ3MpXG4gICAgXSwgVGFiQW5pbWF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInByZXZpb3VzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7IGVmZmVjdDogJ1NsaWRlUmlnaHRJbicsIGR1cmF0aW9uOiA2MDAsIGVhc2luZzogJ2Vhc2UnIH0sIFRhYkFjdGlvblNldHRpbmdzKVxuICAgIF0sIFRhYkFuaW1hdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJuZXh0XCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UYWJBbmltYXRpb25TZXR0aW5ncyA9IFRhYkFuaW1hdGlvblNldHRpbmdzO1xuICAgIHZhciBIZWFkZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGVhZGVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEhlYWRlcjtcbiAgICB9KGVqMl9iYXNlXzIuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEhlYWRlci5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEhlYWRlci5wcm90b3R5cGUsIFwiaWNvbkNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdsZWZ0JylcbiAgICBdLCBIZWFkZXIucHJvdG90eXBlLCBcImljb25Qb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuSGVhZGVyID0gSGVhZGVyO1xuICAgIHZhciBUYWJJdGVtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRhYkl0ZW0sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRhYkl0ZW0oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRhYkl0ZW07XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBIZWFkZXIpXG4gICAgXSwgVGFiSXRlbS5wcm90b3R5cGUsIFwiaGVhZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgVGFiSXRlbS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFRhYkl0ZW0ucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVGFiSXRlbS5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlRhYkl0ZW0gPSBUYWJJdGVtO1xuICAgIHZhciBUYWIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVGFiLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBUYWIob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnByZXZJbmRleCA9IDA7XG4gICAgICAgICAgICBfdGhpcy5zaG93ID0geyBuYW1lOiAnU2xpZGVEb3duJywgZHVyYXRpb246IDEwMCB9O1xuICAgICAgICAgICAgX3RoaXMuaGlkZSA9IHsgbmFtZTogJ1NsaWRlVXAnLCBkdXJhdGlvbjogMTAwIH07XG4gICAgICAgICAgICBfdGhpcy5hbmltYXRlT3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMuYW5pbU9iaiA9IG5ldyBlajJfYmFzZV81LkFuaW1hdGlvbihfdGhpcy5hbmltYXRlT3B0aW9ucyk7XG4gICAgICAgICAgICBfdGhpcy5tYXhIZWlnaHQgPSAwO1xuICAgICAgICAgICAgX3RoaXMudGl0bGUgPSAnQ2xvc2UnO1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICB0YWI6ICd0YWInLFxuICAgICAgICAgICAgICAgIGhvbWU6ICdob21lJyxcbiAgICAgICAgICAgICAgICBlbmQ6ICdlbmQnLFxuICAgICAgICAgICAgICAgIGVudGVyOiAnZW50ZXInLFxuICAgICAgICAgICAgICAgIHNwYWNlOiAnc3BhY2UnLFxuICAgICAgICAgICAgICAgIGRlbGV0ZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgbW92ZUxlZnQ6ICdsZWZ0YXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVSaWdodDogJ3JpZ2h0YXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVVcDogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVEb3duOiAnZG93bmFycm93J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBUYWIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGJPYmopKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50Yk9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgWydyb2xlJywgJ2FyaWEtZGlzYWJsZWQnLCAnYXJpYS1hY3RpdmVkZXNjZW5kYW50JywgJ3RhYmluZGV4JywgJ2FyaWEtb3JpZW50YXRpb24nXS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh2YWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjbnRFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEFCICsgJyA+IC4nICsgQ0xTX0NPTlRFTlQsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1RFTVBMQVRFKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoY250RWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBjbnRFbGUuaW5uZXJIVE1MID0gdGhpcy5jbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Rlc3Ryb3llZCcpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNQb3B1cCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pbml0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBuYW1lID0gZWoyX2Jhc2VfMy5Ccm93c2VyLmluZm8ubmFtZTtcbiAgICAgICAgICAgIHZhciBjc3MgPSAobmFtZSA9PT0gJ21zaWUnKSA/ICdlLWllJyA6IChuYW1lID09PSAnZWRnZScpID8gJ2UtZWRnZScgOiAobmFtZSA9PT0gJ3NhZmFyaScpID8gJ2Utc2FmYXJpJyA6ICcnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ3dpZHRoJzogZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMud2lkdGgpLCAnaGVpZ2h0JzogZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMuaGVpZ2h0KSB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLmNzc0NsYXNzLCB0cnVlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgcm9sZTogJ3RhYmxpc3QnLCAnYXJpYS1kaXNhYmxlZCc6ICdmYWxzZScsICdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnOiAnJyB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3ModGhpcy5lbGVtZW50LCBjc3MsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udGFpbmVyKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFJlbmRlciA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnJlbmRlckNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA+IDAgJiYgdGhpcy5lbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfQ09OVEVOVCB9KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRPcmllbnRhdGlvbih0aGlzLmhlYWRlclBsYWNlbWVudCwgZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0hFQURFUiB9KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1RlbXBsYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUZW1wbGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xTX1RFTVBMQVRFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCB0aGlzLmVsZW1lbnQpKSAmJiAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgdGhpcy5lbGVtZW50KSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckhlYWRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNUywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy50Ykl0ZW1zKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LnJpcHBsZUVmZmVjdCh0aGlzLnRiSXRlbXMsIHsgc2VsZWN0b3I6ICcuZS10YWItd3JhcCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNUywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZHJMaW5lID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0lORElDQVRPUiArICcgJyArIENMU19ISURERU4gKyAnICcgKyBDTFNfSUdOT1JFIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NyQ250ID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy5lLWhzY3JvbGwtY29udGVudCcsIHRoaXMudGJJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChzY3JDbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JDbnQuaW5zZXJ0QmVmb3JlKHRoaXMuYmRyTGluZSwgc2NyQ250LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50Ykl0ZW1zLmluc2VydEJlZm9yZSh0aGlzLmJkckxpbmUsIHRoaXMudGJJdGVtcy5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRlbnRIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSVEwodGhpcy5lbmFibGVSdGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnJlbmRlckhlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdGFiSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaGRyRWxlID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0hFQURFUiwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuYnRuQ2xzID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IENMU19JQ09OUyArICcgJyArIENMU19JQ09OX0NMT1NFLCBhdHRyczogeyB0aXRsZTogdGhpcy50aXRsZSB9IH0pLm91dGVySFRNTDtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGFiSXRlbXMgPSB0aGlzLnBhcnNlT2JqZWN0KHRoaXMuaXRlbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5oZHJFbGUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBoZHJJdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBoZHJJdGVtcy5wdXNoKHRoaXMuaGRyRWxlLmNoaWxkcmVuLml0ZW0oaSkuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhkckVsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZHJFbGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xTX0lURU1TIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgaGRySXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogQ0xTX0lURU0sIGlkOiBDTFNfSVRFTSArICdfJyArIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJvbGU6ICd0YWInLCAnYXJpYS1jb250cm9scyc6IENMU19DT05URU5UICsgJ18nICsgaW5kZXgsICdhcmlhLXNlbGVjdGVkJzogJ2ZhbHNlJyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dCA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBDTFNfVEVYVCwgaW5uZXJIVE1MOiBpdGVtLCBhdHRyczogeyAncm9sZSc6ICdwcmVzZW50YXRpb24nIH0gfSkub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnQgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfVEVYVF9XUkFQLCBpbm5lckhUTUw6IHR4dCArIF90aGlzLmJ0bkNscyB9KS5vdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcCA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19XUkFQLCBpbm5lckhUTUw6IGNvbnQsIGF0dHJzOiB7IHRhYkluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSVRFTVMsIF90aGlzLmVsZW1lbnQpLmFwcGVuZENoaWxkKGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgYXR0cikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX0lURU0sIF90aGlzLmVsZW1lbnQpW2luZGV4XS5hcHBlbmRDaGlsZCh3cmFwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50Yk9iaiA9IG5ldyB0b29sYmFyXzEuVG9vbGJhcih7XG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvd01vZGU6IHRoaXMub3ZlcmZsb3dNb2RlLFxuICAgICAgICAgICAgICAgIGl0ZW1zOiAodGFiSXRlbXMubGVuZ3RoICE9PSAwKSA/IHRhYkl0ZW1zIDogW10sXG4gICAgICAgICAgICAgICAgY2xpY2tlZDogdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnRiT2JqLmFwcGVuZFRvKHRoaXMuaGRyRWxlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtb3JpZW50YXRpb24nOiAnaG9yaXpvbnRhbCcgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENsb3NlQnV0dG9uKHRoaXMuc2hvd0Nsb3NlQnV0dG9uKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IGhlYWRlclBsYWNlbWVudDogKHRoaXMuZWxlbWVudC5jaGlsZHJlbi5pdGVtKDApLmNsYXNzTGlzdC5jb250YWlucyhDTFNfSEVBREVSKSkgPyAnVG9wJyA6ICdCb3R0b20nIH0sIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnJlbmRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNudEVsZSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19DT05URU5ULCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGhkckl0ZW0gPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNudCA9ICh0aGlzLmNudEVsZS5jaGlsZHJlbi5sZW5ndGggPiAwKSA/IHRoaXMuY250RWxlLmlubmVySFRNTCA6ICcnO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50cyA9IHRoaXMuY250RWxlLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGRySXRlbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudHMubGVuZ3RoIC0gMSA+PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50cy5pdGVtKGkpLmNsYXNzTmFtZSArPSBDTFNfSVRFTTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhjb250ZW50cy5pdGVtKGkpLCB7ICdyb2xlJzogJ3RhYnBhbmVsJywgJ2FyaWEtbGFiZWxsZWRieSc6IENMU19JVEVNICsgJ18nICsgaSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzLml0ZW0oaSkuaWQgPSBDTFNfQ09OVEVOVCArICdfJyArIGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucGFyc2VPYmplY3QgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5IVE1MID0gJyc7XG4gICAgICAgICAgICB2YXIgdGJDb3VudCA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciB0SXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0uaGVhZGVyLmljb25Qb3NpdGlvbikpID8gJycgOiBpdGVtLmhlYWRlci5pY29uUG9zaXRpb247XG4gICAgICAgICAgICAgICAgdmFyIGNzcyA9IChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0uaGVhZGVyLmljb25Dc3MpKSA/ICcnIDogaXRlbS5oZWFkZXIuaWNvbkNzcztcbiAgICAgICAgICAgICAgICB2YXIgdHh0ID0gaXRlbS5oZWFkZXIudGV4dDtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSAoKHRiQ291bnQgPT09IDApID8gaW5kZXggOiAoX3RoaXMuaXNSZXBsYWNlID09PSB0cnVlKSA/IGluZGV4IDogdGJDb3VudCArIGluZGV4KTtcbiAgICAgICAgICAgICAgICB2YXIgZGlzYWJsZWQgPSAoaXRlbS5kaXNhYmxlZCkgPyAnICcgKyBDTFNfRElTQUJMRSA6ICcnO1xuICAgICAgICAgICAgICAgIHZhciB0SHRtbCA9ICgodHh0IGluc3RhbmNlb2YgT2JqZWN0KSA/IHR4dC5vdXRlckhUTUwgOiB0eHQpO1xuICAgICAgICAgICAgICAgIHZhciB0eHRFbXB0eSA9ICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0SHRtbCkgJiYgdEh0bWwgIT09ICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgdEVsZSA9ICh0eHRFbXB0eSkgPyBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBDTFNfVEVYVCwgaW5uZXJIVE1MOiB0SHRtbCwgYXR0cnM6IHsgJ3JvbGUnOiAncHJlc2VudGF0aW9uJyB9XG4gICAgICAgICAgICAgICAgfSkub3V0ZXJIVE1MIDogJyc7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogQ0xTX0lDT05TICsgJyAnICsgQ0xTX1RBQl9JQ09OICsgJyAnICsgQ0xTX0lDT04gKyAnLScgKyBwb3MgKyAnICcgKyBjc3NcbiAgICAgICAgICAgICAgICB9KS5vdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgaWYgKCh0eHQgPT09ICcnIHx8IHR4dCA9PT0gdW5kZWZpbmVkKSAmJiBjc3MgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodHh0ICE9PSAnJyAmJiB0eHQgIT09IHVuZGVmaW5lZCkgJiYgY3NzICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5IVE1MID0gKHBvcyA9PT0gJ2xlZnQnIHx8IHBvcyA9PT0gJ3RvcCcpID8gaWNvbiArICcnICsgdEVsZSA6IHRFbGUgKyAnJyArIGljb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkhUTUwgPSAoY3NzID09PSAnJykgPyB0RWxlIDogaWNvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdENvbnQgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBDTFNfVEVYVF9XUkFQLCBpbm5lckhUTUw6IGluSFRNTCArICcnICsgX3RoaXMuYnRuQ2xzIH0pLm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcCA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENMU19XUkFQLCBpbm5lckhUTUw6IHRDb250LCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgICAgIHZhciBhdHRyT2JqID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogQ0xTX0lURU0gKyAnXycgKyBpZCwgcm9sZTogJ3RhYicsICdhcmlhLXNlbGVjdGVkJzogJ2ZhbHNlJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHRJdGVtID0geyBodG1sQXR0cmlidXRlczogYXR0ck9iaiwgdGVtcGxhdGU6IHdyYXAub3V0ZXJIVE1MIH07XG4gICAgICAgICAgICAgICAgdEl0ZW0uY3NzQ2xhc3MgPSBpdGVtLmNzc0NsYXNzICsgJycgKyBkaXNhYmxlZCArICcnICsgKChjc3MgIT09ICcnKSA/ICdlLWknICsgcG9zIDogJycpICsgJyAnICsgKCghdHh0RW1wdHkpID8gQ0xTX0lDT04gOiAnJyk7XG4gICAgICAgICAgICAgICAgaWYgKHBvcyA9PT0gJ3RvcCcgfHwgcG9zID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtdmVydGljYWwtaWNvbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0SXRlbXMucHVzaCh0SXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0SXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucmVtb3ZlQWN0aXZlQ2xhc3MgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHZhciBoZHJBY3RFbGUgPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnOnJvb3QgLicgKyBDTFNfSEVBREVSICsgJyAuJyArIENMU19UQl9JVEVNICsgJy4nICsgQ0xTX0FDVElWRSwgdGhpcy5lbGVtZW50KVswXTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChoZHJBY3RFbGUpKSB7XG4gICAgICAgICAgICAgICAgaGRyQWN0RWxlLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICAgICAgdmFyIG5vID0gdGhpcy5leHRJbmRleChoZHJBY3RFbGUuaWQpO1xuICAgICAgICAgICAgICAgIHZhciB0cmcgPSB0aGlzLmZpbmRFbGUoZWoyX2Jhc2VfMi5zZWxlY3QoJy5lLWNvbnRlbnQnLCB0aGlzLmVsZW1lbnQpLmNoaWxkcmVuLCBDTFNfQ09OVEVOVCArICdfJyArIG5vKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5jaGVja1BvcHVwT3ZlcmZsb3cgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB0aGlzLnRiUG9wID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX1BPUCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBwb3BJY29uID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy5lLWhvci1uYXYnLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHRickl0ZW1zID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU1TLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKCh0aGlzLmVuYWJsZVJ0bCAmJiAoKHBvcEljb24ub2Zmc2V0TGVmdCArIHBvcEljb24ub2Zmc2V0V2lkdGgpID4gdGJySXRlbXMub2Zmc2V0TGVmdCkpXG4gICAgICAgICAgICAgICAgfHwgKCF0aGlzLmVuYWJsZVJ0bCAmJiBwb3BJY29uLm9mZnNldExlZnQgPCB0YnJJdGVtcy5vZmZzZXRXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZChDTFNfVEJfUE9QVVApO1xuICAgICAgICAgICAgICAgIHRoaXMudGJQb3AuaW5zZXJ0QmVmb3JlKGVsZS5jbG9uZU5vZGUodHJ1ZSksIGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9QT1BVUCwgdGhpcy50YlBvcClbMF0pO1xuICAgICAgICAgICAgICAgIGVsZS5vdXRlckhUTUwgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnBvcHVwSGFuZGxlciA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciByaXBFbGUgPSB0YXJnZXQucXVlcnlTZWxlY3RvcignLmUtcmlwcGxlLWVsZW1lbnQnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChyaXBFbGUpKSB7XG4gICAgICAgICAgICAgICAgcmlwRWxlLm91dGVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19XUkFQKS5jbGFzc0xpc3QucmVtb3ZlKCdlLXJpcHBsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50Ykl0ZW0gPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTVMgKyAnIC4nICsgQ0xTX1RCX0lURU0sIHRoaXMuaGRyRWxlKTtcbiAgICAgICAgICAgIHZhciBsYXN0Q2hpbGQgPSB0aGlzLnRiSXRlbVt0aGlzLnRiSXRlbS5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRiSXRlbS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShDTFNfVEJfUE9QVVApO1xuICAgICAgICAgICAgICAgIHRoaXMudGJJdGVtcy5hcHBlbmRDaGlsZCh0YXJnZXQuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdEVsZUlkID0gdGFyZ2V0LmlkO1xuICAgICAgICAgICAgICAgIHRhcmdldC5vdXRlckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1BvcHVwT3ZlcmZsb3cobGFzdENoaWxkKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldkVsZSA9IHRoaXMudGJJdGVtcy5sYXN0Q2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1BvcHVwT3ZlcmZsb3cocHJldkVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNQb3B1cCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMudGJJdGVtcykubGVuZ3RoIC0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZXRDbG9zZUJ1dHRvbiA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHZhciB0cmcgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgKHZhbCA9PT0gdHJ1ZSkgPyB0cmcuY2xhc3NMaXN0LmFkZChDTFNfQ0xPU0VfU0hPVykgOiB0cmcuY2xhc3NMaXN0LnJlbW92ZShDTFNfQ0xPU0VfU0hPVyk7XG4gICAgICAgICAgICB0aGlzLnRiT2JqLnJlZnJlc2hPdmVyZmxvdygpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWN0RWxlUG9zaXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5wcmV2Q3RuQW5pbWF0aW9uID0gZnVuY3Rpb24gKHByZXYsIGN1cnJlbnQpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb247XG4gICAgICAgICAgICB2YXIgY2hlY2tSVEwgPSB0aGlzLmVuYWJsZVJ0bCB8fCB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19SVEwpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQb3B1cCB8fCBwcmV2IDw9IGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb24ucHJldmlvdXMuZWZmZWN0ID09PSAnU2xpZGVMZWZ0SW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IHsgbmFtZTogJ1NsaWRlTGVmdE91dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb24ucHJldmlvdXMuZHVyYXRpb24sIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5wcmV2aW91cy5lYXNpbmcgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uLm5leHQuZWZmZWN0ID09PSAnU2xpZGVSaWdodEluJykge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gPSB7IG5hbWU6ICdTbGlkZVJpZ2h0T3V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvbi5uZXh0LmR1cmF0aW9uLCB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb24ubmV4dC5lYXNpbmcgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS50cmlnZ2VyUHJldkFuaW1hdGlvbiA9IGZ1bmN0aW9uIChvbGRDbnQsIHByZXZJbmRleCkge1xuICAgICAgICAgICAgdmFyIGFuaW1hdGVPYmogPSB0aGlzLnByZXZDdG5BbmltYXRpb24ocHJldkluZGV4LCB0aGlzLnNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoYW5pbWF0ZU9iaikpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRlT2JqLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKG9sZENudCwgeyAncG9zaXRpb24nOiAnYWJzb2x1dGUnIH0pO1xuICAgICAgICAgICAgICAgICAgICBvbGRDbnQuY2xhc3NMaXN0LmFkZCgnZS12aWV3Jyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmltYXRlT2JqLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2xkQ250LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIG9sZENudC5jbGFzc0xpc3QucmVtb3ZlKENMU19BQ1RJVkUpO1xuICAgICAgICAgICAgICAgICAgICBvbGRDbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS12aWV3Jyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUob2xkQ250LCB7ICdkaXNwbGF5JzogJycsICdwb3NpdGlvbic6ICcnIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzUuQW5pbWF0aW9uKGFuaW1hdGVPYmopLmFuaW1hdGUob2xkQ250KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS50cmlnZ2VyQW5pbWF0aW9uID0gZnVuY3Rpb24gKGlkLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwcmV2SW5kZXggPSB0aGlzLnByZXZJbmRleDtcbiAgICAgICAgICAgIHZhciBvbGRDbnQgPSBlajJfYmFzZV8yLnNlbGVjdCgnIycgKyB0aGlzLnByZXZBY3RpdmVFbGUsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgcHJldkVsZSA9IHRoaXMudGJJdGVtW3ByZXZJbmRleF07XG4gICAgICAgICAgICB2YXIgbm8gPSB0aGlzLmV4dEluZGV4KHRoaXMudGJJdGVtW3RoaXMuc2VsZWN0ZWRJdGVtXS5pZCk7XG4gICAgICAgICAgICB2YXIgbmV3Q250O1xuICAgICAgICAgICAgbmV3Q250ID0gdGhpcy5maW5kRWxlKHRoaXMuY250RWxlLmNoaWxkcmVuLCBDTFNfQ09OVEVOVCArICdfJyArIG5vKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKG9sZENudCkgJiYgIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQocHJldkVsZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWRObyA9IHRoaXMuZXh0SW5kZXgocHJldkVsZS5pZCk7XG4gICAgICAgICAgICAgICAgb2xkQ250ID0gdGhpcy5maW5kRWxlKHRoaXMuY250RWxlLmNoaWxkcmVuLCBDTFNfQ09OVEVOVCArICdfJyArIGlkTm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaW5pdFJlbmRlciB8fCB2YWx1ZSA9PT0gZmFsc2UgfHwgdGhpcy5hbmltYXRpb24gPT09IHt9IHx8IGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5hbmltYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZENudCAmJiBvbGRDbnQgIT09IG5ld0NudCkge1xuICAgICAgICAgICAgICAgICAgICBvbGRDbnQuY2xhc3NMaXN0LnJlbW92ZShDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNudCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19DT05URU5ULCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGFuaW1hdGVPYmo7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2SW5kZXggPiB0aGlzLnNlbGVjdGVkSXRlbSAmJiAhdGhpcy5pc1BvcHVwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wZW5FZmYgPSB0aGlzLmFuaW1hdGlvbi5wcmV2aW91cy5lZmZlY3Q7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZU9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKChvcGVuRWZmID09PSAnTm9uZScpID8gJycgOiAoKG9wZW5FZmYgIT09ICdTbGlkZUxlZnRJbicpID8gb3BlbkVmZiA6ICdTbGlkZUxlZnRJbicpKSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLnByZXZpb3VzLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb24ucHJldmlvdXMuZWFzaW5nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNQb3B1cCB8fCB0aGlzLnByZXZJbmRleCA8IHRoaXMuc2VsZWN0ZWRJdGVtIHx8IHRoaXMucHJldkluZGV4ID09PSB0aGlzLnNlbGVjdGVkSXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBjbHNFZmYgPSB0aGlzLmFuaW1hdGlvbi5uZXh0LmVmZmVjdDtcbiAgICAgICAgICAgICAgICBhbmltYXRlT2JqID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAoKGNsc0VmZiA9PT0gJ05vbmUnKSA/ICcnIDogKChjbHNFZmYgIT09ICdTbGlkZVJpZ2h0SW4nKSA/IGNsc0VmZiA6ICdTbGlkZVJpZ2h0SW4nKSksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvbi5uZXh0LmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb24ubmV4dC5lYXNpbmdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5pbWF0ZU9iai5wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbnQuY2xhc3NMaXN0LmFkZChDTFNfUFJPR1JFU1MpO1xuICAgICAgICAgICAgICAgIF90aGlzLnNldEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFuaW1hdGVPYmouZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNudC5jbGFzc0xpc3QucmVtb3ZlKENMU19QUk9HUkVTUyk7XG4gICAgICAgICAgICAgICAgbmV3Q250LmNsYXNzTGlzdC5hZGQoQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmluaXRSZW5kZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJQcmV2QW5pbWF0aW9uKG9sZENudCwgcHJldkluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldkFjdGl2ZUVsZSA9IG5ld0NudC5pZDtcbiAgICAgICAgICAgIHRoaXMuaXNQb3B1cCA9IGZhbHNlO1xuICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzUuQW5pbWF0aW9uKGFuaW1hdGVPYmopLmFuaW1hdGUobmV3Q250KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5rZXlQcmVzc2VkID0gZnVuY3Rpb24gKHRyZykge1xuICAgICAgICAgICAgdmFyIHRyZ1BhcmVudCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0cmcsICcuJyArIENMU19UQl9JVEVNKTtcbiAgICAgICAgICAgIHZhciB0cmdJbmRleCA9IHRoaXMuZ2V0RWxlSW5kZXgodHJnUGFyZW50KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBvcEVsZSkgJiYgdHJnLmNsYXNzTGlzdC5jb250YWlucygnZS1ob3ItbmF2JykpIHtcbiAgICAgICAgICAgICAgICAodGhpcy5wb3BFbGUuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19QT1BVUF9PUEVOKSkgPyB0aGlzLnBvcE9iai5oaWRlKHRoaXMuaGlkZSkgOiB0aGlzLnBvcE9iai5zaG93KHRoaXMuc2hvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNjcm9sbC1uYXYnKSkge1xuICAgICAgICAgICAgICAgIHRyZy5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRyZ1BhcmVudCkgJiYgdHJnUGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhDTFNfQUNUSVZFKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodHJnSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wb3BFbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcE9iai5oaWRlKHRoaXMuaGlkZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZ2V0RWxlSW5kZXggPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudCksIGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmV4dEluZGV4ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQucmVwbGFjZShDTFNfSVRFTSArICdfJywgJycpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmdldENvbnRlbnQgPSBmdW5jdGlvbiAoZWxlLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm47XG4gICAgICAgICAgICB2YXIgY29udGVudDtcbiAgICAgICAgICAgIHZhciB0ZW1wRWxlID0gZWoyX2Jhc2VfNC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHZhciBjbnQgPSB0aGlzLml0ZW1zW051bWJlcihpbmRleCldLmNvbnRlbnQ7XG4gICAgICAgICAgICB2YXIgY250SFRNTCA9ICh0eXBlb2YgY250ICE9PSAnb2JqZWN0JykgPyBjbnQgOiBjbnQub3V0ZXJIVE1MO1xuICAgICAgICAgICAgdGVtcGxhdGVGbiA9IGVqMl9iYXNlXzUuY29tcGlsZShjbnRIVE1MKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZUZuKSAmJiB0ZW1wbGF0ZUZuKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGVtcGxhdGVGbigpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wRWxlLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQodGVtcEVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGUuaW5uZXJIVE1MID0gY250SFRNTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5maW5kRWxlID0gZnVuY3Rpb24gKGl0ZW1zLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBlbGU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zW2ldLmlkID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlID0gaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGU7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc2V0T3JpZW50YXRpb24gPSBmdW5jdGlvbiAocGxhY2UsIGVsZSkge1xuICAgICAgICAgICAgKHBsYWNlID09PSAnQm90dG9tJykgPyB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlKSA6IHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoZWxlLCBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfQ09OVEVOVCwgdGhpcy5lbGVtZW50KSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc2V0Q3NzQ2xhc3MgPSBmdW5jdGlvbiAoZWxlLCBjbHMsIHZhbCkge1xuICAgICAgICAgICAgaWYgKGNscyA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGlzdCA9IGNscy5zcGxpdCgnICcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZChsaXN0W2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKGxpc3RbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZXRDb250ZW50SGVpZ2h0ID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jbnRFbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhlaWdodDtcbiAgICAgICAgICAgIHZhciBoZHJFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0QWRqdXN0TW9kZSA9PT0gJ05vbmUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmNudEVsZSwgeyAnaGVpZ2h0JzogKHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQgLSBoZHJFbGUub2Zmc2V0SGVpZ2h0KSArICdweCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5oZWlnaHRBZGp1c3RNb2RlID09PSAnRmlsbCcpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyAnaGVpZ2h0JzogJzEwMCUnIH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5jbnRFbGUsIHsgJ2hlaWdodCc6ICdhdXRvJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaGVpZ2h0QWRqdXN0TW9kZSA9PT0gJ0F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNudCA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19DT05URU5UICsgJyA+IC4nICsgQ0xTX0lURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUZW1wbGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNudC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY250W2ldLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTpibG9jazsgdmlzaWJpbGl0eTogdmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSBNYXRoLm1heCh0aGlzLm1heEhlaWdodCwgdGhpcy5nZXRIZWlnaHQoY250W2ldKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbnRbaV0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNudFtpXS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndmlzaWJpbGl0eScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNudEVsZSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19DT05URU5ULCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNudEVsZS5hcHBlbmRDaGlsZChlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogKENMU19DT05URU5UICsgJ18nICsgMCksIGNsYXNzTmFtZTogQ0xTX0lURU0gKyAnICcgKyBDTFNfQUNUSVZFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7ICdyb2xlJzogJ3RhYnBhbmVsJywgJ2FyaWEtbGFiZWxsZWRieSc6IENMU19JVEVNICsgJ18nICsgMCB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuY250RWxlLmNoaWxkcmVuLml0ZW0oMCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KGVsZSwgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1heEhlaWdodCA9IE1hdGgubWF4KHRoaXMubWF4SGVpZ2h0LCB0aGlzLmdldEhlaWdodChlbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldENvbnRlbnQoZWxlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5jbnRFbGUsIHsgJ2hlaWdodCc6IHRoaXMubWF4SGVpZ2h0ICsgJ3B4JyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5jbnRFbGUsIHsgJ2hlaWdodCc6ICdhdXRvJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB2YXIgY3MgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGUpO1xuICAgICAgICAgICAgcmV0dXJuIGVsZS5vZmZzZXRIZWlnaHQgKyBwYXJzZUZsb2F0KGNzLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctdG9wJykpICsgcGFyc2VGbG9hdChjcy5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWJvdHRvbScpKSArXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjcy5nZXRQcm9wZXJ0eVZhbHVlKCdtYXJnaW4tdG9wJykpICsgcGFyc2VGbG9hdChjcy5nZXRQcm9wZXJ0eVZhbHVlKCdtYXJnaW4tYm90dG9tJykpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldEFjdGl2ZUJvcmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0cmcgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEJfSVRFTSArICcuJyArIENMU19BQ1RJVkUsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodHJnID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhzQ250ID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU1TICsgJyAuZS1oc2Nyb2xsLWNvbnRlbnQnLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy50Ykl0ZW1zID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU1TLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGJhciA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19JTkRJQ0FUT1IsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgdGJXaWR0aCA9IChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGhzQ250KSkgPyB0aGlzLnRiSXRlbXMub2Zmc2V0V2lkdGggOiBoc0NudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0U3R5bGVBdHRyaWJ1dGUoYmFyLCB7ICdsZWZ0JzogdHJnLm9mZnNldExlZnQgKyAncHgnLCAncmlnaHQnOiB0YldpZHRoIC0gKHRyZy5vZmZzZXRMZWZ0ICsgdHJnLm9mZnNldFdpZHRoKSArICdweCcgfSk7XG4gICAgICAgICAgICB0aGlzLmJkckxpbmUuY2xhc3NMaXN0LnJlbW92ZShDTFNfSElEREVOKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5zZXRBY3RpdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudGJJdGVtID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgdHJnID0gdGhpcy50Ykl0ZW1bdmFsdWVdO1xuICAgICAgICAgICAgaWYgKHZhbHVlID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBzZWxlY3RlZEl0ZW06IHZhbHVlIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMCB8fCBpc05hTih2YWx1ZSkgfHwgdGhpcy50Ykl0ZW0ubGVuZ3RoID09PSAwIHx8IHRyZy5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2ID0gdGhpcy50Ykl0ZW1bdGhpcy5wcmV2SW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChwcmV2KSkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModHJnLCB7ICdhcmlhLWNvbnRyb2xzJzogQ0xTX0NPTlRFTlQgKyAnXycgKyB2YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpZCA9IHRyZy5pZDtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlQ2xhc3MoaWQpO1xuICAgICAgICAgICAgdHJnLmNsYXNzTGlzdC5hZGQoQ0xTX0FDVElWRSk7XG4gICAgICAgICAgICB0cmcuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIHZhciBubyA9IE51bWJlcih0aGlzLmV4dEluZGV4KGlkKSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnOiBpZCB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQsIHRoaXMuZWxlbWVudCkuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJnXzEgPSB0aGlzLmZpbmRFbGUoZWoyX2Jhc2VfMi5zZWxlY3QoJy5lLWNvbnRlbnQnLCB0aGlzLmVsZW1lbnQpLmNoaWxkcmVuLCBDTFNfQ09OVEVOVCArICdfJyArIG5vKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRyZ18xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJnXzEuY2xhc3NMaXN0LmFkZChDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJBbmltYXRpb24oaWQsIHRoaXMuZW5hYmxlQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19DT05URU5UICsgJyA+ICMnICsgQ0xTX0NPTlRFTlQgKyAnXycgKyB0aGlzLmV4dEluZGV4KGlkKSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNudEVsZS5hcHBlbmRDaGlsZChlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBDTFNfQ09OVEVOVCArICdfJyArIHRoaXMuZXh0SW5kZXgoaWQpLCBjbGFzc05hbWU6IENMU19JVEVNICsgJyAnICsgQ0xTX0FDVElWRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJvbGU6ICd0YWJwYW5lbCcsICdhcmlhLWxhYmVsbGVkYnknOiBDTFNfSVRFTSArICdfJyArIHRoaXMuZXh0SW5kZXgoaWQpIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlVHJnID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX0NPTlRFTlQgKyAnID4gIycgKyBDTFNfQ09OVEVOVCArICdfJyArIHRoaXMuZXh0SW5kZXgoaWQpLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldENvbnRlbnQoZWxlVHJnLCBOdW1iZXIodGhpcy5leHRJbmRleChpZCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChDTFNfQUNUSVZFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyQW5pbWF0aW9uKGlkLCB0aGlzLmVuYWJsZUFuaW1hdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICAgICAgdmFyIGN1ckFjdEl0ZW0gPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSICsgJyAjJyArIGlkLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoSXRlbVZpc2liaWxpdHkoY3VyQWN0SXRlbSk7XG4gICAgICAgICAgICBjdXJBY3RJdGVtLmZpcnN0Q2hpbGQuZm9jdXMoKTtcbiAgICAgICAgICAgIHZhciBldmVudEFyZyA9IHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW06IHRoaXMucHJldkl0ZW0sXG4gICAgICAgICAgICAgICAgcHJldmlvdXNJbmRleDogdGhpcy5wcmV2SW5kZXgsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtOiB0cmcsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleDogdmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3NlbGVjdGVkJywgZXZlbnRBcmcpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldEl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB0aGlzLmlzUmVwbGFjZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnRiSXRlbXMgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEJfSVRFTVMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnRiT2JqLml0ZW1zID0gdGhpcy5wYXJzZU9iamVjdChpdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnRiT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLmlzUmVwbGFjZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNldFJUTCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy50Yk9iai5lbmFibGVSdGwgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudGJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3ModGhpcy5lbGVtZW50LCBDTFNfUlRMLCB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZWZyZXNoQWN0aXZlQm9yZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYmRyTGluZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJkckxpbmUuY2xhc3NMaXN0LmFkZChDTFNfSElEREVOKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQm9yZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlZnJlc2hBY3RFbGVQb3NpdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLmhvdmVySGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAna2V5ZG93bicsIHRoaXMuc3BhY2VLZXlEb3duLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNudEVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlID0gbmV3IGVqMl9iYXNlXzUuVG91Y2godGhpcy5jbnRFbGUsIHsgc3dpcGU6IHRoaXMuc3dpcGVIYW5kbGVyLmJpbmQodGhpcykgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmtleU1vZHVsZSA9IG5ldyBlajJfYmFzZV8zLktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwgeyBrZXlBY3Rpb246IHRoaXMua2V5SGFuZGxlci5iaW5kKHRoaXMpLCBrZXlDb25maWdzOiB0aGlzLmtleUNvbmZpZ3MgfSk7XG4gICAgICAgICAgICB0aGlzLnRhYktleU1vZHVsZSA9IG5ldyBlajJfYmFzZV8zLktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczogeyBvcGVuUG9wdXA6ICdzaGlmdCtmMTAnLCB0YWI6ICd0YWInLCBzaGlmdFRhYjogJ3NoaWZ0K3RhYicgfSxcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdrZXlkb3duJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5rZXlNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy50YWJLZXlNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY250RWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVmcmVzaEFjdEVsZVBvc2l0aW9uLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuaG92ZXJIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTFNfRk9DVVMpO1xuICAgICAgICAgICAgdmFyIHRyZyA9IGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgdHJnUGFyZW50ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRyZywgJy4nICsgQ0xTX1RCX0lURU0pO1xuICAgICAgICAgICAgdmFyIHRyZ0luZGV4ID0gdGhpcy5nZXRFbGVJbmRleCh0cmdQYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHRyZy5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0lDT05fQ0xPU0UpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUYWIodHJnSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1BvcHVwID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRyZ1BhcmVudCkgJiYgdHJnSW5kZXggIT09IHRoaXMuc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRyZ0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc3dpcGVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnZlbG9jaXR5IDwgMyAmJiBlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5zd2lwZURpcmVjdGlvbiA9PT0gJ1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJdGVtIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5zd2lwZURpcmVjdGlvbiA9PT0gJ0xlZnQnICYmICh0aGlzLnNlbGVjdGVkSXRlbSAhPT0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudCkubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEl0ZW0gKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuc3BhY2VLZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICgoZS5rZXlDb2RlID09PSAzMiAmJiBlLndoaWNoID09PSAzMikgfHwgKGUua2V5Q29kZSA9PT0gMzUgJiYgZS53aGljaCA9PT0gMzUpKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmtleUhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xTX0ZPQ1VTKTtcbiAgICAgICAgICAgIHZhciB0cmcgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBhY3RFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSICsgJyAuJyArIENMU19BQ1RJVkUsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgdGFiSXRlbSA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNICsgJzpub3QoLicgKyBDTFNfVEJfUE9QVVAgKyAnKScsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBvcEVsZSA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9QT1AsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wb3BFbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BPYmogPSB0aGlzLnBvcEVsZS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2VudGVyJyAmJiB0cmcuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhvci1uYXYnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlQcmVzc2VkKHRyZyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRUYWInOlxuICAgICAgICAgICAgICAgICAgICBpZiAodHJnLmNsYXNzTGlzdC5jb250YWlucyhDTFNfV1JBUClcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGVqMl9iYXNlXzEuY2xvc2VzdCh0cmcsICcuJyArIENMU19UQl9JVEVNKS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmcuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcE9iaiAmJiBlajJfYmFzZV8yLmlzVmlzaWJsZSh0aGlzLnBvcE9iai5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouaGlkZSh0aGlzLmhpZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFjdEVsZS5jaGlsZHJlbi5pdGVtKDApLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3ZlTGVmdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBlajJfYmFzZV8xLmNsb3Nlc3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJy4nICsgQ0xTX1RCX0lURU0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEl0ZW1WaXNpYmlsaXR5KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ29wZW5Qb3B1cCc6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucG9wRWxlKSAmJiB0aGlzLnBvcEVsZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1BPUFVQX0NMT1NFKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BPYmouc2hvdyh0aGlzLnNob3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmdQYXJlbnQgPSBlajJfYmFzZV8xLmNsb3Nlc3QodHJnLCAnLicgKyBDTFNfVEJfSVRFTSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDbG9zZUJ1dHRvbiA9PT0gdHJ1ZSAmJiAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0cmdQYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnh0U2liID0gdHJnUGFyZW50Lm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKG54dFNpYikgJiYgbnh0U2liLmNsYXNzTGlzdC5jb250YWlucyhDTFNfVEJfSVRFTSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBueHRTaWIuZmlyc3RDaGlsZC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUYWIodGhpcy5nZXRFbGVJbmRleCh0cmdQYXJlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUJvcmRlcigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5yZWZyZXNoQWN0RWxlUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYWN0aXZlRWxlID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy4nICsgQ0xTX1RCX0lURU0gKyAnLicgKyBDTFNfVEJfUE9QVVAgKyAnLicgKyBDTFNfQUNUSVZFLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGFjdGl2ZUVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmdldEVsZUluZGV4KGFjdGl2ZUVsZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWN0aXZlQm9yZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucmVmcmVzaEl0ZW1WaXNpYmlsaXR5ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIHNjckNudCA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuZS1oc2Nyb2xsLWNvbnRlbnQnLCB0aGlzLnRiSXRlbXMpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHNjckNudCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NyQmFyID0gZWoyX2Jhc2VfMi5zZWxlY3QoJy5lLWhzY3JvbGwtYmFyJywgdGhpcy50Ykl0ZW1zKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NyU3RhcnQgPSBzY3JCYXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgc2NyRW5kID0gc2NyU3RhcnQgKyBzY3JCYXIub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGVsZVN0YXJ0ID0gdGFyZ2V0Lm9mZnNldExlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIGVsZVdpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBlbGVFbmQgPSB0YXJnZXQub2Zmc2V0TGVmdCArIHRhcmdldC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICBpZiAoKHNjclN0YXJ0IDwgZWxlU3RhcnQpICYmIChzY3JFbmQgPCBlbGVFbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVWaWV3UmFuZ2UgPSBzY3JFbmQgLSBlbGVTdGFydDtcbiAgICAgICAgICAgICAgICAgICAgc2NyQmFyLnNjcm9sbExlZnQgPSBzY3JTdGFydCArIChlbGVXaWR0aCAtIGVsZVZpZXdSYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHNjclN0YXJ0ID4gZWxlU3RhcnQpICYmIChzY3JFbmQgPiBlbGVFbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlVmlld1JhbmdlID0gZWxlRW5kIC0gc2NyU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JCYXIuc2Nyb2xsTGVmdCA9IHNjclN0YXJ0IC0gKGVsZVdpZHRoIC0gZWxlVmlld1JhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5ob3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRyZyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHRyZy5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0lDT05fQ0xPU0UpKSB7XG4gICAgICAgICAgICAgICAgdHJnLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBuZXcgZWoyX2Jhc2VfMy5MMTBuKCd0YWInLCB7IHRpdGxlOiB0aGlzLnRpdGxlIH0sIHRoaXMubG9jYWxlKS5nZXRDb25zdGFudCgndGl0bGUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuZW5hYmxlVGFiID0gZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHRiSXRlbXMgPSBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSwgdGhpcy5lbGVtZW50KVtpbmRleF07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0Ykl0ZW1zKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRiSXRlbXMuY2xhc3NMaXN0LnJlbW92ZShDTFNfRElTQUJMRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0Ykl0ZW1zLmNsYXNzTGlzdC5hZGQoQ0xTX0RJU0FCTEUpO1xuICAgICAgICAgICAgICAgIGlmICh0Ykl0ZW1zLmNsYXNzTGlzdC5jb250YWlucyhDTFNfQUNUSVZFKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChpbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRiSXRlbXMuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgKHZhbHVlID09PSB0cnVlKSA/ICdmYWxzZScgOiAndHJ1ZScpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLmFkZFRhYiA9IGZ1bmN0aW9uIChpdGVtcywgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2FkZGluZycsIHsgYWRkZWRJdGVtczogaXRlbXMgfSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChpbmRleCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNKS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUZW1wbGF0ZSA9PT0gdHJ1ZSB8fCBlajJfYmFzZV80LnNlbGVjdEFsbCgnLicgKyBDTFNfVEJfSVRFTSkubGVuZ3RoIC0gMSA8IGluZGV4IHx8IGluZGV4IDwgMCB8fCBpc05hTihpbmRleCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJkckxpbmUuY2xhc3NMaXN0LmFkZChDTFNfSElEREVOKTtcbiAgICAgICAgICAgIHRoaXMudGJJdGVtcyA9IGVqMl9iYXNlXzIuc2VsZWN0KCcuJyArIENMU19UQl9JVEVNUywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciB0YWJJdGVtcyA9IHRoaXMucGFyc2VPYmplY3QoaXRlbXMpO1xuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIF90aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudGJPYmouYWRkSXRlbXModGFiSXRlbXMsIGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignYWRkZWQnLCB7IGFkZGVkSXRlbXM6IGl0ZW1zIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtID09PSBpbmRleCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQm9yZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUucmVtb3ZlVGFiID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgdHJnID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudClbaW5kZXhdO1xuICAgICAgICAgICAgdmFyIHJlbW92aW5nQXJncyA9IHsgcmVtb3ZlZEl0ZW06IHRyZywgcmVtb3ZlZEluZGV4OiBpbmRleCB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdyZW1vdmluZycsIHJlbW92aW5nQXJncyk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0cmcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50Yk9iai5yZW1vdmVJdGVtcyhpbmRleCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgICAgIHZhciBubyA9IHRoaXMuZXh0SW5kZXgodHJnLmlkKTtcbiAgICAgICAgICAgIHZhciBjbnRUcmcgPSB0aGlzLmZpbmRFbGUoZWoyX2Jhc2VfMi5zZWxlY3QoJy5lLWNvbnRlbnQnLCB0aGlzLmVsZW1lbnQpLmNoaWxkcmVuLCBDTFNfQ09OVEVOVCArICdfJyArIG5vKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChjbnRUcmcpKSB7XG4gICAgICAgICAgICAgICAgY250VHJnLm91dGVySFRNTCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlbW92ZWRBcmdzID0geyByZW1vdmVkSXRlbTogdHJnLCByZW1vdmVkSW5kZXg6IGluZGV4IH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3JlbW92ZWQnLCByZW1vdmVkQXJncyk7XG4gICAgICAgICAgICBpZiAodHJnLmNsYXNzTGlzdC5jb250YWlucyhDTFNfQUNUSVZFKSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gKGluZGV4ID4gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0gKyAnOm5vdCguJyArIENMU19UQl9QT1BVUCArICcpJywgdGhpcy5lbGVtZW50KS5sZW5ndGggLSAxKSA/IGluZGV4IC0gMSA6IGluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlQW5pbWF0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGRyRWxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUFuaW1hdGlvbiA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFRhYi5wcm90b3R5cGUuaGlkZVRhYiA9IGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gZWoyX2Jhc2VfNC5zZWxlY3RBbGwoJy4nICsgQ0xTX1RCX0lURU0sIHRoaXMuZWxlbWVudClbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJkckxpbmUuY2xhc3NMaXN0LmFkZChDTFNfSElEREVOKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChDTFNfSElEREVOKTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0FDVElWRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoKGluZGV4ICE9PSAwKSA/IGluZGV4IC0gMSA6IGluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKENMU19ISURERU4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVCb3JkZXIoKTtcbiAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICcnICsgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnRiSXRlbXMgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfVEJfSVRFTVMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnRiSXRlbSA9IGVqMl9iYXNlXzQuc2VsZWN0QWxsKCcuJyArIENMU19UQl9JVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wcmV2SXRlbSA9IHRoaXMudGJJdGVtW3RoaXMucHJldkluZGV4XTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnByZXZJdGVtKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkl0ZW0uY2hpbGRyZW4uaXRlbSgwKS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmcgPSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtOiB0aGlzLnByZXZJdGVtLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSW5kZXg6IHRoaXMucHJldkluZGV4LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbTogdGhpcy50Ykl0ZW1bdGhpcy5zZWxlY3RlZEl0ZW1dLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IHRoaXMuc2VsZWN0ZWRJdGVtXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdzZWxlY3RpbmcnLCBldmVudEFyZyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3MgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGJJdGVtLmxlbmd0aCA+IGFyZ3MgJiYgYXJncyA+PSAwICYmICFpc05hTihhcmdzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZJbmRleCA9IHRoaXMuc2VsZWN0ZWRJdGVtO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50Ykl0ZW1bYXJnc10uY2xhc3NMaXN0LmNvbnRhaW5zKENMU19UQl9QT1BVUCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlKHRoaXMucG9wdXBIYW5kbGVyKHRoaXMudGJJdGVtW2FyZ3NdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZShhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmUoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXJncyBpbnN0YW5jZW9mIChIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZSh0aGlzLmdldEVsZUluZGV4KGFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKHRoaXMuZWxlbWVudCwgQ0xTX0RJU0FCTEUsIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAnJyArIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChbJ3NlbGVjdGVkSXRlbScsICdhY3RFbGVJZCddKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFiLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd0YWInO1xuICAgICAgICB9O1xuICAgICAgICBUYWIucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnd2lkdGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgd2lkdGg6IGVqMl9iYXNlXzMuZm9ybWF0VW5pdChuZXdQcm9wLndpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgaGVpZ2h0OiBlajJfYmFzZV8zLmZvcm1hdFVuaXQobmV3UHJvcC5oZWlnaHQpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50SGVpZ2h0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjc3NDbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKHRoaXMuZWxlbWVudCwgbmV3UHJvcC5jc3NDbGFzcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaXRlbXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRJdGVtcyhuZXdQcm9wLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93Q2xvc2VCdXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDbG9zZUJ1dHRvbihuZXdQcm9wLnNob3dDbG9zZUJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0ZWRJdGVtJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KG5ld1Byb3Auc2VsZWN0ZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkZXJQbGFjZW1lbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBIZHJFbGUgPSBlajJfYmFzZV8yLnNlbGVjdCgnLicgKyBDTFNfSEVBREVSLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRPcmllbnRhdGlvbihuZXdQcm9wLmhlYWRlclBsYWNlbWVudCwgdGVtcEhkckVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UlRMKG5ld1Byb3AuZW5hYmxlUnRsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdvdmVyZmxvd01vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50Yk9iai5vdmVyZmxvd01vZGUgPSBuZXdQcm9wLm92ZXJmbG93TW9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEFjdEVsZVBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVpZ2h0QWRqdXN0TW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRlbnRIZWlnaHQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVGFiO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db2xsZWN0aW9uKFtdLCBUYWJJdGVtKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiaXRlbXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnMTAwJScpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwic2VsZWN0ZWRJdGVtXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ1RvcCcpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJoZWFkZXJQbGFjZW1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQ29udGVudCcpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJoZWlnaHRBZGp1c3RNb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ1Njcm9sbGFibGUnKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwib3ZlcmZsb3dNb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJlbmFibGVSdGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcInNob3dDbG9zZUJ1dHRvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoe30sIFRhYkFuaW1hdGlvblNldHRpbmdzKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiYW5pbWF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImFkZGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcImFkZGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwic2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRhYi5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJyZW1vdmluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUYWIucHJvdG90eXBlLCBcInJlbW92ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVGFiLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBUYWIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBUYWIpO1xuICAgIGV4cG9ydHMuVGFiID0gVGFiO1xuICAgIGV4cG9ydHMudGFiQnVpbGRlciA9IGVqMl9iYXNlXzEuQ3JlYXRlQnVpbGRlcihUYWIpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90YWIvdGFiLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3RyZWV2aWV3XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdHJlZXZpZXdfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQodHJlZXZpZXdfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3RyZWV2aWV3L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbGlzdHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9iYXNlXzYsIGVqMl9kYXRhXzEsIGVqMl9iYXNlXzcsIGVqMl9saXN0c18xLCBlajJfYnV0dG9uc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBST09UID0gJ2UtdHJlZXZpZXcnO1xuICAgIHZhciBDT0xMQVBTSUJMRSA9ICdlLWljb24tY29sbGFwc2libGUnO1xuICAgIHZhciBFWFBBTkRBQkxFID0gJ2UtaWNvbi1leHBhbmRhYmxlJztcbiAgICB2YXIgTElTVElURU0gPSAnZS1saXN0LWl0ZW0nO1xuICAgIHZhciBMSVNUVEVYVCA9ICdlLWxpc3QtdGV4dCc7XG4gICAgdmFyIFBBUkVOVElURU0gPSAnZS1saXN0LXBhcmVudCc7XG4gICAgdmFyIEhPVkVSID0gJ2UtaG92ZXInO1xuICAgIHZhciBBQ1RJVkUgPSAnZS1hY3RpdmUnO1xuICAgIHZhciBMT0FEID0gJ2UtbG9hZCc7XG4gICAgdmFyIFBST0NFU1MgPSAnZS1wcm9jZXNzJztcbiAgICB2YXIgSUNPTiA9ICdlLWljb25zJztcbiAgICB2YXIgVEVYVFdSQVAgPSAnZS10ZXh0LWNvbnRlbnQnO1xuICAgIHZhciBJTlBVVCA9ICdlLXRyZWUtaW5wdXQnO1xuICAgIHZhciBFRElUSU5HID0gJ2UtZWRpdGluZyc7XG4gICAgdmFyIFJUTCA9ICdlLXJ0bCc7XG4gICAgdmFyIERSQUdJVEVNID0gJ2UtZHJhZy1pdGVtJztcbiAgICB2YXIgRFJPUFBBQkxFID0gJ2UtZHJvcHBhYmxlJztcbiAgICB2YXIgRFJBR0dJTkcgPSAnZS1kcmFnZ2luZyc7XG4gICAgdmFyIFNJQkxJTkcgPSAnZS1zaWJsaW5nJztcbiAgICB2YXIgRFJPUElOID0gJ2UtZHJvcC1pbic7XG4gICAgdmFyIERST1BORVhUID0gJ2UtZHJvcC1uZXh0JztcbiAgICB2YXIgRFJPUE9VVCA9ICdlLWRyb3Atb3V0JztcbiAgICB2YXIgTk9EUk9QID0gJ2Utbm8tZHJvcCc7XG4gICAgdmFyIEZVTExST1dXUkFQID0gJ2UtZnVsbHJvdy13cmFwJztcbiAgICB2YXIgRlVMTFJPVyA9ICdlLWZ1bGxyb3cnO1xuICAgIHZhciBQT1BVUCA9ICdlLXBvcHVwJztcbiAgICB2YXIgU0VMRUNURUQgPSAnZS1zZWxlY3RlZCc7XG4gICAgdmFyIEVYUEFOREVEID0gJ2UtZXhwYW5kZWQnO1xuICAgIHZhciBOT0RFQ09MTEFQU0VEID0gJ2Utbm9kZS1jb2xsYXBzZWQnO1xuICAgIHZhciBESVNBQkxFID0gJ2UtZGlzYWJsZSc7XG4gICAgdmFyIFBPUFVQU0VMRUNUID0gJ2Utc2VsZWN0JztcbiAgICB2YXIgQ09OVEVOVCA9ICdlLWNvbnRlbnQnO1xuICAgIHZhciBET1dOVEFJTCA9ICdlLWRvd250YWlsJztcbiAgICB2YXIgRFJPUENPVU5UID0gJ2UtZHJvcC1jb3VudCc7XG4gICAgdmFyIENIRUNLID0gJ2UtY2hlY2snO1xuICAgIHZhciBJTkRFVEVSTUlOQVRFID0gJ2Utc3RvcCc7XG4gICAgdmFyIENIRUNLQk9YV1JBUCA9ICdlLWNoZWNrYm94LXdyYXBwZXInO1xuICAgIHZhciBDSEVDS0JPWEZSQU1FID0gJ2UtZnJhbWUnO1xuICAgIHZhciBGT0NVUyA9ICdlLW5vZGUtZm9jdXMnO1xuICAgIHZhciB0cmVlQXJpYUF0dHIgPSB7XG4gICAgICAgIHRyZWVSb2xlOiAndHJlZScsXG4gICAgICAgIGl0ZW1Sb2xlOiAndHJlZWl0ZW0nLFxuICAgICAgICBsaXN0Um9sZTogJ2dyb3VwJyxcbiAgICAgICAgaXRlbVRleHQ6ICcnLFxuICAgIH07XG4gICAgdmFyIEZpZWxkc1NldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZpZWxkc1NldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGaWVsZHNTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRmllbGRzU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnY2hpbGQnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJjaGlsZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KFtdKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJkYXRhU291cmNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2V4cGFuZGVkJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiZXhwYW5kZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnaGFzQ2hpbGRyZW4nKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJoYXNDaGlsZHJlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdodG1sQXR0cmlidXRlcycpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcImh0bWxBdHRyaWJ1dGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2ljb25Dc3MnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJpY29uQ3NzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2lkJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwiaWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnaW1hZ2VVcmwnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJpbWFnZVVybFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdpc0NoZWNrZWQnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJpc0NoZWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgncGFyZW50SUQnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJwYXJlbnRJRFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KG51bGwpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcInF1ZXJ5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ3NlbGVjdGVkJylcbiAgICBdLCBGaWVsZHNTZXR0aW5ncy5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJ0YWJsZU5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgndGV4dCcpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcInRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgndG9vbHRpcCcpXG4gICAgXSwgRmllbGRzU2V0dGluZ3MucHJvdG90eXBlLCBcInRvb2x0aXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnbmF2aWdhdGVVcmwnKVxuICAgIF0sIEZpZWxkc1NldHRpbmdzLnByb3RvdHlwZSwgXCJuYXZpZ2F0ZVVybFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuRmllbGRzU2V0dGluZ3MgPSBGaWVsZHNTZXR0aW5ncztcbiAgICB2YXIgQWN0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWN0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBY3Rpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzIuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdTbGlkZURvd24nKVxuICAgIF0sIEFjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJlZmZlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSg0MDApXG4gICAgXSwgQWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImR1cmF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoJ2xpbmVhcicpXG4gICAgXSwgQWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImVhc2luZ1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWN0aW9uU2V0dGluZ3MgPSBBY3Rpb25TZXR0aW5ncztcbiAgICB2YXIgTm9kZUFuaW1hdGlvblNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKE5vZGVBbmltYXRpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gTm9kZUFuaW1hdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOb2RlQW5pbWF0aW9uU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Db21wbGV4KHsgZWZmZWN0OiAnU2xpZGVVcCcsIGR1cmF0aW9uOiA0MDAsIGVhc2luZzogJ2xpbmVhcicgfSwgQWN0aW9uU2V0dGluZ3MpXG4gICAgXSwgTm9kZUFuaW1hdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2xsYXBzZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkNvbXBsZXgoeyBlZmZlY3Q6ICdTbGlkZURvd24nLCBkdXJhdGlvbjogNDAwLCBlYXNpbmc6ICdsaW5lYXInIH0sIEFjdGlvblNldHRpbmdzKVxuICAgIF0sIE5vZGVBbmltYXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZXhwYW5kXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Ob2RlQW5pbWF0aW9uU2V0dGluZ3MgPSBOb2RlQW5pbWF0aW9uU2V0dGluZ3M7XG4gICAgdmFyIFRyZWVWaWV3ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRyZWVWaWV3LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBUcmVlVmlldyhvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuY2hlY2tBY3Rpb25Ob2RlcyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuZHJhZ1N0YXJ0QWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5rZXlDb25maWdzID0ge1xuICAgICAgICAgICAgICAgIGVzY2FwZTogJ2VzY2FwZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgICAgICBlbnRlcjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBmMjogJ2YyJyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgbW92ZURvd246ICdkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVMZWZ0OiAnbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlUmlnaHQ6ICdyaWdodGFycm93JyxcbiAgICAgICAgICAgICAgICBtb3ZlVXA6ICd1cGFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsRG93bjogJ2N0cmwrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsVXA6ICdjdHJsK3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxFbnRlcjogJ2N0cmwrZW50ZXInLFxuICAgICAgICAgICAgICAgIGN0cmxIb21lOiAnY3RybCtob21lJyxcbiAgICAgICAgICAgICAgICBjdHJsRW5kOiAnY3RybCtlbmQnLFxuICAgICAgICAgICAgICAgIGN0cmxBOiAnY3RybCtBJyxcbiAgICAgICAgICAgICAgICBzaGlmdERvd246ICdzaGlmdCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0VXA6ICdzaGlmdCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdEVudGVyOiAnc2hpZnQrZW50ZXInLFxuICAgICAgICAgICAgICAgIHNoaWZ0SG9tZTogJ3NoaWZ0K2hvbWUnLFxuICAgICAgICAgICAgICAgIHNoaWZ0RW5kOiAnc2hpZnQrZW5kJyxcbiAgICAgICAgICAgICAgICBjc0Rvd246ICdjdHJsK3NoaWZ0K2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgY3NVcDogJ2N0cmwrc2hpZnQrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgY3NFbnRlcjogJ2N0cmwrc2hpZnQrZW50ZXInLFxuICAgICAgICAgICAgICAgIGNzSG9tZTogJ2N0cmwrc2hpZnQraG9tZScsXG4gICAgICAgICAgICAgICAgY3NFbmQ6ICdjdHJsK3NoaWZ0K2VuZCcsXG4gICAgICAgICAgICAgICAgc3BhY2U6ICdzcGFjZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMubW91c2VEb3duU3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RyZWV2aWV3JztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmxpc3RCYXNlT3B0aW9uID0ge1xuICAgICAgICAgICAgICAgIGV4cGFuZENvbGxhcHNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpZWxkczogdGhpcy5maWVsZHMucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBzaG93SWNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleHBhbmRJY29uQ2xhc3M6IEVYUEFOREFCTEUsXG4gICAgICAgICAgICAgICAgYXJpYUF0dHJpYnV0ZXM6IHRyZWVBcmlhQXR0cixcbiAgICAgICAgICAgICAgICBleHBhbmRJY29uUG9zaXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgICAgICBpdGVtQ3JlYXRlZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYmVmb3JlTm9kZUNyZWF0ZShlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzLnVybCA9IHRoaXMuZmllbGRzLm5hdmlnYXRlVXJsO1xuICAgICAgICAgICAgdGhpcy5hbmlPYmogPSBuZXcgZWoyX2Jhc2VfNC5BbmltYXRpb24oe30pO1xuICAgICAgICAgICAgdGhpcy50cmVlTGlzdCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZWxlY3RlZE5vZGVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHNlbGVjdGVkTm9kZXM6IFtdIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jaGVja2VkTm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgY2hlY2tlZE5vZGVzOiBbXSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsnc2VsZWN0ZWROb2RlcycsICdjaGVja2VkTm9kZXMnXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChrZXlFbnRpdHkpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB0aGlzLnNldERhdGFCaW5kaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnNldEV4cGFuZE9uVHlwZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRSaXBwbGUoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUVkaXRpbmdFdmVudHModGhpcy5hbGxvd0VkaXRpbmcpO1xuICAgICAgICAgICAgdGhpcy5zZXREcmFnQW5kRHJvcCh0aGlzLmFsbG93RHJhZ0FuZERyb3ApO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgncm9sZScsIHRyZWVBcmlhQXR0ci50cmVlUm9sZSk7XG4gICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKG51bGwsIHRoaXMuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5zZXRFbmFibGVSdGwoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0RnVsbFJvdyh0aGlzLmZ1bGxSb3dTZWxlY3QpO1xuICAgICAgICAgICAgdGhpcy5zZXRUb3VjaFBvcHVwKHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnNldE11bHRpU2VsZWN0KHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLm5vZGVUZW1wbGF0ZUZuID0gdGhpcy50ZW1wbGF0ZUNvbXBsaWVyKHRoaXMubm9kZVRlbXBsYXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldEVuYWJsZVJ0bCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlUnRsID8gZWoyX2Jhc2VfNi5hZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgUlRMKSA6IGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIFJUTCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRSaXBwbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGVtcFN0ciA9ICcuJyArIEZVTExST1cgKyAnLC4nICsgVEVYVFdSQVA7XG4gICAgICAgICAgICB2YXIgcmlwcGxlTW9kZWwgPSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IHRlbXBTdHIsXG4gICAgICAgICAgICAgICAgaWdub3JlOiAnLicgKyBURVhUV1JBUCArICcgPiAuJyArIElDT04gKyAnLC4nICsgSU5QVVQgKyAnLCAuJyArIENIRUNLQk9YV1JBUFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmlwcGxlRm4gPSBlajJfYmFzZV80LnJpcHBsZUVmZmVjdCh0aGlzLmVsZW1lbnQsIHJpcHBsZU1vZGVsKTtcbiAgICAgICAgICAgIHZhciBpY29uTW9kZWwgPSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICcuJyArIFRFWFRXUkFQICsgJyA+IC4nICsgSUNPTixcbiAgICAgICAgICAgICAgICBpc0NlbnRlclJpcHBsZTogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnJpcHBsZUljb25GbiA9IGVqMl9iYXNlXzQucmlwcGxlRWZmZWN0KHRoaXMuZWxlbWVudCwgaWNvbk1vZGVsKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldEZ1bGxSb3cgPSBmdW5jdGlvbiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICBpc0VuYWJsZWQgPyBlajJfYmFzZV82LmFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBGVUxMUk9XV1JBUCkgOiBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBGVUxMUk9XV1JBUCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRUb3VjaFBvcHVwID0gZnVuY3Rpb24gKGlzRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKGlzRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IGVqMl9iYXNlXzYuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IFBPUFVQLCBzdHlsZXM6ICdkaXNwbGF5Om5vbmU7JyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IGVqMl9iYXNlXzYuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENPTlRFTlQsIGF0dHJzOiB7IHRhYkluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogSUNPTiB9KTtcbiAgICAgICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGljb24pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYXBwZW5kKFtjb250ZW50LCBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBET1dOVEFJTCB9KV0sIHBvcHVwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQocG9wdXApO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZChjb250ZW50LCAnY2xpY2snLCB0aGlzLnBvcHVwQ2xpY2ssIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUE9QVVAsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHBvcHVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKHBvcHVwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRNdWx0aVNlbGVjdCA9IGZ1bmN0aW9uIChpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW11bHRpc2VsZWN0YWJsZScsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLW11bHRpc2VsZWN0YWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucG9wdXBDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcbiAgICAgICAgICAgIHRhcmdldCA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIFBPUFVQKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFBPUFVQU0VMRUNUKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW3RhcmdldF0sIFBPUFVQU0VMRUNUKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQT1BVUCwgdGhpcy5lbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbdGFyZ2V0XSwgUE9QVVBTRUxFQ1QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudGVtcGxhdGVDb21wbGllciA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGVtcGxhdGUpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY29tcGlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMS5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0RGF0YUJpbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy50cmVlTGlzdC5wdXNoKCdmYWxzZScpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGRzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZHMuZGF0YVNvdXJjZS5leGVjdXRlUXVlcnkodGhpcy5nZXRRdWVyeSh0aGlzLmZpZWxkcykpLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJlZUxpc3QucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyZWVEYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlzTnVtYmVyVHlwZUlkID0gX3RoaXMudHJlZURhdGFbMF0gPyAoKHR5cGVvZiBfdGhpcy50cmVlRGF0YVswXVtfdGhpcy5maWVsZHMuaWRdID09PSAnbnVtYmVyJykgPyB0cnVlIDogZmFsc2UpIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFJvb3REYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlckl0ZW1zKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMudHJlZUxpc3QubGVuZ3RoID09PSAwICYmICFfdGhpcy5pc0xvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmluYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmVlTGlzdC5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZpZWxkcy5kYXRhU291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3REYXRhID0gdGhpcy50cmVlRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YSA9IHRoaXMuZmllbGRzLmRhdGFTb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Um9vdERhdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJJdGVtcyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50cmVlTGlzdC5sZW5ndGggPT09IDAgJiYgIXRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRRdWVyeSA9IGZ1bmN0aW9uIChtYXBwZXIsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9IG51bGw7IH1cbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gW107XG4gICAgICAgICAgICB2YXIgcXVlcnk7XG4gICAgICAgICAgICBpZiAoIW1hcHBlci5xdWVyeSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZ2V0QWN0dWFsUHJvcGVydGllcyhtYXBwZXIpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhwcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbCAhPT0gJ2RhdGFTb3VyY2UnICYmIGNvbCAhPT0gJ3RhYmxlTmFtZScgJiYgY29sICE9PSAnY2hpbGQnICYmICEhbWFwcGVyW2NvbF1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGNvbHVtbnMuaW5kZXhPZihtYXBwZXJbY29sXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2gobWFwcGVyW2NvbF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXJ5LnNlbGVjdChjb2x1bW5zKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcC5oYXNPd25Qcm9wZXJ0eSgndGFibGVOYW1lJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuZnJvbShtYXBwZXIudGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IG1hcHBlci5xdWVyeS5jbG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2xpc3RzXzEuTGlzdEJhc2UuYWRkU29ydGluZyh0aGlzLnNvcnRPcmRlciwgbWFwcGVyLnRleHQsIHF1ZXJ5KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobWFwcGVyLnBhcmVudElEKSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKG1hcHBlci5wYXJlbnRJRCwgJ2VxdWFsJywgKHRoaXMuaXNOdW1iZXJUeXBlSWQgPyBwYXJzZUZsb2F0KHZhbHVlKSA6IHZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRSb290RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVR5cGUgPSB0aGlzLmdldERhdGFUeXBlKHRoaXMudHJlZURhdGEsIHRoaXMuZmllbGRzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cGVkRGF0YSA9IHRoaXMuZ2V0R3JvdXBlZERhdGEodGhpcy50cmVlRGF0YSwgdGhpcy5maWVsZHMucGFyZW50SUQpO1xuICAgICAgICAgICAgICAgIHZhciByb290SXRlbXMgPSB0aGlzLmdldENoaWxkTm9kZXModGhpcy50cmVlRGF0YSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChyb290SXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdERhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdERhdGEgPSByb290SXRlbXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb290RGF0YSA9IHRoaXMudHJlZURhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW5kZXJJdGVtcyA9IGZ1bmN0aW9uIChpc1NvcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5hcmlhQXR0cmlidXRlcy5sZXZlbCA9IDE7XG4gICAgICAgICAgICB0aGlzLnVsRWxlbWVudCA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmNyZWF0ZUxpc3QoaXNTb3J0ZWQgPyB0aGlzLnJvb3REYXRhIDogdGhpcy5nZXRTb3J0ZWREYXRhKHRoaXMucm9vdERhdGEpLCB0aGlzLmxpc3RCYXNlT3B0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnVsRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmZpbmFsaXplTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYmVmb3JlTm9kZUNyZWF0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3hFbGUgPSBlajJfYnV0dG9uc18xLmNyZWF0ZUNoZWNrQm94KCk7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBlLml0ZW0pO1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGUuaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJyk7XG4gICAgICAgICAgICAgICAgZS5pdGVtLmNoaWxkTm9kZXNbMF0uaW5zZXJ0QmVmb3JlKGNoZWNrYm94RWxlLCBlLml0ZW0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2VqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoaWNvbikgPyAwIDogMV0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWROb2Rlcy5pbmRleE9mKGlkKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIENIRUNLQk9YRlJBTUUsIGNoZWNrYm94RWxlKS5jbGFzc0xpc3QuYWRkKENIRUNLKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3hFbGUuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENoZWNrKGUuaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGUuY3VyRGF0YVtlLmZpZWxkcy5pc0NoZWNrZWRdKSAmJiBlLmN1ckRhdGFbZS5maWVsZHMuaXNDaGVja2VkXS50b1N0cmluZygpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgQ0hFQ0tCT1hGUkFNRSwgY2hlY2tib3hFbGUpLmNsYXNzTGlzdC5hZGQoQ0hFQ0spO1xuICAgICAgICAgICAgICAgICAgICBjaGVja2JveEVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2hlY2soZS5pdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94RWxlLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZnVsbFJvd1NlbGVjdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnVsbFJvdyhlLml0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbiAmJiAhZS5pdGVtLmNsYXNzTGlzdC5jb250YWlucyhTRUxFQ1RFRCkpIHtcbiAgICAgICAgICAgICAgICBlLml0ZW0uc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmllbGRzID0gZS5maWVsZHM7XG4gICAgICAgICAgICB0aGlzLmFkZEFjdGlvbkNsYXNzKGUsIGZpZWxkcy5zZWxlY3RlZCwgU0VMRUNURUQpO1xuICAgICAgICAgICAgdGhpcy5hZGRBY3Rpb25DbGFzcyhlLCBmaWVsZHMuZXhwYW5kZWQsIEVYUEFOREVEKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh0aGlzLm5vZGVUZW1wbGF0ZUZuKSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0RWxlID0gZS5pdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgTElTVFRFWFQpO1xuICAgICAgICAgICAgICAgIHRleHRFbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hcHBlbmQodGhpcy5ub2RlVGVtcGxhdGVGbihlLmN1ckRhdGEpLCB0ZXh0RWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgbm9kZTogZS5pdGVtLFxuICAgICAgICAgICAgICAgIG5vZGVEYXRhOiBlLmN1ckRhdGEsXG4gICAgICAgICAgICAgICAgdGV4dDogZS50ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZHJhd05vZGUnLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkQWN0aW9uQ2xhc3MgPSBmdW5jdGlvbiAoZSwgYWN0aW9uLCBjc3NDbGFzcykge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBlLmN1ckRhdGE7XG4gICAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShhY3Rpb24pICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGRhdGFbYWN0aW9uXSkgJiYgZGF0YVthY3Rpb25dLnRvU3RyaW5nKCkgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgICBlLml0ZW0uY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXREYXRhVHlwZSA9IGZ1bmN0aW9uIChkcywgbWFwcGVyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiBtYXBwZXIuY2hpbGQgPT09ICdzdHJpbmcnKSAmJiBkc1tpXS5oYXNPd25Qcm9wZXJ0eShtYXBwZXIuY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZHNbaV0uaGFzT3duUHJvcGVydHkobWFwcGVyLnBhcmVudElEKSB8fCBkc1tpXS5oYXNPd25Qcm9wZXJ0eShtYXBwZXIuaGFzQ2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0R3JvdXBlZERhdGEgPSBmdW5jdGlvbiAoZGF0YVNvdXJjZSwgZ3JvdXBCeSkge1xuICAgICAgICAgICAgdmFyIGN1c1F1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKS5ncm91cChncm91cEJ5KTtcbiAgICAgICAgICAgIHZhciBkcyA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmdldERhdGFTb3VyY2UoZGF0YVNvdXJjZSwgY3VzUXVlcnkpO1xuICAgICAgICAgICAgdmFyIGdycEl0ZW0gPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbU9iaiA9IGRzW2pdLml0ZW1zO1xuICAgICAgICAgICAgICAgIGdycEl0ZW0ucHVzaChpdGVtT2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncnBJdGVtO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0U29ydGVkRGF0YSA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgICAgICBpZiAobGlzdCAmJiB0aGlzLnNvcnRPcmRlciAhPT0gJ05vbmUnKSB7XG4gICAgICAgICAgICAgICAgbGlzdCA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmdldERhdGFTb3VyY2UobGlzdCwgZWoyX2xpc3RzXzEuTGlzdEJhc2UuYWRkU29ydGluZyh0aGlzLnNvcnRPcmRlciwgdGhpcy5maWVsZHMudGV4dCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5maW5hbGl6ZU5vZGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNOb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIFNFTEVDVEVELCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoc05vZGVzW2ldLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3Moc05vZGVzLCBTRUxFQ1RFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY05vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgTElTVElURU0gKyAnOm5vdCguJyArIEVYUEFOREVEICsgJyknLCBlbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY05vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBjTm9kZXNbal0pO1xuICAgICAgICAgICAgICAgIGlmIChpY29uICYmIGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKEVYUEFOREFCTEUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNOb2Rlc1tqXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbY05vZGVzW2pdXSwgTk9ERUNPTExBUFNFRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVOb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIEVYUEFOREVELCBlbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZU5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGlsZE5vZGVzKGVOb2Rlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKGVOb2RlcywgRVhQQU5ERUQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZXNfMSA9IFtdLmNvbmNhdChbXSwgdGhpcy5jaGVja2VkTm9kZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5vZGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tCb3ggPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD1cIicgKyB2YWx1ZSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY2hlY2tCb3gpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc18xID0gbm9kZXNfMS5maWx0ZXIoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUgIT09IHZhbHVlOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IGNoZWNrZWROb2Rlczogbm9kZXNfMSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmVuc3VyZVBhcmVudENoZWNrU3RhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFJPT1QpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHVsRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKExJU1RJVEVNKSkge1xuICAgICAgICAgICAgICAgICAgICB1bEVsZW1lbnQgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWROb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIENIRUNLLCB1bEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIExJU1RJVEVNLCB1bEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHZhciBjaGVja0JveEVsZSA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDSEVDS0JPWFdSQVApWzBdO1xuICAgICAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IGNoZWNrZWROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShjaGVja0JveEVsZSwgJ2NoZWNrJywgbnVsbCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrZWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoY2hlY2tCb3hFbGUsICdpbmRldGVybWluYXRlJywgbnVsbCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrZWROb2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShjaGVja0JveEVsZSwgJ3VuY2hlY2snLCBudWxsLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFVMID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGVsZW1lbnQsICcuJyArIFBBUkVOVElURU0pO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChwYXJlbnRVTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQYXJlbnQgPSBlajJfYmFzZV82LmNsb3Nlc3QocGFyZW50VUwsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVQYXJlbnRDaGVja1N0YXRlKGN1cnJlbnRQYXJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmVuc3VyZUNoaWxkQ2hlY2tTdGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRFbGVtZW50ID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrQm94ZXMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGNoaWxkRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIENIRUNLQk9YV1JBUCwgY2hpbGRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQ2hlY2tlZCA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDSEVDS0JPWEZSQU1FKVswXS5jbGFzc0xpc3QuY29udGFpbnMoQ0hFQ0spO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZFN0YXRlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY2hlY2tCb3hlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZCh0aGlzLmN1cnJlbnRMb2FkRGF0YSkgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jdXJyZW50TG9hZERhdGFbaW5kZXhdW3RoaXMuZmllbGRzLmlzQ2hlY2tlZF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZFN0YXRlID0gdGhpcy5jdXJyZW50TG9hZERhdGFbaW5kZXhdW3RoaXMuZmllbGRzLmlzQ2hlY2tlZF0gPyAnY2hlY2snIDogJ3VuY2hlY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZFN0YXRlID0gaXNDaGVja2VkID8gJ2NoZWNrJyA6ICd1bmNoZWNrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoY2hlY2tCb3hlc1tpbmRleF0sIGNoZWNrZWRTdGF0ZSwgZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kb0NoZWNrQm94QWN0aW9uID0gZnVuY3Rpb24gKG5vZGVzLCBkb0NoZWNrKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IHRoaXMuZ2V0RWxlbWVudChub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrQm94ID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUEFSRU5USVRFTSArICcgLicgKyBDSEVDS0JPWFdSQVAsIGxpRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUNoZWNrTm9kZShjaGVja0JveCwgIWRvQ2hlY2ssIGxpRWxlLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tCb3hlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIENIRUNLQk9YV1JBUCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY2hlY2tCb3hlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShjaGVja0JveGVzW2luZGV4XSwgZG9DaGVjayA/ICdjaGVjaycgOiAndW5jaGVjaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNoYW5nZVN0YXRlID0gZnVuY3Rpb24gKHdyYXBwZXIsIHN0YXRlLCBlLCBpc1ByZXZlbnQsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgYXJpYVN0YXRlO1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncztcbiAgICAgICAgICAgIHZhciBjdXJyTGkgPSBlajJfYmFzZV82LmNsb3Nlc3Qod3JhcHBlciwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgaWYgKCFpc1ByZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQWN0aW9uTm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBldmVudEFyZ3MgPSB0aGlzLmdldENoZWNrRXZlbnQoY3VyckxpLCBzdGF0ZSwgZSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlQ2hlY2tpbmcnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJhbWVTcGFuID0gd3JhcHBlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENIRUNLQk9YRlJBTUUpWzBdO1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSAnY2hlY2snICYmICFmcmFtZVNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKENIRUNLKSkge1xuICAgICAgICAgICAgICAgIGZyYW1lU3Bhbi5jbGFzc0xpc3QucmVtb3ZlKElOREVURVJNSU5BVEUpO1xuICAgICAgICAgICAgICAgIGZyYW1lU3Bhbi5jbGFzc0xpc3QuYWRkKENIRUNLKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENoZWNrKGN1cnJMaSk7XG4gICAgICAgICAgICAgICAgYXJpYVN0YXRlID0gJ3RydWUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICd1bmNoZWNrJyAmJiAoZnJhbWVTcGFuLmNsYXNzTGlzdC5jb250YWlucyhDSEVDSykgfHwgZnJhbWVTcGFuLmNsYXNzTGlzdC5jb250YWlucyhJTkRFVEVSTUlOQVRFKSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtmcmFtZVNwYW5dLCBbQ0hFQ0ssIElOREVURVJNSU5BVEVdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNoZWNrKGN1cnJMaSk7XG4gICAgICAgICAgICAgICAgYXJpYVN0YXRlID0gJ2ZhbHNlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAnaW5kZXRlcm1pbmF0ZScgJiYgIWZyYW1lU3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoSU5ERVRFUk1JTkFURSkpIHtcbiAgICAgICAgICAgICAgICBmcmFtZVNwYW4uY2xhc3NMaXN0LnJlbW92ZShDSEVDSyk7XG4gICAgICAgICAgICAgICAgZnJhbWVTcGFuLmNsYXNzTGlzdC5hZGQoSU5ERVRFUk1JTkFURSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGVjayhjdXJyTGkpO1xuICAgICAgICAgICAgICAgIGFyaWFTdGF0ZSA9ICdtaXhlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmlhU3RhdGUgPSBzdGF0ZSA9PT0gJ2NoZWNrJyA/ICd0cnVlJyA6IHN0YXRlID09PSAndW5jaGVjaycgPyAnZmFsc2UnIDogYXJpYVN0YXRlO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGFyaWFTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgYXJpYVN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0FkZCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW10uY29uY2F0KFtdLCB0aGlzLmNoZWNrQWN0aW9uTm9kZXMpO1xuICAgICAgICAgICAgICAgIGV2ZW50QXJncyA9IHRoaXMuZ2V0Q2hlY2tFdmVudChjdXJyTGksIHN0YXRlLCBlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc1VuZGVmaW5lZChpc1ByZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50QXJncy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUHJldmVudCkge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChhcmlhU3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCBhcmlhU3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBldmVudEFyZ3MuZGF0YVswXS5jaGVja2VkID0gYXJpYVN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDaGVja2VkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja0FjdGlvbk5vZGVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkQ2hlY2sgPSBmdW5jdGlvbiAobGlFbGUpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGxpRWxlLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChpZCkgJiYgdGhpcy5jaGVja2VkTm9kZXMuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTm9kZXMucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVDaGVjayA9IGZ1bmN0aW9uIChsaUVsZSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jaGVja2VkTm9kZXMuaW5kZXhPZihsaUVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWROb2Rlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Q2hlY2tFdmVudCA9IGZ1bmN0aW9uIChjdXJyTGksIGFjdGlvbiwgZSkge1xuICAgICAgICAgICAgdGhpcy5jaGVja0FjdGlvbk5vZGVzLnB1c2godGhpcy5nZXROb2RlRGF0YShjdXJyTGkpKTtcbiAgICAgICAgICAgIHZhciBub2RlRGF0YSA9IHRoaXMuY2hlY2tBY3Rpb25Ob2RlcztcbiAgICAgICAgICAgIHJldHVybiB7IGFjdGlvbjogYWN0aW9uLCBjYW5jZWw6IGZhbHNlLCBpc0ludGVyYWN0ZWQ6IGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZSkgPyBmYWxzZSA6IHRydWUsIG5vZGU6IGN1cnJMaSwgZGF0YTogbm9kZURhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmZpbmFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpcnN0Tm9kZSA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIExJU1RJVEVNLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKGZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ZpcnN0Tm9kZV0sIEZPQ1VTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZG9TZWxlY3Rpb25BY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHsgZGF0YTogdGhpcy50cmVlRGF0YSB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhQm91bmQnLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZG9TZWxlY3Rpb25BY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc05vZGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgU0VMRUNURUQsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgc1VpZHMgPSB0aGlzLnNlbGVjdGVkTm9kZXM7XG4gICAgICAgICAgICBpZiAoc1VpZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHNlbGVjdGVkTm9kZXM6IFtdIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc1VpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNOb2RlID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ1tkYXRhLXVpZD1cIicgKyBzVWlkc1tpXSArICdcIl0nLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoc05vZGUsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEdpdmVuTm9kZXMoc05vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3Moc05vZGVzLCBTRUxFQ1RFRCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZWxlY3RHaXZlbk5vZGVzID0gZnVuY3Rpb24gKHNOb2Rlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoc05vZGVzW2ldLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NvbnRleHRtZW51ICcsIHRoaXMucHJldmVudENvbnRleHRNZW51KTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8IHRoaXMuZHJhZ1N0YXJ0QWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICAgICAgdmFyIGxpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgICAgIGlmICghbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVIb3ZlcigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzRWxlbWVudChsaSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrV3JhcHBlciA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIENIRUNLQk9YV1JBUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY2hlY2tXcmFwcGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja0VsZW1lbnQgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBDSEVDS0JPWEZSQU1FLCBjaGVja1dyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVDaGVja05vZGUoY2hlY2tXcmFwcGVyLCBjaGVja0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENIRUNLKSwgbGksIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlckNsaWNrRXZlbnQoZSwgbGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKEVYUEFOREFCTEUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFjdGlvbihsaSwgdGFyZ2V0LCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjbGFzc0xpc3QuY29udGFpbnMoQ09MTEFQU0lCTEUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlTm9kZShsaSwgdGFyZ2V0LCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2xhc3NMaXN0LmNvbnRhaW5zKFBBUkVOVElURU0pICYmICFjbGFzc0xpc3QuY29udGFpbnMoTElTVElURU0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG11bHRpU2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSAmJiB0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgUE9QVVAsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNi5pc1Zpc2libGUocG9wdXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dFdyYXAgPSBlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBURVhUV1JBUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4dFdyYXAgPSAhdHh0V3JhcCA/IGUudGFyZ2V0IDogdHh0V3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IHR4dFdyYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3NMZWZ0ID0gKGUuY2xpZW50WCAtIHBvcy5sZWZ0KSArIHR4dFdyYXAub2Zmc2V0TGVmdCAtIChwb3B1cC5vZmZzZXRXaWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zVG9wID0gdHh0V3JhcC5vZmZzZXRUb3AgLSBwb3B1cC5vZmZzZXRIZWlnaHQgLSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuc3R5bGUubGVmdCA9IChwb3NMZWZ0IDwgMCA/IDAgOiBwb3NMZWZ0KSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLnRvcCA9IChwb3NUb3AgPCAwID8gMCA6IHBvc1RvcCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKFBPUFVQU0VMRUNUKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlTZWxlY3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0KGxpLCBlLCBtdWx0aVNlbGVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ2xpY2tFdmVudChlLCBsaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUubm9kZUNoZWNraW5nRXZlbnQgPSBmdW5jdGlvbiAod3JhcHBlciwgaXNDaGVjaywgZSkge1xuICAgICAgICAgICAgdmFyIGN1cnJMaSA9IGVqMl9iYXNlXzYuY2xvc2VzdCh3cmFwcGVyLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQWN0aW9uTm9kZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBhcmlhU3RhdGUgPSAhaXNDaGVjayA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoYXJpYVN0YXRlKSkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCBhcmlhU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHRoaXMuZ2V0Q2hlY2tFdmVudChjdXJyTGksICFpc0NoZWNrID8gJ3VuY2hlY2snIDogJ2NoZWNrJywgZSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDaGVja2luZycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICByZXR1cm4gZXZlbnRBcmdzO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUubm9kZUNoZWNrZWRFdmVudCA9IGZ1bmN0aW9uICh3cmFwcGVyLCBpc0NoZWNrLCBlKSB7XG4gICAgICAgICAgICB2YXIgY3VyckxpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KHdyYXBwZXIsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB0aGlzLmdldENoZWNrRXZlbnQod3JhcHBlciwgaXNDaGVjayA/ICd1bmNoZWNrJyA6ICdjaGVjaycsIGUpO1xuICAgICAgICAgICAgZXZlbnRBcmdzLmRhdGEgPSBldmVudEFyZ3MuZGF0YS5zcGxpY2UoMCwgZXZlbnRBcmdzLmRhdGEubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDaGVja2VkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnRyaWdnZXJDbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUsIGxpKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0ge1xuICAgICAgICAgICAgICAgIGV2ZW50OiBlLFxuICAgICAgICAgICAgICAgIG5vZGU6IGxpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUNsaWNrZWQnLCBldmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kTm9kZSA9IGZ1bmN0aW9uIChjdXJyTGksIGljb24pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtpY29uXSwgTE9BRCk7XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtpY29uXSwgRVhQQU5EQUJMRSk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgQ09MTEFQU0lCTEUpO1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgIHZhciBlbmQgPSAwO1xuICAgICAgICAgICAgdmFyIHByb3h5ID0gdGhpcztcbiAgICAgICAgICAgIHZhciB1bCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGN1cnJMaSk7XG4gICAgICAgICAgICB2YXIgbGlFbGUgPSBjdXJyTGk7XG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodChsaUVsZSwgdWwpO1xuICAgICAgICAgICAgdGhpcy5hbmlPYmouYW5pbWF0ZSh1bCwge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuYW5pbWF0aW9uLmV4cGFuZC5lZmZlY3QsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLmV4cGFuZC5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICB0aW1pbmdGdW5jdGlvbjogdGhpcy5hbmltYXRpb24uZXhwYW5kLmVhc2luZyxcbiAgICAgICAgICAgICAgICBiZWdpbjogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlFbGUuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBsaUVsZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFRFWFRXUkFQLCBjdXJyTGkpLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIHByb3h5LmFuaW1hdGVIZWlnaHQoYXJncywgc3RhcnQsIGVuZCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgbGlFbGUuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgbGlFbGUuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2ljb25dLCBQUk9DRVNTKTtcbiAgICAgICAgICAgICAgICAgICAgY3VyckxpLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2N1cnJMaV0sIE5PREVDT0xMQVBTRUQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNMb2FkZWQgJiYgX3RoaXMuZXhwYW5kQXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignbm9kZUV4cGFuZGVkJywgX3RoaXMuZXhwYW5kQXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNvbGxhcHNlTm9kZSA9IGZ1bmN0aW9uIChjdXJyTGksIGljb24sIGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoUFJPQ0VTUykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgUFJPQ0VTUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sQXJncztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgY29sQXJncyA9IHRoaXMuZ2V0RXhwYW5kRXZlbnQoY3VyckxpLCBlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVDb2xsYXBzaW5nJywgY29sQXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtpY29uXSwgQ09MTEFQU0lCTEUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIEVYUEFOREFCTEUpO1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgIHZhciBlbmQgPSAwO1xuICAgICAgICAgICAgdmFyIHByb3h5ID0gdGhpcztcbiAgICAgICAgICAgIHZhciB1bCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGN1cnJMaSk7XG4gICAgICAgICAgICB2YXIgbGlFbGUgPSBjdXJyTGk7XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtjdXJyTGldLCBOT0RFQ09MTEFQU0VEKTtcbiAgICAgICAgICAgIHRoaXMuYW5pT2JqLmFuaW1hdGUodWwsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5lZmZlY3QsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYW5pbWF0aW9uLmNvbGxhcHNlLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5jb2xsYXBzZS5lYXNpbmcsXG4gICAgICAgICAgICAgICAgYmVnaW46IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpRWxlLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgVEVYVFdSQVAsIGN1cnJMaSkub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBlbmQgPSBsaUVsZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJveHkuYW5pbWF0ZUhlaWdodChhcmdzLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuZDogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlFbGUuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGxpRWxlLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtpY29uXSwgUFJPQ0VTUyk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJMaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdub2RlQ29sbGFwc2VkJywgY29sQXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldEhlaWdodCA9IGZ1bmN0aW9uIChjdXJyTGksIHVsKSB7XG4gICAgICAgICAgICB1bC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHVsLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIGN1cnJMaS5zdHlsZS5oZWlnaHQgPSBjdXJyTGkub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIHVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB1bC5zdHlsZS52aXNpYmlsaXR5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hbmltYXRlSGVpZ2h0ID0gZnVuY3Rpb24gKGFyZ3MsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSAoYXJncy5kdXJhdGlvbiAtIGFyZ3MudGltZVN0YW1wKSAvIGFyZ3MuZHVyYXRpb247XG4gICAgICAgICAgICB2YXIgY3VycmVudEhlaWdodCA9IChlbmQgLSBzdGFydCkgKiByZW1haW5pbmcgKyBzdGFydDtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9IGN1cnJlbnRIZWlnaHQgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVuZGVyQ2hpbGROb2RlcyA9IGZ1bmN0aW9uIChwYXJlbnRMaSwgZXhwYW5kQ2hpbGQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBwYXJlbnRMaSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlaWNvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtlaWNvbl0sIExPQUQpO1xuICAgICAgICAgICAgdmFyIGNoaWxkSXRlbXM7XG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZHMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSB0aGlzLnBhcmVudHMocGFyZW50TGksICcuJyArIFBBUkVOVElURU0pLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgbWFwcGVyXzEgPSB0aGlzLmdldENoaWxkRmllbGRzKHRoaXMuZmllbGRzLCBsZXZlbCwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobWFwcGVyXzEpIHx8IGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobWFwcGVyXzEuZGF0YVNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goZWljb24pO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVMaXN0LnB1c2goJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgbWFwcGVyXzEuZGF0YVNvdXJjZS5leGVjdXRlUXVlcnkodGhpcy5nZXRRdWVyeShtYXBwZXJfMSwgcGFyZW50TGkuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKSkudGhlbihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmVlTGlzdC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRJdGVtcyA9IGUucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdXJyZW50TG9hZERhdGEgPSBjaGlsZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChjaGlsZEl0ZW1zKSB8fCBjaGlsZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goZWljb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF90aGlzLmdldEFjdHVhbFByb3BlcnRpZXMobWFwcGVyXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzID0gcHJvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxpc3RCYXNlT3B0aW9uLmZpZWxkcy51cmwgPSBwcm9wLm5hdmlnYXRlVXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGlzdEJhc2VPcHRpb24uYXJpYUF0dHJpYnV0ZXMubGV2ZWwgPSBwYXJzZUZsb2F0KHBhcmVudExpLmdldEF0dHJpYnV0ZSgnYXJpYS1sZXZlbCcpKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaS5hcHBlbmRDaGlsZChlajJfbGlzdHNfMS5MaXN0QmFzZS5jcmVhdGVMaXN0KGNoaWxkSXRlbXMsIF90aGlzLmxpc3RCYXNlT3B0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmROb2RlKHBhcmVudExpLCBlaWNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbnN1cmVDaGVja05vZGUocGFyZW50TGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmluYWxpemVOb2RlKHBhcmVudExpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlclN1YkNoaWxkKHBhcmVudExpLCBleHBhbmRDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnRyZWVMaXN0Lmxlbmd0aCA9PT0gMCAmJiAhX3RoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZpbmFsaXplKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoaWxkSXRlbXMgPSB0aGlzLmdldENoaWxkTm9kZXModGhpcy50cmVlRGF0YSwgcGFyZW50TGkuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2FkRGF0YSA9IGNoaWxkSXRlbXM7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY2hpbGRJdGVtcykgfHwgY2hpbGRJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goZWljb24pO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0QmFzZU9wdGlvbi5hcmlhQXR0cmlidXRlcy5sZXZlbCA9IHBhcnNlRmxvYXQocGFyZW50TGkuZ2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJykpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkuYXBwZW5kQ2hpbGQoZWoyX2xpc3RzXzEuTGlzdEJhc2UuY3JlYXRlTGlzdCh0aGlzLmdldFNvcnRlZERhdGEoY2hpbGRJdGVtcyksIHRoaXMubGlzdEJhc2VPcHRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmROb2RlKHBhcmVudExpLCBlaWNvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5zdXJlQ2hlY2tOb2RlKHBhcmVudExpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5hbGl6ZU5vZGUocGFyZW50TGkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclN1YkNoaWxkKHBhcmVudExpLCBleHBhbmRDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZW5zdXJlQ2hlY2tOb2RlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5zdXJlQ2hpbGRDaGVja1N0YXRlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5zdXJlUGFyZW50Q2hlY2tTdGF0ZShlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudExvYWREYXRhID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldENoaWxkRmllbGRzID0gZnVuY3Rpb24gKG1hcHBlciwgbm9kZUxldmVsLCBkYXRhTGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZERhdGE7XG4gICAgICAgICAgICBpZiAobm9kZUxldmVsID09PSBkYXRhTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGlsZE1hcHBlcihtYXBwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGRGaWVsZHModGhpcy5nZXRDaGlsZE1hcHBlcihtYXBwZXIpLCBub2RlTGV2ZWwsIGRhdGFMZXZlbCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Q2hpbGRNYXBwZXIgPSBmdW5jdGlvbiAobWFwcGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBtYXBwZXIuY2hpbGQgPT09ICdzdHJpbmcnIHx8IGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobWFwcGVyLmNoaWxkKSkgPyBtYXBwZXIgOiBtYXBwZXIuY2hpbGQ7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRDaGlsZE5vZGVzID0gZnVuY3Rpb24gKG9iaiwgcGFyZW50SWQsIGlzUm9vdCkge1xuICAgICAgICAgICAgaWYgKGlzUm9vdCA9PT0gdm9pZCAwKSB7IGlzUm9vdCA9IGZhbHNlOyB9XG4gICAgICAgICAgICB2YXIgY2hpbGROb2RlcztcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGROb2RlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGF0YVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGlsZEdyb3VwKHRoaXMuZ3JvdXBlZERhdGEsIHBhcmVudElkLCBpc1Jvb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmZpZWxkcy5jaGlsZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9iamxlbiA9IG9iai5sZW5ndGg7IGkgPCBvYmpsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ialtpXVt0aGlzLmZpZWxkcy5pZF0gJiYgb2JqW2ldW3RoaXMuZmllbGRzLmlkXS50b1N0cmluZygpID09PSBwYXJlbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmpbaV1bdGhpcy5maWVsZHMuY2hpbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqW2ldLmhhc093blByb3BlcnR5KHRoaXMuZmllbGRzLmNoaWxkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZXMgPSB0aGlzLmdldENoaWxkTm9kZXMob2JqW2ldW3RoaXMuZmllbGRzLmNoaWxkXSwgcGFyZW50SWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZE5vZGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkTm9kZXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRDaGlsZEdyb3VwID0gZnVuY3Rpb24gKGRhdGEsIHBhcmVudElkLCBpc1Jvb3QpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZE5vZGVzO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGROb2RlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvYmpsZW4gPSBkYXRhLmxlbmd0aDsgaSA8IG9iamxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGRhdGFbaV1bMF0pICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGRhdGFbaV1bMF1bdGhpcy5maWVsZHMucGFyZW50SURdKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXVswXVt0aGlzLmZpZWxkcy5wYXJlbnRJRF0udG9TdHJpbmcoKSA9PT0gcGFyZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzUm9vdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hpbGROb2RlcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbmRlclN1YkNoaWxkID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV4cGFuZENoaWxkKSB7XG4gICAgICAgICAgICBpZiAoZXhwYW5kQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY0ljb25zID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgRVhQQU5EQUJMRSwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNJY29ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGNJY29uc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckxpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGljb24sICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGlsZE5vZGVzKGN1ckxpLCBleHBhbmRDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUudG9nZ2xlU2VsZWN0ID0gZnVuY3Rpb24gKGxpLCBlLCBtdWx0aVNlbGVjdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbiAmJiAoKGUgJiYgZS5jdHJsS2V5KSB8fCBtdWx0aVNlbGVjdCkgJiYgdGhpcy5pc0FjdGl2ZShsaSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc2VsZWN0Tm9kZShsaSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUobGksIGUsIG11bHRpU2VsZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24gKGxpKSB7XG4gICAgICAgICAgICByZXR1cm4gbGkuY2xhc3NMaXN0LmNvbnRhaW5zKEFDVElWRSkgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKGxpLCBlLCBtdWx0aVNlbGVjdCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobGkpIHx8ICghdGhpcy5hbGxvd011bHRpU2VsZWN0aW9uICYmIHRoaXMuaXNBY3RpdmUobGkpICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGUpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNFbGVtZW50KGxpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICBldmVudEFyZ3MgPSB0aGlzLmdldFNlbGVjdEV2ZW50KGxpLCAnc2VsZWN0JywgZSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlU2VsZWN0aW5nJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24gfHwgKCFtdWx0aVNlbGVjdCAmJiAoIWUgfHwgKGUgJiYgIWUuY3RybEtleSkpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0QWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uICYmIGUgJiYgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdGFydE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydE5vZGUgPSBsaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLmxpTGlzdC5pbmRleE9mKHRoaXMuc3RhcnROb2RlKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSB0aGlzLmxpTGlzdC5pbmRleE9mKGxpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA+IGVuZEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBlbmRJbmRleCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDw9IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJOb2RlID0gdGhpcy5saUxpc3RbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV82LmlzVmlzaWJsZShjdXJyTm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0KGN1cnJOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnROb2RlID0gbGk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRTZWxlY3QobGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c0VsZW1lbnQobGkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVTZWxlY3RlZCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS51bnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobGksIGUpIHtcbiAgICAgICAgICAgIHZhciBldmVudEFyZ3M7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0xvYWRlZCkge1xuICAgICAgICAgICAgICAgIGV2ZW50QXJncyA9IHRoaXMuZ2V0U2VsZWN0RXZlbnQobGksICd1bi1zZWxlY3QnLCBlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ25vZGVTZWxlY3RpbmcnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdChsaSk7XG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzRWxlbWVudChsaSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0xvYWRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZVNlbGVjdGVkJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldEZvY3VzRWxlbWVudCA9IGZ1bmN0aW9uIChsaSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpKSkge1xuICAgICAgICAgICAgICAgIHZhciBmb2N1c2VkTm9kZSA9IHRoaXMuZ2V0Rm9jdXNlZE5vZGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZm9jdXNlZE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbZm9jdXNlZE5vZGVdLCBGT0NVUyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2xpXSwgRk9DVVMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkU2VsZWN0ID0gZnVuY3Rpb24gKGxpRWxlKSB7XG4gICAgICAgICAgICBsaUVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbbGlFbGVdLCBBQ1RJVkUpO1xuICAgICAgICAgICAgdmFyIGlkID0gbGlFbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGlkKSAmJiB0aGlzLnNlbGVjdGVkTm9kZXMuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE5vZGVzLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVtb3ZlU2VsZWN0ID0gZnVuY3Rpb24gKGxpRWxlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGlFbGUuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaUVsZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2xpRWxlXSwgQUNUSVZFKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuc2VsZWN0ZWROb2Rlcy5pbmRleE9mKGxpRWxlLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2Rlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVtb3ZlU2VsZWN0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkTEkgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBBQ1RJVkUpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzZWxlY3RlZExJXzEgPSBzZWxlY3RlZExJOyBfaSA8IHNlbGVjdGVkTElfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gc2VsZWN0ZWRMSV8xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKHNlbGVjdGVkTEksIEFDVElWRSk7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBzZWxlY3RlZE5vZGVzOiBbXSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldFNlbGVjdEV2ZW50ID0gZnVuY3Rpb24gKGN1cnJMaSwgYWN0aW9uLCBlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZURhdGEgPSB0aGlzLmdldE5vZGVEYXRhKGN1cnJMaSk7XG4gICAgICAgICAgICByZXR1cm4geyBhY3Rpb246IGFjdGlvbiwgY2FuY2VsOiBmYWxzZSwgaXNJbnRlcmFjdGVkOiBlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGUpID8gZmFsc2UgOiB0cnVlLCBub2RlOiBjdXJyTGksIG5vZGVEYXRhOiBub2RlRGF0YSB9O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0RXhwYW5kT25UeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRPblR5cGUgPSAodGhpcy5leHBhbmRPbiA9PT0gJ2F1dG8nKSA/IChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgPyAnY2xpY2snIDogJ2RibGNsaWNrJykgOiB0aGlzLmV4cGFuZE9uO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCB8fCAodGhpcy5hbGxvd0VkaXRpbmcgJiYgZS50eXBlID09PSAnZGJsY2xpY2snKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFJPT1QpIHx8XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhQQVJFTlRJVEVNKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKExJU1RJVEVNKSB8fFxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoSUNPTikgfHwgdGhpcy5zaG93Q2hlY2tCb3ggJiYgZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgQ0hFQ0tCT1hXUkFQKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VBY3Rpb24oZWoyX2Jhc2VfNi5jbG9zZXN0KHRhcmdldCwgJy4nICsgTElTVElURU0pLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlQWN0aW9uID0gZnVuY3Rpb24gKGN1cnJMaSwgZSkge1xuICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBjdXJyTGkpO1xuICAgICAgICAgICAgaWYgKCFpY29uIHx8IGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKFBST0NFU1MpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IGljb24uY2xhc3NMaXN0O1xuICAgICAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoRVhQQU5EQUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBY3Rpb24oY3VyckxpLCBpY29uLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VOb2RlKGN1cnJMaSwgaWNvbiwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kQWN0aW9uID0gZnVuY3Rpb24gKGN1cnJMaSwgaWNvbiwgZSwgZXhwYW5kQ2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChpY29uLmNsYXNzTGlzdC5jb250YWlucyhQUk9DRVNTKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBQUk9DRVNTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBcmdzID0gdGhpcy5nZXRFeHBhbmRFdmVudChjdXJyTGksIGUpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZUV4cGFuZGluZycsIHRoaXMuZXhwYW5kQXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kQXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1bCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGN1cnJMaSk7XG4gICAgICAgICAgICBpZiAodWwgJiYgdWwubm9kZU5hbWUgPT09ICdVTCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZE5vZGUoY3VyckxpLCBpY29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2hpbGROb2RlcyhjdXJyTGksIGV4cGFuZENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmtleUFjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGZvY3VzZWROb2RlID0gdGhpcy5nZXRGb2N1c2VkTm9kZSgpO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKElOUFVUKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnBFbGUgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSAnZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucEVsZS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtmb2N1c2VkTm9kZV0sIEhPVkVSKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdlc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucEVsZS52YWx1ZSA9IHRoaXMub2xkVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ZvY3VzZWROb2RlXSwgSE9WRVIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0ge1xuICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGUsXG4gICAgICAgICAgICAgICAgbm9kZTogZm9jdXNlZE5vZGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdrZXlQcmVzcycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzcGFjZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja05vZGUoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuTm9kZSh0aGlzLmVuYWJsZVJ0bCA/IGZhbHNlIDogdHJ1ZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuTm9kZSh0aGlzLmVuYWJsZVJ0bCA/IHRydWUgOiBmYWxzZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVEb3duJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRG93bic6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnREb3duJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjc0Rvd24nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZVVwJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsVXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0VXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2NzVXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlTm9kZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvbWUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0SG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEhvbWUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2NzSG9tZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVSb290Tm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdEVuZCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEVuZCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3NFbmQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlUm9vdE5vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEVudGVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdEVudGVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjc0VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3QoZm9jdXNlZE5vZGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmMic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUZXh0Ym94KGZvY3VzZWROb2RlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsQSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzTm9kZXMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBMSVNUSVRFTSArICc6bm90KC4nICsgQUNUSVZFICsgJyknLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RHaXZlbk5vZGVzKHNOb2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jaGVja05vZGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGZvY3VzZWROb2RlID0gdGhpcy5nZXRGb2N1c2VkTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGNoZWNrV3JhcCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIENIRUNLQk9YV1JBUCwgZm9jdXNlZE5vZGUpO1xuICAgICAgICAgICAgdmFyIGlzQ2hlY2tlZCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcgLicgKyBDSEVDS0JPWEZSQU1FLCBjaGVja1dyYXApLmNsYXNzTGlzdC5jb250YWlucyhDSEVDSyk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQ2hlY2tOb2RlKGNoZWNrV3JhcCwgaXNDaGVja2VkLCBmb2N1c2VkTm9kZSwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS52YWxpZGF0ZUNoZWNrTm9kZSA9IGZ1bmN0aW9uIChjaGVja1dyYXAsIGlzQ2hlY2ssIGxpLCBlKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0gdGhpcy5ub2RlQ2hlY2tpbmdFdmVudChjaGVja1dyYXAsIGlzQ2hlY2ssIGUpO1xuICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGNoZWNrV3JhcCwgaXNDaGVjayA/ICd1bmNoZWNrJyA6ICdjaGVjaycsIGUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVDaGlsZENoZWNrU3RhdGUobGkpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVQYXJlbnRDaGVja1N0YXRlKGVqMl9iYXNlXzYuY2xvc2VzdChlajJfYmFzZV82LmNsb3Nlc3QobGksICcuJyArIFBBUkVOVElURU0pLCAnLicgKyBMSVNUSVRFTSkpO1xuICAgICAgICAgICAgdGhpcy5ub2RlQ2hlY2tlZEV2ZW50KGNoZWNrV3JhcCwgaXNDaGVjaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5vcGVuTm9kZSA9IGZ1bmN0aW9uICh0b0JlT3BlbmVkLCBlKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZE5vZGUgPSB0aGlzLmdldEZvY3VzZWROb2RlKCk7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIGZvY3VzZWROb2RlKTtcbiAgICAgICAgICAgIGlmICh0b0JlT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpY29uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoRVhQQU5EQUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBY3Rpb24oZm9jdXNlZE5vZGUsIGljb24sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c05leHROb2RlKGZvY3VzZWROb2RlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaWNvbiAmJiBpY29uLmNsYXNzTGlzdC5jb250YWlucyhDT0xMQVBTSUJMRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZU5vZGUoZm9jdXNlZE5vZGUsIGljb24sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGVqMl9iYXNlXzYuY2xvc2VzdChmb2N1c2VkTm9kZSwgJy4nICsgUEFSRU5USVRFTSksICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRMaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1cyhmb2N1c2VkTm9kZSwgcGFyZW50TGkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUubmF2aWdhdGVOb2RlID0gZnVuY3Rpb24gKGlzVG93YXJkcykge1xuICAgICAgICAgICAgdmFyIGZvY3VzZWROb2RlID0gdGhpcy5nZXRGb2N1c2VkTm9kZSgpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c05leHROb2RlKGZvY3VzZWROb2RlLCBpc1Rvd2FyZHMpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUubmF2aWdhdGVSb290Tm9kZSA9IGZ1bmN0aW9uIChpc0JhY2t3YXJkcykge1xuICAgICAgICAgICAgdmFyIGZvY3VzZWROb2RlID0gdGhpcy5nZXRGb2N1c2VkTm9kZSgpO1xuICAgICAgICAgICAgdmFyIHJvb3ROb2RlID0gaXNCYWNrd2FyZHMgPyB0aGlzLmdldFJvb3ROb2RlKCkgOiB0aGlzLmdldEVuZE5vZGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXMoZm9jdXNlZE5vZGUsIHJvb3ROb2RlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldEZvY3VzZWROb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZOb2RlID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgTElTVElURU0gKyAnLicgKyBGT0NVUywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGZOb2RlKSA/IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIExJU1RJVEVNLCB0aGlzLmVsZW1lbnQpIDogZk5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5mb2N1c05leHROb2RlID0gZnVuY3Rpb24gKGxpLCBpc1Rvd2FyZHMpIHtcbiAgICAgICAgICAgIHZhciBuZXh0Tm9kZSA9IGlzVG93YXJkcyA/IHRoaXMuZ2V0TmV4dE5vZGUobGkpIDogdGhpcy5nZXRQcmV2Tm9kZShsaSk7XG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzKGxpLCBuZXh0Tm9kZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXROZXh0Tm9kZSA9IGZ1bmN0aW9uIChsaSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5saUxpc3QuaW5kZXhPZihsaSk7XG4gICAgICAgICAgICB2YXIgbmV4dE5vZGU7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IHRoaXMubGlMaXN0W2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChuZXh0Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKCFlajJfYmFzZV82LmlzVmlzaWJsZShuZXh0Tm9kZSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5leHROb2RlO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0UHJldk5vZGUgPSBmdW5jdGlvbiAobGkpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMubGlMaXN0LmluZGV4T2YobGkpO1xuICAgICAgICAgICAgdmFyIHByZXZOb2RlO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGluZGV4LS07XG4gICAgICAgICAgICAgICAgcHJldk5vZGUgPSB0aGlzLmxpTGlzdFtpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQocHJldk5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICghZWoyX2Jhc2VfNi5pc1Zpc2libGUocHJldk5vZGUpKTtcbiAgICAgICAgICAgIHJldHVybiBwcmV2Tm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldFJvb3ROb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIHZhciByb290Tm9kZTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICByb290Tm9kZSA9IHRoaXMubGlMaXN0W2luZGV4XTtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfSB3aGlsZSAoIWVqMl9iYXNlXzYuaXNWaXNpYmxlKHJvb3ROb2RlKSk7XG4gICAgICAgICAgICByZXR1cm4gcm9vdE5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRFbmROb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5saUxpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHZhciBlbmROb2RlO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGVuZE5vZGUgPSB0aGlzLmxpTGlzdFtpbmRleF07XG4gICAgICAgICAgICAgICAgaW5kZXgtLTtcbiAgICAgICAgICAgIH0gd2hpbGUgKCFlajJfYmFzZV82LmlzVmlzaWJsZShlbmROb2RlKSk7XG4gICAgICAgICAgICByZXR1cm4gZW5kTm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldEZvY3VzID0gZnVuY3Rpb24gKHByZU5vZGUsIG5leHROb2RlKSB7XG4gICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtwcmVOb2RlXSwgW0hPVkVSLCBGT0NVU10pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbbmV4dE5vZGVdLCBbSE9WRVIsIEZPQ1VTXSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5mb2N1c0luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1vdXNlRG93blN0YXR1cykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW3RoaXMuZ2V0Rm9jdXNlZE5vZGUoKV0sIEhPVkVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duU3RhdHVzID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5mb2N1c091dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW3RoaXMuZ2V0Rm9jdXNlZE5vZGUoKV0sIEhPVkVSKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLm9uTW91c2VPdmVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBjbGFzc0xpc3QgPSB0YXJnZXQuY2xhc3NMaXN0O1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRMaSA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgIGlmICghY3VycmVudExpIHx8IGNsYXNzTGlzdC5jb250YWlucyhQQVJFTlRJVEVNKSB8fCBjbGFzc0xpc3QuY29udGFpbnMoTElTVElURU0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVIb3ZlcigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SG92ZXIoY3VycmVudExpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldEhvdmVyID0gZnVuY3Rpb24gKGxpKSB7XG4gICAgICAgICAgICBpZiAoIWxpLmNsYXNzTGlzdC5jb250YWlucyhIT1ZFUikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUhvdmVyKCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbbGldLCBIT1ZFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLm9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUhvdmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBob3ZlcmVkTm9kZSA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIEhPVkVSLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKGhvdmVyZWROb2RlICYmIGhvdmVyZWROb2RlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoaG92ZXJlZE5vZGUsIEhPVkVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0Tm9kZURhdGEgPSBmdW5jdGlvbiAoY3VyckxpKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY3VyckxpKSAmJiBjdXJyTGkuY2xhc3NMaXN0LmNvbnRhaW5zKExJU1RJVEVNKSkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGN1cnJMaS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBMSVNUVEVYVCwgY3VyckxpKS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICB2YXIgcE5vZGUgPSBlajJfYmFzZV82LmNsb3Nlc3QoY3VyckxpLnBhcmVudE5vZGUsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICB2YXIgcGlkID0gcE5vZGUgPyBwTm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGN1cnJMaS5jbGFzc0xpc3QuY29udGFpbnMoQUNUSVZFKTtcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kZWQgPSAoY3VyckxpLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAndHJ1ZScpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBjaGVja2VkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZCA9IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIENIRUNLQk9YV1JBUCwgY3VyckxpKS5nZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBpZDogaWQsIHRleHQ6IHRleHQsIHBhcmVudElEOiBwaWQsIHNlbGVjdGVkOiBzZWxlY3RlZCwgZXhwYW5kZWQ6IGV4cGFuZGVkLCBjaGVja2VkOiBjaGVja2VkIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBpZDogJycsIHRleHQ6ICcnLCBwYXJlbnRJRDogJycsIHNlbGVjdGVkOiAnJywgZXhwYW5kZWQ6ICcnLCBjaGVja2VkOiAnJyB9O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0RXhwYW5kRXZlbnQgPSBmdW5jdGlvbiAoY3VyckxpLCBlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZURhdGEgPSB0aGlzLmdldE5vZGVEYXRhKGN1cnJMaSk7XG4gICAgICAgICAgICByZXR1cm4geyBjYW5jZWw6IGZhbHNlLCBpc0ludGVyYWN0ZWQ6IGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZSkgPyBmYWxzZSA6IHRydWUsIG5vZGU6IGN1cnJMaSwgbm9kZURhdGE6IG5vZGVEYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZVJlbmRlck5vZGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgc2VsZWN0ZWROb2RlczogW10gfSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNldERhdGFCaW5kaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5zZXRDc3NDbGFzcyA9IGZ1bmN0aW9uIChvbGRDbGFzcywgbmV3Q2xhc3MpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChvbGRDbGFzcykgJiYgb2xkQ2xhc3MgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgb2xkQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobmV3Q2xhc3MpICYmIG5ld0NsYXNzICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIG5ld0NsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZWRpdGluZ0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhST09UKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFBBUkVOVElURU0pIHx8XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhMSVNUSVRFTSkgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhJQ09OKSB8fFxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoSU5QVVQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSBlajJfYmFzZV82LmNsb3Nlc3QodGFyZ2V0LCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUZXh0Ym94KGxpRWxlLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNyZWF0ZVRleHRib3ggPSBmdW5jdGlvbiAobGlFbGUsIGUpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0RWxlID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgTElTVFRFWFQsIGxpRWxlKTtcbiAgICAgICAgICAgIHRoaXMub2xkVGV4dCA9IHRleHRFbGUudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0gdGhpcy5nZXRFZGl0RXZlbnQobGlFbGUsIG51bGwpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlRWRpdGluZycsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICBpZiAoZXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzdHlsZSA9ICd3aWR0aDonICsgdGV4dEVsZS5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICB2YXIgaW5wRWxlID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiBJTlBVVCwgc3R5bGVzOiBzdHlsZSwgYXR0cnM6IHsgdmFsdWU6IHRoaXMub2xkVGV4dCB9IH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbbGlFbGVdLCBFRElUSU5HKTtcbiAgICAgICAgICAgIHRleHRFbGUuY2hpbGROb2Rlc1swXS5ub2RlVmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRleHRFbGUuYXBwZW5kQ2hpbGQoaW5wRWxlKTtcbiAgICAgICAgICAgIGlucEVsZS5mb2N1cygpO1xuICAgICAgICAgICAgdmFyIGlucHV0RWxlID0gaW5wRWxlO1xuICAgICAgICAgICAgaW5wdXRFbGUuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgaW5wdXRFbGUudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUlucHV0RXZlbnRzKGlucEVsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5pbnB1dEZvY3VzT3V0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBuZXdUZXh0ID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgdmFyIHR4dEVsZSA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIExJU1RURVhUKTtcbiAgICAgICAgICAgIHZhciBsaUVsZSA9IGVqMl9iYXNlXzYuY2xvc2VzdCh0YXJnZXQsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgIHR4dEVsZS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9IG5ld1RleHQ7XG4gICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaCh0YXJnZXQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbbGlFbGVdLCBFRElUSU5HKTtcbiAgICAgICAgICAgIHR4dEVsZS5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdub2RlRWRpdGVkJywgdGhpcy5nZXRFZGl0RXZlbnQobGlFbGUsIG5ld1RleHQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZWxlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPVwiJyArIGVsZSArICdcIl0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBlbGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZ2V0RWRpdEV2ZW50ID0gZnVuY3Rpb24gKGxpRWxlLCBuZXdUZXh0KSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0Tm9kZURhdGEobGlFbGUpO1xuICAgICAgICAgICAgcmV0dXJuIHsgY2FuY2VsOiBmYWxzZSwgbmV3VGV4dDogbmV3VGV4dCwgbm9kZTogbGlFbGUsIG5vZGVEYXRhOiBkYXRhLCBvbGRUZXh0OiB0aGlzLm9sZFRleHQgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnNldERyYWdBbmREcm9wID0gZnVuY3Rpb24gKHRvQmluZCkge1xuICAgICAgICAgICAgaWYgKHRvQmluZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZURyYWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveURyYWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmluaXRpYWxpemVEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB2aXJ0dWFsRWxlO1xuICAgICAgICAgICAgdGhpcy5kcmFnT2JqID0gbmV3IGVqMl9iYXNlXzUuRHJhZ2dhYmxlKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGVuYWJsZVRhaWxNb2RlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY3Vyc29yQXQ6IHsgdG9wOiAtMjAgfSxcbiAgICAgICAgICAgICAgICBkcmFnVGFyZ2V0OiAnLicgKyBURVhUV1JBUCxcbiAgICAgICAgICAgICAgICBoZWxwZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdUYXJnZXQgPSBlLnNlbmRlci50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkcmFnUm9vdCA9IGVqMl9iYXNlXzYuY2xvc2VzdChfdGhpcy5kcmFnVGFyZ2V0LCAnLicgKyBST09UKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRyYWdXcmFwID0gZWoyX2Jhc2VfNi5jbG9zZXN0KF90aGlzLmRyYWdUYXJnZXQsICcuJyArIFRFWFRXUkFQKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhZ0xpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KF90aGlzLmRyYWdUYXJnZXQsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmZ1bGxSb3dTZWxlY3QgJiYgIWRyYWdXcmFwICYmIF90aGlzLmRyYWdUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKEZVTExST1cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnV3JhcCA9IF90aGlzLmRyYWdUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuZHJhZ1RhcmdldCB8fCAhZS5lbGVtZW50LmlzU2FtZU5vZGUoZHJhZ1Jvb3QpIHx8ICFkcmFnV3JhcCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhZ1RhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkgfHwgX3RoaXMuZHJhZ1RhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUEFSRU5USVRFTSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKExJU1RJVEVNKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZUVsZSA9IChkcmFnV3JhcC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCBjbG9uZUVsZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IElDT04gKyAnICcgKyBFWFBBTkRBQkxFIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVFbGUuaW5zZXJ0QmVmb3JlKGljb24sIGNsb25lRWxlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY3NzQ2xhc3MgPSBEUkFHSVRFTSArICcgJyArIFJPT1QgKyAnICcgKyAoX3RoaXMuZW5hYmxlUnRsID8gUlRMIDogJycpO1xuICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsRWxlID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpcnR1YWxFbGUuYXBwZW5kQ2hpbGQoY2xvbmVFbGUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbkxlbiA9IF90aGlzLnNlbGVjdGVkTm9kZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAobkxlbiA+IDEgJiYgX3RoaXMuYWxsb3dNdWx0aVNlbGVjdGlvbiAmJiBfdGhpcy5kcmFnTGkuY2xhc3NMaXN0LmNvbnRhaW5zKEFDVElWRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjTm9kZSA9IGVqMl9iYXNlXzYuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBEUk9QQ09VTlQsIGlubmVySFRNTDogJycgKyBuTGVuIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlydHVhbEVsZS5hcHBlbmRDaGlsZChjTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2aXJ0dWFsRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhZ0RhdGEgPSBfdGhpcy5nZXROb2RlRGF0YShfdGhpcy5kcmFnTGkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlydHVhbEVsZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRyYWdTdGFydDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbX3RoaXMuZWxlbWVudF0sIERSQUdHSU5HKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IF90aGlzLmdldERyYWdFdmVudChlLmV2ZW50LCBfdGhpcywgbnVsbCwgZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdub2RlRHJhZ1N0YXJ0JywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKHZpcnR1YWxFbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbX3RoaXMuZWxlbWVudF0sIERSQUdHSU5HKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnU3RhcnRBY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZHJhZzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhZ0FjdGlvbihlLCB2aXJ0dWFsRWxlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRyYWdTdG9wOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LnJlbW92ZUNsYXNzKFtfdGhpcy5lbGVtZW50XSwgRFJBR0dJTkcpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVWaXJ0dWFsRWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkcm9wVGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkcm9wUm9vdCA9IChlajJfYmFzZV82LmNsb3Nlc3QoZHJvcFRhcmdldCwgJy4nICsgRFJPUFBBQkxFKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZHJvcFRhcmdldCB8fCAhZHJvcFJvb3QgfHwgZHJvcFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKGUuaGVscGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IF90aGlzLmdldERyYWdFdmVudChlLmV2ZW50LCBfdGhpcywgZHJvcFRhcmdldCwgZHJvcFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ25vZGVEcmFnU3RvcCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdTdGFydEFjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kcm9wT2JqID0gbmV3IGVqMl9iYXNlXzUuRHJvcHBhYmxlKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIG91dDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGUpICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoU0lCTElORykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ25vdC1hbGxvd2VkJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3ZlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRyb3A6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRyb3BBY3Rpb24oZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kcmFnQWN0aW9uID0gZnVuY3Rpb24gKGUsIHZpcnR1YWxFbGUpIHtcbiAgICAgICAgICAgIHZhciBkcm9wUm9vdCA9IGVqMl9iYXNlXzYuY2xvc2VzdChlLnRhcmdldCwgJy4nICsgRFJPUFBBQkxFKTtcbiAgICAgICAgICAgIHZhciBkcm9wV3JhcCA9IGVqMl9iYXNlXzYuY2xvc2VzdChlLnRhcmdldCwgJy4nICsgVEVYVFdSQVApO1xuICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnZGl2LicgKyBJQ09OLCB2aXJ0dWFsRWxlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2ljb25dLCBbRFJPUElOLCBEUk9QTkVYVCwgRFJPUE9VVCwgTk9EUk9QXSk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVZpcnR1YWxFbGUoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gZS50YXJnZXQuY2xhc3NMaXN0O1xuICAgICAgICAgICAgaWYgKHRoaXMuZnVsbFJvd1NlbGVjdCAmJiAhZHJvcFdyYXAgJiYgIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoY2xhc3NMaXN0KSAmJiBjbGFzc0xpc3QuY29udGFpbnMoRlVMTFJPVykpIHtcbiAgICAgICAgICAgICAgICBkcm9wV3JhcCA9IGUudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkcm9wUm9vdCkge1xuICAgICAgICAgICAgICAgIHZhciBkcm9wTGkgPSBlajJfYmFzZV82LmNsb3Nlc3QoZS50YXJnZXQsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRyb3BSb290LmNsYXNzTGlzdC5jb250YWlucyhST09UKSB8fCAoZHJvcFdyYXAgJiZcbiAgICAgICAgICAgICAgICAgICAgKCFkcm9wTGkuaXNTYW1lTm9kZSh0aGlzLmRyYWdMaSkgJiYgIXRoaXMuaXNEZXNjZW5kYW50KHRoaXMuZHJhZ0xpLCBkcm9wTGkpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgKGUuZXZlbnQub2Zmc2V0WSA8IDcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgRFJPUE5FWFQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpckVsZSA9IGVqMl9iYXNlXzYuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IFNJQkxJTkcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmZ1bGxSb3dTZWxlY3QgPyAoMSkgOiAoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wTGkuaW5zZXJ0QmVmb3JlKHZpckVsZSwgZHJvcExpLmNoaWxkcmVuW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZSAmJiAoZS50YXJnZXQub2Zmc2V0SGVpZ2h0ID4gMCAmJiBlLmV2ZW50Lm9mZnNldFkgPiAoZS50YXJnZXQub2Zmc2V0SGVpZ2h0IC0gMTApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIERST1BORVhUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aXJFbGUgPSBlajJfYmFzZV82LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBTSUJMSU5HIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5mdWxsUm93U2VsZWN0ID8gKDIpIDogKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcExpLmluc2VydEJlZm9yZSh2aXJFbGUsIGRyb3BMaS5jaGlsZHJlbltpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIERST1BJTik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZS50YXJnZXQubm9kZU5hbWUgPT09ICdMSScgJiYgKCFkcm9wTGkuaXNTYW1lTm9kZSh0aGlzLmRyYWdMaSkgJiYgIXRoaXMuaXNEZXNjZW5kYW50KHRoaXMuZHJhZ0xpLCBkcm9wTGkpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgRFJPUE5FWFQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclZpcnR1YWxFbGUoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhTSUJMSU5HKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV82LmFkZENsYXNzKFtpY29uXSwgRFJPUE5FWFQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5hZGRDbGFzcyhbaWNvbl0sIERST1BPVVQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2ljb25dLCBOT0RST1ApO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ25vdC1hbGxvd2VkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZURyYWdnaW5nJywgdGhpcy5nZXREcmFnRXZlbnQoZS5ldmVudCwgdGhpcywgZS50YXJnZXQsIGUudGFyZ2V0KSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kcm9wQWN0aW9uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBkcm9wVGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgZHJhZ09iaiA9IGUuZHJhZ0RhdGEuZHJhZ2dhYmxlLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICB2YXIgZHJhZ1RhcmdldCA9IGRyYWdPYmouZHJhZ1RhcmdldDtcbiAgICAgICAgICAgIHZhciBkcmFnTGkgPSAoZWoyX2Jhc2VfNi5jbG9zZXN0KGRyYWdUYXJnZXQsICcuJyArIExJU1RJVEVNKSk7XG4gICAgICAgICAgICB2YXIgZHJvcExpID0gKGVqMl9iYXNlXzYuY2xvc2VzdChkcm9wVGFyZ2V0LCAnLicgKyBMSVNUSVRFTSkpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgaWYgKCFkcm9wTGkgfHwgZHJvcExpLmlzU2FtZU5vZGUoZHJhZ0xpKSB8fCB0aGlzLmlzRGVzY2VuZGFudChkcmFnTGksIGRyb3BMaSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHJhZ09iai5hbGxvd011bHRpU2VsZWN0aW9uICYmIChkcmFnTGkuY2xhc3NMaXN0LmNvbnRhaW5zKEFDVElWRSkgfHwgKGUuZXZlbnQub2Zmc2V0WSA8IDcgfHxcbiAgICAgICAgICAgICAgICAoZS50YXJnZXQub2Zmc2V0SGVpZ2h0ID4gMCAmJiBlLmV2ZW50Lm9mZnNldFkgPiAoZS50YXJnZXQub2Zmc2V0SGVpZ2h0IC0gMTApKSkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNOb2RlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIEFDVElWRSwgZHJhZ09iai5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZHJvcExpLmlzU2FtZU5vZGUoc05vZGVzW2ldKSB8fCB0aGlzLmlzRGVzY2VuZGFudChzTm9kZXNbaV0sIGRyb3BMaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kTm9kZShkcm9wVGFyZ2V0LCBzTm9kZXNbaV0sIGRyb3BMaSwgZSwgZHJhZ09iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmROb2RlKGRyb3BUYXJnZXQsIGRyYWdMaSwgZHJvcExpLCBlLCBkcmFnT2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbm9kZURyb3BwZWQnLCB0aGlzLmdldERyYWdFdmVudChlLmV2ZW50LCBkcmFnT2JqLCBkcm9wVGFyZ2V0LCBlLnRhcmdldCkpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYXBwZW5kTm9kZSA9IGZ1bmN0aW9uIChkcm9wVGFyZ2V0LCBkcmFnTGksIGRyb3BMaSwgZSwgZHJhZ09iaikge1xuICAgICAgICAgICAgaWYgKGRyb3BUYXJnZXQubm9kZU5hbWUgPT09ICdMSScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BBc1NpYmxpbmdOb2RlKGRyYWdMaSwgZHJvcExpLCBlLCBkcmFnT2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFzQ2hpbGROb2RlKGRyYWdMaSwgZHJvcExpLCBkcmFnT2JqLCBudWxsLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRyb3BBc1NpYmxpbmdOb2RlID0gZnVuY3Rpb24gKGRyYWdMaSwgZHJvcExpLCBlLCBkcmFnT2JqKSB7XG4gICAgICAgICAgICB2YXIgZHJvcFVsID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyb3BMaSwgJy4nICsgUEFSRU5USVRFTSk7XG4gICAgICAgICAgICB2YXIgZHJhZ1BhcmVudFVsID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyYWdMaSwgJy4nICsgUEFSRU5USVRFTSk7XG4gICAgICAgICAgICB2YXIgZHJhZ1BhcmVudExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyYWdQYXJlbnRVbCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgdmFyIHByZTtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5vZmZzZXRIZWlnaHQgPiAwICYmIGUuZXZlbnQub2Zmc2V0WSA+IGUudGFyZ2V0Lm9mZnNldEhlaWdodCAtIDIpIHtcbiAgICAgICAgICAgICAgICBwcmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGUuZXZlbnQub2Zmc2V0WSA8IDIpIHtcbiAgICAgICAgICAgICAgICBwcmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZHJvcFVsLmluc2VydEJlZm9yZShkcmFnTGksIHByZSA/IGUudGFyZ2V0IDogZS50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudChkcmFnUGFyZW50VWwsIGRyYWdQYXJlbnRMaSk7XG4gICAgICAgICAgICBpZiAoZHJhZ09iai5lbGVtZW50LmlkID09PSB0aGlzLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRyYWdPYmoudXBkYXRlSW5zdGFuY2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kcm9wQXNDaGlsZE5vZGUgPSBmdW5jdGlvbiAoZHJhZ0xpLCBkcm9wTGksIGRyYWdPYmosIGluZGV4LCBlKSB7XG4gICAgICAgICAgICB2YXIgZHJhZ1BhcmVudFVsID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyYWdMaSwgJy4nICsgUEFSRU5USVRFTSk7XG4gICAgICAgICAgICB2YXIgZHJhZ1BhcmVudExpID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGRyYWdQYXJlbnRVbCwgJy4nICsgTElTVElURU0pO1xuICAgICAgICAgICAgdmFyIGRyb3BQYXJlbnRVbCA9IGVqMl9iYXNlXzYuY2xvc2VzdChkcm9wTGksICcuJyArIFBBUkVOVElURU0pO1xuICAgICAgICAgICAgaWYgKGUgJiYgKGUuZXZlbnQub2Zmc2V0WSA8IDcpKSB7XG4gICAgICAgICAgICAgICAgZHJvcFBhcmVudFVsLmluc2VydEJlZm9yZShkcmFnTGksIGRyb3BMaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlICYmIChlLnRhcmdldC5vZmZzZXRIZWlnaHQgPiAwICYmIGUuZXZlbnQub2Zmc2V0WSA+IChlLnRhcmdldC5vZmZzZXRIZWlnaHQgLSAxMCkpKSB7XG4gICAgICAgICAgICAgICAgZHJvcFBhcmVudFVsLmluc2VydEJlZm9yZShkcmFnTGksIGRyb3BMaS5uZXh0RWxlbWVudFNpYmxpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3BVbCA9IHRoaXMuZXhwYW5kUGFyZW50KGRyb3BMaSk7XG4gICAgICAgICAgICAgICAgZHJvcFVsLmluc2VydEJlZm9yZShkcmFnTGksIGRyb3BVbC5jaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQoZHJhZ1BhcmVudFVsLCBkcmFnUGFyZW50TGkpO1xuICAgICAgICAgICAgaWYgKGRyYWdPYmouZWxlbWVudC5pZCA9PT0gdGhpcy5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkcmFnT2JqLnVwZGF0ZUluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnN0YW5jZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kUGFyZW50ID0gZnVuY3Rpb24gKGRyb3BMaSkge1xuICAgICAgICAgICAgdmFyIGRyb3BJY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgZHJvcExpKTtcbiAgICAgICAgICAgIGlmIChkcm9wSWNvbiAmJiBkcm9wSWNvbi5jbGFzc0xpc3QuY29udGFpbnMoRVhQQU5EQUJMRSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFjdGlvbihkcm9wTGksIGRyb3BJY29uLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkcm9wVWwgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCBkcm9wTGkpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoZHJvcFVsKSkge1xuICAgICAgICAgICAgICAgIGVqMl9saXN0c18xLkxpc3RCYXNlLmdlbmVyYXRlSWNvbihkcm9wTGksIENPTExBUFNJQkxFLCB0aGlzLmxpc3RCYXNlT3B0aW9uKTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGVqMl9iYXNlXzYuc2VsZWN0KCdkaXYuJyArIElDT04sIGRyb3BMaSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhbaWNvbl0sIEVYUEFOREFCTEUpO1xuICAgICAgICAgICAgICAgIGRyb3BVbCA9IGVqMl9saXN0c18xLkxpc3RCYXNlLmdlbmVyYXRlVUwoW10sIG51bGwsIHRoaXMubGlzdEJhc2VPcHRpb24pO1xuICAgICAgICAgICAgICAgIGRyb3BMaS5hcHBlbmRDaGlsZChkcm9wVWwpO1xuICAgICAgICAgICAgICAgIGRyb3BMaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2Ryb3BMaV0sIE5PREVDT0xMQVBTRUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRyb3BVbDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVwZGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZHJhZ1BhcmVudFVsLCBkcmFnUGFyZW50TGkpIHtcbiAgICAgICAgICAgIGlmIChkcmFnUGFyZW50TGkgJiYgZHJhZ1BhcmVudFVsLmNoaWxkRWxlbWVudENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWdJY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJ2Rpdi4nICsgSUNPTiwgZHJhZ1BhcmVudExpKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV82LmRldGFjaChkcmFnUGFyZW50VWwpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKGRyYWdJY29uKTtcbiAgICAgICAgICAgICAgICBkcmFnUGFyZW50TGkucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW5kZXJWaXJ0dWFsRWxlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwcmU7XG4gICAgICAgICAgICBpZiAoZS5ldmVudC5vZmZzZXRZID4gZS50YXJnZXQub2Zmc2V0SGVpZ2h0IC0gMikge1xuICAgICAgICAgICAgICAgIHByZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS5ldmVudC5vZmZzZXRZIDwgMikge1xuICAgICAgICAgICAgICAgIHByZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmlyRWxlID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogU0lCTElORyB9KTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZnVsbFJvd1NlbGVjdCA/IChwcmUgPyAxIDogMikgOiAocHJlID8gMCA6IDEpO1xuICAgICAgICAgICAgZS50YXJnZXQuaW5zZXJ0QmVmb3JlKHZpckVsZSwgZS50YXJnZXQuY2hpbGRyZW5baW5kZXhdKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnJlbW92ZVZpcnR1YWxFbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2liRWxlID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgU0lCTElORyk7XG4gICAgICAgICAgICBpZiAoc2liRWxlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5kZXRhY2goc2liRWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRlc3Ryb3lEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ09iaiAmJiB0aGlzLmRyb3BPYmopIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJvcE9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXREcmFnRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQsIG9iaiwgZHJvcFRhcmdldCwgdGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgZHJvcExpID0gZHJvcFRhcmdldCA/IGVqMl9iYXNlXzYuY2xvc2VzdChkcm9wVGFyZ2V0LCAnLicgKyBMSVNUSVRFTSkgOiBudWxsO1xuICAgICAgICAgICAgdmFyIGRyb3BEYXRhID0gZHJvcExpID8gdGhpcy5nZXROb2RlRGF0YShkcm9wTGkpIDogbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgICAgICAgICAgZHJhZ2dlZE5vZGU6IG9iai5kcmFnTGksXG4gICAgICAgICAgICAgICAgZHJhZ2dlZE5vZGVEYXRhOiBvYmouZHJhZ0RhdGEsXG4gICAgICAgICAgICAgICAgZHJvcHBlZE5vZGU6IGRyb3BMaSxcbiAgICAgICAgICAgICAgICBkcm9wcGVkTm9kZURhdGE6IGRyb3BEYXRhLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuYWRkRnVsbFJvdyA9IGZ1bmN0aW9uICh0b0FkZCkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0b0FkZCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGdWxsUm93KHRoaXMubGlMaXN0W2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dEaXYgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBGVUxMUk9XLCB0aGlzLmxpTGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKHJvd0Rpdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuY3JlYXRlRnVsbFJvdyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgcm93RGl2ID0gZWoyX2Jhc2VfNi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogRlVMTFJPVyB9KTtcbiAgICAgICAgICAgIGl0ZW0uaW5zZXJ0QmVmb3JlKHJvd0RpdiwgaXRlbS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmFkZE11bHRpU2VsZWN0ID0gZnVuY3Rpb24gKHRvQWRkKSB7XG4gICAgICAgICAgICBpZiAodG9BZGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlFbGVzID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgTElTVElURU0gKyAnOm5vdChbYXJpYS1zZWxlY3RlZD1cInRydWVcIl0pJywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGxpRWxlc18xID0gbGlFbGVzOyBfaSA8IGxpRWxlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gbGlFbGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlcyA9IGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIExJU1RJVEVNICsgJ1thcmlhLXNlbGVjdGVkPVwiZmFsc2VcIl0nLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgbGlFbGVzXzIgPSBsaUVsZXM7IF9hIDwgbGlFbGVzXzIubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBsaUVsZXNfMltfYV07XG4gICAgICAgICAgICAgICAgICAgIGVsZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jb2xsYXBzZUJ5TGV2ZWwgPSBmdW5jdGlvbiAoZWxlbWVudCwgbGV2ZWwsIGV4Y2x1ZGVIaWRkZW5Ob2Rlcykge1xuICAgICAgICAgICAgaWYgKGxldmVsID4gMCAmJiAhZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHZhciBjTm9kZXMgPSB0aGlzLmdldFZpc2libGVOb2RlcyhleGNsdWRlSGlkZGVuTm9kZXMsIGVsZW1lbnQuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNOb2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGlFbGUgPSBjTm9kZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgQ09MTEFQU0lCTEUsIGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFRFWFRXUkFQLCBsaUVsZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQoaWNvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VOb2RlKGxpRWxlLCBpY29uLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlQnlMZXZlbChlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCBsaUVsZSksIGxldmVsIC0gMSwgZXhjbHVkZUhpZGRlbk5vZGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jb2xsYXBzZUFsbE5vZGVzID0gZnVuY3Rpb24gKGV4Y2x1ZGVIaWRkZW5Ob2Rlcykge1xuICAgICAgICAgICAgdmFyIGNJY29ucyA9IHRoaXMuZ2V0VmlzaWJsZU5vZGVzKGV4Y2x1ZGVIaWRkZW5Ob2RlcywgZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgQ09MTEFQU0lCTEUsIHRoaXMuZWxlbWVudCkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNJY29ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gY0ljb25zW2ldO1xuICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IGVqMl9iYXNlXzYuY2xvc2VzdChpY29uLCAnLicgKyBMSVNUSVRFTSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZU5vZGUobGlFbGUsIGljb24sIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kQnlMZXZlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBsZXZlbCwgZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPiAwICYmICFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVOb2RlcyA9IHRoaXMuZ2V0VmlzaWJsZU5vZGVzKGV4Y2x1ZGVIaWRkZW5Ob2RlcywgZWxlbWVudC5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZU5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IGVOb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBFWFBBTkRBQkxFLCBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBURVhUV1JBUCwgbGlFbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGljb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFjdGlvbihsaUVsZSwgaWNvbiwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRCeUxldmVsKGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIGxpRWxlKSwgbGV2ZWwgLSAxLCBleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmV4cGFuZEFsbE5vZGVzID0gZnVuY3Rpb24gKGV4Y2x1ZGVIaWRkZW5Ob2Rlcykge1xuICAgICAgICAgICAgdmFyIGVJY29ucyA9IHRoaXMuZ2V0VmlzaWJsZU5vZGVzKGV4Y2x1ZGVIaWRkZW5Ob2RlcywgZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgRVhQQU5EQUJMRSwgdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZUljb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBlSWNvbnNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gZWoyX2Jhc2VfNi5jbG9zZXN0KGljb24sICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFjdGlvbihsaUVsZSwgaWNvbiwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5nZXRWaXNpYmxlTm9kZXMgPSBmdW5jdGlvbiAoZXhjbHVkZUhpZGRlbk5vZGVzLCBub2Rlcykge1xuICAgICAgICAgICAgdmFyIHZOb2RlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVzKTtcbiAgICAgICAgICAgIGlmIChleGNsdWRlSGlkZGVuTm9kZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzYuaXNWaXNpYmxlKHZOb2Rlc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZOb2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdk5vZGVzO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucmVtb3ZlTm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICB2YXIgZHJhZ1BhcmVudFVsID0gZWoyX2Jhc2VfNi5jbG9zZXN0KG5vZGUsICcuJyArIFBBUkVOVElURU0pO1xuICAgICAgICAgICAgdmFyIGRyYWdQYXJlbnRMaSA9IGVqMl9iYXNlXzYuY2xvc2VzdChkcmFnUGFyZW50VWwsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuZGV0YWNoKG5vZGUpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KGRyYWdQYXJlbnRVbCwgZHJhZ1BhcmVudExpKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5zdGFuY2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVwZGF0ZUluc3RhbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkTm9kZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVwZGF0ZUxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmxpTGlzdCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVqMl9iYXNlXzYuc2VsZWN0QWxsKCcuJyArIExJU1RJVEVNLCB0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVwZGF0ZVNlbGVjdGVkTm9kZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBzZWxlY3RlZE5vZGVzOiBbXSB9LCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBzTm9kZXMgPSBlajJfYmFzZV82LnNlbGVjdEFsbCgnLicgKyBBQ1RJVkUsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdEdpdmVuTm9kZXMoc05vZGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRvR2l2ZW5BY3Rpb24gPSBmdW5jdGlvbiAobm9kZXMsIHNlbGVjdG9yLCB0b0V4cGFuZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaUVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpY29uID0gZWoyX2Jhc2VfNi5zZWxlY3QoJy4nICsgc2VsZWN0b3IsIGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFRFWFRXUkFQLCBsaUVsZSkpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChpY29uKSkge1xuICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZCA/IHRoaXMuZXhwYW5kQWN0aW9uKGxpRWxlLCBpY29uLCBudWxsKSA6IHRoaXMuY29sbGFwc2VOb2RlKGxpRWxlLCBpY29uLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hZGRHaXZlbk5vZGVzID0gZnVuY3Rpb24gKG5vZGVzLCBkcm9wTGksIGluZGV4LCBpc1JlbW90ZSkge1xuICAgICAgICAgICAgdmFyIGxldmVsID0gZHJvcExpID8gcGFyc2VGbG9hdChkcm9wTGkuZ2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJykpICsgMSA6IDE7XG4gICAgICAgICAgICBpZiAoaXNSZW1vdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1hcHBlcihsZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGkgPSBlajJfbGlzdHNfMS5MaXN0QmFzZS5jcmVhdGVMaXN0SXRlbUZyb21Kc29uKG5vZGVzLCB0aGlzLmxpc3RCYXNlT3B0aW9uLCBsZXZlbCk7XG4gICAgICAgICAgICB2YXIgZHJvcFVsID0gZHJvcExpID8gdGhpcy5leHBhbmRQYXJlbnQoZHJvcExpKSA6IGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgcmVmTm9kZSA9IGRyb3BVbC5jaGlsZE5vZGVzW2luZGV4XTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkcm9wVWwuaW5zZXJ0QmVmb3JlKGxpW2ldLCByZWZOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmluYWxpemVOb2RlKGRyb3BVbCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS51cGRhdGVNYXBwZXIgPSBmdW5jdGlvbiAobGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciBtYXBwZXIgPSAobGV2ZWwgPT09IDEpID8gdGhpcy5maWVsZHMgOiB0aGlzLmdldENoaWxkRmllbGRzKHRoaXMuZmllbGRzLCBsZXZlbCAtIDEsIDEpO1xuICAgICAgICAgICAgdmFyIHByb3AgPSB0aGlzLmdldEFjdHVhbFByb3BlcnRpZXMobWFwcGVyKTtcbiAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzID0gcHJvcDtcbiAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzLnVybCA9IHByb3AubmF2aWdhdGVVcmw7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kb0Rpc2FibGVBY3Rpb24gPSBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBsaUVsZSA9IHRoaXMuZ2V0RWxlbWVudChub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobGlFbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsaUVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuYWRkQ2xhc3MoW2xpRWxlXSwgRElTQUJMRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5kb0VuYWJsZUFjdGlvbiA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaUVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpRWxlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYucmVtb3ZlQ2xhc3MoW2xpRWxlXSwgRElTQUJMRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS53aXJlSW5wdXRFdmVudHMgPSBmdW5jdGlvbiAoaW5wRWxlKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQoaW5wRWxlLCAnYmx1cicsIHRoaXMuaW5wdXRGb2N1c091dCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS53aXJlRWRpdGluZ0V2ZW50cyA9IGZ1bmN0aW9uICh0b0JpbmQpIHtcbiAgICAgICAgICAgIGlmICh0b0JpbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJveHlfMSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRWRpdE9iaiA9IG5ldyBlajJfYmFzZV83LlRvdWNoKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlVGFwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzEuZWRpdGluZ0hhbmRsZXIoZS5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZGJsY2xpY2snLCB0aGlzLmVkaXRpbmdIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzSW9zICYmIHRoaXMudG91Y2hFZGl0T2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFZGl0T2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdkYmxjbGljaycsIHRoaXMuZWRpdGluZ0hhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLndpcmVDbGlja0V2ZW50ID0gZnVuY3Rpb24gKHRvQmluZCkge1xuICAgICAgICAgICAgaWYgKHRvQmluZCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm94eV8yID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzSW9zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hDbGlja09iaiA9IG5ldyBlajJfYmFzZV83LlRvdWNoKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzIuY2xpY2tIYW5kbGVyKGUub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MgJiYgdGhpcy50b3VjaENsaWNrT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hDbGlja09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUud2lyZUV4cGFuZE9uRXZlbnQgPSBmdW5jdGlvbiAodG9CaW5kKSB7XG4gICAgICAgICAgICBpZiAodG9CaW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3h5XzMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kT25UeXBlID09PSAnY2xpY2snKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRXhwYW5kT2JqID0gbmV3IGVqMl9iYXNlXzcuVG91Y2godGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm94eV8zLmV4cGFuZEhhbmRsZXIoZS5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFeHBhbmRPYmogPSBuZXcgZWoyX2Jhc2VfNy5Ub3VjaCh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVUYXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzMuZXhwYW5kSGFuZGxlcihlLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCB0aGlzLmV4cGFuZE9uVHlwZSwgdGhpcy5leHBhbmRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzSW9zICYmIHRoaXMudG91Y2hFeHBhbmRPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaEV4cGFuZE9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCB0aGlzLmV4cGFuZE9uVHlwZSwgdGhpcy5leHBhbmRIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5tb3VzZURvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duU3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgJiYgdGhpcy5hbGxvd011bHRpU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NvbnRleHRtZW51ICcsIHRoaXMucHJldmVudENvbnRleHRNZW51LCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUucHJldmVudENvbnRleHRNZW51ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUNsaWNrRXZlbnQodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLndpcmVFeHBhbmRPbkV2ZW50KHRydWUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2ZvY3VzJywgdGhpcy5mb2N1c0luLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdibHVyJywgdGhpcy5mb2N1c091dCwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnbW91c2VvdmVyJywgdGhpcy5vbk1vdXNlT3ZlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnbW91c2VvdXQnLCB0aGlzLm9uTW91c2VMZWF2ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlID0gbmV3IGVqMl9iYXNlXzMuS2V5Ym9hcmRFdmVudHModGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAga2V5QWN0aW9uOiB0aGlzLmtleUFjdGlvbkhhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBrZXlDb25maWdzOiB0aGlzLmtleUNvbmZpZ3MsXG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAna2V5ZG93bicsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy53aXJlQ2xpY2tFdmVudChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLndpcmVFeHBhbmRPbkV2ZW50KGZhbHNlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdmb2N1cycsIHRoaXMuZm9jdXNJbik7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnYmx1cicsIHRoaXMuZm9jdXNPdXQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ21vdXNlb3ZlcicsIHRoaXMub25Nb3VzZU92ZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ21vdXNlb3V0JywgdGhpcy5vbk1vdXNlTGVhdmUpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5wYXJlbnRzID0gZnVuY3Rpb24gKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlZCA9IFtdO1xuICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgd2hpbGUgKCFlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGVsKSkge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV82Lm1hdGNoZXMoZWwsIHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVkLnB1c2goZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlZDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmlzRGVzY2VuZGFudCA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IGNoaWxkLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB3aGlsZSAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSA9PT0gcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuc2V0Q2hlY2tlZE5vZGVzID0gZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICAgICAgICBub2RlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobm9kZXMpKTtcbiAgICAgICAgICAgIHRoaXMudW5jaGVja0FsbCgpO1xuICAgICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQWxsKG5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dEcmFnQW5kRHJvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERyYWdBbmREcm9wKHRoaXMuYWxsb3dEcmFnQW5kRHJvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dFZGl0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lyZUVkaXRpbmdFdmVudHModGhpcy5hbGxvd0VkaXRpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93TXVsdGlTZWxlY3Rpb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWROb2Rlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNOb2RlID0gdGhpcy5nZXRFbGVtZW50KHRoaXMuc2VsZWN0ZWROb2Rlc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0QWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlKHNOb2RlLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VG91Y2hQb3B1cCh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNdWx0aVNlbGVjdCh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNdWx0aVNlbGVjdCh0aGlzLmFsbG93TXVsdGlTZWxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrZWROb2Rlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWROb2RlcyA9IG9sZFByb3AuY2hlY2tlZE5vZGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZE5vZGVzKG5ld1Byb3AuY2hlY2tlZE5vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjc3NDbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKG9sZFByb3AuY3NzQ2xhc3MsIG5ld1Byb3AuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEVuYWJsZVJ0bCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4cGFuZE9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lyZUV4cGFuZE9uRXZlbnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFeHBhbmRPblR5cGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lyZUV4cGFuZE9uRXZlbnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmllbGRzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzID0gdGhpcy5maWVsZHMucHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzLnVybCA9IHRoaXMuZmllbGRzLm5hdmlnYXRlVXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZVJlbmRlck5vZGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZnVsbFJvd1NlbGVjdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZ1bGxSb3codGhpcy5mdWxsUm93U2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRnVsbFJvdyh0aGlzLmZ1bGxSb3dTZWxlY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vZGVUZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVUZW1wbGF0ZUZuID0gdGhpcy50ZW1wbGF0ZUNvbXBsaWVyKHRoaXMubm9kZVRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVSZW5kZXJOb2RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdGVkTm9kZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHNlbGVjdGVkTm9kZXM6IG5ld1Byb3Auc2VsZWN0ZWROb2RlcyB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9TZWxlY3Rpb25BY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93Q2hlY2tCb3gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZVJlbmRlck5vZGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc29ydE9yZGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVSZW5kZXJOb2RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFZGl0aW5nRXZlbnRzKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMucmlwcGxlRm4oKTtcbiAgICAgICAgICAgIHRoaXMucmlwcGxlSWNvbkZuKCk7XG4gICAgICAgICAgICB0aGlzLnNldENzc0NsYXNzKHRoaXMuY3NzQ2xhc3MsIG51bGwpO1xuICAgICAgICAgICAgdGhpcy5zZXREcmFnQW5kRHJvcChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnNldEZ1bGxSb3coZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRUb3VjaFBvcHVwKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TXVsdGlTZWxlY3QoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5hZGROb2RlcyA9IGZ1bmN0aW9uIChub2RlcywgdGFyZ2V0LCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRyb3BMaSA9IHRoaXMuZ2V0RWxlbWVudCh0YXJnZXQpO1xuICAgICAgICAgICAgbm9kZXMgPSB0aGlzLmdldFNvcnRlZERhdGEobm9kZXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGRzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRHaXZlbk5vZGVzKG5vZGVzLCBkcm9wTGksIGluZGV4LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGF0YVR5cGUgPT09IDIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEdpdmVuTm9kZXMobm9kZXMsIGRyb3BMaSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGRyb3BMaSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEdpdmVuTm9kZXMobm9kZXMsIGRyb3BMaSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBpZCA9IG5vZGVzW2ldW3RoaXMuZmllbGRzLnBhcmVudElEXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BMaSA9IHBpZCA/IHRoaXMuZ2V0RWxlbWVudChwaWQudG9TdHJpbmcoKSkgOiBwaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEdpdmVuTm9kZXMoW25vZGVzW2ldXSwgZHJvcExpLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5jaGVja0FsbCA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0NoZWNrQm94QWN0aW9uKG5vZGVzLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmNvbGxhcHNlQWxsID0gZnVuY3Rpb24gKG5vZGVzLCBsZXZlbCwgZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0dpdmVuQWN0aW9uKG5vZGVzLCBDT0xMQVBTSUJMRSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlQnlMZXZlbChlajJfYmFzZV82LnNlbGVjdCgnLicgKyBQQVJFTlRJVEVNLCB0aGlzLmVsZW1lbnQpLCBsZXZlbCwgZXhjbHVkZUhpZGRlbk5vZGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGxOb2RlcyhleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmRpc2FibGVOb2RlcyA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0Rpc2FibGVBY3Rpb24odGhpcy5zZWxlY3RlZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9EaXNhYmxlQWN0aW9uKG5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmVuYWJsZUFsbCA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gZWoyX2Jhc2VfNi5zZWxlY3RBbGwoJy4nICsgRElTQUJMRSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGxpRWxlXzEgPSBsaUVsZTsgX2kgPCBsaUVsZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gbGlFbGVfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGVsZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5yZW1vdmVDbGFzcyhsaUVsZSwgRElTQUJMRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvRW5hYmxlQWN0aW9uKG5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmVuc3VyZVZpc2libGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobGlFbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudHMgPSB0aGlzLnBhcmVudHMobGlFbGUsICcuJyArIExJU1RJVEVNKTtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKHBhcmVudHMpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGxpRWxlLnNjcm9sbEludG9WaWV3KHRydWUpOyB9LCA0NTApO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUuZXhwYW5kQWxsID0gZnVuY3Rpb24gKG5vZGVzLCBsZXZlbCwgZXhjbHVkZUhpZGRlbk5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzcuaXNOdWxsT3JVbmRlZmluZWQobm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0dpdmVuQWN0aW9uKG5vZGVzLCBFWFBBTkRBQkxFLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRCeUxldmVsKGVqMl9iYXNlXzYuc2VsZWN0KCcuJyArIFBBUkVOVElURU0sIHRoaXMuZWxlbWVudCksIGxldmVsLCBleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlcyhleGNsdWRlSGlkZGVuTm9kZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudChub2RlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLmdldE5vZGVEZXRhaWxzID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmdldEVsZW1lbnQobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXROb2RlRGF0YShlbGUpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVlVmlldy5wcm90b3R5cGUubW92ZU5vZGVzID0gZnVuY3Rpb24gKHNvdXJjZU5vZGVzLCB0YXJnZXQsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZHJvcExpID0gdGhpcy5nZXRFbGVtZW50KHRhcmdldCk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChkcm9wTGkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkcmFnTGkgPSB0aGlzLmdldEVsZW1lbnQoc291cmNlTm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGRyYWdMaSkgfHwgZHJvcExpLmlzU2FtZU5vZGUoZHJhZ0xpKSB8fCB0aGlzLmlzRGVzY2VuZGFudChkcmFnTGksIGRyb3BMaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFzQ2hpbGROb2RlKGRyYWdMaSwgZHJvcExpLCB0aGlzLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZW1vdmVOb2RlcyA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpRWxlID0gdGhpcy5nZXRFbGVtZW50KG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChsaUVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTm9kZShsaUVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZWVWaWV3LnByb3RvdHlwZS5yZXBsYWNlVGV4dCA9IGZ1bmN0aW9uICh0YXJnZXQsIG5ld1RleHQpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldCkgfHwgZWoyX2Jhc2VfNy5pc051bGxPclVuZGVmaW5lZChuZXdUZXh0KSB8fCAhdGhpcy5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGlFbGUgPSB0aGlzLmdldEVsZW1lbnQodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV83LmlzTnVsbE9yVW5kZWZpbmVkKGxpRWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0eHRFbGUgPSBlajJfYmFzZV82LnNlbGVjdCgnLicgKyBMSVNUVEVYVCwgbGlFbGUpO1xuICAgICAgICAgICAgdHh0RWxlLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlID0gbmV3VGV4dDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlZVZpZXcucHJvdG90eXBlLnVuY2hlY2tBbGwgPSBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9DaGVja0JveEFjdGlvbihub2RlcywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVHJlZVZpZXc7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJhbGxvd0RyYWdBbmREcm9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImFsbG93RWRpdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJhbGxvd011bHRpU2VsZWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuQ29tcGxleCh7fSwgTm9kZUFuaW1hdGlvblNldHRpbmdzKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJhbmltYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImNoZWNrZWROb2Rlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCcnKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJlbmFibGVSdGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImV4cGFuZE9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuQ29tcGxleCh7fSwgRmllbGRzU2V0dGluZ3MpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImZpZWxkc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KHRydWUpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImZ1bGxSb3dTZWxlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5Qcm9wZXJ0eSgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwic2VsZWN0ZWROb2Rlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLlByb3BlcnR5KCdOb25lJylcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwic29ydE9yZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcInNob3dDaGVja0JveFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiZGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJkcmF3Tm9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwiZGVzdHJveWVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJrZXlQcmVzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUNoZWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVDaGVja2luZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZUNsaWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVDb2xsYXBzZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVDb2xsYXBzaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJub2RlRHJhZ2dpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVEcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVEcmFnU3RvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZURyb3BwZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVFZGl0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVFZGl0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJub2RlRXhwYW5kZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVFeHBhbmRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcIm5vZGVTZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBUcmVlVmlldy5wcm90b3R5cGUsIFwibm9kZVNlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgIFRyZWVWaWV3ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgVHJlZVZpZXcpO1xuICAgIGV4cG9ydHMuVHJlZVZpZXcgPSBUcmVlVmlldztcbiAgICBleHBvcnRzLnRyZWVWaWV3SGVscGVyID0gZWoyX2Jhc2VfMS5DcmVhdGVCdWlsZGVyKFRyZWVWaWV3KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdHJlZXZpZXcvdHJlZXZpZXcuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xN19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIlxuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ=="]}